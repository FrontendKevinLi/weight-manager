{"version":3,"file":"js/chunk-echarts.68562b94.js","mappings":"2SA8CWA,GAAkB,UAKtB,SAASC,EAAmBC,EAAeC,EAAiBC,EACnEC,EACAC,GACE,IAAIC,EAIJ,GAAIJ,GAAmBA,EAAgBK,QAAS,CAC9C,IAAIC,EAAgBN,EAAgBK,QAAQE,mBAC5CH,EAAmBE,GAAiBA,EAAcE,SACpD,CAEA,IAAIC,EAAmBT,GAAmBA,EAAgBU,qBACtDC,EAA6B,WAAlBZ,EAEf,GAAIU,EAAkB,CACpB,IAAIG,OAAW,EACXC,OAAS,EACTC,OAAQ,EAERZ,GACFU,GAAW,QAAUV,EAAUU,SAAU,KACzCC,GAAS,QAAUX,EAAUW,OAAQ,YACrCC,EAAQ,IAERF,EAAWZ,EAAgBe,WAAWJ,EAAW,0BAA4B,qBAC7EE,EAASb,EAAgBe,WAAWJ,EAAW,wBAA0B,mBACzEG,EAAQd,EAAgBe,WAAWJ,EAAW,uBAAyB,mBAIrEP,IAC2B,MAA7BA,EAAiBQ,WAAqBA,EAAWR,EAAiBQ,UACvC,MAA3BR,EAAiBS,SAAmBA,EAAST,EAAiBS,QACpC,MAA1BT,EAAiBU,QAAkBA,EAAQV,EAAiBU,SAG1D,QAAWA,KACbA,EAAQA,EAAMb,EAAWE,KAGvB,QAAWS,KACbA,EAAWA,EAASX,IAGtB,IAAIe,EAAS,CACXJ,SAAUA,GAAY,EACtBE,MAAOA,EACPD,OAAQA,GAEV,OAAOG,CACT,CACE,OAAO,IAEX,CAEA,SAASC,EAAkBlB,EAAemB,EAAIC,EAAOnB,EAAiBC,EAAWmB,EAAIC,GACnF,IACIC,EADAC,GAAS,GAGT,QAAWtB,IACboB,EAASD,EACTA,EAAKnB,EACLA,EAAY,OACH,QAASA,KAClBmB,EAAKnB,EAAUmB,GACfC,EAASpB,EAAUoB,OACnBE,EAAStB,EAAUsB,OACnBD,EAAYrB,EAAUqB,UACtBrB,EAAYA,EAAUA,WAGxB,IAAIuB,EAA6B,UAAlBzB,EAEVyB,GAEHN,EAAGO,cAAc,SAGnB,IAAIC,EAAkB5B,EAAmBC,EAAeC,EAAiBC,EAAWuB,EAAWF,GAAa,CAAC,EAAI,KAAMtB,GAAmBA,EAAgB2B,wBAA0B3B,EAAgB2B,wBAAwBT,EAAIjB,GAAa,MAE7O,GAAIyB,GAAmBA,EAAgBd,SAAW,EAAG,CACnD,IAAIA,EAAWc,EAAgBd,SAC3BgB,EAAiBF,EAAgBZ,MACjCe,EAAkBH,EAAgBb,OAClCiB,EAAgB,CAClBlB,SAAUA,EACVE,MAAOc,GAAkB,EACzBf,OAAQgB,EACRE,KAAMX,EACNY,QAASZ,KAAQC,EAGjBY,YAAaT,EACbU,MAAOnC,EACPsB,OAAQA,GAEVE,EAASL,EAAGiB,YAAYhB,EAAOW,GAAiBZ,EAAGkB,UAAUjB,EAAOW,EACtE,MACEZ,EAAGO,iBAEFF,GAAUL,EAAGmB,KAAKlB,GAEnBE,GAAUA,EAAO,GACjBD,GAAMA,GAEV,CAmBA,SAASkB,EAAYpB,EAAIC,EACzBnB,EAAiBC,EAAWmB,EAAIC,GAC9BJ,EAAkB,SAAUC,EAAIC,EAAOnB,EAAiBC,EAAWmB,EAAIC,EACzE,CAYO,SAASkB,EAAUrB,EAAIC,EAAOnB,EAAiBC,EAAWmB,EAAIC,GACnEJ,EAAkB,QAASC,EAAIC,EAAOnB,EAAiBC,EAAWmB,EAAIC,EACxE,CAMO,SAASmB,EAAiBtB,GAC/B,IAAKA,EAAGuB,KACN,OAAO,EAGT,IAAK,IAAIC,EAAI,EAAGA,EAAIxB,EAAGyB,UAAUC,OAAQF,IAAK,CAC5C,IAAIG,EAAW3B,EAAGyB,UAAUD,GAE5B,GAAuB,UAAnBG,EAASX,MACX,OAAO,CAEX,CAEA,OAAO,CACT,CAKO,SAASY,EAAc5B,EAAIC,EAAOnB,EAAiBC,EAAWmB,EAAIC,GAEnEmB,EAAiBtB,IAIrBD,EAAkB,QAASC,EAAIC,EAAOnB,EAAiBC,EAAWmB,EAAIC,EACxE,CAEA,SAAS0B,EAAmB7B,EAAIlB,EAAiBC,EAAW8B,GAC1Db,EAAG8B,oBACH9B,EAAG+B,sBACHH,EAAc5B,EAAI,CAChBgC,MAAO,CACLC,QAAS,IAEVnD,EAAiBC,EAAW8B,EACjC,CAEO,SAASqB,EAAyBlC,EAAIlB,EAAiBC,GAC5D,SAASoD,IACPnC,EAAGoC,QAAUpC,EAAGoC,OAAOC,OAAOrC,EAChC,CAIKA,EAAGsC,QAGNtC,EAAGuC,UAAS,SAAUC,GACfA,EAAKF,SAERT,EAAmBW,EAAM1D,EAAiBC,EAAWoD,EAEzD,IAPAN,EAAmB7B,EAAIlB,EAAiBC,EAAWoD,EASvD,CAQO,SAASM,EAAazC,GAC3BrB,EAAgBqB,GAAI0C,SAAW1C,EAAGgC,KACpC,C,gFC5NIW,EAAW,CACbC,QAAS,SAAUC,GAIjB,IAHA,IAAIC,EAAM,EACNC,EAAQ,EAEHvB,EAAI,EAAGA,EAAIqB,EAAMnB,OAAQF,IAC3BwB,MAAMH,EAAMrB,MACfsB,GAAOD,EAAMrB,GACbuB,KAKJ,OAAiB,IAAVA,EAAcE,IAAMH,EAAMC,CACnC,EACAD,IAAK,SAAUD,GAGb,IAFA,IAAIC,EAAM,EAEDtB,EAAI,EAAGA,EAAIqB,EAAMnB,OAAQF,IAEhCsB,GAAOD,EAAMrB,IAAM,EAGrB,OAAOsB,CACT,EACAI,IAAK,SAAUL,GAGb,IAFA,IAAIK,GAAOC,IAEF3B,EAAI,EAAGA,EAAIqB,EAAMnB,OAAQF,IAChCqB,EAAMrB,GAAK0B,IAAQA,EAAML,EAAMrB,IAIjC,OAAO4B,SAASF,GAAOA,EAAMD,GAC/B,EACAI,IAAK,SAAUR,GAGb,IAFA,IAAIQ,EAAMF,IAED3B,EAAI,EAAGA,EAAIqB,EAAMnB,OAAQF,IAChCqB,EAAMrB,GAAK6B,IAAQA,EAAMR,EAAMrB,IAIjC,OAAO4B,SAASC,GAAOA,EAAMJ,GAC/B,EAGAK,QAAS,SAAUT,GACjB,OAAOA,EAAM,EACf,GAGEU,EAAe,SAAUV,GAC3B,OAAOW,KAAKC,MAAMZ,EAAMnB,OAAS,EACnC,EAEe,SAASgC,EAAWC,GACjC,MAAO,CACLA,WAAYA,EAGZC,MAAO,SAAUC,EAAa1E,EAAS2E,GACrC,IAAIC,EAAOF,EAAYG,UACnBC,EAAWJ,EAAYK,IAAI,YAC3BC,EAAWN,EAAYO,iBACvBrB,EAAQgB,EAAKhB,QAEjB,GAAIA,EAAQ,IAAwB,gBAAlBoB,EAASE,MAA0BJ,EAAU,CAC7D,IAAIK,EAAWH,EAASI,cACpBC,EAAYL,EAASM,aAAaH,GAClCI,EAASJ,EAASK,YAClBC,EAAMd,EAAIe,sBAEVC,EAAOtB,KAAKuB,IAAIL,EAAO,GAAKA,EAAO,KAAOE,GAAO,GACjDI,EAAOxB,KAAKC,MAAMV,EAAQ+B,GAE9B,GAAI1B,SAAS4B,IAASA,EAAO,EAAG,CACb,SAAbf,GACFJ,EAAYoB,QAAQlB,EAAKmB,eAAenB,EAAKoB,aAAaX,EAAUY,KAAM,EAAIJ,IAGhF,IAAIK,OAAU,GAEV,QAASpB,GACXoB,EAAU1C,EAASsB,IACV,QAAWA,KACpBoB,EAAUpB,GAGRoB,GAEFxB,EAAYoB,QAAQlB,EAAKuB,WAAWvB,EAAKoB,aAAaX,EAAUY,KAAM,EAAIJ,EAAMK,EAAS9B,GAE7F,CACF,CACF,EAEJ,C,iCClGA,SAASgC,EAAwBC,GAC/B,OAAqC,MAA9BA,EAAqC,EAAIA,EAA2B9D,QAAU,CACvF,CAEA,SAAS+D,EAAiBC,GACxB,OAAOA,CACT,CAEA,IAAIC,EAEJ,WAIE,SAASA,EAAWC,EAAQC,EAAQC,EAAcC,EAAcC,EAChEC,GACEC,KAAKC,KAAOP,EACZM,KAAKE,KAAOP,EACZK,KAAKG,cAAgBP,GAAgBL,EACrCS,KAAKI,cAAgBP,GAAgBN,EAErCS,KAAKF,QAAUA,EACfE,KAAKK,kBAAiC,aAAbN,CAC3B,CA+NA,OAzNAN,EAAWa,UAAUC,IAAM,SAAUC,GAEnC,OADAR,KAAKS,KAAOD,EACLR,IACT,EAMAP,EAAWa,UAAUI,OAAS,SAAUF,GAEtC,OADAR,KAAKW,QAAUH,EACRR,IACT,EAMAP,EAAWa,UAAUM,gBAAkB,SAAUJ,GAE/C,OADAR,KAAKa,iBAAmBL,EACjBR,IACT,EAMAP,EAAWa,UAAUQ,gBAAkB,SAAUN,GAE/C,OADAR,KAAKe,iBAAmBP,EACjBR,IACT,EAMAP,EAAWa,UAAUU,iBAAmB,SAAUR,GAEhD,OADAR,KAAKiB,kBAAoBT,EAClBR,IACT,EAMAP,EAAWa,UAAUnE,OAAS,SAAUqE,GAEtC,OADAR,KAAKkB,QAAUV,EACRR,IACT,EAEAP,EAAWa,UAAUa,QAAU,WAC7BnB,KAAKA,KAAKK,kBAAoB,mBAAqB,qBACrD,EAEAZ,EAAWa,UAAUc,iBAAmB,WACtC,IAAI1B,EAASM,KAAKC,KACdN,EAASK,KAAKE,KACdmB,EAAkB,CAAC,EACnBC,EAAgB,IAAIC,MAAM7B,EAAOlE,QACjCgG,EAAgB,IAAID,MAAM5B,EAAOnE,QAErCwE,KAAKyB,cAAc/B,EAAQ,KAAM4B,EAAe,iBAEhDtB,KAAKyB,cAAc9B,EAAQ0B,EAAiBG,EAAe,iBAE3D,IAAK,IAAIlG,EAAI,EAAGA,EAAIoE,EAAOlE,OAAQF,IAAK,CACtC,IAAIoG,EAASJ,EAAchG,GACvBqG,EAAeN,EAAgBK,GAC/BE,EAAkBvC,EAAwBsC,GAE9C,GAAIC,EAAkB,EAAG,CAGvB,IAAIC,EAASF,EAAaG,QAEE,IAAxBH,EAAanG,SACf6F,EAAgBK,GAAUC,EAAa,IAGzC3B,KAAKW,SAAWX,KAAKW,QAAQkB,EAAQvG,EACvC,MAA+B,IAApBsG,GACTP,EAAgBK,GAAU,KAC1B1B,KAAKW,SAAWX,KAAKW,QAAQgB,EAAcrG,IAE3C0E,KAAKkB,SAAWlB,KAAKkB,QAAQ5F,EAEjC,CAEA0E,KAAK+B,gBAAgBP,EAAeH,EACtC,EA4BA5B,EAAWa,UAAU0B,iBAAmB,WACtC,IAAItC,EAASM,KAAKC,KACdN,EAASK,KAAKE,KACd+B,EAAkB,CAAC,EACnBZ,EAAkB,CAAC,EACnBC,EAAgB,GAChBE,EAAgB,GAEpBxB,KAAKyB,cAAc/B,EAAQuC,EAAiBX,EAAe,iBAE3DtB,KAAKyB,cAAc9B,EAAQ0B,EAAiBG,EAAe,iBAE3D,IAAK,IAAIlG,EAAI,EAAGA,EAAIgG,EAAc9F,OAAQF,IAAK,CAC7C,IAAIoG,EAASJ,EAAchG,GACvB4G,EAAeD,EAAgBP,GAC/BC,EAAeN,EAAgBK,GAC/BS,EAAkB9C,EAAwB6C,GAC1CN,EAAkBvC,EAAwBsC,GAE9C,GAAIQ,EAAkB,GAAyB,IAApBP,EACzB5B,KAAKa,kBAAoBb,KAAKa,iBAAiBc,EAAcO,GAC7Db,EAAgBK,GAAU,UACrB,GAAwB,IAApBS,GAAyBP,EAAkB,EACpD5B,KAAKe,kBAAoBf,KAAKe,iBAAiBY,EAAcO,GAC7Db,EAAgBK,GAAU,UACrB,GAAwB,IAApBS,GAA6C,IAApBP,EAClC5B,KAAKW,SAAWX,KAAKW,QAAQgB,EAAcO,GAC3Cb,EAAgBK,GAAU,UACrB,GAAIS,EAAkB,GAAKP,EAAkB,EAClD5B,KAAKiB,mBAAqBjB,KAAKiB,kBAAkBU,EAAcO,GAC/Db,EAAgBK,GAAU,UACrB,GAAIS,EAAkB,EAC3B,IAAK,IAAIC,EAAM,EAAGA,EAAMD,EAAiBC,IACvCpC,KAAKkB,SAAWlB,KAAKkB,QAAQgB,EAAaE,SAG5CpC,KAAKkB,SAAWlB,KAAKkB,QAAQgB,EAEjC,CAEAlC,KAAK+B,gBAAgBP,EAAeH,EACtC,EAEA5B,EAAWa,UAAUyB,gBAAkB,SAAUP,EAAeH,GAC9D,IAAK,IAAI/F,EAAI,EAAGA,EAAIkG,EAAchG,OAAQF,IAAK,CAC7C,IAAI+G,EAASb,EAAclG,GACvBqG,EAAeN,EAAgBgB,GAC/BC,EAAejD,EAAwBsC,GAE3C,GAAIW,EAAe,EACjB,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAcC,IAChCvC,KAAKS,MAAQT,KAAKS,KAAKkB,EAAaY,SAEZ,IAAjBD,GACTtC,KAAKS,MAAQT,KAAKS,KAAKkB,GAIzBN,EAAgBgB,GAAU,IAC5B,CACF,EAEA5C,EAAWa,UAAUmB,cAAgB,SAAUe,EAC/CC,EAGAC,EAAQC,GAGN,IAFA,IAAIC,EAAiB5C,KAAKK,kBAEjB/E,EAAI,EAAGA,EAAIkH,EAAIhH,OAAQF,IAAK,CAEnC,IAAIuH,EAAM,OAAS7C,KAAK2C,GAAeH,EAAIlH,GAAIA,GAM/C,GAJKsH,IACHF,EAAOpH,GAAKuH,GAGTJ,EAAL,CAIA,IAAIK,EAAYL,EAAII,GAChBP,EAAejD,EAAwByD,GAEtB,IAAjBR,GAGFG,EAAII,GAAOvH,EAEPsH,GACFF,EAAOK,KAAKF,IAEY,IAAjBP,EACTG,EAAII,GAAO,CAACC,EAAWxH,GAEvBwH,EAAUC,KAAKzH,EAhBjB,CAkBF,CACF,EAEOmE,CACT,CA7OA,GA+OA,I,oBCtPIuD,EAEJ,WACE,SAASA,EAAmBC,EAAQC,GAClClD,KAAKmD,QAAUF,EACfjD,KAAKoD,QAAUF,CACjB,CA0BA,OAxBAF,EAAmB1C,UAAUtC,IAAM,WACjC,MAAO,CAELqF,eAAgBrD,KAAKsD,yBACrBL,OAAQjD,KAAKmD,QAEjB,EAUAH,EAAmB1C,UAAUgD,uBAAyB,WAKpD,OAJKtD,KAAKuD,kBACRvD,KAAKuD,gBAAkBvD,KAAKoD,QAAUpD,KAAKoD,QAAQI,2BAA6B,IAG3ExD,KAAKuD,eACd,EAEOP,CACT,CA/BA,GAkCO,SAASS,EAAoB5F,EAAM6F,GACxC,IAAIC,EAAU,CAAC,EACXV,EAASU,EAAQV,OAAS,CAAC,EAC3BW,GAAsB,UACtBC,EAAiB,GACjBC,EAAmB,GACnBC,EAAmB,CAAC,GACxB,QAAKlG,EAAKmG,YAAY,SAAUC,GAC9B,IAAIC,EAAUrG,EAAKsG,iBAAiBF,GAChCG,EAAWF,EAAQE,SAEvB,GAAIA,EAAU,CACR,EAIJ,IAAIC,EAAgBH,EAAQG,cAC5BC,EAAqBrB,EAAQmB,GAAUC,GAAiBJ,EAEnDC,EAAQK,eACXX,EAAoBY,IAAIJ,EAAU,GAK9BK,EAAgBP,EAAQ/F,QAC1B0F,EAAe,GAAKI,GAKtBK,EAAqBP,EAAkBK,GAAUC,GAAiBxG,EAAK6G,kBAAkBR,EAAQS,OAG/FT,EAAQU,gBACVd,EAAiBf,KAAKkB,EAE1B,CAEA,WAAuB,SAAUY,EAAGC,GAClC,IAAIC,EAAYT,EAAqBrB,EAAQ6B,GACzCE,EAAWd,EAAQe,UAAUH,GAEjB,MAAZE,IAAiC,IAAbA,IACtBD,EAAUC,GAAYd,EAAQS,KAElC,GACF,IACA,IAAIO,EAAkB,GAClBC,EAAyB,CAAC,EAC9BvB,EAAoBwB,MAAK,SAAUP,EAAGT,GACpC,IAAIiB,EAASpC,EAAOmB,GACpBe,EAAuBf,GAAYiB,EAAO,GAG1CH,EAAkBA,EAAgBI,OAAOD,EAC3C,IACA1B,EAAQuB,gBAAkBA,EAC1BvB,EAAQ4B,uBAAwB,QAAIL,GAAiB,SAAUjB,GAC7D,OAAOpG,EAAKsG,iBAAiBF,GAASuB,aACxC,IACA7B,EAAQwB,uBAAyBA,EACjC,IAAIM,EAAcxC,EAAOyC,MAGrBD,GAAeA,EAAYjK,SAC7BqI,EAAiB4B,EAAYE,SAG/B,IAAIC,EAAgB3C,EAAO4C,QAW3B,OATID,GAAiBA,EAAcpK,OACjCsI,EAAmB8B,EAAcD,QACvB7B,EAAiBtI,SAC3BsI,EAAmBD,EAAe8B,SAGpC1C,EAAOY,eAAiBA,EACxBZ,EAAOa,iBAAmBA,EAC1BH,EAAQmC,WAAa,IAAI9C,EAAmBe,EAAkBL,GACvDC,CACT,CAEA,SAASW,EAAqBrB,EAAQ/D,GAKpC,OAJK+D,EAAO8C,eAAe7G,KACzB+D,EAAO/D,GAAO,IAGT+D,EAAO/D,EAChB,CAGO,SAAS8G,EAAuBC,GACrC,MAAoB,aAAbA,EAA0B,UAAyB,SAAbA,EAAsB,OAAS,OAC9E,CAEA,SAASxB,EAAgByB,GAGvB,QAAqB,YAAZA,GAAqC,SAAZA,EACpC,CCzIA,ICyBIC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,ED/BAC,EAEJ,WAIE,SAASA,EAAsBC,GAkC7B3G,KAAKiF,UAAY,CAAC,EAEP,MAAP0B,GACF,KAAc3G,KAAM2G,EAExB,CAEA,OAAOD,CACT,CA9CA,GAiDA,I,iDCvCIE,EAAW,KACXnE,EAAM,KACNoE,EAAuC,qBAAfC,WAA6BvF,MAAQuF,WAG7DC,EAAY,QACZC,GAAmB,EAEnBC,EAA0B,CAAC,gBAAiB,YAAa,UAAW,sBAAuB,cAAe,aAAc,WAAY,kBAAmB,cAAe,YAAa,oBACnLC,EAAmB,CAAC,sBAYpBC,EAEJ,WAME,SAASA,EAAWC,EAAiBC,GAgCnC,IAAIrD,EA/BJhE,KAAK7B,KAAO,OACZ6B,KAAKsH,aAAc,EACnBtH,KAAKuH,UAAY,GACjBvH,KAAKwH,QAAU,GAKfxH,KAAKyH,QAAU,CAAC,EAEhBzH,KAAK0H,QAAU,CAAC,EAEhB1H,KAAK2H,aAAe,GAEpB3H,KAAK4H,aAAe,GAEpB5H,KAAK6H,YAAc,GAEnB7H,KAAK8H,mBAAqB,CAAC,EAC3B9H,KAAK+H,iBAAmB,CAAC,EAKzB/H,KAAKgI,eAAgB,EAGrBhI,KAAKiI,qBAAuB,CAAC,eAAgB,aAAc,iBAAkB,OAE7EjI,KAAKkI,kBAAoB,CAAC,aAAc,eACxClI,KAAKmI,mBAAqB,CAAC,aAAc,kBAEzC,IAAIC,GAAoB,GAEpB,QAAmBhB,IACrBpD,EAAaoD,EAAgBpD,WAC7BhE,KAAKsH,YAAcF,EAAgBiB,qBACnCrI,KAAKoD,QAAUgE,IAEfgB,GAAoB,EACpBpE,EAAaoD,GAGfpD,EAAaA,GAAc,CAAC,IAAK,KAOjC,IANA,IAAIsE,EAAiB,CAAC,EAClBC,EAAiB,GACjBC,EAAqB,CAAC,EACtBC,GAAc,EACdC,EAAW,CAAC,EAEPpN,EAAI,EAAGA,EAAI0I,EAAWxI,OAAQF,IAAK,CAE1C,IAAIqN,EAAe3E,EAAW1I,GAC1BsN,EAAgB,KAAgBD,GAAgB,IAAI,EAAsB,CAC5EhE,KAAMgE,IACDA,aAAwB,EAAmEA,EAA1C,IAAI,EAAsBA,GAC9EE,EAAgBD,EAAcjE,KAClCiE,EAAczK,KAAOyK,EAAczK,MAAQ,QAEtCyK,EAAcxE,WACjBwE,EAAcxE,SAAWyE,EACzBD,EAAcvE,cAAgB,GAGhC,IAAIY,EAAY2D,EAAc3D,UAAY2D,EAAc3D,WAAa,CAAC,EACtEsD,EAAexF,KAAK8F,GACpBP,EAAeO,GAAiBD,EAED,MAA3BF,EAASG,KACXJ,GAAc,GAGZG,EAAcE,wBAChBN,EAAmBK,GAAiB,IAGX,IAAvB5D,EAAU8D,WACZ/I,KAAKgJ,YAAc1N,GAGI,IAArB2J,EAAUgE,SACZjJ,KAAKkJ,UAAY5N,GAOf8M,IACFQ,EAAcpD,cAAgBlK,EAElC,CAUA,GARA0E,KAAKgE,WAAauE,EAClBvI,KAAKmJ,UAAYb,EAEjBtI,KAAKoJ,sBAAsBX,GAE3BzI,KAAKqH,UAAYA,EACjBrH,KAAKqJ,oBAAsBb,EAEvBxI,KAAKsH,YAAa,CACpB,IAAIgC,EAAiBtJ,KAAKuJ,cAAgB,OAC1C,KAAYhB,GAAgB,SAAUtE,GACpCqF,EAAe9E,IAAI8D,EAAerE,GAASuB,cAAevB,EAC5D,GACF,CACF,CAi/BA,OA79BAkD,EAAW7G,UAAUkJ,aAAe,SAAUtK,GAC5C,IAAIuK,EAASzJ,KAAK0J,mBAAmBxK,GAErC,GAAc,MAAVuK,EACF,OAAOvK,EAKT,GAFAuK,EAASvK,GAEJc,KAAKsH,YACR,OAAOtH,KAAKgE,WAAWyF,GAKzB,IAAIxF,EAAUjE,KAAKuJ,cAAcvL,IAAIyL,GAErC,GAAe,MAAXxF,EACF,OAAOA,EAGT,IAAI0F,EAAe3J,KAAKoD,QAAQwG,mBAAmBH,GAEnD,OAAIE,EACKA,EAAahF,UADtB,CAGF,EAOAwC,EAAW7G,UAAUoE,kBAAoB,SAAUxF,GACjD,IAAIuK,EAASzJ,KAAK0J,mBAAmBxK,GAErC,GAAc,MAAVuK,EACF,OAAOA,EAGT,GAAW,MAAPvK,EACF,OAAQ,EAGV,IAAI2K,EAAU7J,KAAK8J,YAAY5K,GAE/B,OAAO2K,EAAUA,EAAQrE,cAAgBxF,KAAKsH,YAActH,KAAKoD,QAAQ2G,wBAAwB7K,IAAQ,CAC3G,EAsBAiI,EAAW7G,UAAUoJ,mBAAqB,SAAUxK,GAClD,GAAI,KAAgBA,IACV,MAAPA,IAAgBpC,MAAMoC,KAASc,KAAK8J,YAAY5K,MAAUc,KAAKsH,aAAetH,KAAKoD,QAAQ2G,wBAAwB7K,GAAO,GAC3H,OAAQA,CAEZ,EAEAiI,EAAW7G,UAAU0J,kBAAoB,SAAU9K,GACjD,IAAIuK,EAASzJ,KAAK0E,kBAAkBxF,GAQpC,OAAOuK,CACT,EASAtC,EAAW7G,UAAU6D,iBAAmB,SAAUjF,GAEhD,OAAOc,KAAK8J,YAAY9J,KAAKwJ,aAAatK,GAC5C,EAEAiI,EAAW7G,UAAU8I,sBAAwB,SAAUX,GACrD,IAAIH,EAAiBtI,KAAKmJ,UAC1BnJ,KAAK8J,YAAcrB,EAAc,SAAUxE,GACzC,OAAOqE,EAAevC,eAAe9B,GAAWqE,EAAerE,QAAWgG,CAC5E,EAAI,SAAUhG,GACZ,OAAOqE,EAAerE,EACxB,CACF,EAMAkD,EAAW7G,UAAU4J,qBAAuB,WAC1C,OAAOlK,KAAKmK,YAAYjF,gBAAgBS,OAC1C,EAEAwB,EAAW7G,UAAUrB,aAAe,SAAUmF,EAAUgG,GACtD,IAAIC,EAAoBrK,KAAKmK,YAE7B,GAAW,MAAPC,EACF,OAAOC,EAAkBlF,uBAAuBf,GAGlD,IAAIkG,EAAOD,EAAkBpH,OAAOmB,GACpC,OAAOkG,EAAOA,EAAKF,GAAO,IAC5B,EAEAjD,EAAW7G,UAAUiK,iBAAmB,SAAUnG,GAChD,IAAIiG,EAAoBrK,KAAKmK,YACzBG,EAAOD,EAAkBpH,OAAOmB,GACpC,OAAQkG,GAAQ,IAAI3E,OACtB,EAEAwB,EAAW7G,UAAUkK,SAAW,WAC9B,OAAOxK,KAAKyK,MACd,EAYAtD,EAAW7G,UAAUoK,SAAW,SAAU7M,EAAM8M,EAAUC,GACxD,IAEIC,EAFAC,EAAQ9K,KAQZ,GAJInC,aAAgBkN,EAAA,KAClBF,EAAQhN,IAGLgN,EAAO,CACV,IAAI7G,EAAahE,KAAKgE,WAClBgH,GAAW,QAAiBnN,IAAS,KAAmBA,GAAQ,IAAI,KAAoBA,EAAMmG,EAAWxI,QAAUqC,EACvHgN,EAAQ,IAAIE,EAAA,GACZ,IAAIzC,EAAiB7F,EAAIuB,GAAY,SAAUC,GAC7C,MAAO,CACL9F,KAAM2M,EAAM3B,UAAUlF,GAAS9F,KAC/B8M,SAAUhH,EAEd,IACA4G,EAAMH,SAASM,EAAU1C,EAAgBsC,EAC3C,CAEA5K,KAAKyK,OAASI,EAEd7K,KAAKuH,WAAaoD,GAAY,IAAIhF,QAClC3F,KAAKwH,QAAU,GACfxH,KAAKkL,iBAAmB,CAAC,EAEzBlL,KAAKmL,QAAQ,EAAGN,EAAMhO,SAItBmD,KAAKmK,YAAc1G,EAAoBzD,KAAMA,KAAKoD,SAClDpD,KAAK8F,WAAa9F,KAAKmK,YAAYrE,UACrC,EAMAqB,EAAW7G,UAAU8K,WAAa,SAAUvN,GAC1C,IAAIwN,EAAQrL,KAAKyK,OAAOW,WAAWvN,GAEnCmC,KAAKmL,QAAQE,EAAM,GAAIA,EAAM,GAC/B,EAkBAlE,EAAW7G,UAAUgL,aAAe,SAAUC,EAAQC,GACpD,IAAIC,EAAKzL,KAAKyK,OAAOa,aAAaC,EAAQC,EAAMhQ,QAC5CkQ,EAAQD,EAAGC,MACXC,EAAMF,EAAGE,IAETC,EAAuB5L,KAAK6L,wBAIhC,GAFA7L,KAAK8L,qBAEDN,EACF,IAAK,IAAIpB,EAAMsB,EAAOtB,EAAMuB,EAAKvB,IAAO,CACtC,IAAI2B,EAAY3B,EAAMsB,EACtB1L,KAAKuH,UAAU6C,GAAOoB,EAAMO,GAExBH,GACFnF,EAAezG,KAAMoK,EAEzB,CAEJ,EAEAjD,EAAW7G,UAAUwL,mBAAqB,WAIxC,IAHA,IAAIjB,EAAQ7K,KAAKyK,OACbzG,EAAahE,KAAKgE,WAEb1I,EAAI,EAAGA,EAAI0I,EAAWxI,OAAQF,IAAK,CAC1C,IAAIuO,EAAU7J,KAAKmJ,UAAUnF,EAAW1I,IAEpCuO,EAAQmC,aACVnB,EAAMoB,mBAAmBpC,EAAQrE,cAAeqE,EAAQmC,YAE5D,CACF,EAEA7E,EAAW7G,UAAUuL,sBAAwB,WAC3C,IAAIb,EAAWhL,KAAKyK,OAAOyB,cAE3B,OAAyB,MAAlBlM,KAAKkJ,WAAqB8B,EAASmB,YAAYC,eAAiB,OAA8BpB,EAASqB,WAChH,EAEAlF,EAAW7G,UAAU6K,QAAU,SAAUO,EAAOC,GAC9C,KAAID,GAASC,GAAb,CAIA,IAAId,EAAQ7K,KAAKyK,OACbO,EAAWH,EAAMqB,cAErBlM,KAAK8L,qBAEL,IAAInB,EAAW3K,KAAKuH,UAChB+E,EAAStM,KAAKwH,QACd4E,EAAepB,EAASmB,YAAYC,aACpCG,EAAmBH,IAAiB,KASxC,GAAIG,IAAqBvB,EAASwB,KAGhC,IAFA,IAAIC,EAAiB,GAEZrC,EAAMsB,EAAOtB,EAAMuB,EAAKvB,IAAO,CAEtC,IAAIsC,EAAW1B,EAAS2B,QAAQvC,EAAKqC,GAMrC,IAJKzM,KAAKgI,gBAAiB,QAAiB0E,KAC1C1M,KAAKgI,eAAgB,GAGnB0E,EAAU,CACZ,IAAI3D,EAAW2D,EAAS/H,KAEH,MAAjBgG,EAASP,IAA4B,MAAZrB,IAC3B4B,EAASP,IAAO,QAAoBrB,EAAU,OAGhD,IAAIE,EAASyD,EAASE,GAEH,MAAfN,EAAOlC,IAA0B,MAAVnB,IACzBqD,EAAOlC,IAAO,QAAoBnB,EAAQ,MAE9C,CACF,CAGF,GAAIjJ,KAAK6L,wBACP,IAASzB,EAAMsB,EAAOtB,EAAMuB,EAAKvB,IAC/B3D,EAAezG,KAAMoK,GAIzBjE,EAAqBnG,KApDrB,CAqDF,EAiBAmH,EAAW7G,UAAUuM,qBAAuB,SAAU3N,GACpD,OAAOc,KAAK8H,mBAAmB5I,IAAQc,KAAKyK,OAAOqC,cAAc9M,KAAKgK,kBAAkB9K,GAC1F,EAOAiI,EAAW7G,UAAUyM,qBAAuB,SAAUvO,EAAQU,GAC5DA,EAAMc,KAAKwJ,aAAatK,GACxBc,KAAK8H,mBAAmB5I,GAAOV,EAAOmH,OACxC,EAEAwB,EAAW7G,UAAU0M,mBAAqB,SAAUnK,GAClD,OAAO7C,KAAK+H,iBAAiBlF,EAC/B,EAEAsE,EAAW7G,UAAU2M,mBAAqB,SAAUpK,EAAKqK,GACvDtG,EAAS/D,GAAO,KAAc7C,KAAK+H,iBAAkBlF,GAAO7C,KAAK+H,iBAAiBlF,GAAOqK,CAC3F,EASA/F,EAAW7G,UAAU6M,QAAU,SAAU/C,GACvC,IAAIgD,EAAWpN,KAAKqN,YAAYjD,GAC5BzF,EAAO3E,KAAKuH,UAAU6F,GAU1B,OARY,MAARzI,GAAoC,MAApB3E,KAAKgJ,cACvBrE,EAAO0B,EAAmBrG,KAAMA,KAAKgJ,YAAaoE,IAGxC,MAARzI,IACFA,EAAO,IAGFA,CACT,EAEAwC,EAAW7G,UAAUgN,aAAe,SAAU7D,EAAQW,GACpD,IAAImD,EAAUvN,KAAKyK,OAAOzM,IAAIyL,EAAQW,GAElC4B,EAAchM,KAAKyK,OAAO+C,eAAe/D,GAE7C,OAAIuC,EACKA,EAAYyB,WAAWF,GAGzBA,CACT,EASApG,EAAW7G,UAAU8F,MAAQ,SAAUgE,GACrC,OAAOhE,EAAMpG,KAAMA,KAAKqN,YAAYjD,GACtC,EAEAjD,EAAW7G,UAAUzD,MAAQ,WAC3B,OAAOmD,KAAKyK,OAAO5N,OACrB,EAQAsK,EAAW7G,UAAUtC,IAAM,SAAUkB,EAAKkL,GACxC,IAAIS,EAAQ7K,KAAKyK,OACbZ,EAAU7J,KAAKmJ,UAAUjK,GAE7B,GAAI2K,EACF,OAAOgB,EAAM7M,IAAI6L,EAAQrE,cAAe4E,EAE5C,EAMAjD,EAAW7G,UAAUoN,cAAgB,SAAUxO,EAAKyO,GAClD,IAAI9C,EAAQ7K,KAAKyK,OACbZ,EAAU7J,KAAKmJ,UAAUjK,GAE7B,GAAI2K,EACF,OAAOgB,EAAM6C,cAAc7D,EAAQrE,cAAemI,EAEtD,EAEAxG,EAAW7G,UAAUsN,WAAa,WAChC,OAAO5N,KAAKyK,OAAOmD,YACrB,EAEAzG,EAAW7G,UAAUwM,cAAgB,SAAU5N,GAC7C,OAAOc,KAAKyK,OAAOqC,cAAc9M,KAAKgK,kBAAkB9K,GAC1D,EAEAiI,EAAW7G,UAAUuN,OAAS,SAAU3O,GACtC,OAAOc,KAAKyK,OAAOoD,OAAO7N,KAAKgK,kBAAkB9K,GACnD,EAEAiI,EAAW7G,UAAUwN,UAAY,SAAU5O,GACzC,OAAOc,KAAKyK,OAAOqD,UAAU9N,KAAKgK,kBAAkB9K,GACtD,EAEAiI,EAAW7G,UAAUyN,UAAY,SAAU/J,EAAYoG,GACrD,IAAIU,EAAQ9K,KAER6K,EAAQ7K,KAAKyK,OACjB,OAAO,KAAezG,GAAc6G,EAAMkD,UAAUtL,EAAIuB,GAAY,SAAU9E,GAC5E,OAAO4L,EAAMd,kBAAkB9K,EACjC,IAAIkL,GAAOS,EAAMkD,UAAU/J,EAC7B,EAOAmD,EAAW7G,UAAU0N,SAAW,SAAU5D,GAGxC,IAFA,IAAI7E,EAAwBvF,KAAKmK,YAAY5E,sBAEpCjK,EAAI,EAAG2S,EAAM1I,EAAsB/J,OAAQF,EAAI2S,EAAK3S,IAI3D,GAAIwB,MAAMkD,KAAKyK,OAAOzM,IAAIuH,EAAsBjK,GAAI8O,IAClD,OAAO,EAIX,OAAO,CACT,EAMAjD,EAAW7G,UAAU4N,YAAc,SAAUvJ,GAC3C,IAAK,IAAIrJ,EAAI,EAAG2S,EAAMjO,KAAKyK,OAAO5N,QAASvB,EAAI2S,EAAK3S,IAClD,GAAI0E,KAAKmN,QAAQ7R,KAAOqJ,EACtB,OAAOrJ,EAIX,OAAQ,CACV,EAEA6L,EAAW7G,UAAU+M,YAAc,SAAUjD,GAC3C,OAAOpK,KAAKyK,OAAO4C,YAAYjD,EACjC,EAEAjD,EAAW7G,UAAU6N,gBAAkB,SAAUf,GAC/C,OAAOpN,KAAKyK,OAAO0D,gBAAgBf,EACrC,EAUAjG,EAAW7G,UAAU8N,WAAa,SAAUlP,EAAKgO,GAC/C,IAAImB,EAAkBnP,GAAOc,KAAKqJ,oBAAoBnK,GAQtD,IAAIkO,EAAWiB,EAAgBnB,GAE/B,OAAgB,MAAZE,GAAoBtQ,MAAMsQ,GACrBpG,EAGFoG,CACT,EAWAjG,EAAW7G,UAAUgO,iBAAmB,SAAUpP,EAAKgO,EAAOqB,GAC5D,OAAOvO,KAAKyK,OAAO6D,iBAAiBtO,KAAKgK,kBAAkB9K,GAAMgO,EAAOqB,EAC1E,EAEApH,EAAW7G,UAAU8E,KAAO,SAAUkF,EAAMtQ,EAAIwU,GAG1C,KAAkBlE,KACpBkE,EAAMxU,EACNA,EAAKsQ,EACLA,EAAO,IAIT,IAAImE,EAAOD,GAAOxO,KACd0O,EAAajM,EAAI6D,EAAoBgE,GAAOtK,KAAKgK,kBAAmBhK,MAExEA,KAAKyK,OAAOrF,KAAKsJ,EAAYD,EAAO,KAAYzU,EAAIyU,GAAQzU,EAC9D,EAEAmN,EAAW7G,UAAUqO,WAAa,SAAUrE,EAAMtQ,EAAIwU,GAGhD,KAAkBlE,KACpBkE,EAAMxU,EACNA,EAAKsQ,EACLA,EAAO,IAIT,IAAImE,EAAOD,GAAOxO,KACd0O,EAAajM,EAAI6D,EAAoBgE,GAAOtK,KAAKgK,kBAAmBhK,MAExE,OADAA,KAAKyK,OAASzK,KAAKyK,OAAOmE,OAAOF,EAAYD,EAAO,KAAYzU,EAAIyU,GAAQzU,GACrEgG,IACT,EAOAmH,EAAW7G,UAAUuO,YAAc,SAAUxD,GAG3C,IAAIP,EAAQ9K,KAER8O,EAAa,CAAC,EACdxE,EAAO,KAAYe,GACnBqD,EAAa,GAQjB,OAPA,KAAYpE,GAAM,SAAUpL,GAC1B,IAAIuK,EAASqB,EAAMd,kBAAkB9K,GAErC4P,EAAWrF,GAAU4B,EAAMnM,GAC3BwP,EAAW3L,KAAK0G,EAClB,IACAzJ,KAAKyK,OAASzK,KAAKyK,OAAOoE,YAAYC,GAC/B9O,IACT,EAIAmH,EAAW7G,UAAUyO,SAAW,SAAUzE,EAAMtQ,EAAIwU,GAG9C,KAAkBlE,KACpBkE,EAAMxU,EACNA,EAAKsQ,EACLA,EAAO,IAITkE,EAAMA,GAAOxO,KACb,IAAIgP,EAAS,GAIb,OAHAhP,KAAKoF,KAAKkF,GAAM,WACd0E,EAAOjM,KAAK/I,GAAMA,EAAGiV,MAAMjP,KAAMkP,WACnC,GAAGV,GACIQ,CACT,EAEA7H,EAAW7G,UAAUmC,IAAM,SAAU6H,EAAMtQ,EAAIwU,EAAKW,GAGlD,IAAIV,EAAOD,GAAOW,GAAanP,KAC3B0O,EAAajM,EAAI6D,EAAoBgE,GAAOtK,KAAKgK,kBAAmBhK,MACpEoP,EAAO5I,EAAyBxG,MAEpC,OADAoP,EAAK3E,OAASzK,KAAKyK,OAAOhI,IAAIiM,EAAYD,EAAO,KAAYzU,EAAIyU,GAAQzU,GAClEoV,CACT,EAEAjI,EAAW7G,UAAU+O,OAAS,SAAU/E,EAAMtQ,EAAIwU,EAAKW,GACrD,IAGIV,EAAOD,GAAOW,GAAanP,KAY/B,IAAI0O,EAAajM,EAAI6D,EAAoBgE,GAAOtK,KAAKgK,kBAAmBhK,MAKxEA,KAAKyK,OAAO4E,OAAOX,EAAYD,EAAO,KAAYzU,EAAIyU,GAAQzU,EAChE,EAOAmN,EAAW7G,UAAUlB,WAAa,SAAUkQ,EAAWxQ,EAAMyQ,EAAaC,GACxE,IAAIJ,EAAO5I,EAAyBxG,MAEpC,OADAoP,EAAK3E,OAASzK,KAAKyK,OAAOrL,WAAWY,KAAKgK,kBAAkBsF,GAAYxQ,EAAMyQ,EAAaC,GACpFJ,CACT,EAQAjI,EAAW7G,UAAUtB,eAAiB,SAAUyQ,EAAgB3Q,GAC9D,IAAIsQ,EAAO5I,EAAyBxG,MAEpC,OADAoP,EAAK3E,OAASzK,KAAKyK,OAAOzL,eAAegB,KAAKgK,kBAAkByF,GAAiB3Q,GAC1EsQ,CACT,EAEAjI,EAAW7G,UAAUoP,eAAiB,SAAUtF,GAC9C,OAAOpK,KAAKyK,OAAOiF,eAAetF,EACpC,EAOAjD,EAAW7G,UAAUqP,aAAe,SAAUvF,GAC5C,IAAI/C,EAAYrH,KAAKqH,UACjBqF,EAAW1M,KAAK0P,eAAetF,GACnC,OAAO,IAAIwF,EAAA,EAAMlD,EAAUrF,EAAWA,GAAaA,EAAUpO,QAC/D,EAMAkO,EAAW7G,UAAUuP,KAAO,SAAUC,GACpC,IAAIC,EAAW/P,KACf,OAAO,IAAI,EAAW8P,EAAYA,EAAUtF,WAAWoD,aAAe,GAAI5N,KAAKwK,WAAWoD,cAAc,SAAUxD,GAChH,OAAOhE,EAAM0J,EAAW1F,EAC1B,IAAG,SAAUA,GACX,OAAOhE,EAAM2J,EAAU3F,EACzB,GACF,EAMAjD,EAAW7G,UAAU0P,UAAY,SAAUnN,GACzC,IAAIoN,EAASjQ,KAAKyH,QAClB,OAAOwI,GAAUA,EAAOpN,EAC1B,EAEAsE,EAAW7G,UAAU4P,UAAY,SAAUC,EAAOC,GAChDpQ,KAAKyH,QAAUzH,KAAKyH,SAAW,CAAC,EAE5Bb,EAASuJ,GACX,KAAcnQ,KAAKyH,QAAS0I,GAE5BnQ,KAAKyH,QAAQ0I,GAASC,CAE1B,EAOAjJ,EAAW7G,UAAU+P,cAAgB,SAAUjG,EAAKvH,GAClD,IAAIyN,EAAatQ,KAAK2H,aAAayC,GAC/BgG,EAAME,GAAcA,EAAWzN,GAEnC,OAAW,MAAPuN,EAEKpQ,KAAKgQ,UAAUnN,GAGjBuN,CACT,EAMAjJ,EAAW7G,UAAUiQ,cAAgB,WACnC,OAAOvQ,KAAK2H,aAAanM,OAAS,CACpC,EAOA2L,EAAW7G,UAAUkQ,uBAAyB,SAAUpG,EAAKvH,GAC3D,IAAI4N,EAAczQ,KAAK2H,aACnB2I,EAAaG,EAAYrG,GAExBkG,IACHA,EAAaG,EAAYrG,GAAO,CAAC,GAGnC,IAAIgG,EAAME,EAAWzN,GAcrB,OAZW,MAAPuN,IACFA,EAAMpQ,KAAKgQ,UAAUnN,GAEjB,KAAeuN,GACjBA,EAAMA,EAAIzK,QACDiB,EAASwJ,KAClBA,EAAM,KAAc,CAAC,EAAGA,IAG1BE,EAAWzN,GAAOuN,GAGbA,CACT,EAGAjJ,EAAW7G,UAAUoQ,cAAgB,SAAUtG,EAAKvH,EAAKqK,GACvD,IAAIoD,EAAatQ,KAAK2H,aAAayC,IAAQ,CAAC,EAC5CpK,KAAK2H,aAAayC,GAAOkG,EAErB1J,EAAS/D,GACX,KAAcyN,EAAYzN,GAE1ByN,EAAWzN,GAAOqK,CAEtB,EAMA/F,EAAW7G,UAAUqQ,eAAiB,WACpC3Q,KAAKyH,QAAU,CAAC,EAChBzH,KAAK2H,aAAe,EACtB,EAEAR,EAAW7G,UAAUsQ,UAAY,SAAU/N,EAAKuN,GAC9CxJ,EAAS/D,GAAO,KAAc7C,KAAK0H,QAAS7E,GAAO7C,KAAK0H,QAAQ7E,GAAOuN,CACzE,EAMAjJ,EAAW7G,UAAUuQ,UAAY,SAAUhO,GACzC,OAAO7C,KAAK0H,QAAQ7E,EACtB,EAMAsE,EAAW7G,UAAUwQ,cAAgB,SAAU1G,GAC7C,OAAOpK,KAAK4H,aAAawC,EAC3B,EAMAjD,EAAW7G,UAAUyQ,cAAgB,SAAU3G,EAAK4G,EAAQC,GAC1DjR,KAAK4H,aAAawC,GAAO6G,EAAQ,KAAcjR,KAAK4H,aAAawC,IAAQ,CAAC,EAAG4G,GAAUA,CACzF,EAMA7J,EAAW7G,UAAU4Q,iBAAmB,WACtClR,KAAK4H,aAAapM,OAAS,CAC7B,EAMA2L,EAAW7G,UAAU6Q,iBAAmB,SAAU/G,EAAKtQ,GACrD,IAAIsX,EAAcpR,KAAKqH,WAAarH,KAAKqH,UAAU+J,aACnD,OAAgBA,EAAapR,KAAKqR,SAAUjH,EAAKtQ,GACjDkG,KAAK6H,YAAYuC,GAAOtQ,CAC1B,EAEAqN,EAAW7G,UAAUgR,iBAAmB,SAAUlH,GAChD,OAAOpK,KAAK6H,YAAYuC,EAC1B,EAEAjD,EAAW7G,UAAUiR,kBAAoB,SAAUvX,EAAI8F,GACrD,KAAYE,KAAK6H,aAAa,SAAU/N,EAAIsQ,GACtCtQ,GACFE,GAAMA,EAAGwX,KAAK1R,EAAShG,EAAIsQ,EAE/B,GACF,EAOAjD,EAAW7G,UAAUmR,aAAe,SAAUrC,GAO5C,OANKA,IACHA,EAAO,IAAIjI,EAAWnH,KAAKoD,QAAUpD,KAAKoD,QAAUX,EAAIzC,KAAKgE,WAAYhE,KAAK8J,YAAa9J,MAAOA,KAAKqH,YAGzGd,EAAmB6I,EAAMpP,MACzBoP,EAAK3E,OAASzK,KAAKyK,OACZ2E,CACT,EAMAjI,EAAW7G,UAAUoR,WAAa,SAAUC,EAAYC,GACtD,IAAIC,EAAiB7R,KAAK2R,GAErB,KAAkBE,KAIvB7R,KAAK8R,iBAAmB9R,KAAK8R,kBAAoB,GAEjD9R,KAAK8R,iBAAiB/O,KAAK4O,GAE3B3R,KAAK2R,GAAc,WACjB,IAAII,EAAMF,EAAe5C,MAAMjP,KAAMkP,WACrC,OAAO0C,EAAe3C,MAAMjP,KAAM,CAAC+R,GAAKzM,OAAO,KAAa4J,YAC9D,EACF,EAKA/H,EAAW6K,cAAgB,WACzB7L,EAAuB,SAAUtI,GAC/B,IAAI2K,EAAqB3K,EAAKwL,oBAC9B,KAAYb,GAAoB,SAAU6F,EAAiBnP,GACzD,IAAI2K,EAAUhM,EAAKsL,UAAUjK,GAEzB8M,EAAcnC,EAAQmC,YACtBnB,EAAQhN,EAAK4M,OAEjB,GAAIuB,EAAa,CACfqC,EAAkB7F,EAAmBtJ,GAAO,IAAI2H,EAAemF,EAAYyB,WAAWjS,QAGtF,IAAK,IAAIF,EAAI,EAAGA,EAAI+S,EAAgB7S,OAAQF,IAC1C+S,EAAgB/S,GAAK0L,EAGvB,IAAS1L,EAAI,EAAGA,EAAIuP,EAAMhO,QAASvB,IAEjC+S,EAAgBxD,EAAM7M,IAAI6L,EAAQrE,cAAelK,IAAMA,CAE3D,CACF,GACF,EAEA+K,EAAqB,SAAUxI,EAAM4L,EAAQW,GAC3C,OAAO,QAAoBvM,EAAKyP,aAAa7D,EAAQW,GAAM,KAC7D,EAMAhE,EAAQ,SAAUvI,EAAMuP,GACtB,IAAIR,EAAK/O,EAAK2J,QAAQ4F,GAUtB,OARU,MAANR,GAAgC,MAAlB/O,EAAKqL,YACrB0D,EAAKvG,EAAmBxI,EAAMA,EAAKqL,UAAWkE,IAGtC,MAANR,IACFA,EAAK7F,EAAYqG,GAGZR,CACT,EAEAtG,EAAsB,SAAUtC,GAK9B,OAJK,KAAeA,KAClBA,EAA2B,MAAdA,EAAqB,CAACA,GAAc,IAG5CA,CACT,EAMAwC,EAA2B,SAAUyL,GACnC,IAAI7C,EAAO,IAAIjI,EAAW8K,EAAS7O,QAAU6O,EAAS7O,QAAUX,EAAIwP,EAASjO,WAAYiO,EAASnI,YAAamI,GAAWA,EAAS5K,WAGnI,OADAd,EAAmB6I,EAAM6C,GAClB7C,CACT,EAEA7I,EAAqB,SAAU2L,EAAQC,GACrC,KAAYlL,EAAwB3B,OAAO6M,EAAOL,kBAAoB,KAAK,SAAUM,GAC/ED,EAAOpM,eAAeqM,KACxBF,EAAOE,GAAYD,EAAOC,GAE9B,IACAF,EAAOJ,iBAAmBK,EAAOL,iBACjC,KAAY5K,GAAkB,SAAUkL,GACtCF,EAAOE,GAAY,KAAaD,EAAOC,GACzC,IACAF,EAAOnK,iBAAmB,KAAc,CAAC,EAAGoK,EAAOpK,iBACrD,EAEAtB,EAAiB,SAAU5I,EAAMuM,GAC/B,IAAIO,EAAW9M,EAAK0J,UAChB+E,EAASzO,EAAK2J,QACd6K,EAAaxU,EAAKmL,YAClBsJ,EAAWzU,EAAKqL,UAChBvE,EAAOgG,EAASP,GAChBwC,EAAKN,EAAOlC,GAUhB,GARY,MAARzF,GAA8B,MAAd0N,IAClB1H,EAASP,GAAOzF,EAAO0B,EAAmBxI,EAAMwU,EAAYjI,IAGpD,MAANwC,GAA0B,MAAZ0F,IAChBhG,EAAOlC,GAAOwC,EAAKvG,EAAmBxI,EAAMyU,EAAUlI,IAG9C,MAANwC,GAAsB,MAARjI,EAAc,CAC9B,IAAI4N,EAAkB1U,EAAKqN,iBACvBsH,EAAQD,EAAgB5N,IAAS4N,EAAgB5N,IAAS,GAAK,EACnEiI,EAAKjI,EAED6N,EAAQ,IACV5F,GAAM,SAAW4F,GAGnBlG,EAAOlC,GAAOwC,CAChB,CACF,CACF,CA3G2B,GA6GpBzF,CACT,CApmCA,GAsmCA,I,UC/mCe,SAASsL,EACxBN,EAAQxL,IACD,QAAiBwL,KACpBA,GAAS,QAAiCA,IAG5CxL,EAAMA,GAAO,CAAC,EACd,IAAI+L,EAAU/L,EAAIgM,iBAAmB,GACjCC,EAAUjM,EAAIkM,kBAAoBV,EAAOU,kBAAoB,GAC7DC,GAAkB,UAClBC,EAAa,GACbC,EAAWC,EAAYd,EAAQO,EAASE,EAASjM,EAAIuM,iBAGrDC,EAAuBxM,EAAIyM,0BAA2B,QAA2BJ,GACjFK,EAA6BT,IAAYT,EAAOU,iBAChDS,EAAiBD,GAA6B,QAAuBlB,IAAU,QAAiBS,GAChGW,EAAY5M,EAAI6M,cAEfD,GAAa5M,EAAI8M,kBACpBF,EAAY5M,EAAI8M,gBAAgBtB,EAAQa,IAM1C,IAHA,IAAIU,GAAe,QAAcH,GAC7BI,EAAa,IAAI,KAAeX,GAE3B1X,EAAI,EAAGA,EAAIqY,EAAWnY,OAAQF,IACrCqY,EAAWrY,IAAM,EAGnB,SAASsY,EAAcnK,GACrB,IAAIW,EAAMuJ,EAAWlK,GAErB,GAAIW,EAAM,EAAG,CACX,IAAIyJ,EAAgBjB,EAAQnJ,GACxBqK,GAAa,QAASD,GAAiBA,EAAgB,CACzDlP,KAAMkP,GAEJE,EAAa,IAAI,EACjBC,EAAcF,EAAWnP,KAEV,MAAfqP,GAA0D,MAAnCV,EAAetV,IAAIgW,KAI5CD,EAAWpP,KAAOoP,EAAWE,YAAcD,GAG1B,MAAnBF,EAAW3V,OAAiB4V,EAAW5V,KAAO2V,EAAW3V,MAC/B,MAA1B2V,EAAWG,cAAwBF,EAAWE,YAAcH,EAAWG,aACvE,IAAIpS,EAASkR,EAAWvX,OAIxB,OAHAmY,EAAWlK,GAAU5H,EACrBkS,EAAWvO,cAAgBiE,EAC3BsJ,EAAWhQ,KAAKgR,GACTA,CACT,CAEA,OAAOhB,EAAW3I,EACpB,CAEA,IAAK+I,EACH,IAAS7X,EAAI,EAAGA,EAAI0X,EAAU1X,IAC5BsY,EAActY,GAKlBoY,EAAatO,MAAK,SAAU8O,EAAa9P,GACvC,IAAI+P,GAAW,QAAiBD,GAAavO,QAI7C,GAAwB,IAApBwO,EAAS3Y,UAAiB,QAAS2Y,EAAS,KAAOA,EAAS,GAAK,EACnET,EAAalP,IAAIJ,GAAU,OAD7B,CAKA,IAAIgQ,EAAgBV,EAAalP,IAAIJ,EAAU,KAC/C,QAAK+P,GAAU,SAAUE,EAAoBjK,GAE3C,IAAIkK,GAAe,QAASD,GAAsBf,EAAetV,IAAIqW,GAAsBA,EAEvE,MAAhBC,GAAwBA,EAAetB,IACzCoB,EAAchK,GAAOkK,EACrBC,EAASX,EAAcU,GAAelQ,EAAUgG,GAEpD,GAXA,CAYF,IAEA,IAAIoK,EAAc,EAiElB,SAASD,EAASR,EAAY3P,EAAUC,GACC,MAAnC,SAAsBD,GACxB2P,EAAW9O,UAAUb,GAAYC,GAEjC0P,EAAW3P,SAAWA,EACtB2P,EAAW1P,cAAgBA,EAC3ByO,EAAgBtO,IAAIJ,GAAU,GAElC,EAxEA,QAAKsO,GAAS,SAAU+B,GACtB,IAAIrQ,EACAsQ,EACAC,EACAC,EAEJ,IAAI,QAASH,GACXrQ,EAAWqQ,EACXG,EAAa,CAAC,MACT,CACLA,EAAaH,EACbrQ,EAAWwQ,EAAWjQ,KACtB,IAAIqH,EAAc4I,EAAW5I,YAC7B4I,EAAW5I,YAAc,KACzB4I,GAAa,QAAO,CAAC,EAAGA,GACxBA,EAAW5I,YAAcA,EAEzB0I,EAAoBE,EAAWhC,QAC/B+B,EAAsBC,EAAW3P,UACjC2P,EAAWjQ,KAAOiQ,EAAWxQ,SAAWwQ,EAAWvQ,cAAgBuQ,EAAWhC,QAAUgC,EAAW3P,UAAY,IACjH,CAEA,IAAIkP,EAAWT,EAAa1V,IAAIoG,GAEhC,IAAiB,IAAb+P,EAAJ,CAMA,GAFAA,GAAW,QAAiBA,IAEvBA,EAAS3Y,OACZ,IAAK,IAAIF,EAAI,EAAGA,GAAKoZ,GAAqBA,EAAkBlZ,QAAU,GAAIF,IAAK,CAC7E,MAAOkZ,EAAcxB,GAAmD,MAAvCY,EAAcY,GAAapQ,SAC1DoQ,IAGFA,EAAcxB,GAAYmB,EAASpR,KAAKyR,IAC1C,EAIF,QAAKL,GAAU,SAAUG,EAAcjQ,GACrC,IAAI0P,EAAaH,EAAcU,GAQ/B,GANIjB,GAAiD,MAAnBuB,EAAWzW,OAC3C4V,EAAW5V,KAAOyW,EAAWzW,MAG/BoW,GAAS,QAASR,EAAYa,GAAaxQ,EAAUC,GAE9B,MAAnB0P,EAAWpP,MAAgB+P,EAAmB,CAChD,IAAIG,EAAwBH,EAAkBrQ,KAC7C,QAASwQ,KAA2BA,EAAwB,CAC3DlQ,KAAMkQ,IAERd,EAAWpP,KAAOoP,EAAWE,YAAcY,EAAsBlQ,KACjEoP,EAAWnP,eAAiBiQ,EAAsBjQ,cACpD,CAGA+P,IAAuB,QAASZ,EAAW9O,UAAW0P,EACxD,GAnCA,CAoCF,IAaA,IAAIG,EAAgBnO,EAAImO,cACpBC,EAAqBpO,EAAIoO,mBACzBC,EAAiC,MAAtBD,EACfA,EAAqBD,EAAgBC,GAAsB,EAAI,EAC/D,IAAIE,EAAQH,GAAiB,QAE7B,SAASI,EAA0BnB,GACV,MAAnBA,EAAWpP,OAEboP,EAAWpP,KAAOoP,EAAW3P,SAEjC,CAGA,GAAK+O,GAoCH,QAAKJ,GAAY,SAAUgB,GAEzBmB,EAA0BnB,EAC5B,IAGAhB,EAAWoC,MAAK,SAAUC,EAAOC,GAC/B,OAAOD,EAAM5P,cAAgB6P,EAAM7P,aACrC,SA3CA,IAAK,IAAI8O,EAAe,EAAGA,EAAetB,EAAUsB,IAAgB,CAClE,IAAIP,EAAaH,EAAcU,GAC3BlQ,EAAW2P,EAAW3P,SAEV,MAAZA,IAEF2P,EAAW3P,SAAWkR,EAAgBL,EAAOnC,EAAiBkC,GAC9DjB,EAAW1P,cAAgB,IAEtByQ,GAAiBC,GAAsB,KAC1ChB,EAAWxP,cAAe,GAG5BwQ,KAGFG,EAA0BnB,GAEH,MAAnBA,EAAW5V,OAAiB,QAAagU,EAAQmC,KAAkB,aAYpEP,EAAWxP,cAAkD,MAAjCwP,EAAW9O,UAAU8D,UAAuD,MAAnCgL,EAAW9O,UAAUsQ,cAC3FxB,EAAW5V,KAAO,UAEtB,CAcF,OADAqX,EAAkBzC,GACX,IAAI0C,EAAA,GAAiB,CAC1BtD,OAAQA,EACRnO,WAAY+O,EACZ2C,mBAAoB1C,EACpB2C,iBAAkBxC,GAEtB,CAEA,SAASqC,EAAkBxG,GAGzB,IAFA,IAAI4G,GAAiB,UAEZta,EAAI,EAAGA,EAAI0T,EAAOxT,OAAQF,IAAK,CACtC,IAAI4D,EAAM8P,EAAO1T,GACbua,EAAkB3W,EAAIyF,KACtB9H,EAAQ+Y,EAAe5X,IAAI6X,IAAoB,EAE/ChZ,EAAQ,IAEVqC,EAAIyF,KAAOkR,GAAmBhZ,EAAQ,IAGxCA,IACA+Y,EAAepR,IAAIqR,EAAiBhZ,EACtC,CACF,CAYA,SAASoW,EAAYd,EAAQO,EAASE,EAASkD,GAG7C,IAAI9C,EAAW1V,KAAKN,IAAImV,EAAO4D,yBAA2B,EAAGrD,EAAQlX,OAAQoX,EAAQpX,OAAQsa,GAAe,GAQ5G,OAPA,QAAKpD,GAAS,SAAUkC,GACtB,IAAIF,GAEA,QAASE,KAAgBF,EAAoBE,EAAWhC,WAC1DI,EAAW1V,KAAKN,IAAIgW,EAAU0B,EAAkBlZ,QAEpD,IACOwX,CACT,CAEA,SAASsC,EAAgB3Q,EAAMlC,EAAKuS,GAClC,IAAIgB,EAAUvT,EAAI5E,KAElB,GAAImX,GAAYgB,EAAQjQ,eAAepB,GAAO,CAC5C,IAAIrJ,EAAI,EAER,MAAO0a,EAAQjQ,eAAepB,EAAOrJ,GACnCA,IAGFqJ,GAAQrJ,CACV,CAGA,OADAmH,EAAI+B,IAAIG,GAAM,GACPA,CACT,C,cCjSIsR,EAEJ,WACE,SAASA,EAAaC,GACpBlW,KAAKmW,aAAe,GACpBnW,KAAKoW,SAAU,UACfpW,KAAKqW,iBAAkB,UACvBrW,KAAKkW,aAAeA,CACtB,CAEA,OAAOD,CACT,CATA,GAWO,SAASK,EAAwB3Y,GACtC,IAAIuY,EAAevY,EAAYK,IAAI,oBAC/BgR,EAAS,IAAIiH,EAAaC,GAC1BK,EAAQC,EAASN,GAErB,GAAIK,EAEF,OADAA,EAAM5Y,EAAaqR,EAAQA,EAAOoH,QAASpH,EAAOqH,iBAC3CrH,CAEX,CACA,IAAIwH,EAAW,CACbC,YAAa,SAAU9Y,EAAaqR,EAAQoH,EAASC,GACnD,IAAIK,EAAa/Y,EAAYgZ,uBAAuB,QAAS,MAAkBC,OAAO,GAClFC,EAAalZ,EAAYgZ,uBAAuB,QAAS,MAAkBC,OAAO,GAYtF5H,EAAOmH,aAAe,CAAC,IAAK,KAC5BC,EAAQ5R,IAAI,IAAKkS,GACjBN,EAAQ5R,IAAI,IAAKqS,GAEbC,GAAWJ,KACbL,EAAgB7R,IAAI,IAAKkS,GACzB1H,EAAO+H,sBAAwB,GAG7BD,GAAWD,KACbR,EAAgB7R,IAAI,IAAKqS,GACO,MAAhC7H,EAAO+H,wBAAkC/H,EAAO+H,sBAAwB,GAE5E,EACAC,WAAY,SAAUrZ,EAAaqR,EAAQoH,EAASC,GAClD,IAAIY,EAAkBtZ,EAAYgZ,uBAAuB,aAAc,MAAkBC,OAAO,GAQhG5H,EAAOmH,aAAe,CAAC,UACvBC,EAAQ5R,IAAI,SAAUyS,GAElBH,GAAWG,KACbZ,EAAgB7R,IAAI,SAAUyS,GAC9BjI,EAAO+H,sBAAwB,EAEnC,EACAG,MAAO,SAAUvZ,EAAaqR,EAAQoH,EAASC,GAC7C,IAAIc,EAAaxZ,EAAYgZ,uBAAuB,QAAS,MAAkBC,OAAO,GAClFQ,EAAkBD,EAAWE,cAAc,cAC3CC,EAAiBH,EAAWE,cAAc,aAY9CrI,EAAOmH,aAAe,CAAC,SAAU,SACjCC,EAAQ5R,IAAI,SAAU4S,GACtBhB,EAAQ5R,IAAI,QAAS8S,GAEjBR,GAAWM,KACbf,EAAgB7R,IAAI,SAAU4S,GAC9BpI,EAAO+H,sBAAwB,GAG7BD,GAAWQ,KACbjB,EAAgB7R,IAAI,QAAS8S,GACG,MAAhCtI,EAAO+H,wBAAkC/H,EAAO+H,sBAAwB,GAE5E,EACAQ,IAAK,SAAU5Z,EAAaqR,EAAQoH,EAASC,GAC3CrH,EAAOmH,aAAe,CAAC,MAAO,MAChC,EACAqB,SAAU,SAAU7Z,EAAaqR,EAAQoH,EAASC,GAChD,IAAIpd,EAAU0E,EAAY1E,QACtBwe,EAAgBxe,EAAQye,aAAa,WAAY/Z,EAAYK,IAAI,kBACjEmY,EAAenH,EAAOmH,aAAesB,EAAczT,WAAW2B,SAClE,QAAK8R,EAAcE,mBAAmB,SAAUC,EAAWC,GACzD,IAAIC,EAAY7e,EAAQye,aAAa,eAAgBE,GACjDG,EAAU5B,EAAa0B,GAC3BzB,EAAQ5R,IAAIuT,EAASD,GAEjBhB,GAAWgB,KACbzB,EAAgB7R,IAAIuT,EAASD,GAEO,MAAhC9I,EAAO+H,wBACT/H,EAAO+H,sBAAwBc,GAGrC,GACF,GAGF,SAASf,GAAWgB,GAClB,MAAiC,aAA1BA,EAAU9Z,IAAI,OACvB,C,eC9IA,SAASga,GAAmBra,EAAasa,GACvC,IAEIC,EAFAhC,EAAevY,EAAYK,IAAI,oBAC/Bma,EAAqBC,EAAA,MAAqBlC,GAwB9C,OArBI+B,GAAgBA,EAAa9B,eAC/B+B,EAAkB,KAAWD,EAAa9B,cAAc,SAAUjX,GAChE,IAAI2K,EAAU,CACZlF,KAAMzF,GAEJ4Y,EAAYG,EAAa7B,QAAQpY,IAAIkB,GAEzC,GAAI4Y,EAAW,CACb,IAAI7R,EAAW6R,EAAU9Z,IAAI,QAC7B6L,EAAQ1L,KAAO6H,EAAuBC,EACxC,CAEA,OAAO4D,CACT,KAGGqO,IAEHA,EAAkBC,IAAuBA,EAAmBE,kBAAoBF,EAAmBE,oBAAsBF,EAAmBnU,WAAW2B,UAAY,CAAC,IAAK,MAGpKuS,CACT,CAEA,SAASI,GAAkBC,EAAazP,EAAuBmP,GAC7D,IAAIlB,EACAyB,EA0BJ,OAzBAP,GAAgB,KAAYM,GAAa,SAAU1O,EAAS7E,GAC1D,IAAIZ,EAAWyF,EAAQzF,SACnBqU,EAAoBR,EAAa5B,gBAAgBrY,IAAIoG,GAErDqU,IAC2B,MAAzB1B,IACFA,EAAwB/R,GAG1B6E,EAAQmC,YAAcyM,EAAkBjL,iBAEpC1E,IACFe,EAAQf,uBAAwB,IAIF,MAA9Be,EAAQ5E,UAAU8D,WACpByP,GAAgB,EAEpB,IAEKA,GAA0C,MAAzBzB,IACpBwB,EAAYxB,GAAuB9R,UAAU8D,SAAW,GAGnDgO,CACT,CAOA,SAAS2B,GAAiBC,EAAWhb,EAAagJ,GAChDA,EAAMA,GAAO,CAAC,EACd,IACIwL,EADAyG,EAAgBjb,EAAYkb,mBAE5BC,GAAmB,EAEnBH,GACFG,GAAmB,EACnB3G,GAAS,QAAiCwG,KAE1CxG,EAASyG,EAAczM,YAEvB2M,EAAmB3G,EAAO/F,eAAiB,MAG7C,IAAI6L,EAAe3B,EAAwB3Y,GACvCua,EAAkBF,GAAmBra,EAAasa,GAClDc,EAAqBpS,EAAIoS,mBACzBtF,EAAkB,KAAkBsF,GAAsBA,EAAqBA,EAAqB,KAAa,KAAiCb,EAAiBva,GAAe,KAClLqb,EAAyB,CAC3BrG,gBAAiBuF,EACjBpD,cAAenO,EAAImO,cACnBtB,aAAc7V,EAAYsb,YAC1BxF,gBAAiBA,EACjBL,yBAA0B0F,GAExBpV,EAAS+O,EAAwBN,EAAQ6G,GACzCjC,EAAwBuB,GAAkB5U,EAAOM,WAAY2C,EAAImC,sBAAuBmP,GACxFpN,EAASiO,EAA8D,KAA3CF,EAAcM,mBAAmBxV,GAC7DyV,GAAuB,SAAgBxb,EAAa,CACtD+F,OAAQA,EACRmH,MAAOA,IAELhN,EAAO,IAAI,EAAW6F,EAAQ/F,GAClCE,EAAKoP,mBAAmBkM,GACxB,IAAIvO,EAA0C,MAAzBmM,GAAiCqC,GAA0BjH,GAAU,SAAUkH,EAASpV,EAASpL,EAAWmM,GAE/H,OAAOA,IAAa+R,EAAwBle,EAAYmH,KAAKsZ,sBAAsBD,EAASpV,EAASpL,EAAWmM,EAClH,EAAI,KAIJ,OAHAnH,EAAKmK,eAAgB,EACrBnK,EAAK6M,SACLoO,EAAmB3G,EAAStH,EAAO,KAAMD,GAClC/M,CACT,CAEA,SAASub,GAA0BjH,GACjC,GAAIA,EAAO/F,eAAiB,KAAwB,CAClD,IAAImN,EAAaC,GAAiBrH,EAAOtU,MAAQ,IACjD,OAAQ,MAAe,QAAiB0b,GAC1C,CACF,CAEA,SAASC,GAAiBhX,GACxB,IAAIlH,EAAI,EAER,MAAOA,EAAIkH,EAAIhH,QAAoB,MAAVgH,EAAIlH,GAC3BA,IAGF,OAAOkH,EAAIlH,EACb,CAEA,UCvIIme,GAEJ,SAAUC,GAGR,SAASD,IACP,IAAI3O,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAGhE,OADA8K,EAAM3M,KAAOsb,EAAmBtb,KACzB2M,CACT,CA2CA,OAlDA,QAAU2O,EAAoBC,GAS9BD,EAAmBnZ,UAAUqZ,eAAiB,SAAUC,EAAQ3gB,GAC9D,OAAO,GAAiB,KAAM+G,KAAM,CAClC+Y,oBAAoB,GAExB,EAEAU,EAAmBnZ,UAAUuZ,kBAAoB,SAAU3M,GACzD,IAAIjP,EAAW+B,KAAK9B,iBAEpB,GAAID,GAAYA,EAAS6b,UAAW,CAElC,IAAIC,EAAK9b,EAAS+b,YAAY/b,EAAS6b,UAAU5M,IAC7CrP,EAAOmC,KAAKlC,UACZmc,EAASpc,EAAKgT,UAAU,UACxBjS,EAAOf,EAAKgT,UAAU,QACtBqJ,EAAcjc,EAASI,cAAc8b,eAAiB,EAAI,EAE9D,OADAJ,EAAGG,IAAgBD,EAASrb,EAAO,EAC5Bmb,CACT,CAEA,MAAO,CAAChd,IAAKA,IACf,EAEA0c,EAAmBtb,KAAO,sBAC1Bsb,EAAmBW,cAAgB,CAEjCC,EAAG,EACHnc,iBAAkB,cAClBoc,iBAAiB,EAKjBC,aAAc,EACdC,YAAa,EAEbC,OAAO,EACPC,eAAgB,IAChBC,YAAa,IACbC,qBAAsB,OAEjBnB,CACT,CApDA,CAoDEoB,EAAA,GAEFA,EAAA,gBAA0BpB,IAC1B,U,WCxDIqB,GAEJ,SAAUpB,GAGR,SAASoB,IACP,IAAIhQ,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAGhE,OADA8K,EAAM3M,KAAO2c,EAAe3c,KACrB2M,CACT,CAiEA,OAxEA,QAAUgQ,EAAgBpB,GAS1BoB,EAAexa,UAAUqZ,eAAiB,WACxC,OAAO,GAAiB,KAAM3Z,KAAM,CAClC+Y,oBAAoB,EACpBjQ,wBAAyB9I,KAAKhC,IAAI,gBAAgB,IAAS,MAE/D,EAMA8c,EAAexa,UAAUya,eAAiB,WAExC,QAAO/a,KAAKhC,IAAI,UAAWgC,KAAKhC,IAAI,cACtC,EAMA8c,EAAexa,UAAU0a,wBAA0B,WAEjD,IAAIC,EAAuBjb,KAAKhC,IAAI,wBAChC0c,EAAiB1a,KAAKhC,IAAI,kBAM9B,OAJI0c,EAAiBO,IACnBA,EAAuBP,GAGlBO,CACT,EAEAH,EAAexa,UAAU4a,cAAgB,SAAUriB,EAAWgF,EAAMsd,GAClE,OAAOA,EAAUC,KAAKvd,EAAKiT,cAAcjY,GAC3C,EAEAiiB,EAAe3c,KAAO,aACtB2c,EAAeO,aAAe,CAAC,OAAQ,SACvCP,EAAeV,eAAgB,SAAqBkB,GAAA,cAAkC,CAGpFC,MAAM,EACNC,UAAU,EACVC,gBAAgB,EAChBC,gBAAiB,CACfC,MAAO,2BACPC,YAAa,KACbC,YAAa,EACbC,WAAY,QACZC,aAAc,EACdC,WAAY,EACZC,YAAa,KACbC,cAAe,EACfC,cAAe,EACfpgB,QAAS,GAEXqgB,OAAQ,CACNC,UAAW,CACTT,YAAa,YAGjBU,cAAc,IAETxB,CACT,CA1EA,CA0EEQ,IAEF,M,6GC/EA,SAASiB,GAAmBC,EAAWC,EAAc9e,EAAahD,EAAMV,GACtE,IAAImhB,EAAOoB,EAAUE,UACjBC,EAAIvB,EAAKuB,EACTC,EAAIxB,EAAKwB,EACTC,EAAQzB,EAAKyB,MACbC,EAAS1B,EAAK0B,OACdC,EAAYpf,EAAYK,IAAI,CAAC,YAAa,WAAa,EAE3D2e,GAAKI,EAAY,EACjBH,GAAKG,EAAY,EACjBF,GAASE,EACTD,GAAUC,EAEVJ,EAAIrf,KAAK0f,MAAML,GACfE,EAAQvf,KAAKC,MAAMsf,GACnB,IAAII,EAAW,IAAI,KAAa,CAC9BC,MAAO,CACLP,EAAGA,EACHC,EAAGA,EACHC,MAAOA,EACPC,OAAQA,KAIZ,GAAIL,EAAc,CAChB,IAAIre,EAAWoe,EAAUne,cACrB8b,EAAe/b,EAAS+b,eACxBgD,EAAiB/e,EAASgf,QAE1BjD,GACEgD,IACFF,EAASC,MAAMP,GAAKE,GAGtBI,EAASC,MAAML,MAAQ,IAElBM,IACHF,EAASC,MAAMN,GAAKE,GAGtBG,EAASC,MAAMJ,OAAS,GAG1B,IAAIO,GAAW,QAAWpjB,GAAU,SAAUqjB,GAC5CrjB,EAAOqjB,EAASL,EAClB,EAAI,KACJ,MAAkBA,EAAU,CAC1BC,MAAO,CACLL,MAAOA,EACPC,OAAQA,EACRH,EAAGA,EACHC,EAAGA,IAEJjf,EAAa,KAAMhD,EAAM0iB,EAC9B,CAEA,OAAOJ,CACT,CAEA,SAASM,GAAoBrG,EAAOuF,EAAc9e,GAChD,IAAI6f,EAAatG,EAAMwF,UAEnBe,GAAK,SAAMD,EAAWC,GAAI,GAC1BC,GAAI,SAAMF,EAAWE,EAAG,GACxBT,EAAW,IAAI,KAAe,CAChCC,MAAO,CACLS,IAAI,SAAMzG,EAAMyG,GAAI,GACpBC,IAAI,SAAM1G,EAAM0G,GAAI,GACpBH,GAAIA,EACJC,EAAGA,EACHG,WAAYL,EAAWK,WACvBC,SAAUN,EAAWM,SACrBC,UAAWP,EAAWO,aAI1B,GAAItB,EAAc,CAChB,IAAIuB,EAAuC,UAA5B9G,EAAM7Y,cAAca,IAE/B8e,EACFf,EAASC,MAAMY,SAAWN,EAAWK,WAErCZ,EAASC,MAAMQ,EAAID,EAGrB,MAAkBR,EAAU,CAC1BC,MAAO,CACLY,SAAUN,EAAWM,SACrBJ,EAAGA,IAEJ/f,EACL,CAEA,OAAOsf,CACT,CAEA,SAASgB,GAAehgB,EAAUwe,EAAc9e,EAAahD,EAAMV,GACjE,OAAKgE,EAEwB,UAAlBA,EAASE,KACXof,GAAoBtf,EAAUwe,EAAc9e,GACxB,gBAAlBM,EAASE,KACXoe,GAAmBte,EAAUwe,EAAc9e,EAAahD,EAAMV,GAGhE,KAPE,IAQX,CCxGA,IAAIikB,GAEJ,WACE,SAASA,IACPle,KAAK2d,GAAK,EACV3d,KAAK4d,GAAK,EACV5d,KAAKyd,GAAK,EACVzd,KAAK0d,EAAI,EACT1d,KAAK6d,WAAa,EAClB7d,KAAK8d,SAAqB,EAAVxgB,KAAK6gB,GACrBne,KAAK+d,WAAY,CACnB,CAEA,OAAOG,CACT,CAZA,GAcIE,GAEJ,SAAU1E,GAGR,SAAS0E,EAAYC,GACnB,IAAIvT,EAAQ4O,EAAOlI,KAAKxR,KAAMqe,IAASre,KAGvC,OADA8K,EAAM3M,KAAO,UACN2M,CACT,CA6CA,OApDA,QAAUsT,EAAa1E,GASvB0E,EAAY9d,UAAUge,gBAAkB,WACtC,OAAO,IAAIJ,EACb,EAEAE,EAAY9d,UAAUie,UAAY,SAAU/P,EAAK0O,GAC/C,IAAIS,EAAKT,EAAMS,GACXC,EAAKV,EAAMU,GACXH,EAAKngB,KAAKN,IAAIkgB,EAAMO,IAAM,EAAG,GAC7BC,EAAIpgB,KAAKN,IAAIkgB,EAAMQ,EAAG,GACtBc,EAAgB,IAAVd,EAAID,GACVgB,EAAUhB,EAAKe,EACfX,EAAaX,EAAMW,WACnBC,EAAWZ,EAAMY,SACjBC,EAAYb,EAAMa,UAClBW,EAAgB,EAAVphB,KAAK6gB,GACXQ,EAAiBZ,EAAYD,EAAWD,EAAaa,EAAMb,EAAaC,EAAWY,EAElFC,IAEHd,EAAaC,GAAYC,EAAYW,GAAOA,IAG9C,IAAIE,EAAathB,KAAKuhB,IAAIhB,GACtBiB,EAAaxhB,KAAKyhB,IAAIlB,GACtBmB,EAAW1hB,KAAKuhB,IAAIf,GACpBmB,EAAW3hB,KAAKyhB,IAAIjB,GAEpBa,GACFnQ,EAAI0Q,OAAON,EAAanB,EAAKE,EAAImB,EAAarB,EAAKG,GACnDpP,EAAI2Q,IAAIP,EAAaH,EAAUd,EAAImB,EAAaL,EAAUb,EAAIY,GAAKlhB,KAAK6gB,GAAKN,EAAYA,GAAaE,IAEtGvP,EAAI0Q,OAAON,EAAalB,EAAIC,EAAImB,EAAapB,EAAIE,GAGnDpP,EAAI2Q,IAAIxB,EAAIC,EAAIF,EAAGG,EAAYC,GAAWC,GAC1CvP,EAAI2Q,IAAIH,EAAWP,EAAUd,EAAIsB,EAAWR,EAAUb,EAAIY,EAAIV,EAAqB,EAAVxgB,KAAK6gB,GAAQL,EAAWxgB,KAAK6gB,IAAKJ,GAEhG,IAAPN,GACFjP,EAAI2Q,IAAIxB,EAAIC,EAAIH,EAAIK,EAAUD,EAAYE,EAG9C,EAEOK,CACT,CAtDA,CAsDEgB,GAAA,IAEF,M,WChFO,SAASC,GAAuBphB,EAAUE,GAC/C,OAAOF,EAASE,OAASA,CAC3B,CCIO,SAASmhB,GAAgBzhB,EAAMhF,GACpC,IAAI0mB,EAAY1hB,EAAK0M,iBAAiB,kBAClC0D,EAAMsR,EAAU/jB,OAEpB,GAAY,IAARyS,EAAW,CACb,IAAIuR,GAAS,QAAiB3hB,EAAMhF,EAAW0mB,EAAU,IACzD,OAAiB,MAAVC,EAAiBA,EAAS,GAAK,IACxC,CAAO,GAAIvR,EAAK,CAGd,IAFA,IAAIwR,EAAO,GAEFnkB,EAAI,EAAGA,EAAIikB,EAAU/jB,OAAQF,IACpCmkB,EAAK1c,MAAK,QAAiBlF,EAAMhF,EAAW0mB,EAAUjkB,KAGxD,OAAOmkB,EAAKC,KAAK,IACnB,CACF,CACO,SAASC,GAA4B9hB,EAAM+hB,GAChD,IAAIL,EAAY1hB,EAAK0M,iBAAiB,kBAEtC,KAAK,QAAQqV,GACX,OAAOA,EAAoB,GAK7B,IAFA,IAAIH,EAAO,GAEFnkB,EAAI,EAAGA,EAAIikB,EAAU/jB,OAAQF,IAAK,CACzC,IAAI0J,EAAWnH,EAAK6G,kBAAkB6a,EAAUjkB,IAE5C0J,GAAY,GACdya,EAAK1c,KAAK6c,EAAkB5a,GAEhC,CAEA,OAAOya,EAAKC,KAAK,IACnB,C,cCvCO,SAASG,GAAkCC,EAAiBzB,GACjEA,EAAOA,GAAQ,CAAC,EAChB,IAAI0B,EAAa1B,EAAK0B,WACtB,OAAO,SAAUC,EAAK3B,EAAM4B,GAC1B,IAAIC,EAAe7B,EAAK8B,SAExB,IAAKD,GAAgBA,aAAwB3e,MAC3C,OAAO,SAAsBye,EAAK3B,EAAM4B,GAG1C,IAAIG,EAAuBN,EAAgBI,GACvCG,EAA4B,MAAjBhC,EAAKgC,SAAmBhC,EAAKgC,SAAW,EACnDC,EAAStgB,KAAKkd,MACdS,EAAK2C,EAAO3C,GACZC,EAAK0C,EAAO1C,GACZF,EAAI4C,EAAO5C,EACXD,EAAK6C,EAAO7C,GACZ8C,GAAW7C,EAAID,GAAM,EACrBI,EAAayC,EAAOzC,WACpBC,EAAWwC,EAAOxC,SAClB0C,GAAe3C,EAAaC,GAAY,EACxC2C,EAAYV,EAAaziB,KAAKuB,IAAI6e,EAAID,GAAM,EAAI,EAChDiD,EAAUpjB,KAAKuhB,IACf8B,EAAUrjB,KAAKyhB,IAEfpC,EAAIgB,EAAKD,EAAIgD,EAAQ7C,GACrBjB,EAAIgB,EAAKF,EAAIiD,EAAQ9C,GACrB+C,EAAY,OACZC,EAAoB,MAExB,OAAQT,GACN,IAAK,WACHzD,EAAIgB,GAAMF,EAAK4C,GAAYK,EAAQF,GACnC5D,EAAIgB,GAAMH,EAAK4C,GAAYM,EAAQH,GACnCI,EAAY,SACZC,EAAoB,MACpB,MAEF,IAAK,iBACHlE,EAAIgB,GAAMF,EAAK4C,GAAYK,EAAQF,GACnC5D,EAAIgB,GAAMH,EAAK4C,GAAYM,EAAQH,GACnCI,EAAY,SACZC,EAAoB,SACpB,MAEF,IAAK,aACHlE,EAAIgB,EAAK4C,EAAUG,EAAQ7C,GAAciD,GAAqBjD,EAAYwC,EAAWI,GAAW,GAChG7D,EAAIgB,EAAK2C,EAAUI,EAAQ9C,GAAckD,GAAqBlD,EAAYwC,EAAWI,GAAW,GAChGG,EAAY,QACZC,EAAoB,SACpB,MAEF,IAAK,mBACHlE,EAAIgB,EAAK4C,EAAUG,EAAQ7C,GAAciD,GAAqBjD,GAAawC,EAAWI,GAAW,GACjG7D,EAAIgB,EAAK2C,EAAUI,EAAQ9C,GAAckD,GAAqBlD,GAAawC,EAAWI,GAAW,GACjGG,EAAY,OACZC,EAAoB,SACpB,MAEF,IAAK,SACHlE,EAAIgB,EAAK4C,EAAUG,EAAQF,GAC3B5D,EAAIgB,EAAK2C,EAAUI,EAAQH,GAC3BI,EAAY,SACZC,EAAoB,SACpB,MAEF,IAAK,SACHlE,EAAIgB,GAAMD,EAAI2C,GAAYK,EAAQF,GAClC5D,EAAIgB,GAAMF,EAAI2C,GAAYM,EAAQH,GAClCI,EAAY,SACZC,EAAoB,SACpB,MAEF,IAAK,eACHlE,EAAIgB,GAAMD,EAAI2C,GAAYK,EAAQF,GAClC5D,EAAIgB,GAAMF,EAAI2C,GAAYM,EAAQH,GAClCI,EAAY,SACZC,EAAoB,MACpB,MAEF,IAAK,WACHlE,EAAIgB,EAAK4C,EAAUG,EAAQ5C,GAAYgD,GAAqBhD,EAAUuC,EAAWI,GAAW,GAC5F7D,EAAIgB,EAAK2C,EAAUI,EAAQ7C,GAAYiD,GAAqBjD,EAAUuC,EAAWI,GAAW,GAC5FG,EAAY,OACZC,EAAoB,SACpB,MAEF,IAAK,iBACHlE,EAAIgB,EAAK4C,EAAUG,EAAQ5C,GAAYgD,GAAqBhD,GAAWuC,EAAWI,GAAW,GAC7F7D,EAAIgB,EAAK2C,EAAUI,EAAQ7C,GAAYiD,GAAqBjD,GAAWuC,EAAWI,GAAW,GAC7FG,EAAY,QACZC,EAAoB,SACpB,MAEF,QACE,OAAO,SAAsBb,EAAK3B,EAAM4B,GAQ5C,OALAD,EAAMA,GAAO,CAAC,EACdA,EAAIrD,EAAIA,EACRqD,EAAIpD,EAAIA,EACRoD,EAAIgB,MAAQJ,EACZZ,EAAIiB,cAAgBJ,EACbb,CACT,CACF,CACO,SAASkB,GAAsBZ,EAAQJ,EAAcJ,EAAiBqB,GAC3E,IAAI,QAASA,GAEXb,EAAOc,cAAc,CACnBC,SAAUF,SAGP,IAAI,QAAQjB,GAEjBI,EAAOc,cAAc,CACnBC,SAAU,QAHP,CAQP,IAIIC,EAJApE,EAAQoD,EAAOpD,MACfW,EAAaX,EAAMa,UAAYb,EAAMW,WAAaX,EAAMY,SACxDA,EAAWZ,EAAMa,UAAYb,EAAMY,SAAWZ,EAAMW,WACpD2C,GAAe3C,EAAaC,GAAY,EAExCsC,EAAuBN,EAAgBI,GAE3C,OAAQE,GACN,IAAK,WACL,IAAK,iBACL,IAAK,SACL,IAAK,eACL,IAAK,SACHkB,EAAcd,EACd,MAEF,IAAK,aACL,IAAK,mBACHc,EAAczD,EACd,MAEF,IAAK,WACL,IAAK,iBACHyD,EAAcxD,EACd,MAEF,QAIE,YAHAwC,EAAOc,cAAc,CACnBC,SAAU,IAKhB,IAAIE,EAAmB,IAAVjkB,KAAK6gB,GAAWmD,EASA,WAAzBlB,GAAqCmB,EAASjkB,KAAK6gB,GAAK,GAAKoD,EAAmB,IAAVjkB,KAAK6gB,KAC7EoD,GAAUjkB,KAAK6gB,IAGjBmC,EAAOc,cAAc,CACnBC,SAAUE,GAjDZ,CAmDF,CAEA,SAAST,GAAqBU,EAAOnB,EAAUoB,GAC7C,OAAOpB,EAAW/iB,KAAKyhB,IAAIyC,IAAUC,GAAS,EAAI,EACpD,CAEA,SAASV,GAAqBS,EAAOnB,EAAUoB,GAC7C,OAAOpB,EAAW/iB,KAAKuhB,IAAI2C,IAAUC,EAAQ,GAAK,EACpD,CCnKA,IAAIC,GAAUpkB,KAAKN,IACf2kB,GAAUrkB,KAAKH,IAEnB,SAASykB,GAAYC,EAAOhkB,GAC1B,IAAIikB,EAAmBD,EAAMnF,SAAWmF,EAAMnF,UAE9C,GAAI2C,GAAuBwC,EAAO,eAAgB,CAChD,IAAIzjB,EAAWyjB,EAAMxjB,cAIrB,GAAsB,aAAlBD,EAASD,OAAwBC,EAAS2jB,OAAQ,CACpD,IAAIC,EAAcnkB,EAAKgT,UAAU,aAE7BzS,EAAS+b,gBACX2H,EAAiBnF,GAAKqF,EACtBF,EAAiBjF,OAAuB,EAAdmF,IAE1BF,EAAiBlF,GAAKoF,EACtBF,EAAiBhF,QAAwB,EAAdkF,EAE/B,CACF,CAEA,OAAOF,CACT,CAEA,IAAIG,GAEJ,SAAUvI,GAGR,SAASuI,IACP,IAAInX,EAAQ4O,EAAOlI,KAAKxR,OAASA,KAIjC,OAFA8K,EAAM3M,KAAO8jB,EAAQ9jB,KACrB2M,EAAMoX,eAAgB,EACfpX,CACT,CAycA,OAjdA,QAAUmX,EAASvI,GAUnBuI,EAAQ3hB,UAAU6hB,OAAS,SAAUxkB,EAAa1E,EAAS2E,EAAKwkB,GAC9DpiB,KAAKqiB,OAAS1kB,EAEdqC,KAAKsiB,0BAA0B1kB,GAE/BoC,KAAKuiB,gBAAgB5kB,GAErB,IAAI6kB,EAAuB7kB,EAAYK,IAAI,qBAEd,gBAAzBwkB,GAAmE,UAAzBA,KAE5CxiB,KAAKyiB,gBAAkB,KACvBziB,KAAK0iB,aAAe1iB,KAAK2iB,aAAahlB,EAAa1E,EAAS2E,GAAOoC,KAAK4iB,cAAcjlB,EAAa1E,EAAS2E,EAAKwkB,GAIrH,EAEAH,EAAQ3hB,UAAUuiB,yBAA2B,SAAUllB,GACrDqC,KAAK8iB,SAEL9iB,KAAKuiB,gBAAgB5kB,GAIrBqC,KAAK+iB,iBAAiBplB,EACxB,EAEAskB,EAAQ3hB,UAAU0iB,kBAAoB,SAAUC,EAAQtlB,GAEtDqC,KAAKyiB,gBAAkB,GAEvBziB,KAAKkjB,wBAAwBD,EAAQtlB,EACvC,EAEAskB,EAAQ3hB,UAAU6iB,aAAe,SAAUnpB,IACzC,KAAAopB,kBAAiBpjB,KAAKyiB,iBAAmBziB,KAAKqjB,MAAOrpB,EACvD,EAEAioB,EAAQ3hB,UAAUiiB,gBAAkB,SAAU5kB,GAC5C,IAAI2lB,EAAc3lB,EAAY4lB,gBAAgB9I,MAErB,MAArBza,KAAK0iB,cAAwBY,IAAgBtjB,KAAK0iB,eACpD1iB,KAAK0iB,aAAeY,EAEpBtjB,KAAK8iB,SAET,EAEAb,EAAQ3hB,UAAUsiB,cAAgB,SAAUjlB,EAAa1E,EAAS2E,EAAKwkB,GACrE,IAKIoB,EALAH,EAAQrjB,KAAKqjB,MACbxlB,EAAOF,EAAYG,UACnB2lB,EAAUzjB,KAAK0jB,MACf7B,EAAQlkB,EAAYO,iBACpBE,EAAWyjB,EAAMxjB,cAGF,gBAAfwjB,EAAM1jB,KACRqlB,EAAuBplB,EAAS+b,eACR,UAAf0H,EAAM1jB,OACfqlB,EAAwC,UAAjBplB,EAASc,KAGlC,IAAIykB,EAAiBhmB,EAAYrE,qBAAuBqE,EAAc,KAClEimB,EAAkBC,GAAmBlmB,EAAakkB,GAElD+B,GACF5jB,KAAK8jB,oBAAoBF,EAAiB/lB,EAAMD,GAGlD,IAAImmB,EAAYpmB,EAAYK,IAAI,QAAQ,IAAS4lB,EAC7C9B,EAAmBF,GAAYC,EAAOhkB,GAE1CwlB,EAAMW,iBAGN,IAAIxI,EAAW7d,EAAYK,IAAI,YAAY,GACvCimB,EAAiBtmB,EAAYK,IAAI,kBAAkB,GACnDkmB,EAAkBvmB,EAAYwmB,SAAS,mBACvCC,EAAkBF,EAAgBlmB,IAAI,iBAAmB,EACzDqmB,EAAQ,GACRC,EAAWtkB,KAAKukB,eAChBC,EAAapC,GAAWA,EAAQoC,WAChCC,EAAgBrC,GAA4B,oBAAjBA,EAAQjkB,KAEvC,SAASumB,EAAiB7rB,GACxB,IAAI8rB,EAAW9T,GAAUgR,EAAM1jB,MAAMN,EAAMhF,GACvC+rB,EAAOC,GAAmBhD,EAAO2B,EAAsBmB,GAQ3D,OAPAC,EAAKE,SAASZ,EAAgBa,gBAEX,gBAAflD,EAAM1jB,MACRymB,EAAKI,SAAS,IAAKZ,GAGrBC,EAAMxrB,GAAa+rB,EACZA,CACT,CAGA/mB,EAAKgS,KAAK4T,GAASljB,KAAI,SAAU1H,GAC/B,IAAIosB,EAAYpnB,EAAK8R,aAAa9W,GAC9BmY,EAASH,GAAUgR,EAAM1jB,MAAMN,EAAMhF,EAAWosB,GAOpD,GALIhB,GACFS,EAAiB7rB,GAIdgF,EAAKmQ,SAASnV,IAAeqsB,GAAcrD,EAAM1jB,MAAM6S,GAA5D,CAIA,IAAImU,GAAY,EAEZpB,IAGFoB,EAAY5J,GAAKsG,EAAM1jB,MAAM2jB,EAAkB9Q,IAGjD,IAAIlX,EAAKsrB,GAAevD,EAAM1jB,MAAMR,EAAaE,EAAMhF,EAAWmY,EAAQwS,EAAsBG,EAAgBvlB,EAASinB,OAAO,EAAO7J,GAEnIoI,IASF9pB,EAAGwrB,qBAAsB,GAG3BC,GAAYzrB,EAAI+D,EAAMhF,EAAWosB,EAAWjU,EAAQrT,EAAa6lB,EAAqC,UAAf3B,EAAM1jB,MAEzFqmB,EACF1qB,EAAGmB,KAAK,CACNiiB,MAAOlM,IAEA4S,EACT4B,GAAwB5B,EAAiBD,EAAgB7pB,EAAIkX,EAAQnY,EAAW2qB,GAAsB,GAAO,IAE7G,SAAU1pB,EAAI,CACZojB,MAAOlM,GACNrT,EAAa9E,GAGlBgF,EAAKsT,iBAAiBtY,EAAWiB,GACjCupB,EAAM9iB,IAAIzG,GACVA,EAAG2rB,OAASN,CAxCZ,CAyCF,IAAGzkB,QAAO,SAAUglB,EAAUC,GAC5B,IAAIV,EAAYpnB,EAAK8R,aAAa+V,GAC9B1U,EAASH,GAAUgR,EAAM1jB,MAAMN,EAAM6nB,EAAUT,GAEnD,GAAIhB,EAAgB,CAClB,IAAIW,OAAO,EAEa,IAApBN,EAAS9oB,OACXopB,EAAOF,EAAiBiB,IAExBf,EAAON,EAASqB,GAChBf,EAAKE,SAASZ,EAAgBa,gBAEX,gBAAflD,EAAM1jB,MACRymB,EAAKI,SAAS,IAAKZ,GAGrBC,EAAMqB,GAAYd,GAGpB,IAAID,EAAW9T,GAAUgR,EAAM1jB,MAAMN,EAAM6nB,GACvCxI,EAAQ0I,GAAsBpC,EAAsBmB,EAAU9C,IAClE,QAAY+C,EAAM,CAChB1H,MAAOA,GACNyG,EAAgB+B,EACrB,CAEA,IAAI5rB,EAAK2pB,EAAQnS,iBAAiBqU,GAElC,GAAK9nB,EAAKmQ,SAAS0X,IAAcR,GAAcrD,EAAM1jB,MAAM6S,GAA3D,CAKA,IAAImU,GAAY,EAoBhB,GAlBIpB,IACFoB,EAAY5J,GAAKsG,EAAM1jB,MAAM2jB,EAAkB9Q,GAE3CmU,GACF9B,EAAMlnB,OAAOrC,IAIZA,GAGH,SAAaA,GAFbA,EAAKsrB,GAAevD,EAAM1jB,MAAMR,EAAaE,EAAM6nB,EAAU1U,EAAQwS,EAAsBG,EAAgBvlB,EAASinB,QAASvrB,EAAI0hB,GAK/HoI,IACF9pB,EAAGwrB,qBAAsB,GAGvBb,EAAe,CACjB,IAAIoB,EAAS/rB,EAAGgsB,iBAEhB,GAAID,EAAQ,CACV,IAAIE,GAAkB,SAAWF,GAEA,MAA7BE,EAAgBC,YAOlBD,EAAgBC,UAAYD,EAAgB7Y,MAEhD,CACF,MAGIqY,GAAYzrB,EAAI+D,EAAM6nB,EAAUT,EAAWjU,EAAQrT,EAAa6lB,EAAqC,UAAf3B,EAAM1jB,MAG5FqmB,EACF1qB,EAAGmB,KAAK,CACNiiB,MAAOlM,IAEA4S,EACT4B,GAAwB5B,EAAiBD,EAAgB7pB,EAAIkX,EAAQ0U,EAAUlC,GAAsB,EAAMiB,IAE3G,QAAY3qB,EAAI,CACdojB,MAAOlM,GACNrT,EAAa+nB,EAAU,MAG5B7nB,EAAKsT,iBAAiBuU,EAAU5rB,GAChCA,EAAG2rB,OAASN,EACZ9B,EAAM9iB,IAAIzG,EA1DV,MAFEupB,EAAMlnB,OAAOrC,EA6DjB,IAAGqC,QAAO,SAAUtD,GAClB,IAAIiB,EAAK2pB,EAAQnS,iBAAiBzY,GAClCiB,IAAM,SAAyBA,EAAI6D,EAAa9E,EAClD,IAAGsI,UACH,IAAI8kB,EAAUjmB,KAAKkmB,mBAAqBlmB,KAAKkmB,iBAAmB,IAAIC,GAAA,GACpEF,EAAQG,YAER,IAAK,IAAI9qB,EAAI,EAAGA,EAAI+oB,EAAM7oB,SAAUF,EAClC2qB,EAAQ1lB,IAAI8jB,EAAM/oB,IAGpB+nB,EAAM9iB,IAAI0lB,GACVjmB,KAAKukB,eAAiBF,EACtBrkB,KAAK0jB,MAAQ7lB,CACf,EAEAokB,EAAQ3hB,UAAUqiB,aAAe,SAAUhlB,EAAa1E,EAAS2E,GAC/DoC,KAAK8iB,SAELuD,GAAY1oB,EAAaqC,KAAKqjB,OAE9BrjB,KAAK+iB,iBAAiBplB,EACxB,EAEAskB,EAAQ3hB,UAAU4iB,wBAA0B,SAAUD,EAAQtlB,GAC5DqC,KAAKsmB,oBAELD,GAAY1oB,EAAaqC,KAAKqjB,MAAOrjB,KAAKyiB,iBAAiB,EAC7D,EAEAR,EAAQ3hB,UAAUyiB,iBAAmB,SAAUplB,GAE7C,IAAIsf,EAAWtf,EAAYK,IAAI,QAAQ,IAASigB,GAAetgB,EAAYO,kBAAkB,EAAOP,GAChG0lB,EAAQrjB,KAAKqjB,MAEbpG,EACFoG,EAAMkD,YAAYtJ,GAElBoG,EAAMW,gBAEV,EAEA/B,EAAQ3hB,UAAUwjB,oBAAsB,SAAUF,EAAiB/lB,EAAMD,GACvE,IAAIkN,EAAQ9K,KAGZ,GAAKnC,EAAKhB,QAAV,CAIA,IAAIuB,EAAWwlB,EAAgBxlB,SAE/B,GAAI4B,KAAKkiB,cACPliB,KAAKwmB,kBAAkB3oB,EAAM+lB,EAAiBhmB,GAE9CoC,KAAKkiB,eAAgB,MAChB,CACL,IAAIuE,EAAiB,SAAUrc,GAC7B,IAAItQ,EAAK+D,EAAKyT,iBAAiBlH,GAC3B8S,EAAQpjB,GAAMA,EAAGojB,MACrB,OAAOA,GAEP5f,KAAKuB,IAAIT,EAAS+b,eAAiB+C,EAAMJ,OAASI,EAAML,QACrD,CACL,EAEA7c,KAAK0mB,YAAc,WACjB5b,EAAM6b,0BAA0B9oB,EAAM4oB,EAAgBroB,EAAUR,EAClE,EAEAA,EAAIgpB,QAAQC,GAAG,WAAY7mB,KAAK0mB,YAClC,CAvBA,CAwBF,EAEAzE,EAAQ3hB,UAAUwmB,UAAY,SAAUjpB,EAAMO,EAAU2oB,GACtD,IAAIC,EAAO,GAcX,OAbAnpB,EAAKuH,KAAKvH,EAAKoB,aAAab,EAASc,MAAM,SAAU+nB,EAAeC,GAClE,IAAIC,EAAcJ,EAAaG,GAC/BC,EAA6B,MAAfA,EAAsBpqB,IAAMoqB,EAC1CH,EAAKjkB,KAAK,CACRlK,UAAWquB,EACXC,YAAaA,EACbF,cAAeA,GAEnB,IACAD,EAAK7R,MAAK,SAAUiS,EAAGC,GAErB,OAAOA,EAAEF,YAAcC,EAAED,WAC3B,IACO,CACLG,gBAAgB,QAAIN,GAAM,SAAUxnB,GAClC,OAAOA,EAAKynB,aACd,IAEJ,EAEAhF,EAAQ3hB,UAAUinB,8BAAgC,SAAU1pB,EAAMkpB,EAAc3oB,GAK9E,IAJA,IAAIopB,EAAQppB,EAASopB,MACjBC,EAAiB5pB,EAAKoB,aAAab,EAASc,KAC5CwoB,EAAYC,OAAOC,UAEdC,EAAU,EAAG5Z,EAAMuZ,EAAMha,iBAAiBC,WAAWjS,OAAQqsB,EAAU5Z,IAAO4Z,EAAS,CAC9F,IAAIla,EAAS9P,EAAKuQ,WAAWqZ,EAAgBD,EAAMM,oBAAoBD,IACnE3a,EAAQS,EAAS,EACnBga,OAAOI,UACPhB,EAAalpB,EAAKsQ,gBAAgBR,IAEpC,GAAIT,EAAQwa,EACV,OAAO,EAGTA,EAAYxa,CACd,CAEA,OAAO,CACT,EAQA+U,EAAQ3hB,UAAU0nB,wBAA0B,SAAUC,EAAW7pB,GAM/D,IALA,IAAIopB,EAAQppB,EAASopB,MACjBhpB,EAASgpB,EAAM/oB,YACfopB,EAAUvqB,KAAKN,IAAI,EAAGwB,EAAO,IAC7B0pB,EAAU5qB,KAAKH,IAAIqB,EAAO,GAAIgpB,EAAMha,iBAAiBC,WAAWjS,OAAS,GAEtEqsB,GAAWK,IAAWL,EAC3B,GAAII,EAAUX,eAAeO,KAAaL,EAAMM,oBAAoBD,GAClE,OAAO,CAGb,EAEA5F,EAAQ3hB,UAAUqmB,0BAA4B,SAAU9oB,EAAMkpB,EAAc3oB,EAAUR,GACpF,GAAKoC,KAAKunB,8BAA8B1pB,EAAMkpB,EAAc3oB,GAA5D,CAIA,IAAI+pB,EAAWnoB,KAAK8mB,UAAUjpB,EAAMO,EAAU2oB,GAE1C/mB,KAAKgoB,wBAAwBG,EAAU/pB,KACzC4B,KAAKsiB,0BAA0B1kB,GAE/BA,EAAIwqB,eAAe,CACjBjqB,KAAM,kBACNkqB,cAAejqB,EAASc,IAAM,OAC9BopB,OAAQlqB,EAASyZ,MACjBsQ,SAAUA,IAXd,CAcF,EAEAlG,EAAQ3hB,UAAUkmB,kBAAoB,SAAU3oB,EAAM+lB,EAAiBhmB,GACrE,IAAIQ,EAAWwlB,EAAgBxlB,SAE3BmqB,EAAavoB,KAAK8mB,UAAUjpB,EAAMO,GAAU,SAAU8oB,GACxD,OAAOrpB,EAAKG,IAAIH,EAAKoB,aAAa2kB,EAAgB4E,UAAUtpB,KAAMgoB,EACpE,IAEAtpB,EAAIwqB,eAAe,CACjBjqB,KAAM,kBACNkqB,cAAejqB,EAASc,IAAM,OAC9BslB,YAAY,EACZ8D,OAAQlqB,EAASyZ,MACjBsQ,SAAUI,GAEd,EAEAtG,EAAQ3hB,UAAUnE,OAAS,SAAUlD,EAAS2E,GAC5CoC,KAAK8iB,OAAO9iB,KAAKqiB,QAEjBriB,KAAKsiB,0BAA0B1kB,EACjC,EAEAqkB,EAAQ3hB,UAAUmoB,QAAU,SAAUxvB,EAAS2E,GAC7CoC,KAAKsiB,0BAA0B1kB,EACjC,EAEAqkB,EAAQ3hB,UAAUgiB,0BAA4B,SAAU1kB,GAClDoC,KAAK0mB,cACP9oB,EAAIgpB,QAAQ8B,IAAI,WAAY1oB,KAAK0mB,aACjC1mB,KAAK0mB,YAAc,KAEvB,EAEAzE,EAAQ3hB,UAAUwiB,OAAS,SAAUuC,GACnC,IAAIhC,EAAQrjB,KAAKqjB,MACbxlB,EAAOmC,KAAK0jB,MAEZ2B,GAASA,EAAM/rB,sBAAwBuE,IAASmC,KAAK0iB,cACvD1iB,KAAKsmB,oBAELtmB,KAAKukB,eAAiB,GACtB1mB,EAAK0T,mBAAkB,SAAUzX,IAC/B,SAAyBA,EAAIurB,GAAO,OAAUvrB,GAAIjB,UACpD,KAEAwqB,EAAM+C,YAGRpmB,KAAK0jB,MAAQ,KACb1jB,KAAKkiB,eAAgB,CACvB,EAEAD,EAAQ3hB,UAAUgmB,kBAAoB,WACpCtmB,KAAKqjB,MAAMlnB,OAAO6D,KAAKkmB,kBACvBlmB,KAAKkmB,iBAAmB,IAC1B,EAEAjE,EAAQ9jB,KAAO,MACR8jB,CACT,CAndA,CAmdE0G,GAAA,GAEEpN,GAAO,CACT9E,YAAa,SAAUmS,EAAsB5X,GAC3C,IAAI6X,EAAY7X,EAAO6L,MAAQ,GAAK,EAAI,EACpCiM,EAAa9X,EAAO8L,OAAS,GAAK,EAAI,EAEtC+L,EAAY,IACd7X,EAAO2L,GAAK3L,EAAO6L,MACnB7L,EAAO6L,OAAS7L,EAAO6L,OAGrBiM,EAAa,IACf9X,EAAO4L,GAAK5L,EAAO8L,OACnB9L,EAAO8L,QAAU9L,EAAO8L,QAG1B,IAAIiM,EAAaH,EAAqBjM,EAAIiM,EAAqB/L,MAC3DmM,EAAaJ,EAAqBhM,EAAIgM,EAAqB9L,OAC3DH,EAAI+E,GAAQ1Q,EAAO2L,EAAGiM,EAAqBjM,GAC3CsM,EAAKtH,GAAQ3Q,EAAO2L,EAAI3L,EAAO6L,MAAOkM,GACtCnM,EAAI8E,GAAQ1Q,EAAO4L,EAAGgM,EAAqBhM,GAC3CsM,EAAKvH,GAAQ3Q,EAAO4L,EAAI5L,EAAO8L,OAAQkM,GACvCG,EAAWF,EAAKtM,EAChByM,EAAWF,EAAKtM,EAoBpB,OAfA5L,EAAO2L,EAAIwM,GAAYxM,EAAIoM,EAAaE,EAAKtM,EAC7C3L,EAAO4L,EAAIwM,GAAYxM,EAAIoM,EAAaE,EAAKtM,EAC7C5L,EAAO6L,MAAQsM,EAAW,EAAIF,EAAKtM,EACnC3L,EAAO8L,OAASsM,EAAW,EAAIF,EAAKtM,EAEhCiM,EAAY,IACd7X,EAAO2L,GAAK3L,EAAO6L,MACnB7L,EAAO6L,OAAS7L,EAAO6L,OAGrBiM,EAAa,IACf9X,EAAO4L,GAAK5L,EAAO8L,OACnB9L,EAAO8L,QAAU9L,EAAO8L,QAGnBqM,GAAYC,CACrB,EACAlS,MAAO,SAAU4K,EAAkB9Q,GACjC,IAAIqY,EAAQrY,EAAOyM,IAAMzM,EAAO0M,EAAI,GAAK,EAEzC,GAAI2L,EAAQ,EAAG,CACb,IAAIC,EAAMtY,EAAO0M,EACjB1M,EAAO0M,EAAI1M,EAAOyM,GAClBzM,EAAOyM,GAAK6L,CACd,CAEA,IAAI5L,EAAIiE,GAAQ3Q,EAAO0M,EAAGoE,EAAiBpE,GACvCD,EAAKiE,GAAQ1Q,EAAOyM,GAAIqE,EAAiBrE,IAC7CzM,EAAO0M,EAAIA,EACX1M,EAAOyM,GAAKA,EACZ,IAAI8L,EAAU7L,EAAID,EAAK,EAEvB,GAAI4L,EAAQ,EAAG,CACTC,EAAMtY,EAAO0M,EACjB1M,EAAO0M,EAAI1M,EAAOyM,GAClBzM,EAAOyM,GAAK6L,CACd,CAEA,OAAOC,CACT,GAEEnE,GAAiB,CACnB3O,YAAa,SAAU9Y,EAAaE,EAAM6nB,EAAU1U,EAAQmJ,EAAcwJ,EAAgB7L,EAAWve,EAAUiiB,GAC7G,IAAIJ,EAAO,IAAIoO,GAAA,EAAK,CAClBtM,OAAO,QAAO,CAAC,EAAGlM,GAClByY,GAAI,IAKN,GAHArO,EAAKsO,YAAchE,EACnBtK,EAAKzW,KAAO,OAERgf,EAAgB,CAClB,IAAIgG,EAAYvO,EAAK8B,MACjB0M,EAAkBzP,EAAe,SAAW,QAChDwP,EAAUC,GAAmB,CAC/B,CAEA,OAAOxO,CACT,EACAlE,MAAO,SAAUvZ,EAAaE,EAAM6nB,EAAU1U,EAAQgN,EAAU2F,EAAgB7L,EAAWve,EAAUiiB,GACnG,IAAIqO,GAAc7L,GAAYxC,EAAW,GAAUsO,GAAA,EAC/CxJ,EAAS,IAAIuJ,EAAW,CAC1B3M,MAAOlM,EACPyY,GAAI,IAENnJ,EAAO3b,KAAO,OACd,IAAIolB,EAAcC,GAA2BhM,GAK7C,GAJAsC,EAAO2J,sBAAwBpK,GAAkCkK,EAAa,CAC5EhK,WAAY8J,IAAe,KAGzBlG,EAAgB,CAClB,IAAIuG,EAAc5J,EAAOpD,MACrB0M,EAAkB5L,EAAW,IAAM,WACnCmM,EAAgB,CAAC,EACrBD,EAAYN,GAAmB5L,EAAW,EAAIhN,EAAO6M,WACrDsM,EAAcP,GAAmB5Y,EAAO4Y,IACvCrwB,EAAW,KAAc,OAAW+mB,EAAQ,CAC3CpD,MAAOiN,GAENxG,EACL,CAEA,OAAOrD,CACT,GAGF,SAASuD,GAAmBlmB,EAAaM,GACvC,IAAImsB,EAAqBzsB,EAAYK,IAAI,gBAAgB,GACrDI,EAAWH,EAASI,cAcxB,GAAI+rB,GAAwC,aAAlBhsB,EAASD,MAAyC,gBAAlBF,EAASE,KACjE,MAAO,CACLC,SAAUA,EACVoqB,UAAWvqB,EAASM,aAAaH,GAGvC,CAEA,SAASonB,GAAwB5B,EAAiByG,EAAsBvwB,EAAIkX,EAAQ0U,EAAUvL,EAAc5gB,EAAUkrB,GACpH,IAAI6F,EACAC,EAEApQ,GACFoQ,EAAa,CACX5N,EAAG3L,EAAO2L,EACVE,MAAO7L,EAAO6L,OAEhByN,EAAe,CACb1N,EAAG5L,EAAO4L,EACVE,OAAQ9L,EAAO8L,UAGjByN,EAAa,CACX3N,EAAG5L,EAAO4L,EACVE,OAAQ9L,EAAO8L,QAEjBwN,EAAe,CACb3N,EAAG3L,EAAO2L,EACVE,MAAO7L,EAAO6L,QAIb4H,IAGFlrB,EAAW,KAAc,OAAWO,EAAI,CACvCojB,MAAOoN,GACND,EAAsB3E,EAAU,MAGrC,IAAI8E,EAAqBH,EAAuBzG,EAAgBxlB,SAASinB,MAAQ,MAChF9rB,EAAW,KAAc,OAAWO,EAAI,CACvCojB,MAAOqN,GACNC,EAAoB9E,EACzB,CAEA,SAAS+E,GAAwBC,EAAK3wB,GACpC,IAAK,IAAIuB,EAAI,EAAGA,EAAIvB,EAAMyB,OAAQF,IAChC,IAAK4B,SAASwtB,EAAI3wB,EAAMuB,KACtB,OAAO,EAIX,OAAO,CACT,CAEA,IAAIqvB,GAAe,CAAC,IAAK,IAAK,QAAS,UACnCC,GAAgB,CAAC,KAAM,KAAM,IAAK,aAAc,YAChD1F,GAAgB,CAClBzO,YAAa,SAAUzF,GACrB,OAAQyZ,GAAwBzZ,EAAQ2Z,GAC1C,EACAzT,MAAO,SAAUlG,GACf,OAAQyZ,GAAwBzZ,EAAQ4Z,GAC1C,GAEE/Z,GAAY,CAGd4F,YAAa,SAAU5Y,EAAMhF,EAAWosB,GACtC,IAAIjU,EAASnT,EAAKiT,cAAcjY,GAC5BgyB,EAAiB5F,EAAY6F,GAAa7F,EAAWjU,GAAU,EAE/D+Z,EAAQ/Z,EAAO6L,MAAQ,EAAI,GAAK,EAChCmO,EAAQha,EAAO8L,OAAS,EAAI,GAAK,EACrC,MAAO,CACLH,EAAG3L,EAAO2L,EAAIoO,EAAQF,EAAiB,EACvCjO,EAAG5L,EAAO4L,EAAIoO,EAAQH,EAAiB,EACvChO,MAAO7L,EAAO6L,MAAQkO,EAAQF,EAC9B/N,OAAQ9L,EAAO8L,OAASkO,EAAQH,EAEpC,EACA3T,MAAO,SAAUrZ,EAAMhF,EAAWosB,GAChC,IAAIjU,EAASnT,EAAKiT,cAAcjY,GAChC,MAAO,CACL8kB,GAAI3M,EAAO2M,GACXC,GAAI5M,EAAO4M,GACXH,GAAIzM,EAAOyM,GACXC,EAAG1M,EAAO0M,EACVG,WAAY7M,EAAO6M,WACnBC,SAAU9M,EAAO8M,SACjBC,UAAW/M,EAAO+M,UAEtB,GAGF,SAASkN,GAAcja,GACrB,OAA4B,MAArBA,EAAO6M,YAAyC,MAAnB7M,EAAO8M,UAAoB9M,EAAO6M,aAAe7M,EAAO8M,QAC9F,CAEA,SAASkM,GAA2BhM,GAClC,OAAO,SAAUA,GACf,IAAIkN,EAAalN,EAAW,MAAQ,QACpC,OAAO,SAAUmC,GACf,OAAQA,GACN,IAAK,QACL,IAAK,cACL,IAAK,MACL,IAAK,YACH,OAAOA,EAAW+K,EAEpB,QACE,OAAO/K,EAEb,CACF,CAdO,CAcLnC,EACJ,CAEA,SAASuH,GAAYzrB,EAAI+D,EAAMhF,EAAWosB,EAAWjU,EAAQrT,EAAa6lB,EAAsB2H,GAC9F,IAAIrvB,EAAQ+B,EAAKwS,cAAcxX,EAAW,SAErCsyB,GACHrxB,EAAGkrB,SAAS,IAAKC,EAAUjnB,IAAI,CAAC,YAAa,kBAAoB,GAGnElE,EAAGgrB,SAAShpB,GACZ,IAAIsvB,EAAcnG,EAAUtrB,WAAW,UACvCyxB,GAAetxB,EAAGmB,KAAK,SAAUmwB,GACjC,IAAIC,EAAuBF,EAAU3H,EAAuBxS,EAAO0M,GAAK1M,EAAOyM,GAAK,SAAW,WAAazM,EAAO8M,UAAY9M,EAAO6M,WAAa,WAAa,aAAe2F,EAAuBxS,EAAO8L,QAAU,EAAI,SAAW,MAAQ9L,EAAO6L,OAAS,EAAI,QAAU,OACxQyO,GAAoB,SAAqBrG,IAC7C,SAAcnrB,EAAIwxB,EAAmB,CACnCC,aAAc5tB,EACd6tB,eAAgB3yB,EAChB4yB,YAAanM,GAAgB3hB,EAAYG,UAAWjF,GACpD6yB,aAAc5vB,EAAM6vB,KACpBC,eAAgB9vB,EAAMC,QACtB8vB,uBAAwBR,IAE1B,IAAI3lB,EAAQ5L,EAAGgsB,iBAEf,GAAIqF,GAAWzlB,EAAO,CACpB,IAAIya,EAAW8E,EAAUjnB,IAAI,CAAC,QAAS,aACvClE,EAAGgyB,WAAWC,OAAsB,WAAb5L,GAA+B,KACtDe,GAAsBpnB,EAAiB,YAAbqmB,EAAyBkL,EAAuBlL,EAAU6J,GAA2BxG,GAAuByB,EAAUjnB,IAAI,CAAC,QAAS,WAChK,EAEA,SAAuB0H,EAAO4lB,EAAmB3tB,EAAYquB,YAAYnzB,IAAY,SAAUqU,GAC7F,OAAOyS,GAA4B9hB,EAAMqP,EAC3C,IACA,IAAI+e,EAAgBhH,EAAUd,SAAS,CAAC,cACxC,SAAoBrqB,EAAImyB,EAAcjuB,IAAI,SAAUiuB,EAAcjuB,IAAI,aAAciuB,EAAcjuB,IAAI,cACtG,SAAyBlE,EAAImrB,GAEzBgG,GAAcja,KAChBlX,EAAGgC,MAAM6vB,KAAO,OAChB7xB,EAAGgC,MAAMowB,OAAS,QAClB,QAAKpyB,EAAGqyB,QAAQ,SAAUC,GACpBA,EAAMtwB,QACRswB,EAAMtwB,MAAM6vB,KAAOS,EAAMtwB,MAAMowB,OAAS,OAE5C,IAEJ,CAGA,SAASpB,GAAa7F,EAAWoH,GAE/B,IAAIzQ,EAAcqJ,EAAUjnB,IAAI,CAAC,YAAa,gBAE9C,IAAK4d,GAA+B,SAAhBA,EAClB,OAAO,EAGT,IAAImB,EAAYkI,EAAUjnB,IAAI,CAAC,YAAa,iBAAmB,EAE3D6e,EAAQ/f,MAAMuvB,EAAUxP,OAAS8K,OAAOC,UAAYtqB,KAAKuB,IAAIwtB,EAAUxP,OACvEC,EAAShgB,MAAMuvB,EAAUvP,QAAU6K,OAAOC,UAAYtqB,KAAKuB,IAAIwtB,EAAUvP,QAC7E,OAAOxf,KAAKH,IAAI4f,EAAWF,EAAOC,EACpC,CAEA,IAAIwP,GAEJ,WACE,SAASA,IAAiB,CAE1B,OAAOA,CACT,CAJA,GAMIC,GAEJ,SAAU7S,GAGR,SAAS6S,EAAUlO,GACjB,IAAIvT,EAAQ4O,EAAOlI,KAAKxR,KAAMqe,IAASre,KAGvC,OADA8K,EAAM3M,KAAO,WACN2M,CACT,CAyBA,OAhCA,QAAUyhB,EAAW7S,GASrB6S,EAAUjsB,UAAUge,gBAAkB,WACpC,OAAO,IAAIgO,EACb,EAEAC,EAAUjsB,UAAUie,UAAY,SAAU/P,EAAK0O,GAU7C,IAPA,IAAIsP,EAAStP,EAAMsP,OACfC,EAAazsB,KAAKysB,WAClBC,EAAc,EAAI1sB,KAAKysB,WACvBE,EAAa,GACb/tB,EAAO,GACPguB,EAAW5sB,KAAK4sB,SAEXtxB,EAAI,EAAGA,EAAIkxB,EAAOhxB,OAAQF,GAAK,EACtCsD,EAAK6tB,GAAcG,EACnBhuB,EAAK8tB,GAAeF,EAAOlxB,EAAI,GAC/BqxB,EAAWF,GAAcD,EAAOlxB,EAAImxB,GACpCE,EAAWD,GAAeF,EAAOlxB,EAAIoxB,GACrCle,EAAI4M,KAAKuR,EAAW,GAAIA,EAAW,GAAI/tB,EAAK,GAAIA,EAAK,GAEzD,EAEO2tB,CACT,CAlCA,CAkCEnN,GAAA,IAEF,SAASiH,GAAY1oB,EAAa0lB,EAAOwJ,EAAgBC,GAEvD,IAAIjvB,EAAOF,EAAYG,UACnB2uB,EAAa5uB,EAAKgT,UAAU,uBAAyB,EAAI,EACzDkc,EAAmBlvB,EAAKgT,UAAU,oBAClC+b,EAAW/uB,EAAKgT,UAAU,QAC1BqT,EAAkBvmB,EAAYwmB,SAAS,mBACvC6I,EAAWnvB,EAAKgT,UAAU,yBAE9B,GAAImc,EAAU,CACZ,IAAIpI,EAAO,IAAI2H,GAAU,CACvBrP,MAAO,CACLsP,OAAQQ,GAEVF,cAAeA,EACfG,QAAQ,EACRxD,GAAI,IAEN7E,EAAK6H,WAAaA,EAClB7H,EAAKmI,iBAAmBA,EACxBnI,EAAKgI,SAAWA,EAChBhI,EAAKE,SAASZ,EAAgBa,gBAC9B1B,EAAM9iB,IAAIqkB,GACViI,GAAkBA,EAAe9pB,KAAK6hB,EACxC,CAEA,IAAI9qB,EAAK,IAAIyyB,GAAU,CACrBrP,MAAO,CACLsP,OAAQ3uB,EAAKgT,UAAU,gBAEzBic,cAAeA,EACfI,qBAAqB,EACrBzD,GAAI,IAEN3vB,EAAG2yB,WAAaA,EAChB3yB,EAAGizB,iBAAmBA,EACtBjzB,EAAG8yB,SAAWA,EACdvJ,EAAM9iB,IAAIzG,GACVA,EAAGgrB,SAASjnB,EAAKmS,UAAU,WAE3B,OAAUlW,GAAIsX,YAAczT,EAAYyT,YAEnCzT,EAAYK,IAAI,YACnBlE,EAAG+sB,GAAG,YAAasG,IACnBrzB,EAAG+sB,GAAG,YAAasG,KAGrBN,GAAkBA,EAAe9pB,KAAKjJ,EACxC,CAGA,IAAIqzB,IAA2B,EAAAC,GAAA,KAAS,SAAUC,GAChD,IAAIC,EAAYttB,KACZnH,EAAY00B,GAAuBD,EAAWD,EAAMG,QAASH,EAAMI,UACvE,OAAUH,GAAWz0B,UAAYA,GAAa,EAAIA,EAAY,IAChE,GAAG,IAAI,GAEP,SAAS00B,GAAuBD,EAAW3Q,EAAGC,GAS5C,IARA,IAAI6P,EAAaa,EAAUb,WACvBC,EAAc,EAAID,EAClBD,EAASc,EAAUpQ,MAAMsP,OACzBO,EAAmBO,EAAUP,iBAC7BJ,EAAa,GACb/tB,EAAO,GACPguB,EAAWU,EAAUV,SAEhBtxB,EAAI,EAAG2S,EAAMue,EAAOhxB,OAAS,EAAGF,EAAI2S,EAAK3S,IAAK,CACrD,IAAIoyB,EAAS,EAAJpyB,EAWT,GAVAsD,EAAK6tB,GAAcG,EACnBhuB,EAAK8tB,GAAeF,EAAOkB,EAAK,GAChCf,EAAWF,GAAcD,EAAOkB,EAAKjB,GACrCE,EAAWD,GAAeF,EAAOkB,EAAKhB,GAElC9tB,EAAK8tB,GAAe,IACtBC,EAAWD,IAAgB9tB,EAAK8tB,GAChC9tB,EAAK8tB,IAAgB9tB,EAAK8tB,IAGxB/P,GAAKgQ,EAAW,IAAMhQ,GAAKgQ,EAAW,GAAK/tB,EAAK,IAAMge,GAAK+P,EAAW,IAAM/P,GAAK+P,EAAW,GAAK/tB,EAAK,GACxG,OAAOmuB,EAAiBzxB,EAE5B,CAEA,OAAQ,CACV,CAEA,SAASsqB,GAAsBpC,EAAsBxS,EAAQ6Q,GAC3D,GAAIxC,GAAuBwC,EAAO,eAAgB,CAChD,IAAI8H,EAAY3Y,EACZ2c,EAAc9L,EAAMnF,UACxB,MAAO,CACLC,EAAG6G,EAAuBmG,EAAUhN,EAAIgR,EAAYhR,EACpDC,EAAG4G,EAAuBmK,EAAY/Q,EAAI+M,EAAU/M,EACpDC,MAAO2G,EAAuBmG,EAAU9M,MAAQ8Q,EAAY9Q,MAC5DC,OAAQ0G,EAAuBmK,EAAY7Q,OAAS6M,EAAU7M,OAElE,CACM6Q,EAAc9L,EAAMnF,UAAxB,IACIwN,EAAclZ,EAClB,MAAO,CACL2M,GAAIgQ,EAAYhQ,GAChBC,GAAI+P,EAAY/P,GAChBH,GAAI+F,EAAuBmK,EAAYlQ,GAAKyM,EAAYzM,GACxDC,EAAG8F,EAAuBmK,EAAYjQ,EAAIwM,EAAYxM,EACtDG,WAAY2F,EAAuB0G,EAAYrM,WAAa,EAC5DC,SAAU0F,EAAuB0G,EAAYpM,SAAqB,EAAVxgB,KAAK6gB,GAGnE,CAEA,SAAS0G,GAAmBhD,EAAO2B,EAAsBxS,GACvD,IAAI4c,EAA4B,UAAf/L,EAAM1jB,KAAmB2rB,GAAA,EAASN,GAAA,EACnD,OAAO,IAAIoE,EAAW,CACpB1Q,MAAO0I,GAAsBpC,EAAsBxS,EAAQ6Q,GAC3DoL,QAAQ,EACRxD,GAAI,GAER,CAEA,UCx9BO,SAASoE,GAAQC,GACtBA,EAAUC,kBAAkB,IAC5BD,EAAUE,oBAAoBC,IAC9BH,EAAUI,eAAeJ,EAAUK,SAASC,OAAOC,OAAQ,KAAa,KAAQ,QAEhFP,EAAUI,eAAeJ,EAAUK,SAASC,OAAOE,oBAAoB,QAAwB,QAE/FR,EAAUS,kBAAkBT,EAAUK,SAASK,UAAUC,UAAWjxB,EAAW,QAW/EswB,EAAUY,eAAe,CACvBvwB,KAAM,kBACNkvB,MAAO,kBACP3sB,OAAQ,WACP,SAAU0hB,EAASnpB,GACpB,IAAIovB,EAAgBjG,EAAQiG,eAAiB,SAC7CpvB,EAAQ01B,cAAc,CACpBC,SAAUvG,EACVwG,MAAOzM,IACN,SAAU0M,GACP1M,EAAQ+F,UACV2G,EAAeC,KAAKC,oBAAoB5M,EAAQ+F,SAEpD,GACF,GACF,C,qECjCe,SAAS8G,IACtB,IAAIC,GAAQ,UACZ,OAAO,SAAUvxB,GACf,IAAIwxB,EAASD,EAAMvxB,GACf4lB,EAAkB5lB,EAAY4lB,gBAC9B6L,IAAkBD,EAAO1U,MACzB4U,IAAwBF,EAAOG,kBAI/B7U,EAAQ0U,EAAO1U,SAAW8I,IAAmBA,EAAgB9I,OAC7DE,EAAcwU,EAAOG,qBAAuB/L,IAAmBA,EAAgB+L,mBACnF,QAAUF,IAAkB3U,GAAS4U,IAAwB1U,IAAgB,OAC/E,CACF,C,+ECXe,SAAS4U,EAAoBC,EAAQv2B,GAClD,IAEI0E,EAFA8xB,EAAQ,GACRre,EAAcoe,EAAOpe,YAGzB,GAAmB,MAAfA,KAAyBzT,EAAc1E,EAAQy2B,iBAAiBte,IAClE,MAAO,CACLqe,MAAO,IAIX,IAAI5xB,EAAOF,EAAYG,UACnBjF,EAAY,KAAyBgF,EAAM2xB,GAE/C,GAAiB,MAAb32B,GAAqBA,EAAY,GAAK,KAAeA,GACvD,MAAO,CACL42B,MAAO,IAIX,IAAI31B,EAAK+D,EAAKyT,iBAAiBzY,GAC3BoF,EAAWN,EAAYO,iBAE3B,GAAIP,EAAYgyB,mBACdF,EAAQ9xB,EAAYgyB,mBAAmB92B,IAAc,QAChD,GAAIoF,GAAYA,EAAS+b,YAC9B,GAAIwV,EAAOI,UAAW,CACpB,IAAIxxB,EAAWH,EAASI,cACpBC,EAAYL,EAASM,aAAaH,GAClCyxB,EAAevxB,EAAUY,IACzB4wB,EAAc1xB,EAASc,IACvB6wB,EAAkC,MAAjBF,GAAyC,WAAjBA,EAA4B,EAAI,EACzEG,EAAUnyB,EAAKoB,aAAa6wB,GAC5BG,EAAc,GAClBA,EAAYF,GAAkBlyB,EAAKG,IAAIgyB,EAASn3B,GAChDo3B,EAAY,EAAIF,GAAkBlyB,EAAKG,IAAIH,EAAKmP,mBAAmB,wBAAyBnU,GAC5F42B,EAAQxxB,EAAS+b,YAAYiW,IAAgB,EAC/C,MACER,EAAQxxB,EAAS+b,YAAYnc,EAAKkQ,UAAU,KAAW9P,EAAS+F,YAAY,SAAU9E,GACpF,OAAOrB,EAAKoB,aAAaC,EAC3B,IAAIrG,KAAe,QAEhB,GAAIiB,EAAI,CAEb,IAAIshB,EAAOthB,EAAGo2B,kBAAkBC,QAChC/U,EAAKgV,eAAet2B,EAAGu2B,WACvBZ,EAAQ,CAACrU,EAAKuB,EAAIvB,EAAKyB,MAAQ,EAAGzB,EAAKwB,EAAIxB,EAAK0B,OAAS,EAC3D,CAEA,MAAO,CACL2S,MAAOA,EACP31B,GAAIA,EAER,C,gHC1DIo1B,GAAQ,UACR9pB,EAAO,KASJ,SAASkrB,EAASztB,EAAKjF,EAAK2yB,GACjC,IAAI,SAAJ,CAIA,IAAIC,EAAK5yB,EAAIgpB,QACbsI,EAAMsB,GAAIC,UAAYvB,EAAMsB,GAAIC,QAAU,CAAC,GAC3CC,EAAoBF,EAAI5yB,GACxB,IAAI+yB,EAASzB,EAAMsB,GAAIC,QAAQ5tB,KAASqsB,EAAMsB,GAAIC,QAAQ5tB,GAAO,CAAC,GAClE8tB,EAAOJ,QAAUA,CANjB,CAOF,CAEA,SAASG,EAAoBF,EAAI5yB,GAW/B,SAASgzB,EAAWC,EAAW72B,GAC7Bw2B,EAAG3J,GAAGgK,GAAW,SAAUC,GACzB,IAAIC,EAAMC,EAAmBpzB,GAC7BwH,EAAK8pB,EAAMsB,GAAIC,SAAS,SAAUE,GAChCA,GAAU32B,EAAG22B,EAAQG,EAAGC,EAAI3I,eAC9B,IACA6I,EAAuBF,EAAIG,SAAUtzB,EACvC,GACF,CAlBIsxB,EAAMsB,GAAIW,cAIdjC,EAAMsB,GAAIW,aAAc,EACxBP,EAAW,QAAS,KAAaQ,EAAS,UAC1CR,EAAW,YAAa,KAAaQ,EAAS,cAE9CR,EAAW,YAAaS,GAW1B,CAEA,SAASJ,EAAuBC,EAAUtzB,GACxC,IAEI0zB,EAFAC,EAAUL,EAASM,QAAQh2B,OAC3Bi2B,EAAUP,EAASQ,QAAQl2B,OAG3B+1B,EACFD,EAAkBJ,EAASM,QAAQD,EAAU,GACpCE,IACTH,EAAkBJ,EAASQ,QAAQD,EAAU,IAG3CH,IACFA,EAAgBlJ,eAAiB,KACjCxqB,EAAIwqB,eAAekJ,GAEvB,CAEA,SAASD,EAAQV,EAAQG,EAAG1I,GAC1BuI,EAAOJ,QAAQ,QAAS,KAAMnI,EAChC,CAEA,SAASgJ,EAAQO,EAAahB,EAAQG,EAAG1I,GACvCuI,EAAOJ,QAAQoB,EAAab,EAAG1I,EACjC,CAEA,SAAS4I,EAAmBpzB,GAC1B,IAAIszB,EAAW,CACbM,QAAS,GACTE,QAAS,IAOPtJ,EAAiB,SAAUhG,GAC7B,IAAIwP,EAAcV,EAAS9O,EAAQjkB,MAE/ByzB,EACFA,EAAY7uB,KAAKqf,IAEjBA,EAAQgG,eAAiBA,EACzBxqB,EAAIwqB,eAAehG,GAEvB,EAEA,MAAO,CACLgG,eAAgBA,EAChB8I,SAAUA,EAEd,CAEO,SAASW,EAAWhvB,EAAKjF,GAC9B,IAAI,SAAJ,CAIA,IAAI4yB,EAAK5yB,EAAIgpB,QACT+J,GAAUzB,EAAMsB,GAAIC,SAAW,CAAC,GAAG5tB,GAEnC8tB,IACFzB,EAAMsB,GAAIC,QAAQ5tB,GAAO,KAN3B,CAQF,C,uKCxGIqsB,GAAQ,UACRiB,EAAQ,KACR2B,EAAO,KAKPC,EAEJ,WACE,SAASA,IACP/xB,KAAKgyB,WAAY,EAMjBhyB,KAAKiyB,mBAAqB,EAC5B,CAkWA,OA5VAF,EAAgBzxB,UAAU6hB,OAAS,SAAUrK,EAAWoa,EAAkBt0B,EAAKu0B,GAC7E,IAAIjlB,EAAQglB,EAAiBl0B,IAAI,SAC7Bo0B,EAASF,EAAiBl0B,IAAI,UASlC,GANAgC,KAAKqyB,WAAava,EAClB9X,KAAKsyB,kBAAoBJ,EACzBlyB,KAAKuyB,KAAO30B,EAIPu0B,GAAenyB,KAAKwyB,aAAetlB,GAASlN,KAAKyyB,cAAgBL,EAAtE,CAIApyB,KAAKwyB,WAAatlB,EAClBlN,KAAKyyB,YAAcL,EACnB,IAAI/O,EAAQrjB,KAAK0yB,OACbC,EAAS3yB,KAAK4yB,QAElB,IAAKR,GAAqB,SAAXA,EAIb,OAFA/O,GAASA,EAAMwP,YACfF,GAAUA,EAAOE,QAInBxP,GAASA,EAAMyP,OACfH,GAAUA,EAAOG,OAEjB,IAAIC,EAAW,CAAC,EAChB/yB,KAAKgzB,aAAaD,EAAU7lB,EAAO4K,EAAWoa,EAAkBt0B,GAEhE,IAAIq1B,EAAaF,EAASE,WAEtBA,IAAejzB,KAAKkzB,iBACtBlzB,KAAKmzB,MAAMv1B,GAGboC,KAAKkzB,gBAAkBD,EACvB,IAAIG,EAAgBpzB,KAAKqzB,eAAiBrzB,KAAKszB,mBAAmBxb,EAAWoa,GAE7E,GAAK7O,EAKE,CACL,IAAIkQ,EAAgB,KAAar4B,EAAag3B,EAAkBkB,GAChEpzB,KAAKwzB,gBAAgBnQ,EAAO0P,EAAUQ,GACtCvzB,KAAKyzB,cAAcpQ,EAAO0P,EAAUQ,EAAerB,EACrD,MARE7O,EAAQrjB,KAAK0yB,OAAS,IAAI,IAC1B1yB,KAAK0zB,gBAAgBrQ,EAAO0P,EAAUjb,EAAWoa,GACjDlyB,KAAK2zB,cAActQ,EAAO0P,EAAUjb,EAAWoa,GAC/Ct0B,EAAIgpB,QAAQrmB,IAAI8iB,GAOlBuQ,EAAqBvQ,EAAO6O,GAAkB,GAE9ClyB,KAAK6zB,cAAc3mB,EA1CnB,CA2CF,EAMA6kB,EAAgBzxB,UAAUnE,OAAS,SAAUyB,GAC3CoC,KAAKmzB,MAAMv1B,EACb,EAMAm0B,EAAgBzxB,UAAUmoB,QAAU,SAAU7qB,GAC5CoC,KAAKmzB,MAAMv1B,EACb,EAMAm0B,EAAgBzxB,UAAUgzB,mBAAqB,SAAUxb,EAAWoa,GAClE,IAAI94B,EAAY84B,EAAiBl0B,IAAI,aACjC+wB,EAAOjX,EAAUiX,KACjB+E,EAA+B,aAAd/E,EAAK5wB,KACtB41B,EAAU7B,EAAiBl0B,IAAI,QAEnC,IAAK+1B,IAAYD,EACf,OAAO,EAGT,GAAkB,SAAd16B,GAAqC,MAAbA,EAAmB,CAC7C,IAAI64B,EAAqBjyB,KAAKiyB,mBAE9B,GAAI6B,GAAkB/E,EAAKiF,eAAiB/B,EAC1C,OAAO,EAMT,GAAI8B,EAAS,CACX,IAAIE,EAAkB,IAAmCnc,GAAWmc,gBAChEC,EAAanF,EAAKtwB,YAEtB,OAAOnB,KAAKuB,IAAIq1B,EAAW,GAAKA,EAAW,IAAMD,EAAkBhC,CACrE,CAEA,OAAO,CACT,CAEA,OAAqB,IAAd74B,CACT,EAOA24B,EAAgBzxB,UAAU0yB,aAAe,SAAUD,EAAU7lB,EAAO4K,EAAWoa,EAAkBt0B,GACjG,EAMAm0B,EAAgBzxB,UAAUozB,gBAAkB,SAAUrQ,EAAO0P,EAAUjb,EAAWoa,GAChF,IAAIiC,EAAgBpB,EAASqB,QAE7B,GAAID,EAAe,CACjB,IAAIE,EAAYnF,EAAM7L,GAAOgR,UAAY,IAAIC,EAAQH,EAAch2B,MAAMgyB,EAAM4C,EAASqB,UACxF/Q,EAAM9iB,IAAI8zB,EACZ,CACF,EAMAtC,EAAgBzxB,UAAUqzB,cAAgB,SAAUtQ,EAAO0P,EAAUjb,EAAWoa,GAC9E,GAAIa,EAASrtB,MAAO,CAClB,IAAI6uB,EAAUrF,EAAM7L,GAAOkR,QAAU,IAAI,KAAapE,EAAM4C,EAASrtB,QACrE2d,EAAM9iB,IAAIg0B,GACVC,EAAoBD,EAASrC,EAC/B,CACF,EAMAH,EAAgBzxB,UAAUkzB,gBAAkB,SAAUnQ,EAAO0P,EAAU73B,GACrE,IAAIm5B,EAAYnF,EAAM7L,GAAOgR,UAEzBA,GAAatB,EAASqB,UACxBC,EAAUI,SAAS1B,EAASqB,QAAQt4B,OACpCZ,EAAYm5B,EAAW,CACrBnX,MAAO6V,EAASqB,QAAQlX,QAG9B,EAMA6U,EAAgBzxB,UAAUmzB,cAAgB,SAAUpQ,EAAO0P,EAAU73B,EAAag3B,GAChF,IAAIqC,EAAUrF,EAAM7L,GAAOkR,QAEvBA,IACFA,EAAQE,SAAS1B,EAASrtB,MAAM5J,OAChCZ,EAAYq5B,EAAS,CAKnB5X,EAAGoW,EAASrtB,MAAMiX,EAClBC,EAAGmW,EAASrtB,MAAMkX,IAEpB4X,EAAoBD,EAASrC,GAEjC,EAMAH,EAAgBzxB,UAAUuzB,cAAgB,SAAU3mB,GAClD,IAAIlN,KAAKgyB,WAAchyB,KAAK00B,sBAA5B,CAIA,IAcIC,EAdAzC,EAAmBlyB,KAAKsyB,kBAExB9B,EAAKxwB,KAAKuyB,KAAK3L,QAEf+L,EAAS3yB,KAAK4yB,QACdgC,EAAc1C,EAAiB/N,SAAS,UACxCiO,EAASF,EAAiBl0B,IAAI,UAElC,IAAK42B,EAAY52B,IAAI,UAAYo0B,GAAqB,SAAXA,EAGzC,OAFAO,GAAUnC,EAAGr0B,OAAOw2B,QACpB3yB,KAAK4yB,QAAU,MAMZ5yB,KAAK4yB,UACR+B,GAAS,EACThC,EAAS3yB,KAAK4yB,QAAU0B,EAAQO,WAAWD,EAAY52B,IAAI,QAAS,CAClE82B,OAAQ,OACRC,WAAW,EACXC,YAAa,SAAUlE,GAErB,KAAeA,EAAEzD,MACnB,EACA4H,YAAanD,EAAK9xB,KAAKk1B,kBAAmBl1B,KAAM,EAAG,GACnDm1B,MAAOrD,EAAK9xB,KAAKk1B,kBAAmBl1B,MACpCo1B,UAAWtD,EAAK9xB,KAAKq1B,iBAAkBr1B,QAEzCwwB,EAAGjwB,IAAIoyB,IAGTiB,EAAqBjB,EAAQT,GAAkB,GAE/CS,EAAO8B,SAASG,EAAY7P,aAAa,KAAM,CAAC,QAAS,cAAe,cAAe,UAAW,cAAe,aAAc,gBAAiB,mBAEhJ,IAAIuQ,EAAaV,EAAY52B,IAAI,QAE5B,KAAes3B,KAClBA,EAAa,CAACA,EAAYA,IAG5B3C,EAAO4C,OAASD,EAAW,GAAK,EAChC3C,EAAO6C,OAASF,EAAW,GAAK,EAChClI,EAAA,GAA4BptB,KAAM,yBAA0B40B,EAAY52B,IAAI,aAAe,EAAG,WAE9FgC,KAAKy1B,mBAAmBvoB,EAAOynB,EAhD/B,CAiDF,EAEA5C,EAAgBzxB,UAAUm1B,mBAAqB,SAAUvoB,EAAOynB,GAC9Dz5B,EAAY8E,KAAKsyB,mBAAoBqC,GAAU30B,KAAKqzB,eAAgBrzB,KAAK4yB,QAAS8C,EAAoB11B,KAAK21B,mBAAmBzoB,EAAOlN,KAAKqyB,WAAYryB,KAAKsyB,oBAC7J,EAEAP,EAAgBzxB,UAAU40B,kBAAoB,SAAUU,EAAIC,GAC1D,IAAIlD,EAAS3yB,KAAK4yB,QAElB,GAAKD,EAAL,CAIA3yB,KAAKgyB,WAAY,EAEjB,IAAI8D,EAAQ91B,KAAK00B,sBAAsBgB,EAAoB/C,GAAS,CAACiD,EAAIC,GAAK71B,KAAKqyB,WAAYryB,KAAKsyB,mBACpGtyB,KAAK+1B,aAAeD,EACpBnD,EAAOt4B,gBACPs4B,EAAO13B,KAAKy6B,EAAoBI,IAChC5G,EAAMyD,GAAQqD,SAAW,KAEzBh2B,KAAKi2B,wBAVL,CAWF,EAMAlE,EAAgBzxB,UAAU21B,uBAAyB,WACjD,IAAItD,EAAS3yB,KAAK4yB,QAElB,GAAKD,EAAL,CAIA,IAAIuD,EAAcl2B,KAAK+1B,aACnBje,EAAY9X,KAAKqyB,WAErBryB,KAAKuyB,KAAKnK,eAAe,CACvBjqB,KAAM,oBACNwe,EAAGuZ,EAAYC,YAAY,GAC3BvZ,EAAGsZ,EAAYC,YAAY,GAC3BC,cAAeF,EAAYE,cAC3BC,SAAU,CAAC,CACTte,QAASD,EAAUiX,KAAK7vB,IACxB0Y,UAAWE,EAAUwe,kBAZzB,CAeF,EAEAvE,EAAgBzxB,UAAU+0B,iBAAmB,WAC3Cr1B,KAAKgyB,WAAY,EACjB,IAAIW,EAAS3yB,KAAK4yB,QAElB,GAAKD,EAAL,CAIA,IAAIzlB,EAAQlN,KAAKsyB,kBAAkBt0B,IAAI,SAKvCgC,KAAKy1B,mBAAmBvoB,GAIxBlN,KAAKuyB,KAAKnK,eAAe,CACvBjqB,KAAM,WAZR,CAcF,EAMA4zB,EAAgBzxB,UAAU6yB,MAAQ,SAAUv1B,GAC1CoC,KAAKwyB,WAAa,KAClBxyB,KAAKyyB,YAAc,KACnB,IAAIjC,EAAK5yB,EAAIgpB,QACTvD,EAAQrjB,KAAK0yB,OACbC,EAAS3yB,KAAK4yB,QAEdpC,GAAMnN,IACRrjB,KAAKkzB,gBAAkB,KACvB7P,GAASmN,EAAGr0B,OAAOknB,GACnBsP,GAAUnC,EAAGr0B,OAAOw2B,GACpB3yB,KAAK0yB,OAAS,KACd1yB,KAAK4yB,QAAU,KACf5yB,KAAK+1B,aAAe,MAGtB3I,EAAA,GAAmBptB,KAAM,yBAC3B,EAMA+xB,EAAgBzxB,UAAUi2B,QAAU,WACpC,EAEAxE,EAAgBzxB,UAAUk2B,WAAa,SAAUC,EAAIC,EAAIC,GAEvD,OADAA,EAAYA,GAAa,EAClB,CACLha,EAAG8Z,EAAGE,GACN/Z,EAAG6Z,EAAG,EAAIE,GACV9Z,MAAO6Z,EAAGC,GACV7Z,OAAQ4Z,EAAG,EAAIC,GAEnB,EAEO5E,CACT,CA5WA,GA8WA,SAAS72B,EAAYyoB,EAAgByP,EAAet5B,EAAIC,GAEjD68B,EAAW1H,EAAMp1B,GAAIk8B,SAAUj8B,KAClCm1B,EAAMp1B,GAAIk8B,SAAWj8B,EACrBq5B,EAAgB,IAAoBt5B,EAAIC,EAAO4pB,IAAmB7pB,EAAGO,gBAAiBP,EAAGmB,KAAKlB,IAElG,CAEA,SAAS68B,EAAWC,EAAWC,GAC7B,GAAI,KAAgBD,IAAc,KAAgBC,GAAW,CAC3D,IAAIC,GAAW,EAIf,OAHA,KAAYD,GAAU,SAAUt3B,EAAMqD,GACpCk0B,EAAWA,GAAYH,EAAWC,EAAUh0B,GAAMrD,EACpD,MACSu3B,CACX,CACE,OAAOF,IAAcC,CAEzB,CAEA,SAAStC,EAAoBD,EAASrC,GACpCqC,EAAQrC,EAAiBl0B,IAAI,CAAC,QAAS,SAAW,OAAS,SAC7D,CAEA,SAAS03B,EAAoBI,GAC3B,MAAO,CACLnZ,EAAGmZ,EAAMnZ,GAAK,EACdC,EAAGkZ,EAAMlZ,GAAK,EACdyE,SAAUyU,EAAMzU,UAAY,EAEhC,CAEA,SAASuS,EAAqBvQ,EAAO6O,EAAkBjF,GACrD,IAAI5S,EAAI6X,EAAiBl0B,IAAI,KACzBg5B,EAAS9E,EAAiBl0B,IAAI,UAClCqlB,GAASA,EAAMhnB,UAAS,SAAUvC,GAChB,UAAZA,EAAGqE,OACA,MAALkc,IAAcvgB,EAAGugB,EAAIA,GACX,MAAV2c,IAAmBl9B,EAAGk9B,OAASA,GAC/Bl9B,EAAGmzB,OAASA,EAEhB,GACF,CAEA,Q,oBCpaIgK,EAEJ,SAAUvd,GAGR,SAASud,IACP,OAAkB,OAAXvd,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,IAC7D,CA4EA,OAhFA,QAAUi3B,EAAsBvd,GAUhCud,EAAqB32B,UAAU0yB,aAAe,SAAUD,EAAU7lB,EAAO4K,EAAWoa,EAAkBt0B,GACpG,IAAImxB,EAAOjX,EAAUiX,KACjBmI,EAAOnI,EAAKmI,KACZC,EAAkBjF,EAAiBl0B,IAAI,QACvCo5B,EAAcC,EAAaH,EAAMnI,GAAMxwB,aAAawwB,GAAMuI,kBAC1DC,EAAaxI,EAAKyI,cAAczI,EAAK0I,YAAYvqB,GAAO,IAE5D,GAAIiqB,GAAuC,SAApBA,EAA4B,CACjD,IAAIO,EAAUC,EAAA,GAAwBzF,GAClCiC,EAAgByD,EAAoBT,GAAiBpI,EAAMwI,EAAYH,GAC3EjD,EAAcr4B,MAAQ47B,EACtB3E,EAASE,WAAakB,EAAch2B,KACpC40B,EAASqB,QAAUD,CACrB,CAEA,IAAI0D,EAAaC,EAAA,GAA2BZ,EAAK7R,MAAOvN,GACxD6f,EAAA,GACAzqB,EAAO6lB,EAAU8E,EAAY/f,EAAWoa,EAAkBt0B,EAC5D,EAMAq5B,EAAqB32B,UAAUq1B,mBAAqB,SAAUzoB,EAAO4K,EAAWoa,GAC9E,IAAI2F,EAAaC,EAAA,GAA2BhgB,EAAUiX,KAAKmI,KAAK7R,MAAOvN,EAAW,CAChFigB,aAAa,IAGfF,EAAWG,YAAc9F,EAAiBl0B,IAAI,CAAC,SAAU,WACzD,IAAIi6B,EAAMN,EAAA,GAAkC7f,EAAUiX,KAAM7hB,EAAO2qB,GACnE,MAAO,CACLlb,EAAGsb,EAAI,GACPrb,EAAGqb,EAAI,GACP5W,SAAUwW,EAAWxW,UAAYwW,EAAWK,eAAiB,EAAI56B,KAAK6gB,GAAK,GAE/E,EAMA8Y,EAAqB32B,UAAUo0B,sBAAwB,SAAUrE,EAAW8H,EAAOrgB,EAAWoa,GAC5F,IAAInD,EAAOjX,EAAUiX,KACjBmI,EAAOnI,EAAKmI,KACZhD,EAAanF,EAAKuI,iBAAgB,GAClCF,EAAcC,EAAaH,EAAMnI,GAAMxwB,aAAawwB,GAAMuI,kBAC1DtyB,EAAwB,MAAb+pB,EAAK7vB,IAAc,EAAI,EAClCk5B,EAAe,CAAC/H,EAAU1T,EAAG0T,EAAUzT,GAC3Cwb,EAAapzB,IAAamzB,EAAMnzB,GAChCozB,EAAapzB,GAAY1H,KAAKH,IAAI+2B,EAAW,GAAIkE,EAAapzB,IAC9DozB,EAAapzB,GAAY1H,KAAKN,IAAIk3B,EAAW,GAAIkE,EAAapzB,IAC9D,IAAIqzB,GAAoBjB,EAAY,GAAKA,EAAY,IAAM,EACvDjB,EAAc,CAACkC,EAAkBA,GACrClC,EAAYnxB,GAAYozB,EAAapzB,GAErC,IAAIszB,EAAiB,CAAC,CACpBrX,cAAe,UACd,CACDD,MAAO,WAET,MAAO,CACLrE,EAAGyb,EAAa,GAChBxb,EAAGwb,EAAa,GAChB/W,SAAUgP,EAAUhP,SACpB8U,YAAaA,EACbC,cAAekC,EAAetzB,GAElC,EAEOiyB,CACT,CAlFA,CAkFE,GAEF,SAASI,EAAaH,EAAMnI,GAC1B,IAAIpoB,EAAM,CAAC,EAEX,OADAA,EAAIooB,EAAK7vB,IAAM,aAAe6vB,EAAKlX,MAC5Bqf,EAAKG,aAAa1wB,EAC3B,CAEA,IAAIixB,EAAsB,CACxBW,KAAM,SAAUxJ,EAAMwI,EAAYH,GAChC,IAAIoB,EAAcb,EAAA,GAAyB,CAACJ,EAAYH,EAAY,IAAK,CAACG,EAAYH,EAAY,IAAKqB,EAAgB1J,IACvH,MAAO,CACL5wB,KAAM,OACNu6B,kBAAkB,EAClBxb,MAAOsb,EAEX,EACAG,OAAQ,SAAU5J,EAAMwI,EAAYH,GAClC,IAAIwB,EAAYt7B,KAAKN,IAAI,EAAG+xB,EAAKiF,gBAC7B6E,EAAOzB,EAAY,GAAKA,EAAY,GACxC,MAAO,CACLj5B,KAAM,OACN+e,MAAOya,EAAA,GAAyB,CAACJ,EAAaqB,EAAY,EAAGxB,EAAY,IAAK,CAACwB,EAAWC,GAAOJ,EAAgB1J,IAErH,GAGF,SAAS0J,EAAgB1J,GACvB,MAAoB,MAAbA,EAAK7vB,IAAc,EAAI,CAChC,CAEA,Q,UCrHI45B,EAEJ,SAAUpf,GAGR,SAASof,IACP,IAAIhuB,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAGhE,OADA8K,EAAM3M,KAAO26B,EAAiB36B,KACvB2M,CACT,CA0DA,OAjEA,QAAUguB,EAAkBpf,GAS5Bof,EAAiB36B,KAAO,cACxB26B,EAAiB1e,cAAgB,CAE/B0Y,KAAM,OAENzY,EAAG,GACHlc,KAAM,OAGN46B,MAAM,EACNC,gBAAgB,EAChB9rB,MAAO,KACPklB,OAAQ,KACR6G,KAAM,GAGN7/B,UAAW,KACX8/B,wBAAyB,IACzBC,UAAW,CACTxd,MAAO,UACPkB,MAAO,EACP1e,KAAM,UAERi7B,YAAa,CACXzd,MAAO,yBAETjW,MAAO,CACLotB,MAAM,EACNuG,UAAW,KACXC,UAAW,OACXC,OAAQ,EACR5d,MAAO,OACP6d,QAAS,CAAC,EAAG,EAAG,EAAG,GACnBC,gBAAiB,OACjB7d,YAAa,KACbC,YAAa,EACbE,aAAc,GAEhB4W,OAAQ,CACNG,MAAM,EAEN4G,KAAM,2MACN96B,KAAM,GAEN26B,OAAQ,GAGR5d,MAAO,OACPK,WAAY,EACZC,YAAa,OACbC,cAAe,EACfC,cAAe,EAEfiR,SAAU,KAGP0L,CACT,CAnEA,CAmEEa,EAAA,GAEF,I,oBCtEIC,EAEJ,SAAUlgB,GAGR,SAASkgB,IACP,IAAI9uB,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAGhE,OADA8K,EAAM3M,KAAOy7B,EAAgBz7B,KACtB2M,CACT,CA6BA,OApCA,QAAU8uB,EAAiBlgB,GAS3BkgB,EAAgBt5B,UAAU6hB,OAAS,SAAU0X,EAAwB5gC,EAAS2E,GAC5E,IAAIk8B,EAAqB7gC,EAAQye,aAAa,WAC1CqiB,EAAYF,EAAuB77B,IAAI,cAAgB87B,GAAsBA,EAAmB97B,IAAI,cAAgB,kBAGxHg8B,EAAA,EAAwB,cAAep8B,GAAK,SAAU+zB,EAAab,EAAG1I,GAElD,SAAd2R,IAAyC,UAAhBpI,GAA2BoI,EAAUE,QAAQtI,IAAgB,IACxFvJ,EAAe,CACbjqB,KAAM,oBACNwzB,YAAaA,EACbhV,EAAGmU,GAAKA,EAAEtD,QACV5Q,EAAGkU,GAAKA,EAAErD,SAGhB,GACF,EAEAmM,EAAgBt5B,UAAUnE,OAAS,SAAUlD,EAAS2E,GACpDo8B,EAAA,EAA0B,cAAep8B,EAC3C,EAEAg8B,EAAgBt5B,UAAUmoB,QAAU,SAAUxvB,EAAS2E,GACrDo8B,EAAA,EAA0B,cAAep8B,EAC3C,EAEAg8B,EAAgBz7B,KAAO,cAChBy7B,CACT,CAtCA,CAsCE,KAEF,I,UC1CI,GAAQ,UAQG,SAASM,EAAY9X,EAASnpB,EAAS2E,GACpD,IAAI+zB,EAAcvP,EAAQuP,YACtBlC,EAAQ,CAACrN,EAAQzF,EAAGyF,EAAQxF,GAC5B4S,EAASpN,EACTgG,EAAiBhG,EAAQgG,iBAAkB,QAAKxqB,EAAIwqB,eAAgBxqB,GACpEu8B,EAAmBlhC,EAAQye,aAAa,eAAeyiB,iBAG3D,GAAKA,EAAL,CAIIC,EAAa3K,KAGfA,GAAQ,EAAAF,EAAA,GAAoB,CAC1Bne,YAAaoe,EAAOpe,YAGpBvY,UAAW22B,EAAO32B,WACjBI,GAASw2B,OAGd,IAAI4K,EAAiBD,EAAa3K,GAK9B6K,EAAgB9K,EAAO6G,SACvBA,EAAW8D,EAAiB9D,SAC5BkE,EAA6B,UAAhB5I,GAA2ByI,EAAa3K,GACrD+K,EAAgB,CAAC,EACjBC,EAAe,CAAC,EAChBC,EAAiB,CACnBtrB,KAAM,GACN3M,IAAK,CAAC,GAEJk4B,EAAW,CACbC,aAAa,QAAMA,EAAaH,GAChCI,aAAa,QAAMA,EAAaH,KAGlC,QAAKP,EAAiBW,aAAa,SAAU78B,EAAU88B,GAErD,IAAIC,EAAwBX,GAAkBp8B,EAASg9B,aAAaxL,IACpE,QAAK0K,EAAiBA,iBAAiBY,IAAc,SAAUG,EAAUr4B,GACvE,IAAIksB,EAAOmM,EAASnM,KAChBoM,EAAgBC,EAAkBd,EAAeY,GAErD,IAAKX,GAAcS,KAA2BV,GAAiBa,GAAgB,CAC7E,IAAI/qB,EAAM+qB,GAAiBA,EAAcjuB,MAE9B,MAAPkD,GAAgBiqB,IAClBjqB,EAAM2e,EAAKsM,YAAY5L,IAGlB,MAAPrf,GAAekrB,EAAcJ,EAAU9qB,EAAKuqB,GAAU,EAAOH,EAC/D,CACF,GACF,IAEA,IAAIe,EAAe,CAAC,EAsBpB,OArBA,QAAKlF,GAAU,SAAUmF,EAAaC,GACpC,IAAIC,EAAYF,EAAYE,UAExBA,IAAcjB,EAAagB,KAC7B,QAAKC,EAAUrF,UAAU,SAAUsF,EAAaC,GAC9C,IAAIC,EAAapB,EAAamB,GAE9B,GAAID,IAAgBH,GAAeK,EAAY,CAC7C,IAAIzrB,EAAMyrB,EAAW3uB,MACrBwuB,EAAUI,SAAW1rB,EAAMorB,EAAYzM,KAAKvH,MAAMuU,MAAML,EAAUI,OAAO1rB,EAAK4rB,EAAgBL,GAAcK,EAAgBR,MAC5HD,EAAaC,EAAY34B,KAAOuN,CAClC,CACF,GAEJ,KACA,QAAKmrB,GAAc,SAAUnrB,EAAKqrB,GAChCH,EAAcjF,EAASoF,GAASrrB,EAAKuqB,GAAU,EAAMH,EACvD,IACAyB,EAAoBxB,EAAcpE,EAAUmE,GAC5C0B,EAAwBxB,EAAgBjL,EAAOrN,EAASgG,GACxD+T,EAAyB9F,EAAUjO,EAAgBxqB,GAC5C48B,CAzEP,CA0EF,CAEA,SAASc,EAAcJ,EAAUkB,EAAUzB,EAAU0B,EAAQC,GAC3D,IAAIvN,EAAOmM,EAASnM,KAEpB,IAAIA,EAAKvH,MAAM+U,WAAcxN,EAAKyN,YAAYJ,GAI9C,GAAKlB,EAASuB,cAAd,CAMA,IAAIvG,EAAcwG,EAAsBN,EAAUlB,GAC9CyB,EAAezG,EAAYyG,aAC3BC,EAAc1G,EAAY0G,YAG1BD,EAAa,IAAkC,MAA5BL,EAAalrB,cAClC,QAAOkrB,EAAcK,EAAa,KAK/BN,GAAUnB,EAASnC,MAClBhK,EAAKyN,YAAYI,IAA+B,MAAfA,IACnCR,EAAWQ,GAIfjC,EAASC,YAAYM,EAAUkB,EAAUO,GAGzChC,EAASE,YAAYK,EAAUhF,EAAa0G,EAvB5C,MAFEjC,EAASC,YAAYM,EAAUkB,EA0BnC,CAEA,SAASM,EAAsBxvB,EAAOguB,GACpC,IAAInM,EAAOmM,EAASnM,KAChB7vB,EAAM6vB,EAAK7vB,IACX09B,EAAc1vB,EACdyvB,EAAe,GACfE,EAAUlV,OAAOC,UACjBkV,GAAW,EA+Cf,OA9CA,QAAK5B,EAAS6B,cAAc,SAAUC,EAAQ5yB,GAC5C,IACI6yB,EACAC,EAFAC,EAAUH,EAAOl/B,UAAUyM,iBAAiBrL,GAIhD,GAAI89B,EAAOI,mBAAoB,CAC7B,IAAIpuB,EAASguB,EAAOI,mBAAmBD,EAASjwB,EAAO6hB,GACvDmO,EAAcluB,EAAOkuB,YACrBD,EAAqBjuB,EAAOquB,YAC9B,KAAO,CAML,GALAH,EAAcF,EAAOl/B,UAAUwQ,iBAAiB6uB,EAAQ,GAAIjwB,EAG9C,aAAd6hB,EAAK5wB,KAAsB,GAAM,OAE5B++B,EAAY1hC,OACf,OAGFyhC,EAAqBD,EAAOl/B,UAAUE,IAAIm/B,EAAQ,GAAID,EAAY,GACpE,CAEA,GAA0B,MAAtBD,GAA+B//B,SAAS+/B,GAA5C,CAIA,IAAIptB,EAAO3C,EAAQ+vB,EACfK,EAAOhgC,KAAKuB,IAAIgR,GAEhBytB,GAAQT,KACNS,EAAOT,GAAWhtB,GAAQ,GAAKitB,EAAU,KAC3CD,EAAUS,EACVR,EAAUjtB,EACV+sB,EAAcK,EACdN,EAAanhC,OAAS,IAGxB,QAAK0hC,GAAa,SAAUrkC,GAC1B8jC,EAAa55B,KAAK,CAChBqO,YAAa4rB,EAAO5rB,YACpBmsB,gBAAiB1kC,EACjBA,UAAWmkC,EAAOl/B,UAAUuP,YAAYxU,IAE5C,IAnBF,CAqBF,IACO,CACL8jC,aAAcA,EACdC,YAAaA,EAEjB,CAEA,SAAShC,EAAYH,EAAcS,EAAUhuB,EAAOyvB,GAClDlC,EAAaS,EAASr4B,KAAO,CAC3BqK,MAAOA,EACPyvB,aAAcA,EAElB,CAEA,SAAS9B,EAAYH,EAAgBQ,EAAUhF,EAAahpB,GAC1D,IAAIyvB,EAAezG,EAAYyG,aAC3B5N,EAAOmM,EAASnM,KAChBjX,EAAYiX,EAAK1J,MACjB6M,EAAmBgJ,EAAShJ,iBAGhC,GAAKgJ,EAASlC,gBAAmB2D,EAAanhC,OAA9C,CAIA,IAAIgiC,EAAgBtC,EAASj9B,SAASonB,MAClC0V,EAAc0C,EAAA,GAAoBD,GAClCE,EAAehD,EAAej4B,IAAIs4B,GAEjC2C,IACHA,EAAehD,EAAej4B,IAAIs4B,GAAe,CAC/C4C,WAAYH,EAAc5wB,GAC1BgxB,cAAeJ,EAAclH,eAC7BuH,aAAcL,EAAcr/B,KAC5B2/B,iBAAkBN,EAAc5O,SAChCmP,WAAY,IAEdrD,EAAetrB,KAAKrM,KAAK26B,IAG3BA,EAAaK,WAAWh7B,KAAK,CAC3BgV,QAASgX,EAAK7vB,IACd0Y,UAAWE,EAAUwe,eACrBrwB,SAAU6R,EAAU3Z,KACpBmqB,OAAQxQ,EAAUlL,GAClBM,MAAOA,EAKP8wB,cAAe,CACb1E,UAAWpH,EAAiBl0B,IAAI,CAAC,QAAS,cAC1Cq7B,UAAWnH,EAAiBl0B,IAAI,CAAC,QAAS,eAE5CigC,kBAAmBtB,EAAah3B,SA/BlC,CAiCF,CAEA,SAASs2B,EAAoBxB,EAAcpE,EAAUmE,GACnD,IAAI0D,EAAiB1D,EAAcnE,SAAW,IAE9C,QAAKA,GAAU,SAAU6E,EAAUr4B,GACjC,IAAI+W,EAASshB,EAAShJ,iBAAiBtY,OACnCukB,EAAU1D,EAAa53B,GAEvBs7B,IACDjD,EAASkD,YAAcxkB,EAAOwY,OAAS,QACxCxY,EAAO1M,MAAQixB,EAAQjxB,MAEvB0M,EAAOqkB,mBAAqBE,EAAQxB,cAAgB,IAAIh3B,UAMrDu1B,EAASkD,YAAcxkB,EAAOwY,OAAS,QAI1B,SAAlBxY,EAAOwY,QAAqB8L,EAAen7B,KAAK,CAC9CgV,QAASmjB,EAASnM,KAAK7vB,IACvB0Y,UAAWsjB,EAASnM,KAAK1J,MAAMiR,eAC/BppB,MAAO0M,EAAO1M,OAElB,GACF,CAEA,SAASgvB,EAAwBxB,EAAgBjL,EAAOrN,EAASgG,GAE/D,IAAIgS,EAAa3K,IAAWiL,EAAetrB,KAAK5T,OAAhD,CAWA,IAAI+d,IAAemhB,EAAetrB,KAAK,GAAG2uB,WAAW,IAAM,CAAC,GAAGE,mBAAqB,IAAI,IAAM,CAAC,EAC/F7V,EAAe,CACbjqB,KAAM,UACNkgC,eAAe,EACf1hB,EAAG8S,EAAM,GACT7S,EAAG6S,EAAM,GACT2G,cAAehU,EAAQgU,cACvBjW,SAAUiC,EAAQjC,SAClBod,gBAAiBhkB,EAAWgkB,gBAC5B1kC,UAAW0gB,EAAW1gB,UACtBuY,YAAamI,EAAWnI,YACxBspB,eAAgBA,EAAetrB,MAjBjC,MAJEgZ,EAAe,CACbjqB,KAAM,WAsBZ,CAEA,SAASg+B,EAAyB9F,EAAUjO,EAAgBxqB,GAI1D,IAAI4yB,EAAK5yB,EAAIgpB,QACT0X,EAAc,4BACdC,EAAiB,EAAM/N,GAAI8N,IAAgB,CAAC,EAC5CE,EAAgB,EAAMhO,GAAI8N,GAAe,CAAC,GAG9C,QAAKjI,GAAU,SAAU6E,EAAUr4B,GACjC,IAAI+W,EAASshB,EAAShJ,iBAAiBtY,OACrB,SAAlBA,EAAOwY,SAAqB,QAAKxY,EAAOqkB,mBAAmB,SAAUQ,GACnE,IAAI57B,EAAM47B,EAAUrtB,YAAc,MAAQqtB,EAAU5lC,UACpD2lC,EAAc37B,GAAO47B,CACvB,GACF,IAEA,IAAIC,EAAc,GACdC,EAAa,IACjB,QAAKJ,GAAgB,SAAUE,EAAW57B,IACvC27B,EAAc37B,IAAQ87B,EAAW57B,KAAK07B,EACzC,KACA,QAAKD,GAAe,SAAUC,EAAW57B,IACtC07B,EAAe17B,IAAQ67B,EAAY37B,KAAK07B,EAC3C,IACAE,EAAWnjC,QAAUoC,EAAIwqB,eAAe,CACtCjqB,KAAM,WACNkgC,eAAe,EAEfO,SAAS,EACTC,MAAOF,IAETD,EAAYljC,QAAUoC,EAAIwqB,eAAe,CACvCjqB,KAAM,YACNkgC,eAAe,EAEfO,SAAS,EACTC,MAAOH,GAEX,CAEA,SAAStD,EAAkBd,EAAeY,GACxC,IAAK,IAAI5/B,EAAI,EAAGA,GAAKg/B,GAAiB,IAAI9+B,OAAQF,IAAK,CACrD,IAAI6/B,EAAgBb,EAAch/B,GAElC,GAAI4/B,EAASnM,KAAK7vB,MAAQi8B,EAAcpjB,SAAWmjB,EAASnM,KAAK1J,MAAMiR,iBAAmB6E,EAAcvjB,UACtG,OAAOujB,CAEX,CACF,CAEA,SAASa,EAAgBd,GACvB,IAAIpjB,EAAYojB,EAASnM,KAAK1J,MAC1B7lB,EAAO,CAAC,EACRN,EAAMM,EAAKuY,QAAUmjB,EAASnM,KAAK7vB,IAIvC,OAHAM,EAAKoY,UAAYpY,EAAKN,EAAM,aAAe4Y,EAAUwe,eACrD92B,EAAKs/B,SAAWt/B,EAAKN,EAAM,YAAc4Y,EAAUnT,KACnDnF,EAAK8oB,OAAS9oB,EAAKN,EAAM,UAAY4Y,EAAUlL,GACxCpN,CACT,CAEA,SAAS46B,EAAa3K,GACpB,OAAQA,GAAqB,MAAZA,EAAM,IAAc3yB,MAAM2yB,EAAM,KAAmB,MAAZA,EAAM,IAAc3yB,MAAM2yB,EAAM,GAC1F,CCtWO,SAAS5B,EAAQC,GAItBiR,EAAA,2BAAkC,uBAAwB,GAC1DjR,EAAUkR,uBAAuB,GACjClR,EAAUmR,sBAAsB,GAChCnR,EAAUoR,sBAAqB,SAAUtlB,GAEvC,GAAIA,EAAQ,GACRA,EAAOulB,aAA6C,IAA9BvlB,EAAOulB,YAAY3jC,UAAkBoe,EAAOulB,YAAc,CAAC,GACnF,IAAIlG,EAAOrf,EAAOulB,YAAYlG,KAI1BA,KAAS,QAAQA,KACnBrf,EAAOulB,YAAYlG,KAAO,CAACA,GAE/B,CACF,IAGAnL,EAAUS,kBAAkBT,EAAUK,SAASK,UAAUC,WAAW,SAAUx1B,EAAS2E,GAGrF3E,EAAQye,aAAa,eAAeyiB,kBAAmB,QAAQlhC,EAAS2E,EAC1E,IAEAkwB,EAAUY,eAAe,CACvBvwB,KAAM,oBACNkvB,MAAO,oBACP3sB,OAAQ,sBACPw5B,EACL,C,+KCpCO,SAASkF,EAAQnmC,EAAS2E,GAC/B,IAAIoR,EAAS,CAcXqnB,SAAU,CAAC,EACXgJ,gBAAgB,EAMhBlF,iBAAkB,CAAC,EACnBW,YAAa,CAAC,GAKhB,OAHAwE,EAAgBtwB,EAAQ/V,EAAS2E,GAEjCoR,EAAOqwB,gBAAkBE,EAAkBvwB,EAAQ/V,GAC5C+V,CACT,CAEA,SAASswB,EAAgBtwB,EAAQ/V,EAAS2E,GACxC,IAAIk8B,EAAqB7gC,EAAQye,aAAa,WAC1CmiB,EAAyB5gC,EAAQye,aAAa,eAE9C8nB,EAAc3F,EAAuB77B,IAAI,QAAQ,IAAS,GAC1DyhC,EAAa,IAEjB,QAAK7hC,EAAI8hC,wBAAwB,SAAUzhC,GAEzC,GAAKA,EAAS0hC,mBAAd,CAIA,IAAI5E,EAAc6E,EAAQ3hC,EAASonB,OAC/Bwa,EAAqB7wB,EAAOmrB,iBAAiBY,GAAe,CAAC,EACjE/rB,EAAO8rB,YAAYC,GAAe98B,EAGlC,IAAIu/B,EAAgBv/B,EAASonB,MACzBya,EAAmBtC,EAAcrZ,SAAS,UAAW2V,GAIzD,IAHA,QAAK77B,EAAS8hC,WAAW,QAAMC,GAAqB,EAAO,OAGvD/hC,EAASgiC,gBAAkBnG,GAE5BgG,EAAiB9hC,IAAI,QAAS,CAG/B,IAAIkiC,EAAkD,SAApCJ,EAAiB9hC,IAAI,WACnCmiC,EAA0D,UAAlDL,EAAiB9hC,IAAI,CAAC,cAAe,SAC7CoiC,EAAcniC,EAASgiC,eAAeH,EAAiB9hC,IAAI,CAAC,cAAe,WAE3EkiC,GAAeC,KACjB,QAAKC,EAAYC,UAAU,QAAML,GAAqBG,GAAQ,QAAgBD,IAG5EC,IACF,QAAKC,EAAYE,WAAW,QAAMN,EAAqB,SAAS,GAEpE,CA5BA,CAgCA,SAASA,EAAoBO,EAAavH,EAAgBjK,GACxD,IAAImD,EAAmBnD,EAAK1J,MAAMlB,SAAS,cAAe0V,GACtD2G,EAAkBtO,EAAiBl0B,IAAI,QAE3C,GAAKwiC,IAAuC,SAApBA,GAA+BD,GAAgBE,EAAgBvO,IAAvF,CAIsB,MAAlB8G,IACFA,EAAiB9G,EAAiBl0B,IAAI,mBAGxCk0B,EAAmBqO,EAAcG,EAAqB3R,EAAM+Q,EAAkBjG,EAAwB5gC,EAASsnC,EAAavH,GAAkB9G,EAC9I,IAAI6G,EAAO7G,EAAiBl0B,IAAI,QAC5B2iC,EAAUf,EAAQ7Q,EAAK1J,OACvBoX,EAAgBzD,GAAkBD,GAAsB,aAAdhK,EAAK5wB,KAE/C+8B,EAAWlsB,EAAOqnB,SAASsK,GAAW,CACxC99B,IAAK89B,EACL5R,KAAMA,EACN9wB,SAAUA,EACVi0B,iBAAkBA,EAClB8G,eAAgBA,EAChByD,cAAeA,EACf1D,KAAMA,EACNqF,UAAWqC,EAAgBvO,GAC3B6K,aAAc,GACdrB,UAAW,MAEbmE,EAAmBc,GAAWzF,EAC9BlsB,EAAOqwB,eAAiBrwB,EAAOqwB,gBAAkB5C,EACjD,IAAImE,EAAaC,EAAkBrB,EAAazQ,GAEhD,GAAkB,MAAd6R,EAAoB,CACtB,IAAIlF,EAAY+D,EAAWmB,KAAgBnB,EAAWmB,GAAc,CAClEvK,SAAU,CAAC,IAEbqF,EAAUrF,SAASsK,GAAWzF,EAC9BQ,EAAUI,OAAS0D,EAAYoB,GAAY9E,OAC3CZ,EAASQ,UAAYA,CACvB,CAlCA,CAmCF,CACF,GACF,CAEA,SAASgF,EAAqB3R,EAAM+Q,EAAkBjG,EAAwB5gC,EAASsnC,EAAavH,GAClG,IAAI8H,EAA0BhB,EAAiB3b,SAAS,eACpDgL,EAAS,CAAC,OAAQ,OAAQ,YAAa,cAAe,QAAS,YAAa,0BAA2B,wBAAyB,KAChI4R,EAAiB,CAAC,GACtB,QAAK5R,GAAQ,SAAU6R,GACrBD,EAAeC,IAAS,QAAMF,EAAwB9iC,IAAIgjC,GAC5D,IAIAD,EAAehI,KAAqB,aAAdhK,EAAK5wB,QAAyB66B,EAGR,UAAxC8H,EAAwB9iC,IAAI,UAC9B+iC,EAAe5iC,KAAO,QAGxB,IAAI8iC,EAAcF,EAAer7B,QAAUq7B,EAAer7B,MAAQ,CAAC,GAInE,GAFoB,MAApBu7B,EAAYnO,OAAiBmO,EAAYnO,MAAO,GAE5B,UAAhByN,EAAyB,CAE3B,IAAIW,EAA8BJ,EAAwB9iC,IAAI,CAAC,QAAS,SAIxE,GAHAijC,EAAYnO,KAAsC,MAA/BoO,GAAsCA,GAGpDlI,EAAgB,CACnB,IAAImI,EAAaJ,EAAe5H,UAAY2H,EAAwB9iC,IAAI,cACxEmjC,IAAc,QAASF,EAAaE,EAAWC,UACjD,CACF,CAEA,OAAOrS,EAAK1J,MAAMlB,SAAS,cAAe,IAAI,IAAM4c,EAAgBlH,EAAwB5gC,GAC9F,CAEA,SAASsmC,EAAkBvwB,EAAQ/V,GAEjCA,EAAQooC,YAAW,SAAU1jC,GAE3B,IAAIM,EAAWN,EAAYO,iBACvBojC,EAAuB3jC,EAAYK,IAAI,CAAC,UAAW,YAAY,GAC/DujC,EAAoB5jC,EAAYK,IAAI,CAAC,UAAW,SAAS,GAExDC,GAAqC,SAAzBqjC,IAA4D,IAAzBA,GAA2D,SAAzBA,IAAyD,IAAtBC,IAAkF,IAAnD5jC,EAAYK,IAAI,CAAC,cAAe,SAAS,KAIjM,QAAKgR,EAAOmrB,iBAAiByF,EAAQ3hC,EAASonB,SAAS,SAAU6V,GAC/D,IAAInM,EAAOmM,EAASnM,KAEhB9wB,EAASujC,QAAQzS,EAAK7vB,OAAS6vB,IACjCmM,EAAS6B,aAAah6B,KAAKpF,GACC,MAA5Bu9B,EAASjH,kBAA4BiH,EAASjH,gBAAkB,GAChEiH,EAASjH,iBAAmBt2B,EAAYG,UAAUjB,QAEtD,GACF,GACF,CAiBA,SAASgkC,EAAkBrB,EAAazQ,GAItC,IAHA,IAAIjX,EAAYiX,EAAK1J,MACjBnmB,EAAM6vB,EAAK7vB,IAEN5D,EAAI,EAAGA,EAAIkkC,EAAYhkC,OAAQF,IAAK,CAC3C,IAAImmC,EAAajC,EAAYlkC,IAAM,CAAC,EAEpC,GAAIomC,EAAgBD,EAAWviC,EAAM,UAAW4Y,EAAUlL,KAAO80B,EAAgBD,EAAWviC,EAAM,aAAc4Y,EAAUwe,iBAAmBoL,EAAgBD,EAAWviC,EAAM,YAAa4Y,EAAUnT,MACnM,OAAOrJ,CAEX,CACF,CAEA,SAASomC,EAAgBC,EAAeC,GACtC,MAAyB,QAAlBD,IAA2B,QAAQA,KAAkB,QAAQA,EAAeC,IAAkB,GAAKD,IAAkBC,CAC9H,CAEO,SAASC,EAAS/pB,GACvB,IAAIojB,EAAW4G,EAAYhqB,GAE3B,GAAKojB,EAAL,CAIA,IAAIhJ,EAAmBgJ,EAAShJ,iBAC5B1K,EAAQ0T,EAASnM,KAAKvH,MACtB5N,EAASsY,EAAiBtY,OAC1BwY,EAASF,EAAiBl0B,IAAI,UAC9BkP,EAAQglB,EAAiBl0B,IAAI,SAEpB,MAATkP,IACFA,EAAQsa,EAAMuU,MAAM7uB,IAGtB,IAAIkxB,EAAYqC,EAAgBvO,GAGlB,MAAVE,IACFxY,EAAOwY,OAASgM,EAAY,OAAS,QAGvC,IAAI5/B,EAASgpB,EAAM/oB,YAAYkH,QAC/BnH,EAAO,GAAKA,EAAO,IAAMA,EAAOujC,WAGvB,MAAT70B,GAEGA,EAAQ1O,EAAO,MAEhB0O,EAAQ1O,EAAO,IAGb0O,EAAQ1O,EAAO,KACjB0O,EAAQ1O,EAAO,IAGjBob,EAAO1M,MAAQA,EAEXkxB,IACFxkB,EAAOwY,OAAS8I,EAASnM,KAAKvH,MAAM+U,UAAY,OAAS,OArC3D,CAuCF,CACO,SAASuF,EAAYhqB,GAC1B,IAAIqiB,GAAoBriB,EAAU7e,QAAQye,aAAa,gBAAkB,CAAC,GAAGyiB,iBAC7E,OAAOA,GAAoBA,EAAiB9D,SAASuJ,EAAQ9nB,GAC/D,CACO,SAASkqB,EAAoBlqB,GAClC,IAAIojB,EAAW4G,EAAYhqB,GAC3B,OAAOojB,GAAYA,EAAShJ,gBAC9B,CAEA,SAASuO,EAAgBvO,GACvB,QAASA,EAAiBl0B,IAAI,CAAC,SAAU,QAC3C,CAOO,SAAS4hC,EAAQva,GACtB,OAAOA,EAAMlnB,KAAO,KAAOknB,EAAMzY,EACnC,C,mQChRO,SAASq1B,EAAa/P,GAC3B,IAEIp2B,EAFAq7B,EAAkBjF,EAAiBl0B,IAAI,QACvCkkC,EAAahQ,EAAiB/N,SAASgT,EAAkB,SAW7D,MARwB,SAApBA,GACFr7B,EAAQomC,EAAWC,eACnBrmC,EAAM6vB,KAAO,MACgB,WAApBwL,IACTr7B,EAAQomC,EAAWE,eACnBtmC,EAAMowB,OAAS,MAGVpwB,CACT,CAKO,SAASumC,EAAmBtP,EAAUjb,EAAWoa,EAAkBt0B,EAAK0kC,GAC7E,IAAIp1B,EAAQglB,EAAiBl0B,IAAI,SAC7BukC,EAAOC,EAAct1B,EAAO4K,EAAUiX,KAAMjX,EAAU7e,QAASi5B,EAAiBl0B,IAAI,qBAAsB,CAC5Gs7B,UAAWpH,EAAiBl0B,IAAI,CAAC,QAAS,cAC1Cq7B,UAAWnH,EAAiBl0B,IAAI,CAAC,QAAS,gBAExCykC,EAAavQ,EAAiB/N,SAAS,SACvCue,EAAW,KAA6BD,EAAWzkC,IAAI,YAAc,GACrE2kC,EAAOF,EAAWG,UAClBC,EAAW,KAA4BN,EAAMI,GAC7CxiB,EAAWmiB,EAASniB,SACpBtD,EAAQgmB,EAAShmB,MAAQ6lB,EAAS,GAAKA,EAAS,GAChD5lB,EAAS+lB,EAAS/lB,OAAS4lB,EAAS,GAAKA,EAAS,GAElD1hB,EAAQshB,EAASthB,MACX,UAAVA,IAAsBb,EAAS,IAAMtD,GAC3B,WAAVmE,IAAuBb,EAAS,IAAMtD,EAAQ,GAC9C,IAAIoE,EAAgBqhB,EAASrhB,cACX,WAAlBA,IAA+Bd,EAAS,IAAMrD,GAC5B,WAAlBmE,IAA+Bd,EAAS,IAAMrD,EAAS,GAEvDgmB,EAAmB3iB,EAAUtD,EAAOC,EAAQlf,GAC5C,IAAImlC,EAAUN,EAAWzkC,IAAI,mBAExB+kC,GAAuB,SAAZA,IACdA,EAAUjrB,EAAU9Z,IAAI,CAAC,WAAY,YAAa,WAGpD+0B,EAASrtB,MAAQ,CAEfiX,EAAGwD,EAAS,GACZvD,EAAGuD,EAAS,GACZrkB,OAAO,QAAgB2mC,EAAY,CACjCF,KAAMA,EACNI,KAAMA,EACNhX,KAAM8W,EAAWO,eACjBxJ,QAASkJ,EACTjJ,gBAAiBsJ,IAGnBtZ,GAAI,GAER,CAEA,SAASqZ,EAAmB3iB,EAAUtD,EAAOC,EAAQlf,GACnD,IAAIqlC,EAAYrlC,EAAIslC,WAChBC,EAAavlC,EAAIwlC,YACrBjjB,EAAS,GAAK7iB,KAAKH,IAAIgjB,EAAS,GAAKtD,EAAOomB,GAAapmB,EACzDsD,EAAS,GAAK7iB,KAAKH,IAAIgjB,EAAS,GAAKrD,EAAQqmB,GAAcrmB,EAC3DqD,EAAS,GAAK7iB,KAAKN,IAAImjB,EAAS,GAAI,GACpCA,EAAS,GAAK7iB,KAAKN,IAAImjB,EAAS,GAAI,EACtC,CAEO,SAASqiB,EAAct1B,EAAO6hB,EAAM91B,EAASglC,EAAmBt3B,GACrEuG,EAAQ6hB,EAAKvH,MAAMuU,MAAM7uB,GACzB,IAAIq1B,EAAOxT,EAAKvH,MAAM6b,SAAS,CAC7Bn2B,MAAOA,GACN,CAGDosB,UAAW3yB,EAAI2yB,YAEbD,EAAY1yB,EAAI0yB,UAEpB,GAAIA,EAAW,CACb,IAAIiK,EAAW,CACbp2B,MAAO,KAA2B6hB,EAAM,CACtC7hB,MAAOA,IAETq2B,cAAexU,EAAK7vB,IACpB0Y,UAAWmX,EAAKlX,MAChB2rB,WAAY,IAEd,KAAYvF,GAAmB,SAAUwF,GACvC,IAAIzG,EAAS/jC,EAAQy2B,iBAAiB+T,EAAQryB,aAC1CvY,EAAY4qC,EAAQlG,gBACpBmG,EAAa1G,GAAUA,EAAO2G,cAAc9qC,GAChD6qC,GAAcJ,EAASE,WAAWzgC,KAAK2gC,EACzC,IAEI,KAAgBrK,GAClBkJ,EAAOlJ,EAAUuK,QAAQ,UAAWrB,GAC3B,KAAkBlJ,KAC3BkJ,EAAOlJ,EAAUiK,GAErB,CAEA,OAAOf,CACT,CACO,SAASsB,EAAuB9U,EAAM7hB,EAAO2qB,GAClD,IAAIxH,EAAY,OAGhB,OAFA,KAAcA,EAAWA,EAAWwH,EAAWxW,UAC/C,KAAiBgP,EAAWA,EAAWwH,EAAW1X,UAC3C,iBAAuB,CAAC4O,EAAK0I,YAAYvqB,IAAS2qB,EAAWiM,aAAe,IAAMjM,EAAWK,gBAAkB,IAAML,EAAWG,aAAe,IAAK3H,EAC7J,CACO,SAAS0T,EAAkC72B,EAAO6lB,EAAU8E,EAAY/f,EAAWoa,EAAkBt0B,GAE1G,IAAIomC,EAAa,oBAA4BnM,EAAWxW,SAAU,EAAGwW,EAAWK,gBAChFL,EAAWG,YAAc9F,EAAiBl0B,IAAI,CAAC,QAAS,WACxDqkC,EAAmBtP,EAAUjb,EAAWoa,EAAkBt0B,EAAK,CAC7DuiB,SAAU0jB,EAAuB/rB,EAAUiX,KAAM7hB,EAAO2qB,GACxD7W,MAAOgjB,EAAWpjB,UAClBK,cAAe+iB,EAAWnjB,mBAE9B,CACO,SAASojB,EAAcC,EAAIC,EAAIxN,GAEpC,OADAA,EAAYA,GAAa,EAClB,CACLyN,GAAIF,EAAGvN,GACP0N,GAAIH,EAAG,EAAIvN,GACX1N,GAAIkb,EAAGxN,GACPzN,GAAIib,EAAG,EAAIxN,GAEf,CACO,SAAS2N,EAAc7N,EAAIC,EAAIC,GAEpC,OADAA,EAAYA,GAAa,EAClB,CACLha,EAAG8Z,EAAGE,GACN/Z,EAAG6Z,EAAG,EAAIE,GACV9Z,MAAO6Z,EAAGC,GACV7Z,OAAQ4Z,EAAG,EAAIC,GAEnB,C,+MCpJO,SAAS4N,EAAkBC,GAGhC,IAFA,IAAIp1B,EAAO,GAEF9T,EAAI,EAAGA,EAAIkpC,EAAMhpC,OAAQF,IAAK,CACrC,IAAImpC,EAAUD,EAAMlpC,GAEpB,IAAImpC,EAAQC,YAAYjf,OAAxB,CAIA,IAAI/f,EAAQ++B,EAAQ/+B,MAChB2qB,EAAY3qB,EAAMi/B,uBAElBC,EAAYl/B,EAAMwqB,kBAClB2U,GAAiBxU,GAAaA,EAAU,GAAK,MAAQA,EAAU,GAAK,KACpEyU,EAAYp/B,EAAM5J,MAAMy9B,QAAU,EAClCwL,EAAaH,EAAUzU,QAC3B4U,EAAW3U,eAAeC,GAC1B0U,EAAWpoB,GAAKmoB,EAAY,EAC5BC,EAAWnoB,GAAKkoB,EAAY,EAC5BC,EAAWloB,OAASioB,EACpBC,EAAWjoB,QAAUgoB,EACrB,IAAIE,EAAMH,EAAgB,IAAII,EAAA,EAAqBL,EAAWvU,GAAa,KAC3EjhB,EAAKrM,KAAK,CACR2C,MAAOA,EACPw/B,UAAWT,EAAQS,UACnB9pB,KAAM2pB,EACNH,UAAWA,EACXI,IAAKA,EACLG,SAAUV,EAAQU,SAClBT,YAAaD,EAAQC,YACrBU,aAAcX,EAAQY,qBACtBC,YAAaT,EACbxU,UAAWA,GAzBb,CA2BF,CAEA,OAAOjhB,CACT,CAwLO,SAASm2B,EAAYC,GAC1B,IAAIC,EAAkB,GAEtBD,EAAUrwB,MAAK,SAAUiS,EAAGC,GAC1B,OAAOA,EAAE8d,SAAW/d,EAAE+d,QACxB,IACA,IAAIJ,EAAa,IAAIW,EAAA,EAAa,EAAG,EAAG,EAAG,GAE3C,SAASC,EAAO7rC,GACd,IAAKA,EAAG2rB,OAAQ,CAEd,IAAImgB,EAAgB9rC,EAAG+rC,YAAY,YAEP,MAAxBD,EAAcngB,SAChBmgB,EAAcngB,QAAS,EAE3B,CAEA3rB,EAAG2rB,QAAS,CACd,CAEA,IAAK,IAAInqB,EAAI,EAAGA,EAAIkqC,EAAUhqC,OAAQF,IAAK,CACzC,IAAIwqC,EAAYN,EAAUlqC,GACtBupC,EAAgBiB,EAAUR,YAC1BV,EAAYkB,EAAUlB,UACtBvU,EAAYyV,EAAUzV,UACtB3qB,EAAQogC,EAAUpgC,MAClBw/B,EAAYY,EAAUZ,UAC1BH,EAAWgB,KAAKD,EAAU1qB,MAE1B2pB,EAAWloB,OAAS,GACpBkoB,EAAWjoB,QAAU,GACrBioB,EAAWpoB,GAAK,IAChBooB,EAAWnoB,GAAK,IAIhB,IAHA,IAAIooB,EAAMc,EAAUd,IAChBgB,GAAa,EAERzjC,EAAI,EAAGA,EAAIkjC,EAAgBjqC,OAAQ+G,IAAK,CAC/C,IAAI0jC,EAAgBR,EAAgBljC,GAEpC,GAAKwiC,EAAWmB,UAAUD,EAAc7qB,MAAxC,CAIA,GAAIypB,GAAiBoB,EAAcX,YAAa,CAE9CU,GAAa,EACb,KACF,CAYA,GAVKC,EAAcjB,MAEjBiB,EAAcjB,IAAM,IAAIC,EAAA,EAAqBgB,EAAcrB,UAAWqB,EAAc5V,YAGjF2U,IAEHA,EAAM,IAAIC,EAAA,EAAqBL,EAAWvU,IAGxC2U,EAAIkB,UAAUD,EAAcjB,KAAM,CACpCgB,GAAa,EACb,KACF,CArBA,CAsBF,CAGIA,GACFL,EAAOjgC,GACPw/B,GAAaS,EAAOT,KAEpBx/B,EAAMzK,KAAK,SAAU6qC,EAAUpB,YAAYjf,QAC3Cyf,GAAaA,EAAUjqC,KAAK,SAAU6qC,EAAUpB,YAAYyB,kBAC5DV,EAAgB1iC,KAAK+iC,GAEzB,CACF,CChSA,IAAI3nB,EAAK7gB,KAAK6gB,GAwBVioB,EAEJ,WACE,SAASA,EAAYtuB,EAAWnR,GAC9B3G,KAAKqjB,MAAQ,IAAI,IACjBrjB,KAAK2G,IAAMA,EACX3G,KAAK8X,UAAYA,GAEjB,QAASnR,EAAK,CACZm9B,YAAa,EACbuC,cAAe,EACfC,cAAe,EACfpO,eAAgB,EAChBjL,QAAQ,EACRsZ,gBAAiB,WACf,OAAO,CACT,IAGF,IAAIC,EAAiB,IAAI,IAAc,CACrC7pB,EAAGhW,EAAIwZ,SAAS,GAChBvD,EAAGjW,EAAIwZ,SAAS,GAChBkB,SAAU1a,EAAI0a,WAIhBmlB,EAAeC,kBACfzmC,KAAK0mC,gBAAkBF,CACzB,CA2DA,OAzDAJ,EAAY9lC,UAAUqmC,WAAa,SAAUhiC,GAC3C,QAASiiC,EAASjiC,EACpB,EAEAyhC,EAAY9lC,UAAUC,IAAM,SAAUoE,GACpCiiC,EAASjiC,GAAM3E,KAAK2G,IAAK3G,KAAK8X,UAAW9X,KAAKqjB,MAAOrjB,KAAK0mC,gBAC5D,EAEAN,EAAY9lC,UAAUumC,SAAW,WAC/B,OAAO7mC,KAAKqjB,KACd,EAEA+iB,EAAYU,gBAAkB,SAAUC,EAAcC,EAAcC,GAClE,IACIrmB,EACAC,EAFAqmB,GAAe,QAAUF,EAAeD,GAsB5C,OAlBI,QAAmBG,IAErBrmB,EAAoBomB,EAAY,EAAI,MAAQ,SAC5CrmB,EAAY,WACH,QAAmBsmB,EAAe/oB,IAE3C0C,EAAoBomB,EAAY,EAAI,SAAW,MAC/CrmB,EAAY,WAEZC,EAAoB,SAGlBD,EADEsmB,EAAe,GAAKA,EAAe/oB,EACzB8oB,EAAY,EAAI,QAAU,OAE1BA,EAAY,EAAI,OAAS,SAIlC,CACL5lB,SAAU6lB,EACVtmB,UAAWA,EACXC,kBAAmBA,EAEvB,EAEAulB,EAAYe,sBAAwB,SAAUrvB,GAC5C,IAAIsvB,EAAY,CACd/e,cAAevQ,EAAU8W,SACzB0H,eAAgBxe,EAAUwe,gBAG5B,OADA8Q,EAAUtvB,EAAU8W,SAAW,SAAW9W,EAAUwe,eAC7C8Q,CACT,EAEAhB,EAAYiB,cAAgB,SAAUvvB,GACpC,IAAIwvB,EAAaxvB,EAAU9Z,IAAI,WAC/B,OAAO8Z,EAAU9Z,IAAI,aAChB8Z,EAAU9Z,IAAI,iBAAmBspC,GAAcA,EAAWxU,KACjE,EAEOsT,CACT,CAtFA,GAyFIQ,EAAW,CACbW,SAAU,SAAU5gC,EAAKmR,EAAWuL,EAAOmjB,GACzC,IAAIgB,EAAQ1vB,EAAU9Z,IAAI,CAAC,WAAY,SAMvC,GAJc,SAAVwpC,GAAoB7gC,EAAI4/B,kBAC1BiB,EAAQ7gC,EAAI4/B,gBAAgB,aAGzBiB,EAAL,CAIA,IAAIhpC,EAASsZ,EAAUiX,KAAKtwB,YACxBgpC,EAASjB,EAAenW,UACxBqX,EAAM,CAAClpC,EAAO,GAAI,GAClBmpC,EAAM,CAACnpC,EAAO,GAAI,GAClB4e,EAAUsqB,EAAI,GAAKC,EAAI,GAEvBF,KACF,QAAiBC,EAAKA,EAAKD,IAC3B,QAAiBE,EAAKA,EAAKF,IAG7B,IAAItO,GAAY,QAAO,CACrByO,QAAS,SACR9vB,EAAUqM,SAAS,CAAC,WAAY,cAAcge,gBAC7C5J,EAAO,IAAI,IAAa,CAC1Brb,MAAO,CACLknB,GAAIsD,EAAI,GACRrD,GAAIqD,EAAI,GACRze,GAAI0e,EAAI,GACRze,GAAIye,EAAI,IAEV7rC,MAAOq9B,EACP0O,uBAAwBlhC,EAAIkhC,wBAA0B,EACtD5a,QAAQ,EACRxD,GAAI,IAEN6K,EAAQwT,qBAAqBvP,EAAKrb,MAAOqb,EAAKz8B,MAAMihB,WACpDwb,EAAKwP,KAAO,OACZ1kB,EAAM9iB,IAAIg4B,GACV,IAAIyP,EAASlwB,EAAU9Z,IAAI,CAAC,WAAY,WAExC,GAAc,MAAVgqC,EAAgB,CAClB,IAAIC,EAAYnwB,EAAU9Z,IAAI,CAAC,WAAY,gBAEvC,QAASgqC,KAEXA,EAAS,CAACA,EAAQA,MAGhB,QAASC,KAAc,QAASA,MAElCA,EAAY,CAACA,EAAWA,IAG1B,IAAIC,GAAc,QAAsBpwB,EAAU9Z,IAAI,CAAC,WAAY,kBAAoB,EAAGiqC,GACtFE,EAAgBF,EAAU,GAC1BG,EAAiBH,EAAU,IAC/B,QAAK,CAAC,CACJ1mB,OAAQ5a,EAAI0a,SAAW/jB,KAAK6gB,GAAK,EACjClE,OAAQiuB,EAAY,GACpBxqB,EAAG,GACF,CACD6D,OAAQ5a,EAAI0a,SAAW/jB,KAAK6gB,GAAK,EACjClE,OAAQiuB,EAAY,GACpBxqB,EAAGpgB,KAAK+qC,MAAMX,EAAI,GAAKC,EAAI,KAAOD,EAAI,GAAKC,EAAI,KAAOD,EAAI,GAAKC,EAAI,KAAOD,EAAI,GAAKC,EAAI,QACrF,SAAUlY,EAAO5X,GACnB,GAAsB,SAAlBmwB,EAAOnwB,IAAsC,MAAjBmwB,EAAOnwB,GAAgB,CACrD,IAAIywB,GAAS,QAAaN,EAAOnwB,IAASswB,EAAgB,GAAIC,EAAiB,EAAGD,EAAeC,EAAgBjP,EAAUjN,QAAQ,GAE/HxO,EAAI+R,EAAM/R,EAAI+R,EAAMxV,OACpBF,EAAKqD,EAAUuqB,EAAMD,EACzBY,EAAOrtC,KAAK,CACVomB,SAAUoO,EAAMlO,OAChB5E,EAAG5C,EAAG,GAAK2D,EAAIpgB,KAAKuhB,IAAIlY,EAAI0a,UAC5BzE,EAAG7C,EAAG,GAAK2D,EAAIpgB,KAAKyhB,IAAIpY,EAAI0a,UAC5B4L,QAAQ,EACRxD,GAAI,KAENpG,EAAM9iB,IAAI+nC,EACZ,CACF,GACF,CAzEA,CA0EF,EACAC,cAAe,SAAU5hC,EAAKmR,EAAWuL,EAAOmjB,GAC9C,IAAIgC,EAAWC,EAAoBplB,EAAOmjB,EAAgB1uB,EAAWnR,GACjE+hC,EAAWC,EAAetlB,EAAOmjB,EAAgB1uB,EAAWnR,GAKhE,GAJAiiC,EAAmB9wB,EAAW4wB,EAAUF,GACxCK,EAAoBxlB,EAAOmjB,EAAgB1uB,EAAWnR,EAAI2/B,eAGtDxuB,EAAU9Z,IAAI,CAAC,YAAa,gBAAiB,CAC/C,IAAIwnC,EAAYjB,GAAkB,QAAImE,GAAU,SAAUhjC,GACxD,MAAO,CACLA,MAAOA,EACPy/B,SAAUz/B,EAAM+jB,GAChBib,YAAa,CACXjf,OAAQ/f,EAAM+f,QAGpB,KACA8f,EAAYC,EACd,CACF,EACA1G,SAAU,SAAUn4B,EAAKmR,EAAWuL,EAAOmjB,GACzC,IAAI7hC,GAAO,QAASgC,EAAIm4B,SAAUhnB,EAAU9Z,IAAI,SAEhD,GAAK2G,EAAL,CAIA,IAQImkC,EAOAC,EAfAC,EAAelxB,EAAU9Z,IAAI,gBAC7BqoC,EAAgB1/B,EAAI0/B,cACpB4C,EAAiBnxB,EAAUqM,SAAS,iBACpC+kB,EAAMpxB,EAAU9Z,IAAI,YAAc,EAClCQ,EAASsZ,EAAUiX,KAAKtwB,YACxB0qC,EAAY3qC,EAAO,GAAKA,EAAO,IAAM,EAAI,EACzCy5B,EAAM,CAAkB,UAAjB+Q,EAA2BxqC,EAAO,GAAK2qC,EAAYD,EAAuB,QAAjBF,EAAyBxqC,EAAO,GAAK2qC,EAAYD,GAAO1qC,EAAO,GAAKA,EAAO,IAAM,EACrJ4qC,EAAqBJ,GAAgBriC,EAAIm9B,YAAcuC,EAAgB6C,EAAM,GAEzEG,EAAevxB,EAAU9Z,IAAI,cAEb,MAAhBqrC,IACFA,EAAeA,EAAelrB,EAAK,KAKjCirB,EAAqBJ,GACvBF,EAAc1C,EAAYU,gBAAgBngC,EAAI0a,SAA0B,MAAhBgoB,EAAuBA,EAAe1iC,EAAI0a,SAClGglB,IAEAyC,EAAcQ,EAAc3iC,EAAI0a,SAAU2nB,EAAcK,GAAgB,EAAG7qC,GAC3EuqC,EAAyBpiC,EAAIoiC,uBAEC,MAA1BA,IACFA,EAAyBzrC,KAAKuB,IAAIkqC,EAAyBzrC,KAAKyhB,IAAI+pB,EAAYznB,YAC/EnkB,SAAS6rC,KAA4BA,EAAyB,QAInE,IAAIQ,EAAWN,EAAerG,UAC1B4G,EAAc1xB,EAAU9Z,IAAI,gBAAgB,IAAS,CAAC,EACtDyrC,EAAWD,EAAYC,SACvBC,GAAW,QAAS/iC,EAAIgjC,qBAAsBH,EAAYE,SAAUX,GACpEljB,EAAS,IAAI,KAAa,CAC5BlJ,EAAGsb,EAAI,GACPrb,EAAGqb,EAAI,GACP5W,SAAUynB,EAAYznB,SACtB4L,OAAQmZ,EAAYiB,cAAcvvB,GAClChc,OAAO,QAAgBmtC,EAAgB,CACrC1G,KAAM59B,EACNg+B,KAAM4G,EACNK,SAAU,WACV/sB,MAAO6sB,EACPD,SAAUA,EACV9d,KAAMsd,EAAejG,gBAAkBlrB,EAAU9Z,IAAI,CAAC,WAAY,YAAa,UAC/EgjB,MAAOioB,EAAejrC,IAAI,UAAY8qC,EAAYloB,UAClDK,cAAegoB,EAAejrC,IAAI,kBAAoB8qC,EAAYjoB,oBAEpE4I,GAAI,IAWN,GATA6K,EAAQuV,iBAAiB,CACvB/vC,GAAI+rB,EACJiJ,eAAgBhX,EAChB/O,SAAUpE,IAEZkhB,EAAOikB,WAAanlC,EAEpBkhB,EAAOkiB,KAAO,OAEVjwB,EAAU9Z,IAAI,gBAAiB,CACjC,IAAIopC,EAAYhB,EAAYe,sBAAsBrvB,GAClDsvB,EAAU2C,WAAa,WACvB3C,EAAUziC,KAAOA,GACjB,OAAUkhB,GAAQuhB,UAAYA,CAChC,CAGAZ,EAAejmC,IAAIslB,GACnBA,EAAO4gB,kBACPpjB,EAAM9iB,IAAIslB,GACVA,EAAOmkB,oBAzEP,CA0EF,GAGF,SAASV,EAAcjoB,EAAUnB,EAAc+pB,EAAYzrC,GACzD,IACIoiB,EACAC,EAFAqmB,GAAe,QAAU+C,EAAa5oB,GAGtCjE,EAAU5e,EAAO,GAAKA,EAAO,GAC7B0rC,EAA0B,UAAjBhqB,IAA6B9C,GAA4B,UAAjB8C,GAA4B9C,EAkBjF,OAhBI,QAAmB8pB,EAAe/oB,EAAK,IACzC0C,EAAoBqpB,EAAS,SAAW,MACxCtpB,EAAY,WACH,QAAmBsmB,EAAoB,IAAL/oB,IAC3C0C,EAAoBqpB,EAAS,MAAQ,SACrCtpB,EAAY,WAEZC,EAAoB,SAGlBD,EADEsmB,EAAoB,IAAL/oB,GAAY+oB,EAAe/oB,EAAK,EACrC+rB,EAAS,OAAS,QAElBA,EAAS,QAAU,QAI5B,CACL7oB,SAAU6lB,EACVtmB,UAAWA,EACXC,kBAAmBA,EAEvB,CAEA,SAAS+nB,EAAmB9wB,EAAW4wB,EAAUyB,GAC/C,KAAI,QAAoBryB,EAAUiX,MAAlC,CAOA,IAAIqb,EAAetyB,EAAU9Z,IAAI,CAAC,YAAa,iBAC3CqsC,EAAevyB,EAAU9Z,IAAI,CAAC,YAAa,iBAG/C0qC,EAAWA,GAAY,GACvByB,EAAUA,GAAW,GACrB,IAAIG,EAAa5B,EAAS,GACtB6B,EAAY7B,EAAS,GACrB8B,EAAY9B,EAASA,EAASltC,OAAS,GACvCivC,EAAY/B,EAASA,EAASltC,OAAS,GACvCkvC,EAAYP,EAAQ,GACpBQ,EAAWR,EAAQ,GACnBS,EAAWT,EAAQA,EAAQ3uC,OAAS,GACpCqvC,EAAWV,EAAQA,EAAQ3uC,OAAS,IAEnB,IAAjB4uC,GACFU,EAASR,GACTQ,EAASJ,IACAK,EAAqBT,EAAYC,KACtCH,GACFU,EAASP,GACTO,EAASH,KAETG,EAASR,GACTQ,EAASJ,MAIQ,IAAjBL,GACFS,EAASN,GACTM,EAASF,IACAG,EAAqBN,EAAWD,KACrCH,GACFS,EAASL,GACTK,EAASD,KAETC,EAASN,GACTM,EAASF,IA1Cb,CA6CF,CAEA,SAASE,EAAShxC,GAChBA,IAAOA,EAAG2rB,QAAS,EACrB,CAEA,SAASslB,EAAqBC,EAASC,GAErC,IAAIC,EAAYF,GAAWA,EAAQ9a,kBAAkBC,QACjDgb,EAAWF,GAAQA,EAAK/a,kBAAkBC,QAE9C,GAAK+a,GAAcC,EAAnB,CAMA,IAAIC,EAAgB3D,EAAA,GAAoB,IAIxC,OAHAA,EAAA,GAAkB2D,EAAeA,GAAgBJ,EAAQ3pB,UACzD6pB,EAAU9a,eAAeqX,EAAA,GAAe,GAAI2D,EAAeJ,EAAQK,sBACnEF,EAAS/a,eAAeqX,EAAA,GAAe,GAAI2D,EAAeH,EAAKI,sBACxDH,EAAUhF,UAAUiF,EAR3B,CASF,CAEA,SAAS/B,EAAqBJ,GAC5B,MAAwB,WAAjBA,GAA8C,WAAjBA,CACtC,CAEA,SAASsC,EAAYC,EAAaC,EAAeC,EAAcC,EAAeC,GAK5E,IAJA,IAAIxB,EAAU,GACVzC,EAAM,GACNC,EAAM,GAEDrsC,EAAI,EAAGA,EAAIiwC,EAAY/vC,OAAQF,IAAK,CAC3C,IAAIswC,EAAYL,EAAYjwC,GAAGumB,MAC/B6lB,EAAI,GAAKkE,EACTlE,EAAI,GAAK,EACTC,EAAI,GAAKiE,EACTjE,EAAI,GAAK8D,EAELD,KACF,QAAiB9D,EAAKA,EAAK8D,IAC3B,QAAiB7D,EAAKA,EAAK6D,IAI7B,IAAIK,EAAS,IAAI,IAAa,CAC5B3uB,MAAO,CACLknB,GAAIsD,EAAI,GACRrD,GAAIqD,EAAI,GACRze,GAAI0e,EAAI,GACRze,GAAIye,EAAI,IAEV7rC,MAAO4vC,EACPjiB,GAAI,EACJqiB,WAAW,EACX7e,QAAQ,IAEVqH,EAAQwT,qBAAqB+D,EAAO3uB,MAAO2uB,EAAO/vC,MAAMihB,WACxD8uB,EAAO9D,KAAO4D,EAAa,IAAMJ,EAAYjwC,GAAGywC,UAChD5B,EAAQpnC,KAAK8oC,EACf,CAEA,OAAO1B,CACT,CAEA,SAAS1B,EAAoBplB,EAAOmjB,EAAgB1uB,EAAWnR,GAC7D,IAAIooB,EAAOjX,EAAUiX,KACjBid,EAAYl0B,EAAUqM,SAAS,YAC/BqjB,EAAQwE,EAAUhuC,IAAI,QAM1B,GAJc,SAAVwpC,GAAoB7gC,EAAI4/B,kBAC1BiB,EAAQ7gC,EAAI4/B,gBAAgB,aAGzBiB,IAASzY,EAAKvH,MAAM+U,UAAzB,CAWA,IAPA,IAAI0P,EAAiBD,EAAU7nB,SAAS,aACpCsnB,EAAe9kC,EAAI2/B,cAAgB0F,EAAUhuC,IAAI,UACjDutC,EAAcxc,EAAKmd,iBACnB1D,EAAW8C,EAAYC,EAAa/E,EAAenW,UAAWob,GAAc,QAASQ,EAAe9J,eAAgB,CACtHjW,OAAQpU,EAAU9Z,IAAI,CAAC,WAAY,YAAa,YAC9C,SAEK1C,EAAI,EAAGA,EAAIktC,EAAShtC,OAAQF,IACnC+nB,EAAM9iB,IAAIioC,EAASltC,IAGrB,OAAOktC,CAbP,CAcF,CAEA,SAASK,EAAoBxlB,EAAOmjB,EAAgB1uB,EAAWwuB,GAC7D,IAAIvX,EAAOjX,EAAUiX,KACjBod,EAAiBr0B,EAAUqM,SAAS,aAExC,GAAKgoB,EAAenuC,IAAI,UAAW+wB,EAAKvH,MAAM+U,UAA9C,CAIA,IAAI6P,EAAmBrd,EAAKsd,sBAE5B,GAAKD,EAAiB5wC,OAUtB,IANA,IAAIywC,EAAiBE,EAAehoB,SAAS,aACzCsnB,EAAenF,EAAgB6F,EAAenuC,IAAI,UAClDsuC,GAAqB,QAASL,EAAe9J,gBAAgB,QAASrqB,EAAUqM,SAAS,YAAYge,eAAgB,CACvHjW,OAAQpU,EAAU9Z,IAAI,CAAC,WAAY,YAAa,aAGzC1C,EAAI,EAAGA,EAAI8wC,EAAiB5wC,OAAQF,IAG3C,IAFA,IAAIixC,EAAgBjB,EAAYc,EAAiB9wC,GAAIkrC,EAAenW,UAAWob,EAAca,EAAoB,cAAgBhxC,GAExHkxC,EAAI,EAAGA,EAAID,EAAc/wC,OAAQgxC,IACxCnpB,EAAM9iB,IAAIgsC,EAAcC,GAlB5B,CAqBF,CAEA,SAAS7D,EAAetlB,EAAOmjB,EAAgB1uB,EAAWnR,GACxD,IAAIooB,EAAOjX,EAAUiX,KACjB+D,GAAO,QAASnsB,EAAI8lC,cAAe30B,EAAU9Z,IAAI,CAAC,YAAa,UAEnE,GAAK80B,IAAQ/D,EAAKvH,MAAM+U,UAAxB,CAIA,IAAIkG,EAAa3qB,EAAUqM,SAAS,aAChC6T,EAAcyK,EAAWzkC,IAAI,UAC7B0uC,EAAS3d,EAAK4d,gBAEdC,IAAiB,QAASjmC,EAAIkmC,YAAapK,EAAWzkC,IAAI,YAAc,GAAKmgB,EAAK,IAClF2qB,EAAc1C,EAAYU,gBAAgBngC,EAAI0a,SAAUurB,EAAejmC,EAAIuxB,gBAC3E4U,EAAkBh1B,EAAUi1B,eAAiBj1B,EAAUi1B,eAAc,GACrErE,EAAW,GACXzb,EAASmZ,EAAYiB,cAAcvvB,GACnCk1B,EAAel1B,EAAU9Z,IAAI,gBA2DjC,OA1DA,QAAK0uC,GAAQ,SAAU5G,EAAWjuB,GAChC,IAAIk0B,EAAgC,YAApBhd,EAAKvH,MAAMrpB,KAAqB4wB,EAAKvH,MAAMM,oBAAoBge,EAAUiG,WAAajG,EAAUiG,UAC5GkB,EAAiBnH,EAAUmH,eAC3BC,EAAWpH,EAAUoH,SACrBC,EAAiB1K,EAErB,GAAIqK,GAAmBA,EAAgBf,GAAY,CACjD,IAAIqB,EAAkBN,EAAgBf,IAElC,QAASqB,IAAoBA,EAAgBhM,YAC/C+L,EAAiB,IAAIv9B,EAAA,EAAMw9B,EAAgBhM,UAAWqB,EAAY3qB,EAAU7e,SAEhF,CAEA,IAAIo0C,EAAYF,EAAenK,gBAAkBlrB,EAAU9Z,IAAI,CAAC,WAAY,YAAa,UACrF4tC,EAAY7c,EAAK0I,YAAYsU,GAC7BlmB,EAAS,IAAI,KAAa,CAC5BlJ,EAAGivB,EACHhvB,EAAGjW,EAAIm9B,YAAcn9B,EAAIuxB,eAAiBF,EAC1C3W,SAAUynB,EAAYznB,SACtB4L,OAAQA,EACRxD,GAAI,IAAMqc,EAAUwH,OAAS,GAC7BxxC,OAAO,QAAgBqxC,EAAgB,CACrC5K,KAAM0K,EACNjsB,MAAOmsB,EAAexzC,WAAW,SAAS,IAASmvC,EAAYloB,UAC/DK,cAAeksB,EAAexzC,WAAW,iBAAiB,IAASwzC,EAAexzC,WAAW,YAAY,IAASmvC,EAAYjoB,kBAC9H8K,MAAM,QAAW0hB,GAAaA,EAOhB,aAAdte,EAAK5wB,KAAsB+uC,EAAyB,UAAdne,EAAK5wB,KAAmB4tC,EAAY,GAAKA,EAAWl0B,GAASw1B,MAKvG,GAFAxnB,EAAOkiB,KAAO,SAAWgE,EAErBiB,EAAc,CAChB,IAAI5F,EAAYhB,EAAYe,sBAAsBrvB,GAClDsvB,EAAU2C,WAAa,YACvB3C,EAAUl6B,MAAQggC,EAClB9F,EAAUmG,UAAY11B,EAEJ,aAAdkX,EAAK5wB,OACPipC,EAAUvuC,UAAYkzC,IAGxB,OAAUlmB,GAAQuhB,UAAYA,CAChC,CAGAZ,EAAejmC,IAAIslB,GACnBA,EAAO4gB,kBACPiC,EAAS3lC,KAAK8iB,GACdxC,EAAM9iB,IAAIslB,GACVA,EAAOmkB,oBACT,IACOtB,CAtEP,CAuEF,CAEA,O,wDC7kBI8E,EAAmB,CAAC,EAKpBzO,EAEJ,SAAUrlB,GAGR,SAASqlB,IACP,IAAIj0B,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAGhE,OADA8K,EAAM3M,KAAO4gC,EAAS5gC,KACf2M,CACT,CAgFA,OAvFA,QAAUi0B,EAAUrlB,GAapBqlB,EAASz+B,UAAU6hB,OAAS,SAAUrK,EAAW7e,EAAS2E,EAAKwkB,GAM7DpiB,KAAKytC,kBAAoB,KAAgC31B,GAEzD4B,EAAOpZ,UAAU6hB,OAAOlT,MAAMjP,KAAMkP,WAEpClP,KAAK0tC,0BAA0B51B,EAAWla,GAAK,EACjD,EAMAmhC,EAASz+B,UAAUqtC,kBAAoB,SAAU71B,EAAW7e,EAAS2E,EAAKwkB,GACxEpiB,KAAK0tC,0BAA0B51B,EAAWla,GAAK,EACjD,EAMAmhC,EAASz+B,UAAUnE,OAAS,SAAUlD,EAAS2E,GAC7C,IAAIuhC,EAAcn/B,KAAK4tC,aACvBzO,GAAeA,EAAYhjC,OAAOyB,EACpC,EAMAmhC,EAASz+B,UAAUmoB,QAAU,SAAUxvB,EAAS2E,GAC9CoC,KAAK6tC,oBAAoBjwC,GAEzB8b,EAAOpZ,UAAUmoB,QAAQxZ,MAAMjP,KAAMkP,UACvC,EAEA6vB,EAASz+B,UAAUotC,0BAA4B,SAAU51B,EAAWla,EAAKu0B,GACvE,IAAI2b,EAAQ/O,EAASgP,oBAAoB/tC,KAAKytC,kBAE9C,GAAKK,EAAL,CAIA,IAAI5b,EAAmB,KAA2Cpa,GAClEoa,GAAoBlyB,KAAK4tC,eAAiB5tC,KAAK4tC,aAAe,IAAIE,IAAU3rB,OAAOrK,EAAWoa,EAAkBt0B,EAAKu0B,GAAenyB,KAAK6tC,oBAAoBjwC,EAH7J,CAIF,EAEAmhC,EAASz+B,UAAUutC,oBAAsB,SAAUjwC,GACjDoC,KAAK4tC,cAAgB5tC,KAAK4tC,aAAanlB,QAAQ7qB,GAC/CoC,KAAK4tC,aAAe,IACtB,EAEA7O,EAASiP,yBAA2B,SAAU7vC,EAAM8vC,GAOlDT,EAAiBrvC,GAAQ8vC,CAC3B,EAIAlP,EAASgP,oBAAsB,SAAU5vC,GACvC,OAAOA,GAAQqvC,EAAiBrvC,EAClC,EAGA4gC,EAAS5gC,KAAO,OACT4gC,CACT,CAzFA,CAyFE,KAEF,Q,yFClGImP,EAEJ,SAAUx0B,GAGR,SAASw0B,IACP,OAAkB,OAAXx0B,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,IAC7D,CAqBA,OAzBA,QAAUkuC,EAAWx0B,GAMrBw0B,EAAU/vC,KAAO,OACjB+vC,EAAU7yB,aAAe,CAAC,QAAS,SACnC6yB,EAAUC,WAAa,MACvBD,EAAU9zB,cAAgB,CACxB0Y,MAAM,EAENzY,EAAG,EACH+zB,KAAM,MACNC,IAAK,GACLC,MAAO,MACPC,OAAQ,GAERC,cAAc,EAGd/U,gBAAiB,gBACjB5d,YAAa,EACbD,YAAa,QAERsyB,CACT,CA3BA,CA2BE,KAEF,I,oBCjCIO,EAEJ,WACE,SAASA,IAAwB,CAgBjC,OAdAA,EAAqBnuC,UAAUouC,iBAAmB,WAChD,IAAI90B,EAAS5Z,KAAK4Z,OAClB,OAAQA,EAAO4N,KACjB,EAOAinB,EAAqBnuC,UAAUquC,iBAAmB,WAElD,EAEOF,CACT,CAlBA,G,UCGIG,EAEJ,SAAUl1B,GAGR,SAASk1B,IACP,OAAkB,OAAXl1B,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,IAC7D,CAOA,OAXA,QAAU4uC,EAAoBl1B,GAM9Bk1B,EAAmBtuC,UAAUquC,iBAAmB,WAC9C,OAAO3uC,KAAK2W,uBAAuB,OAAQ,MAAkBC,OAAO,EACtE,EAEAg4B,EAAmBzwC,KAAO,kBACnBywC,CACT,CAbA,CAaE,KAGF,KAAaA,EAAoBH,GACjC,ICxBIr0B,EAAgB,CAClB0Y,MAAM,EAENzY,EAAG,EAEH+C,SAAS,EAETzY,KAAM,GAENqkC,aAAc,MAEd6F,WAAY,KACZC,aAAc,CACZpF,SAAU,KACVD,SAAU,MACVsF,YAAa,KAGfC,cAAe,CAAC,EAEhBC,QAAS,GAEThiB,QAAQ,EAER+f,cAAc,EACdnnC,QAAS,CACPitB,MAAM,GAERqM,YAAa,CAAC,EACdoI,SAAU,CACRzU,MAAM,EACNoc,QAAQ,EACRC,gBAAiB,KACjBhW,UAAW,CACTxd,MAAO,UACPkB,MAAO,EACP1e,KAAM,SAGRmqC,OAAQ,CAAC,OAAQ,QACjB8G,WAAY,CAAC,GAAI,KAEnBC,SAAU,CACRvc,MAAM,EAEN/G,QAAQ,EAERvwB,OAAQ,EACR29B,UAAW,CACTtc,MAAO,IAGXyyB,UAAW,CACTxc,MAAM,EAEN/G,QAAQ,EACRxK,OAAQ,EAER6oB,aAAc,KAEdC,aAAc,KACd9Q,OAAQ,EAERgW,SAAU,IAEZC,UAAW,CACT1c,MAAM,EACNqG,UAAW,CACTxd,MAAO,CAAC,WACRkB,MAAO,EACP1e,KAAM,UAGVsxC,UAAW,CACT3c,MAAM,EACN4c,UAAW,CACT/zB,MAAO,CAAC,wBAAyB,4BAInCg0B,EAAe,KAAa,CAE9BC,aAAa,EAEbC,cAAe,KAIfL,UAAW,CACT1c,MAAM,GAERuc,SAAU,CAERS,gBAAgB,EAChBC,SAAU,QAEZT,UAAW,CACTS,SAAU,SAEX31B,GACC9b,EAAY,KAAa,CAC3BsxC,YAAa,CAAC,EAAG,GACjBrI,SAAU,CAERzU,KAAM,QAERuc,SAAU,CAERvc,KAAM,QAIRkd,YAAa,EACbC,UAAW,CAETnd,MAAM,EAENkd,YAAa,EAEbx0C,OAAQ,EAER29B,UAAW,CACX,GAEF+W,eAAgB,CACdpd,MAAM,EACNqG,UAAW,CACTxd,MAAO,UACPkB,MAAO,KAGVzC,GACC+1B,EAAW,KAAa,CAC1BH,YAAa,EACbV,UAAW,CAETlF,cAAc,EACdC,cAAc,EACd+F,KAAM,CACJC,QAAS,CACPC,WAAY,UAIlBd,UAAW,CACT1c,MAAM,IAEPx0B,GACCiyC,EAAU,KAAgB,CAC5BC,QAAS,IACRlyC,GACH,GACEmyC,SAAUd,EACVziC,MAAO5O,EACPoyC,KAAMP,EACNQ,IAAKJ,G,oBC5JIK,EAAa,CACtB1jC,MAAO,EACPujC,SAAU,EACVC,KAAM,EACNC,IAAK,GCOQ,SAASE,EAAiB/iB,EAAWgR,EAAUgS,EAAoBC,IAChF,QAAKH,GAAY,SAAU/rC,EAAGoB,GAC5B,IAAImU,GAAgB,SAAM,QAAM,CAAC,EAAG42B,EAAY/qC,IAAW,GAAO8qC,GAAoB,GAElFE,EAEJ,SAAUv3B,GAGR,SAASu3B,IACP,IAAInmC,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAGhE,OADA8K,EAAM3M,KAAO2gC,EAAW,QAAU74B,EAC3B6E,CACT,CA+CA,OAtDA,QAAUmmC,EAAWv3B,GASrBu3B,EAAU3wC,UAAU4wC,qBAAuB,SAAUt3B,EAAQ3gB,GAC3D,IAAIk1C,GAAa,QAAgBnuC,MAC7BmxC,EAAsBhD,GAAa,QAAgBv0B,GAAU,CAAC,EAC9Dw3B,EAAan4C,EAAQo4C,YACzB,QAAMz3B,EAAQw3B,EAAWpzC,IAAIiI,EAAW,UACxC,QAAM2T,EAAQ5Z,KAAKsxC,oBACnB13B,EAAOzb,KAAOozC,EAAY33B,GAEtBu0B,IACF,QAAiBv0B,EAAQu3B,EAAqBhD,EAElD,EAEA8C,EAAU3wC,UAAUkxC,cAAgB,WAClC,IAAIC,EAAazxC,KAAK4Z,OAEE,aAApB63B,EAAWtzC,OACb6B,KAAK0xC,cAAgBC,EAAA,oBAA8B3xC,MAEvD,EAOAixC,EAAU3wC,UAAUysC,cAAgB,SAAU6E,GAC5C,IAAIh4B,EAAS5Z,KAAK4Z,OAGlB,GAAoB,aAAhBA,EAAOzb,KACT,OAAIyzC,EACKh4B,EAAO/b,KAGTmC,KAAK0xC,cAAcjkC,UAE9B,EAEAwjC,EAAU3wC,UAAUkN,eAAiB,WACnC,OAAOxN,KAAK0xC,aACd,EAEAT,EAAU9yC,KAAO2gC,EAAW,QAAU74B,EACtCgrC,EAAU72B,cAAgBA,EACnB62B,CACT,CAxDA,CAwDEH,GAEFhjB,EAAUkR,uBAAuBiS,EACnC,IACAnjB,EAAU+jB,yBAAyB/S,EAAW,OAAQyS,EACxD,CAEA,SAASA,EAAY33B,GAEnB,OAAOA,EAAOzb,OAASyb,EAAO/b,KAAO,WAAa,QACpD,C,uBCjFIi0C,EAEJ,WACE,SAASA,EAAUntC,GACjB3E,KAAK7B,KAAO,YACZ6B,KAAK+xC,SAAW,GAChB/xC,KAAKgyC,MAAQ,CAAC,EACdhyC,KAAK2E,KAAOA,GAAQ,EACtB,CA0BA,OAxBAmtC,EAAUxxC,UAAUkhC,QAAU,SAAUtiC,GACtC,OAAOc,KAAKgyC,MAAM9yC,EACpB,EAEA4yC,EAAUxxC,UAAUy/B,QAAU,WAC5B,OAAO,KAAW//B,KAAK+xC,UAAU,SAAU7yC,GACzC,OAAOc,KAAKgyC,MAAM9yC,EACpB,GAAGc,KACL,EAEA8xC,EAAUxxC,UAAU2xC,eAAiB,SAAUC,GAE7C,OADAA,EAAYA,EAAUC,cACf,KAAcnyC,KAAK+/B,WAAW,SAAUhR,GAC7C,OAAOA,EAAKvH,MAAMrpB,OAAS+zC,CAC7B,GACF,EAEAJ,EAAUxxC,UAAU8xC,QAAU,SAAUrjB,GACtC,IAAI7vB,EAAM6vB,EAAK7vB,IACfc,KAAKgyC,MAAM9yC,GAAO6vB,EAElB/uB,KAAK+xC,SAAShvC,KAAK7D,EACrB,EAEO4yC,CACT,CAjCA,GAoCA,I,oBCnCWO,EAAwB,CAAC,IAAK,KAEzC,SAASC,EAA4B9qB,GACnC,MAAsB,aAAfA,EAAMrpB,MAAsC,SAAfqpB,EAAMrpB,IAC5C,CAEA,IAAIo0C,EAEJ,SAAU74B,GAGR,SAAS64B,IACP,IAAIznC,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAIhE,OAFA8K,EAAM3M,KAAO,cACb2M,EAAM9G,WAAaquC,EACZvnC,CACT,CA6HA,OArIA,QAAUynC,EAAa74B,GAevB64B,EAAYjyC,UAAUkyC,oBAAsB,WAC1CxyC,KAAKyyC,WAAazyC,KAAK0yC,cAAgB,KACvC,IAAIC,EAAa3yC,KAAKwhC,QAAQ,KAAKha,MAC/BorB,EAAa5yC,KAAKwhC,QAAQ,KAAKha,MAEnC,GAAK8qB,EAA4BK,IAAgBL,EAA4BM,GAA7E,CAIA,IAAIC,EAAeF,EAAWl0C,YAC1Bq0C,EAAeF,EAAWn0C,YAC1BiN,EAAQ1L,KAAKga,YAAY,CAAC64B,EAAa,GAAIC,EAAa,KACxDnnC,EAAM3L,KAAKga,YAAY,CAAC64B,EAAa,GAAIC,EAAa,KACtDC,EAAaF,EAAa,GAAKA,EAAa,GAC5CG,EAAaF,EAAa,GAAKA,EAAa,GAEhD,GAAKC,GAAeC,EAApB,CAKA,IAAIzd,GAAU5pB,EAAI,GAAKD,EAAM,IAAMqnC,EAC/Bvd,GAAU7pB,EAAI,GAAKD,EAAM,IAAMsnC,EAC/BC,EAAavnC,EAAM,GAAKmnC,EAAa,GAAKtd,EAC1C2d,EAAaxnC,EAAM,GAAKonC,EAAa,GAAKtd,EAC1C2d,EAAInzC,KAAKyyC,WAAa,CAACld,EAAQ,EAAG,EAAGC,EAAQyd,EAAYC,GAC7DlzC,KAAK0yC,eAAgB,QAAO,GAAIS,EARhC,CAXA,CAoBF,EAMAZ,EAAYjyC,UAAUjC,YAAc,WAClC,OAAO2B,KAAKiyC,eAAe,WAAW,IAAMjyC,KAAKiyC,eAAe,QAAQ,IAAMjyC,KAAKwhC,QAAQ,IAC7F,EAEA+Q,EAAYjyC,UAAU26B,aAAe,SAAUxL,GAC7C,IAAI2jB,EAAQpzC,KAAKwhC,QAAQ,KACrB6R,EAAQrzC,KAAKwhC,QAAQ,KACzB,OAAO4R,EAAME,QAAQF,EAAMG,aAAa9jB,EAAM,MAAQ4jB,EAAMC,QAAQD,EAAME,aAAa9jB,EAAM,IAC/F,EAEA8iB,EAAYjyC,UAAUk8B,YAAc,SAAU3+B,GAC5C,OAAOmC,KAAKwhC,QAAQ,KAAKhF,YAAY3+B,EAAK,KAAOmC,KAAKwhC,QAAQ,KAAKhF,YAAY3+B,EAAK,GACtF,EAEA00C,EAAYjyC,UAAUkzC,YAAc,SAAUC,EAAOC,GACnD,IAAIC,EAAY3zC,KAAKga,YAAYy5B,GAC7BG,EAAY5zC,KAAKga,YAAY05B,GAC7BG,EAAO7zC,KAAK0c,UACZo3B,EAAO,IAAIpO,EAAA,EAAaiO,EAAU,GAAIA,EAAU,GAAIC,EAAU,GAAKD,EAAU,GAAIC,EAAU,GAAKD,EAAU,IAC9G,OAAOE,EAAK3N,UAAU4N,EACxB,EAEAvB,EAAYjyC,UAAU0Z,YAAc,SAAUnc,EAAMk2C,EAAO/zB,GACzDA,EAAMA,GAAO,GACb,IAAIg0B,EAAOn2C,EAAK,GACZo2C,EAAOp2C,EAAK,GAEhB,GAAImC,KAAKyyC,YACE,MAARuB,GAAgB92C,SAAS82C,IAAiB,MAARC,GAAgB/2C,SAAS+2C,GAC5D,OAAO,QAAej0B,EAAKniB,EAAMmC,KAAKyyC,YAGxC,IAAIyB,EAAQl0C,KAAKwhC,QAAQ,KACrB2S,EAAQn0C,KAAKwhC,QAAQ,KAGzB,OAFAxhB,EAAI,GAAKk0B,EAAM1c,cAAc0c,EAAMzc,YAAYuc,EAAMD,IACrD/zB,EAAI,GAAKm0B,EAAM3c,cAAc2c,EAAM1c,YAAYwc,EAAMF,IAC9C/zB,CACT,EAEAuyB,EAAYjyC,UAAUwZ,UAAY,SAAUjc,EAAMmiB,GAChD,IAAIo0B,EAASp0C,KAAKwhC,QAAQ,KAAKha,MAC3B6sB,EAASr0C,KAAKwhC,QAAQ,KAAKha,MAC3B8sB,EAAcF,EAAO31C,YACrB81C,EAAcF,EAAO51C,YACrBke,EAAIy3B,EAAOrY,MAAMl+B,EAAK,IACtB+e,EAAIy3B,EAAOtY,MAAMl+B,EAAK,IAI1B,OAHAmiB,EAAMA,GAAO,GACbA,EAAI,GAAK1iB,KAAKH,IAAIG,KAAKN,IAAIM,KAAKH,IAAIm3C,EAAY,GAAIA,EAAY,IAAK33B,GAAIrf,KAAKN,IAAIs3C,EAAY,GAAIA,EAAY,KAC9Gt0B,EAAI,GAAK1iB,KAAKH,IAAIG,KAAKN,IAAIM,KAAKH,IAAIo3C,EAAY,GAAIA,EAAY,IAAK33B,GAAItf,KAAKN,IAAIu3C,EAAY,GAAIA,EAAY,KACvGv0B,CACT,EAEAuyB,EAAYjyC,UAAU+6B,YAAc,SAAU5L,EAAOskB,GACnD,IAAI/zB,EAAM,GAEV,GAAIhgB,KAAK0yC,cACP,OAAO,QAAe1yB,EAAKyP,EAAOzvB,KAAK0yC,eAGzC,IAAIwB,EAAQl0C,KAAKwhC,QAAQ,KACrB2S,EAAQn0C,KAAKwhC,QAAQ,KAGzB,OAFAxhB,EAAI,GAAKk0B,EAAMM,YAAYN,EAAMX,aAAa9jB,EAAM,IAAKskB,GACzD/zB,EAAI,GAAKm0B,EAAMK,YAAYL,EAAMZ,aAAa9jB,EAAM,IAAKskB,GAClD/zB,CACT,EAEAuyB,EAAYjyC,UAAU/B,aAAe,SAAUwwB,GAC7C,OAAO/uB,KAAKwhC,QAAqB,MAAbzS,EAAK7vB,IAAc,IAAM,IAC/C,EAOAqzC,EAAYjyC,UAAUoc,QAAU,WAC9B,IAAI+3B,EAAUz0C,KAAKwhC,QAAQ,KAAKlK,kBAC5Bod,EAAU10C,KAAKwhC,QAAQ,KAAKlK,kBAC5B3a,EAAIrf,KAAKH,IAAIs3C,EAAQ,GAAIA,EAAQ,IACjC73B,EAAItf,KAAKH,IAAIu3C,EAAQ,GAAIA,EAAQ,IACjC73B,EAAQvf,KAAKN,IAAIy3C,EAAQ,GAAIA,EAAQ,IAAM93B,EAC3CG,EAASxf,KAAKN,IAAI03C,EAAQ,GAAIA,EAAQ,IAAM93B,EAChD,OAAO,IAAI8oB,EAAA,EAAa/oB,EAAGC,EAAGC,EAAOC,EACvC,EAEOy1B,CACT,CAvIA,CAuIE,GAGF,I,mBCnJIrjB,GAAQ,UACL,SAASylB,EAAiB5lB,GAE/B,MAAqB,aAAdA,EAAK5wB,KAAsBy2C,EAAmB7lB,GAAQ8lB,EAAqB9lB,EACpF,CAUO,SAAS+lB,EAAgB/lB,EAAMid,GAEpC,MAAqB,aAAdjd,EAAK5wB,KAAsB42C,EAAkBhmB,EAAMid,GAAa,CACrEgJ,MAAO,KAAWjmB,EAAKvH,MAAMytB,YAAY,SAAUC,GACjD,OAAOA,EAAKhoC,KACd,IAEJ,CAEA,SAAS0nC,EAAmB7lB,GAC1B,IAAI0T,EAAa1T,EAAKomB,gBAClBnmC,EAASomC,EAA2BrmB,EAAM0T,GAC9C,OAAQA,EAAWzkC,IAAI,SAAW+wB,EAAKvH,MAAM+U,UAAY,CACvDmQ,OAAQ,GACR2I,sBAAuBrmC,EAAOqmC,uBAC5BrmC,CACN,CAEA,SAASomC,EAA2BrmB,EAAM0T,GACxC,IAQIiK,EACA4I,EATAC,EAAcC,EAAazmB,EAAM,UACjC0mB,GAAsB,QAA0BhT,GAChDzzB,EAAS0mC,EAAaH,EAAaE,GAEvC,OAAIzmC,IAOA,KAAkBymC,GACpB/I,EAASiJ,EAAuC5mB,EAAM0mB,IAEtDH,EAA+C,SAAxBG,EAAiCG,EAAyB7mB,GAAQ0mB,EACzF/I,EAASmJ,EAAoC9mB,EAAMumB,IAI9CQ,EAAaP,EAAaE,EAAqB,CACpD/I,OAAQA,EACR2I,sBAAuBC,IAE3B,CAEA,SAASP,EAAkBhmB,EAAMid,GAC/B,IAQIgJ,EACAe,EATAC,EAAaR,EAAazmB,EAAM,SAChCknB,GAAqB,QAA0BjK,GAC/Ch9B,EAAS0mC,EAAaM,EAAYC,GAEtC,GAAIjnC,EACF,OAAOA,EAWT,GAJKg9B,EAAUhuC,IAAI,UAAW+wB,EAAKvH,MAAM+U,YACvCyY,EAAQ,IAGN,KAAkBiB,GACpBjB,EAAQW,EAAuC5mB,EAAMknB,GAAoB,QAItE,GAA2B,SAAvBA,EAA+B,CACpC,IAAIC,EAAed,EAA2BrmB,EAAMA,EAAKomB,iBACzDY,EAAuBG,EAAab,sBACpCL,EAAQ,KAAWkB,EAAaxJ,QAAQ,SAAU5G,GAChD,OAAOA,EAAUiG,SACnB,GACF,MACEgK,EAAuBE,EACvBjB,EAAQa,EAAoC9mB,EAAMgnB,GAAsB,GAI5E,OAAOD,EAAaE,EAAYC,EAAoB,CAClDjB,MAAOA,EACPe,qBAAsBA,GAE1B,CAEA,SAASlB,EAAqB9lB,GAC5B,IAAIimB,EAAQjmB,EAAKvH,MAAMytB,WACnBkB,GAAiB,QAAmBpnB,GACxC,MAAO,CACL2d,OAAQ,KAAWsI,GAAO,SAAUE,EAAM9qC,GACxC,MAAO,CACLkjC,MAAO4H,EAAK5H,MACZL,eAAgBkJ,EAAejB,EAAM9qC,GACrC8iC,SAAUne,EAAKvH,MAAM6b,SAAS6R,GAC9BnJ,UAAWmJ,EAAKhoC,MAEpB,IAEJ,CAEA,SAASsoC,EAAazmB,EAAMqnB,GAE1B,OAAOlnB,EAAMH,GAAMqnB,KAAUlnB,EAAMH,GAAMqnB,GAAQ,GACnD,CAEA,SAASV,EAAaW,EAAOxzC,GAC3B,IAAK,IAAIvH,EAAI,EAAGA,EAAI+6C,EAAM76C,OAAQF,IAChC,GAAI+6C,EAAM/6C,GAAGuH,MAAQA,EACnB,OAAOwzC,EAAM/6C,GAAG4R,KAGtB,CAEA,SAAS4oC,EAAaO,EAAOxzC,EAAKqK,GAKhC,OAJAmpC,EAAMtzC,KAAK,CACTF,IAAKA,EACLqK,MAAOA,IAEFA,CACT,CAEA,SAAS0oC,EAAyB7mB,GAChC,IAAI/f,EAASkgB,EAAMH,GAAMunB,aACzB,OAAiB,MAAVtnC,EAAiBA,EAASkgB,EAAMH,GAAMunB,aAAevnB,EAAKwnB,2BACnE,CAQO,SAASA,EAA0BxnB,GACxC,IAAI9L,EAASuzB,EAA2CznB,GACpDonB,GAAiB,QAAmBpnB,GACpC1N,GAAY4B,EAAOwzB,WAAaxzB,EAAO4pB,aAAe,IAAMvvC,KAAK6gB,GACjEu4B,EAAe3nB,EAAKvH,MACpBmvB,EAAgBD,EAAaj4C,YAI7Bm4C,EAAYF,EAAa75C,QAE7B,GAAI85C,EAAc,GAAKA,EAAc,GAAK,EACxC,OAAO,EAGT,IAAIE,EAAO,EAEPD,EAAY,KACdC,EAAOv5C,KAAKN,IAAI,EAAGM,KAAK0f,MAAM45B,EAAY,MAW5C,IARA,IAAI7K,EAAY4K,EAAc,GAC1BG,EAAW/nB,EAAK0I,YAAYsU,EAAY,GAAKhd,EAAK0I,YAAYsU,GAC9DgL,EAAQz5C,KAAKuB,IAAIi4C,EAAWx5C,KAAKuhB,IAAIwC,IACrC21B,EAAQ15C,KAAKuB,IAAIi4C,EAAWx5C,KAAKyhB,IAAIsC,IACrC41B,EAAO,EACPC,EAAO,EAGJnL,GAAa4K,EAAc,GAAI5K,GAAa8K,EAAM,CACvD,IAAIh6B,EAAQ,EACRC,EAAS,EAGT1B,EAAO,KAA4B+6B,EAAe,CACpDjpC,MAAO6+B,IACL9oB,EAAO0f,KAAM,SAAU,OAE3B9lB,EAAqB,IAAbzB,EAAKyB,MACbC,EAAuB,IAAd1B,EAAK0B,OAEdm6B,EAAO35C,KAAKN,IAAIi6C,EAAMp6B,EAAO,GAC7Bq6B,EAAO55C,KAAKN,IAAIk6C,EAAMp6B,EAAQ,EAChC,CAEA,IAAIq6B,EAAKF,EAAOF,EACZK,EAAKF,EAAOF,EAEhBl6C,MAAMq6C,KAAQA,EAAKl6C,KACnBH,MAAMs6C,KAAQA,EAAKn6C,KACnB,IAAI8yC,EAAWzyC,KAAKN,IAAI,EAAGM,KAAK0f,MAAM1f,KAAKH,IAAIg6C,EAAIC,KAC/Cf,EAAQnnB,EAAMH,EAAK1J,OACnB6O,EAAanF,EAAKtwB,YAClB44C,EAAmBhB,EAAMgB,iBACzBC,EAAgBjB,EAAMiB,cAsB1B,OAfwB,MAApBD,GAA6C,MAAjBC,GAAyBh6C,KAAKuB,IAAIw4C,EAAmBtH,IAAa,GAAKzyC,KAAKuB,IAAIy4C,EAAgBV,IAAc,GAE3IS,EAAmBtH,GAEnBsG,EAAMkB,cAAgBrjB,EAAW,IAAMmiB,EAAMmB,cAAgBtjB,EAAW,GACzE6b,EAAWsH,GAIThB,EAAMiB,cAAgBV,EACtBP,EAAMgB,iBAAmBtH,EACzBsG,EAAMkB,YAAcrjB,EAAW,GAC/BmiB,EAAMmB,YAActjB,EAAW,IAG5B6b,CACT,CAEA,SAASyG,EAA2CznB,GAClD,IAAI0T,EAAa1T,EAAKomB,gBACtB,MAAO,CACLsB,WAAY1nB,EAAK0oB,UAAY1oB,EAAK0oB,YAAc1oB,EAAK5U,eAAiB4U,EAAK5U,eAAiB,GAAK,EACjG0yB,YAAapK,EAAWzkC,IAAI,WAAa,EACzC2kC,KAAMF,EAAWG,UAErB,CAEA,SAASiT,EAAoC9mB,EAAM2oB,EAAkBC,GACnE,IAAIxB,GAAiB,QAAmBpnB,GACpC2nB,EAAe3nB,EAAKvH,MACpBmvB,EAAgBD,EAAaj4C,YAC7BgkC,EAAa1T,EAAKomB,gBAClBnmC,EAAS,GAET6nC,EAAOv5C,KAAKN,KAAK06C,GAAoB,GAAK,EAAG,GAC7CE,EAAYjB,EAAc,GAC1BC,EAAYF,EAAa75C,QAKX,IAAd+6C,GAAmBf,EAAO,GAAKD,EAAYC,EAAO,IACpDe,EAAYt6C,KAAKC,MAAMD,KAAKu6C,KAAKD,EAAYf,GAAQA,IAQvD,IAAIiB,GAAe,QAAoB/oB,GACnCgpB,EAAkBtV,EAAWzkC,IAAI,iBAAmB85C,EACpDE,EAAkBvV,EAAWzkC,IAAI,iBAAmB85C,EAEpDC,GAAmBH,IAAcjB,EAAc,IACjDsB,EAAQtB,EAAc,IAMxB,IAFA,IAAI5K,EAAY6L,EAET7L,GAAa4K,EAAc,GAAI5K,GAAa8K,EACjDoB,EAAQlM,GAOV,SAASkM,EAAQlM,GACf,IAAImM,EAAU,CACZhrC,MAAO6+B,GAET/8B,EAAOjM,KAAK40C,EAAW5L,EAAY,CACjCkB,eAAgBkJ,EAAe+B,GAC/BhL,SAAUwJ,EAAarT,SAAS6U,GAChCnM,UAAWA,GAEf,CAEA,OAfIiM,GAAmBjM,EAAY8K,IAASF,EAAc,IACxDsB,EAAQtB,EAAc,IAcjB3nC,CACT,CAEA,SAAS2mC,EAAuC5mB,EAAM2oB,EAAkBC,GACtE,IAAIjB,EAAe3nB,EAAKvH,MACpB2uB,GAAiB,QAAmBpnB,GACpC/f,EAAS,GAab,OAZA,KAAY0nC,EAAazB,YAAY,SAAUC,GAC7C,IAAIhI,EAAWwJ,EAAarT,SAAS6R,GACjCnJ,EAAYmJ,EAAKhoC,MAEjBwqC,EAAiBxC,EAAKhoC,MAAOggC,IAC/Bl+B,EAAOjM,KAAK40C,EAAW5L,EAAY,CACjCkB,eAAgBkJ,EAAejB,GAC/BhI,SAAUA,EACVnB,UAAWA,GAGjB,IACO/8B,CACT,CCnTA,IAAImpC,EAAoB,CAAC,EAAG,GAKxBC,EAEJ,WACE,SAASA,EAAKl5C,EAAKsoB,EAAOhpB,GACxBwB,KAAK+hB,QAAS,EACd/hB,KAAKod,SAAU,EACfpd,KAAKd,IAAMA,EACXc,KAAKwnB,MAAQA,EACbxnB,KAAKq4C,QAAU75C,GAAU,CAAC,EAAG,EAC/B,CAyLA,OAnLA45C,EAAK93C,UAAUgzC,QAAU,SAAUzxB,GACjC,IAAIrjB,EAASwB,KAAKq4C,QACdl7C,EAAMG,KAAKH,IAAIqB,EAAO,GAAIA,EAAO,IACjCxB,EAAMM,KAAKN,IAAIwB,EAAO,GAAIA,EAAO,IACrC,OAAOqjB,GAAS1kB,GAAO0kB,GAAS7kB,CAClC,EAMAo7C,EAAK93C,UAAUk8B,YAAc,SAAU3+B,GACrC,OAAOmC,KAAKwnB,MAAM8rB,QAAQz1C,EAC5B,EAMAu6C,EAAK93C,UAAU7B,UAAY,WACzB,OAAOuB,KAAKq4C,QAAQ1yC,OACtB,EAMAyyC,EAAK93C,UAAUg4C,kBAAoB,SAAUC,GAC3C,OAAO,QAAkBA,GAAcv4C,KAAKwnB,MAAM/oB,YAAauB,KAAKq4C,QACtE,EAMAD,EAAK93C,UAAUk4C,UAAY,SAAU9sC,EAAOC,GAC1C,IAAInN,EAASwB,KAAKq4C,QAClB75C,EAAO,GAAKkN,EACZlN,EAAO,GAAKmN,CACd,EAMAysC,EAAK93C,UAAUm3B,YAAc,SAAU55B,EAAMk2C,GAC3C,IAAIv1C,EAASwB,KAAKq4C,QACd7wB,EAAQxnB,KAAKwnB,MAQjB,OAPA3pB,EAAO2pB,EAAMixB,UAAU56C,GAEnBmC,KAAK+hB,QAAyB,YAAfyF,EAAMrpB,OACvBK,EAASA,EAAOmH,QAChB+yC,EAAmBl6C,EAAQgpB,EAAM3qB,WAG5B,QAAUgB,EAAMs6C,EAAmB35C,EAAQu1C,EACpD,EAMAqE,EAAK93C,UAAUk0C,YAAc,SAAU3yB,EAAOkyB,GAC5C,IAAIv1C,EAASwB,KAAKq4C,QACd7wB,EAAQxnB,KAAKwnB,MAEbxnB,KAAK+hB,QAAyB,YAAfyF,EAAMrpB,OACvBK,EAASA,EAAOmH,QAChB+yC,EAAmBl6C,EAAQgpB,EAAM3qB,UAGnC,IAAI87C,GAAI,QAAU92B,EAAOrjB,EAAQ25C,EAAmBpE,GACpD,OAAO/zC,KAAKwnB,MAAMA,MAAMmxB,EAC1B,EAMAP,EAAK93C,UAAU+6B,YAAc,SAAU5L,EAAOskB,GAG9C,EAYAqE,EAAK93C,UAAU4rC,eAAiB,SAAUvlC,GACxCA,EAAMA,GAAO,CAAC,EACd,IAAIqlC,EAAYrlC,EAAIqlC,WAAahsC,KAAK44C,eAClC5pC,EAAS8lC,EAAgB90C,KAAMgsC,GAC/BgJ,EAAQhmC,EAAOgmC,MACfzJ,GAAc,QAAIyJ,GAAO,SAAU6D,GACrC,MAAO,CACLh3B,MAAO7hB,KAAKy3B,YAAgC,YAApBz3B,KAAKwnB,MAAMrpB,KAAqB6B,KAAKwnB,MAAMM,oBAAoB+wB,GAAWA,GAClG9M,UAAW8M,EAEf,GAAG74C,MACC8vC,EAAiB9D,EAAUhuC,IAAI,kBAEnC,OADA86C,GAAqB94C,KAAMurC,EAAauE,EAAgBnpC,EAAIotC,OACrDxI,CACT,EAEA6M,EAAK93C,UAAU+rC,oBAAsB,WACnC,GAAwB,YAApBrsC,KAAKwnB,MAAMrpB,KAEb,MAAO,GAGT,IAAIguC,EAAiBnsC,KAAKqlB,MAAMlB,SAAS,aACrC6rB,EAAc7D,EAAenuC,IAAI,eAE/BgyC,EAAc,GAAKA,EAAc,MACrCA,EAAc,GAGhB,IAAI+I,EAAa/4C,KAAKwnB,MAAMwxB,cAAchJ,GACtC5D,GAAmB,QAAI2M,GAAY,SAAUE,GAC/C,OAAO,QAAIA,GAAiB,SAAUhJ,GACpC,MAAO,CACLpuB,MAAO7hB,KAAKy3B,YAAYwY,GACxBlE,UAAWkE,EAEf,GAAGjwC,KACL,GAAGA,MACH,OAAOosC,CACT,EAEAgM,EAAK93C,UAAUqsC,cAAgB,WAC7B,OAAOgI,EAAiB30C,MAAM0sC,MAChC,EAEA0L,EAAK93C,UAAU60C,cAAgB,WAC7B,OAAOn1C,KAAKqlB,MAAMlB,SAAS,YAC7B,EAUAi0B,EAAK93C,UAAUs4C,aAAe,WAC5B,OAAO54C,KAAKqlB,MAAMlB,SAAS,WAC7B,EAMAi0B,EAAK93C,UAAU0zB,aAAe,WAC5B,IAAIE,EAAal0B,KAAKq4C,QAClBE,EAAav4C,KAAKwnB,MAAM/oB,YACxBwP,EAAMsqC,EAAW,GAAKA,EAAW,IAAMv4C,KAAK+hB,OAAS,EAAI,GAErD,IAAR9T,IAAcA,EAAM,GACpB,IAAIrP,EAAOtB,KAAKuB,IAAIq1B,EAAW,GAAKA,EAAW,IAC/C,OAAO52B,KAAKuB,IAAID,GAAQqP,CAC1B,EAQAmqC,EAAK93C,UAAUi2C,0BAA4B,WACzC,OAAOA,EAA0Bv2C,KACnC,EAEOo4C,CACT,CAjMA,GAmMA,SAASM,EAAmBl6C,EAAQ06C,GAClC,IAAIt6C,EAAOJ,EAAO,GAAKA,EAAO,GAC1ByP,EAAMirC,EACN3f,EAAS36B,EAAOqP,EAAM,EAC1BzP,EAAO,IAAM+6B,EACb/6B,EAAO,IAAM+6B,CACf,CAWA,SAASuf,GAAqB/pB,EAAMwc,EAAauE,EAAgBiE,GAC/D,IAAIoF,EAAW5N,EAAY/vC,OAE3B,GAAKuzB,EAAKhN,SAAU+tB,GAAmBqJ,EAAvC,CAIA,IACIC,EACAC,EAFAnlB,EAAanF,EAAKtwB,YAItB,GAAiB,IAAb06C,EACF5N,EAAY,GAAG1pB,MAAQqS,EAAW,GAClCklB,EAAO7N,EAAY,GAAK,CACtB1pB,MAAOqS,EAAW,QAEf,CACL,IAAIolB,EAAW/N,EAAY4N,EAAW,GAAGpN,UAAYR,EAAY,GAAGQ,UAChEwN,GAAWhO,EAAY4N,EAAW,GAAGt3B,MAAQ0pB,EAAY,GAAG1pB,OAASy3B,GACzE,QAAK/N,GAAa,SAAUiO,GAC1BA,EAAU33B,OAAS03B,EAAU,CAC/B,IACA,IAAIhB,EAAaxpB,EAAKvH,MAAM/oB,YAC5B46C,EAAW,EAAId,EAAW,GAAKhN,EAAY4N,EAAW,GAAGpN,UACzDqN,EAAO,CACLv3B,MAAO0pB,EAAY4N,EAAW,GAAGt3B,MAAQ03B,EAAUF,GAErD9N,EAAYxoC,KAAKq2C,EACnB,CAEA,IAAIh8B,EAAU8W,EAAW,GAAKA,EAAW,GAErCulB,EAAWlO,EAAY,GAAG1pB,MAAOqS,EAAW,MAC9C6f,EAAQxI,EAAY,GAAG1pB,MAAQqS,EAAW,GAAKqX,EAAYzpC,SAGzDiyC,GAAS0F,EAAWvlB,EAAW,GAAIqX,EAAY,GAAG1pB,QACpD0pB,EAAYmO,QAAQ,CAClB73B,MAAOqS,EAAW,KAIlBulB,EAAWvlB,EAAW,GAAIklB,EAAKv3B,SACjCkyB,EAAQqF,EAAKv3B,MAAQqS,EAAW,GAAKqX,EAAYoO,OAG/C5F,GAAS0F,EAAWL,EAAKv3B,MAAOqS,EAAW,KAC7CqX,EAAYxoC,KAAK,CACf8e,MAAOqS,EAAW,IA3CtB,CA+CA,SAASulB,EAAWryB,EAAGC,GAKrB,OAFAD,GAAI,QAAMA,GACVC,GAAI,QAAMA,GACHjK,EAAUgK,EAAIC,EAAID,EAAIC,CAC/B,CACF,CAEA,SCxRIuyB,GAEJ,SAAUlgC,GAGR,SAASkgC,EAAO16C,EAAKsoB,EAAOqyB,EAAa5zC,EAAUka,GACjD,IAAIrV,EAAQ4O,EAAOlI,KAAKxR,KAAMd,EAAKsoB,EAAOqyB,IAAgB75C,KAU1D,OAHA8K,EAAM+M,MAAQ,EACd/M,EAAM3M,KAAO8H,GAAY,QACzB6E,EAAMqV,SAAWA,GAAY,SACtBrV,CACT,CA0CA,OAxDA,QAAU8uC,EAAQlgC,GAgBlBkgC,EAAOt5C,UAAU6Z,aAAe,WAC9B,IAAIgG,EAAWngB,KAAKmgB,SACpB,MAAoB,QAAbA,GAAmC,WAAbA,CAC/B,EAWAy5B,EAAOt5C,UAAUg3B,gBAAkB,SAAUwiB,GAC3C,IAAIC,EAAM/5C,KAAKvB,YAIf,OAHAs7C,EAAI,GAAK/5C,KAAKw3B,cAAcuiB,EAAI,IAChCA,EAAI,GAAK/5C,KAAKw3B,cAAcuiB,EAAI,IAChCD,GAAOC,EAAI,GAAKA,EAAI,IAAMA,EAAIhY,UACvBgY,CACT,EAEAH,EAAOt5C,UAAU+6B,YAAc,SAAU5L,EAAOskB,GAC9C,OAAO/zC,KAAKw0C,YAAYx0C,KAAKuzC,aAAa9jB,EAAmB,MAAbzvB,KAAKd,IAAc,EAAI,IAAK60C,EAC9E,EAOA6F,EAAOt5C,UAAU0uB,oBAAsB,SAAUhI,GAC/C,GAAkB,aAAdhnB,KAAK7B,KACP,OAAO,EAGT6B,KAAKqlB,MAAMzL,OAAOogC,iBAAmBhzB,EACrChnB,KAAKwnB,MAAMyyB,YAAYjzB,EACzB,EAEO4yB,CACT,CA1DA,CA0DE,IAEF,M,gCC5DIM,GAAU58C,KAAKqzC,IACZ,SAASwJ,GAAgB3yB,EAAO1P,EAAWsiC,GAChD,IAAIC,EAAqBC,GAAA,YAKrBC,EAAeF,EAAmBpF,SAASzjC,KAAK4oC,GAChDI,EAAoBH,EAAmBpF,SAASzjC,KAAK4oC,GAAc,GACnEK,EAAqBF,EAAa/+C,OAAS,EAC3Ck/C,EAAkBL,EAAmBM,YAAYnpC,KAAK4oC,GACtDQ,GAAc,QAAepzB,EAAO1P,GACpC+iC,EAAYD,EAAYp8C,OACxBs8C,EAAaF,EAAYG,OACzBC,EAAaJ,EAAYK,OAE7B,GAAmB,QAAfzzB,EAAMrpB,KAAgB,CACxB,IAAIqyC,EAAU0J,GAAQ1yB,EAAM0zB,MAC5BL,EAAY,CAACX,GAAQW,EAAU,IAAMrK,EAAS0J,GAAQW,EAAU,IAAMrK,EACxE,CAEAhpB,EAAMgxB,UAAUqC,EAAU,GAAIA,EAAU,IACxCrzB,EAAM2zB,eAAe,CACnBnL,YAAayK,EACbM,OAAQD,EACRG,OAAQD,IAEV,IAAIx8C,EAAS67C,EAAmB57C,UAAU+S,KAAKgW,GAG3CszB,IACFD,EAAU,GAAKr8C,EAAO,IAGpBw8C,IACFH,EAAU,GAAKr8C,EAAO,IAGxB,IAAIuxC,EAAWsK,EAAmBM,YAAYnpC,KAAKgW,GAC/CrqB,EAAM09C,EAAU,GAChB79C,EAAM69C,EAAU,GAEpB,GAAIC,GAAcE,EAEhBjL,GAAY/yC,EAAMG,GAAOs9C,OACpB,GAAIK,EAAY,CACrB99C,EAAM69C,EAAU,GAAK9K,EAAW0K,EAEhC,MAAOz9C,EAAM69C,EAAU,IAAM39C,SAASF,IAAQE,SAAS29C,EAAU,IAC/D9K,GAAW,SAAiBA,GAC5B/yC,EAAM69C,EAAU,GAAK9K,EAAW0K,CAEpC,MAAO,GAAIO,EAAY,CAErB79C,EAAM09C,EAAU,GAAK9K,EAAW0K,EAEhC,MAAOt9C,EAAM09C,EAAU,IAAM39C,SAASC,IAAQD,SAAS29C,EAAU,IAC/D9K,GAAW,SAAiBA,GAC5B5yC,EAAM09C,EAAU,GAAK9K,EAAW0K,CAEpC,KAAO,CACL,IAAIW,EAAmB5zB,EAAMytB,WAAWz5C,OAAS,EAE7C4/C,EAAmBX,IACrB1K,GAAW,SAAiBA,IAG9B,IAAI1kC,EAAQ0kC,EAAW0K,EACvBz9C,EAAMM,KAAKu6C,KAAKgD,EAAU,GAAK9K,GAAYA,EAC3C5yC,GAAM,QAAMH,EAAMqO,GAEdlO,EAAM,GAAK09C,EAAU,IAAM,GAC7B19C,EAAM,EACNH,GAAM,QAAMqO,IACHrO,EAAM,GAAK69C,EAAU,IAAM,IACpC79C,EAAM,EACNG,IAAO,QAAMkO,GAEjB,CAGA,IAAIgwC,GAAMd,EAAa,GAAGrtC,MAAQstC,EAAkB,GAAGttC,OAASwtC,EAC5DY,GAAMf,EAAaE,GAAoBvtC,MAAQstC,EAAkBC,GAAoBvtC,OAASwtC,EAElGL,EAAmB7B,UAAUhnC,KAAKgW,EAAOrqB,EAAM4yC,EAAWsL,EAAIr+C,EAAM+yC,EAAWuL,GAC/EjB,EAAmBkB,YAAY/pC,KAAKgW,EAAOuoB,IAEvCsL,GAAMC,IACRjB,EAAmBmB,cAAchqC,KAAKgW,EAAOrqB,EAAM4yC,EAAU/yC,EAAM+yC,EAWvE,CCxFA,IAAI0L,GAEJ,WACE,SAASA,EAAKC,EAAWziD,EAAS2E,GAEhCoC,KAAK7B,KAAO,OACZ6B,KAAK27C,WAAa,CAAC,EACnB37C,KAAK47C,YAAc,GACnB57C,KAAK67C,SAAW,CAAC,EACjB77C,KAAK87C,UAAY,GACjB97C,KAAK2/B,oBAAqB,EAC1B3/B,KAAKgE,WAAaquC,EAElBryC,KAAK+7C,eAAeL,EAAWziD,EAAS2E,GAExCoC,KAAKqlB,MAAQq2B,CACf,CAkaA,OAhaAD,EAAKn7C,UAAU07C,QAAU,WACvB,OAAOh8C,KAAKi8C,KACd,EAEAR,EAAKn7C,UAAUI,OAAS,SAAUzH,EAAS2E,GACzC,IAAIs+C,EAAUl8C,KAAK67C,SAInB,SAASM,EAAgBC,GACvB,IAAIC,EAEAC,GAAc,QAAKF,GACnBnuC,EAAMquC,EAAY9gD,OAEtB,GAAKyS,EAAL,CAMA,IAFA,IAAIsuC,EAAiB,GAEZjhD,EAAI2S,EAAM,EAAG3S,GAAK,EAAGA,IAAK,CACjC,IAAI8O,GAAOkyC,EAAYhhD,GAEnByzB,EAAOqtB,EAAKhyC,GACZib,EAAQ0J,EAAK1J,MACbmC,EAAQuH,EAAKvH,OAGjB,SAAqBA,IAAUnC,EAAMrnB,IAAI,eAA0C,MAAzBqnB,EAAMrnB,IAAI,YAClEu+C,EAAex5C,KAAKgsB,KAEpB,QAAgBvH,EAAOnC,IAEnB,SAAqBmC,KAEvB60B,EAAUttB,GAGhB,CAKIwtB,EAAe/gD,SACZ6gD,IACHA,EAAUE,EAAe5C,OACzB,QAAgB0C,EAAQ70B,MAAO60B,EAAQh3B,SAGzC,QAAKk3B,GAAgB,SAAUxtB,GAC7BorB,GAAgBprB,EAAKvH,MAAOuH,EAAK1J,MAAOg3B,EAAQ70B,MAClD,IAnCF,CAqCF,CA/CAxnB,KAAKw8C,aAAavjD,EAAS+G,KAAKqlB,OAiDhC82B,EAAgBD,EAAQv/B,GACxBw/B,EAAgBD,EAAQt/B,GAExB,IAAI6/B,EAAgB,CAAC,GACrB,QAAKP,EAAQv/B,GAAG,SAAUu3B,GACxBwI,GAAcR,EAAS,IAAKhI,EAAOuI,EACrC,KACA,QAAKP,EAAQt/B,GAAG,SAAUu3B,GACxBuI,GAAcR,EAAS,IAAK/H,EAAOsI,EACrC,IAGAz8C,KAAK28C,OAAO38C,KAAKqlB,MAAOznB,EAC1B,EAMA69C,EAAKn7C,UAAUq8C,OAAS,SAAUjB,EAAW99C,EAAKg/C,GAChD,IAAIC,EAAkBnB,EAAUoB,qBAC5BC,GAAkBH,GAAsBlB,EAAU19C,IAAI,gBACtDg/C,GAAW,QAAcH,EAAiB,CAC5ChgC,MAAOjf,EAAIslC,WACXpmB,OAAQlf,EAAIwlC,cAEdpjC,KAAKi8C,MAAQe,EACb,IAAIC,EAAWj9C,KAAK87C,UA8BpB,SAASoB,KACP,QAAKD,GAAU,SAAUluB,GACvB,IAAI5U,EAAe4U,EAAK5U,eACpB3b,EAAS2b,EAAe,CAAC,EAAG6iC,EAASngC,OAAS,CAAC,EAAGmgC,EAASlgC,QAC3D1S,EAAM2kB,EAAK3R,QAAU,EAAI,EAC7B2R,EAAKypB,UAAUh6C,EAAO4L,GAAM5L,EAAO,EAAI4L,IACvC+yC,GAAoBpuB,EAAM5U,EAAe6iC,EAASrgC,EAAIqgC,EAASpgC,EACjE,GACF,CArCAsgC,IAEIH,KACF,QAAKE,GAAU,SAAUluB,GACvB,IAAKA,EAAK1J,MAAMrnB,IAAI,CAAC,YAAa,WAAY,CAC5C,IAAIo/C,GAAiB,QAAuBruB,GAE5C,GAAIquB,EAAgB,CAClB,IAAIl+C,EAAM6vB,EAAK5U,eAAiB,SAAW,QACvCof,EAASxK,EAAK1J,MAAMrnB,IAAI,CAAC,YAAa,WAC1Cg/C,EAAS99C,IAAQk+C,EAAel+C,GAAOq6B,EAEjB,QAAlBxK,EAAK5O,SACP68B,EAASpgC,GAAKwgC,EAAetgC,OAASyc,EACX,SAAlBxK,EAAK5O,WACd68B,EAASrgC,GAAKygC,EAAevgC,MAAQ0c,EAEzC,CACF,CACF,IACA2jB,MAGF,QAAKl9C,KAAK47C,aAAa,SAAU/5B,GAG/BA,EAAM2wB,qBACR,GAWF,EAEAiJ,EAAKn7C,UAAUkhC,QAAU,SAAUtiC,EAAK0Y,GACtC,IAAIylC,EAAer9C,KAAK67C,SAAS38C,GAEjC,GAAoB,MAAhBm+C,EACF,OAAOA,EAAazlC,GAAa,EAErC,EAEA6jC,EAAKn7C,UAAUy/B,QAAU,WACvB,OAAO//B,KAAK87C,UAAUn2C,OACxB,EAEA81C,EAAKn7C,UAAU+2B,aAAe,SAAUimB,EAAYC,GAClD,GAAkB,MAAdD,GAAoC,MAAdC,EAAoB,CAC5C,IAAI16C,EAAM,IAAMy6C,EAAa,IAAMC,EACnC,OAAOv9C,KAAK27C,WAAW94C,EACzB,EAEI,QAASy6C,KACXC,EAAaD,EAAWC,WACxBD,EAAaA,EAAWA,YAG1B,IAAK,IAAIhiD,EAAI,EAAGkiD,EAAYx9C,KAAK47C,YAAatgD,EAAIkiD,EAAUhiD,OAAQF,IAClE,GAAIkiD,EAAUliD,GAAGkmC,QAAQ,KAAK3pB,QAAUylC,GAAcE,EAAUliD,GAAGkmC,QAAQ,KAAK3pB,QAAU0lC,EACxF,OAAOC,EAAUliD,EAGvB,EAEAmgD,EAAKn7C,UAAUm9C,cAAgB,WAC7B,OAAOz9C,KAAK47C,YAAYj2C,OAC1B,EAMA81C,EAAKn7C,UAAUo9C,eAAiB,SAAUzkD,EAASu2B,EAAQtiB,GACzD,IAAIgF,EAASlS,KAAK29C,mBAAmBnuB,GAErC,OAAOtd,EAAOsK,UAAYtK,EAAOsK,UAAUxC,YAAY9M,GAASgF,EAAO6c,KAAO7c,EAAO6c,KAAKyI,cAActlB,EAAO6c,KAAK0I,YAAYvqB,IAAU,IAC5I,EAMAuuC,EAAKn7C,UAAUs9C,iBAAmB,SAAU3kD,EAASu2B,EAAQtiB,GAC3D,IAAIgF,EAASlS,KAAK29C,mBAAmBnuB,GAErC,OAAOtd,EAAOsK,UAAYtK,EAAOsK,UAAU6e,YAAYnuB,GAASgF,EAAO6c,KAAO7c,EAAO6c,KAAKylB,YAAYtiC,EAAO6c,KAAKwkB,aAAarmC,IAAU,IAC3I,EAEAuuC,EAAKn7C,UAAUq9C,mBAAqB,SAAUnuB,GAC5C,IAKIhT,EACAuS,EANApxB,EAAc6xB,EAAO7xB,YACrB+Y,EAAa8Y,EAAO9Y,YAAc/Y,GAAeA,EAAYgZ,uBAAuB,QAAS,MAAkBC,OAAO,GACtHC,EAAa2Y,EAAO3Y,YAAclZ,GAAeA,EAAYgZ,uBAAuB,QAAS,MAAkBC,OAAO,GACtH8kC,EAAYlsB,EAAOksB,UACnBmC,EAAa79C,KAAK47C,YAItB,GAAIj+C,EACF6e,EAAY7e,EAAYO,kBACxB,QAAQ2/C,EAAYrhC,GAAa,IAAMA,EAAY,WAC9C,GAAI9F,GAAcG,EACvB2F,EAAYxc,KAAKq3B,aAAa3gB,EAAW4f,eAAgBzf,EAAWyf,qBAC/D,GAAI5f,EACTqY,EAAO/uB,KAAKwhC,QAAQ,IAAK9qB,EAAW4f,qBAC/B,GAAIzf,EACTkY,EAAO/uB,KAAKwhC,QAAQ,IAAK3qB,EAAWyf,qBAEjC,GAAIolB,EAAW,CAChB,IAAIxkB,EAAOwkB,EAAUx9C,iBAEjBg5B,IAASl3B,OACXwc,EAAYxc,KAAK47C,YAAY,GAEjC,CAEF,MAAO,CACLp/B,UAAWA,EACXuS,KAAMA,EAEV,EAMA0sB,EAAKn7C,UAAU26B,aAAe,SAAUxL,GACtC,IAAI5N,EAAQ7hB,KAAK47C,YAAY,GAE7B,GAAI/5B,EACF,OAAOA,EAAMoZ,aAAaxL,EAE9B,EAMAgsB,EAAKn7C,UAAUy7C,eAAiB,SAAUL,EAAWziD,EAAS2E,GAC5D,IAAIkN,EAAQ9K,KAERk3B,EAAOl3B,KACP89C,EAAmB,CACrB1P,MAAM,EACNE,OAAO,EACPD,KAAK,EACLE,QAAQ,GAEN2N,EAAU,CACZv/B,EAAG,CAAC,EACJC,EAAG,CAAC,GAEFmhC,EAAY,CACdphC,EAAG,EACHC,EAAG,GAML,GAHA3jB,EAAQ01B,cAAc,QAASqvB,EAAkB,KAAMh+C,MACvD/G,EAAQ01B,cAAc,QAASqvB,EAAkB,KAAMh+C,OAElD+9C,EAAUphC,IAAMohC,EAAUnhC,EAI7B,OAFA5c,KAAK67C,SAAW,CAAC,OACjB77C,KAAK87C,UAAY,IAqBnB,SAASkC,EAAkB/5C,GACzB,OAAO,SAAU6T,EAAW1N,GAC1B,GAAK6zC,GAAoBnmC,EAAW4jC,GAApC,CAIA,IAAIwC,EAAepmC,EAAU9Z,IAAI,YAEjB,MAAZiG,EAEmB,QAAjBi6C,GAA2C,WAAjBA,IAE5BA,EAAeJ,EAAiBvP,OAAS,MAAQ,UAI9B,SAAjB2P,GAA4C,UAAjBA,IAE7BA,EAAeJ,EAAiB1P,KAAO,QAAU,QAIrD0P,EAAiBI,IAAgB,EACjC,IAAInvB,EAAO,IAAI,GAAO9qB,GAAS,QAAmB6T,GAAY,CAAC,EAAG,GAAIA,EAAU9Z,IAAI,QAASkgD,GACzFpnC,EAA2B,aAAdiY,EAAK5wB,KACtB4wB,EAAKhN,OAASjL,GAAcgB,EAAU9Z,IAAI,eAC1C+wB,EAAK3R,QAAUtF,EAAU9Z,IAAI,WAE7B8Z,EAAUiX,KAAOA,EAEjBA,EAAK1J,MAAQvN,EAEbiX,EAAKmI,KAAOA,EAEZnI,EAAKlX,MAAQzN,EAEb8sB,EAAK4kB,UAAU/4C,KAAKgsB,GAEpBmtB,EAAQj4C,GAASmG,GAAO2kB,EACxBgvB,EAAU95C,IAnCV,CAoCF,CACF,CA1DAjE,KAAK67C,SAAWK,GAEhB,QAAKA,EAAQv/B,GAAG,SAAUu3B,EAAOoJ,IAC/B,QAAKpB,EAAQt/B,GAAG,SAAUu3B,EAAOoJ,GAC/B,IAAI16C,EAAM,IAAMy6C,EAAa,IAAMC,EAC/B/gC,EAAY,IAAI,EAAY3Z,GAChC2Z,EAAU2hC,OAASrzC,EACnB0R,EAAU6I,MAAQq2B,EAClB5wC,EAAM6wC,WAAW94C,GAAO2Z,EAExB1R,EAAM8wC,YAAY74C,KAAKyZ,GAEvBA,EAAU41B,QAAQ8B,GAClB13B,EAAU41B,QAAQ+B,EACpB,GACF,GA4CF,EAMAsH,EAAKn7C,UAAUk8C,aAAe,SAAUvjD,EAASyiD,GA6B/C,SAAS0C,EAAYvgD,EAAMkxB,IACzB,SAAK,QAAwBlxB,EAAMkxB,EAAK7vB,MAAM,SAAUA,GACtD6vB,EAAKvH,MAAM62B,oBAAoBxgD,EAAMqB,EACvC,GACF,EA/BA,QAAKc,KAAK87C,WAAW,SAAU/sB,GAG7B,GAFAA,EAAKvH,MAAMgxB,UAAUv7C,KAAWA,KAEd,aAAd8xB,EAAK5wB,KAAqB,CAC5B,IAAI67C,EAAmBjrB,EAAK1J,MAAMrnB,IAAI,oBACtC+wB,EAAKvH,MAAMyyB,YAAYD,EACzB,CACF,IACA/gD,EAAQooC,YAAW,SAAU1jC,GAC3B,IAAI,SAAoBA,GAAc,CACpC,IAAI2gD,GAAe,SAAe3gD,GAC9B+Y,EAAa4nC,EAAa5nC,WAC1BG,EAAaynC,EAAaznC,WAE9B,IAAKonC,GAAoBvnC,EAAYglC,KAAeuC,GAAoBpnC,EAAY6kC,GAClF,OAGF,IAAIl/B,EAAYxc,KAAKq3B,aAAa3gB,EAAW4f,eAAgBzf,EAAWyf,gBACpEz4B,EAAOF,EAAYG,UACnBo2C,EAAQ13B,EAAUglB,QAAQ,KAC1B2S,EAAQ33B,EAAUglB,QAAQ,KAC9B4c,EAAYvgD,EAAMq2C,GAClBkK,EAAYvgD,EAAMs2C,EACpB,CACF,GAAGn0C,KAOL,EAMAy7C,EAAKn7C,UAAU2/B,eAAiB,SAAU/gC,GACxC,IAAImhC,EAAW,GACXC,EAAY,GAOhB,OANA,QAAKtgC,KAAKy9C,iBAAiB,SAAUjhC,GACnC,IAAIpe,EAAkB,MAAPc,GAAuB,SAARA,EAAiBsd,EAAUglB,QAAQtiC,GAAOsd,EAAUne,cAC9EmqB,EAAYhM,EAAUje,aAAaH,IACvC,QAAQiiC,EAAUjiC,GAAY,GAAKiiC,EAASt9B,KAAK3E,IACjD,QAAQkiC,EAAW9X,GAAa,GAAK8X,EAAUv9B,KAAKylB,EACtD,IACO,CACL6X,SAAUA,EACVC,UAAWA,EAEf,EAEAmb,EAAK8C,OAAS,SAAUtlD,EAAS2E,GAC/B,IAAI4gD,EAAQ,GAkCZ,OAjCAvlD,EAAQ01B,cAAc,QAAQ,SAAU+sB,EAAWtxC,GACjD,IAAI8sB,EAAO,IAAIukB,EAAKC,EAAWziD,EAAS2E,GACxCs5B,EAAKvyB,KAAO,QAAUyF,EAGtB8sB,EAAKylB,OAAOjB,EAAW99C,GAAK,GAC5B89C,EAAUx9C,iBAAmBg5B,EAC7BsnB,EAAMz7C,KAAKm0B,EACb,IAEAj+B,EAAQooC,YAAW,SAAU1jC,GAC3B,IAAK,SAAoBA,GAAzB,CAIA,IAAI2gD,GAAe,SAAe3gD,GAC9B+Y,EAAa4nC,EAAa5nC,WAC1BG,EAAaynC,EAAaznC,WAC1B6kC,EAAYhlC,EAAWi4B,mBAEvB,EAUJ,IAAIzX,EAAOwkB,EAAUx9C,iBACrBP,EAAYO,iBAAmBg5B,EAAKG,aAAa3gB,EAAW4f,eAAgBzf,EAAWyf,eAlBvF,CAmBF,IACOkoB,CACT,EAGA/C,EAAKz3C,WAAaquC,EACXoJ,CACT,CAjbA,GAubA,SAASwC,GAAoBnmC,EAAW4jC,GACtC,OAAO5jC,EAAU62B,qBAAuB+M,CAC1C,CAEA,SAASgB,GAAcR,EAASuC,EAAc1vB,EAC9C0tB,GACE1tB,EAAK2vB,gBAAkB,WAErB,OAAOC,EAAoB,CAACA,GAAqB,EACnD,EAKA,IACIA,EADAre,EAAY4b,EAAQuC,GAEpB3mC,EAAYiX,EAAK1J,MACjB6pB,EAASp3B,EAAU9Z,IAAI,CAAC,WAAY,WACpCmxC,EAAkBr3B,EAAU9Z,IAAI,CAAC,WAAY,oBAEjD,GAAKkxC,EAAL,CAKA,GAAuB,MAAnBC,EACEyP,GAAgBte,EAAU6O,MAC5BwP,EAAoBre,EAAU6O,SAIhC,IAAK,IAAI/kC,KAAOk2B,EACd,GAAIA,EAAUv6B,eAAeqE,IAAQw0C,GAAgBte,EAAUl2B,MAE3DqyC,EAAcoC,EAAmBve,EAAUl2B,KAAQ,CACrDu0C,EAAoBre,EAAUl2B,GAC9B,KACF,CAIAu0C,IACFlC,EAAcoC,EAAmBF,KAAsB,EApBzD,CAuBA,SAASE,EAAmB9vB,GAC1B,OAAOA,EAAK7vB,IAAM,IAAM6vB,EAAKlX,KAC/B,CACF,CAEA,SAAS+mC,GAAgB7vB,GACvB,OAAOA,GAAsB,aAAdA,EAAK5wB,MAAqC,SAAd4wB,EAAK5wB,OAAmB,QAAgB4wB,EACrF,CAEA,SAASouB,GAAoBpuB,EAAM+vB,GACjC,IAAI5qB,EAAanF,EAAKtwB,YAClBsgD,EAAgB7qB,EAAW,GAAKA,EAAW,GAE/CnF,EAAKyI,cAA6B,MAAbzI,EAAK7vB,IAAc,SAAU2iB,GAChD,OAAOA,EAAQi9B,CACjB,EAAI,SAAUj9B,GACZ,OAAOk9B,EAAgBl9B,EAAQi9B,CACjC,EACA/vB,EAAKwkB,aAA4B,MAAbxkB,EAAK7vB,IAAc,SAAU2iB,GAC/C,OAAOA,EAAQi9B,CACjB,EAAI,SAAUj9B,GACZ,OAAOk9B,EAAgBl9B,EAAQi9B,CACjC,CACF,CAEA,U,uDC5gBI,IAAQ,UACL,SAASE,GAA4BC,EAAUC,EAAWpnC,EAAW4jC,GAC1E,IAAI3sB,EAAOjX,EAAUiX,KAErB,IAAIA,EAAKvH,MAAM+U,UAAf,CAKA,IAAI4iB,EAAiBrnC,EAAUqM,SAAS,aACpCi7B,EAAiBD,EAAeh7B,SAAS,aACzCk7B,EAAaD,EAAephD,IAAI,SAChCg/C,EAAWtB,EAAUx9C,iBAAiB89C,UACtCzQ,EAAcxc,EAAKmd,eAAe,CACpCF,UAAWmT,EACXpL,OAAO,IAGT,GAAKxI,EAAY/vC,OAAjB,CAMA,IAAI8jD,EAAgBD,EAAW7jD,OAC3B+jD,EAAsB,GAAMN,GAAUO,gBACtCC,EAAqB,OACrBC,EAAa,EAEjB,GAAIH,EACF,IAAK,IAAIjkD,EAAI,EAAGA,EAAIiwC,EAAY/vC,OAAQF,IAAK,CAC3C,IAAIqkD,EAASJ,EAAoBvhD,IAAIutC,EAAYjwC,GAAGywC,WAEpD,GAAc,MAAV4T,EAAgB,CAClBD,GAAcC,GAAUL,EAAgB,GAAKhkD,GAAKgkD,EAClD,KACF,CACF,CAGF,IAAIM,EAAO7wB,EAAKyI,cAAc+T,EAAY,GAAG1pB,OACzC6tB,EAAY0P,EAAehd,eAC/Bid,EAAa,KAAeA,GAAcA,EAAa,CAACA,GAExD,IAAS/jD,EAAI,EAAGA,EAAIiwC,EAAY/vC,OAAQF,IAAK,CAC3C,IAAIswC,EAAY7c,EAAKyI,cAAc+T,EAAYjwC,GAAGumB,OAC9ClF,OAAI,EACJC,OAAI,EACJC,OAAQ,EACRC,OAAS,EAETiS,EAAK5U,gBACPwC,EAAIijC,EACJhjC,EAAIogC,EAASpgC,EACbC,EAAQ+uB,EAAYjvB,EACpBG,EAASkgC,EAASlgC,OAClB8iC,EAAOjjC,EAAIE,IAEXF,EAAIqgC,EAASrgC,EACbC,EAAIgjC,EACJ/iC,EAAQmgC,EAASngC,MACjBC,EAAS8uB,EAAYhvB,EACrBgjC,EAAOhjC,EAAIE,GAGb,IAAIivB,EAAYR,EAAYjwC,EAAI,GAAGywC,UACtB,MAAbA,GAAqB0T,EAAmBj7C,IAAIunC,EAAW2T,GACvDR,EAAU3+C,IAAI,IAAI,IAAa,CAC7BwnC,KAAmB,MAAbgE,EAAoB,QAAUA,EAAY,KAChD7uB,MAAO,CACLP,EAAGA,EACHC,EAAGA,EACHC,MAAOA,EACPC,OAAQA,GAEVhhB,MAAO,KAAgB,CACrB6vB,KAAM0zB,EAAWK,IAChBhQ,GACH5D,WAAW,EACX7e,QAAQ,KAEVyyB,GAAcA,EAAa,GAAKJ,CAClC,CAEA,GAAML,GAAUO,gBAAkBC,CAhElC,CAdA,CA+EF,CACO,SAASI,GAA0BZ,GACxC,GAAMA,GAAUO,gBAAkB,IACpC,CCnFA,IAAIM,GAAmB,CAAC,WAAY,gBAAiB,YACjDC,GAAmB,CAAC,YAAa,YAAa,kBAE9CC,GAEJ,SAAUtmC,GAGR,SAASsmC,IACP,IAAIl1C,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAIhE,OAFA8K,EAAM3M,KAAO6hD,EAAkB7hD,KAC/B2M,EAAM2iC,iBAAmB,uBAClB3iC,CACT,CA2DA,OAnEA,QAAUk1C,EAAmBtmC,GAc7BsmC,EAAkB1/C,UAAU6hB,OAAS,SAAUrK,EAAW7e,EAAS2E,EAAKwkB,GACtEpiB,KAAKqjB,MAAM+C,YACX,IAAI65B,EAAejgD,KAAKkgD,WAIxB,GAHAlgD,KAAKkgD,WAAa,IAAI,KACtBlgD,KAAKqjB,MAAM9iB,IAAIP,KAAKkgD,YAEfpoC,EAAU9Z,IAAI,QAAnB,CAIA,IAAI09C,EAAY5jC,EAAU62B,mBACtB39B,EAAS8mB,GAAA,GAA2B4jB,EAAW5jC,GAC/CqoC,EAAc,IAAI/Z,GAAA,EAAYtuB,EAAW,KAAc,CACzDyuB,gBAAiB,SAAU6Z,GAGzB,IAFA,IAAIC,EAAa3E,EAAUx9C,iBAAiBu/C,gBAEnCniD,EAAI,EAAGA,EAAI+kD,EAAW7kD,OAAQF,IACrC,IAAI,SAAqB+kD,EAAW/kD,GAAGiD,aAAauZ,EAAUiX,MAAMvH,OAElE,OAAO,EAKX,OAAO,CACT,GACCxW,IACH,KAAY8uC,GAAkBK,EAAY5/C,IAAK4/C,GAE/CngD,KAAKkgD,WAAW3/C,IAAI4/C,EAAYtZ,YAEhC,KAAYkZ,IAAkB,SAAUp7C,GAClCmT,EAAU9Z,IAAI,CAAC2G,EAAM,UACvB27C,GAAoB37C,GAAM3E,KAAMA,KAAKkgD,WAAYpoC,EAAW4jC,EAEhE,GAAG17C,MAIH,IAAIugD,EAA6Bn+B,GAA4B,oBAAjBA,EAAQjkB,MAA8BikB,EAAQoC,WAErF+7B,GACHjsB,GAAQksB,gBAAgBP,EAAcjgD,KAAKkgD,WAAYpoC,GAGzD4B,EAAOpZ,UAAU6hB,OAAO3Q,KAAKxR,KAAM8X,EAAW7e,EAAS2E,EAAKwkB,EArC5D,CAsCF,EAEA49B,EAAkB1/C,UAAUnE,OAAS,WACnC0jD,GAA0B7/C,KAC5B,EAEAggD,EAAkB7hD,KAAO,gBAClB6hD,CACT,CArEA,CAqEEjhB,GAAA,GAEEuhB,GAAsB,CACxB9Q,UAAW,SAAUyP,EAAUC,EAAWpnC,EAAW4jC,GACnD,IAAI3sB,EAAOjX,EAAUiX,KAErB,IAAIA,EAAKvH,MAAM+U,UAAf,CAIA,IAAIkkB,EAAiB3oC,EAAUqM,SAAS,aACpC8nB,EAAiBwU,EAAet8B,SAAS,aACzCu8B,EAAazU,EAAejuC,IAAI,SACpC0iD,EAAa,KAAeA,GAAcA,EAAa,CAACA,GAWxD,IAVA,IAAI1D,EAAWtB,EAAUx9C,iBAAiB89C,UACtC7hC,EAAe4U,EAAK5U,eACpBwmC,EAAY,EACZpV,EAAcxc,EAAKmd,eAAe,CACpCF,UAAWyU,IAETvc,EAAK,GACLC,EAAK,GACLhL,EAAY8S,EAAe9J,eAEtB7mC,EAAI,EAAGA,EAAIiwC,EAAY/vC,OAAQF,IAAK,CAC3C,IAAIswC,EAAY7c,EAAKyI,cAAc+T,EAAYjwC,GAAGumB,OAE9C1H,GACF+pB,EAAG,GAAK0H,EACR1H,EAAG,GAAK8Y,EAASpgC,EACjBunB,EAAG,GAAKyH,EACRzH,EAAG,GAAK6Y,EAASpgC,EAAIogC,EAASlgC,SAE9BonB,EAAG,GAAK8Y,EAASrgC,EACjBunB,EAAG,GAAK0H,EACRzH,EAAG,GAAK6Y,EAASrgC,EAAIqgC,EAASngC,MAC9BsnB,EAAG,GAAKyH,GAGV,IAAI8T,EAAaiB,IAAcD,EAAWllD,OACtCuwC,EAAYR,EAAYjwC,GAAGywC,UAC3BxT,EAAO,IAAI,KAAa,CAC1BwP,KAAmB,MAAbgE,EAAoB,QAAUR,EAAYjwC,GAAGywC,UAAY,KAC/DD,WAAW,EACX5uB,MAAO,CACLknB,GAAIF,EAAG,GACPG,GAAIH,EAAG,GACPjb,GAAIkb,EAAG,GACPjb,GAAIib,EAAG,IAETroC,MAAO,KAAgB,CACrBowB,OAAQw0B,EAAWhB,IAClBvmB,GACHlM,QAAQ,IAEVqH,GAAQwT,qBAAqBvP,EAAKrb,MAAOic,EAAUpc,WACnDmiC,EAAU3+C,IAAIg4B,EAChB,CAjDA,CAkDF,EACA2X,eAAgB,SAAU+O,EAAUC,EAAWpnC,EAAW4jC,GACxD,IAAI3sB,EAAOjX,EAAUiX,KACjB6xB,EAAsB9oC,EAAUqM,SAAS,kBACzC8nB,EAAiB2U,EAAoBz8B,SAAS,aAC9C64B,EAAWtB,EAAUx9C,iBAAiB89C,UACtC7hC,EAAe4U,EAAK5U,eACpBiyB,EAAmBrd,EAAKsd,sBAE5B,GAAKD,EAAiB5wC,OAQtB,IAJA,IAAI0oC,EAAK,GACLC,EAAK,GACLhL,EAAY8S,EAAe9J,eAEtB7mC,EAAI,EAAGA,EAAI8wC,EAAiB5wC,OAAQF,IAC3C,IAAK,IAAIkxC,EAAI,EAAGA,EAAIJ,EAAiB9wC,GAAGE,OAAQgxC,IAAK,CACnD,IAAIZ,EAAY7c,EAAKyI,cAAc4U,EAAiB9wC,GAAGkxC,GAAG3qB,OAEtD1H,GACF+pB,EAAG,GAAK0H,EACR1H,EAAG,GAAK8Y,EAASpgC,EACjBunB,EAAG,GAAKyH,EACRzH,EAAG,GAAK6Y,EAASpgC,EAAIogC,EAASlgC,SAE9BonB,EAAG,GAAK8Y,EAASrgC,EACjBunB,EAAG,GAAK0H,EACRzH,EAAG,GAAK6Y,EAASrgC,EAAIqgC,EAASngC,MAC9BsnB,EAAG,GAAKyH,GAGV,IAAIrT,EAAO,IAAI,KAAa,CAC1BwP,KAAM,cAAgBqE,EAAiB9wC,GAAGkxC,GAAGT,UAC7CD,WAAW,EACX5uB,MAAO,CACLknB,GAAIF,EAAG,GACPG,GAAIH,EAAG,GACPjb,GAAIkb,EAAG,GACPjb,GAAIib,EAAG,IAETroC,MAAOq9B,EACPlM,QAAQ,IAEVqH,GAAQwT,qBAAqBvP,EAAKrb,MAAOic,EAAUpc,WACnDmiC,EAAU3+C,IAAIg4B,EAChB,CAEJ,EACAkX,UAAW,SAAUwP,EAAUC,EAAWpnC,EAAW4jC,GACnDsD,GAA4BC,EAAUC,EAAWpnC,EAAW4jC,EAC9D,GAGEmF,GAEJ,SAAUnnC,GAGR,SAASmnC,IACP,IAAI/1C,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAGhE,OADA8K,EAAM3M,KAAO0iD,EAAmB1iD,KACzB2M,CACT,CAGA,OAVA,QAAU+1C,EAAoBnnC,GAS9BmnC,EAAmB1iD,KAAO,QACnB0iD,CACT,CAZA,CAYEb,IAIEc,GAEJ,SAAUpnC,GAGR,SAASonC,IACP,IAAIh2C,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAGhE,OADA8K,EAAM3M,KAAO0iD,GAAmB1iD,KACzB2M,CACT,CAGA,OAVA,QAAUg2C,EAAoBpnC,GAS9BonC,EAAmB3iD,KAAO,QACnB2iD,CACT,CAZA,CAYEd,ICzNEe,GAEJ,SAAUrnC,GAGR,SAASqnC,IACP,IAAIj2C,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAGhE,OADA8K,EAAM3M,KAAO,OACN2M,CACT,CAkBA,OAzBA,QAAUi2C,EAAUrnC,GASpBqnC,EAASzgD,UAAU6hB,OAAS,SAAUu5B,EAAWziD,GAC/C+G,KAAKqjB,MAAM+C,YAEPs1B,EAAU19C,IAAI,SAChBgC,KAAKqjB,MAAM9iB,IAAI,IAAIipB,EAAA,EAAK,CACtBtM,MAAOw+B,EAAUx9C,iBAAiB89C,UAClClgD,OAAO,QAAS,CACd6vB,KAAM+vB,EAAU19C,IAAI,oBACnB09C,EAAU32B,gBACbkI,QAAQ,EACRxD,IAAK,IAGX,EAEAs3B,EAAS5iD,KAAO,OACT4iD,CACT,CA3BA,CA2BEpnB,EAAA,GAEEqnB,GAAc,CAGhB/mC,OAAQ,GAEH,SAAS4T,GAAQC,GACtBA,EAAUmR,sBAAsB8hB,IAChCjzB,EAAUkR,uBAAuB,GACjClR,EAAUmzB,yBAAyB,cAAe,IAClDpQ,EAAiB/iB,EAAW,IAAK8gB,EAAoBoS,IACrDnQ,EAAiB/iB,EAAW,IAAK8gB,EAAoBoS,IACrDlzB,EAAUmR,sBAAsB4hB,IAChC/yB,EAAUmR,sBAAsB6hB,IAChChzB,EAAUoR,sBAAqB,SAAUtlB,GAEnCA,EAAOs6B,OAASt6B,EAAOu6B,QAAUv6B,EAAOsd,OAC1Ctd,EAAOsd,KAAO,CAAC,EAEnB,GACF,C,0BCzDO,SAAS,GAAQpJ,IACtB,QAAID,KACJ,QAAI,KACN,C,6JCIIqzB,EAEJ,SAAUxnC,GAGR,SAASwnC,IACP,IAAIp2C,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAOhE,OALA8K,EAAM3M,KAAO+iD,EAAW/iD,KACxB2M,EAAMqjC,WAAa,CACjBhwC,KAAM,MACNgjD,YAAY,GAEPr2C,CACT,CA4BA,OAvCA,QAAUo2C,EAAYxnC,GAatBwnC,EAAW/iD,KAAO,QAClB+iD,EAAW9mC,cAAgB,CAEzBC,EAAG,EACHyY,MAAM,EACNyP,KAAM,GACNrwB,OAAQ,QACRkvC,QAAS,GACTC,UAAW,QACXjT,KAAM,EACNC,IAAK,EACL5U,gBAAiB,gBACjB7d,YAAa,OACbC,YAAa,EACb2d,QAAS,EACT8nB,QAAS,GACTlgB,UAAW,CACTmO,SAAU,GACVe,WAAY,OACZ30B,MAAO,WAET4lC,aAAc,CACZhS,SAAU,GACV5zB,MAAO,YAGJulC,CACT,CAzCA,CAyCE,KAGEM,EAEJ,SAAU9nC,GAGR,SAAS8nC,IACP,IAAI12C,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAGhE,OADA8K,EAAM3M,KAAOqjD,EAAUrjD,KAChB2M,CACT,CAqIA,OA5IA,QAAU02C,EAAW9nC,GASrB8nC,EAAUlhD,UAAU6hB,OAAS,SAAUs/B,EAAYxoD,EAAS2E,GAG1D,GAFAoC,KAAKqjB,MAAM+C,YAENq7B,EAAWzjD,IAAI,QAApB,CAIA,IAAIqlB,EAAQrjB,KAAKqjB,MACb4lB,EAAiBwY,EAAWt9B,SAAS,aACrCu9B,EAAoBD,EAAWt9B,SAAS,gBACxCvD,EAAY6gC,EAAWzjD,IAAI,aAC3B6iB,EAAoB,KAAiB4gC,EAAWzjD,IAAI,gBAAiByjD,EAAWzjD,IAAI,sBACpF6nB,EAAS,IAAI,KAAa,CAC5B/pB,OAAO,QAAgBmtC,EAAgB,CACrC1G,KAAMkf,EAAWzjD,IAAI,QACrB2tB,KAAMsd,EAAejG,gBACpB,CACD2e,YAAY,IAEdl4B,GAAI,KAEFoZ,EAAWhd,EAAOqK,kBAClB0xB,EAAUH,EAAWzjD,IAAI,WACzB6jD,EAAY,IAAI,KAAa,CAC/B/lD,OAAO,QAAgB4lD,EAAmB,CACxCnf,KAAMqf,EACNj2B,KAAM+1B,EAAkB1e,eACxBpmB,EAAGimB,EAAS/lB,OAAS2kC,EAAWzjD,IAAI,WACpCijB,cAAe,OACd,CACD0gC,YAAY,IAEdl4B,GAAI,KAEFwP,EAAOwoB,EAAWzjD,IAAI,QACtB8jD,EAAUL,EAAWzjD,IAAI,WACzBgvC,EAAeyU,EAAWzjD,IAAI,gBAAgB,GAClD6nB,EAAOoH,QAAUgM,IAAS+T,EAC1B6U,EAAU50B,QAAU60B,IAAY9U,EAE5B/T,GACFpT,EAAOgB,GAAG,SAAS,YACjB,QAAWoS,EAAM,IAAMwoB,EAAWzjD,IAAI,UACxC,IAGE8jD,GACFD,EAAUh7B,GAAG,SAAS,YACpB,QAAWi7B,EAAS,IAAML,EAAWzjD,IAAI,aAC3C,KAGF,OAAU6nB,GAAQuhB,WAAY,OAAUya,GAAWza,UAAY4F,EAAe,CAC5E3kB,cAAe,QACfiO,eAAgBmrB,EAAWnrB,gBACzB,KACJjT,EAAM9iB,IAAIslB,GACV+7B,GAAWv+B,EAAM9iB,IAAIshD,GAErB,IAAIE,EAAY1+B,EAAM6M,kBAClBkV,EAAeqc,EAAW3E,qBAC9B1X,EAAavoB,MAAQklC,EAAUllC,MAC/BuoB,EAAatoB,OAASilC,EAAUjlC,OAChC,IAAIklC,GAAa,QAAc5c,EAAc,CAC3CvoB,MAAOjf,EAAIslC,WACXpmB,OAAQlf,EAAIwlC,aACXqe,EAAWzjD,IAAI,YAEb4iB,IAEHA,EAAY6gC,EAAWzjD,IAAI,SAAWyjD,EAAWzjD,IAAI,SAEnC,WAAd4iB,IACFA,EAAY,UAII,UAAdA,EACFohC,EAAWrlC,GAAKqlC,EAAWnlC,MACJ,WAAd+D,IACTohC,EAAWrlC,GAAKqlC,EAAWnlC,MAAQ,IAIlCgE,IACHA,EAAoB4gC,EAAWzjD,IAAI,QAAUyjD,EAAWzjD,IAAI,UAElC,WAAtB6iB,IACFA,EAAoB,UAGI,WAAtBA,EACFmhC,EAAWplC,GAAKolC,EAAWllC,OACI,WAAtB+D,IACTmhC,EAAWplC,GAAKolC,EAAWllC,OAAS,GAGtC+D,EAAoBA,GAAqB,OAG3CwC,EAAM1G,EAAIqlC,EAAWrlC,EACrB0G,EAAMzG,EAAIolC,EAAWplC,EACrByG,EAAM4+B,aACN,IAAIC,EAAa,CACflhC,MAAOJ,EACPK,cAAeJ,GAEjBgF,EAAO4O,SAASytB,GAChBL,EAAUptB,SAASytB,GAGnBH,EAAY1+B,EAAM6M,kBAClB,IAAIsJ,EAAUwoB,EAAWzoB,OACrBz9B,EAAQ2lD,EAAW18B,aAAa,CAAC,QAAS,YAC9CjpB,EAAM6vB,KAAO81B,EAAWzjD,IAAI,mBAC5B,IAAIod,EAAO,IAAI,IAAa,CAC1B8B,MAAO,CACLP,EAAGolC,EAAUplC,EAAI6c,EAAQ,GACzB5c,EAAGmlC,EAAUnlC,EAAI4c,EAAQ,GACzB3c,MAAOklC,EAAUllC,MAAQ2c,EAAQ,GAAKA,EAAQ,GAC9C1c,OAAQilC,EAAUjlC,OAAS0c,EAAQ,GAAKA,EAAQ,GAChD9b,EAAG+jC,EAAWzjD,IAAI,iBAEpBlC,MAAOA,EACP48B,kBAAkB,EAClBzL,QAAQ,IAEV5J,EAAM9iB,IAAI6a,EA1HV,CA2HF,EAEAomC,EAAUrjD,KAAO,QACVqjD,CACT,CA9IA,CA8IE,KAEK,SAAS3zB,EAAQC,GACtBA,EAAUkR,uBAAuBkiB,GACjCpzB,EAAUmR,sBAAsBuiB,EAClC,C,mGC1MIW,EAEJ,SAAUzoC,GAGR,SAASyoC,IACP,IAAIr3C,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAGhE,OADA8K,EAAM3M,KAAOgkD,EAAahkD,KACnB2M,CACT,CAuEA,OA9EA,QAAUq3C,EAAczoC,GASxByoC,EAAahkD,KAAO,UACpBgkD,EAAa9mC,aAAe,CAAC,eAC7B8mC,EAAa/nC,cAAgB,CAE3BC,EAAG,GACHyY,MAAM,EAENsvB,aAAa,EAGbC,QAAS,OAETtoB,UAAW,kBACXuoB,mBAAmB,EACnBC,YAAa,SACbC,WAAY,OAIZC,QAAS,KACTC,UAAW,EACXC,UAAW,IAEXC,mBAAoB,GACpBC,WAAW,EACXppB,gBAAiB,OAEjBzd,WAAY,GACZC,YAAa,oBACbC,cAAe,EACfC,cAAe,EAEfJ,aAAc,EAEdF,YAAa,EAIb2d,QAAS,KAETspB,aAAc,GAEd3jB,YAAa,CAGXhhC,KAAM,OAKN4wB,KAAM,OACN31B,UAAW,OACX8/B,wBAAyB,IACzB6pB,sBAAuB,iBACvB5hB,WAAY,CACVxlB,MAAO,OACPkB,MAAO,EACP1e,KAAM,SAENijC,UAAW,CAAC,IAKhBA,UAAW,CACTzlB,MAAO,OACP4zB,SAAU,KAGP4S,CACT,CAhFA,CAgFExoB,EAAA,GAEF,I,kDCnFO,SAASqpB,EAAqBC,GACnC,IAAIC,EAAgBD,EAAajlD,IAAI,WACrC,OAAwB,MAAjBklD,IAA0BA,EACI,aAAnCD,EAAajlD,IAAI,aACrB,CAEA,SAASmlD,EAAUC,GACjB,GAAKC,EAAA,eAML,IAFA,IAAIvnD,EAAQwnD,SAASC,gBAAgBznD,MAE5BR,EAAI,EAAG2S,EAAMm1C,EAAW5nD,OAAQF,EAAI2S,EAAK3S,IAChD,GAAI8nD,EAAW9nD,KAAMQ,EACnB,OAAOsnD,EAAW9nD,EAGxB,CAEO,IAAIkoD,EAAmBL,EAAU,CAAC,YAAa,kBAAmB,aAAc,eAAgB,gBAC5FM,EAAoBN,EAAU,CAAC,mBAAoB,aAAc,cAAe,gBAAiB,iBACrG,SAASO,EAAkBC,EAAaC,GAC7C,IAAKD,EACH,OAAOC,EAGTA,GAAY,QAAYA,GAAW,GACnC,IAAIx5C,EAAMu5C,EAAY1pB,QAAQ2pB,GAE9B,OADAD,GAAuB,IAATv5C,EAAaw5C,EAAY,IAAMD,EAAYh+C,MAAM,EAAGyE,GAAO,IAAMw5C,EACxED,EAAYxR,aACrB,CACO,SAAS0R,EAAiB/pD,EAAIgC,GACnC,IAAIgoD,EAAMhqD,EAAGiqD,cAAgBT,SAASU,aAAeV,SAASU,YAAYH,iBAAiB/pD,GAC3F,OAAOgqD,EAAMhoD,EAAQgoD,EAAIhoD,GAASgoD,EAAM,IAC1C,C,cC9BIG,EAAwBP,EAAkBD,EAAmB,cAC7DS,EAAuBR,EAAkBF,EAAkB,aAE3DW,EAAW,0FAA4Fd,EAAA,uBAA2B,yBAA2B,IAEjK,SAASe,EAAUnsB,GAEjB,OADAA,EAAc,SAARA,EAAiB,QAAkB,UAARA,EAAkB,OAAiB,QAARA,EAAgB,SAAW,MAChFA,CACT,CAEA,SAASosB,EAAcpB,EAAcrnC,EAAa0oC,GAChD,KAAK,QAASA,IAAoC,WAAlBA,EAC9B,MAAO,GAGT,IAAI7qB,EAAkBwpB,EAAajlD,IAAI,mBACnC6d,EAAconC,EAAajlD,IAAI,eACnC4d,GAAc,QAAqBA,GACnC,IAII2oC,EAJAC,EAAWJ,EAAUE,GACrBrc,EAAY3qC,KAAKN,IAA8B,IAA1BM,KAAKC,MAAMse,GAAoB,GACpD4oC,EAAgB,GAChBC,EAAiBR,EAAuB,KAGxC,QAAQ,CAAC,OAAQ,SAAUM,IAAa,GAC1CC,GAAiB,UACjBC,GAAkB,4BAA8BH,EAAyB,SAAbC,GAAuB,KAAO,IAAM,SAEhGC,GAAiB,WACjBC,GAAkB,4BAA8BH,EAAyB,QAAbC,EAAqB,IAAM,IAAM,QAG/F,IAAIG,EAAeJ,EAAYjnD,KAAK6gB,GAAK,IACrCymC,EAAU3c,EAAYpsB,EACtBgpC,EAAYD,EAAUtnD,KAAKuB,IAAIvB,KAAKuhB,IAAI8lC,IAAiBC,EAAUtnD,KAAKuB,IAAIvB,KAAKyhB,IAAI4lC,IACrFzc,EAAc5qC,KAAKC,MAA4G,MAApGsnD,EAAYvnD,KAAKwnD,MAAQjpC,GAAe,EAAIve,KAAKwnD,MAAQjpC,GAAegpC,EAAYD,GAAW,IAAY,IAC1IH,GAAiB,IAAMD,EAAW,KAAOtc,EAAc,KACvD,IAAI6c,EAAcnpC,EAAc,UAAYC,EAAc,MACtDmpC,EAAW,CAAC,2BAA6B/c,EAAY,aAAeA,EAAY,MAAOwc,EAAgB,IAAMC,EAAiB,IAAK,iBAAmBK,EAAa,gBAAkBA,EAAa,oBAAsBtrB,EAAkB,KAC9O,MAAO,eAAkBurB,EAAStlC,KAAK,IAAM,UAC/C,CAEA,SAASulC,EAAmBzrD,EAAU0rD,GACpC,IAAIC,EAAkB,8BAClBC,EAAmB,IAAM5rD,EAAW,EAAI,KAAO2rD,EAC/CE,EAAiB,UAAYD,EAAmB,cAAgBA,EAOpE,OALKF,IACHE,EAAmB,IAAM5rD,EAAW,KAAO2rD,EAC3CE,GAAkBhC,EAAA,qBAAyB,IAAMa,EAAuBkB,EAAmB,QAAUA,EAAmB,OAASA,GAG5HnB,EAAwB,IAAMoB,CACvC,CAEA,SAASC,EAAkB3oC,EAAGC,EAAG2oC,GAG/B,IAAIC,EAAK7oC,EAAE8oC,QAAQ,GAAK,KACpBC,EAAK9oC,EAAE6oC,QAAQ,GAAK,KAExB,IAAKpC,EAAA,qBACH,OAAOkC,EAAW,OAASG,EAAK,SAAWF,EAAK,IAAM,CAAC,CAAC,MAAOE,GAAK,CAAC,OAAQF,IAI/E,IAAIG,EAAOtC,EAAA,uBACPuC,EAAY,aAAeD,EAAO,KAAO,IAAM,IAAMH,EAAK,IAAME,GAAMC,EAAO,KAAO,IAAM,IAC9F,OAAOJ,EAAW,gBAAkBrB,EAAuB,IAAM0B,EAAY,IAAM,CAAC,CAAC,MAAO,GAAI,CAAC,OAAQ,GAAI,CAACpC,EAAkBoC,GAClI,CAQA,SAASC,EAAa5c,GACpB,IAAI6c,EAAU,GACVvW,EAAWtG,EAAejrC,IAAI,YAC9B2d,EAAQstB,EAAejG,eAC3BrnB,GAASmqC,EAAQ/iD,KAAK,SAAW4Y,GACjCmqC,EAAQ/iD,KAAK,QAAUkmC,EAAerG,WACtC2M,GACGuW,EAAQ/iD,KAAK,eAAiBzF,KAAKC,MAAiB,EAAXgyC,EAAe,GAAK,MAChE,IAAItzB,EAAcgtB,EAAejrC,IAAI,mBACjCge,EAAaitB,EAAejrC,IAAI,mBAAqB,EACrDke,EAAgB+sB,EAAejrC,IAAI,sBAAwB,EAC3Dme,EAAgB8sB,EAAejrC,IAAI,sBAAwB,EAM/D,OALAie,GAAeD,GAAc8pC,EAAQ/iD,KAAK,eAAiBmZ,EAAgB,MAAQC,EAAgB,MAAQH,EAAa,MAAQC,IAChI,QAAK,CAAC,aAAc,UAAU,SAAUtX,GACtC,IAAIyL,EAAM64B,EAAejrC,IAAI2G,GAC7ByL,GAAO01C,EAAQ/iD,KAAK,QAAU4B,EAAO,IAAMyL,EAC7C,IACO01C,EAAQpmC,KAAK,IACtB,CAEA,SAASqmC,EAAgB9C,EAAc+C,EAAkBd,GACvD,IAAIY,EAAU,GACVlD,EAAqBK,EAAajlD,IAAI,sBACtCy7B,EAAkBwpB,EAAajlD,IAAI,mBACnCge,EAAainC,EAAajlD,IAAI,cAC9Bie,EAAcgnC,EAAajlD,IAAI,eAC/Bke,EAAgB+mC,EAAajlD,IAAI,iBACjCme,EAAgB8mC,EAAajlD,IAAI,iBACjCirC,EAAiBga,EAAa9+B,SAAS,aACvCqV,GAAU,QAA2BypB,EAAc,QACnDgD,EAAY/pC,EAAgB,MAAQC,EAAgB,MAAQH,EAAa,MAAQC,EAuBrF,OAtBA6pC,EAAQ/iD,KAAK,cAAgBkjD,GAE7BD,GAAoBpD,GAAsBkD,EAAQ/iD,KAAKkiD,EAAmBrC,EAAoBsC,IAE1FzrB,GACFqsB,EAAQ/iD,KAAK,oBAAsB02B,IAIrC,QAAK,CAAC,QAAS,QAAS,WAAW,SAAU90B,GAC3C,IAAIuhD,EAAa,UAAYvhD,EACzBwhD,GAAY,QAAYD,GACxB91C,EAAM6yC,EAAajlD,IAAImoD,GACpB,MAAP/1C,GAAe01C,EAAQ/iD,KAAKmjD,EAAa,IAAM91C,GAAgB,UAATzL,EAAmB,GAAK,MAChF,IAEAmhD,EAAQ/iD,KAAK8iD,EAAa5c,IAEX,MAAXzP,GACFssB,EAAQ/iD,KAAK,YAAa,QAAkBy2B,GAAS9Z,KAAK,OAAS,MAG9DomC,EAAQpmC,KAAK,KAAO,GAC7B,CAGA,SAAS0mC,EAAepmC,EAAKwQ,EAAI61B,EAAcC,EAAKC,GAClD,IAAIC,EAAYh2B,GAAMA,EAAGi2B,QAEzB,GAAIJ,EAAc,CAChB,IAAIK,EAAiBF,GAAaA,EAAUG,kBAExCD,IAEF,QAAoB1mC,EAAK0mC,EAAgBpD,SAASsD,KAAMN,EAAKC,EAEjE,KAAO,CACLvmC,EAAI,GAAKsmC,EACTtmC,EAAI,GAAKumC,EAIT,IAAIM,EAAqBL,GAAaA,EAAUM,wBAE5CD,IACF7mC,EAAI,IAAM6mC,EAAmBE,WAC7B/mC,EAAI,IAAM6mC,EAAmBG,UAEjC,CAEAhnC,EAAI,GAAKA,EAAI,GAAKwQ,EAAG0S,WACrBljB,EAAI,GAAKA,EAAI,GAAKwQ,EAAG4S,WACvB,CAEA,IAAI6jB,EAEJ,WACE,SAASA,EAAmBC,EAAWtpD,EAAK+I,GAO1C,GANA3G,KAAKmnD,OAAQ,EACbnnD,KAAKonD,YAAc,CAAC,EAAG,EAAG,EAAG,GAC7BpnD,KAAKqnD,YAAa,EAClBrnD,KAAKsnD,YAAa,EAClBtnD,KAAKunD,WAAY,EAEblE,EAAA,MACF,OAAO,KAGT,IAAIvpD,EAAKwpD,SAASkE,cAAc,OAEhC1tD,EAAG2tD,eAAgB,EACnBznD,KAAKlG,GAAKA,EACV,IAAI02B,EAAKxwB,KAAK0nD,IAAM9pD,EAAIgpB,QACpBy/B,EAAermD,KAAK2nD,cAAgBhhD,GAAOA,EAAI0/C,aACnDD,EAAepmD,KAAKonD,YAAa52B,EAAI61B,EAAczoD,EAAIslC,WAAa,EAAGtlC,EAAIwlC,YAAc,GAErFijB,EACF/C,SAASsD,KAAKgB,YAAY9tD,GAE1BotD,EAAUU,YAAY9tD,GAGxBkG,KAAK6nD,WAAaX,EAIlB,IAAIY,EAAO9nD,KAEXlG,EAAGiuD,aAAe,WAEZD,EAAKT,aACPW,aAAaF,EAAKG,cAClBH,EAAKX,OAAQ,GAGfW,EAAKI,YAAa,CACpB,EAEApuD,EAAGk7B,YAAc,SAAUlE,GAGzB,GAFAA,EAAIA,GAAKq3B,OAAO96B,OAEXy6B,EAAKT,WAAY,CAOpB,IAAI92B,EAAUC,EAAGD,QACbm2B,EAAiBl2B,EAAGi2B,QAAQE,mBAChC,QAAeD,EAAgB51B,GAAG,GAClCP,EAAQ63B,SAAS,YAAat3B,EAChC,CACF,EAEAh3B,EAAGuuD,aAAe,WAEhBP,EAAKI,YAAa,EAEdJ,EAAKT,YACHS,EAAKX,OACPW,EAAKQ,UAAUR,EAAKS,WAG1B,CACF,CAgKA,OA1JAtB,EAAmB3mD,UAAUI,OAAS,SAAUuiD,GAG9C,IAAIiE,EAAYlnD,KAAK6nD,WACjB1nC,EAAW0jC,EAAiBqD,EAAW,YACvCsB,EAAWtB,EAAUprD,MAEC,aAAtB0sD,EAASroC,UAAwC,aAAbA,IACtCqoC,EAASroC,SAAW,YAItB,IAAImiC,EAAoBW,EAAajlD,IAAI,qBACzCskD,GAAqBtiD,KAAKyoD,iBAE1BzoD,KAAKlG,GAAG4uD,UAAYzF,EAAajlD,IAAI,cAAgB,EAGvD,EAEAipD,EAAmB3mD,UAAUwyB,KAAO,SAAUmwB,EAAc0F,GAC1DX,aAAahoD,KAAKioD,cAClBD,aAAahoD,KAAK4oD,kBAClB,IAAI9uD,EAAKkG,KAAKlG,GACVgC,EAAQhC,EAAGgC,MACX+sD,EAAa7oD,KAAKonD,YAEjBttD,EAAGgvD,UAGNhtD,EAAMgqD,QAAU3B,EAAW4B,EAAgB9C,GAAejjD,KAAKsnD,WAAYtnD,KAAKunD,WAC9EjC,EAAkBuD,EAAW,GAAIA,EAAW,IAAI,GAAS,iBAAkB,QAAqBF,GAAkB,KAAQ1F,EAAajlD,IAAI,iBAAmB,IAK7J,oBAAsBgC,KAAKqnD,WAAa,OAAS,QARpDvrD,EAAMitD,QAAU,OAWlB/oD,KAAKmnD,OAAQ,EACbnnD,KAAKsnD,YAAa,EAClBtnD,KAAKunD,WAAY,CACnB,EAEAN,EAAmB3mD,UAAU0oD,WAAa,SAAUC,EAASC,EAASjG,EAAcrnC,EAAa0oC,GAC/F,IAAIxqD,EAAKkG,KAAKlG,GAEd,GAAe,MAAXmvD,EAAJ,CAKA,IAAIE,EAAQ,GAMZ,IAJI,QAAS7E,IAAkD,SAAhCrB,EAAajlD,IAAI,aAA0BglD,EAAqBC,KAC7FkG,EAAQ9E,EAAcpB,EAAcrnC,EAAa0oC,KAG/C,QAAS2E,GACXnvD,EAAGgvD,UAAYG,EAAUE,OACpB,GAAIF,EAAS,CAElBnvD,EAAGgvD,UAAY,IAEV,QAAQG,KACXA,EAAU,CAACA,IAGb,IAAK,IAAI3tD,EAAI,EAAGA,EAAI2tD,EAAQztD,OAAQF,KAC9B,QAAM2tD,EAAQ3tD,KAAO2tD,EAAQ3tD,GAAG8tD,aAAetvD,GACjDA,EAAG8tD,YAAYqB,EAAQ3tD,IAK3B,GAAI6tD,GAASrvD,EAAGuvD,WAAW7tD,OAAQ,CAGjC,IAAI8tD,EAAUhG,SAASkE,cAAc,OACrC8B,EAAQR,UAAYK,EACpBrvD,EAAG8tD,YAAY0B,EACjB,CACF,CAhCA,MAFExvD,EAAGgvD,UAAY,EAmCnB,EAEA7B,EAAmB3mD,UAAUipD,aAAe,SAAU1G,GACpD7iD,KAAKqnD,WAAaxE,CACpB,EAEAoE,EAAmB3mD,UAAUkpD,QAAU,WACrC,IAAI1vD,EAAKkG,KAAKlG,GACd,MAAO,CAACA,EAAG2vD,YAAa3vD,EAAG4vD,aAC7B,EAEAzC,EAAmB3mD,UAAU4e,OAAS,SAAUonC,EAAKC,GACnD,IAAIsC,EAAa7oD,KAAKonD,YAGtB,GAFAhB,EAAeyC,EAAY7oD,KAAK0nD,IAAK1nD,KAAK2nD,cAAerB,EAAKC,GAEzC,MAAjBsC,EAAW,IAA+B,MAAjBA,EAAW,GAAY,CAClD,IAAIc,EAAU3pD,KAAKlG,GAAGgC,MAClB8tD,EAAatE,EAAkBuD,EAAW,GAAIA,EAAW,KAC7D,QAAKe,GAAY,SAAUv5B,GACzBs5B,EAAQt5B,EAAU,IAAMA,EAAU,EACpC,GACF,CACF,EAOA42B,EAAmB3mD,UAAUmoD,eAAiB,WAE5C,IAAIoB,EAAS7pD,KAAKonD,YAAY,GAE1B0C,EAAS9pD,KAAKonD,YAAY,GAC9BpnD,KAAKkf,OAAO2qC,EAAS7pD,KAAK0nD,IAAIxkB,WAAY4mB,EAAS9pD,KAAK0nD,IAAItkB,YAC9D,EAEA6jB,EAAmB3mD,UAAUuyB,KAAO,WAClC,IAAI/nB,EAAQ9K,KAERlE,EAAQkE,KAAKlG,GAAGgC,MACpBA,EAAMiuD,WAAa,SACnBjuD,EAAMC,QAAU,IAChBsnD,EAAA,yBAA6BvnD,EAAMkuD,WAAa,IAChDhqD,KAAKmnD,OAAQ,EACbnnD,KAAK4oD,iBAAmBqB,YAAW,WACjC,OAAOn/C,EAAMy8C,WAAY,CAC3B,GAAG,IACL,EAEAN,EAAmB3mD,UAAUgoD,UAAY,SAAU5X,IAC7C1wC,KAAKmnD,OAAWnnD,KAAKkoD,YAAcloD,KAAKqnD,aACtC3W,GACF1wC,KAAKuoD,WAAa7X,EAElB1wC,KAAKmnD,OAAQ,EACbnnD,KAAKioD,aAAegC,YAAW,QAAKjqD,KAAK6yB,KAAM7yB,MAAO0wC,IAEtD1wC,KAAK6yB,OAGX,EAEAo0B,EAAmB3mD,UAAU4pD,OAAS,WACpC,OAAOlqD,KAAKmnD,KACd,EAEAF,EAAmB3mD,UAAUmoB,QAAU,WACrCzoB,KAAKlG,GAAGsvD,WAAWe,YAAYnqD,KAAKlG,GACtC,EAEOmtD,CACT,CAtOA,GAwOA,I,mBChZImD,EAEJ,WACE,SAASA,EAAmBxsD,GAC1BoC,KAAKmnD,OAAQ,EACbnnD,KAAKonD,YAAc,CAAC,EAAG,EAAG,EAAG,GAC7BpnD,KAAKqnD,YAAa,EAClBrnD,KAAK0nD,IAAM9pD,EAAIgpB,QACf,EAAe5mB,KAAKonD,YAAapnD,KAAK0nD,IAAK9pD,EAAIslC,WAAa,EAAGtlC,EAAIwlC,YAAc,EACnF,CA0JA,OApJAgnB,EAAmB9pD,UAAUI,OAAS,SAAUuiD,GAC9C,IAAIX,EAAoBW,EAAajlD,IAAI,qBACzCskD,GAAqBtiD,KAAKyoD,gBAC5B,EAEA2B,EAAmB9pD,UAAUwyB,KAAO,WAC9B9yB,KAAKioD,cACPD,aAAahoD,KAAKioD,cAGpBjoD,KAAKlG,GAAGg5B,OACR9yB,KAAKmnD,OAAQ,CACf,EAMAiD,EAAmB9pD,UAAU0oD,WAAa,SAAUC,EAASoB,EAAoBpH,EAAcrnC,EAAa0oC,GAC1G,IAAIx5C,EAAQ9K,KAER,KAAgBipD,KAClB,QAA0H,IAGxHjpD,KAAKlG,IACPkG,KAAK0nD,IAAIvrD,OAAO6D,KAAKlG,IAGvB,IAAImvC,EAAiBga,EAAa9+B,SAAS,aAC3CnkB,KAAKlG,GAAK,IAAI,KAAO,CACnBgC,MAAO,CACLs0C,KAAMia,EAAmBC,eACzB/nB,KAAM0mB,EACNsB,WAAY,GACZ1uC,YAAa,EACbD,YAAaA,EACb4uC,gBAAiBvhB,EAAejrC,IAAI,mBACpC2tB,KAAMs3B,EAAajlD,IAAI,CAAC,YAAa,UACrCw7B,SAAS,QAA2BypB,EAAc,YAClDhiC,cAAe,MACfD,MAAO,QAET3G,EAAG4oC,EAAajlD,IAAI,OAEtB,KAAY,CAAC,kBAAmB,eAAgB,cAAe,aAAc,gBAAiB,kBAAkB,SAAUoU,GACxHtH,EAAMhR,GAAGgC,MAAMsW,GAAY6wC,EAAajlD,IAAIoU,EAC9C,IACA,KAAY,CAAC,iBAAkB,oBAAqB,sBAAsB,SAAUA,GAClFtH,EAAMhR,GAAGgC,MAAMsW,GAAY62B,EAAejrC,IAAIoU,IAAa,CAC7D,IAEApS,KAAK0nD,IAAInnD,IAAIP,KAAKlG,IAElB,IAAIguD,EAAO9nD,KACXA,KAAKlG,GAAG+sB,GAAG,aAAa,WAElBihC,EAAKT,aACPW,aAAaF,EAAKG,cAClBH,EAAKX,OAAQ,GAGfW,EAAKI,YAAa,CACpB,IACAloD,KAAKlG,GAAG+sB,GAAG,YAAY,WACjBihC,EAAKT,YACHS,EAAKX,OACPW,EAAKQ,UAAUR,EAAKS,YAIxBT,EAAKI,YAAa,CACpB,GACF,EAEAkC,EAAmB9pD,UAAUipD,aAAe,SAAU1G,GACpD7iD,KAAKqnD,WAAaxE,CACpB,EAEAuH,EAAmB9pD,UAAUkpD,QAAU,WACrC,IAAI1vD,EAAKkG,KAAKlG,GACV2wD,EAAWzqD,KAAKlG,GAAGo2B,kBAGnBw6B,EAAkBC,EAAoB7wD,EAAGgC,OAC7C,MAAO,CAAC2uD,EAAS5tC,MAAQ6tC,EAAgBtc,KAAOsc,EAAgBpc,MAAOmc,EAAS3tC,OAAS4tC,EAAgBrc,IAAMqc,EAAgBnc,OACjI,EAEA6b,EAAmB9pD,UAAU4e,OAAS,SAAUvC,EAAGC,GACjD,IAAI9iB,EAAKkG,KAAKlG,GAEd,GAAIA,EAAI,CACN,IAAI+uD,EAAa7oD,KAAKonD,YACtB,EAAeyB,EAAY7oD,KAAK0nD,IAAK/qC,EAAGC,GACxCD,EAAIksC,EAAW,GACfjsC,EAAIisC,EAAW,GACf,IAAI/sD,EAAQhC,EAAGgC,MACX+f,EAAc+uC,EAAa9uD,EAAM+f,aAAe,GAChD6uC,EAAkBC,EAAoB7uD,GAE1ChC,EAAG6iB,EAAIA,EAAId,EAAc6uC,EAAgBtc,KACzCt0C,EAAG8iB,EAAIA,EAAIf,EAAc6uC,EAAgBrc,IACzCv0C,EAAGmoD,YACL,CACF,EAOAmI,EAAmB9pD,UAAUmoD,eAAiB,WAE5C,IAAIoB,EAAS7pD,KAAKonD,YAAY,GAE1B0C,EAAS9pD,KAAKonD,YAAY,GAC9BpnD,KAAKkf,OAAO2qC,EAAS7pD,KAAK0nD,IAAIxkB,WAAY4mB,EAAS9pD,KAAK0nD,IAAItkB,YAC9D,EAEAgnB,EAAmB9pD,UAAUuyB,KAAO,WAC9B7yB,KAAKlG,IACPkG,KAAKlG,GAAG+4B,OAGV7yB,KAAKmnD,OAAQ,CACf,EAEAiD,EAAmB9pD,UAAUgoD,UAAY,SAAU5X,IAC7C1wC,KAAKmnD,OAAWnnD,KAAKkoD,YAAcloD,KAAKqnD,aACtC3W,GACF1wC,KAAKuoD,WAAa7X,EAElB1wC,KAAKmnD,OAAQ,EACbnnD,KAAKioD,aAAegC,WAAW,KAAYjqD,KAAK6yB,KAAM7yB,MAAO0wC,IAE7D1wC,KAAK6yB,OAGX,EAEAu3B,EAAmB9pD,UAAU4pD,OAAS,WACpC,OAAOlqD,KAAKmnD,KACd,EAEAiD,EAAmB9pD,UAAUmoB,QAAU,WACrCzoB,KAAK0nD,IAAIvrD,OAAO6D,KAAKlG,GACvB,EAEOswD,CACT,CAlKA,GAoKA,SAASQ,EAAax6C,GACpB,OAAO9S,KAAKN,IAAI,EAAGoT,EACrB,CAEA,SAASu6C,EAAoB7uD,GAC3B,IAAIkgB,EAAa4uC,EAAa9uD,EAAMkgB,YAAc,GAC9CE,EAAgB0uC,EAAa9uD,EAAMogB,eAAiB,GACpDC,EAAgByuC,EAAa9uD,EAAMqgB,eAAiB,GACxD,MAAO,CACLiyB,KAAMwc,EAAa5uC,EAAaE,GAChCoyB,MAAOsc,EAAa5uC,EAAaE,GACjCmyB,IAAKuc,EAAa5uC,EAAaG,GAC/BoyB,OAAQqc,EAAa5uC,EAAaG,GAEtC,CAEA,SAAS,EAAe6D,EAAKwQ,EAAI81B,EAAKC,GACpCvmC,EAAI,GAAKsmC,EACTtmC,EAAI,GAAKumC,EACTvmC,EAAI,GAAKA,EAAI,GAAKwQ,EAAG0S,WACrBljB,EAAI,GAAKA,EAAI,GAAKwQ,EAAG4S,WACvB,CAEA,Q,qJC1KIynB,GAAY,IAAIrhC,EAAA,EAAK,CACvBtM,MAAO,CACLP,GAAI,EACJC,GAAI,EACJC,MAAO,EACPC,OAAQ,KAIRguC,GAEJ,SAAUpxC,GAGR,SAASoxC,IACP,IAAIhgD,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAGhE,OADA8K,EAAM3M,KAAO2sD,EAAY3sD,KAClB2M,CACT,CAkrBA,OAzrBA,QAAUggD,EAAapxC,GASvBoxC,EAAYxqD,UAAUyqD,KAAO,SAAU9xD,EAAS2E,GAC9C,IAAIylD,EAAA,QAAazlD,EAAIotD,SAArB,CAIA,IAAI/H,EAAehqD,EAAQye,aAAa,WACpC8qC,EAAaxiD,KAAKirD,aAAc,QAAqBhI,EAAajlD,IAAI,eAC1EgC,KAAKkrD,gBAAiC,aAAf1I,EAA4B,IAAI,EAAmB5kD,GAAO,IAAI,EAAmBA,EAAIotD,SAAUptD,EAAK,CACzHyoD,aAAcpD,EAAajlD,IAAI,gBAAgB,IALjD,CAOF,EAEA8sD,EAAYxqD,UAAU6hB,OAAS,SAAU8gC,EAAchqD,EAAS2E,GAC9D,IAAIylD,EAAA,QAAazlD,EAAIotD,SAArB,CAKAhrD,KAAKqjB,MAAM+C,YACXpmB,KAAKmrD,cAAgBlI,EACrBjjD,KAAKorD,SAAWnyD,EAChB+G,KAAKuyB,KAAO30B,EAMZoC,KAAKqrD,mBAAqBpI,EAAajlD,IAAI,qBAC3C,IAAIstD,EAAiBtrD,KAAKkrD,gBAC1BI,EAAe5qD,OAAOuiD,GACtBqI,EAAe/B,aAAatG,EAAajlD,IAAI,cAE7CgC,KAAKurD,sBAELvrD,KAAKwrD,YAQoB,aAArBxrD,KAAKirD,aAA8BhI,EAAajlD,IAAI,uBACtD,SAAegC,KAAM,kBAAmB,GAAI,YAE5C,SAAMA,KAAM,kBA9Bd,CAgCF,EAEA8qD,EAAYxqD,UAAUirD,oBAAsB,WAC1C,IAAItI,EAAejjD,KAAKmrD,cACpBpxB,EAAYkpB,EAAajlD,IAAI,aACjCg8B,EAAA,EAAwB,cAAeh6B,KAAKuyB,MAAM,SAAK,SAAUZ,EAAab,EAAG1I,GAE7D,SAAd2R,IACEA,EAAUE,QAAQtI,IAAgB,EACpC3xB,KAAKyrD,SAAS36B,EAAG1I,GACQ,UAAhBuJ,GACT3xB,KAAK0rD,MAAMtjC,GAGjB,GAAGpoB,MACL,EAEA8qD,EAAYxqD,UAAUkrD,UAAY,WAChC,IAAIvI,EAAejjD,KAAKmrD,cACpBlyD,EAAU+G,KAAKorD,SACfxtD,EAAMoC,KAAKuyB,KACXwH,EAAYkpB,EAAajlD,IAAI,aAEjC,GAAmB,MAAfgC,KAAK2rD,QAAiC,MAAf3rD,KAAK4rD,QAGf,SAAd7xB,GAAsC,UAAdA,EAAuB,CAChD,IAAI8xB,EAAS7rD,KACbgoD,aAAahoD,KAAK8rD,uBAClB9rD,KAAK8rD,sBAAwB7B,YAAW,YAIrCrsD,EAAImuD,cAAgBF,EAAOG,gBAAgB/I,EAAchqD,EAAS2E,EAAK,CACtE+e,EAAGkvC,EAAOF,OACV/uC,EAAGivC,EAAOD,OACVlxB,eAAgBmxB,EAAOI,qBAE3B,GACF,CACF,EAmBAnB,EAAYxqD,UAAU0rD,gBAAkB,SAAU/I,EAAchqD,EAAS2E,EAAKwkB,GAC5E,GAAIA,EAAQ8pC,OAASlsD,KAAKmsD,MAAO9I,EAAA,QAAazlD,EAAIotD,SAAlD,CAIA,IAAI5iC,EAAiB4I,GAAmB5O,EAASxkB,GAEjDoC,KAAKosD,QAAU,GAEf,IAAI1xB,EAAiBtY,EAAQsY,eACzB2xB,EAAUC,GAAuBlqC,EAASnpB,EAAS2E,GAEvD,GAAIyuD,EAAS,CACX,IAAIjxC,EAAOixC,EAAQvyD,GAAGo2B,kBAAkBC,QACxC/U,EAAKgV,eAAei8B,EAAQvyD,GAAGu2B,WAE/BrwB,KAAKyrD,SAAS,CACZj+B,QAASpS,EAAKuB,EAAIvB,EAAKyB,MAAQ,EAC/B4Q,QAASrS,EAAKwB,EAAIxB,EAAK0B,OAAS,EAChC5K,OAAQm6C,EAAQvyD,GAChBqmB,SAAUiC,EAAQjC,SAGlBosC,gBAAiB,UAChBnkC,EACL,MAAO,GAAIhG,EAAQvc,SAAwB,MAAbuc,EAAQzF,GAA0B,MAAbyF,EAAQxF,EAAW,CACpE,IAAI9iB,EAAK+wD,GACT/wD,EAAG6iB,EAAIyF,EAAQzF,EACf7iB,EAAG8iB,EAAIwF,EAAQxF,EACf9iB,EAAG4G,UACH,OAAU5G,GAAI0yD,cAAgB,CAC5B7nD,KAAM,KACNiV,OAAQwI,EAAQvc,SAGlB7F,KAAKyrD,SAAS,CACZj+B,QAASpL,EAAQzF,EACjB8Q,QAASrL,EAAQxF,EACjB1K,OAAQpY,GACPsuB,EACL,MAAO,GAAIsS,EACT16B,KAAKyrD,SAAS,CACZj+B,QAASpL,EAAQzF,EACjB8Q,QAASrL,EAAQxF,EACjBuD,SAAUiC,EAAQjC,SAClBua,eAAgBA,EAChBtE,cAAehU,EAAQgU,eACtBhO,QACE,GAA2B,MAAvBhG,EAAQhR,YAAqB,CACtC,GAAIpR,KAAKysD,qBAAqBxJ,EAAchqD,EAAS2E,EAAKwkB,GACxD,OAGF,IAAIsqC,GAAY,EAAAn9B,EAAA,GAAoBnN,EAASnpB,GACzC0kB,EAAK+uC,EAAUj9B,MAAM,GACrB7R,EAAK8uC,EAAUj9B,MAAM,GAEf,MAAN9R,GAAoB,MAANC,GAChB5d,KAAKyrD,SAAS,CACZj+B,QAAS7P,EACT8P,QAAS7P,EACT1L,OAAQw6C,EAAU5yD,GAClBqmB,SAAUiC,EAAQjC,SAGlBosC,gBAAiB,UAChBnkC,EAEP,MAAwB,MAAbhG,EAAQzF,GAA0B,MAAbyF,EAAQxF,IAGtChf,EAAIwqB,eAAe,CACjBjqB,KAAM,oBACNwe,EAAGyF,EAAQzF,EACXC,EAAGwF,EAAQxF,IAGb5c,KAAKyrD,SAAS,CACZj+B,QAASpL,EAAQzF,EACjB8Q,QAASrL,EAAQxF,EACjBuD,SAAUiC,EAAQjC,SAClBjO,OAAQtU,EAAIgpB,QAAQ+lC,UAAUvqC,EAAQzF,EAAGyF,EAAQxF,GAAG1K,QACnDkW,GA/EL,CAiFF,EAEA0iC,EAAYxqD,UAAUssD,gBAAkB,SAAU3J,EAAchqD,EAAS2E,EAAKwkB,GAC5E,IAAIkpC,EAAiBtrD,KAAKkrD,iBAErBlrD,KAAKqrD,oBAAsBrrD,KAAKmrD,eACnCG,EAAehD,UAAUtoD,KAAKmrD,cAAcntD,IAAI,cAGlDgC,KAAK2rD,OAAS3rD,KAAK4rD,OAAS5rD,KAAKisD,oBAAsB,KAEnD7pC,EAAQ8pC,OAASlsD,KAAKmsD,KACxBnsD,KAAK0rD,MAAM16B,GAAmB5O,EAASxkB,GAE3C,EAKAktD,EAAYxqD,UAAUmsD,qBAAuB,SAAUxJ,EAAchqD,EAAS2E,EAAKwkB,GACjF,IAAIhR,EAAcgR,EAAQhR,YACtBvY,EAAYupB,EAAQvpB,UAEpBshC,EAAmBlhC,EAAQye,aAAa,eAAeyiB,iBAE3D,GAAmB,MAAf/oB,GAAoC,MAAbvY,GAAyC,MAApBshC,EAAhD,CAIA,IAAIx8B,EAAc1E,EAAQy2B,iBAAiBte,GAE3C,GAAKzT,EAAL,CAIA,IAAIE,EAAOF,EAAYG,UACnB+uD,EAAuBC,GAAkB,CAACjvD,EAAK8R,aAAa9W,GAAY8E,GAAcA,EAAYO,kBAAoB,CAAC,GAAGmnB,OAAQrlB,KAAKmrD,eAE3I,GAA4C,SAAxC0B,EAAqB7uD,IAAI,WAU7B,OANAJ,EAAIwqB,eAAe,CACjBjqB,KAAM,oBACNiT,YAAaA,EACbvY,UAAWA,EACXsnB,SAAUiC,EAAQjC,YAEb,CAfP,CANA,CAsBF,EAEA2qC,EAAYxqD,UAAUmrD,SAAW,SAAU36B,EAAG1I,GAC5C,IAAItuB,EAAKg3B,EAAE5e,OACP+wC,EAAejjD,KAAKmrD,cAExB,GAAKlI,EAAL,CAKAjjD,KAAK2rD,OAAS76B,EAAEtD,QAChBxtB,KAAK4rD,OAAS96B,EAAErD,QAChB,IAAIiN,EAAiB5J,EAAE4J,eAEvB,GAAIA,GAAkBA,EAAel/B,OACnCwE,KAAK+sD,iBAAiBryB,EAAgB5J,QACjC,GAAIh3B,EAAI,CAEb,IAAIkzD,EACAC,EAFJjtD,KAAKisD,oBAAsB,MAG3B,OAAoBnyD,GAAI,SAAUoY,GAEhC,OAAmC,OAA/B,OAAUA,GAAQrZ,WACpBm0D,EAAqB96C,GACd,GAI8B,OAAnC,OAAUA,GAAQs6C,eACpBS,EAAmB/6C,GACZ,QAFT,CAIF,IAAG,GAEC86C,EACFhtD,KAAKktD,uBAAuBp8B,EAAGk8B,EAAoB5kC,GAC1C6kC,EACTjtD,KAAKmtD,0BAA0Br8B,EAAGm8B,EAAkB7kC,GAEpDpoB,KAAK0rD,MAAMtjC,EAEf,MACEpoB,KAAKisD,oBAAsB,KAE3BjsD,KAAK0rD,MAAMtjC,EArCb,CAuCF,EAEA0iC,EAAYxqD,UAAU8sD,YAAc,SAAUnK,EAAcjpD,GAK1D,IAAIN,EAAQupD,EAAajlD,IAAI,aAC7BhE,GAAK,QAAKA,EAAIgG,MACdgoD,aAAahoD,KAAKqtD,aAClB3zD,EAAQ,EAAIsG,KAAKqtD,YAAcpD,WAAWjwD,EAAIN,GAASM,GACzD,EAEA8wD,EAAYxqD,UAAUysD,iBAAmB,SAAUryB,EAAgB5J,GACjE,IAAI73B,EAAU+G,KAAKorD,SACftxB,EAAqB95B,KAAKmrD,cAC1B17B,EAAQ,CAACqB,EAAEtD,QAASsD,EAAErD,SACtB6/B,EAAqBR,GAAkB,CAACh8B,EAAEsF,eAAgB0D,GAC1D0oB,EAAaxiD,KAAKirD,YAClBsC,EAAe,GACfC,GAAgB,QAAoB,UAAW,CACjDC,OAAQ,GACRC,UAAU,IAGRC,EAAsB,GACtBtD,EAAqB,IAAI,MAC7B,QAAK3vB,GAAgB,SAAUkzB,IAC7B,QAAKA,EAAa7vB,YAAY,SAAU8vB,GACtC,IAAI/1C,EAAY7e,EAAQye,aAAam2C,EAAS91C,QAAU,OAAQ81C,EAASj2C,WACrEk2C,EAAYD,EAAS3gD,MAEzB,GAAK4K,GAA0B,MAAbg2C,EAAlB,CAIA,IAAIC,EAAiB,KAAoCD,EAAWh2C,EAAUiX,KAAM91B,EAAS40D,EAAS5vB,kBAAmB4vB,EAAS7vB,eAC9HgwB,GAAoB,QAAoB,UAAW,CACrDC,OAAQF,EACRL,WAAW,QAAKK,GAChBG,YAAY,EACZT,OAAQ,KAEVD,EAAcC,OAAO1qD,KAAKirD,IAC1B,QAAKH,EAAS5vB,mBAAmB,SAAUwF,GACzC,IAAIzG,EAAS/jC,EAAQy2B,iBAAiB+T,EAAQryB,aAC1CvY,EAAY4qC,EAAQlG,gBACpB4wB,EAAWnxB,EAAO2G,cAAc9qC,GAEpC,KAAIs1D,EAASt1D,UAAY,GAAzB,CAIAs1D,EAASp2C,QAAU81C,EAAS91C,QAC5Bo2C,EAASv2C,UAAYi2C,EAASj2C,UAC9Bu2C,EAASloD,SAAW4nD,EAAS5nD,SAC7BkoD,EAAS7lC,OAASulC,EAASvlC,OAC3B6lC,EAASL,UAAYM,EAAA,GAA2Bt2C,EAAUiX,KAAM,CAC9D7hB,MAAO4gD,IAETK,EAASJ,eAAiBA,EAG1BI,EAASE,OAAShE,EAAmBiE,kBAAkB,QAAQ,QAAqBH,EAASxyC,OAAQ6mC,GACrG,IAAI+L,GAAsB,OAA6BvxB,EAAOwxB,cAAc31D,GAAW,EAAM,OACzF41D,EAAOF,EAAoBE,KAE/B,GAAIA,EAAM,CACR,IAAIC,EAAiB5B,GAAkB,CAAC9vB,GAASlD,GAAoB97B,IAAI,kBACzEgwD,EAAkBP,OAAO1qD,KAAK2rD,GAAiB,QAAO,CACpDA,eAAgBA,GACfD,GAAQA,EACb,CAEIF,EAAoBhsB,MACtBorB,EAAoB5qD,KAAKwrD,EAAoBhsB,MAG/CgrB,EAAaxqD,KAAKorD,EA3BlB,CA4BF,GA7CA,CA8CF,GACF,IAGAX,EAAcC,OAAO1rB,UACrB4rB,EAAoB5rB,UACpB,IAAI4sB,EAAe79B,EAAE3Q,SACjByuC,EAAYtB,EAAmBtvD,IAAI,SACnC6wD,GAAkB,QAAmBrB,EAAenD,EAAoB7H,EAAYoM,EAAW31D,EAAQ+E,IAAI,UAAWsvD,EAAmBtvD,IAAI,cACjJ6wD,GAAmBlB,EAAoBjU,QAAQmV,GAC/C,IAAIC,EAA4B,aAAftM,EAA4B,OAAS,QAClDuM,EAAgBpB,EAAoBjuC,KAAKovC,GAE7C9uD,KAAKotD,YAAYE,GAAoB,WAC/BttD,KAAKgvD,+BAA+Bt0B,EAAgB6yB,GACtDvtD,KAAKivD,gBAAgB3B,EAAoBqB,EAAcl/B,EAAM,GAAIA,EAAM,GAAIzvB,KAAKkrD,gBAAiBqC,GAEjGvtD,KAAKkvD,oBAAoB5B,EAAoByB,EAAexB,EAAcjwD,KAAK6xD,SAAW,GAAI1/B,EAAM,GAAIA,EAAM,GAAIk/B,EAAc,KAAMtE,EAE1I,GAGF,EAEAS,EAAYxqD,UAAU4sD,uBAAyB,SAAUp8B,EAAGs+B,EAAYhnC,GACtE,IAAInvB,EAAU+G,KAAKorD,SACfiE,GAAS,OAAUD,GAInBh+C,EAAci+C,EAAOj+C,YACrBzT,EAAc1E,EAAQy2B,iBAAiBte,GAEvCk+C,EAAYD,EAAOC,WAAa3xD,EAChC9E,EAAYw2D,EAAOx2D,UACnBwY,EAAWg+C,EAAOh+C,SAClBxT,EAAOyxD,EAAUxxD,QAAQuT,GACzBmxC,EAAaxiD,KAAKirD,YAClBsB,EAAkBz7B,EAAEy7B,gBACpBtJ,EAAe6J,GAAkB,CAACjvD,EAAK8R,aAAa9W,GAAYy2D,EAAW3xD,IAAgBA,EAAYO,kBAAoB,CAAC,GAAGmnB,OAAQrlB,KAAKmrD,cAAeoB,EAAkB,CAC/KpsC,SAAUosC,GACR,MACAgD,EAAiBtM,EAAajlD,IAAI,WAEtC,GAAsB,MAAlBuxD,GAA6C,SAAnBA,EAA9B,CAIA,IAAItsC,EAASqsC,EAAU3rB,cAAc9qC,EAAWwY,GAC5Cg5C,EAAqB,IAAI,KAG7BpnC,EAAOorC,OAAShE,EAAmBiE,kBAAkB,QAAQ,QAAqBrrC,EAAOtH,OAAQ6mC,GACjG,IAAI+L,GAAsB,OAA6Be,EAAUd,cAAc31D,GAAW,EAAOwY,IAC7Fu9C,EAAY3L,EAAajlD,IAAI,SAC7B0wD,EAAiBzL,EAAajlD,IAAI,kBAClCywD,EAAOF,EAAoBE,KAC3Be,EAAaf,GAAO,QAAmBC,GAAiB,QAAO,CACjEA,eAAgBA,GACfD,GAAQA,EAAMpE,EAAoB7H,EAAYoM,EAAW31D,EAAQ+E,IAAI,UAAWilD,EAAajlD,IAAI,cAAgBuwD,EAAoBhsB,KACpIktB,EAAc,QAAUH,EAAU3qD,KAAO,IAAM9L,EAEnDmH,KAAKotD,YAAYnK,GAAc,WAC7BjjD,KAAKkvD,oBAAoBjM,EAAcuM,EAAYvsC,EAAQwsC,EAAa3+B,EAAEtD,QAASsD,EAAErD,QAASqD,EAAE3Q,SAAU2Q,EAAE5e,OAAQm4C,EACtH,IAIAjiC,EAAe,CACbjqB,KAAM,UACNo/B,gBAAiB1kC,EACjBA,UAAWgF,EAAKwP,YAAYxU,GAC5BuY,YAAaA,EACb86C,KAAMlsD,KAAKmsD,KA3Bb,CA6BF,EAEArB,EAAYxqD,UAAU6sD,0BAA4B,SAAUr8B,EAAGh3B,EAAIsuB,GACjE,IAAIinC,GAAS,OAAUv1D,GACnB0yD,EAAgB6C,EAAO7C,cACvBllB,EAAaklB,EAAc5yC,QAAU,CAAC,EAE1C,IAAI,QAAS0tB,GAAa,CACxB,IAAI2hB,EAAU3hB,EACdA,EAAa,CACX2hB,QAASA,EAET5vB,UAAW4vB,EAEf,CAEA,IAAIyG,EAAsB,CAACpoB,GAEvBqoB,EAAO3vD,KAAKorD,SAAS1zC,aAAa23C,EAAOO,kBAAmBP,EAAO/4B,gBAEnEq5B,GACFD,EAAoB3sD,KAAK4sD,GAM3BD,EAAoB3sD,KAAK,CACvBs2B,UAAWiO,EAAW2hB,UAExB,IAAIsD,EAAkBz7B,EAAEy7B,gBACpBsD,EAAkB/C,GAAkB4C,EAAqB1vD,KAAKmrD,cAAeoB,EAAkB,CACjGpsC,SAAUosC,GACR,MACAuD,EAAcD,EAAgB7xD,IAAI,WAClCyxD,EAAcnyD,KAAK6xD,SAAW,GAE9B9E,EAAqB,IAAI,KAI7BrqD,KAAKotD,YAAYyC,GAAiB,WAGhC,IAAIE,GAAkB,QAAMF,EAAgB7xD,IAAI,oBAAsB,CAAC,GAEvEgC,KAAKkvD,oBAAoBW,EAAiBC,EAAaC,EAAiBN,EAAa3+B,EAAEtD,QAASsD,EAAErD,QAASqD,EAAE3Q,SAAUrmB,EAAIuwD,EAC7H,IAGAjiC,EAAe,CACbjqB,KAAM,UACN+tD,KAAMlsD,KAAKmsD,KAEf,EAEArB,EAAYxqD,UAAU4uD,oBAAsB,SAE5CjM,EAAc6M,EAAa7sC,EAAQwsC,EAAa9yC,EAAGC,EAAG+xC,EAAc70D,EAAIuwD,GAItE,GAFArqD,KAAKosD,QAAU,GAEVnJ,EAAajlD,IAAI,gBAAmBilD,EAAajlD,IAAI,QAA1D,CAIA,IAAIstD,EAAiBtrD,KAAKkrD,gBAC1BI,EAAe/B,aAAatG,EAAajlD,IAAI,cAC7C,IAAIq7B,EAAY4pB,EAAajlD,IAAI,aACjC2wD,EAAeA,GAAgB1L,EAAajlD,IAAI,YAChD,IAAIgyD,EAAOF,EAEPG,EAAYjwD,KAAKkwD,iBAAiB,CAACvzC,EAAGC,GAAIqG,EAAQggC,EAAajlD,IAAI,WAAYilD,EAAajlD,IAAI,gBAEhG2qD,EAAiBsH,EAAUt0C,MAE/B,GAAI0d,EACF,IAAI,QAASA,GAAY,CACvB,IAAI82B,EAASlN,EAAahqD,QAAQ+E,IAAI,UAClCoyD,GAAU,QAAQntC,GAAUA,EAAO,GAAKA,EACxCotC,EAAaD,GAAWA,EAAQnqD,UAAYmqD,EAAQnqD,SAASg0B,QAAQ,SAAW,EACpF+1B,EAAO32B,EAEHg3B,IACFL,GAAO,EAAAtf,EAAA,IAAW0f,EAAQtC,UAAWkC,EAAMG,IAG7CH,GAAO,EAAAM,EAAA,IAAUN,EAAM/sC,GAAQ,EACjC,MAAO,IAAI,QAAWoW,GAAY,CAChC,IAAIk3B,GAAW,SAAK,SAAUC,EAAUR,GAClCQ,IAAaxwD,KAAKosD,UACpBd,EAAetC,WAAWgH,EAAM3F,EAAoBpH,EAAc0F,EAAgBgG,GAElF3uD,KAAKivD,gBAAgBhM,EAAc0L,EAAchyC,EAAGC,EAAG0uC,EAAgBroC,EAAQnpB,GAEnF,GAAGkG,MACHA,KAAKosD,QAAUqD,EACfO,EAAO32B,EAAUpW,EAAQwsC,EAAac,EACxC,MACEP,EAAO32B,EAIXiyB,EAAetC,WAAWgH,EAAM3F,EAAoBpH,EAAc0F,EAAgBgG,GAClFrD,EAAex4B,KAAKmwB,EAAc0F,GAElC3oD,KAAKivD,gBAAgBhM,EAAc0L,EAAchyC,EAAGC,EAAG0uC,EAAgBroC,EAAQnpB,EA1C/E,CA2CF,EAEAgxD,EAAYxqD,UAAU4vD,iBAAmB,SAAUzgC,EAAOghC,EAAmBpO,EAASzmC,GACpF,MAAgB,SAAZymC,IAAsB,QAAQoO,GACzB,CACL90C,MAAOC,IAAqC,SAArB5b,KAAKirD,YAAyB,OAAS,UAI7D,QAAQwF,QAAb,EACS,CACL90C,MAAOC,GAAe60C,EAAkB90C,OAAS80C,EAAkB70C,YAGzE,EAEAkvC,EAAYxqD,UAAU2uD,gBAAkB,SAAUhM,EAAc0L,EAAchyC,EAC9EC,EACAqsC,EAAShmC,EAAQnpB,GACf,IAAImpC,EAAYjjC,KAAKuyB,KAAK2Q,WAEtBC,EAAanjC,KAAKuyB,KAAK6Q,YAE3BurB,EAAeA,GAAgB1L,EAAajlD,IAAI,YAChD,IAAI0yD,EAAczH,EAAQO,UACtBxoC,EAAQiiC,EAAajlD,IAAI,SACzB2yD,EAAS1N,EAAajlD,IAAI,iBAC1Bod,EAAOthB,GAAMA,EAAGo2B,kBAAkBC,QAWtC,GAVAr2B,GAAMshB,EAAKgV,eAAet2B,EAAGu2B,YAEzB,QAAWs+B,KAEbA,EAAeA,EAAa,CAAChyC,EAAGC,GAAIqG,EAAQgmC,EAAQnvD,GAAIshB,EAAM,CAC5Dw1C,SAAU,CAAC3tB,EAAWE,GACtButB,YAAaA,EAAY/qD,YAIzB,QAAQgpD,GACVhyC,GAAI,QAAagyC,EAAa,GAAI1rB,GAClCrmB,GAAI,QAAa+xC,EAAa,GAAIxrB,QAC7B,IAAI,QAASwrB,GAAe,CACjC,IAAIkC,EAAoBlC,EACxBkC,EAAkBh0C,MAAQ6zC,EAAY,GACtCG,EAAkB/zC,OAAS4zC,EAAY,GACvC,IAAI1O,GAAa,QAAc6O,EAAmB,CAChDh0C,MAAOomB,EACPnmB,OAAQqmB,IAEVxmB,EAAIqlC,EAAWrlC,EACfC,EAAIolC,EAAWplC,EACfoE,EAAQ,KAGR2vC,EAAS,IACX,MACK,IAAI,QAAShC,IAAiB70D,EAAI,CACnC,IAAIm+B,EAAM64B,GAAoBnC,EAAcvzC,EAAMs1C,EAAazN,EAAajlD,IAAI,gBAChF2e,EAAIsb,EAAI,GACRrb,EAAIqb,EAAI,EACV,KAAO,CACDA,EAAM84B,GAAqBp0C,EAAGC,EAAGqsC,EAAShmB,EAAWE,EAAYniB,EAAQ,KAAO,GAAI2vC,EAAS,KAAO,IACxGh0C,EAAIsb,EAAI,GACRrb,EAAIqb,EAAI,EACV,CAKF,GAHAjX,IAAUrE,GAAKq0C,GAAchwC,GAAS0vC,EAAY,GAAK,EAAc,UAAV1vC,EAAoB0vC,EAAY,GAAK,GAChGC,IAAW/zC,GAAKo0C,GAAcL,GAAUD,EAAY,GAAK,EAAe,WAAXC,EAAsBD,EAAY,GAAK,GAEhG1N,EAAqBC,GAAe,CAClChrB,EAAMg5B,GAAuBt0C,EAAGC,EAAGqsC,EAAShmB,EAAWE,GAC3DxmB,EAAIsb,EAAI,GACRrb,EAAIqb,EAAI,EACV,CAEAgxB,EAAQ/pC,OAAOvC,EAAGC,EACpB,EAIAkuC,EAAYxqD,UAAU0uD,+BAAiC,SAAUt0B,EAAgB6yB,GAC/E,IAAI2D,EAAelxD,KAAKisD,oBACpBkF,EAAmBnxD,KAAKoxD,cACxBC,IAAsBH,GAAgBA,EAAa11D,SAAWk/B,EAAel/B,OA6BjF,OA5BA61D,IAAqB,QAAKH,GAAc,SAAUI,EAAkBC,GAClE,IAAIC,EAAiBF,EAAiBvzB,YAAc,GAChD0zB,EAAmB/2B,EAAe62B,IAAkB,CAAC,EACrDG,EAAiBD,EAAiB1zB,YAAc,GACpDszB,EAAoBA,GAAqBG,EAAeh2D,SAAWk2D,EAAel2D,OAClF61D,IAAqB,QAAKG,GAAgB,SAAUG,EAAUC,GAC5D,IAAIC,EAAWH,EAAeE,IAAc,CAAC,EACzCE,EAAcH,EAAS1zB,mBAAqB,GAC5C8zB,EAAaF,EAAS5zB,mBAAqB,GAC/CozB,EAAoBA,GAAqBM,EAASzkD,QAAU2kD,EAAS3kD,OAASykD,EAAS1rD,WAAa4rD,EAAS5rD,UAAY0rD,EAASrpC,SAAWupC,EAASvpC,QAAUwpC,EAAYt2D,SAAWu2D,EAAWv2D,OAClM61D,IAAqB,QAAKS,GAAa,SAAUE,EAAazvD,GAC5D,IAAI0vD,EAAaF,EAAWxvD,GAC5B8uD,EAAoBA,GAAqBW,EAAY5gD,cAAgB6gD,EAAW7gD,aAAe4gD,EAAYn5D,YAAco5D,EAAWp5D,SACtI,IAEAs4D,IAAoB,QAAKQ,EAAS1zB,mBAAmB,SAAUwF,GAC7D,IAAIyuB,EAAYzuB,EAAQryB,YACpB+8C,EAAWZ,EAAa2E,GACxBC,EAAehB,EAAiBe,GAEhC/D,GAAYgE,GAAgBA,EAAat0D,OAASswD,EAAStwD,OAC7DwzD,GAAoB,EAExB,GACF,GACF,IACArxD,KAAKisD,oBAAsBvxB,EAC3B16B,KAAKoxD,cAAgB7D,IACZ8D,CACX,EAEAvG,EAAYxqD,UAAUorD,MAAQ,SAAUtjC,GAKtCpoB,KAAKisD,oBAAsB,KAC3B7jC,EAAe,CACbjqB,KAAM,UACN+tD,KAAMlsD,KAAKmsD,KAEf,EAEArB,EAAYxqD,UAAUmoB,QAAU,SAAUxvB,EAAS2E,IAC7CylD,EAAA,QAAazlD,EAAIotD,YAIrB,SAAMhrD,KAAM,mBAEZA,KAAKkrD,gBAAgBziC,UAErBuR,EAAA,EAA0B,cAAep8B,GAC3C,EAEAktD,EAAY3sD,KAAO,UACZ2sD,CACT,CA3rBA,CA2rBE,KAMF,SAASgC,GAAkBsF,EAAct4B,EAAoBu4B,GAE3D,IACIC,EADAr5D,EAAU6gC,EAAmB7gC,QAG7Bo5D,GACFC,EAAc,IAAI1iD,EAAA,EAAMyiD,EAAsBp5D,EAASA,GACvDq5D,EAAc,IAAI1iD,EAAA,EAAMkqB,EAAmBlgB,OAAQ04C,EAAar5D,IAEhEq5D,EAAcx4B,EAGhB,IAAK,IAAIx+B,EAAI82D,EAAa52D,OAAS,EAAGF,GAAK,EAAGA,IAAK,CACjD,IAAIgsC,EAAa8qB,EAAa92D,GAE1BgsC,IACEA,aAAsB13B,EAAA,IACxB03B,EAAaA,EAAWtpC,IAAI,WAAW,KAQrC,QAASspC,KACXA,EAAa,CACXjO,UAAWiO,IAIXA,IACFgrB,EAAc,IAAI1iD,EAAA,EAAM03B,EAAYgrB,EAAar5D,IAGvD,CAEA,OAAOq5D,CACT,CAEA,SAASthC,GAAmB5O,EAASxkB,GACnC,OAAOwkB,EAAQgG,iBAAkB,QAAKxqB,EAAIwqB,eAAgBxqB,EAC5D,CAEA,SAASmzD,GAAqBp0C,EAAGC,EAAGqsC,EAAShmB,EAAWE,EAAYovB,EAAMC,GACxE,IAAI5zD,EAAOqqD,EAAQO,UACf3sC,EAAQje,EAAK,GACbke,EAASle,EAAK,GAsBlB,OApBY,MAAR2zD,IAKE51C,EAAIE,EAAQ01C,EAAO,EAAItvB,EACzBtmB,GAAKE,EAAQ01C,EAEb51C,GAAK41C,GAIG,MAARC,IACE51C,EAAIE,EAAS01C,EAAOrvB,EACtBvmB,GAAKE,EAAS01C,EAEd51C,GAAK41C,GAIF,CAAC71C,EAAGC,EACb,CAEA,SAASq0C,GAAuBt0C,EAAGC,EAAGqsC,EAAShmB,EAAWE,GACxD,IAAIvkC,EAAOqqD,EAAQO,UACf3sC,EAAQje,EAAK,GACbke,EAASle,EAAK,GAKlB,OAJA+d,EAAIrf,KAAKH,IAAIwf,EAAIE,EAAOomB,GAAapmB,EACrCD,EAAItf,KAAKH,IAAIyf,EAAIE,EAAQqmB,GAAcrmB,EACvCH,EAAIrf,KAAKN,IAAI2f,EAAG,GAChBC,EAAItf,KAAKN,IAAI4f,EAAG,GACT,CAACD,EAAGC,EACb,CAEA,SAASk0C,GAAoB3wC,EAAU/E,EAAMs1C,EAAa70C,GACxD,IAAI42C,EAAW/B,EAAY,GACvBgC,EAAYhC,EAAY,GACxBz2C,EAAS3c,KAAKu6C,KAAKv6C,KAAKwnD,MAAQjpC,GAAe,EAC/Cc,EAAI,EACJC,EAAI,EACJ+1C,EAAYv3C,EAAKyB,MACjB+1C,EAAax3C,EAAK0B,OAEtB,OAAQqD,GACN,IAAK,SACHxD,EAAIvB,EAAKuB,EAAIg2C,EAAY,EAAIF,EAAW,EACxC71C,EAAIxB,EAAKwB,EAAIg2C,EAAa,EAAIF,EAAY,EAC1C,MAEF,IAAK,MACH/1C,EAAIvB,EAAKuB,EAAIg2C,EAAY,EAAIF,EAAW,EACxC71C,EAAIxB,EAAKwB,EAAI81C,EAAYz4C,EACzB,MAEF,IAAK,SACH0C,EAAIvB,EAAKuB,EAAIg2C,EAAY,EAAIF,EAAW,EACxC71C,EAAIxB,EAAKwB,EAAIg2C,EAAa34C,EAC1B,MAEF,IAAK,OACH0C,EAAIvB,EAAKuB,EAAI81C,EAAWx4C,EACxB2C,EAAIxB,EAAKwB,EAAIg2C,EAAa,EAAIF,EAAY,EAC1C,MAEF,IAAK,QACH/1C,EAAIvB,EAAKuB,EAAIg2C,EAAY14C,EACzB2C,EAAIxB,EAAKwB,EAAIg2C,EAAa,EAAIF,EAAY,EAG9C,MAAO,CAAC/1C,EAAGC,EACb,CAEA,SAASo0C,GAAchwC,GACrB,MAAiB,WAAVA,GAAgC,WAAVA,CAC/B,CAcA,SAASsrC,GAAuBlqC,EAASnpB,EAAS2E,GAChD,IAAIi1D,GAAiB,QAAezwC,GAASywC,eACzCjD,EAAoBiD,EAAeC,OAAO,GAE9C,GAAKlD,GAA2C,WAAtBA,EAA1B,CAIA,IAAImD,GAAc,QAAyB95D,EAAS22D,EAAmBiD,EAAe70D,IAAI4xD,GAAoB,CAC5GoD,YAAY,EACZC,WAAW,EACXC,YAAY,IAEV7tC,EAAQ0tC,EAAYn8C,OAAO,GAE/B,GAAKyO,EAAL,CAIA,IACIvrB,EADAq5D,EAAOv1D,EAAIw1D,wBAAwB/tC,GAWvC,OATA8tC,EAAK9vC,MAAMhnB,UAAS,SAAUg3D,GAC5B,IAAI7G,GAAgB,OAAU6G,GAAO7G,cAErC,GAAIA,GAAiBA,EAAc7nD,OAASyd,EAAQzd,KAElD,OADA7K,EAAKu5D,GACE,CAEX,IAEIv5D,EACK,CACL81D,kBAAmBA,EACnBt5B,eAAgBjR,EAAMiR,eACtBx8B,GAAIA,QAJR,CAbA,CAXA,CA+BF,CAEA,UC/4BO,SAAS,GAAQg0B,IACtB,OAAID,EAAA,GACJC,EAAUkR,uBAAuB,GACjClR,EAAUmR,sBAAsB,IAUhCnR,EAAUY,eAAe,CACvBvwB,KAAM,UACNkvB,MAAO,UACP3sB,OAAQ,2BACP,MACHotB,EAAUY,eAAe,CACvBvwB,KAAM,UACNkvB,MAAO,UACP3sB,OAAQ,2BACP,KACL,C,8MCxBI4yD,EAA0B,gBAE9B,SAASC,EAAoBnyB,EAAWohB,GACtC,IAAIgR,EAAgBpyB,EAAUzlB,OAAS,UACnC83C,EAAeryB,EAAUmO,UAAY,GACrCmkB,EAAiBtyB,EAAUkP,YAAc,MACzCqjB,EAAiBvyB,EAAUzlB,OAAS,UACpCi4C,EAAgBxyB,EAAUmO,UAAY,GACtCskB,EAAkBzyB,EAAUkP,YAAc,MAE9C,MAAmB,SAAfkS,EAEK,CAELsR,UAAW,cAAe,QAAWL,EAAe,IAAM,aAAc,QAAWD,GAAiB,iBAAkB,QAAWE,EAAiB,IAElJK,WAAY,cAAe,QAAWH,EAAgB,IAAM,aAAc,QAAWD,GAAkB,iBAAkB,QAAWE,EAAkB,KAGjJ,CACLC,UAAW,CACTvkB,SAAUkkB,EACV9nC,KAAM6nC,EACNljB,WAAYojB,GAEdK,WAAY,CACVxkB,SAAUqkB,EACVjoC,KAAMgoC,EACNrjB,WAAYujB,GAIpB,CAIA,IAAIG,EAAY,CAAC,EAAG,GAAI,GAAI,IACxBC,EAAiB,CAAC,GAAI,KAAM,OAAQ,UAEjC,SAASC,EAAoB/1D,EAAMyb,GAExC,OADAA,EAAOzb,KAAOA,EACPyb,CACT,CAEA,SAASu6C,EAAkB1F,GACzB,MAAqB,YAAdA,EAAKtwD,IACd,CAEA,SAASi2D,EAAW3F,GAClB,OAAO0F,EAAkB1F,GAAQ4F,EAAeC,CAClD,CAEA,SAASC,EAAiB9F,GACxB,GAAI0F,EAAkB1F,GAAO,CAC3B,IAAI+F,EAAa,EACbC,EAAchG,EAAKhB,OAAOjyD,OAC1Bk5D,EAAgBD,EAAc,GAAKA,EAAc,IAAMhG,EAAKf,SAYhE,OAXA,QAAKe,EAAKhB,QAAQ,SAAUkH,GAC1B,IAAIC,EAAcL,EAAiBI,GAG/BC,GAAeJ,IACjBA,EAAaI,KAAgBF,KAC5BE,GAEET,EAAkBQ,KAAcA,EAASjH,WAEhD,IACO8G,CACT,CAEA,OAAO,CACT,CAEA,SAASH,EAAa7lD,EAAKqmD,EAAUC,EAAsBC,GACzD,IAAIrH,EAAWmH,EAASnH,SACpBsH,EAAOC,EAAOV,EAAiBM,IAC/BK,EAAoB,GACpBC,EAAYN,EAASpH,QAAU,IACnC,SAAQ0H,IAAa,QAAQA,IAC7BA,EAAYA,GAAa,GACzB,IAAIvG,EAAYpgD,EAAIogD,UAEpB,GAAIiG,EAAS3G,YAAcU,EAAW,CACpCuG,EAAYA,EAAUxvD,QACtB,IAAIyvD,EAAW,CACbC,SAAU,MACVC,UAAW,QAGb,IAAI,QAAOF,EAAUxG,GAAY,CAC/B,IAAI2G,EAAe,IAAI,KAAoBH,EAASxG,GAAY,MAChEuG,EAAUhgD,MAAK,SAAUiS,EAAGC,GAC1B,OAAOkuC,EAAaC,SAASpuC,EAAEquC,UAAWpuC,EAAEouC,UAC9C,GACF,KACuB,eAAd7G,GACLuG,EAAUpzB,SAEhB,EAEA,QAAKozB,GAAW,SAAUR,EAAUvqD,GAClC,IAAIskD,EAAiBmG,EAASnG,eAC1BgH,EAAgBtB,EAAWO,EAAXP,CACpB1F,GAAiB,SAAO,QAAO,CAAC,EAAGlgD,GAAM,CACvCkgD,eAAgBA,IACblgD,EAAKmmD,EAAUvqD,EAAM,EAAI4qD,EAAKhF,KAAO,EAAG+E,GAC5B,MAAjBW,GAAyBR,EAAkBnyD,KAAK2yD,EAClD,IACA,IAAIA,EAAmC,aAAnBlnD,EAAIg0C,WAA4B0S,EAAkBx1C,KAAKs1C,EAAKW,UAAYC,EAAcV,EAAkBx1C,KAAK,IAAKguC,EAAWoH,EAAuBE,EAAKhF,MAE7K,GAAItC,EACF,OAAOgI,EAGT,IAAIG,GAAoB,QAAkBhB,EAAS5G,OAAQ,UAAWz/C,EAAI2hD,QACtE2D,EAAYP,EAAoBwB,EAAkBvmD,EAAIg0C,YAAYsR,UAEtE,MAAuB,aAAnBtlD,EAAIg0C,WACCsT,EAAuBtnD,EAAKqnD,EAAmB/B,GAAakB,EAAKW,SAAWD,EAE5EE,EAAc,eAAkB9B,EAAY,IAAMR,EAA0B,OAAS,QAAWuC,GAAqB,SAAWH,EAAeZ,EAE1J,CAEA,SAASR,EAAe9lD,EAAKqmD,EAAUC,EAAsBC,GAC3D,IAAIvS,EAAah0C,EAAIg0C,WACjBuT,EAASlB,EAASkB,OAClBC,EAAUnB,EAASmB,QACnBC,GAAYpB,EAASqB,WACrBvxD,EAAOkwD,EAASlwD,KAChBwrD,EAAS3hD,EAAI2hD,OAEbzB,EAAiBmG,EAASnG,gBAAkBlgD,EAAIkgD,gBAAkB,SAAUxhD,GAE9E,OADAA,GAAQ,QAAQA,GAASA,EAAQ,CAACA,IAC3B,QAAIA,GAAO,SAAUkD,EAAKhG,GAC/B,OAAO,QAAkBgG,GAAK,QAAQ+lD,GAAmBA,EAAgB/rD,GAAO+rD,EAAiBhG,EACnG,GACF,EAEA,IAAI4F,IAAUC,EAAd,CAIA,IAAII,EAAYH,EAAW,GAAKznD,EAAI67C,mBAAmBiE,kBAAkBuG,EAASqB,WAAYrB,EAASwB,aAAe,OAAQ7T,GAC1H8T,EAAeP,EAAS,IAAK,QAAkBpxD,EAAM,UAAWwrD,GAChEgG,EAAkBtB,EAAS0B,UAC3BC,EAAoBR,EAAU,GAAKtH,EAAemG,EAAS3nD,OAC3DupD,GAAmBR,IAAaF,EAEhCW,GAAsBT,GAAYF,EAElCtqD,EAAK8nD,EAAoBwB,EAAkBvS,GAC3CsR,EAAYroD,EAAGqoD,UACfC,EAAatoD,EAAGsoD,WAEpB,MAAsB,aAAfvR,GAA6ByT,EAAW,GAAKG,IAAcL,EAAS,GAAKD,EAAuBtnD,EAAK8nD,EAAcxC,KACvHkC,EAAU,GAAKW,EAAwBnoD,EAAKgoD,EAAmBC,EAAiBC,EAAoB3C,IAAe6B,GAAeK,EAAW,GAAKG,IAAcL,EAAS,GAAKa,EAAmBN,GAAeL,EAAUnC,KAAekC,EAAU,GAAKa,EAAoBL,EAAmBC,EAAiBC,EAAoB3C,IAAce,EAfrV,CAgBF,CAMO,SAASgC,EAAmBjC,EAAUxK,EAAoB7H,EAAYoM,EAAWuB,EAAQ4E,GAC9F,GAAKF,EAAL,CAIA,IAAIkC,EAAU3C,EAAWS,GACrBrmD,EAAM,CACR2hD,OAAQA,EACR3N,WAAYA,EACZoM,UAAWA,EACXvE,mBAAoBA,EACpBqE,eAAgBmG,EAASnG,gBAE3B,OAAOqI,EAAQvoD,EAAKqmD,EAAU,EAAGE,EAVjC,CAWF,CAEA,SAASE,EAAO+B,GACd,MAAO,CACLhH,KAAMgE,EAAUgD,GAChBrB,SAAU1B,EAAe+C,GAE7B,CAEA,SAASpB,EAAcqB,EAAgBC,GACrC,IAAIC,EAAW,iCACXC,EAAY,WAAaF,EAAS,SACtC,MAAO,eAAkBE,EAAY,IAAM9D,EAA0B,MAAS2D,EAAiBE,EAAW,QAC5G,CAEA,SAASP,EAAmBjyD,EAAM0yD,EAAev7D,GAC/C,IAAIw7D,EAAYD,EAAgB,kBAAoB,GACpD,MAAO,gBAAmBv7D,EAAQ,IAAMw7D,EAAY,MAAQ,QAAW3yD,GAAQ,SACjF,CAEA,SAASkyD,EAAoBU,EAAWC,EAAYd,EAAoB56D,GAEtE,IAAI27D,EAAaf,EAAqB,OAAS,OAC3CgB,EAAWF,EAAa,2BAA6BC,EAAa,GAEtE,OADAF,GAAY,QAAQA,GAAaA,EAAY,CAACA,GACvC,gBAAmBG,EAAW,IAAM57D,EAAQ,MACjD,QAAIy7D,GAAW,SAAUrqD,GACzB,OAAO,QAAWA,EACpB,IAAGwS,KAAK,gBAAkB,SAC5B,CAEA,SAASo2C,EAAuBtnD,EAAK7J,EAAM7I,GACzC,OAAO0S,EAAI67C,mBAAmBsN,kBAAkBhzD,EAAM7I,EACxD,CAEA,SAAS66D,EAAwBnoD,EAAKjD,EAAQisD,EAAYd,EAAoB56D,GAC5E,IAAI87D,EAAS,CAAC97D,GACV+7D,EAAcnB,EAAqB,GAAK,GAM5C,OALAc,GAAcI,EAAO70D,KAAK,CACxBy2B,QAAS,CAAC,EAAG,EAAG,EAAGq+B,GACnB72C,MAAO,UAGFxS,EAAI67C,mBAAmBsN,mBAAkB,QAAQpsD,GAAUA,EAAOmU,KAAK,MAAQnU,EAAQqsD,EAChG,CAEO,SAASE,EAAoC96B,EAAQnkC,GAC1D,IAAIiD,EAAQkhC,EAAOl/B,UAAUuS,cAAcxX,EAAW,SAClD8iB,EAAQ7f,EAAMkhC,EAAO+6B,gBACzB,OAAO,QAAqBp8C,EAC9B,CACO,SAASq8C,EAA2B3yC,EAAOm9B,GAChD,IAAIhpB,EAAUnU,EAAMrnB,IAAI,WACxB,OAAkB,MAAXw7B,EAAkBA,EACR,aAAfgpB,EAA4B,CAAC,EAAG,IAAM,EAC1C,CAOA,IAAIyV,EAEJ,WACE,SAASA,IACPj4D,KAAKsqD,eAAiB,CAAC,EAIvBtqD,KAAKk4D,kBAAmB,SAC1B,CA4DA,OA1DAD,EAA0B33D,UAAU63D,mBAAqB,WACvD,MAAO,aAAen4D,KAAKk4D,kBAC7B,EAEAD,EAA0B33D,UAAUguD,kBAAoB,SAAU4H,EAAYkC,EAAU5V,GACtF,IAAI6V,EAA0B,aAAf7V,EAA4BxiD,KAAKm4D,qBAAuB,KACnE9J,GAAS,QAAiB,CAC5B1yC,MAAOy8C,EACPj6D,KAAM+3D,EACN1T,WAAYA,EACZ6V,SAAUA,IAGZ,OAAI,QAAShK,GACJA,GAMPruD,KAAKsqD,eAAe+N,GAAYhK,EAAOvyD,MAChCuyD,EAAOpF,QAElB,EAkBAgP,EAA0B33D,UAAUq3D,kBAAoB,SAAUp1B,EAAMq1B,GACtE,IAAIU,EAAW,CAAC,GAEZ,QAAQV,IACV,QAAKA,GAAQ,SAAU9T,GACrB,OAAO,QAAOwU,EAAUxU,EAC1B,KAEA,QAAOwU,EAAUV,GAGnB,IAAIW,EAAYv4D,KAAKm4D,qBAGrB,OADAn4D,KAAKsqD,eAAeiO,GAAaD,EAC1B,IAAMC,EAAY,IAAMh2B,EAAO,GACxC,EAEO01B,CACT,CApEA,E,uUC1OIO,EAEJ,SAAU9+C,GAGR,SAAS8+C,EAAaC,GACpB,IAAI3tD,EAAQ4O,EAAOlI,KAAKxR,KAAMy4D,IAAYz4D,KAE1C8K,EAAM3M,KAAO,UAEb,IAAI6N,EAAclB,EAAM4tD,WAAW,eAkBnC,OAdK1sD,IACHA,EAAc,IAAI2lC,EAAA,EAAY,CAAC,KAG7B,QAAQ3lC,KACVA,EAAc,IAAI2lC,EAAA,EAAY,CAC5BlkC,YAAY,QAAIzB,GAAa,SAAUxM,GACrC,OAAO,QAASA,GAAQA,EAAK0N,MAAQ1N,CACvC,OAIJsL,EAAM6tD,aAAe3sD,EACrBlB,EAAMutC,QAAUvtC,EAAM4tD,WAAW,WAAa,CAAC,EAAG1sD,EAAYyB,WAAWjS,OAAS,GAC3EsP,CACT,CAsKA,OAhMA,QAAU0tD,EAAc9+C,GA4BxB8+C,EAAal4D,UAAUy7B,MAAQ,SAAU3rB,GAEvC,OAAW,MAAPA,EACKrT,KAGF,QAASqT,GAAOpQ,KAAK24D,aAAaC,WAAWxoD,GAClD9S,KAAKC,MAAM6S,EACf,EAEAooD,EAAal4D,UAAUgzC,QAAU,SAAUulB,GAEzC,OADAA,EAAO74D,KAAK+7B,MAAM88B,GACX,KAAoBA,EAAM74D,KAAKq4C,UAAkD,MAAtCr4C,KAAK24D,aAAalrD,WAAWorD,EACjF,EAQAL,EAAal4D,UAAUm4C,UAAY,SAAUroC,GAE3C,OADAA,EAAMpQ,KAAK84D,eAAe94D,KAAK+7B,MAAM3rB,IAC9B,KAAsBA,EAAKpQ,KAAKq4C,QACzC,EAOAmgB,EAAal4D,UAAUknB,MAAQ,SAAUpX,GAEvC,OADAA,EAAM9S,KAAKC,MAAM,KAAkB6S,EAAKpQ,KAAKq4C,UACtCr4C,KAAK8nB,oBAAoB1X,EAClC,EAEAooD,EAAal4D,UAAU20C,SAAW,WAChC,IAAID,EAAQ,GACRx2C,EAASwB,KAAKq4C,QACdwgB,EAAOr6D,EAAO,GAElB,MAAOq6D,GAAQr6D,EAAO,GACpBw2C,EAAMjyC,KAAK,CACTmK,MAAO2rD,IAETA,IAGF,OAAO7jB,CACT,EAEAwjB,EAAal4D,UAAU04C,cAAgB,SAAUhJ,GAGjD,EAMAwoB,EAAal4D,UAAU25C,YAAc,SAAUjzB,GAC7C,GAAY,MAARA,EAAJ,CAYA,IAPA,IAAI+xC,EAAqB/xC,EAAKM,eAC1B0xC,EAAiBh5D,KAAKi5D,sBAAwB,GAC9CC,EAAiBl5D,KAAKm5D,sBAAwB,GAE9CtxC,EAAU,EACVuxC,EAAiBp5D,KAAK24D,aAAalrD,WAAWjS,OAEzCyS,EAAM3Q,KAAKH,IAAIi8D,EAAgBL,EAAmBv9D,QAASqsB,EAAU5Z,IAAO4Z,EAAS,CAC5F,IAAIZ,EAAgB8xC,EAAmBlxC,GACvCmxC,EAAenxC,GAAWZ,EAC1BiyC,EAAejyC,GAAiBY,CAClC,CAKA,IAFA,IAAIwxC,EAAgB,EAEbxxC,EAAUuxC,IAAkBvxC,EAAS,CAC1C,MAAwC,MAAjCqxC,EAAeG,GACpBA,IAIFL,EAAej2D,KAAKs2D,GACpBH,EAAeG,GAAiBxxC,CAClC,CA1BA,MAFE7nB,KAAKi5D,sBAAwBj5D,KAAKm5D,sBAAwB,IA6B9D,EAEAX,EAAal4D,UAAUw4D,eAAiB,SAAUvrD,GAChD,IAAI+rD,EAAuBt5D,KAAKm5D,sBAGhC,OAAOG,GAAwB/rD,GAAW,GAAKA,EAAU+rD,EAAqB99D,OAAS89D,EAAqB/rD,GAAWA,CACzH,EAkBAirD,EAAal4D,UAAUwnB,oBAAsB,SAAUyxC,GACrD,IAAIC,EAAuBx5D,KAAKi5D,sBAGhC,OAAOO,GAAwBD,GAAc,GAAKA,EAAaC,EAAqBh+D,OAASg+D,EAAqBD,GAAcA,CAClI,EAMAf,EAAal4D,UAAU+iC,SAAW,SAAU6R,GAC1C,IAAKl1C,KAAKu8B,UAAW,CACnB,IAAItV,EAAgBjnB,KAAK8nB,oBAAoBotB,EAAKhoC,OAC9CusD,EAAWz5D,KAAK24D,aAAalrD,WAAWwZ,GAG5C,OAAmB,MAAZwyC,EAAmB,GAAKA,EAAW,EAC5C,CACF,EAEAjB,EAAal4D,UAAUzD,MAAQ,WAC7B,OAAOmD,KAAKq4C,QAAQ,GAAKr4C,KAAKq4C,QAAQ,GAAK,CAC7C,EAEAmgB,EAAal4D,UAAU+9C,oBAAsB,SAAUxgD,EAAMqB,GAC3Dc,KAAKo+C,YAAYvgD,EAAKgP,qBAAqB3N,GAC7C,EAOAs5D,EAAal4D,UAAUo5D,gBAAkB,SAAUxsD,GAEjD,OADAA,EAAQlN,KAAK84D,eAAe5rD,GACrBlN,KAAKq4C,QAAQ,IAAMnrC,GAASlN,KAAKq4C,QAAQ,IAAMnrC,CACxD,EAEAsrD,EAAal4D,UAAUkN,eAAiB,WACtC,OAAOxN,KAAK24D,YACd,EAEAH,EAAal4D,UAAUq5D,cAAgB,WAAa,EAEpDnB,EAAal4D,UAAU66C,eAAiB,WAAa,EAErDqd,EAAar6D,KAAO,UACbq6D,CACT,CAlMA,CAkMEoB,EAAA,GAEFA,EAAA,gBAAoBpB,GACpB,Q,gDCvLIqB,EAAS,SAAUzyC,EAAGzK,EAAGm9C,EAAIC,GAC/B,MAAOD,EAAKC,EAAI,CACd,IAAIC,EAAMF,EAAKC,IAAO,EAElB3yC,EAAE4yC,GAAK,GAAKr9C,EACdm9C,EAAKE,EAAM,EAEXD,EAAKC,CAET,CAEA,OAAOF,CACT,EAEIG,EAEJ,SAAUvgD,GAGR,SAASugD,EAAUC,GACjB,IAAIpvD,EAAQ4O,EAAOlI,KAAKxR,KAAMk6D,IAAal6D,KAG3C,OADA8K,EAAM3M,KAAO,OACN2M,CACT,CAwGA,OA/GA,QAAUmvD,EAAWvgD,GAarBugD,EAAU35D,UAAU+iC,SAAW,SAAU6R,GACvC,IAAIib,EAASnwD,KAAK04D,WAAW,UAC7B,OAAO,QAAOxjB,EAAKhoC,MAAO,MAAqB,SAAoC,QAAmBlN,KAAKm6D,kBAAoB,YAA6BhK,EAAQnwD,KAAK04D,WAAW,UACtL,EAEAuB,EAAU35D,UAAU85D,kBAAoB,SAAUllB,EAAM9qC,EAAK+rC,GAC3D,IAAIkkB,EAAQr6D,KAAK04D,WAAW,UACxB4B,EAAOt6D,KAAK04D,WAAW,UAC3B,OAAO,QAAcxjB,EAAM9qC,EAAK+rC,EAAgBmkB,EAAMD,EACxD,EAMAJ,EAAU35D,UAAU20C,SAAW,WAC7B,IAAIlF,EAAW/vC,KAAKu6D,UAChB/7D,EAASwB,KAAKq4C,QACdrD,EAAQ,GAEZ,IAAKjF,EACH,OAAOiF,EAGTA,EAAMjyC,KAAK,CACTmK,MAAO1O,EAAO,GACd8uC,MAAO,IAET,IAAI6iB,EAASnwD,KAAK04D,WAAW,UACzB8B,EAAaC,EAAiBz6D,KAAKm6D,cAAen6D,KAAK06D,gBAAiBvK,EAAQ3xD,GAMpF,OALAw2C,EAAQA,EAAM1vC,OAAOk1D,GACrBxlB,EAAMjyC,KAAK,CACTmK,MAAO1O,EAAO,GACd8uC,MAAO,IAEF0H,CACT,EAEAilB,EAAU35D,UAAU66C,eAAiB,SAAUx0C,GAC7C,IAAInI,EAASwB,KAAKq4C,QASlB,GAPI75C,EAAO,KAAOA,EAAO,KAEvBA,EAAO,IAAM,KACbA,EAAO,IAAM,MAIXA,EAAO,MAAQvB,KAAYuB,EAAO,KAAOvB,IAAU,CACrD,IAAI09D,EAAI,IAAIC,KACZp8D,EAAO,IAAM,IAAIo8D,KAAKD,EAAEE,cAAeF,EAAEG,WAAYH,EAAEI,WACvDv8D,EAAO,GAAKA,EAAO,GAAK,IAC1B,CAEAwB,KAAK25D,cAAchzD,EAAIqpC,YAAarpC,EAAIq0D,YAAar0D,EAAIs0D,YAC3D,EAEAhB,EAAU35D,UAAUq5D,cAAgB,SAAUuB,EAAeF,EAAaC,GACxEC,EAAgBA,GAAiB,GACjC,IAAI18D,EAASwB,KAAKq4C,QACdxf,EAAOr6B,EAAO,GAAKA,EAAO,GAC9BwB,KAAK06D,gBAAkB7hC,EAAOqiC,EAEX,MAAfF,GAAuBh7D,KAAK06D,gBAAkBM,IAChDh7D,KAAK06D,gBAAkBM,GAGN,MAAfC,GAAuBj7D,KAAK06D,gBAAkBO,IAChDj7D,KAAK06D,gBAAkBO,GAGzB,IAAIE,EAAoBC,EAAe5/D,OACnC4O,EAAM9M,KAAKH,IAAI08D,EAAOuB,EAAgBp7D,KAAK06D,gBAAiB,EAAGS,GAAoBA,EAAoB,GAE3Gn7D,KAAKu6D,UAAYa,EAAehxD,GAAK,GAGrCpK,KAAKm6D,cAAgBiB,EAAe99D,KAAKN,IAAIoN,EAAM,EAAG,IAAI,EAC5D,EAEA6vD,EAAU35D,UAAUy7B,MAAQ,SAAU3rB,GAEpC,OAAO,QAASA,GAAOA,GAAOirD,EAAA,GAAqBjrD,EACrD,EAEA6pD,EAAU35D,UAAUgzC,QAAU,SAAUljC,GACtC,OAAO,KAAoBpQ,KAAK+7B,MAAM3rB,GAAMpQ,KAAKq4C,QACnD,EAEA4hB,EAAU35D,UAAUm4C,UAAY,SAAUroC,GACxC,OAAO,KAAsBpQ,KAAK+7B,MAAM3rB,GAAMpQ,KAAKq4C,QACrD,EAEA4hB,EAAU35D,UAAUknB,MAAQ,SAAUpX,GACpC,OAAO,KAAkBA,EAAKpQ,KAAKq4C,QACrC,EAEA4hB,EAAU97D,KAAO,OACV87D,CACT,CAjHA,CAiHE3f,EAAA,GASE8gB,EAAiB,CACrB,CAAC,SAAU,MAAa,CAAC,SAAU,MAAa,CAAC,OAAQ,MAAW,CAAC,cAA0B,EAAX,MAAe,CAAC,WAAuB,GAAX,MAAgB,CAAC,MAAiB,IAAV,MAAgB,CAAC,YAAuB,IAAV,MAAgB,CAAC,OAAkB,EAAV,MAAc,CAAC,QAAmB,GAAV,MAAe,CAAC,UAAqB,GAAV,MAAe,CAAC,YAAa,KAAW,GAAI,CAAC,OAAQ,OAGvS,SAASE,EAAgBC,EAAMC,EAAQC,EAAQpB,GAC7C,IAAIqB,EAAQL,EAAA,GAAqBG,GAC7BG,EAAQN,EAAA,GAAqBI,GAE7BG,EAAS,SAAUL,GACrB,OAAO,QAAaG,EAAOH,EAAMlB,MAAW,QAAasB,EAAOJ,EAAMlB,EACxE,EAEIwB,EAAa,WACf,OAAOD,EAAO,OAChB,EAIIE,EAAc,WAChB,OAAOD,KAAgBD,EAAO,QAChC,EAEIG,EAAY,WACd,OAAOD,KAAiBF,EAAO,MACjC,EAGII,EAAa,WACf,OAAOD,KAAeH,EAAO,OAC/B,EAEIK,EAAe,WACjB,OAAOD,KAAgBJ,EAAO,SAChC,EAEIM,EAAe,WACjB,OAAOD,KAAkBL,EAAO,SAClC,EAEIO,EAAoB,WACtB,OAAOD,KAAkBN,EAAO,cAClC,EAEA,OAAQL,GACN,IAAK,OACH,OAAOM,IAET,IAAK,QACH,OAAOC,IAET,IAAK,MACH,OAAOC,IAET,IAAK,OACH,OAAOC,IAET,IAAK,SACH,OAAOC,IAET,IAAK,SACH,OAAOC,IAET,IAAK,cACH,OAAOC,IAEb,CAkDA,SAASC,EAAgBC,EAAgBC,GAEvC,OADAD,GAAkB,KACXA,EAAiB,GAAK,GAC3BA,EAAiB,IAAM,EACvBA,EAAiB,IAAM,EAAIA,EAAiB,IAAM,EAAI,CAC1D,CAEA,SAASE,EAAiBF,GACxB,IAAIG,EAAmB,GAAK,KAE5B,OADAH,GAAkBG,EACXH,EAAiB,EAAI,EAAIA,EAAiB,EAAI,EAAIA,EAAiB,EAAI,EAAI,CACpF,CAEA,SAASI,EAAgBJ,GAEvB,OADAA,GAAkB,KACXA,EAAiB,GAAK,GAAKA,EAAiB,EAAI,EAAIA,EAAiB,IAAM,EAAIA,EAAiB,EAAI,EAAI,CACjH,CAEA,SAASK,EAA6BL,EAAgBM,GAEpD,OADAN,GAAkBM,EAAY,KAAa,KACpCN,EAAiB,GAAK,GAAKA,EAAiB,GAAK,GAAKA,EAAiB,GAAK,GAAKA,EAAiB,GAAK,GAAKA,EAAiB,EAAI,EAAIA,EAAiB,EAAI,EAAI,CACvK,CAEA,SAASO,EAAwBP,GAC/B,OAAOhB,EAAA,GAAgBgB,GAAgB,EACzC,CAEA,SAASQ,EAAwBC,EAAMC,EAAU1C,GAC/C,IAAI2C,EAAU,IAAIpC,KAAKkC,GAEvB,QAAQ,QAAmBC,IACzB,IAAK,OACL,IAAK,QACHC,GAAQ,QAAgB3C,IAAQ,GAElC,IAAK,MACH2C,GAAQ,QAAe3C,IAAQ,GAEjC,IAAK,OACH2C,GAAQ,QAAgB3C,IAAQ,GAElC,IAAK,SACH2C,GAAQ,QAAkB3C,IAAQ,GAEpC,IAAK,SACH2C,GAAQ,QAAkB3C,IAAQ,GAClC2C,GAAQ,QAAuB3C,IAAQ,GAG3C,OAAO2C,EAAQC,SACjB,CAEA,SAASxC,EAAiByC,EAAgBb,EAAgBhC,EAAO77D,GAC/D,IAAI2+D,EAAY,IACZC,EAAY1sB,EAAA,GACZ2sB,EAAO,EAEX,SAASC,EAAevtB,EAAUwtB,EAAcC,EAAcC,EAAeC,EAAeC,EAAQ39C,GAClG,IAAI88C,EAAO,IAAIlC,KAAK2C,GAChBK,EAAWL,EACX5C,EAAImC,EAAKW,KAIb,MAAOG,EAAWJ,GAAgBI,GAAYp/D,EAAO,GACnDwhB,EAAIjd,KAAK,CACPmK,MAAO0wD,IAETjD,GAAK5qB,EACL+sB,EAAKY,GAAe/C,GACpBiD,EAAWd,EAAKG,UAIlBj9C,EAAIjd,KAAK,CACPmK,MAAO0wD,EACPC,QAAQ,GAEZ,CAEA,SAASC,EAAcf,EAAUgB,EAAgBC,GAC/C,IAAIC,EAAgB,GAChBC,GAAgBH,EAAeviE,OAEnC,IAAI8/D,GAAgB,QAAmByB,GAAWv+D,EAAO,GAAIA,EAAO,GAAI67D,GAAxE,CAII6D,IACFH,EAAiB,CAAC,CAEhB7wD,MAAO2vD,EAAwB,IAAIjC,KAAKp8D,EAAO,IAAKu+D,EAAU1C,IAC7D,CACDntD,MAAO1O,EAAO,MAIlB,IAAK,IAAIlD,EAAI,EAAGA,EAAIyiE,EAAeviE,OAAS,EAAGF,IAAK,CAClD,IAAIs8C,EAAYmmB,EAAeziE,GAAG4R,MAC9BixD,EAAUJ,EAAeziE,EAAI,GAAG4R,MAEpC,GAAI0qC,IAAcumB,EAAlB,CAIA,IAAIpuB,OAAW,EACXquB,OAAa,EACbC,OAAa,EACbV,GAAS,EAEb,OAAQZ,GACN,IAAK,OACHhtB,EAAWzyC,KAAKN,IAAI,EAAGM,KAAKC,MAAM8+D,EAAiB,KAAU,MAC7D+B,GAAa,QAAmB/D,GAChCgE,GAAa,QAAmBhE,GAChC,MAEF,IAAK,YACL,IAAK,UACL,IAAK,QACHtqB,EAAWwsB,EAAiBF,GAC5B+B,GAAa,QAAgB/D,GAC7BgE,GAAa,QAAgBhE,GAC7B,MAEF,IAAK,OAEL,IAAK,YACL,IAAK,MACHtqB,EAAWqsB,EAAgBC,EAAgB,IAE3C+B,GAAa,QAAe/D,GAC5BgE,GAAa,QAAehE,GAC5BsD,GAAS,EACT,MAEF,IAAK,WACL,IAAK,cACL,IAAK,OACH5tB,EAAW0sB,EAAgBJ,GAC3B+B,GAAa,QAAgB/D,GAC7BgE,GAAa,QAAgBhE,GAC7B,MAEF,IAAK,SACHtqB,EAAW2sB,EAA6BL,GAAgB,GACxD+B,GAAa,QAAkB/D,GAC/BgE,GAAa,QAAkBhE,GAC/B,MAEF,IAAK,SACHtqB,EAAW2sB,EAA6BL,GAAgB,GACxD+B,GAAa,QAAkB/D,GAC/BgE,GAAa,QAAkBhE,GAC/B,MAEF,IAAK,cACHtqB,EAAW6sB,EAAwBP,GACnC+B,GAAa,QAAuB/D,GACpCgE,GAAa,QAAuBhE,GACpC,MAGJiD,EAAevtB,EAAU6H,EAAWumB,EAASC,EAAYC,EAAYV,EAAQM,GAE5D,SAAblB,GAAuBiB,EAAWxiE,OAAS,GAAW,IAANF,GAElD0iE,EAAWtkB,QAAQ,CACjBxsC,MAAO8wD,EAAW,GAAG9wD,MAAQ6iC,GAjEjC,CAoEF,CAEA,IAASz0C,EAAI,EAAGA,EAAI2iE,EAAcziE,OAAQF,IACxC0iE,EAAWj7D,KAAKk7D,EAAc3iE,IAIhC,OAAO2iE,CA5FP,CA6FF,CAOA,IALA,IAAIK,EAAc,GACdC,EAAoB,GACpB3nB,EAAY,EACZ4nB,EAAqB,EAEhBljE,EAAI,EAAGA,EAAI8hE,EAAU5hE,QAAU6hE,IAASF,IAAa7hE,EAAG,CAC/D,IAAImjE,GAAkB,QAAmBrB,EAAU9hE,IAEnD,IAAK,QAAkB8hE,EAAU9hE,IAAjC,CAKAwiE,EAAcV,EAAU9hE,GAAIgjE,EAAYA,EAAY9iE,OAAS,IAAM,GAAI+iE,GACvE,IAAIG,EAAsBtB,EAAU9hE,EAAI,IAAK,QAAmB8hE,EAAU9hE,EAAI,IAAM,KAEpF,GAAImjE,IAAoBC,EAAqB,CAC3C,GAAIH,EAAkB/iE,OAAQ,CAC5BgjE,EAAqB5nB,EAErB2nB,EAAkBppD,MAAK,SAAUiS,EAAGC,GAClC,OAAOD,EAAEla,MAAQma,EAAEna,KACrB,IAGA,IAFA,IAAIyxD,EAA6B,GAExBv8D,EAAM,EAAGA,EAAMm8D,EAAkB/iE,SAAU4G,EAAK,CACvD,IAAI2pC,EAAYwyB,EAAkBn8D,GAAK8K,MAE3B,IAAR9K,GAAam8D,EAAkBn8D,EAAM,GAAG8K,QAAU6+B,IACpD4yB,EAA2B57D,KAAKw7D,EAAkBn8D,IAE9C2pC,GAAavtC,EAAO,IAAMutC,GAAavtC,EAAO,IAChDo4C,IAGN,CAEA,IAAIgoB,GAAiBpgE,EAAO,GAAKA,EAAO,IAAM69D,EAE9C,GAAIzlB,EAA4B,IAAhBgoB,GAAuBJ,EAAqBI,EAAgB,IAC1E,MAMF,GAFAN,EAAYv7D,KAAK47D,GAEb/nB,EAAYgoB,GAAiB1B,IAAmBE,EAAU9hE,GAC5D,KAEJ,CAGAijE,EAAoB,EACtB,CA1CA,CA2CF,CAQA,IAAIM,GAAsB,SAAO,QAAIP,GAAa,SAAUN,GAC1D,OAAO,QAAOA,GAAY,SAAU9oB,GAClC,OAAOA,EAAKhoC,OAAS1O,EAAO,IAAM02C,EAAKhoC,OAAS1O,EAAO,KAAO02C,EAAK2oB,MACrE,GACF,KAAI,SAAUG,GACZ,OAAOA,EAAWxiE,OAAS,CAC7B,IACIw5C,EAAQ,GACR8pB,EAAWD,EAAoBrjE,OAAS,EAE5C,IAASF,EAAI,EAAGA,EAAIujE,EAAoBrjE,SAAUF,EAGhD,IAFA,IAAI0iE,EAAaa,EAAoBvjE,GAE5BkxC,EAAI,EAAGA,EAAIwxB,EAAWxiE,SAAUgxC,EACvCwI,EAAMjyC,KAAK,CACTmK,MAAO8wD,EAAWxxB,GAAGt/B,MACrBogC,MAAOwxB,EAAWxjE,IAKxB05C,EAAM7/B,MAAK,SAAUiS,EAAGC,GACtB,OAAOD,EAAEla,MAAQma,EAAEna,KACrB,IAEA,IAAI8B,EAAS,GAEb,IAAS1T,EAAI,EAAGA,EAAI05C,EAAMx5C,SAAUF,EACxB,IAANA,GAAW05C,EAAM15C,GAAG4R,QAAU8nC,EAAM15C,EAAI,GAAG4R,OAC7C8B,EAAOjM,KAAKiyC,EAAM15C,IAItB,OAAO0T,CACT,CAEA4qD,EAAA,gBAAoBK,GACpB,QC1iBI8E,EAAanF,EAAA,YAEbvf,EAAqBC,EAAA,YACrB0kB,EAAmB3D,EAAA,GACnB4D,EAAY3hE,KAAK0f,MACjBkiD,EAAW5hE,KAAKu6C,KAChBsnB,EAAU7hE,KAAK8hE,IACfllB,EAAU58C,KAAKqzC,IAEf0uB,EAEJ,SAAU3lD,GAGR,SAAS2lD,IACP,IAAIv0D,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAOhE,OALA8K,EAAM3M,KAAO,MACb2M,EAAMowC,KAAO,GACbpwC,EAAMw0D,eAAiB,IAAIhlB,EAAA,EAE3BxvC,EAAMyvD,UAAY,EACXzvD,CACT,CAwHA,OAnIA,QAAUu0D,EAAU3lD,GAiBpB2lD,EAAS/+D,UAAU20C,SAAW,SAAUsqB,GACtC,IAAIC,EAAgBx/D,KAAKs/D,eACrB9gE,EAASwB,KAAKq4C,QACdonB,EAAiBD,EAAc/gE,YAC/Bu2C,EAAQqF,EAAmBpF,SAASzjC,KAAKxR,KAAMu/D,GACnD,OAAO,KAAWvqB,GAAO,SAAUE,GACjC,IAAI9kC,EAAM8kC,EAAKhoC,MACXwyD,EAASrE,EAAA,GAAiB8D,EAAQn/D,KAAKk7C,KAAM9qC,IAIjD,OAFAsvD,EAAStvD,IAAQ5R,EAAO,IAAMwB,KAAK2/D,QAAUC,EAAiBF,EAAQD,EAAe,IAAMC,EAC3FA,EAAStvD,IAAQ5R,EAAO,IAAMwB,KAAK6/D,QAAUD,EAAiBF,EAAQD,EAAe,IAAMC,EACpF,CACLxyD,MAAOwyD,EAEX,GAAG1/D,KACL,EAEAq/D,EAAS/+D,UAAUk4C,UAAY,SAAU9sC,EAAOC,GAC9C,IAAIuvC,EAAOhB,EAAQl6C,KAAKk7C,MAExBxvC,EAAQwuC,EAAQ58C,KAAKN,IAAI,EAAG0O,IAAUwvC,EACtCvvC,EAAMuuC,EAAQ58C,KAAKN,IAAI,EAAG2O,IAAQuvC,EAClCb,EAAmB7B,UAAUhnC,KAAKxR,KAAM0L,EAAOC,EACjD,EAMA0zD,EAAS/+D,UAAU7B,UAAY,WAC7B,IAAIy8C,EAAOl7C,KAAKk7C,KACZ18C,EAASugE,EAAWtgE,UAAU+S,KAAKxR,MACvCxB,EAAO,GAAK2gE,EAAQjkB,EAAM18C,EAAO,IACjCA,EAAO,GAAK2gE,EAAQjkB,EAAM18C,EAAO,IAEjC,IAAIghE,EAAgBx/D,KAAKs/D,eACrBG,EAAiBD,EAAc/gE,YAGnC,OAFAuB,KAAK2/D,UAAYnhE,EAAO,GAAKohE,EAAiBphE,EAAO,GAAIihE,EAAe,KACxEz/D,KAAK6/D,UAAYrhE,EAAO,GAAKohE,EAAiBphE,EAAO,GAAIihE,EAAe,KACjEjhE,CACT,EAEA6gE,EAAS/+D,UAAU89C,YAAc,SAAU5/C,GACzCwB,KAAKs/D,eAAelhB,YAAY5/C,GAEhC,IAAI08C,EAAOl7C,KAAKk7C,KAChB18C,EAAO,GAAK07C,EAAQ17C,EAAO,IAAM07C,EAAQgB,GACzC18C,EAAO,GAAK07C,EAAQ17C,EAAO,IAAM07C,EAAQgB,GACzC6jB,EAAW3gB,YAAY5sC,KAAKxR,KAAMxB,EACpC,EAEA6gE,EAAS/+D,UAAU+9C,oBAAsB,SAAUxgD,EAAMqB,GAGvDc,KAAKo+C,YAAYvgD,EAAKgP,qBAAqB3N,GAC7C,EAOAmgE,EAAS/+D,UAAUq5D,cAAgB,SAAUuB,GAC3CA,EAAgBA,GAAiB,GACjC,IAAI18D,EAASwB,KAAKq4C,QACdxf,EAAOr6B,EAAO,GAAKA,EAAO,GAE9B,KAAIq6B,IAAS57B,KAAY47B,GAAQ,GAAjC,CAIA,IAAIkX,EAAWsrB,EAAA,GAAoBxiC,GAC/BinC,EAAM5E,EAAgBriC,EAAOkX,EAE7B+vB,GAAO,KACT/vB,GAAY,IAId,OAAQjzC,MAAMizC,IAAazyC,KAAKuB,IAAIkxC,GAAY,GAAKzyC,KAAKuB,IAAIkxC,GAAY,EACxEA,GAAY,GAGd,IAAIgwB,EAAa,CAAC1E,EAAA,GAAiB6D,EAAS1gE,EAAO,GAAKuxC,GAAYA,GAAWsrB,EAAA,GAAiB4D,EAAUzgE,EAAO,GAAKuxC,GAAYA,IAClI/vC,KAAKu6D,UAAYxqB,EACjB/vC,KAAKggE,YAAcD,CAhBnB,CAiBF,EAEAV,EAAS/+D,UAAU66C,eAAiB,SAAUx0C,GAC5C0zC,EAAmBc,eAAe3pC,KAAKxR,KAAM2G,GAC7C3G,KAAK2/D,QAAUh5D,EAAIo0C,OACnB/6C,KAAK6/D,QAAUl5D,EAAIs0C,MACrB,EAEAokB,EAAS/+D,UAAUy7B,MAAQ,SAAU3rB,GACnC,OAAOA,CACT,EAEAivD,EAAS/+D,UAAUgzC,QAAU,SAAUljC,GAErC,OADAA,EAAM8pC,EAAQ9pC,GAAO8pC,EAAQl6C,KAAKk7C,MAC3B,KAAoB9qC,EAAKpQ,KAAKq4C,QACvC,EAEAgnB,EAAS/+D,UAAUm4C,UAAY,SAAUroC,GAEvC,OADAA,EAAM8pC,EAAQ9pC,GAAO8pC,EAAQl6C,KAAKk7C,MAC3B,KAAsB9qC,EAAKpQ,KAAKq4C,QACzC,EAEAgnB,EAAS/+D,UAAUknB,MAAQ,SAAUpX,GAEnC,OADAA,EAAM,KAAkBA,EAAKpQ,KAAKq4C,SAC3B8mB,EAAQn/D,KAAKk7C,KAAM9qC,EAC5B,EAEAivD,EAASlhE,KAAO,MACTkhE,CACT,CArIA,CAqIEzF,EAAA,GAEEqG,EAAQZ,EAAS/+D,UAIrB,SAASs/D,EAAiBxvD,EAAK8vD,GAC7B,OAAOlB,EAAiB5uD,EAAKirD,EAAA,GAAwB6E,GACvD,CALAD,EAAMjnB,cAAgBqB,EAAmBrB,cACzCinB,EAAM58B,SAAWgX,EAAmBhX,SAMpCu2B,EAAA,gBAAoByF,GACpB,Q,mBC/JIc,EAEJ,WACE,SAASA,EAAmB34C,EAAOnC,EACnCo6C,GACEz/D,KAAKogE,eAAe54C,EAAOnC,EAAOo6C,EACpC,CAyKA,OAlKAU,EAAmB7/D,UAAU8/D,eAAiB,SAAU54C,EAAOnC,EAC/DkzB,GACMA,EAAW,GAAKA,EAAW,KAC7BA,EAAa,CAACx7C,IAAKA,MAGrBiD,KAAKqgE,SAAW9nB,EAAW,GAC3Bv4C,KAAKsgE,SAAW/nB,EAAW,GAC3B,IAAIgoB,EAAYvgE,KAAKwgE,WAA4B,YAAfh5C,EAAMrpB,KACxC6B,KAAKygE,eAAgC,aAAfj5C,EAAMrpB,MAAuBknB,EAAMqpB,kBAAoBrpB,EAAMqpB,mBACnF,IAAIgyB,EAAc1gE,KAAK2gE,aAAet7C,EAAMrnB,IAAI,OAAO,IAEnD,QAAW0iE,GAEb1gE,KAAK4gE,aAAeC,EAAqBr5C,EAAOk5C,EAAY,CAC1DvjE,IAAKo7C,EAAW,GAChBv7C,IAAKu7C,EAAW,MAEO,YAAhBmoB,IACT1gE,KAAK4gE,aAAeC,EAAqBr5C,EAAOk5C,IAGlD,IAAII,EAAc9gE,KAAK+gE,aAAe17C,EAAMrnB,IAAI,OAAO,GAYvD,IAVI,QAAW8iE,GAEb9gE,KAAKghE,aAAeH,EAAqBr5C,EAAOs5C,EAAY,CAC1D3jE,IAAKo7C,EAAW,GAChBv7C,IAAKu7C,EAAW,MAEO,YAAhBuoB,IACT9gE,KAAKghE,aAAeH,EAAqBr5C,EAAOs5C,IAG9CP,EAIFvgE,KAAKihE,aAAe57C,EAAM0nB,gBAAgBvxC,WACrC,CACL,IAAIo0C,EAAcvqB,EAAMrnB,IAAI,eACxBkjE,GAAiB,QAAQtxB,GAAeA,EAAc,CAACA,GAAe,EAAGA,GAAe,GAE3D,mBAAtBsxB,EAAe,IAAiD,mBAAtBA,EAAe,GAKlElhE,KAAKmhE,kBAAoB,CAAC,EAAG,GAE7BnhE,KAAKmhE,kBAAoB,EAAC,QAAaD,EAAe,GAAI,IAAI,QAAaA,EAAe,GAAI,GAElG,CACF,EASAf,EAAmB7/D,UAAU8gE,UAAY,WAUvC,IAAIb,EAAYvgE,KAAKwgE,WACjBa,EAAUrhE,KAAKqgE,SACfiB,EAAUthE,KAAKsgE,SACfiB,EAAcvhE,KAAKihE,aACnBO,EAAmBxhE,KAAKmhE,kBACxBtoC,EAAQ0nC,EAAqD,KAAzCe,EAAUD,GAAW/jE,KAAKuB,IAAIwiE,GAGlDlkE,EAA4B,YAAtB6C,KAAK2gE,aAA6BU,EAAUrhE,KAAK4gE,aACvD5jE,EAA4B,YAAtBgD,KAAK+gE,aAA6BO,EAAUthE,KAAKghE,aAEvDS,EAAkB,MAAPtkE,EACXukE,EAAkB,MAAP1kE,EAEJ,MAAPG,IACFA,EAAMojE,EAAYgB,EAAc,EAAIxkE,IAAMskE,EAAUG,EAAiB,GAAK3oC,GAGjE,MAAP77B,IACFA,EAAMujE,EAAYgB,EAAcA,EAAc,EAAIxkE,IAAMukE,EAAUE,EAAiB,GAAK3oC,IAGlF,MAAP17B,IAAgBD,SAASC,MAAUA,EAAMJ,MAClC,MAAPC,IAAgBE,SAASF,MAAUA,EAAMD,KAC1C,IAAIw/B,GAAU,QAAMp/B,KAAQ,QAAMH,IAAQujE,IAAcgB,EAEpDvhE,KAAKygE,iBAEHtjE,EAAM,GAAKH,EAAM,IAAMykE,IACzBtkE,EAAM,GAIJA,EAAM,GAAKH,EAAM,IAAM0kE,IACzB1kE,EAAM,IAQV,IAAI2kE,EAAgB3hE,KAAK4hE,eACrBC,EAAgB7hE,KAAK8hE,eAczB,OAZqB,MAAjBH,IACFxkE,EAAMwkE,EACNF,GAAW,GAGQ,MAAjBI,IACF7kE,EAAM6kE,EACNH,GAAW,GAKN,CACLvkE,IAAKA,EACLH,IAAKA,EACLykE,SAAUA,EACVC,SAAUA,EACVnlC,QAASA,EAEb,EAEA4jC,EAAmB7/D,UAAUyhE,iBAAmB,SAAUC,EAAY5xD,GAKpEpQ,KAAKiiE,EAAkBD,IAAe5xD,CACxC,EAEA+vD,EAAmB7/D,UAAU4hE,oBAAsB,SAAUF,EAAY5xD,GACvE,IAAInV,EAAOknE,EAAwBH,GAOnChiE,KAAK/E,GAAQmV,CACf,EAEA+vD,EAAmB7/D,UAAU8hE,OAAS,WAEpCpiE,KAAKqiE,QAAS,CAChB,EAEOlC,CACT,CA9KA,GAiLIgC,EAA0B,CAC5BhlE,IAAK,iBACLH,IAAK,kBAEHilE,EAAoB,CACtB9kE,IAAK,WACLH,IAAK,YAkBA,SAASslE,EAAyB96C,EAAOnC,EAChDo6C,GAEE,IAAI8C,EAAgB/6C,EAAM+6C,cAE1B,OAAIA,IAIJA,EAAgB,IAAIpC,EAAmB34C,EAAOnC,EAAOo6C,GAErDj4C,EAAM+6C,cAAgBA,EACfA,EACT,CACO,SAAS1B,EAAqBr5C,EAAOg7C,GAC1C,OAAiB,MAAVA,EAAiB,MAAO,QAAMA,GAAUzlE,IAAMyqB,EAAMuU,MAAMymC,EACnE,CC1MO,SAASC,EAAej7C,EAAOnC,GACpC,IAAI6sB,EAAY1qB,EAAMrpB,KAClBukE,EAAkBJ,EAAyB96C,EAAOnC,EAAOmC,EAAM/oB,aAAa2iE,YAChF55C,EAAMm7C,SAASD,EAAgBnmC,SAC/B,IAAIp/B,EAAMulE,EAAgBvlE,IACtBH,EAAM0lE,EAAgB1lE,IAUtB/D,EAAUosB,EAAMpsB,QAEpB,GAAIA,GAAyB,SAAdi5C,EAEb,CACA,IAAI0wB,GAAkB,QAAuB,MAAO3pE,GAChD4pE,GAA8B,EAKlC,GAJA,KAAYD,GAAiB,SAAUjlE,GACrCklE,EAA8BA,GAA+BllE,EAAYU,gBAAkBgnB,EAAM0J,IACnG,IAEI8zC,EAA6B,CAG/B,IAAIC,GAAoB,QAAiBF,GAErCG,EAAgBC,EAAuB7lE,EAAKH,EAAKqoB,EAAOy9C,GAC5D3lE,EAAM4lE,EAAc5lE,IACpBH,EAAM+lE,EAAc/lE,GACtB,CACF,CAEA,MAAO,CACLwB,OAAQ,CAACrB,EAAKH,GAGd+9C,OAAQ2nB,EAAgBjB,SACxBxmB,OAAQynB,EAAgBhB,SAE5B,CAEA,SAASsB,EAAuB7lE,EAAKH,EAAKqoB,EAC1Cy9C,GAEE,IAAI5uC,EAAa7O,EAAM0J,KAAKtwB,YACxBwkE,EAAa/uC,EAAW,GAAKA,EAAW,GAExCgvC,GAAoB,QAAqBJ,EAAmBz9C,EAAM0J,MAEtE,QAA0B9kB,IAAtBi5D,EACF,MAAO,CACL/lE,IAAKA,EACLH,IAAKA,GAIT,IAAImmE,EAAclmE,IAClB,KAAYimE,GAAmB,SAAU1jE,GACvC2jE,EAAc7lE,KAAKH,IAAIqC,EAAKya,OAAQkpD,EACtC,IACA,IAAIC,GAAenmE,IACnB,KAAYimE,GAAmB,SAAU1jE,GACvC4jE,EAAc9lE,KAAKN,IAAIwC,EAAKya,OAASza,EAAKqd,MAAOumD,EACnD,IACAD,EAAc7lE,KAAKuB,IAAIskE,GACvBC,EAAc9lE,KAAKuB,IAAIukE,GACvB,IAAIC,EAAgBF,EAAcC,EAE9BE,EAAWtmE,EAAMG,EACjBomE,EAAuB,GAAKJ,EAAcC,GAAeH,EACzDO,EAAiBF,EAAWC,EAAuBD,EAGvD,OAFAtmE,GAAOwmE,GAAkBJ,EAAcC,GACvClmE,GAAOqmE,GAAkBL,EAAcE,GAChC,CACLlmE,IAAKA,EACLH,IAAKA,EAET,CAKO,SAASymE,EAAgBj8C,EAAOk8C,GACrC,IAAIr+C,EAAQq+C,EACRC,EAAalB,EAAej7C,EAAOnC,GACnC7mB,EAASmlE,EAAWnlE,OACpBwxC,EAAc3qB,EAAMrnB,IAAI,eAExBwpB,aAAiBo8C,IACnBp8C,EAAM0zB,KAAO71B,EAAMrnB,IAAI,YAGzB,IAAIk0C,EAAY1qB,EAAMrpB,KAClB4xC,EAAW1qB,EAAMrnB,IAAI,YACrB6lE,EAAiC,aAAd3xB,GAA0C,SAAdA,EACnD1qB,EAAMgxB,UAAUh6C,EAAO,GAAIA,EAAO,IAClCgpB,EAAM2zB,eAAe,CACnBnL,YAAaA,EACb+K,OAAQ4oB,EAAW5oB,OACnBE,OAAQ0oB,EAAW1oB,OACnB+f,YAAa6I,EAAmBx+C,EAAMrnB,IAAI,eAAiB,KAC3Di9D,YAAa4I,EAAmBx+C,EAAMrnB,IAAI,eAAiB,OAO7C,MAAZ+xC,GACFvoB,EAAM+zB,aAAe/zB,EAAM+zB,YAAYxL,EAE3C,CAKO,SAAS+zB,EAAmBz+C,EAAOpf,GAGxC,GAFAA,EAAWA,GAAYof,EAAMrnB,IAAI,QAE7BiI,EACF,OAAQA,GAEN,IAAK,WACH,OAAO,IAAI89D,EAAa,CACtB/3D,YAAaqZ,EAAM7X,eAAiB6X,EAAM7X,iBAAmB6X,EAAM0nB,gBACnEvuC,OAAQ,CAACvB,KAAWA,OAGxB,IAAK,OACH,OAAO,IAAI+mE,EAAU,CACnBC,OAAQ5+C,EAAMpsB,QAAQirE,iBACtB/T,OAAQ9qC,EAAMpsB,QAAQ+E,IAAI,YAG9B,QAEE,OAAO,IAAK47D,EAAA,WAAe3zD,IAAaq0C,EAAA,GAGhD,CAKO,SAAS6pB,EAAgBp1C,GAC9B,IAAIwpB,EAAaxpB,EAAKvH,MAAM/oB,YACxBtB,EAAMo7C,EAAW,GACjBv7C,EAAMu7C,EAAW,GACrB,QAASp7C,EAAM,GAAKH,EAAM,GAAKG,EAAM,GAAKH,EAAM,EAClD,CAUO,SAASonE,EAAmBr1C,GACjC,IAAIonB,EAAiBpnB,EAAKomB,gBAAgBn3C,IAAI,aAC1CqmE,EAAkC,aAAdt1C,EAAK5wB,KAAsB4wB,EAAKvH,MAAM/oB,YAAY,GAAK,KAE/E,MAAwB,SAApBswB,EAAKvH,MAAMrpB,KACN,SAAUmmE,GACf,OAAO,SAAUpvB,EAAM9qC,GACrB,OAAO2kB,EAAKvH,MAAM4yC,kBAAkBllB,EAAM9qC,EAAKk6D,EACjD,CACF,CAJO,CAILnuB,GACO,KAAgBA,GAClB,SAAUmuB,GACf,OAAO,SAAUpvB,GAGf,IAAIxvC,EAAQqpB,EAAKvH,MAAM6b,SAAS6R,GAC5B3S,EAAO+hC,EAAI1gC,QAAQ,UAAoB,MAATl+B,EAAgBA,EAAQ,IAC1D,OAAO68B,CACT,CACF,CARO,CAQL4T,GACO,KAAkBA,GACpB,SAAUn8C,GACf,OAAO,SAAUk7C,EAAM9qC,GAWrB,OAJyB,MAArBi6D,IACFj6D,EAAM8qC,EAAKhoC,MAAQm3D,GAGdrqE,EAAGuqE,EAAgBx1C,EAAMmmB,GAAO9qC,EAAmB,MAAd8qC,EAAK5H,MAAgB,CAC/DA,MAAO4H,EAAK5H,OACV,KACN,CACF,CAhBO,CAgBL6I,GAEK,SAAUjB,GACf,OAAOnmB,EAAKvH,MAAM6b,SAAS6R,EAC7B,CAEJ,CACO,SAASqvB,EAAgBx1C,EAAMmmB,GAIpC,MAAqB,aAAdnmB,EAAK5wB,KAAsB4wB,EAAKvH,MAAM6b,SAAS6R,GAAQA,EAAKhoC,KACrE,CAMO,SAASs3D,EAAuBz1C,GACrC,IAAIjX,EAAYiX,EAAK1J,MACjBmC,EAAQuH,EAAKvH,MAEjB,GAAK1P,EAAU9Z,IAAI,CAAC,YAAa,WAAYwpB,EAAM+U,UAAnD,CAIA,IAAIkoC,EACA7tB,EACA8tB,EAAsBl9C,EAAM/oB,YAE5B+oB,aAAiBu8C,EACnBntB,EAAYpvB,EAAM3qB,SAElB4nE,EAAuBj9C,EAAMytB,WAC7B2B,EAAY6tB,EAAqBjpE,QAGnC,IAEI4f,EAFAupD,EAAiB51C,EAAKomB,gBACtBgB,EAAiBiuB,EAAmBr1C,GAEpC8nB,EAAO,EAEPD,EAAY,KACdC,EAAOv5C,KAAKu6C,KAAKjB,EAAY,KAG/B,IAAK,IAAIt7C,EAAI,EAAGA,EAAIs7C,EAAWt7C,GAAKu7C,EAAM,CACxC,IAAI3B,EAAOuvB,EAAuBA,EAAqBnpE,GAAK,CAC1D4R,MAAOw3D,EAAoB,GAAKppE,GAE9BoK,EAAQywC,EAAejB,EAAM55C,GAC7BspE,EAAsBD,EAAeE,YAAYn/D,GACjDo/D,EAAaC,EAAeH,EAAqBD,EAAe3mE,IAAI,WAAa,GACrFod,EAAOA,EAAK4pD,MAAMF,GAAc1pD,EAAO0pD,CACzC,CAEA,OAAO1pD,CAhCP,CAiCF,CAEA,SAAS2pD,EAAeliC,EAAUthB,GAChC,IAAI0jD,EAAgB1jD,EAASjkB,KAAK6gB,GAAK,IACnC+mD,EAAcriC,EAAShmB,MACvBsoD,EAAetiC,EAAS/lB,OACxBsoD,EAAaF,EAAc5nE,KAAKuB,IAAIvB,KAAKuhB,IAAIomD,IAAkB3nE,KAAKuB,IAAIsmE,EAAe7nE,KAAKyhB,IAAIkmD,IAChGI,EAAcH,EAAc5nE,KAAKuB,IAAIvB,KAAKyhB,IAAIkmD,IAAkB3nE,KAAKuB,IAAIsmE,EAAe7nE,KAAKuhB,IAAIomD,IACjGK,EAAc,IAAI5/B,EAAA,EAAa7C,EAASlmB,EAAGkmB,EAASjmB,EAAGwoD,EAAYC,GACvE,OAAOC,CACT,CAOO,SAASC,GAA0BlgD,GACxC,IAAI0qB,EAAW1qB,EAAMrnB,IAAI,YACzB,OAAmB,MAAZ+xC,EAAmB,OAASA,CACrC,CAOO,SAASy1B,GAAoBz2C,GAClC,MAAqB,aAAdA,EAAK5wB,MAA2E,IAApDonE,GAA0Bx2C,EAAKomB,gBACpE,CACO,SAASswB,GAAwB5nE,EAAMka,GAE5C,IAAI2tD,EAAa,CAAC,EAalB,OATA,KAAY7nE,EAAK0M,iBAAiBwN,IAAU,SAAUolB,GAOpDuoC,GAAW,QAAoB7nE,EAAMs/B,KAAY,CACnD,IACO,KAAYuoC,EACrB,C,gIC7TO,SAAS10D,EAAO0qC,EAAW5jC,EAAWnR,GAC3CA,EAAMA,GAAO,CAAC,EACd,IAAIuwB,EAAOwkB,EAAUx9C,iBACjB6wB,EAAOjX,EAAUiX,KACjB/d,EAAS,CAAC,EACV2tC,EAAoB5vB,EAAK2vB,kBAAkB,GAC3CinB,EAAkB52C,EAAK5O,SACvB+9B,EAAeS,EAAoB,SAAWgnB,EAC9C5tD,EAAUgX,EAAK7vB,IACfkc,EAAO8b,EAAK8kB,UACZ4pB,EAAY,CAACxqD,EAAKuB,EAAGvB,EAAKuB,EAAIvB,EAAKyB,MAAOzB,EAAKwB,EAAGxB,EAAKwB,EAAIxB,EAAK0B,QAChE1S,EAAM,CACRgkC,KAAM,EACNE,MAAO,EACPD,IAAK,EACLE,OAAQ,EACRW,OAAQ,GAEN22B,EAAa/tD,EAAU9Z,IAAI,WAAa,EACxC8nE,EAAuB,MAAZ/tD,EAAkB,CAAC6tD,EAAU,GAAKC,EAAYD,EAAU,GAAKC,GAAc,CAACD,EAAU,GAAKC,EAAYD,EAAU,GAAKC,GAErI,GAAIlnB,EAAmB,CACrB,IAAIonB,EAAcpnB,EAAkBnnB,cAAcmnB,EAAkBlnB,YAAY,IAChFquC,EAAS17D,EAAI8kC,QAAU5xC,KAAKN,IAAIM,KAAKH,IAAI4oE,EAAaD,EAAS,IAAKA,EAAS,GAC/E,CAGA90D,EAAOmP,SAAW,CAAa,MAAZpI,EAAkB+tD,EAAS17D,EAAI8zC,IAAiB0nB,EAAU,GAAgB,MAAZ7tD,EAAkB+tD,EAAS17D,EAAI8zC,IAAiB0nB,EAAU,IAE3I50D,EAAOqQ,SAAW/jB,KAAK6gB,GAAK,GAAiB,MAAZpG,EAAkB,EAAI,GAEvD,IAAIiuD,EAAS,CACX33B,KAAM,EACNE,OAAQ,EACRH,MAAO,EACPE,MAAO,GAETt9B,EAAOknB,eAAiBlnB,EAAOs1B,cAAgBt1B,EAAOq1B,cAAgB2/B,EAAOL,GAC7E30D,EAAO8yB,YAAc6a,EAAoBmnB,EAAS17D,EAAIu7D,IAAoBG,EAAS17D,EAAI8kC,QAAU,EAE7Fp3B,EAAU9Z,IAAI,CAAC,WAAY,aAC7BgT,EAAOs1B,eAAiBt1B,EAAOs1B,eAG7B,KAAgB3/B,EAAIoxB,YAAajgB,EAAU9Z,IAAI,CAAC,YAAa,cAC/DgT,EAAOknB,gBAAkBlnB,EAAOknB,gBAIlC,IAAI2U,EAAc/0B,EAAU9Z,IAAI,CAAC,YAAa,WAI9C,OAHAgT,EAAO67B,YAA+B,QAAjBqR,GAA0BrR,EAAcA,EAE7D77B,EAAOyY,GAAK,EACLzY,CACT,CACO,SAASi1D,EAAoBtoE,GAClC,MAA+C,gBAAxCA,EAAYK,IAAI,mBACzB,CACO,SAASkoE,EAAevoE,GAC7B,IAAIwoE,EAAe,CACjBzvD,WAAY,KACZG,WAAY,MAcd,OAZA,KAAYsvD,GAAc,SAAUthE,EAAGhC,GACrC,IAAIoD,EAAWpD,EAAI+gC,QAAQ,SAAU,IACjC9rB,EAAYna,EAAYgZ,uBAAuB1Q,EAAU,MAAkB2Q,OAAO,GAQtFuvD,EAAatjE,GAAOiV,CACtB,IACOquD,CACT,C,qCClFIC,EAA2B,CAAC,EAE5BC,EAEJ,WACE,SAASA,IACPrmE,KAAKsmE,mBAAqB,EAC5B,CA6BA,OA3BAD,EAAwB/lE,UAAUi+C,OAAS,SAAUtlD,EAAS2E,GAC5D,IAAI2oE,EAAoB,GACxB,KAAYH,GAA0B,SAAUI,EAASroE,GACvD,IAAIiR,EAAOo3D,EAAQjoB,OAAOtlD,EAAS2E,GACnC2oE,EAAoBA,EAAkBjhE,OAAO8J,GAAQ,GACvD,IACApP,KAAKsmE,mBAAqBC,CAC5B,EAEAF,EAAwB/lE,UAAUI,OAAS,SAAUzH,EAAS2E,GAC5D,KAAYoC,KAAKsmE,oBAAoB,SAAUroE,GAC7CA,EAASyC,QAAUzC,EAASyC,OAAOzH,EAAS2E,EAC9C,GACF,EAEAyoE,EAAwB/lE,UAAUo/B,qBAAuB,WACvD,OAAO1/B,KAAKsmE,mBAAmB3gE,OACjC,EAEA0gE,EAAwB/1C,SAAW,SAAUnyB,EAAMsoE,GACjDL,EAAyBjoE,GAAQsoE,CACnC,EAEAJ,EAAwBroE,IAAM,SAAUG,GACtC,OAAOioE,EAAyBjoE,EAClC,EAEOkoE,CACT,CAjCA,GAmCA,Q,2dCxCIK,EAAW,GAEU,qBAAdC,YAETD,EAAWC,UAAUD,UAAY,IAGnC,IAAIE,EAAa,qBACjB,GACEC,SAAU,OAEVC,QAAS,SACTnrD,MAAO,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAChGorD,cAAe,CAAC,UAAW,UAAW,WACtCC,KAAM,CACJC,MAAO,CACLC,OAAQ,CAAC,CACPvrD,MAAOirD,EACPO,WAAY,CAAC,EAAG,GAChBC,WAAY,CAAC,EAAG,GAChBh4B,WAAY,EACZ/tB,SAAU/jB,KAAK6gB,GAAK,GACnB,CACDxC,MAAOirD,EACPt+B,OAAQ,SACR6+B,WAAY,CAAC,CAAC,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,IAC/BC,WAAY,CAAC,EAAG,GAChBh4B,WAAY,IACX,CACDzzB,MAAOirD,EACPO,WAAY,CAAC,EAAG,GAChBC,WAAY,CAAC,EAAG,GAChB/lD,UAAW/jB,KAAK6gB,GAAK,GACpB,CACDxC,MAAOirD,EACPO,WAAY,CAAC,CAAC,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,IAC/BC,WAAY,CAAC,EAAG,IACf,CACDzrD,MAAOirD,EACPO,WAAY,CAAC,CAAC,EAAG,GAAI,CAAC,EAAG,IACzBC,WAAY,CAAC,EAAG,EAAG,EAAG,GACtB/lD,SAAU/jB,KAAK6gB,GAAK,GACnB,CACDxC,MAAOirD,EACPt+B,OAAQ,WACR6+B,WAAY,CAAC,CAAC,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,IAC/BC,WAAY,CAAC,EAAG,GAChBh4B,WAAY,QAMlBhO,UAAW,CAITimC,WAAYX,EAASY,MAAM,QAAU,kBAAoB,aAEzD/3B,SAAU,GACVg4B,UAAW,SACXj3B,WAAY,UAKdk3B,UAAW,KACXC,eAAgB,CACdjuE,SAAU,IACVC,OAAQ,YAEVL,UAAW,OACXsuE,kBAAmB,IACnBxuC,wBAAyB,IACzBz+B,gBAAiB,aACjBsoD,sBAAuB,aACvB9wB,mBAAoB,IAEpBhX,qBAAsB,IACtBN,YAAa,IAMbgtD,oBAAqB,IAErBxX,QAAQ,G,UCrFNyX,GAA2B,UAKxB,SAASC,EAAsB5uE,EAAS21B,EAAUk5C,GACvD,IAAIC,EAAwBH,EAAyB5pE,IAAI4wB,GAEzD,IAAKm5C,EACH,OAAOD,EAGT,IAAIE,EAAkBD,EAAsB9uE,GAE5C,OAAK+uE,EAUEF,EAAkBxiE,OAAO0iE,GATvBF,CAUX,C,ICCIG,EACAC,EACAC,E,UACAC,EAAmB,cACnBC,EAAqB,EAoEzB,IAAIC,EAEJ,SAAU5uD,GAGR,SAAS4uD,IACP,OAAkB,OAAX5uD,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,IAC7D,CAsnBA,OA1nBA,QAAUsoE,EAAa5uD,GAMvB4uD,EAAYhoE,UAAUyqD,KAAO,SAAUnxC,EAAQ2uD,EAAatvE,EAASuvE,EAAOvE,EAAQwE,GAClFD,EAAQA,GAAS,CAAC,EAClBxoE,KAAK4Z,OAAS,KAEd5Z,KAAK0oE,OAAS,IAAI94D,EAAA,EAAM44D,GACxBxoE,KAAK2oE,QAAU,IAAI/4D,EAAA,EAAMq0D,GACzBjkE,KAAK4oE,eAAiBH,CACxB,EAEAH,EAAYhoE,UAAUuoE,UAAY,SAAUjvD,EAAQyE,EAAMyqD,GAMxD,IAAIC,EAAWC,EAAwB3qD,GAEvCre,KAAK4oE,eAAeC,UAAUjvD,EAAQkvD,EAAyBC,GAE/D/oE,KAAKipE,aAAa,KAAMF,EAC1B,EAUAT,EAAYhoE,UAAU4oE,YAAc,SAAU/qE,EAAMwI,GAClD,OAAO3G,KAAKipE,aAAa9qE,EAAM6qE,EAAwBriE,GACzD,EAEA2hE,EAAYhoE,UAAU2oE,aAAe,SAAU9qE,EAAMwI,GACnD,IAAIwiE,GAAgB,EAChBV,EAAgBzoE,KAAK4oE,eAEzB,IAAKzqE,GAAiB,aAATA,EAAqB,CAChC,IAAIirE,EAAaX,EAAcY,YAAqB,aAATlrE,GAEvC,EAIC6B,KAAK4Z,QAAmB,aAATzb,GAGlB6B,KAAKspE,cAELtpE,KAAKupE,aAAaH,EAAYziE,IAJ9BwhE,EAASnoE,KAAMopE,GAOjBD,GAAgB,CAClB,CAcA,GAZa,aAAThrE,GAAgC,UAATA,GACzB6B,KAAKspE,eAWFnrE,GAAiB,aAATA,GAAgC,aAATA,EAAqB,CACvD,IAAIqrE,EAAiBf,EAAcgB,kBAAkBzpE,MAEjDwpE,IACFL,GAAgB,EAEhBnpE,KAAKupE,aAAaC,EAAgB7iE,GAEtC,CAEA,IAAKxI,GAAiB,aAATA,GAAgC,UAATA,EAAkB,CACpD,IAAIurE,EAAejB,EAAckB,eAAe3pE,MAE5C0pE,EAAaluE,SACf,QAAKkuE,GAAc,SAAUE,GAC3BT,GAAgB,EAEhBnpE,KAAKupE,aAAaK,EAAajjE,EACjC,GAAG3G,KAEP,CAEA,OAAOmpE,CACT,EAEAb,EAAYhoE,UAAUupE,YAAc,SAAUjwD,GAC5C5Z,KAAKupE,aAAa3vD,EAAQ,KAC5B,EAEA0uD,EAAYhoE,UAAUipE,aAAe,SAAUO,EAAWnjE,GACxD,IAAIiT,EAAS5Z,KAAK4Z,OACdmwD,EAAgB/pE,KAAKgqE,eACrBC,EAAkBjqE,KAAKkqE,iBACvBC,EAAe,GACfC,GAAiB,UACjBC,EAA0B1jE,GAAOA,EAAI0jE,wBAiCzC,SAASC,EAAe17C,GACtB,IAAIk5C,EAAoBD,EAAsB7nE,KAAM4uB,EAAUvJ,EAAA,GAA2BykD,EAAUl7C,KAC/F27C,EAAcR,EAAc/rE,IAAI4wB,GAChC47C,EACHD,EAA6BF,GAA2BA,EAAwBrsE,IAAI4wB,GAAY,eAAiB,cAAnG,aACX67C,EAAgBplD,EAAA,GAA0BklD,EAAazC,EAAmB0C,GAE9EnlD,EAAA,GAAoColD,EAAe77C,EAAU+K,EAAA,GAI7D/f,EAAOgV,GAAY,KACnBm7C,EAAcvlE,IAAIoqB,EAAU,MAC5Bq7C,EAAgBzlE,IAAIoqB,EAAU,GAC9B,IAGI87C,EAHAC,EAAoB,GACpBC,EAAkB,GAClBC,EAAuB,GAG3B,QAAKJ,GAAe,SAAU12D,EAAY8D,GACxC,IAAIiX,EAAiB/a,EAAW+2D,SAC5BC,EAAgBh3D,EAAW+1D,UAE/B,GAAKiB,EAWE,CACL,IAAIC,EAA4B,WAAbp8C,EACfq8C,EAAsBtxC,EAAA,WAAwB/K,EAAU7a,EAAWm3D,QAAQC,SAAUH,GAGzF,IAAKC,EAgBH,OAIF,GAAiB,YAAbr8C,EAAwB,CAC1B,GAAI87C,EAQF,cAGFA,GAAgB,CAClB,CAEA,GAAI57C,GAAkBA,EAAes8C,cAAgBH,EACnDn8C,EAAenqB,KAAOoP,EAAWm3D,QAAQvmE,KAEzCmqB,EAAe+6C,YAAYkB,EAAe/qE,MAC1C8uB,EAAe0iB,cAAcu5B,GAAe,OACvC,CAEL,IAAIM,GAAW,QAAO,CACpB/0C,eAAgBze,GACf9D,EAAWm3D,SACdp8C,EAAiB,IAAIm8C,EAAoBF,EAAe/qE,KAAMA,KAAMqrE,IAEpE,QAAOv8C,EAAgBu8C,GAEnBt3D,EAAWu3D,WACbx8C,EAAey8C,kBAAmB,GAGpCz8C,EAAei8B,KAAKggB,EAAe/qE,KAAMA,MAKzC8uB,EAAe0iB,cAAc,MAAM,EACrC,CACF,MA3EM1iB,IAIFA,EAAe+6C,YAAY,CAAC,EAAG7pE,MAC/B8uB,EAAe0iB,cAAc,CAAC,GAAG,IAwEjC1iB,GACF67C,EAAkB5nE,KAAK+rB,EAAelV,QACtCgxD,EAAgB7nE,KAAK+rB,GACrB+7C,MAGAF,EAAkB5nE,UAAK,GACvB6nE,EAAgB7nE,UAAK,GAEzB,GAAG/C,MACH4Z,EAAOgV,GAAY+7C,EACnBZ,EAAcvlE,IAAIoqB,EAAUg8C,GAC5BX,EAAgBzlE,IAAIoqB,EAAUi8C,GAEb,WAAbj8C,GACFq5C,EAAsBjoE,KAE1B,EAtJA,QAAqBA,OAGrB,QAAK8pE,GAAW,SAAU0B,EAAiB58C,GAClB,MAAnB48C,IAIC7xC,EAAA,WAAwB/K,GAGlBA,IACTu7C,EAAapnE,KAAK6rB,GAClBw7C,EAAe5lE,IAAIoqB,GAAU,IAH7BhV,EAAOgV,GAAgC,MAApBhV,EAAOgV,IAAoB,QAAM48C,IAAmB,QAAM5xD,EAAOgV,GAAW48C,GAAiB,GAKpH,IAEInB,GAKFA,EAAwBjlE,MAAK,SAAUgL,EAAKq7D,GACtC9xC,EAAA,WAAwB8xC,KAA4BrB,EAAepsE,IAAIytE,KACzEtB,EAAapnE,KAAK0oE,GAClBrB,EAAe5lE,IAAIinE,GAAwB,GAE/C,IAGF9xC,EAAA,oBAAiCwwC,EAAcxwC,EAAA,yBAAuC2wC,EAAgBtqE,MA2HjGA,KAAK0rE,gBACRzD,EAAsBjoE,KAE1B,EAMAsoE,EAAYhoE,UAAUqrE,UAAY,WAChC,IAAI/xD,GAAS,QAAM5Z,KAAK4Z,QAyBxB,OAxBA,QAAKA,GAAQ,SAAUgyD,EAAeh9C,GACpC,GAAI+K,EAAA,WAAwB/K,GAAW,CAQrC,IAPA,IAAIvQ,EAAOgH,EAAA,GAA2BumD,GAIlCC,EAAUxtD,EAAK7iB,OACfswE,GAAc,EAETxwE,EAAIuwE,EAAU,EAAGvwE,GAAK,EAAGA,IAE5B+iB,EAAK/iB,KAAO+pB,EAAA,GAAgChH,EAAK/iB,IACnDwwE,GAAc,GAEdztD,EAAK/iB,GAAK,MACTwwE,GAAeD,KAIpBxtD,EAAK7iB,OAASqwE,EACdjyD,EAAOgV,GAAYvQ,CACrB,CACF,WACOzE,EAAOwuD,GACPxuD,CACT,EAEA0uD,EAAYhoE,UAAU+wC,SAAW,WAC/B,OAAOrxC,KAAK0oE,MACd,EAEAJ,EAAYhoE,UAAU4jE,eAAiB,WACrC,OAAOlkE,KAAK2oE,OACd,EAEAL,EAAYhoE,UAAUyrE,iBAAmB,SAAU3pD,GACjDpiB,KAAKgsE,SAAW5pD,CAClB,EAEAkmD,EAAYhoE,UAAUnH,iBAAmB,WACvC,OAAO6G,KAAKgsE,QACd,EAMA1D,EAAYhoE,UAAUoX,aAAe,SAAUkX,EAAUxkB,GACvD,IAAIgF,EAAOpP,KAAKgqE,eAAehsE,IAAI4wB,GAEnC,GAAIxf,EAAM,CACR,IAAIugD,EAAOvgD,EAAKhF,GAAO,GAEvB,GAAIulD,EACF,OAAOA,EACF,GAAW,MAAPvlD,EACT,IAAK,IAAI9O,EAAI,EAAGA,EAAI8T,EAAK5T,OAAQF,IAC/B,GAAI8T,EAAK9T,GACP,OAAO8T,EAAK9T,EAIpB,CACF,EAMAgtE,EAAYhoE,UAAU2rE,gBAAkB,SAAUC,GAChD,IAAIt9C,EAAWs9C,EAAUt9C,SAEzB,IAAKA,EACH,MAAO,GAGT,IAUI5f,EAVA6I,EAAQq0D,EAAUr0D,MAClBjL,EAAKs/D,EAAUt/D,GACfjI,EAAOunE,EAAUvnE,KAEjBwnE,EAAQnsE,KAAKgqE,eAAehsE,IAAI4wB,GAEpC,OAAKu9C,GAAUA,EAAM3wE,QAMR,MAATqc,GACF7I,EAAS,IACT,QAAKqW,EAAA,GAA2BxN,IAAQ,SAAUzN,GAChD+hE,EAAM/hE,IAAQ4E,EAAOjM,KAAKopE,EAAM/hE,GAClC,KAEA4E,EADe,MAANpC,EACAw/D,EAAgB,KAAMx/D,EAAIu/D,GAClB,MAARxnE,EACAynE,EAAgB,OAAQznE,EAAMwnE,IAG9B,QAAOA,GAAO,SAAUxc,GAC/B,QAASA,CACX,IAGK0c,EAAgBr9D,EAAQk9D,IArBtB,EAsBX,EAoBA5D,EAAYhoE,UAAUgsE,eAAiB,SAAUJ,GAC/C,IAAIr9C,EAAQq9C,EAAUr9C,MAClBD,EAAWs9C,EAAUt9C,SACrB29C,EAAYC,EAAa39C,GACzB7f,EAASu9D,EAAYvsE,KAAKisE,gBAAgBM,IAC5C,QAAOvsE,KAAKgqE,eAAehsE,IAAI4wB,IAAW,SAAU+gC,GACpD,QAASA,CACX,IACA,OAAO8c,EAASJ,EAAgBr9D,EAAQk9D,IAExC,SAASM,EAAaE,GACpB,IAAIC,EAAY/9C,EAAW,QACvBg+C,EAASh+C,EAAW,KACpBi+C,EAAWj+C,EAAW,OAC1B,OAAO89C,GAAsB,MAAhBA,EAAEC,IAAmC,MAAbD,EAAEE,IAAkC,MAAfF,EAAEG,GAMxD,KAN6E,CAC/Ej+C,SAAUA,EAEV/W,MAAO60D,EAAEC,GACT//D,GAAI8/D,EAAEE,GACNjoE,KAAM+nE,EAAEG,GAEZ,CAEA,SAASJ,EAAS16D,GAChB,OAAOm6D,EAAUt9D,QAAS,QAAOmD,EAAKm6D,EAAUt9D,QAAUmD,CAC5D,CACF,EAEAu2D,EAAYhoE,UAAUquB,cAAgB,SAAUC,EAAU50B,EAAI8F,GAC5D,IAAIiqE,EAAgB/pE,KAAKgqE,eAEzB,IAAI,QAAWp7C,GAAW,CACxB,IAAIk+C,EAAc9yE,EACd+yE,EAAan+C,EACjBm7C,EAAc3kE,MAAK,SAAU+mE,EAAO9jD,GAClC,IAAK,IAAI/sB,EAAI,EAAG6wE,GAAS7wE,EAAI6wE,EAAM3wE,OAAQF,IAAK,CAC9C,IAAIq0D,EAAOwc,EAAM7wE,GACjBq0D,GAAQod,EAAWv7D,KAAKs7D,EAAazkD,EAAesnC,EAAMA,EAAKr5B,eACjE,CACF,GACF,MAGE,IAFA,IAAI61C,GAAQ,QAASv9C,GAAYm7C,EAAc/rE,IAAI4wB,IAAY,QAASA,GAAY5uB,KAAKssE,eAAe19C,GAAY,KAE3GtzB,EAAI,EAAG6wE,GAAS7wE,EAAI6wE,EAAM3wE,OAAQF,IAAK,CAC9C,IAAIq0D,EAAOwc,EAAM7wE,GACjBq0D,GAAQ31D,EAAGwX,KAAK1R,EAAS6vD,EAAMA,EAAKr5B,eACtC,CAEJ,EAMAgyC,EAAYhoE,UAAU0sE,gBAAkB,SAAUroE,GAChD,IAAIsoE,EAAU5nD,EAAA,GAA8B1gB,EAAM,MAClD,OAAO,QAAO3E,KAAKgqE,eAAehsE,IAAI,WAAW,SAAUkvE,GACzD,QAASA,GAAwB,MAAXD,GAAmBC,EAAUvoE,OAASsoE,CAC9D,GACF,EAMA3E,EAAYhoE,UAAUovB,iBAAmB,SAAUte,GACjD,OAAOpR,KAAKgqE,eAAehsE,IAAI,UAAUoT,EAC3C,EAOAk3D,EAAYhoE,UAAU6sE,gBAAkB,SAAUhC,GAChD,OAAO,QAAOnrE,KAAKgqE,eAAehsE,IAAI,WAAW,SAAUkvE,GACzD,QAASA,GAAaA,EAAU/B,UAAYA,CAC9C,GACF,EAMA7C,EAAYhoE,UAAU8sE,UAAY,WAChC,OAAO,QAAOptE,KAAKgqE,eAAehsE,IAAI,WAAW,SAAUkvE,GACzD,QAASA,CACX,GACF,EAMA5E,EAAYhoE,UAAU+sE,eAAiB,WACrC,OAAOrtE,KAAKkqE,iBAAiBlsE,IAAI,SACnC,EAOAsqE,EAAYhoE,UAAU+gC,WAAa,SAAUrnC,EAAI8F,GAC/CooE,EAAwBloE,OACxB,QAAKA,KAAK0rE,gBAAgB,SAAU4B,GAClC,IAAItwC,EAASh9B,KAAKgqE,eAAehsE,IAAI,UAAUsvE,GAE/CtzE,EAAGwX,KAAK1R,EAASk9B,EAAQswC,EAC3B,GAAGttE,KACL,EASAsoE,EAAYhoE,UAAUitE,cAAgB,SAAUvzE,EAAI8F,IAClD,QAAKE,KAAKgqE,eAAehsE,IAAI,WAAW,SAAUg/B,GAChDA,GAAUhjC,EAAGwX,KAAK1R,EAASk9B,EAAQA,EAAO1G,eAC5C,GACF,EAOAgyC,EAAYhoE,UAAUktE,iBAAmB,SAAUrC,EAASnxE,EAAI8F,GAC9DooE,EAAwBloE,OACxB,QAAKA,KAAK0rE,gBAAgB,SAAU4B,GAClC,IAAItwC,EAASh9B,KAAKgqE,eAAehsE,IAAI,UAAUsvE,GAE3CtwC,EAAOmuC,UAAYA,GACrBnxE,EAAGwX,KAAK1R,EAASk9B,EAAQswC,EAE7B,GAAGttE,KACL,EAMAsoE,EAAYhoE,UAAUmtE,oBAAsB,SAAUtC,EAASnxE,EAAI8F,GACjE,OAAO,QAAKE,KAAKmtE,gBAAgBhC,GAAUnxE,EAAI8F,EACjD,EAEAwoE,EAAYhoE,UAAUotE,iBAAmB,SAAU/vE,GAEjD,OADAuqE,EAAwBloE,MACyC,MAA1DA,KAAK2tE,kBAAkB3vE,IAAIL,EAAY24B,eAChD,EAEAgyC,EAAYhoE,UAAUstE,wBAA0B,WAC9C,OAAQ5tE,KAAK0rE,gBAAkB,IAAI/lE,OACrC,EAEA2iE,EAAYhoE,UAAUutE,aAAe,SAAU7zE,EAAI8F,GACjDooE,EAAwBloE,MACxB,IAAI8tE,EAAmB,IACvB,QAAK9tE,KAAK0rE,gBAAgB,SAAUqC,GAClC,IAAI/wC,EAASh9B,KAAKgqE,eAAehsE,IAAI,UAAU+vE,GAE/C/zE,EAAGwX,KAAK1R,EAASk9B,EAAQ+wC,IAAiBD,EAAiB/qE,KAAKgrE,EAClE,GAAG/tE,MACHA,KAAK0rE,eAAiBoC,EACtB9tE,KAAK2tE,mBAAoB,QAAcG,EACzC,EAEAxF,EAAYhoE,UAAUgpE,YAAc,SAAUlnD,GAC5C6lD,EAAsBjoE,MACtB,IAAI+pE,EAAgB/pE,KAAKgqE,eACrBgE,EAAiB,GACrBjE,EAAc3kE,MAAK,SAAU6oE,EAAY5lD,GACnCsR,EAAA,WAAwBtR,IAC1B2lD,EAAejrE,KAAKslB,EAExB,IACAsR,EAAA,oBAAiCq0C,EAAgBr0C,EAAA,0BAAuC,SAAUtR,IAChG,QAAK0hD,EAAc/rE,IAAIqqB,IAAgB,SAAU6lD,IAC3CA,GAAgC,WAAlB7lD,GAA+B8lD,EAAkBD,EAAW9rD,IAC5E8rD,EAAU5E,aAEd,GACF,GACF,EAEAhB,EAAYt2D,cAAgB,WAC1Bi2D,EAAwB,SAAUhvE,GAChC,IAAIm1E,EAAgBn1E,EAAQyyE,eAAiB,IAC7C,QAAKzyE,EAAQ+wE,eAAehsE,IAAI,WAAW,SAAUg/B,GAEnDA,GAAUoxC,EAAcrrE,KAAKi6B,EAAO1G,eACtC,IACAr9B,EAAQ00E,mBAAoB,QAAcS,EAC5C,EAEAlG,EAA0B,SAAUjvE,GAG9B,CAKN,EAEAkvE,EAAW,SAAUlvE,EAASmwE,GAG5BnwE,EAAQ2gB,OAAS,CAAC,EAClB3gB,EAAQ2gB,OAAOwuD,GAAoBC,EAGnCpvE,EAAQ+wE,gBAAiB,QAAc,CACrChtC,OAAQ,KAEV/jC,EAAQixE,kBAAmB,UAG3B,IAAImE,EAAajF,EAAWpC,MAExB,QAASqH,IAAqC,MAAtBA,EAAWC,UACrCD,EAAWC,SAAU,GAGvBC,EAAWnF,EAAYnwE,EAAQyvE,OAAO9uD,SAEtC,QAAMwvD,EAAYoF,GAAe,GAEjCv1E,EAAQswE,aAAaH,EAAY,KACnC,CACF,CA7C4B,GA+CrBd,CACT,CA5nBA,CA4nBE14D,EAAA,GAEF,SAASu+D,EAAkBxwE,EAAaykB,GACtC,GAAIA,EAAS,CACX,IAAIvK,EAAQuK,EAAQhR,YAChBxE,EAAKwV,EAAQqsD,SACbC,EAAStsD,EAAQ7M,WACrB,OAAgB,MAATsC,GAAiBla,EAAY24B,iBAAmBze,GAAe,MAANjL,GAAcjP,EAAYiP,KAAOA,GAAgB,MAAV8hE,GAAkB/wE,EAAYgH,OAAS+pE,CAChJ,CACF,CAEA,SAASH,EAAW30D,EAAQ4uD,GAG1B,IAAImG,EAAqB/0D,EAAO+B,QAAU/B,EAAOg1D,YACjD,QAAKpG,GAAO,SAAUqG,EAAWlqE,GAClB,eAATA,GAAyBgqE,GAMxBh1C,EAAA,WAAwBh1B,KACF,kBAAdkqE,EACTj1D,EAAOjV,GAASiV,EAAOjV,IAA2B,QAAMiV,EAAOjV,GAAOkqE,GAAW,IAAlD,QAAMA,GAEjB,MAAhBj1D,EAAOjV,KACTiV,EAAOjV,GAAQkqE,GAIvB,GACF,CAEA,SAASzC,EAAgBnxE,EAAM6zE,EAAU3C,GAGvC,IAAI,QAAQ2C,GAAW,CACrB,IAAIC,GAAW,UAOf,OANA,QAAKD,GAAU,SAAUE,GACvB,GAAoB,MAAhBA,EAAsB,CACxB,IAAIC,EAAS5pD,EAAA,GAA8B2pD,EAAc,MAC/C,MAAVC,GAAkBF,EAASvqE,IAAIwqE,GAAc,EAC/C,CACF,KACO,QAAO7C,GAAO,SAAUxc,GAC7B,OAAOA,GAAQof,EAAS/wE,IAAI2xD,EAAK10D,GACnC,GACF,CACE,IAAIi0E,EAAW7pD,EAAA,GAA8BypD,EAAU,MACvD,OAAO,QAAO3C,GAAO,SAAUxc,GAC7B,OAAOA,GAAoB,MAAZuf,GAAoBvf,EAAK10D,KAAUi0E,CACpD,GAEJ,CAEA,SAAS7C,EAAgB4B,EAAY/B,GAGnC,OAAOA,EAAUnmE,eAAe,YAAa,QAAOkoE,GAAY,SAAUte,GACxE,OAAOA,GAAQA,EAAKwb,UAAYe,EAAUf,OAC5C,IAAK8C,CACP,CAEA,SAASjF,EAAwB3qD,GAC/B,IAAIgsD,GAA0B,UAQ9B,OAPAhsD,IAAQ,QAAKgH,EAAA,GAA2BhH,EAAK8wD,eAAe,SAAUvgD,GAKpEy7C,EAAwB7lE,IAAIoqB,GAAU,EACxC,IACO,CACLy7C,wBAAyBA,EAE7B,EAEA,QAAM/B,EAAa,KACnB,QChzBI8G,EAAmB,CAAC,SAAU,QAAS,WAAY,YAAa,sBAAuB,iBAAkB,QAAS,aAAc,KAAM,MAAO,aAAc,sBAC/J,YAEA,QAAS,qBAELC,EAEJ,WACE,SAASA,EAAaC,GACpB,KAAYF,GAAkB,SAAUz9D,GACtC3R,KAAK2R,GAAc,KAAY29D,EAAW39D,GAAa29D,EACzD,GAAGtvE,KACL,CAEA,OAAOqvE,CACT,CARA,GAUA,I,UCbIE,EAAY,mBAQZC,EAEJ,WASE,SAASA,EAAc5xE,GACrBoC,KAAKyvE,iBAAmB,GACxBzvE,KAAK0vE,WAAa,GAMlB1vE,KAAK2vE,qBAAuB,GAC5B3vE,KAAKuyB,KAAO30B,CACd,CAgIA,OA9HA4xE,EAAclvE,UAAUuoE,UAAY,SAAU+G,EAAW9G,EAAyBniE,GAC5EipE,KAEF,SAAK,QAAiBA,EAAU5yC,SAAS,SAAUA,GACjDA,GAAUA,EAAOn/B,OAAQ,QAAam/B,EAAOn/B,QAAS,QAAem/B,EAAOn/B,KAC9E,KACA,SAAK,QAAiB+xE,EAAUC,UAAU,SAAUA,GAClDA,GAAWA,EAAQ19D,SAAU,QAAa09D,EAAQ19D,UAAW,QAAe09D,EAAQ19D,OACtF,KAMFy9D,GAAY,QAAMA,GAIlB,IAAIE,EAAe9vE,KAAK+vE,cACpBC,EAAkBC,EAAeL,EAAW9G,GAA0BgH,GAC1E9vE,KAAKkwE,eAAiBF,EAAgB5G,WAElC0G,GAiBEE,EAAgBG,gBAAgB30E,SAClCs0E,EAAaK,gBAAkBH,EAAgBG,iBAG7CH,EAAgBI,UAAU50E,SAC5Bs0E,EAAaM,UAAYJ,EAAgBI,WAGvCJ,EAAgBK,eAClBP,EAAaO,aAAeL,EAAgBK,eAG9CrwE,KAAK+vE,cAAgBC,CAEzB,EAEAR,EAAclvE,UAAU+oE,YAAc,SAAUiH,GAC9C,IAAIR,EAAe9vE,KAAK+vE,cAKxB,OAJA/vE,KAAKyvE,iBAAmBK,EAAaK,gBACrCnwE,KAAK0vE,WAAaI,EAAaM,UAC/BpwE,KAAKuwE,cAAgBT,EAAaO,aAClCrwE,KAAK2vE,qBAAuB,IACrB,QAAMW,EAKXR,EAAa1G,WAAappE,KAAKkwE,eACnC,EAEAV,EAAclvE,UAAUmpE,kBAAoB,SAAUxwE,GACpD,IAAI2gB,EACAu2D,EAAkBnwE,KAAKyvE,iBAE3B,GAAIU,EAAgB30E,OAAQ,CAG1B,IAAIg1E,EAAgBv3E,EAAQye,aAAa,YAErC84D,IACF52D,GAAS,QACTu2D,EAAgBK,EAAcC,oBAElC,CAEA,OAAO72D,CACT,EAEA41D,EAAclvE,UAAUqpE,eAAiB,SAAU1wE,GACjD,IAAIy3E,EAAU1wE,KAAKuyB,KAAK2Q,WAEpBytC,EAAW3wE,KAAKuyB,KAAK6Q,YAErBgtC,EAAYpwE,KAAK0vE,WACjBW,EAAerwE,KAAKuwE,cACpBK,EAAU,GACV5hE,EAAS,GAEb,IAAKohE,EAAU50E,SAAW60E,EACxB,OAAOrhE,EAIT,IAAK,IAAI1T,EAAI,EAAG2S,EAAMmiE,EAAU50E,OAAQF,EAAI2S,EAAK3S,IAC3Cu1E,EAAgBT,EAAU90E,GAAGuzB,MAAO6hD,EAASC,IAC/CC,EAAQ7tE,KAAKzH,GAmBjB,OAZKs1E,EAAQp1E,QAAU60E,IACrBO,EAAU,EAAE,IAGVA,EAAQp1E,SAAWs1E,EAAcF,EAAS5wE,KAAK2vE,wBACjD3gE,GAAS,QAAI4hE,GAAS,SAAU/4D,GAC9B,OAAO,SAAiB,IAAXA,EAAew4D,EAAaz2D,OAASw2D,EAAUv4D,GAAO+B,OACrE,KAIF5Z,KAAK2vE,qBAAuBiB,EACrB5hE,CACT,EAEOwgE,CACT,CApJA,GAoNA,SAASS,EACTL,EAAW9G,EAAyBiI,GAClC,IACIV,EACAjH,EAFAgH,EAAY,GAGZY,EAAqBpB,EAAUxG,WAE/B6H,EAAiBrB,EAAUsB,SAC3BC,EAAwBvB,EAAUwB,QAClCC,EAAczB,EAAU0B,MACxBC,IAAa3B,EAAU0B,MACvBE,KAAiBL,GAAyBF,GAAkBD,GAAsBA,EAAmBE,UAqDzG,SAASO,EAAa73D,IACpB,QAAKkvD,GAAyB,SAAU4I,GACtCA,EAAW93D,EAAQm3D,EACrB,GACF,CAEA,OAzDIC,GACF5H,EAAa4H,EAER5H,EAAW8H,WACd9H,EAAW8H,SAAWD,MAKlBO,GAAeD,KACjB3B,EAAUwB,QAAUxB,EAAU0B,MAAQ,MAGxClI,EAAawG,GAGb2B,IACE,QAAQF,KACV,QAAKA,GAAa,SAAUM,GAQtBA,GAAeA,EAAY/3D,SACzB+3D,EAAY9iD,MACduhD,EAAUrtE,KAAK4uE,GACLtB,IAEVA,EAAesB,GAGrB,IASJF,EAAarI,IACb,QAAK+H,GAAuB,SAAUv3D,GACpC,OAAO63D,EAAa73D,EACtB,KACA,QAAKw2D,GAAW,SAAUkB,GACxB,OAAOG,EAAaH,EAAM13D,OAC5B,IAQO,CACLwvD,WAAYA,EACZ+G,gBAAiBgB,GAAyB,GAC1Cd,aAAcA,EACdD,UAAWA,EAEf,CAQA,SAASS,EAAgBhiD,EAAO6hD,EAASC,GACvC,IAAIiB,EAAU,CACZ/0D,MAAO6zD,EACP5zD,OAAQ6zD,EACRkB,YAAanB,EAAUC,GAGrBmB,GAAe,EAenB,OAdA,QAAKjjD,GAAO,SAAU3hB,EAAOjS,GAC3B,IAAI82E,EAAU92E,EAAKqsE,MAAMiI,GAEzB,GAAKwC,GAAYA,EAAQ,IAAOA,EAAQ,GAAxC,CAIA,IAAIC,EAAWD,EAAQ,GACnBE,EAAWF,EAAQ,GAAG5/B,cAErB+/B,EAAQN,EAAQK,GAAW/kE,EAAO8kE,KACrCF,GAAe,EANjB,CAQF,IACOA,CACT,CAEA,SAASI,EAAQC,EAAMC,EAAQJ,GAC7B,MAAiB,QAAbA,EACKG,GAAQC,EACO,QAAbJ,EACFG,GAAQC,EAGRD,IAASC,CAEpB,CAEA,SAAStB,EAAcuB,EAAUC,GAE/B,OAAOD,EAAS3yD,KAAK,OAAS4yD,EAAS5yD,KAAK,IAC9C,CAiGA,QC5bI,EAAO,KACP9Y,EAAW,KACX2rE,EAAkB,CAAC,YAAa,YAAa,YAAa,YAAa,aAAc,QAAS,aAElG,SAASC,EAAmB7rE,GAC1B,IAAI8rE,EAAe9rE,GAAOA,EAAI0V,UAE9B,GAAKo2D,EAIL,IAAK,IAAIn3E,EAAI,EAAG2S,EAAMskE,EAAgB/2E,OAAQF,EAAI2S,EAAK3S,IAAK,CAC1D,IAAIi9D,EAAYga,EAAgBj3E,GAC5Bo3E,EAAqBD,EAAaE,OAClCC,EAAuBH,EAAaI,SAEpCH,GAAsBA,EAAmBna,KAK3C5xD,EAAI4xD,GAAa5xD,EAAI4xD,IAAc,CAAC,EAE/B5xD,EAAI4xD,GAAWoa,OAGlB,KAAahsE,EAAI4xD,GAAWoa,OAAQD,EAAmBna,IAFvD5xD,EAAI4xD,GAAWoa,OAASD,EAAmBna,GAK7Cma,EAAmBna,GAAa,MAG9Bqa,GAAwBA,EAAqBra,KAK/C5xD,EAAI4xD,GAAa5xD,EAAI4xD,IAAc,CAAC,EAE/B5xD,EAAI4xD,GAAWsa,SAGlB,KAAalsE,EAAI4xD,GAAWsa,SAAUD,EAAqBra,IAF3D5xD,EAAI4xD,GAAWsa,SAAWD,EAAqBra,GAKjDqa,EAAqBra,GAAa,KAEtC,CACF,CAEA,SAASua,EAAsBnsE,EAAKosE,EAASC,GAC3C,GAAIrsE,GAAOA,EAAIosE,KAAapsE,EAAIosE,GAASJ,QAAUhsE,EAAIosE,GAASF,UAAW,CACzE,IAAII,EAAYtsE,EAAIosE,GAASJ,OACzBO,EAAcvsE,EAAIosE,GAASF,SAE3BI,IAOED,GACFrsE,EAAIosE,GAASJ,OAAShsE,EAAIosE,GAASF,SAAW,KAC9C,KAAgBlsE,EAAIosE,GAAUE,IAE9BtsE,EAAIosE,GAAWE,GAIfC,IAKFvsE,EAAIksE,SAAWlsE,EAAIksE,UAAY,CAAC,EAChClsE,EAAIksE,SAASE,GAAWG,EAGpBA,EAAYC,QACdxsE,EAAIksE,SAASM,MAAQD,EAAYC,OAG/BD,EAAYE,YACdzsE,EAAIksE,SAASO,UAAYF,EAAYE,WAG3C,CACF,CAEA,SAASC,EAAsB1sE,GAC7BmsE,EAAsBnsE,EAAK,aAC3BmsE,EAAsBnsE,EAAK,aAC3BmsE,EAAsBnsE,EAAK,aAC3BmsE,EAAsBnsE,EAAK,SAC3BmsE,EAAsBnsE,EAAK,aAE3BmsE,EAAsBnsE,EAAK,cAE3BmsE,EAAsBnsE,EAAK,YAC7B,CAEA,SAAS2sE,EAAgB3sE,EAAKyL,GAE5B,IAAImhE,EAAiB3sE,EAASD,IAAQA,EAAIyL,GACtCgvB,EAAYx6B,EAAS2sE,IAAmBA,EAAenyC,UAE3D,GAAIA,EAAW,CACT,EAKJ,IAAK,IAAI9lC,EAAI,EAAG2S,EAAMoX,EAAA,UAAqC/pB,EAAI2S,EAAK3S,IAAK,CACvE,IAAIk4E,EAAenuD,EAAA,GAA6B/pB,GAE5C8lC,EAAUr7B,eAAeytE,KAC3BD,EAAeC,GAAgBpyC,EAAUoyC,GAE7C,CACF,CACF,CAEA,SAASC,EAAsB9sE,GACzBA,IACF0sE,EAAsB1sE,GACtB2sE,EAAgB3sE,EAAK,SACrBA,EAAIksE,UAAYS,EAAgB3sE,EAAIksE,SAAU,SAElD,CAEA,SAASa,EAAcC,GACrB,GAAK/sE,EAAS+sE,GAAd,CAIAnB,EAAmBmB,GACnBN,EAAsBM,GACtBL,EAAgBK,EAAW,SAE3BL,EAAgBK,EAAW,cAE3BL,EAAgBK,EAAW,aAEvBA,EAAUd,WACZS,EAAgBK,EAAUd,SAAU,SAEpCS,EAAgBK,EAAUd,SAAU,cAEpCS,EAAgBK,EAAUd,SAAU,cAGtC,IAAIe,EAAYD,EAAUC,UAEtBA,IACFpB,EAAmBoB,GACnBH,EAAsBG,IAGxB,IAAIC,EAAWF,EAAUE,SAErBA,IACFrB,EAAmBqB,GACnBJ,EAAsBI,IAGxB,IAAIC,EAAWH,EAAUG,SAErBA,GACFL,EAAsBK,GAGxB,IAAIj2E,EAAO81E,EAAU91E,KAGrB,GAAuB,UAAnB81E,EAAUx1E,KAAkB,CAC9BN,EAAOA,GAAQ81E,EAAUI,MACzB,IAAIC,EAAWL,EAAUM,OAASN,EAAUO,MAE5C,GAAIF,IAAa,KAAoBA,GACnC,IAAK,IAAI14E,EAAI,EAAGA,EAAI04E,EAASx4E,OAAQF,IACnCm4E,EAAsBO,EAAS14E,IAInC,KAAYq4E,EAAUlmE,YAAY,SAAU9G,GAC1C0sE,EAAsB1sE,EACxB,GACF,CAEA,GAAI9I,IAAS,KAAoBA,GAC/B,IAASvC,EAAI,EAAGA,EAAIuC,EAAKrC,OAAQF,IAC/Bm4E,EAAsB51E,EAAKvC,IAO/B,GAFAs4E,EAAYD,EAAUC,UAElBA,GAAaA,EAAU/1E,KACzB,KAAIs2E,EAASP,EAAU/1E,KAEvB,IAASvC,EAAI,EAAGA,EAAI64E,EAAO34E,OAAQF,IACjCm4E,EAAsBU,EAAO74E,GAHJ,CAU7B,GAFAu4E,EAAWF,EAAUE,SAEjBA,GAAYA,EAASh2E,KACvB,KAAIu2E,EAASP,EAASh2E,KAEtB,IAASvC,EAAI,EAAGA,EAAI84E,EAAO54E,OAAQF,IAC7B,KAAe84E,EAAO94E,KACxBm4E,EAAsBW,EAAO94E,GAAG,IAChCm4E,EAAsBW,EAAO94E,GAAG,KAEhCm4E,EAAsBW,EAAO94E,GAPP,CAaL,UAAnBq4E,EAAUx1E,MACZm1E,EAAgBK,EAAW,aAC3BL,EAAgBK,EAAW,SAC3BL,EAAgBK,EAAW,WACC,YAAnBA,EAAUx1E,MACnB20E,EAAsBa,EAAUU,WAAY,aAC5C,KAAYV,EAAUW,QAAQ,SAAU3tE,GACtC0sE,EAAsB1sE,EACxB,KAC4B,SAAnBgtE,EAAUx1E,MACnBk1E,EAAsBM,EAAUY,OApGlC,CAuGF,CAEA,SAASC,EAAMC,GACb,OAAO,KAAeA,GAAKA,EAAIA,EAAI,CAACA,GAAK,EAC3C,CAEA,SAASC,EAAMD,GACb,OAAQ,KAAeA,GAAKA,EAAE,GAAKA,IAAM,CAAC,CAC5C,CAEe,SAASE,EAAkB/6D,EAAQg7D,GAChD,EAAKJ,EAAM56D,EAAOojB,SAAS,SAAU22C,GACnC/sE,EAAS+sE,IAAcD,EAAcC,EACvC,IACA,IAAIv3B,EAAO,CAAC,QAAS,QAAS,aAAc,YAAa,aAAc,eAAgB,SACvFw4B,GAAWx4B,EAAKr5C,KAAK,YAAa,eAAgB,UAAW,YAC7D,EAAKq5C,GAAM,SAAUtd,GACnB,EAAK01C,EAAM56D,EAAOklB,KAAY,SAAU+1C,GAClCA,IACFvB,EAAgBuB,EAAS,aACzBvB,EAAgBuB,EAAQ11C,YAAa,SAEzC,GACF,IACA,EAAKq1C,EAAM56D,EAAOpC,WAAW,SAAUs9D,GACrC,IAAIC,EAAsBD,GAAeA,EAAYC,oBACrDzB,EAAgByB,EAAqB,aACrCzB,EAAgByB,GAAuBA,EAAoB51C,YAAa,QAC1E,IACA,EAAKq1C,EAAM56D,EAAOo7D,WAAW,SAAUC,GACrCnC,EAAsBmC,EAAa,aACnC3B,EAAgB2B,EAAa,YAC7B3B,EAAgB2B,EAAa,cAC7B3B,EAAgB2B,EAAa,YAC/B,IAEA,EAAKT,EAAM56D,EAAOs7D,QAAQ,SAAUC,GAClC7B,EAAgB6B,EAAU,QAEtBA,EAASxwE,MAA6B,MAArBwwE,EAASr2C,WAC5Bq2C,EAASr2C,SAAWq2C,EAASxwE,YACtBwwE,EAASxwE,MAOM,MAApBwwE,EAASlmC,SAA2C,MAAxBkmC,EAASC,cACvCD,EAASC,YAAcD,EAASlmC,eACzBkmC,EAASlmC,QAcpB,IACA,EAAKulC,EAAM56D,EAAOrC,MAAM,SAAU89D,GAC5BzuE,EAASyuE,KACX5B,EAAsB4B,GACtB,EAAKb,EAAMa,EAAOC,UAAU,SAAUC,GACpC9B,EAAsB8B,EACxB,IAEJ,IACA,EAAKf,EAAM56D,EAAOs3D,WAAW,SAAUsE,GACrC/B,EAAsB+B,GACtB1C,EAAsB0C,EAAa,SACnC1C,EAAsB0C,EAAa,aACnC1C,EAAsB0C,EAAa,gBAAgB,GACnD,IAAI33E,EAAO23E,EAAY33E,KACvB,KAAeA,IAAS,KAAYA,GAAM,SAAU2B,GAC9C,KAAgBA,KAClBszE,EAAsBtzE,EAAM,SAC5BszE,EAAsBtzE,EAAM,aAEhC,GACF,IACA,EAAKg1E,EAAM56D,EAAO67D,UAAU,SAAUC,GACpC5C,EAAsB4C,EAAY,aAClC,EAAKA,EAAWC,SAAS,SAAUC,GACjC9C,EAAsB8C,EAAY,YACpC,GACF,IACAtC,EAAgBoB,EAAM96D,EAAOulB,aAAc,SAC3Cm0C,EAAgBoB,EAAM96D,EAAO/T,SAASs5B,YAAa,QAErD,CC1UA,SAASnhC,GAAI2I,EAAKkvE,GAIhB,IAHA,IAAIC,EAAUD,EAAKE,MAAM,KACrBrrD,EAAM/jB,EAEDrL,EAAI,EAAGA,EAAIw6E,EAAQt6E,OAAQF,IAGlC,GAFAovB,EAAMA,GAAOA,EAAIorD,EAAQx6E,IAEd,MAAPovB,EACF,MAIJ,OAAOA,CACT,CAEA,SAASlmB,GAAImC,EAAKkvE,EAAMzlE,EAAK4lE,GAM3B,IALA,IAEInzE,EAFAizE,EAAUD,EAAKE,MAAM,KACrBrrD,EAAM/jB,EAENrL,EAAI,EAEDA,EAAIw6E,EAAQt6E,OAAS,EAAGF,IAC7BuH,EAAMizE,EAAQx6E,GAEE,MAAZovB,EAAI7nB,KACN6nB,EAAI7nB,GAAO,CAAC,GAGd6nB,EAAMA,EAAI7nB,IAGRmzE,GAAgC,MAAnBtrD,EAAIorD,EAAQx6E,OAC3BovB,EAAIorD,EAAQx6E,IAAM8U,EAEtB,CAEA,SAAS6lE,GAAuBr8D,GAC9BA,IAAU,QAAKs8D,IAAmB,SAAU9/B,GACtCA,EAAK,KAAMx8B,KAAYw8B,EAAK,KAAMx8B,KACpCA,EAAOw8B,EAAK,IAAMx8B,EAAOw8B,EAAK,IAElC,GACF,CAEA,IAAI8/B,GAAoB,CAAC,CAAC,IAAK,QAAS,CAAC,IAAK,OAAQ,CAAC,KAAM,SAAU,CAAC,KAAM,WAC1EC,GAA0B,CAAC,OAAQ,MAAO,WAAY,SAAU,UAAW,QAAS,YAAa,WAAY,YAC7GC,GAAqB,CAAC,CAAC,eAAgB,mBAAoB,CAAC,cAAe,kBAAmB,CAAC,cAAe,mBAElH,SAASC,GAAmBz8D,GAC1B,IAAIyC,EAAYzC,GAAUA,EAAOyC,UAEjC,GAAIA,EACF,IAAK,IAAI/gB,EAAI,EAAGA,EAAI86E,GAAmB56E,OAAQF,IAAK,CAClD,IAAIg7E,EAAUF,GAAmB96E,GAAG,GAChCi7E,EAAUH,GAAmB96E,GAAG,GAEV,MAAtB+gB,EAAUi6D,KACZj6D,EAAUk6D,GAAWl6D,EAAUi6D,GAMnC,CAEJ,CAEA,SAASE,GAAe58D,GACjBA,GAIkB,SAAnBA,EAAOyiC,SAAuC,MAAjBziC,EAAO2f,QAAyC,MAAvB3f,EAAO68D,eAK/D78D,EAAO68D,aAAe78D,EAAO2f,OAEjC,CAEA,SAASm9C,GAAoB98D,GACtBA,GAIDA,EAAO+8D,WAAa/8D,EAAOg9D,OAC7Bh9D,EAAOg9D,KAAOh9D,EAAO+8D,SAMzB,CAEA,SAASE,GAAiBj9D,GACnBA,GAI4B,MAA7BA,EAAOk9D,qBACTl9D,EAAOi5D,SAAWj5D,EAAOi5D,UAAY,CAAC,EAET,MAAzBj5D,EAAOi5D,SAASM,QAKlBv5D,EAAOi5D,SAASM,MAAQ,aAG9B,CAEA,SAAS4D,GAAal5E,EAAM7D,GAC1B,GAAI6D,EACF,IAAK,IAAIvC,EAAI,EAAGA,EAAIuC,EAAKrC,OAAQF,IAC/BtB,EAAG6D,EAAKvC,IACRuC,EAAKvC,IAAMy7E,GAAal5E,EAAKvC,GAAG07E,SAAUh9E,EAGhD,CAEe,SAASi9E,GAAqBr9D,EAAQg7D,GACnD,EAAYh7D,EAAQg7D,GAEpBh7D,EAAOojB,QAAS,QAAiBpjB,EAAOojB,SACxC,QAAKpjB,EAAOojB,QAAQ,SAAU22C,GAC5B,IAAK,QAASA,GAAd,CAIA,IAAIl2E,EAAak2E,EAAUx1E,KAE3B,GAAmB,SAAfV,EAC4B,MAA1Bk2E,EAAUuD,eACZvD,EAAUp4D,KAAOo4D,EAAUuD,mBAMxB,GAAmB,QAAfz5E,GAAuC,UAAfA,EAAwB,CAC9B,MAAvBk2E,EAAUwD,YACZxD,EAAU51D,UAAY41D,EAAUwD,WAOlCX,GAAe7C,EAAUjuE,OACzB,IAAI7H,EAAO81E,EAAU91E,KAErB,GAAIA,KAAS,QAAaA,GACxB,IAAK,IAAIvC,EAAI,EAAGA,EAAIuC,EAAKrC,OAAQF,IAC/Bk7E,GAAe34E,EAAKvC,IAIK,MAAzBq4E,EAAUyD,cACZzD,EAAUd,SAAWc,EAAUd,UAAY,CAAC,GAExCc,EAAUd,SAASwE,UAAY,QAKjC1D,EAAUd,SAASwE,UAAY1D,EAAUyD,aAG/C,MAAO,GAAmB,UAAf35E,EAAwB,CACjC,IAAI65E,EAAet5E,GAAI21E,EAAW,iBAClB,MAAhB2D,GAAwB9yE,GAAImvE,EAAW,kBAAmB2D,EAC5D,MAAO,GAAmB,QAAf75E,EAAsB,CAC/B44E,GAAmB1C,GACnB0C,GAAmB1C,EAAUj4D,iBAC7B26D,GAAmB1C,EAAUd,UACzBh1E,EAAO81E,EAAU91E,KAErB,GAAIA,KAAS,QAAaA,GACxB,IAASvC,EAAI,EAAGA,EAAIuC,EAAKrC,OAAQF,IACR,kBAAZuC,EAAKvC,KACd+6E,GAAmBx4E,EAAKvC,IACxB+6E,GAAmBx4E,EAAKvC,IAAMuC,EAAKvC,GAAGu3E,UAI9C,MAAO,GAAmB,aAAfp1E,EAA2B,CACpC,IAAI85E,EAAkB5D,EAAU4D,gBAE5BA,IACF5D,EAAUd,SAAWc,EAAUd,UAAY,CAAC,EAEvCc,EAAUd,SAASM,QACtBQ,EAAUd,SAASM,MAAQoE,IAQ/Bb,GAAoB/C,GACpBoD,GAAapD,EAAU91E,KAAM64E,GAC/B,KAA0B,UAAfj5E,GAAyC,WAAfA,EACnCo5E,GAAiBlD,GACO,QAAfl2E,IACLk2E,EAAU6D,UAAY7D,EAAUlxE,MAKlCkxE,EAAUlxE,IAAMkxE,EAAU6D,SAGxB7D,EAAU8D,cAKZ,QAAS9D,EAAWA,EAAU8D,cAIF,MAA5B9D,EAAU+D,iBACZ/D,EAAUd,SAAWc,EAAUd,UAAY,CAAC,EAExCc,EAAUd,UAAwC,MAA5Bc,EAAUd,SAASrrD,QAK3CmsD,EAAUd,SAASrrD,MAAQmsD,EAAU+D,iBAIzCzB,GAAuBtC,EA3GvB,CA4GF,IAEI/5D,EAAO+9D,YACT/9D,EAAOg+D,UAAYh+D,EAAO+9D,YAG5B,QAAKxB,IAAyB,SAAU0B,GACtC,IAAIzG,EAAUx3D,EAAOi+D,GAEjBzG,KACG,QAAQA,KACXA,EAAU,CAACA,KAGb,QAAKA,GAAS,SAAUx3D,GACtBq8D,GAAuBr8D,EACzB,IAEJ,GACF,C,eC9Pe,SAASk+D,GAAU7+E,GAChC,IAAI8+E,GAAe,UACnB9+E,EAAQooC,YAAW,SAAU1jC,GAC3B,IAAIq6E,EAAQr6E,EAAYK,IAAI,SAE5B,GAAIg6E,EAAO,CACT,IAAIC,EAAgBF,EAAa/5E,IAAIg6E,IAAUD,EAAavzE,IAAIwzE,EAAO,IACnEn6E,EAAOF,EAAYG,UACnBo6E,EAAY,CAGdC,qBAAsBt6E,EAAKmP,mBAAmB,wBAC9CorE,qBAAsBv6E,EAAKmP,mBAAmB,wBAC9CqrE,iBAAkBx6E,EAAKmP,mBAAmB,oBAC1CsrE,mBAAoBz6E,EAAKmP,mBAAmB,sBAC5CurE,iBAAkB16E,EAAKmP,mBAAmB,oBAC1CnP,KAAMA,EACNF,YAAaA,GAGf,IAAKu6E,EAAUG,mBAAsBH,EAAUK,mBAAoBL,EAAUI,mBAC3E,OAGFL,EAAcz8E,QAAUqC,EAAKoP,mBAAmB,kBAAmBgrE,EAAcA,EAAcz8E,OAAS,GAAGmC,aAC3Gs6E,EAAcl1E,KAAKm1E,EACrB,CACF,IACAH,EAAa3yE,KAAKozE,GACpB,CAEA,SAASA,GAAeP,IACtB,QAAKA,GAAe,SAAUQ,EAAiBC,GAC7C,IAAIC,EAAY,GACZC,EAAY,CAAC77E,IAAKA,KAClBuN,EAAO,CAACmuE,EAAgBN,qBAAsBM,EAAgBL,sBAC9DS,EAAaJ,EAAgB56E,KAC7B06E,EAAmBE,EAAgBF,iBACnCO,EAAgBL,EAAgB96E,YAAYK,IAAI,kBAAoB,WAGxE66E,EAAWxpE,OAAO/E,GAAM,SAAUyuE,EAAIC,EAAIngF,GACxC,IAOIogF,EACAC,EARAt8E,EAAMi8E,EAAW76E,IAAIy6E,EAAgBJ,iBAAkBx/E,GAG3D,GAAIiE,MAAMF,GACR,OAAOg8E,EAMLL,EACFW,EAAsBL,EAAWxrE,YAAYxU,GAE7CogF,EAAUJ,EAAW76E,IAAIy6E,EAAgBH,mBAAoBz/E,GAM/D,IAFA,IAAIsgF,EAAcp8E,IAETwF,EAAIm2E,EAAa,EAAGn2E,GAAK,EAAGA,IAAK,CACxC,IAAI21E,EAAYD,EAAc11E,GAM9B,GAJKg2E,IACHW,EAAsBhB,EAAUr6E,KAAKuQ,WAAW8pE,EAAUI,mBAAoBW,IAG5EC,GAAuB,EAAG,CAC5B,IAAI9oE,EAAM8nE,EAAUr6E,KAAK6P,cAAcwqE,EAAUC,qBAAsBe,GAEvE,GAAsB,QAAlBJ,GACiB,aAAlBA,GAAgC1oE,EAAM,GAAuB,aAAlB0oE,GAAgC1oE,EAAM,GAAuB,aAAlB0oE,GAAgCl8E,GAAO,GAAKwT,EAAM,GACtH,aAAlB0oE,GAAgCl8E,GAAO,GAAKwT,EAAM,EACnD,CAIExT,GAAM,SAAQA,EAAKwT,GACnB+oE,EAAc/oE,EACd,KACF,CACJ,CACF,CAIA,OAFAuoE,EAAU,GAAK/7E,EACf+7E,EAAU,GAAKQ,EACRR,CACT,GACF,GACF,C,iJC3FIzpD,IAAQ,UACRkqD,GAAsB,CACxB/8D,WAAW,EAAAg9D,GAAA,GAAgB,MAAoB,GAC/ClgD,WAAW,EAAAkgD,GAAA,GAAgB,MAAoB,IAE7CC,GAAkB,CACpBngD,UAAW,SACX9c,UAAW,QAGb,SAASk9D,GAAe57E,EAAa67E,GACnC,IAAIC,EAAc97E,EAAY+7E,mBAAqBN,GAAoBI,GAEvE,OAAKC,IACHE,QAAQC,KAAK,sBAAwBJ,EAAY,MAC1CJ,GAAoB/8D,UAI/B,CAEA,SAASw9D,GAAmBl8E,EAAa67E,GAEvC,IAAIM,EAAWn8E,EAAYo6D,gBAAkBuhB,GAAgBE,GAE7D,OAAKM,IACHH,QAAQC,KAAK,sBAAwBJ,EAAY,MAC1C,OAIX,CAEA,IAAIO,GAAkB,CACpBC,mBAAmB,EACnBC,kBAAkB,EAClBv8E,MAAO,SAAUC,EAAa1E,GAC5B,IAAI4E,EAAOF,EAAYG,UACnB07E,EAAY77E,EAAYu8E,uBAAyB,YAEjDh4C,EAAavkC,EAAYwmB,SAASq1D,GAClCW,EAAWZ,GAAe57E,EAAa67E,GACvCY,EAAcD,EAASj4C,GACvBm4C,EAAcn4C,EAAWvoC,WAAW,SAEpC0gF,IACFx8E,EAAKqS,UAAU,QAASmqE,GACxBA,EAAYC,OAAQ,GAItB,IAAIR,EAAWD,GAAmBl8E,EAAa67E,GAC3C79D,EAAQy+D,EAAYN,GAEpBS,GAAgB,QAAW5+D,GAASA,EAAQ,KAC5C6+D,EAAoC,SAArBJ,EAAYzuD,MAA0C,SAAvByuD,EAAYluD,OAE9D,IAAKkuD,EAAYN,IAAaS,GAAiBC,EAAc,CAI3D,IAAIC,EAAe98E,EAAY+8E,oBAC/B/8E,EAAYgH,KAAM,KAAM1L,EAAQo0E,kBAE3B+M,EAAYN,KACfM,EAAYN,GAAYW,EACxB58E,EAAKqS,UAAU,oBAAoB,IAGrCkqE,EAAYzuD,KAA4B,SAArByuD,EAAYzuD,OAAmB,QAAWyuD,EAAYzuD,MAAQ8uD,EAAeL,EAAYzuD,KAC5GyuD,EAAYluD,OAAgC,SAAvBkuD,EAAYluD,SAAqB,QAAWkuD,EAAYluD,QAAUuuD,EAAeL,EAAYluD,MACpH,CAKA,GAHAruB,EAAKqS,UAAU,QAASkqE,GACxBv8E,EAAKqS,UAAU,WAAY4pE,IAEtB7gF,EAAQy0E,iBAAiB/vE,IAAgB48E,EAE5C,OADA18E,EAAKqS,UAAU,oBAAoB,GAC5B,CACLyqE,SAAU,SAAU98E,EAAMuM,GACxB,IAAIs5B,EAAa/lC,EAAYgmC,cAAcv5B,GACvCiS,GAAY,QAAO,CAAC,EAAG+9D,GAC3B/9D,EAAUy9D,GAAYS,EAAc72C,GACpC7lC,EAAK6S,cAActG,EAAK,QAASiS,EACnC,EAGN,GAEEu+D,GAAc,IAAIhrE,EAAA,EAClBirE,GAAgB,CAClBb,mBAAmB,EACnBC,kBAAkB,EAClBv8E,MAAO,SAAUC,EAAa1E,GAC5B,IAAI0E,EAAYm9E,oBAAqB7hF,EAAQy0E,iBAAiB/vE,GAA9D,CAIA,IAAIE,EAAOF,EAAYG,UACnB07E,EAAY77E,EAAYu8E,uBAAyB,YAEjDC,EAAWZ,GAAe57E,EAAa67E,GACvCM,EAAWj8E,EAAKmS,UAAU,YAC9B,MAAO,CACL2qE,SAAU98E,EAAKmK,cAAgB,SAAUnK,EAAMuM,GAE7C,IAAIq6B,EAAU5mC,EAAK6R,eAAetF,GAElC,GAAIq6B,GAAWA,EAAQ+0C,GAAY,CACjCoB,GAAYhhE,OAAS6qB,EAAQ+0C,GAC7B,IAAI19E,EAAQq+E,EAASS,IACjBG,EAAcl9E,EAAK2S,uBAAuBpG,EAAK,UACnD,QAAO2wE,EAAaj/E,GAEhB8+E,GAAYhhE,OAAOqtD,QACrBppE,EAAK6S,cAActG,EAAK,QAASwwE,GAAYhhE,OAAOqtD,OACpD2T,GAAYhhE,OAAOqtD,MAAMqT,OAAQ,GAG/BR,KAAYh+E,GACd+B,EAAK6S,cAActG,EAAK,oBAAoB,EAEhD,CACF,EAAI,KA3BN,CA6BF,GAIE4wE,GAAuB,CACzBf,kBAAkB,EAClBgB,aAAc,SAAUhiF,GAGtB,IAAIiiF,GAA0B,UAC9BjiF,EAAQooC,YAAW,SAAU1jC,GAC3B,IAAImpE,EAAUnpE,EAAYw9E,aAE1B,IAAIx9E,EAAYy9E,kBAAhB,CAIA,IAAIv4E,EAAMlF,EAAYQ,KAAO,IAAM2oE,EAC/BuU,EAAaH,EAAwBl9E,IAAI6E,GAExCw4E,IACHA,EAAa,CAAC,EACdH,EAAwB12E,IAAI3B,EAAKw4E,IAGnCnsD,GAAMvxB,GAAa7C,MAAQugF,CAV3B,CAWF,IACApiF,EAAQooC,YAAW,SAAU1jC,GAC3B,IAAIA,EAAYy9E,oBAAqBniF,EAAQy0E,iBAAiB/vE,GAA9D,CAIA,IAAI29E,EAAU39E,EAAY49E,aACtBC,EAAS,CAAC,EACV39E,EAAOF,EAAYG,UACnBu9E,EAAansD,GAAMvxB,GAAa7C,MAChC0+E,EAAY77E,EAAYu8E,uBAAyB,YACjDJ,EAAWD,GAAmBl8E,EAAa67E,GAC/C37E,EAAKuH,MAAK,SAAUgF,GAClB,IAAIuD,EAAS9P,EAAKwP,YAAYjD,GAC9BoxE,EAAO7tE,GAAUvD,CACnB,IAGAkxE,EAAQl2E,MAAK,SAAUuI,GACrB,IAAIvD,EAAMoxE,EAAO7tE,GACb8tE,EAAc59E,EAAKwS,cAAcjG,EAAK,oBAK1C,GAAIqxE,EAAa,CACf,IAAIp/D,EAAYxe,EAAK2S,uBAAuBpG,EAAK,SAC7CskE,EAAS4M,EAAQnuE,QAAQQ,IAAWA,EAAS,GAC7C+tE,EAAYJ,EAAQz+E,QACxBwf,EAAUy9D,GAAYn8E,EAAY+8E,oBAAoBhM,EAAQ2M,EAAYK,EAC5E,CACF,GA3BA,CA4BF,GACF,G,iCC5LEv9D,GAAK7gB,KAAK6gB,GAUC,SAASw9D,GAAe/9E,EAAKygB,GAC1CA,EAAOA,GAAQ,CAAC,EAChB,KAAgBA,EAAM,CACpBkkB,KAAM,UACN8K,UAAW,OACXkC,SAAU,GACVe,WAAY,SACZi3B,UAAW,SACXF,WAAY,aACZuU,UAAW,2BACXC,aAAa,EACblgE,MAAO,UACPmgE,cAAe,GACf/+D,UAAW,EACXia,OAAQ,IAEV,IAAI3T,EAAQ,IAAI,KACZ04D,EAAO,IAAI,KAAa,CAC1BjgF,MAAO,CACL6vB,KAAMtN,EAAKu9D,WAEb5kD,OAAQ3Y,EAAK2Y,OACb3c,EAAG,MAELgJ,EAAM9iB,IAAIw7E,GACV,IAyBI58D,EAzBA68D,EAAc,IAAI,MAAa,CACjClgF,MAAO,CACLymC,KAAMlkB,EAAKkkB,KACX5W,KAAMtN,EAAKgvB,UACXkC,SAAUlxB,EAAKkxB,SACfe,WAAYjyB,EAAKiyB,WACjBi3B,UAAWlpD,EAAKkpD,UAChBF,WAAYhpD,EAAKgpD,YAEnBrwC,OAAQ3Y,EAAK2Y,OACb3c,EAAG,QAED4hE,EAAY,IAAI,KAAa,CAC/BngF,MAAO,CACL6vB,KAAM,QAERqwD,YAAaA,EACblwD,WAAY,CACV3L,SAAU,QACVE,SAAU,IAEZ2W,OAAQ3Y,EAAK2Y,OACb3c,EAAG,QA0DL,OAxDAgJ,EAAM9iB,IAAI07E,GAGN59D,EAAKw9D,cACP18D,EAAM,IAAI,KAAY,CACpBjC,MAAO,CACLW,YAAaM,GAAK,EAClBL,UAAWK,GAAK,EAAI,GACpBT,EAAGW,EAAKy9D,eAEVhgF,MAAO,CACLowB,OAAQ7N,EAAK1C,MACbisB,QAAS,QACT7qB,UAAWsB,EAAKtB,WAElBia,OAAQ3Y,EAAK2Y,OACb3c,EAAG,QAEL8E,EAAI+8D,cAAa,GAAMC,KAAK,IAAM,CAChCr+D,SAAe,EAALK,GAAS,IAClBzS,MAAM,iBACTyT,EAAI+8D,cAAa,GAAMC,KAAK,IAAM,CAChCt+D,WAAiB,EAALM,GAAS,IACpBzkB,MAAM,KAAKgS,MAAM,iBACpB2X,EAAM9iB,IAAI4e,IAIZkE,EAAMs5B,OAAS,WACb,IAAIy/B,EAAYJ,EAAY9rD,kBAAkBrT,MAC1Ca,EAAIW,EAAKw9D,YAAcx9D,EAAKy9D,cAAgB,EAG5Cn+D,GAAM/f,EAAIslC,WAAiB,EAAJxlB,GAASW,EAAKw9D,aAAeO,EAAY,GAAK,GAAKA,GAAa,GAAK/9D,EAAKw9D,aAAeO,EAAY,EAAI,EAAIA,EAAY,IACjJ/9D,EAAKw9D,YAAc,EAAIO,EAAY,IACnCA,EAAY,EAAI1+D,GACfE,EAAKhgB,EAAIwlC,YAAc,EAC3B/kB,EAAKw9D,aAAe18D,EAAI6F,SAAS,CAC/BrH,GAAIA,EACJC,GAAIA,IAENq+D,EAAUj3D,SAAS,CACjBrI,EAAGgB,EAAKD,EACRd,EAAGgB,EAAKF,EACRb,MAAW,EAAJa,EACPZ,OAAY,EAAJY,IAEVq+D,EAAK/2D,SAAS,CACZrI,EAAG,EACHC,EAAG,EACHC,MAAOjf,EAAIslC,WACXpmB,OAAQlf,EAAIwlC,aAEhB,EAEA/f,EAAMs5B,SACCt5B,CACT,C,0BC9GIg5D,GAEJ,WACE,SAASA,EAAU/M,EAAY1xE,EAAK0+E,EAAuBC,GAEzDv8E,KAAKw8E,eAAgB,UACrBx8E,KAAKsvE,WAAaA,EAClBtvE,KAAKpC,IAAMA,EAKX0+E,EAAwBt8E,KAAKy8E,uBAAyBH,EAAsB32E,QAC5E42E,EAAiBv8E,KAAK08E,gBAAkBH,EAAe52E,QACvD3F,KAAK28E,aAAeL,EAAsBh3E,OAAOi3E,EACnD,CAqYA,OAnYAF,EAAU/7E,UAAUgpE,YAAc,SAAUrwE,EAASmpB,GAiBnDnpB,EAAQqwE,YAAYlnD,GAQpBpiB,KAAKw8E,cAAcp3E,MAAK,SAAUw3E,GAChC,IAAIC,EAAcD,EAAWC,YAC7BA,GAAeA,EAAYvC,OAC7B,GACF,EAGA+B,EAAU/7E,UAAUw8E,eAAiB,SAAUC,EAAMC,GAEnD,GAAKD,EAAKE,WAAV,CAIA,IAAIC,EAAWl9E,KAAKm9E,aAAan/E,IAAI++E,EAAKE,WAAWrwE,IAEjDwwE,EAAOF,EAASp9E,QAChBgtB,GAAekwD,GAAWE,EAASG,sBAAwBD,GAAQA,EAAK9tD,oBAAsBytD,EAAKO,gBAAkBJ,EAASK,WAC9H1mC,EAAO/pB,EAAcowD,EAASrmC,KAAO,KACrC2mC,EAAeJ,GAAQA,EAAKI,aAC5BC,EAAwB,MAAhBD,EAAuBlgF,KAAKu6C,KAAK2lC,EAAe3mC,GAAQ,KACpE,MAAO,CACLA,KAAMA,EACN4mC,MAAOA,EACPD,aAAcA,EAZhB,CAcF,EAEAnB,EAAU/7E,UAAUo9E,YAAc,SAAUC,GAC1C,OAAO39E,KAAKm9E,aAAan/E,IAAI2/E,EAC/B,EAUAtB,EAAU/7E,UAAUs9E,kBAAoB,SAAUjgF,EAAaw1D,GAC7D,IAAI+pB,EAAWl9E,KAAKm9E,aAAan/E,IAAIL,EAAYwuD,KAE7CtuD,EAAOF,EAAYG,UACnB+/E,EAAUhgF,EAAKhB,QAMfyyB,EAAoB4tD,EAASG,oBAAsBlqB,EAAKtwC,0BAA4Bg7D,GAAWX,EAASY,UACxGrjE,EAAQ9c,EAAYK,IAAI,UAAY6/E,GAAWlgF,EAAYK,IAAI,kBAG/Dw/E,EAA2D,QAA5C7/E,EAAYK,IAAI,wBAAoC6/E,EAAU,KACjFlgF,EAAY4lB,gBAAkB25D,EAASp9E,QAAU,CAC/CwvB,kBAAmBA,EACnBkuD,aAAcA,EACd/iE,MAAOA,EAEX,EAEA4hE,EAAU/7E,UAAUy9E,iBAAmB,SAAU9kF,GAC/C,IAAI+kF,EAAYh+E,KACZi+E,EAAcD,EAAUb,cAAe,UAC3ClkF,EAAQooC,YAAW,SAAU1jC,GAC3B,IAAIgd,EAAchd,EAAYod,iBAC1B4iE,EAAahgF,EAAYwuD,IAC7B8xB,EAAYz5E,IAAIm5E,EAAY,CAC1B/wE,GAAI+wE,EACJO,KAAM,KACNC,KAAM,KACNL,UAAWngF,EAAYqd,0BACvBqiE,mBAAoB1iE,KAAiBhd,EAAYygF,oBAAsBzgF,EAAYygF,sBACnFb,YAAa,EACb1mC,KAAMv5C,KAAKC,MAAMod,GAAe,KAChC9d,MAAO,IAGTmhF,EAAUK,MAAM1gF,EAAaA,EAAY2gF,SAC3C,GACF,EAEAjC,EAAU/7E,UAAUi+E,kBAAoB,WACtC,IAAIC,EAAex+E,KAAKw8E,cACpBvjF,EAAU+G,KAAKpC,IAAIumB,WACnBvmB,EAAMoC,KAAKpC,KACf,QAAKoC,KAAK28E,cAAc,SAAUpsD,GAChC,IAAII,EAAS6tD,EAAaxgF,IAAIuyB,EAAQ47B,MAAQqyB,EAAah6E,IAAI+rB,EAAQ47B,IAAK,CAAC,GACzEsyB,EAAS,IAOb,UAASluD,EAAQ7yB,OAAS6yB,EAAQ0qD,cAAewD,GACjDluD,EAAQ7yB,OAASsC,KAAK0+E,uBAAuBnuD,EAASI,EAAQ13B,EAAS2E,GACvE2yB,EAAQ0qD,cAAgBj7E,KAAK2+E,wBAAwBpuD,EAASI,EAAQ13B,EAAS2E,EACjF,GAAGoC,KACL,EAEAq8E,EAAU/7E,UAAUs+E,YAAc,SAAUzrB,EAAM9tC,EAAOpsB,EAAS2E,GAChE,IAAIihF,EAAa1rB,EAAK0rB,WAClB/+E,EAAU++E,EAAW/+E,QACzBA,EAAQulB,MAAQA,EAChBvlB,EAAQ7G,QAAUA,EAClB6G,EAAQlC,IAAMA,EACdihF,EAAWC,SAAW3rB,EAAKtwC,yBAE3B7iB,KAAKq+E,MAAMh5D,EAAOw5D,EACpB,EAEAxC,EAAU/7E,UAAUy+E,0BAA4B,SAAU9lF,EAASmpB,GAEjEpiB,KAAKg/E,mBAAmBh/E,KAAKy8E,uBAAwBxjF,EAASmpB,EAAS,CACrE68D,OAAO,GAEX,EAEA5C,EAAU/7E,UAAU4+E,mBAAqB,SAAUjmF,EAASmpB,EAASzb,GACnE3G,KAAKg/E,mBAAmBh/E,KAAK08E,gBAAiBzjF,EAASmpB,EAASzb,EAClE,EAEA01E,EAAU/7E,UAAU0+E,mBAAqB,SAAUG,EAAelmF,EAASmpB,EAASzb,GAClFA,EAAMA,GAAO,CAAC,EACd,IAAIy4E,GAAa,EACbpB,EAAYh+E,KA2DhB,SAASq/E,EAAa14E,EAAKo2E,GACzB,OAAOp2E,EAAI24E,YAAc34E,EAAI44E,UAAY54E,EAAI44E,SAASvhF,IAAI++E,EAAKE,WAAWrwE,IAC5E,EA5DA,QAAKuyE,GAAe,SAAUK,EAAcp1E,GAC1C,IAAIzD,EAAI84E,YAAc94E,EAAI84E,aAAeD,EAAaC,WAAtD,CAIA,IAAIC,EAAqB1B,EAAUxB,cAAcx+E,IAAIwhF,EAAarzB,KAE9DwzB,EAAgBD,EAAmBC,cACnC9C,EAAc6C,EAAmB7C,YAErC,GAAIA,EAAa,CACf,IAAI+C,EACAC,EAAehD,EAAYgD,aAC/BA,EAAaz6E,MAAK,SAAU06E,GACtBT,EAAa14E,EAAKm5E,KACpBA,EAAKxF,QACLsF,GAAqB,EAEzB,IACAA,GAAsB/C,EAAYvC,QAClC0D,EAAU9kF,cAAc2jF,EAAaz6D,GACrC,IAAI29D,EAAgB/B,EAAUlB,eAAeD,EAAal2E,EAAIs4E,OAK9DY,EAAaz6E,MAAK,SAAU06E,GAC1BA,EAAKE,QAAQD,EACf,IAEIlD,EAAYmD,QAAQD,KACtBX,GAAa,EAEjB,MAAWO,GACTA,EAAcv6E,MAAK,SAAU23E,EAAMY,GAC7B0B,EAAa14E,EAAKo2E,IACpBA,EAAKzC,QAGP,IAAI2F,EAAcjC,EAAUlB,eAAeC,EAAMp2E,EAAIs4E,OASrDgB,EAAYC,MAAQV,EAAavF,kBAAoBhhF,EAAQy0E,iBAAiBqP,EAAKj9E,QAAQulB,OAC3F24D,EAAU9kF,cAAc6jF,EAAM36D,GAE1B26D,EAAKiD,QAAQC,KACfb,GAAa,EAEjB,GAnDF,CAqDF,IAMAp/E,KAAKo/E,WAAaA,GAAcp/E,KAAKo/E,UACvC,EAEA/C,EAAU/7E,UAAU6/E,mBAAqB,SAAUlnF,GACjD,IAAImmF,EACJnmF,EAAQooC,YAAW,SAAU1jC,GAE3ByhF,EAAazhF,EAAY2gF,SAAS0B,WAAaZ,CACjD,IACAp/E,KAAKo/E,WAAaA,GAAcp/E,KAAKo/E,UACvC,EAEA/C,EAAU/7E,UAAU8/E,KAAO,WAEzBpgF,KAAKm9E,aAAa/3E,MAAK,SAAU83E,GAC/B,IAAIH,EAAOG,EAASiB,KAEpB,EAAG,CACD,GAAIpB,EAAK+B,QAAS,CAChB5B,EAASK,WAAaR,EAAKO,gBAC3B,KACF,CAEAP,EAAOA,EAAKsD,aACd,OAAStD,EACX,GACF,EAEAV,EAAU/7E,UAAUpH,cAAgB,SAAU6jF,EAAM36D,GACtC,WAAZA,IAAyB26D,EAAKj9E,QAAQsiB,QAAUA,EAClD,EAEAi6D,EAAU/7E,UAAUo+E,uBAAyB,SAAUc,EAAcE,EAAoBzmF,EAAS2E,GAChG,IAAIogF,EAAYh+E,KACZsgF,EAAmBZ,EAAmBC,cAGtCY,EAAmBb,EAAmBC,eAAgB,UACtDliF,EAAa+hF,EAAa/hF,WAC1B+iF,EAAkBhB,EAAagB,gBAYnC,SAASjiC,EAAO5gD,GACd,IAAIggF,EAAahgF,EAAYwuD,IAGzB4wB,EAAOwD,EAAiB/7E,IAAIm5E,EAAY2C,GAAoBA,EAAiBtiF,IAAI2/E,KAAe,QAAW,CAC7GyC,KAAMK,GACN/iF,MAAOgjF,GACP7jF,MAAO8jF,MAET5D,EAAKj9E,QAAU,CACbulB,MAAO1nB,EACP1E,QAASA,EACT2E,IAAKA,EAELgjF,eAAgBpB,EAAaqB,WAAarB,EAAasB,SACvDV,KAAMZ,EAAaY,KACnB1iF,MAAO8hF,EAAa9hF,MACpBsgF,UAAWA,GAGbA,EAAUK,MAAM1gF,EAAao/E,EAC/B,CA7BIyC,EAAaxF,kBACf/gF,EAAQs0E,cAAchvB,GACb9gD,EACTxE,EAAQw0E,oBAAoBhwE,EAAY8gD,GAC/BiiC,GACTA,EAAgBvnF,EAAS2E,GAAKwH,KAAKm5C,EAyBvC,EAEA89B,EAAU/7E,UAAUq+E,wBAA0B,SAAUa,EAAcE,EAAoBzmF,EAAS2E,GACjG,IAAIogF,EAAYh+E,KACZ68E,EAAc6C,EAAmB7C,YAAc6C,EAAmB7C,cACnE,QAAW,CACZn/E,MAAOqjF,KAETlE,EAAY/8E,QAAU,CACpB7G,QAASA,EACT2E,IAAKA,EACLq9E,aAAcuE,EAAavE,aAC3B+C,UAAWA,GAEb,IAAIgD,EAAkBnE,EAAYgD,aAG9BoB,EAAkBpE,EAAYgD,cAAe,UAC7CpiF,EAAa+hF,EAAa/hF,WAC1B+iF,EAAkBhB,EAAagB,gBAC/BU,GAAkB,EAClBC,GAAyB,EAOzB1C,EAAS,GAqBb,SAAS2C,EAAWzjF,GAClB,IAAIggF,EAAahgF,EAAYwuD,IACzB2zB,EAAOmB,EAAgBz8E,IAAIm5E,EAAYqD,GAAmBA,EAAgBhjF,IAAI2/E,KAElFwD,GAAyB,GAAM,QAAW,CACxCzjF,MAAO2jF,GACPC,QAASC,OAEXzB,EAAKhgF,QAAU,CACbulB,MAAO1nB,EACPujF,gBAAiBA,GAInBpB,EAAK0B,MAAQ3E,EACbiD,EAAKhB,QAAUoC,EAEflD,EAAUK,MAAM1gF,EAAamiF,EAC/B,EAjCA,SAAQN,EAAaxF,kBAAmByE,GAEpChhF,EACFxE,EAAQw0E,oBAAoBhwE,EAAY2jF,GAC/BZ,EACTA,EAAgBvnF,EAAS2E,GAAKwH,KAAKg8E,IAMjCF,GAAkB,GAClB,QAAKjoF,EAAQm0E,YAAagU,IAuB1BD,GACFtE,EAAYvC,OAEhB,EAEA+B,EAAU/7E,UAAU+9E,MAAQ,SAAU1gF,EAAao/E,GACjD,IAAIY,EAAahgF,EAAYwuD,IAEzB+wB,EAAWl9E,KAAKm9E,aAAan/E,IAAI2/E,IAEpCT,EAASgB,OAAShB,EAASgB,KAAOnB,GACnCG,EAASiB,MAAQjB,EAASiB,KAAKsD,KAAK1E,GACpCG,EAASiB,KAAOpB,EAChBA,EAAKO,gBAAkBJ,EAASrgF,QAChCkgF,EAAKE,WAAaC,CACpB,EAEAb,EAAUqF,iBAAmB,SAAUlC,EAAcC,GAUnD,OATI,QAAWD,KACbA,EAAe,CACbvE,aAAcuE,EACd/hF,WAAYkkF,GAAiBnC,KAIjCA,EAAarzB,KAAM,SAAO,gBAC1BszB,IAAeD,EAAaC,WAAaA,GAClCD,CACT,EAGOnD,CACT,CAnZA,GAqZA,SAAS0E,GAAiBjhF,GACxBA,EAAQm7E,aAAan7E,EAAQ7G,QAAS6G,EAAQlC,IAAKkC,EAAQsiB,QAC7D,CAEA,SAASi/D,GAAUvhF,GACjB,OAAOA,EAAQohF,iBAAmBU,EACpC,CAEA,SAASA,KACP5hF,KAAKwhF,MAAMlH,QACXt6E,KAAK6hF,gBAAgBvH,OACvB,CAEA,SAASiH,KACPvhF,KAAKwhF,OAASxhF,KAAKwhF,MAAMlH,OAC3B,CAEA,SAASmG,GAAe3gF,GACtB,OAAOA,EAAQsgF,KAAOtgF,EAAQsgF,KAAKtgF,EAAQulB,MAAOvlB,EAAQ7G,QAAS6G,EAAQlC,IAAKkC,EAAQsiB,SAAW,IACrG,CAEA,SAASs+D,GAAgB5gF,GACnBA,EAAQ8gF,gBACV9gF,EAAQjC,KAAK8S,iBAGf,IAAImxE,EAAehiF,EAAQgiF,cAAe,QAAiBhiF,EAAQpC,MAAMoC,EAAQulB,MAAOvlB,EAAQ7G,QAAS6G,EAAQlC,IAAKkC,EAAQsiB,UAC9H,OAAO0/D,EAAatmF,OAAS,GAAI,QAAIsmF,GAAc,SAAUj9E,EAAGuF,GAC9D,OAAO23E,GAAuB33E,EAChC,IAAK43E,EACP,CAEA,IAAIA,GAA2BD,GAAuB,GAEtD,SAASA,GAAuBE,GAC9B,OAAO,SAAUh/D,EAAQnjB,GACvB,IAAIjC,EAAOiC,EAAQjC,KACfqkF,EAAcpiF,EAAQgiF,aAAaG,GAEvC,GAAIC,GAAeA,EAAYvH,SAC7B,IAAK,IAAIr/E,EAAI2nB,EAAOvX,MAAOpQ,EAAI2nB,EAAOtX,IAAKrQ,IACzC4mF,EAAYvH,SAAS98E,EAAMvC,QAEpB4mF,GAAeA,EAAYC,UACpCD,EAAYC,SAASl/D,EAAQplB,EAEjC,CACF,CAEA,SAAS8iF,GAAgB7gF,GACvB,OAAOA,EAAQjC,KAAKhB,OACtB,CAUA,SAAS8kF,GAAiBS,GACxB3kF,GAAa,KAEb,IAEE2kF,EAAWC,GAAaC,GACb,CAAX,MAAOxxD,GAAI,CAEb,OAAOrzB,EACT,CAEA,IAEIA,GAFA4kF,GAAc,CAAC,EACfC,GAAU,CAAC,EAef,SAASC,GAAYrwE,EAAQswE,GAE3B,IAAK,IAAI9T,KAAU8T,EAAIliF,UAErB4R,EAAOw8D,GAAU,IAIrB,CArBA6T,GAAYF,GAAaI,GACzBF,GAAYD,GAAS,GAErBD,GAAY7U,iBAAmB6U,GAAY5U,oBAAsB,SAAUtvE,GACzEV,GAAaU,CACf,EAEAkkF,GAAY1zD,cAAgB,SAAU+zD,GACd,WAAlBA,EAAK9zD,UAAyB8zD,EAAKvX,UACrC1tE,GAAailF,EAAKvX,QAEtB,EAYA,UCjgBIwX,GAAW,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WACpJ,IACEhnE,MAAOgnE,GACP/T,WAAY,CAAC,CAAC,UAAW,UAAW,WAAY,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,WAAY,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAAY+T,KCHvNC,GAAgB,UAChBnpD,GAAkB,UAElBopD,GAAa,WACf,MAAO,CACLt7C,SAAU,CACRpO,UAAW,CACTxd,MAAOinE,KAGXpzC,UAAW,CACTrW,UAAW,CACTxd,MAAO,YAGX8zB,UAAW,CACTC,UAAW,CACT/zB,MAAO,CAAC,yBAA0B,4BAGtCu0B,eAAgB,CACd/W,UAAW,CACTxd,MAAO,YAIf,EAEI8+D,GAAe,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WACxGjS,GAAQ,CACV3B,UAAU,EACVlrD,MAAO8+D,GACPhhD,gBAAiBA,GACjB0F,YAAa,CACXhG,UAAW,CACTxd,MAAO,WAETwlB,WAAY,CACVxlB,MAAO,WAETjW,MAAO,CAELiW,MAAO,SAGXmnE,OAAQ,CACN1hD,UAAW,CACTzlB,MAAOinE,KAGXxhD,UAAW,CACTzlB,MAAOinE,IAETG,MAAO,CACL3hD,UAAW,CACTzlB,MAAO,WAET4lC,aAAc,CACZ5lC,MAAO,YAGX85D,QAAS,CACPuN,UAAW,CACTpnE,YAAagnE,KAGjBK,SAAU,CACRrnE,YAAa,UACbwlB,UAAW,CACTzlB,MAAOinE,IAETM,WAAY,CACVvnE,MAAO,yBAETwnE,YAAa,CACXxnE,MAAO,UACPC,YAAa,WAEfwnE,gBAAiB,CACfznE,MAAO,UACP5f,QAAS,IAEXsnF,YAAa,wBACbxQ,SAAU,CACRsQ,YAAa,CACXvnE,YAAa,UACbD,MAAO,WAETynE,gBAAiB,CACfznE,MAAO,UACP5f,QAAS,KAGbunF,eAAgB,CACdnqD,UAAW,CACTxd,MAAO,UACPkB,MAAO,GAET6yB,UAAW,CACT/zB,MAAO,YAGX4nE,uBAAwB,CACtBpqD,UAAW,CACTxd,MAAO,WAET+zB,UAAW,CACT/zB,MAAO,aAIbi8D,UAAW,CACTx2C,UAAW,CACTzlB,MAAOinE,KAGX1R,SAAU,CACR/3C,UAAW,CACTxd,MAAOinE,IAETl9E,MAAO,CACLiW,MAAOinE,IAETY,aAAc,CACZ7nE,MAAOinE,GACPhnE,YAAagnE,KAGjB5N,SAAU,CACR34D,UAAW,CACTV,MAAO8d,IAETgqD,SAAU,CACR9nE,MAAOinE,IAETc,WAAY,CACV/nE,MAAOinE,IAETe,UAAW,CACThoE,MAAOinE,KAGXzyC,SAAU0yC,KACVtyC,QAASsyC,KACTvkF,UAAWukF,KACXlzC,aAAckzC,KACdtqD,KAAM,CACJ+P,OAAQ,UAEVs7C,MAAO,CACLjoE,MAAO8+D,IAEToJ,MAAO,CACLd,MAAO,CACLpnE,MAAOinE,IAETr7C,SAAU,CACRpO,UAAW,CACTxd,MAAO,CAAC,CAAC,EAAG,4BAGhB2zB,UAAW,CACT3zB,MAAOinE,IAETkB,OAAQ,CACNnoE,MAAO,YAGXooE,YAAa,CACX1nE,UAAW,CACTV,MAAO,UACPqoE,OAAQ,UACRpoE,YAAa,UACbqoE,aAAc,aAMpBzb,GAAM74B,aAAaH,UAAU1c,MAAO,EACpC,U,WChKIoxD,GAEJ,WACE,SAASA,IAAoB,CAyF7B,OAvFAA,EAAiB5jF,UAAU6jF,eAAiB,SAAUt1D,GACpD,IAAIu1D,EAAW,CAAC,EACZC,EAAY,CAAC,EACbC,EAAa,CAAC,EAElB,GAAI,KAAgBz1D,GAAQ,CAC1B,IAAI01D,GAAc,SAAe11D,GAEjCu1D,EAASx1D,SAAW21D,EAAYC,MAAQ,KACxCJ,EAASjZ,QAAUoZ,EAAYE,KAAO,IACxC,KACK,CAGD,IAAIC,EAAa,CAAC,QAAS,OAAQ,MAC/BC,EAAa,CACfhgF,KAAM,EACN9L,UAAW,EACXwY,SAAU,GAEZ,KAAYwd,GAAO,SAAUze,EAAKvN,GAGhC,IAFA,IAAI+hF,GAAW,EAENtpF,EAAI,EAAGA,EAAIopF,EAAWlpF,OAAQF,IAAK,CAC1C,IAAIupF,EAAaH,EAAWppF,GACxBwpF,EAAYjiF,EAAIkiF,YAAYF,GAEhC,GAAIC,EAAY,GAAKA,IAAcjiF,EAAIrH,OAASqpF,EAAWrpF,OAAQ,CACjE,IAAIozB,EAAW/rB,EAAI8C,MAAM,EAAGm/E,GAEX,SAAbl2D,IACFw1D,EAASx1D,SAAWA,EACpBw1D,EAASS,EAAW1yC,eAAiB/hC,EACrCw0E,GAAW,EAEf,CACF,CAEID,EAAW5+E,eAAelD,KAC5BwhF,EAAUxhF,GAAOuN,EACjBw0E,GAAW,GAGRA,IACHN,EAAWzhF,GAAOuN,EAEtB,GACF,CAEF,MAAO,CACLg0E,SAAUA,EACVC,UAAWA,EACXC,WAAYA,EAEhB,EAEAJ,EAAiB5jF,UAAUsO,OAAS,SAAUiiB,EAAWhC,GAEvD,IAAIm2D,EAAYhlF,KAAKglF,UAErB,IAAKA,EACH,OAAO,EAGT,IAAIC,EAAWD,EAAUC,SACrBC,EAAcF,EAAUE,YACxB7/D,EAAQ2/D,EAAU3/D,MAClB8tC,EAAO6xB,EAAU7xB,KAErB,IAAK9tC,IAAU8tC,EACb,OAAO,EAGT,IAAIixB,EAAWv1D,EAAMu1D,SACjBC,EAAYx1D,EAAMw1D,UACtB,OAAOc,EAAMf,EAAU/+D,EAAO,aAAe8/D,EAAMf,EAAU/+D,EAAO,YAAc8/D,EAAMf,EAAU/+D,EAAO,QAAS,mBAAqB8/D,EAAMf,EAAU/+D,EAAO,SAAW8/D,EAAMf,EAAU/+D,EAAO,OAAS8/D,EAAMd,EAAWa,EAAa,SAAWC,EAAMd,EAAWa,EAAa,cAAgBC,EAAMd,EAAWa,EAAa,eAAiB/xB,EAAKiyB,uBAAyBjyB,EAAKiyB,sBAAsBv0D,EAAWhC,EAAMy1D,WAAYW,EAAUC,IAE/a,SAASC,EAAMt2D,EAAOw2D,EAAMjvC,EAAMkvC,GAChC,OAAsB,MAAfz2D,EAAMunB,IAAiBivC,EAAKC,GAAclvC,KAAUvnB,EAAMunB,EACnE,CACF,EAEA8tC,EAAiB5jF,UAAUilF,aAAe,WAExCvlF,KAAKglF,UAAY,IACnB,EAEOd,CACT,CA3FA,GCrBIsB,GAAuB,CAAC,SAAU,aAAc,eAAgB,gBAChEC,GAAeD,GAAqBlgF,OAAO,CAAC,qBAE5CogF,GAAmB,CACrB1L,mBAAmB,EAEnBC,kBAAkB,EAClBv8E,MAAO,SAAUC,EAAa1E,GAC5B,IAAI4E,EAAOF,EAAYG,UAMvB,GAJIH,EAAYgoF,YACd9nF,EAAKqS,UAAU,aAAcvS,EAAYgoF,YAGtChoF,EAAYioF,gBAAjB,CAQA,IAJA,IAAIC,EAAgB,CAAC,EACjBC,EAAkB,CAAC,EACnBC,GAAc,EAETzqF,EAAI,EAAGA,EAAIkqF,GAAqBhqF,OAAQF,IAAK,CACpD,IAAI0qF,EAAiBR,GAAqBlqF,GACtC8U,EAAMzS,EAAYK,IAAIgoF,IAEtB,QAAW51E,IACb21E,GAAc,EACdD,EAAgBE,GAAkB51E,GAElCy1E,EAAcG,GAAkB51E,CAEpC,CAQA,GANAy1E,EAAcv9C,OAASu9C,EAAcv9C,QAAU3qC,EAAYsoF,cAC3DpoF,EAAKqS,WAAU,QAAO,CACpBy1E,WAAYhoF,EAAYgoF,YAAcE,EAAcv9C,OACpD49C,iBAAkBvoF,EAAYK,IAAI,qBACjC6nF,KAEC5sF,EAAQy0E,iBAAiB/vE,GAA7B,CAIA,IAAIwoF,GAAgB,QAAKL,GAYzB,MAAO,CACLnL,SAAUoL,EAAcpL,EAAW,KAfrC,CA1BA,CA8BA,SAASA,EAAS98E,EAAMuM,GAItB,IAHA,IAAIg8E,EAAWzoF,EAAYquB,YAAY5hB,GACnC6Y,EAAStlB,EAAYgmC,cAAcv5B,GAE9B9O,EAAI,EAAGA,EAAI6qF,EAAc3qF,OAAQF,IAAK,CAC7C,IAAI0qF,EAAiBG,EAAc7qF,GACnCuC,EAAK6S,cAActG,EAAK47E,EAAgBF,EAAgBE,GAAgBI,EAAUnjE,GACpF,CACF,CAKF,GAEEojE,GAAiB,CACnBrM,mBAAmB,EAEnBC,kBAAkB,EAClBv8E,MAAO,SAAUC,EAAa1E,GAC5B,GAAK0E,EAAYioF,kBAKb3sF,EAAQy0E,iBAAiB/vE,GAA7B,CAIA,IAAIE,EAAOF,EAAYG,UAevB,MAAO,CACL68E,SAAU98E,EAAKmK,cAAgB2yE,EAAW,KAlB5C,CAIA,SAASA,EAAS98E,EAAMuM,GAGtB,IAFA,IAAI6a,EAAYpnB,EAAK8R,aAAavF,GAEzB9O,EAAI,EAAGA,EAAImqF,GAAajqF,OAAQF,IAAK,CAC5C,IAAI0qF,EAAiBP,GAAanqF,GAC9B8U,EAAM6U,EAAUtrB,WAAWqsF,GAAgB,GAEpC,MAAP51E,GACFvS,EAAK6S,cAActG,EAAK47E,EAAgB51E,EAE5C,CACF,CAKF,GC9FK,SAASk2E,GAAsBzoF,EAAMhF,EAAWgK,GACrD,OAAQA,GACN,IAAK,QACH,IAAI/G,EAAQ+B,EAAKwS,cAAcxX,EAAW,SAC1C,OAAOiD,EAAM+B,EAAKmS,UAAU,aAE9B,IAAK,UACH,OAAOnS,EAAKwS,cAAcxX,EAAW,SAASkD,QAEhD,IAAK,SACL,IAAK,aACL,IAAK,QACH,OAAO8B,EAAKwS,cAAcxX,EAAWgK,GAEvC,QACM,EAKV,CACO,SAAS0jF,GAAkB1oF,EAAMgF,GACtC,OAAQA,GACN,IAAK,QACH,IAAI/G,EAAQ+B,EAAKmS,UAAU,SAC3B,OAAOlU,EAAM+B,EAAKmS,UAAU,aAE9B,IAAK,UACH,OAAOnS,EAAKmS,UAAU,SAASjU,QAEjC,IAAK,SACL,IAAK,aACL,IAAK,QACH,OAAO8B,EAAKmS,UAAUnN,GAExB,QACM,EAKV,C,cCPA,SAAS2jF,GAA+BroF,EAAMsoF,EAAcC,EAAOztF,EAASmpB,GAC1E,IAAIukE,EAAkBxoF,EAAOsoF,EAExBC,EAAME,SAASD,IAKlB1tF,EAAQ01B,cAAc,CACpBC,SAAU,SACVu8C,QAAS,QACR,SAAUxtE,GAKX,IAJA,IAAIyT,EAAczT,EAAYyT,YAC1By1E,EAAclpF,EAAYic,OAAOitE,YACjCC,EAAW1kE,EAAQ0kE,SAEdxrF,EAAI,EAAGA,EAAIwrF,EAAStrF,OAAQF,IACnC,GAAIwrF,EAASxrF,GAAG8V,cAAgBA,EAAa,CAC3C,IAAIvT,EAAOF,EAAYG,UACnBjF,GAAY,QAAegF,EAAMukB,EAAQ2kE,mBAC7CL,EAAMrkC,QAAQskC,EAAiB,CAC7BxoF,KAAMwoF,EACNlY,SAAU9wE,EAAYiP,GACtBjI,MAAM,QAAQ9L,GAAagF,EAAKsP,QAAQtU,EAAU,IAAMgF,EAAKsP,QAAQtU,GACrEiuF,UAAU,QAASD,GAAeA,GAAc,QAAO,CAAC,EAAGA,IAE/D,CAEJ,GAEJ,CAEO,SAASG,GAAyBC,EAAeP,EAAO9oF,GAC7DqpF,EAAcpgE,GAAG,iBAAiB,SAAU5D,GAC1C,IAAIhqB,EAAU2E,EAAIumB,WAEdlB,EAAOikE,aACTV,GAA+B,MAAO,gBAAiBE,EAAOztF,EAASgqB,GACvEujE,GAA+B,MAAO,gBAAiBE,EAAOztF,EAASgqB,IACxC,WAAtBA,EAAOkkE,YAChBX,GAA+B,MAAO,WAAYE,EAAOztF,EAASgqB,GAClEujE,GAA+B,MAAO,WAAYE,EAAOztF,EAASgqB,IACnC,aAAtBA,EAAOkkE,aAChBX,GAA+B,MAAO,aAAcE,EAAOztF,EAASgqB,GACpEujE,GAA+B,MAAO,aAAcE,EAAOztF,EAASgqB,GAExE,GACF,C,0FC1EImkE,GAAW,IAAIC,GAAA,EACfC,GAAa,IAAIC,GAAA,GAAI,KACrBC,GAAY,CAAC,SAAU,aAAc,mBAAoB,QAAS,kBAAmB,aAAc,aAAc,eAAgB,iBAQ9H,SAASC,GAA+BC,EAAa9pF,GAC1D,GAAoB,SAAhB8pF,EACF,OAAO,KAGT,IAAIhpF,EAAMd,EAAIe,sBACV6xB,EAAK5yB,EAAIgpB,QACT+gE,EAA4B,QAApBn3D,EAAGi2B,QAAQtoD,KAEnBupF,EAAYpN,OACd8M,GAAS,UAAUM,GAGrB,IAAIE,EAAaR,GAASppF,IAAI0pF,GAE9B,GAAIE,EACF,OAAOA,EAGT,IAAIC,GAAW,QAASH,EAAa,CACnCp/C,OAAQ,OACR8G,WAAY,EACZ82C,kBAAkB,EAClBvqE,MAAO,qBACP8d,gBAAiB,KACjB0tC,WAAY,EACZC,WAAY,EACZ/lD,SAAU,EACVymE,aAAc,IACdC,cAAe,MAGgB,SAA7BF,EAASpuD,kBACXouD,EAASpuD,gBAAkB,MAG7B,IAAIuuD,EAAU,CACZC,OAAQ,UAOV,OALAC,EAAkBF,GAClBA,EAAQ3mE,SAAWwmE,EAASxmE,SAC5B2mE,EAAQzyD,OAASyyD,EAAQxyD,OAASmyD,EAAQ,EAAI,EAAIjpF,EAClD0oF,GAAS5iF,IAAIkjF,EAAaM,GAC1BN,EAAYpN,OAAQ,EACb0N,EAEP,SAASE,EAAkBF,GAIzB,IAHA,IAcIG,EAdAr1B,EAAO,CAACp0D,GACR0pF,GAAa,EAER9sF,EAAI,EAAGA,EAAIksF,GAAUhsF,SAAUF,EAAG,CACzC,IAAI4R,EAAQ26E,EAASL,GAAUlsF,IAE/B,GAAa,MAAT4R,KAAkB,QAAQA,MAAW,QAASA,MAAW,QAASA,IAA2B,mBAAVA,EAAqB,CAC1Gk7E,GAAa,EACb,KACF,CAEAt1B,EAAK/vD,KAAKmK,EACZ,CAIA,GAAIk7E,EAAY,CACdD,EAAWr1B,EAAKpzC,KAAK,MAAQioE,EAAQ,OAAS,IAC9C,IAAItxC,EAAQixC,GAAWtpF,IAAImqF,GAEvB9xC,IACFsxC,EAAQK,EAAQK,WAAahyC,EAAQ2xC,EAAQM,MAAQjyC,EAEzD,CAEA,IAaI7nC,EAbA24D,EAAaohB,GAAoBV,EAAS1gB,YAC1CC,EAAaohB,GAAoBX,EAASzgB,YAC1CqhB,EAAcC,GAAqBb,EAASv/C,QAC5CqgD,EAAoBC,GAAoBzhB,GACxC0hB,EAAmBC,GAAoB1hB,GACvC2hB,GAAUpB,GAAS,qBACnBqB,EAAUrB,GAAS,CACrBsB,IAAK,IACLC,MAAO,CAAC,EACRrmF,IAAK,MACLm0E,SAAU,IAERmS,EAAQC,IAyBZ,SAASA,IAcP,IAFA,IAAIvsE,EAAQ,EAEHvhB,EAAI,EAAG+tF,EAAOV,EAAkBntF,OAAQF,EAAI+tF,IAAQ/tF,EAC3DuhB,GAAQ,SAAuBA,EAAO8rE,EAAkBrtF,IAG1D,IAAIguF,EAAgB,EAEpB,IAAShuF,EAAI,EAAG+tF,EAAOZ,EAAYjtF,OAAQF,EAAI+tF,IAAQ/tF,EACrDguF,GAAgB,SAAuBA,EAAeb,EAAYntF,GAAGE,QAGvEqhB,GAASysE,EACT,IAAIxsE,EAAS+rE,EAAmBF,EAAkBntF,OAASitF,EAAYjtF,OAiBvE,MAAO,CACLqhB,MAAOvf,KAAKN,IAAI,EAAGM,KAAKH,IAAI0f,EAAOgrE,EAASC,eAC5ChrE,OAAQxf,KAAKN,IAAI,EAAGM,KAAKH,IAAI2f,EAAQ+qE,EAASE,gBAElD,CAEA,SAASwB,IACH/6E,IACFA,EAAIg7E,UAAU,EAAG,EAAGT,EAAOlsE,MAAOksE,EAAOjsE,QAErC+qE,EAASpuD,kBACXjrB,EAAIi7E,UAAY5B,EAASpuD,gBACzBjrB,EAAIk7E,SAAS,EAAG,EAAGX,EAAOlsE,MAAOksE,EAAOjsE,UAM5C,IAFA,IAAI6sE,EAAO,EAEFruF,EAAI,EAAGA,EAAI8rE,EAAW5rE,SAAUF,EACvCquF,GAAQviB,EAAW9rE,GAGrB,KAAIquF,GAAQ,GAAZ,CAKA,IAAI/sE,GAAKisE,EACLe,EAAM,EACNC,EAAW,EACXC,EAAO,EAEX,MAAOltE,EAAIusE,EAAMrsE,OAAQ,CACvB,GAAI8sE,EAAM,IAAM,EAAG,CACjB,IAAIG,EAAYF,EAAW,EAAIpB,EAAYjtF,OACvCmhB,EAAI,EACJqtE,EAAO,EACPC,EAAY,EAEhB,MAAOttE,EAAkB,EAAdwsE,EAAMtsE,MAAW,CAC1B,IAAIqtE,EAAO,EAEX,IAAS5uF,EAAI,EAAGA,EAAI6rE,EAAW2iB,GAAMtuF,SAAUF,EAC7C4uF,GAAQ/iB,EAAW2iB,GAAMxuF,GAG3B,GAAI4uF,GAAQ,EAEV,MAIF,GAAIF,EAAO,IAAM,EAAG,CAClB,IAAIprF,EAAmC,IAA3B,EAAIipF,EAASz4C,YACrBhB,EAAOzxB,EAAIwqD,EAAW2iB,GAAME,GAAQprF,EACpCurF,EAAQvtE,EAAIwqD,EAAWwiB,GAAOhrF,EAC9Bie,EAAQsqD,EAAW2iB,GAAME,GAAQnC,EAASz4C,WAC1CtyB,EAASsqD,EAAWwiB,GAAO/B,EAASz4C,WACpCg7C,EAAYH,EAAY,EAAIxB,EAAYsB,GAAWvuF,OACvD6uF,EAAYj8C,EAAM+7C,EAAOttE,EAAOC,EAAQ2rE,EAAYsB,GAAWK,GACjE,CAEAztE,GAAKwqD,EAAW2iB,GAAME,KACpBC,IACAD,EAEEA,IAAS7iB,EAAW2iB,GAAMtuF,SAC5BwuF,EAAO,EAEX,GAEEF,EAEEA,IAAS3iB,EAAW3rE,SACtBsuF,EAAO,EAEX,CAEAltE,GAAKwqD,EAAWwiB,KACdC,IACAD,EAEEA,IAAQxiB,EAAW5rE,SACrBouF,EAAM,EAEV,CA5DA,CA8DA,SAASS,EAAY1tE,EAAGC,EAAGC,EAAOC,EAAQwtE,GACxC,IAAI9iE,EAAQmgE,EAAQ,EAAIjpF,EACpB4pC,GAAS,SAAagiD,EAAY3tE,EAAI6K,EAAO5K,EAAI4K,EAAO3K,EAAQ2K,EAAO1K,EAAS0K,EAAOqgE,EAASlsE,MAAOksE,EAAS3B,kBAEpH,GAAIyB,EAAO,CACT,IAAI4C,EAAc/5D,EAAGi2B,QAAQ+jC,iBAAiBliD,GAE1CiiD,GACFvB,EAAQhS,SAASj0E,KAAKwnF,EAE1B,MAEE,SAAY/7E,EAAK85B,EAErB,CACF,CAtKIygD,IACFA,EAAOlsE,MAAQssE,EAAMtsE,MAAQne,EAC7BqqF,EAAOjsE,OAASqsE,EAAMrsE,OAASpe,EAC/B8P,EAAMu6E,EAAO0B,WAAW,OAG1BlB,IAEInB,GACFd,GAAWoD,IAAIvC,EAAUY,GAAUC,GAGrChB,EAAQM,MAAQS,EAChBf,EAAQK,WAAaW,EACrBhB,EAAQ2C,SAAWxB,EAAMtsE,MACzBmrE,EAAQ4C,UAAYzB,EAAMrsE,MAwJ5B,CACF,CAQA,SAAS4rE,GAAqBpgD,GAC5B,IAAKA,GAA4B,IAAlBA,EAAO9sC,OACpB,MAAO,CAAC,CAAC,SAGX,IAAI,QAAS8sC,GACX,MAAO,CAAC,CAACA,IAKX,IAFA,IAAIuiD,GAAc,EAETvvF,EAAI,EAAGA,EAAIgtC,EAAO9sC,SAAUF,EACnC,KAAK,QAASgtC,EAAOhtC,IAAK,CACxBuvF,GAAc,EACd,KACF,CAGF,GAAIA,EACF,OAAOnC,GAAqB,CAACpgD,IAG/B,IAAIt5B,EAAS,GAEb,IAAS1T,EAAI,EAAGA,EAAIgtC,EAAO9sC,SAAUF,GAC/B,QAASgtC,EAAOhtC,IAClB0T,EAAOjM,KAAK,CAACulC,EAAOhtC,KAEpB0T,EAAOjM,KAAKulC,EAAOhtC,IAIvB,OAAO0T,CACT,CASA,SAASu5E,GAAoBuC,GAC3B,IAAKA,GAAwB,IAAhBA,EAAKtvF,OAChB,MAAO,CAAC,CAAC,EAAG,IAGd,IAAI,QAASsvF,GAAO,CAClB,IAAIC,EAAYztF,KAAKu6C,KAAKizC,GAC1B,MAAO,CAAC,CAACC,EAAWA,GACtB,CASA,IAFA,IAAIC,GAAc,EAET1vF,EAAI,EAAGA,EAAIwvF,EAAKtvF,SAAUF,EACjC,KAAK,QAASwvF,EAAKxvF,IAAK,CACtB0vF,GAAc,EACd,KACF,CAGF,GAAIA,EACF,OAAOzC,GAAoB,CAACuC,IAG9B,IAAI97E,EAAS,GAEb,IAAS1T,EAAI,EAAGA,EAAIwvF,EAAKtvF,SAAUF,EACjC,IAAI,QAASwvF,EAAKxvF,IAAK,CACjByvF,EAAYztF,KAAKu6C,KAAKizC,EAAKxvF,IAC/B0T,EAAOjM,KAAK,CAACgoF,EAAWA,GAC1B,KAAO,CACDA,GAAY,QAAID,EAAKxvF,IAAI,SAAU2vF,GACrC,OAAO3tF,KAAKu6C,KAAKozC,EACnB,IAEIF,EAAUvvF,OAAS,IAAM,EAG3BwT,EAAOjM,KAAKgoF,EAAUzlF,OAAOylF,IAE7B/7E,EAAOjM,KAAKgoF,EAEhB,CAGF,OAAO/7E,CACT,CASA,SAASw5E,GAAoBsC,GAC3B,IAAKA,GAAwB,kBAATA,GAAqC,IAAhBA,EAAKtvF,OAC5C,MAAO,CAAC,EAAG,GAGb,IAAI,QAASsvF,GAAO,CAClB,IAAII,EAAc5tF,KAAKu6C,KAAKizC,GAC5B,MAAO,CAACI,EAAaA,EACvB,CAEA,IAAIH,GAAY,QAAID,GAAM,SAAUG,GAClC,OAAO3tF,KAAKu6C,KAAKozC,EACnB,IACA,OAAOH,EAAKtvF,OAAS,EAAIuvF,EAAUzlF,OAAOylF,GAAaA,CACzD,CAWA,SAASnC,GAAoBkC,GAC3B,OAAO,QAAIA,GAAM,SAAUvyD,GACzB,OAAOuwD,GAAoBvwD,EAC7B,GACF,CAEA,SAASuwD,GAAoBgC,GAG3B,IAFA,IAAIK,EAAc,EAET7vF,EAAI,EAAGA,EAAIwvF,EAAKtvF,SAAUF,EACjC6vF,GAAeL,EAAKxvF,GAGtB,OAAIwvF,EAAKtvF,OAAS,IAAM,EAGD,EAAd2vF,EAGFA,CACT,CCzae,SAASC,GAAYnyF,EAAS2E,GAC3C3E,EAAQs0E,eAAc,SAAU5vE,GAC9B,IAAI1E,EAAQy0E,iBAAiB/vE,GAA7B,CAIA,IAAIE,EAAOF,EAAYG,UAEnBD,EAAK0S,iBACP1S,EAAKuH,MAAK,SAAUgF,GAClB,IAAI68D,EAAQppE,EAAKwS,cAAcjG,EAAK,SAEpC,GAAI68D,EAAO,CACT,IAAI5qD,EAAYxe,EAAK2S,uBAAuBpG,EAAK,SACjDiS,EAAU4qD,MAAQwgB,GAA+BxgB,EAAOrpE,EAC1D,CACF,IAGF,IAAIqpE,EAAQppE,EAAKmS,UAAU,SAE3B,GAAIi3D,EAAO,CACT,IAAInrE,EAAQ+B,EAAKmS,UAAU,SAC3BlU,EAAMmrE,MAAQwgB,GAA+BxgB,EAAOrpE,EACtD,CApBA,CAqBF,GACF,CCzBA,IAAIytF,GAAY,IAAIC,EAAA,EACpB,M,WCoCIC,GAA8B,qBAAXpjC,OAKnBqjC,GAAyB,EACzBC,GAAmC,IAGnCC,GAA+B,IAG/BC,GAA4B,IAC5BC,GAA6B,IAC7BC,GAA+B,IAC/BC,GAAyB,IACzBC,GAAqC,KACrCC,GAAyB,IACzBC,GAAwB,IACxBC,GAA4B,IAI5BC,GAAoC,KAGpCC,GAAoC,KACpCC,GAAwB,IACxBC,GAAuB,IACvBC,GAAwB,IACjBp+D,GAAW,CACpBK,UAAW,CACTg+D,OAAQb,GACRc,cAAehB,GACfh9D,UAAWo9D,IAEbz9D,OAAQ,CACNC,OAAQy9D,GACRx9D,mBAAoBy9D,GACpBW,OAAQV,GACRW,MAAOV,GACPW,kBAAmBR,GACnBS,UAAWX,GACXY,MAAOT,GACPU,WAAYZ,GACZa,KAAMV,GACNW,MAAOV,KAQPW,GAAsB,sBACtBC,GAAiB,kBACjBC,GAA0B,sBAC1BC,GAAa,kBACbC,GAAqB,wBACrBC,GAAyB,EACzBC,GAA0B,EAC1BC,GAAyB,EAI7B,SAASC,GAAwCC,GAC/C,OAAO,WAGL,IAFA,IAAIC,EAAO,GAEFC,EAAK,EAAGA,EAAK3+E,UAAU1T,OAAQqyF,IACtCD,EAAKC,GAAM3+E,UAAU2+E,GAGvB,IAAI7tF,KAAK+rD,aAKT,OAAO+hC,GAA+B9tF,KAAM2tF,EAAQC,GAJlDG,GAAgB/tF,KAAK4M,GAKzB,CACF,CAEA,SAASohF,GAA8CL,GACrD,OAAO,WAGL,IAFA,IAAIC,EAAO,GAEFC,EAAK,EAAGA,EAAK3+E,UAAU1T,OAAQqyF,IACtCD,EAAKC,GAAM3+E,UAAU2+E,GAGvB,OAAOC,GAA+B9tF,KAAM2tF,EAAQC,EACtD,CACF,CAEA,SAASE,GAA+BzI,EAAMsI,EAAQC,GAGpD,OADAA,EAAK,GAAKA,EAAK,IAAMA,EAAK,GAAGz7C,cACtBm5C,EAAA,YAAmBqC,GAAQ1+E,MAAMo2E,EAAMuI,EAChD,CAEA,IAkBIK,GACArP,GACAsP,GACAC,GACAC,GACAxQ,GACAyQ,GACAC,GACAC,GACAC,GACAC,GACAtsE,GACAusE,GACAC,GACAC,GACAC,GACAC,GACAC,GAnCAC,GAEJ,SAAUt1E,GAGR,SAASs1E,IACP,OAAkB,OAAXt1E,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,IAC7D,CAEA,OANA,QAAUgvF,EAAet1E,GAMlBs1E,CACT,CARA,CAQE1D,EAAA,GAEE2D,GAAqBD,GAAc1uF,UACvC2uF,GAAmBpoE,GAAKmnE,GAA8C,MACtEiB,GAAmBvmE,IAAMslE,GAA8C,OAuBvE,IAAIkB,GAEJ,SAAUx1E,GAGR,SAASw1E,EAAQC,EACjB3mB,EAAOnqD,GACL,IAAIvT,EAAQ4O,EAAOlI,KAAKxR,KAAM,IAAIkkF,KAAuBlkF,KAEzD8K,EAAMskF,aAAe,GACrBtkF,EAAMukF,WAAa,CAAC,EACpBvkF,EAAMwkF,iBAAmB,GACzBxkF,EAAMk/D,eAAiB,CAAC,EAExBl/D,EAAMykF,gBAAkB,GACxBlxE,EAAOA,GAAQ,CAAC,GAEZ,QAASmqD,KACXA,EAAQgnB,GAAahnB,IAGvB19D,EAAM2kF,KAAON,EACb,IAAIO,EAAkB,SAClBC,EAAuB,OACvBC,GAAsB,EAYtBp/D,EAAK1lB,EAAM48C,IAAMmoC,EAAA,GAAaV,EAAK,CACrCW,SAAUzxE,EAAKyxE,UAAYJ,EAC3BK,iBAAkB1xE,EAAK0xE,iBACvBlzE,MAAOwB,EAAKxB,MACZC,OAAQuB,EAAKvB,OACbkzE,IAAK3xE,EAAK2xE,IACVC,cAAc,QAAU5xE,EAAK4xE,aAAcL,GAC3CM,kBAAkB,QAAU7xE,EAAK6xE,iBAAkBP,GACnDQ,YAAa9xE,EAAK8xE,cAEpBrlF,EAAMslF,KAAO/xE,EAAK2xE,IAElBllF,EAAMulF,mBAAoB,EAAAjjE,GAAA,KAAS,QAAKoD,EAAG8/D,MAAO9/D,GAAK,IACvDg4C,GAAQ,QAAMA,GACdA,GAAS,GAAeA,GAAO,GAC/B19D,EAAM49D,OAASF,EACf19D,EAAM69D,SAAU,SAAmBtqD,EAAK4lD,QAAU,OAClDn5D,EAAMylF,aAAe,IAAIn4E,EAAA,EACzB,IAAIxa,EAAMkN,EAAMynB,KAAOq8D,GAAmB9jF,GAE1C,SAAS0lF,EAAiBppE,EAAGC,GAC3B,OAAOD,EAAEqpE,OAASppE,EAAEopE,MACtB,CAgBA,OAdA,EAAAC,EAAA,GAAQC,GAAaH,IACrB,EAAAE,EAAA,GAAQE,GAAoBJ,GAC5B1lF,EAAM+lF,WAAa,IAAI,GAAU/lF,EAAOlN,EAAKgzF,GAAoBD,IACjE7lF,EAAMgmF,eAAiB,IAAI9B,GAE3BlkF,EAAMimF,cAGNjmF,EAAM6xC,QAAS,QAAK7xC,EAAM6xC,OAAQ7xC,GAClC0lB,EAAGp3B,UAAUytB,GAAG,QAAS/b,EAAMkmF,SAAUlmF,GACzC0jF,GAAkBh+D,EAAI1lB,GACtB2jF,GAAej+D,EAAI1lB,IAEnB,QAAeA,GACRA,CACT,CAk3DA,OA17DA,QAAUokF,EAASx1E,GA0EnBw1E,EAAQ5uF,UAAU0wF,SAAW,WAC3B,IAAIhxF,KAAKixF,UAAT,CAIAlC,GAAmB/uF,MACnB,IAAIg+E,EAAYh+E,KAAK6wF,WAErB,GAAI7wF,KAAKmtF,IAAiB,CACxB,IAAIlgE,EAASjtB,KAAKmtF,IAAgBlgE,OAClCjtB,KAAKktF,KAAuB,EAE5B,IACEe,GAAQjuF,MACRmuF,GAAcztF,OAAO8Q,KAAKxR,KAAM,KAAMA,KAAKmtF,IAAgB+D,aAK7D,CAJE,MAAOpgE,GAGP,MAFA9wB,KAAKktF,KAAuB,EAC5BltF,KAAKmtF,IAAkB,KACjBr8D,CACR,CAQA9wB,KAAK0nD,IAAI4oC,QAETtwF,KAAKktF,KAAuB,EAC5BltF,KAAKmtF,IAAkB,KACvBmB,GAAoB98E,KAAKxR,KAAMitB,GAC/BshE,GAAoB/8E,KAAKxR,KAAMitB,EACjC,MACK,GAAI+wD,EAAUoB,WAAY,CAE3B,IAAI+R,EAAa3F,GACbvyF,EAAU+G,KAAKqiB,OACfzkB,EAAMoC,KAAKuyB,KACfyrD,EAAUoB,YAAa,EAEvB,EAAG,CACD,IAAIgS,GAAa,IAAIx2B,KACrBojB,EAAUmC,mBAAmBlnF,GAE7B+kF,EAAUe,0BAA0B9lF,GACpC2kF,GAAkB59E,KAAM/G,GAOxB+kF,EAAUkB,mBAAmBjmF,GAC7B01F,GAAa3uF,KAAMA,KAAKqiB,OAAQzkB,EAAK,SAAU,CAAC,GAChDuzF,IAAe,IAAIv2B,KAASw2B,CAC9B,OAASD,EAAa,GAAKnT,EAAUoB,YAGhCpB,EAAUoB,YACbp/E,KAAK0nD,IAAI4oC,OAIb,CA7DF,CA8DF,EAEApB,EAAQ5uF,UAAU0qD,OAAS,WACzB,OAAOhrD,KAAKyvF,IACd,EAEAP,EAAQ5uF,UAAU8F,MAAQ,WACxB,OAAOpG,KAAK4M,EACd,EAEAsiF,EAAQ5uF,UAAUsmB,MAAQ,WACxB,OAAO5mB,KAAK0nD,GACd,EAEAwnC,EAAQ5uF,UAAU+wF,MAAQ,WACxB,OAAOrxF,KAAKowF,IACd,EAIAlB,EAAQ5uF,UAAUuoE,UAAY,SAAUjvD,EAAQ03E,EAAUC,GACxD,IAAIvxF,KAAKktF,IAQT,GAAIltF,KAAKixF,UACPlD,GAAgB/tF,KAAK4M,QADvB,CAKA,IAAIqgB,EACAkiD,EACAqiB,EAYJ,IAVI,QAASF,KACXC,EAAaD,EAASC,WACtBtkE,EAASqkE,EAASrkE,OAClBkiD,EAAemiB,EAASniB,aACxBqiB,EAAgBF,EAASG,WACzBH,EAAWA,EAASA,UAGtBtxF,KAAKktF,KAAuB,GAEvBltF,KAAKqiB,QAAUivE,EAAU,CAC5B,IAAI7oB,EAAgB,IAAI,EAAczoE,KAAKuyB,MACvCi2C,EAAQxoE,KAAK0oE,OACbzvE,EAAU+G,KAAKqiB,OAAS,IAAIogE,EAChCxpF,EAAQ+kF,UAAYh+E,KAAK6wF,WACzB53F,EAAQ+2F,IAAMhwF,KAAKowF,KACnBn3F,EAAQ8xD,KAAK,KAAM,KAAM,KAAMyd,EAAOxoE,KAAK2oE,QAASF,EACtD,CAEAzoE,KAAKqiB,OAAOwmD,UAAUjvD,EAAQ,CAC5Bu1D,aAAcA,GACbrG,IAEH,IAAIooB,EAAe,CACjBQ,iBAAkBF,EAClBroB,eAAe,GAGjB,GAAIooB,EACFvxF,KAAKmtF,IAAkB,CACrBlgE,OAAQA,EACRikE,aAAcA,GAEhBlxF,KAAKktF,KAAuB,EAG5BltF,KAAK4mB,QAAQ+qE,aACR,CACL,IACE1D,GAAQjuF,MACRmuF,GAAcztF,OAAO8Q,KAAKxR,KAAM,KAAMkxF,EAKxC,CAJE,MAAOpgE,GAGP,MAFA9wB,KAAKmtF,IAAkB,KACvBntF,KAAKktF,KAAuB,EACtBp8D,CACR,CAIK9wB,KAAKowF,MAERpwF,KAAK0nD,IAAI4oC,QAGXtwF,KAAKmtF,IAAkB,KACvBntF,KAAKktF,KAAuB,EAC5BoB,GAAoB98E,KAAKxR,KAAMitB,GAC/BshE,GAAoB/8E,KAAKxR,KAAMitB,EACjC,CAhEA,CAiEF,EAMAiiE,EAAQ5uF,UAAUsxF,SAAW,YAC3B,SAAa,kDACf,EAGA1C,EAAQ5uF,UAAU6jB,SAAW,WAC3B,OAAOnkB,KAAKqiB,MACd,EAEA6sE,EAAQ5uF,UAAUqrE,UAAY,WAC5B,OAAO3rE,KAAKqiB,QAAUriB,KAAKqiB,OAAOspD,WACpC,EAEAujB,EAAQ5uF,UAAU4iC,SAAW,WAC3B,OAAOljC,KAAK0nD,IAAIxkB,UAClB,EAEAgsD,EAAQ5uF,UAAU8iC,UAAY,WAC5B,OAAOpjC,KAAK0nD,IAAItkB,WAClB,EAEA8rD,EAAQ5uF,UAAU3B,oBAAsB,WACtC,OAAOqB,KAAK0nD,IAAIjB,QAAQ/nD,KAErB6sF,IAAapjC,OAAO4nC,kBAAoB,CAC7C,EAOAb,EAAQ5uF,UAAUuxF,kBAAoB,SAAUxzE,GAK9C,OAAOre,KAAK8xF,eAAezzE,EAC7B,EAEA6wE,EAAQ5uF,UAAUwxF,eAAiB,SAAUzzE,GAC3CA,EAAOA,GAAQ,CAAC,EAChB,IAAIooC,EAAUzmD,KAAK0nD,IAAIjB,QAQvB,OAAOA,EAAQorC,kBAAkB,CAC/Bp4D,gBAAiBpb,EAAKob,iBAAmBz5B,KAAKqiB,OAAOrkB,IAAI,mBACzD+zF,WAAY1zE,EAAK0zE,YAAc/xF,KAAKrB,uBAExC,EAEAuwF,EAAQ5uF,UAAU0xF,kBAAoB,SAAU3zE,GAC9CA,EAAOA,GAAQ,CAAC,EAChB,IAAIooC,EAAUzmD,KAAK0nD,IAAIjB,QAQvB,OAAOA,EAAQwrC,eAAe,CAC5BC,WAAY7zE,EAAK6zE,YAErB,EAMAhD,EAAQ5uF,UAAU6xF,cAAgB,WAChC,GAAK9uC,EAAA,eAAL,CAIA,IAAI7yB,EAAKxwB,KAAK0nD,IACVt4C,EAAOohB,EAAG4hE,QAAQC,iBAKtB,OAHA,QAAKjjF,GAAM,SAAUtV,GACnBA,EAAGO,cAAc,MAAM,EACzB,IACOm2B,EAAGi2B,QAAQ6rC,WARlB,CASF,EAEApD,EAAQ5uF,UAAUiyF,WAAa,SAAUl0E,GACvC,IAAIre,KAAKixF,UAAT,CAKA5yE,EAAOA,GAAQ,CAAC,EAChB,IAAIm0E,EAAoBn0E,EAAKm0E,kBACzBv5F,EAAU+G,KAAKqiB,OACfowE,EAAyB,GACzB3qC,EAAO9nD,MACX,QAAKwyF,GAAmB,SAAUnqE,GAChCpvB,EAAQ01B,cAAc,CACpBC,SAAUvG,IACT,SAAU6lD,GACX,IAAI/a,EAAOrL,EAAKkiB,eAAekE,EAAUwkB,UAEpCv/B,EAAK9vC,MAAMoC,SACdgtE,EAAuB1vF,KAAKowD,GAC5BA,EAAK9vC,MAAMoC,QAAS,EAExB,GACF,IACA,IAAIktE,EAAqC,QAA/B3yF,KAAK0nD,IAAIjB,QAAQmsC,UAAsB5yF,KAAKmyF,gBAAkBnyF,KAAK8xF,eAAezzE,GAAMi0E,UAAU,UAAYj0E,GAAQA,EAAKlgB,MAAQ,QAI7I,OAHA,QAAKs0F,GAAwB,SAAUt/B,GACrCA,EAAK9vC,MAAMoC,QAAS,CACtB,IACOktE,CAvBP,CAFE5E,GAAgB/tF,KAAK4M,GA0BzB,EAEAsiF,EAAQ5uF,UAAUuyF,oBAAsB,SAAUx0E,GAChD,IAAIre,KAAKixF,UAAT,CAKA,IAAI6B,EAAsB,QAAdz0E,EAAKlgB,KACb40F,EAAU/yF,KAAKqjB,MACf1B,EAAUrkB,KAAKH,IACfukB,EAAUpkB,KAAKN,IACfg2F,EAAa/1F,IAEjB,GAAIg2F,GAAgBF,GAAU,CAC5B,IAAIG,EAASF,EACT7I,EAAQ6I,EACRG,GAAWH,EACXI,GAAYJ,EACZK,EAAe,GACfC,EAAQj1E,GAAQA,EAAK0zE,YAAc/xF,KAAKrB,uBAC5C,QAAK40F,IAAW,SAAUC,EAAO5mF,GAC/B,GAAI4mF,EAAMnwE,QAAU0vE,EAAS,CAC3B,IAAIhK,EAAS+J,EAAQU,EAAM5sE,QAAQ6/B,QAAQgtC,YAAY3qC,UAAY0qC,EAAM1B,gBAAe,QAAMzzE,IAC1F4B,EAAeuzE,EAAMxoC,SAAS0oC,wBAClCR,EAASvxE,EAAQ1B,EAAamuB,KAAM8kD,GACpC/I,EAAQxoE,EAAQ1B,EAAaouB,IAAK87C,GAClCgJ,EAAUzxE,EAAQzB,EAAaquB,MAAO6kD,GACtCC,EAAW1xE,EAAQzB,EAAasuB,OAAQ6kD,GACxCC,EAAatwF,KAAK,CAChBosF,IAAKpG,EACL36C,KAAMnuB,EAAamuB,KACnBC,IAAKpuB,EAAaouB,KAEtB,CACF,IACA6kD,GAAUI,EACVnJ,GAASmJ,EACTH,GAAWG,EACXF,GAAYE,EACZ,IAAIz2E,EAAQs2E,EAAUD,EAClBp2E,EAASs2E,EAAWjJ,EACpBwJ,EAAe,qBACfC,EAAO/D,EAAA,GAAa8D,EAAc,CACpC7D,SAAUgD,EAAQ,MAAQ,WAO5B,GALAc,EAAKj3C,OAAO,CACV9/B,MAAOA,EACPC,OAAQA,IAGNg2E,EAAO,CACT,IAAIe,EAAY,GAahB,OAZA,QAAKR,GAAc,SAAU7zF,GAC3B,IAAImd,EAAInd,EAAK4uC,KAAO8kD,EAChBt2E,EAAIpd,EAAK6uC,IAAM87C,EACnB0J,GAAa,2BAA6Bl3E,EAAI,IAAMC,EAAI,MAAQpd,EAAK2vF,IAAM,MAC7E,IACAyE,EAAKntC,QAAQqtC,aAAahrC,UAAY+qC,EAElCx1E,EAAK01E,0BACPH,EAAKntC,QAAQutC,mBAAmB31E,EAAK01E,0BAGvCH,EAAKK,qBACEL,EAAKntC,QAAQ6rC,WACtB,CA2BE,OAzBIj0E,EAAK01E,0BACPH,EAAKrzF,IAAI,IAAI,KAAa,CACxB2c,MAAO,CACLP,EAAG,EACHC,EAAG,EACHC,MAAOA,EACPC,OAAQA,GAEVhhB,MAAO,CACL6vB,KAAMtN,EAAK01E,8BAKjB,QAAKV,GAAc,SAAU7zF,GAC3B,IAAI00F,EAAM,IAAI,MAAc,CAC1Bp4F,MAAO,CACL6gB,EAAGnd,EAAK4uC,KAAOklD,EAAQJ,EACvBt2E,EAAGpd,EAAK6uC,IAAMilD,EAAQnJ,EACtB7B,MAAO9oF,EAAK2vF,OAGhByE,EAAKrzF,IAAI2zF,EACX,IACAN,EAAKK,qBACEN,EAAarB,UAAU,UAAYj0E,GAAQA,EAAKlgB,MAAQ,OAEnE,CACE,OAAO6B,KAAKuyF,WAAWl0E,EA1FzB,CAFE0vE,GAAgB/tF,KAAK4M,GA8FzB,EAEAsiF,EAAQ5uF,UAAUo9C,eAAiB,SAAUluB,EAAQtiB,GACnD,OAAOkhF,GAAepuF,KAAM,iBAAkBwvB,EAAQtiB,EACxD,EAEAgiF,EAAQ5uF,UAAUs9C,iBAAmB,SAAUpuB,EAAQtiB,GACrD,OAAOkhF,GAAepuF,KAAM,mBAAoBwvB,EAAQtiB,EAC1D,EAQAgiF,EAAQ5uF,UAAU6zF,aAAe,SAAU3kE,EAAQtiB,GACjD,IAAIlN,KAAKixF,UAAT,CAKA,IACIjiF,EADA/V,EAAU+G,KAAKqiB,OAEf+xE,EAAa/uE,EAAA,GAAsBpsB,EAASu2B,GAwBhD,OAvBA,QAAK4kE,GAAY,SAAUx9E,EAAQ/T,GACjCA,EAAIo3B,QAAQ,WAAa,IAAK,QAAKrjB,GAAQ,SAAUyO,GACnD,IAAIpnB,EAAWonB,EAAMnnB,iBAErB,GAAID,GAAYA,EAASg9B,aACvBjsB,EAASA,KAAY/Q,EAASg9B,aAAa/tB,QACtC,GAAY,iBAARrK,EAAwB,CACjC,IAAIswD,EAAOnzD,KAAKqvF,WAAWhqE,EAAMqtE,UAE7Bv/B,GAAQA,EAAKl4B,eACfjsB,EAASA,GAAUmkD,EAAKl4B,aAAa/tB,EAAOmY,GAMhD,MACM,CAIR,GAAGrlB,KACL,GAAGA,QACMgP,CA5BT,CAFE++E,GAAgB/tF,KAAK4M,GA+BzB,EAkBAsiF,EAAQ5uF,UAAU0P,UAAY,SAAUwf,EAAQiwD,GAC9C,IAAIxmF,EAAU+G,KAAKqiB,OACfgyE,EAAehvE,EAAA,GAAsBpsB,EAASu2B,EAAQ,CACxD8kE,gBAAiB,WAEf32F,EAAc02F,EAAa12F,YAQ/B,IAAIE,EAAOF,EAAYG,UACnBy/B,EAAkB82D,EAAatuF,eAAe,mBAAqBsuF,EAAa92D,gBAAkB82D,EAAatuF,eAAe,aAAelI,EAAKsQ,gBAAgBkmF,EAAax7F,WAAa,KAChM,OAA0B,MAAnB0kC,EAA0B+oD,GAAsBzoF,EAAM0/B,EAAiBkiD,GAAc8G,GAAkB1oF,EAAM4hF,EACtH,EAMAyP,EAAQ5uF,UAAU8yD,wBAA0B,SAAUtkC,GACpD,OAAO9uB,KAAKgqE,eAAel7C,EAAe4jE,SAC5C,EAMAxD,EAAQ5uF,UAAUi0F,qBAAuB,SAAU52F,GACjD,OAAOqC,KAAKqvF,WAAW1xF,EAAY+0F,SACrC,EAEAxD,EAAQ5uF,UAAUywF,YAAc,WAC9B,IAAIjmF,EAAQ9K,MAEZ,QAAKw0F,IAAmB,SAAUC,GAChC,IAAIlkE,EAAU,SAAUO,GACtB,IAGI7N,EAHAhqB,EAAU6R,EAAMqZ,WAEhBrqB,EAAKg3B,EAAE5e,OAEPwiF,EAA0B,cAAZD,EA2BlB,GAzBIC,EACFzxE,EAAS,CAAC,EAEVnpB,IAAM,QAAoBA,GAAI,SAAUoC,GACtC,IAAImzD,GAAS,QAAUnzD,GAEvB,GAAImzD,GAA8B,MAApBA,EAAOx2D,UAAmB,CACtC,IAAIy2D,EAAYD,EAAOC,WAAar2D,EAAQy2B,iBAAiB2/B,EAAOj+C,aAEpE,OADA6R,EAASqsC,GAAaA,EAAU3rB,cAAc0rB,EAAOx2D,UAAWw2D,EAAOh+C,WAAa,CAAC,GAC9E,CACT,CACK,GAAIg+C,EAAOjoB,UAEZ,OADAnkB,GAAS,QAAO,CAAC,EAAGosC,EAAOjoB,YACpB,CAEb,IAAG,GAUDnkB,EAAQ,CACV,IAAIoF,EAAgBpF,EAAOoF,cACvBiO,EAAiBrT,EAAOqT,eAMN,aAAlBjO,GAAkD,cAAlBA,GAAmD,aAAlBA,IACnEA,EAAgB,SAChBiO,EAAiBrT,EAAO7R,aAG1B,IAAIiU,EAAQgD,GAAmC,MAAlBiO,GAA0Br9B,EAAQye,aAAa2Q,EAAeiO,GACvF68B,EAAO9tC,GAASva,EAAyB,WAAnBua,EAAMuJ,SAAwB,aAAe,kBAAkBvJ,EAAMqtE,UAE3F,EASJzvE,EAAOoK,MAAQyD,EACf7N,EAAO9kB,KAAOs2F,EACd3pF,EAAM6pF,iBAAiB3P,UAAY,CACjCC,SAAUnrF,EACVorF,YAAajiE,EACboC,MAAOA,EACP8tC,KAAMA,GAGRroD,EAAMu3C,QAAQoyC,EAASxxE,EACzB,CACF,EAOAsN,EAAQqkE,sBAAuB,EAE/B9pF,EAAM48C,IAAI7gC,GAAG4tE,EAASlkE,EAASzlB,EACjC,KACA,QAAK+pF,IAAgB,SAAUC,EAAYjkE,GACzC/lB,EAAMgmF,eAAejqE,GAAGgK,GAAW,SAAUxD,GAC3CrtB,KAAKqiD,QAAQxxB,EAAWxD,EAC1B,GAAGviB,EACL,KAGA,QAAK,CAAC,kBAAkB,SAAU+lB,GAChC/lB,EAAMgmF,eAAejqE,GAAGgK,GAAW,SAAUxD,GAC3CrtB,KAAKqiD,QAAQxxB,EAAWxD,EAC1B,GAAGviB,EACL,IACAk8E,GAAyBhnF,KAAK8wF,eAAgB9wF,KAAMA,KAAKuyB,KAC3D,EAEA28D,EAAQ5uF,UAAUyrD,WAAa,WAC7B,OAAO/rD,KAAKixF,SACd,EAEA/B,EAAQ5uF,UAAU6yB,MAAQ,WACpBnzB,KAAKixF,UACPlD,GAAgB/tF,KAAK4M,IAIvB5M,KAAK6oE,UAAU,CACb7rC,OAAQ,KACP,EACL,EAEAkyD,EAAQ5uF,UAAUmoB,QAAU,WAC1B,GAAIzoB,KAAKixF,UACPlD,GAAgB/tF,KAAK4M,QADvB,CAKA5M,KAAKixF,WAAY,EACjB,IAAI9B,EAAMnvF,KAAKgrD,SAEXmkC,GACF9pE,EAAA,GAAuBrlB,KAAKgrD,SAAU+pC,GAAmB,IAG3D,IAAIvB,EAAQxzF,KACRpC,EAAM41F,EAAMjhE,KACZt5B,EAAUu6F,EAAMnxE,QACpB,QAAKmxE,EAAMlE,kBAAkB,SAAUphB,GACrCA,EAAUzlD,QAAQxvB,EAAS2E,EAC7B,KACA,QAAK41F,EAAMpE,cAAc,SAAUoE,GACjCA,EAAM/qE,QAAQxvB,EAAS2E,EACzB,IAEA41F,EAAM9rC,IAAIj/B,UAIV+qE,EAAM/D,KAAO+D,EAAMnxE,OAASmxE,EAAMnE,WAAamE,EAAMxpB,eAAiBwpB,EAAMpE,aAAeoE,EAAMlE,iBAAmBkE,EAAM3C,WAAa2C,EAAMjhE,KAAOihE,EAAM9rC,IAAM8rC,EAAMnD,kBAAoBmD,EAAM9qB,OAAS8qB,EAAMjD,aAAeiD,EAAM1C,eAAiB,YAC9OyC,GAAUC,EAAM5mF,GAxBvB,CAyBF,EAMAsiF,EAAQ5uF,UAAUq8C,OAAS,SAAUt+B,GACnC,IAAIre,KAAKktF,IAQT,GAAIltF,KAAKixF,UACPlD,GAAgB/tF,KAAK4M,QADvB,CAKA5M,KAAK0nD,IAAI/K,OAAOt+B,GAEhB,IAAIplB,EAAU+G,KAAKqiB,OAInB,GAFAriB,KAAKg1F,YAAch1F,KAAKg1F,WAAWr4C,SAE9B1jD,EAAL,CAIA,IAAIg8F,EAAch8F,EAAQiwE,YAAY,SAClCj8C,EAAS5O,GAAQA,EAAK4O,OAItBjtB,KAAKmtF,MACO,MAAVlgE,IACFA,EAASjtB,KAAKmtF,IAAgBlgE,QAGhCgoE,GAAc,EACdj1F,KAAKmtF,IAAkB,MAGzBntF,KAAKktF,KAAuB,EAE5B,IACE+H,GAAehH,GAAQjuF,MACvBmuF,GAAcztF,OAAO8Q,KAAKxR,KAAM,CAC9B7B,KAAM,SACN/E,WAAW,QAAO,CAEhBI,SAAU,GACT6kB,GAAQA,EAAKjlB,YAKpB,CAHE,MAAO03B,GAEP,MADA9wB,KAAKktF,KAAuB,EACtBp8D,CACR,CAEA9wB,KAAKktF,KAAuB,EAC5BoB,GAAoB98E,KAAKxR,KAAMitB,GAC/BshE,GAAoB/8E,KAAKxR,KAAMitB,EAlC/B,CAVA,CA6CF,EAEAiiE,EAAQ5uF,UAAU40F,YAAc,SAAUvwF,EAAMwwF,GAC9C,GAAIn1F,KAAKixF,UACPlD,GAAgB/tF,KAAK4M,SAYvB,IARI,QAASjI,KACXwwF,EAAMxwF,EACNA,EAAO,IAGTA,EAAOA,GAAQ,UACf3E,KAAKo1F,cAEAC,GAAe1wF,GAApB,CAQA,IAAI7K,EAAKu7F,GAAe1wF,GAAM3E,KAAKuyB,KAAM4iE,GACrC3kE,EAAKxwB,KAAK0nD,IACd1nD,KAAKg1F,WAAal7F,EAClB02B,EAAGjwB,IAAIzG,EALP,CAMF,EAMAo1F,EAAQ5uF,UAAU80F,YAAc,WAC1Bp1F,KAAKixF,UACPlD,GAAgB/tF,KAAK4M,KAIvB5M,KAAKg1F,YAAch1F,KAAK0nD,IAAIvrD,OAAO6D,KAAKg1F,YACxCh1F,KAAKg1F,WAAa,KACpB,EAEA9F,EAAQ5uF,UAAUg1F,oBAAsB,SAAUC,GAChD,IAAInzE,GAAU,QAAO,CAAC,EAAGmzE,GAEzB,OADAnzE,EAAQjkB,KAAO02F,GAAeU,EAASp3F,MAChCikB,CACT,EAYA8sE,EAAQ5uF,UAAU8nB,eAAiB,SAAUhG,EAASzb,GACpD,GAAI3G,KAAKixF,UACPlD,GAAgB/tF,KAAK4M,SAUvB,IANK,QAASjG,KACZA,EAAM,CACJsmB,SAAUtmB,IAIT6uF,GAAQpzE,EAAQjkB,OAKhB6B,KAAKqiB,OAKV,GAAIriB,KAAKktF,IACPltF,KAAKuvF,gBAAgBxsF,KAAKqf,OAD5B,CAMA,IAAI6K,EAAStmB,EAAIsmB,OACjBohE,GAAiB78E,KAAKxR,KAAMoiB,EAAS6K,GACrC,IAAIqjE,EAAQ3pF,EAAI2pF,MAEZA,EACFtwF,KAAK0nD,IAAI4oC,SACU,IAAVA,GAAmBjtC,EAAA,kBAM5BrjD,KAAKqwF,oBAGP/B,GAAoB98E,KAAKxR,KAAMitB,GAC/BshE,GAAoB/8E,KAAKxR,KAAMitB,EAlB/B,CAmBF,EAEAiiE,EAAQ5uF,UAAUm1F,kBAAoB,WACpC,WAAkB,sBAAuBz1F,KAAKqiB,OAAQriB,KAAKuyB,KAAM,CAG/DmjE,cAAe,IAEnB,EAEAxG,EAAQ5uF,UAAU8K,WAAa,SAAU6X,GACvC,GAAIjjB,KAAKixF,UACPlD,GAAgB/tF,KAAK4M,QADvB,CAKA,IAAIwE,EAAc6R,EAAO7R,YACrBnY,EAAU+G,KAAKmkB,WACfxmB,EAAc1E,EAAQy2B,iBAAiBte,GAEvC,EAIJzT,EAAYyN,WAAW6X,GAQvBjjB,KAAK6wF,WAAWzR,YAAa,EAC7Bp/E,KAAK4mB,QAAQ+qE,QAnBb,CAoBF,EAIAzC,EAAQl9E,cAAgB,WAikBtB,SAAS2jF,EAAkB18F,GACzBA,EAAQ08F,oBACR18F,EAAQooC,YAAW,SAAU1jC,GAC3BA,EAAYg4F,mBACd,GACF,CAIA,SAASC,EAAgB38F,GAEvB,IAAI48F,EAAmB,GACnBC,EAAgB,GAChBC,GAAoB,EAexB,GAdA98F,EAAQ01B,eAAc,SAAUtG,EAAeyG,GAC7C,IAAIkI,EAASlI,EAAe9wB,IAAI,WAAa,EACzCqc,EAAIyU,EAAe9wB,IAAI,MAAQ,EAC/Bg4F,EAAYlnE,EAAemnE,eAC/BF,EAAoBA,KAAuBC,GACxB,WAAlB3tE,EAA6BytE,EAAgBD,GAAkB9yF,KAAK,CACnEi0B,OAAQA,EACR3c,EAAGA,EACHjQ,IAAK0kB,EAAewH,eACpBn4B,KAAMkqB,EACNxlB,IAAKmzF,GAET,IAEID,EAAmB,CAErB,IACIG,EACAC,EAFAC,EAAUP,EAAiBvwF,OAAOwwF,IAGtC,EAAApF,EAAA,GAAQ0F,GAAS,SAAUhvE,EAAGC,GAC5B,OAAID,EAAE4P,SAAW3P,EAAE2P,OACV5P,EAAE/M,EAAIgN,EAAEhN,EAGV+M,EAAE4P,OAAS3P,EAAE2P,MACtB,KACA,QAAKo/D,GAAS,SAAU52F,GACtB,IAAIsvB,EAAiB71B,EAAQye,aAAalY,EAAKrB,KAAMqB,EAAK4K,KACtD4sB,EAASx3B,EAAKw3B,OACdn0B,EAAMrD,EAAKqD,IAEW,MAAtBqzF,IACFl/D,EAAS15B,KAAKN,IAAIk5F,EAAoBl/D,IAGpCn0B,GACEm0B,IAAWk/D,GAAsBrzF,IAAQszF,GAC3Cn/D,IAGFm/D,EAAkBtzF,GACTszF,IACLn/D,IAAWk/D,GACbl/D,IAGFm/D,EAAkB,IAGpBD,EAAqBl/D,EACrBlI,EAAeunE,UAAUr/D,EAC3B,GACF,CACF,CAsGA,SAASs/D,EAAmBx8F,GAI1B,IAHA,IAAIy8F,EAAY,GACZC,EAAY18F,EAAG28F,cAEVn7F,EAAI,EAAGA,EAAIk7F,EAAUh7F,OAAQF,IAAK,CACzC,IAAIo7F,EAAYF,EAAUl7F,GAEN,aAAdo7F,GAA0C,SAAdA,GAAsC,WAAdA,GACxDH,EAAUxzF,KAAK2zF,EAEnB,CAGI58F,EAAGgtF,UAAYhtF,EAAGqyB,OAAO/P,QAC3Bm6E,EAAUxzF,KAAK,UAGbjJ,EAAG68F,aAAe,OAAwB78F,EAAGqyB,OAAO0mD,SACtD0jB,EAAUxzF,KAAK,YACNjJ,EAAG68F,aAAe,OAAoB78F,EAAGqyB,OAAOyqD,MACzD2f,EAAUxzF,KAAK,QAGjBjJ,EAAG88F,UAAUL,EACf,CAEA,SAASM,EAAuBnQ,EAAOztF,GACrC,IAAIu3B,EAAKk2D,EAAMh/B,IACX0qC,EAAU5hE,EAAG4hE,QACb0E,EAAU,EACd1E,EAAQ/1F,UAAS,SAAUvC,GACpBA,EAAGsC,SACN06F,GAEJ,IAEIA,EAAU79F,EAAQ+E,IAAI,yBAA2BqlD,EAAA,SAAaA,EAAA,UAChEpqD,EAAQooC,YAAW,SAAU1jC,GAC3B,IAAIA,EAAYo5F,uBAAhB,CAIA,IAAIC,EAAYtQ,EAAM2I,WAAW1xF,EAAY+0F,UAEzCsE,EAAUC,SACZD,EAAU7zE,cAAa,SAAUrpB,GAC3BA,EAAGqyB,OAAO0mD,WACZ/4E,EAAGqyB,OAAO0mD,SAASqkB,YAAa,EAEpC,GATF,CAWF,GAEJ,CAOA,SAASC,EAAYx5F,EAAaq5F,GAChC,IAAIxvB,EAAY7pE,EAAYK,IAAI,cAAgB,KAChDg5F,EAAU7zE,cAAa,SAAUrpB,GAE1BA,EAAGsC,UAENtC,EAAGgC,MAAMs7F,MAAQ5vB,EAErB,GACF,CAIA,SAAS6vB,EAAQhyE,EAAO8tC,GACtB,IAAI9tC,EAAMiyE,aAAV,CAIA,IAAIj9E,EAAIgL,EAAMrnB,IAAI,MAAQ,EACtBg5B,EAAS3R,EAAMrnB,IAAI,WAAa,EAEpCm1D,EAAKhwC,cAAa,SAAUrpB,GAG1B,OAFAy9F,EAAUz9F,EAAIugB,EAAG2c,GAAS/5B,MAEnB,CACT,GATA,CAUF,CAIA,SAASs6F,EAAUz9F,EAAIugB,EAAG2c,EAAQwgE,GAEhC,IAAI9xF,EAAQ5L,EAAGgsB,iBACXof,EAAYprC,EAAG29F,mBACfr7F,EAAUtC,EAAGsC,QAEjB,GAAIA,EAIF,IAFA,IAAI46E,EAAWl9E,EAAG49F,cAETp8F,EAAI,EAAGA,EAAI07E,EAASx7E,OAAQF,IACnCk8F,EAAQl6F,KAAKN,IAAIu6F,EAAUvgB,EAAS17E,GAAI+e,EAAG2c,EAAQwgE,GAAQA,QAI7D19F,EAAGugB,EAAIA,EACPvgB,EAAGk9B,OAASA,EACZwgE,EAAQl6F,KAAKN,IAAIlD,EAAG2vB,GAAI+tE,GAY1B,GARI9xF,IACFA,EAAM2U,EAAIA,EACV3U,EAAMsxB,OAASA,EAGf95B,SAASs6F,KAAW9xF,EAAM+jB,GAAK+tE,EAAQ,IAGrCtyD,EAAW,CACb,IAAIyyD,EAAsB79F,EAAG69F,oBAC7BzyD,EAAU7qB,EAAIA,EACd6qB,EAAUlO,OAASA,EACnB95B,SAASs6F,KAAWtyD,EAAUzb,GAAK+tE,GAASG,GAAuBA,EAAoBC,UAAY,GAAK,GAC1G,CAEA,OAAOJ,CACT,CAIA,SAASK,EAAYxyE,EAAO8tC,GAC1BA,EAAKhwC,cAAa,SAAUrpB,GAE1B,IAAI,MAAyBA,GAA7B,CAIA,IAAIkiF,EAAcliF,EAAGgsB,iBACjBgyE,EAAYh+F,EAAG29F,mBAEf39F,EAAGi+F,kBACLj+F,EAAGi+F,gBAAkB,MAGnB/b,GAAeA,EAAY+b,kBAC7B/b,EAAY+b,gBAAkB,MAG5BD,GAAaA,EAAUC,kBACzBD,EAAUC,gBAAkB,MAI1Bj+F,EAAGk+F,YACLl+F,EAAGm+F,WAAan+F,EAAG28F,cACnB38F,EAAG+9F,eACM/9F,EAAGm+F,aACZn+F,EAAGm+F,WAAa,KAtBlB,CAwBF,GACF,CAEA,SAASC,EAAa7yE,EAAO8tC,GAC3B,IAAIglC,EAAsB9yE,EAAMlB,SAAS,kBACrCi0E,EAAkB/yE,EAAM/rB,qBACxBE,EAAW2+F,EAAoBn6F,IAAI,YACnC+5F,EAAkBv+F,EAAW,EAAI,CACnCA,SAAUA,EACVE,MAAOy+F,EAAoBn6F,IAAI,SAC/BvE,OAAQ0+F,EAAoBn6F,IAAI,WAE9B,KACJm1D,EAAKhwC,cAAa,SAAUrpB,GAC1B,GAAIA,EAAGqyB,QAAUryB,EAAGqyB,OAAO0mD,SAAU,CAEnC,GAAI,MAAyB/4E,GAC3B,OASF,GANIA,aAAc,QAChB,SAAeA,GAKbA,EAAGu+F,QAAS,CACd,IAAIJ,EAAan+F,EAAGm+F,WAEhBA,GACFn+F,EAAG88F,UAAUqB,EAEjB,CAGA,GAAIG,EAAiB,CACnBt+F,EAAGi+F,gBAAkBA,EACrB,IAAI/b,EAAcliF,EAAGgsB,iBACjBgyE,EAAYh+F,EAAG29F,mBAEfzb,IACFA,EAAY+b,gBAAkBA,GAG5BD,IACFA,EAAUC,gBAAkBA,EAEhC,CAGIj+F,EAAGu+F,SACL/B,EAAmBx8F,EAEvB,CACF,GACF,CAh8BAm0F,GAAU,SAAUvH,GAClB,IAAI1I,EAAY0I,EAAMmK,WACtB7S,EAAUD,iBAAiB2I,EAAMrkE,QACjC27D,EAAUO,oBACVK,GAAY8H,GAAO,GACnB9H,GAAY8H,GAAO,GACnB1I,EAAUoC,MACZ,EAMAxB,GAAc,SAAU8H,EAAO4R,GAQ7B,IAPA,IAAIr/F,EAAUytF,EAAMrkE,OAChB27D,EAAY0I,EAAMmK,WAClB0H,EAAWD,EAAc5R,EAAM4I,iBAAmB5I,EAAM0I,aACxDoJ,EAAUF,EAAc5R,EAAM1c,eAAiB0c,EAAM2I,WACrD7+D,EAAKk2D,EAAMh/B,IACX9pD,EAAM8oF,EAAMn0D,KAEPj3B,EAAI,EAAGA,EAAIi9F,EAAS/8F,OAAQF,IACnCi9F,EAASj9F,GAAG27F,SAAU,EAOxB,SAASwB,EAAUpzE,GAOjB,IAAIqzE,EAAiBrzE,EAAMkmD,iBAE3BlmD,EAAMkmD,kBAAmB,EAEzB,IAAIotB,EAAS,OAAStzE,EAAMzY,GAAK,IAAMyY,EAAMlnB,KACzCg1D,GAAQulC,GAAkBF,EAAQG,GAEtC,IAAKxlC,EAAM,CACT,IAAIylC,GAAY,SAAevzE,EAAMlnB,MACjC2vC,EAAQwqD,EAAc,cAAuBM,EAAUpU,KAAMoU,EAAUnU,KAK3E97D,GAAA,WAAmBiwE,EAAUnU,KAEzB,EAIJtxB,EAAO,IAAIrlB,EACXqlB,EAAKpI,KAAK9xD,EAAS2E,GACnB46F,EAAQG,GAAUxlC,EAClBolC,EAASx1F,KAAKowD,GACd3iC,EAAGjwB,IAAI4yD,EAAK9vC,MACd,CAEAgC,EAAMqtE,SAAWv/B,EAAK0lC,KAAOF,EAC7BxlC,EAAK8jC,SAAU,EACf9jC,EAAK2lC,QAAUzzE,EACf8tC,EAAK9vC,MAAM01E,kBAAoB,CAC7BnqE,SAAUvJ,EAAMuJ,SAChB/W,MAAOwN,EAAMiR,iBAEdgiE,GAAeta,EAAUY,YAAYzrB,EAAM9tC,EAAOpsB,EAAS2E,EAC9D,CA9CA06F,EAAcr/F,EAAQ01B,eAAc,SAAUtG,EAAehD,GACzC,WAAlBgD,GAA8BowE,EAAUpzE,EAC1C,IAAKpsB,EAAQooC,WAAWo3D,GA8CxB,IAASn9F,EAAI,EAAGA,EAAIi9F,EAAS/8F,QAAS,CACpC,IAAI23D,EAAOolC,EAASj9F,GAEf63D,EAAK8jC,QAYR37F,MAXCg9F,GAAenlC,EAAK0rB,WAAWp2D,UAChC+H,EAAGr0B,OAAOg3D,EAAK9vC,OACf8vC,EAAK1qC,QAAQxvB,EAAS2E,GACtB26F,EAASS,OAAO19F,EAAG,GAEfk9F,EAAQrlC,EAAK0lC,QAAU1lC,UAClBqlC,EAAQrlC,EAAK0lC,MAGtB1lC,EAAK0lC,KAAO1lC,EAAK9vC,MAAM01E,kBAAoB,KAI/C,CACF,EAEA7K,GAAiB,SAAUxH,EAAOiH,EAAQvrE,EAASwM,EAAUu8C,GAC3D,IAAIlyE,EAAUytF,EAAMrkE,OAGpB,GAFAppB,EAAQ8yE,iBAAiB3pD,GAEpBwM,EAAL,CAQA,IAAIC,EAAQ,CAAC,EACbA,EAAMD,EAAW,MAAQxM,EAAQwM,EAAW,MAC5CC,EAAMD,EAAW,SAAWxM,EAAQwM,EAAW,SAC/CC,EAAMD,EAAW,QAAUxM,EAAQwM,EAAW,QAC9C,IAAIs9C,EAAY,CACdt9C,SAAUA,EACVC,MAAOA,GAETs8C,IAAYe,EAAUf,QAAUA,GAEhC,IACI8tB,EADAC,EAAkB92E,EAAQ82E,gBAGP,MAAnBA,IACFD,GAAqB,WACrB,QAAK5zE,EAAA,GAA2B6zE,IAAkB,SAAUtsF,GAC1D,IAAIusF,EAAU9zE,EAAA,GAA8BzY,EAAI,MAEjC,MAAXusF,GACFF,EAAmBz0F,IAAI20F,GAAS,EAEpC,KAIFlgG,GAAWA,EAAQ01B,cAAcu9C,GAAW,SAAU7mD,GACpD,IAAI+zE,EAAaH,GAA2D,OAArCA,EAAmBj7F,IAAIqnB,EAAMzY,IAEpE,IAAIwsF,EAMJ,IAAI,SAAkBh3E,GACpB,GAAIiD,aAAiBxK,GAAA,EACfuH,EAAQjkB,OAAS,OAA0BikB,EAAQwc,SAAYvZ,EAAMrnB,IAAI,CAAC,WAAY,eACxF,SAA+BqnB,EAAOjD,EAASskE,EAAMn0D,UAElD,CACL,IAAI9mB,GAAK,SAAiC4Z,EAAMuJ,SAAUvJ,EAAMiR,eAAgBlU,EAAQzd,KAAM+hF,EAAMn0D,MAChG8mE,EAAY5tF,EAAG4tF,UACfC,EAAc7tF,EAAG6tF,YAEjBl3E,EAAQjkB,OAAS,OAAyBk7F,IAAcj3E,EAAQwc,UAClE,SAAcvZ,EAAMuJ,SAAUvJ,EAAMiR,eAAgBowD,EAAMn0D,MAOxD+mE,IACF,QAAKA,GAAa,SAAUlqC,GAC1BhtC,EAAQjkB,OAAS,OAAwB,SAAcixD,IAAc,SAAcA,EACrF,GAEJ,MACS,SAAsBhtC,IAE3BiD,aAAiBxK,GAAA,KACnB,SAA2BwK,EAAOjD,EAASskE,EAAMn0D,OACjD,SAA6BlN,GAC7BypE,GAAmBpI,GAGzB,GAAGA,GACHztF,GAAWA,EAAQ01B,cAAcu9C,GAAW,SAAU7mD,GACpD,IAAI+zE,EAAaH,GAA2D,OAArCA,EAAmBj7F,IAAIqnB,EAAMzY,IAEhEwsF,GAKJG,EAAS7S,EAAmB,WAAb93D,EAAwB,aAAe,kBAAkBvJ,EAAMqtE,UAChF,GAAGhM,EA9EH,MAFE,QAAK,GAAGphF,OAAOohF,EAAM4I,kBAAkBhqF,OAAOohF,EAAM0I,cAAemK,GAkFrE,SAASA,EAASpmC,GAChBA,GAAQA,EAAK8jC,SAAW9jC,EAAKw6B,IAAWx6B,EAAKw6B,GAAQx6B,EAAK2lC,QAAS7/F,EAASytF,EAAMn0D,KAAMnQ,EAC1F,CACF,EAEA+rE,GAAgB,CACdqL,iBAAkB,SAAUp3E,GAC1B6rE,GAAQjuF,MACRmuF,GAAcztF,OAAO8Q,KAAKxR,KAAMoiB,EAAS,CAIvC+mD,cAAoC,MAArB/mD,EAAQ0nD,WAE3B,EACAppE,OAAQ,SAAU0hB,EAAS8uE,GACzB,IAAIj4F,EAAU+G,KAAKqiB,OACfzkB,EAAMoC,KAAKuyB,KACX/B,EAAKxwB,KAAK0nD,IACV+xC,EAAcz5F,KAAKuwF,aACnBvS,EAAYh+E,KAAK6wF,WAErB,GAAK53F,EAAL,CAIAA,EAAQ8yE,iBAAiB3pD,GACzB47D,EAAU1U,YAAYrwE,EAASmpB,GAC/B47D,EAAUmC,mBAAmBlnF,GAM7BwgG,EAAYl7C,OAAOtlD,EAAS2E,GAC5BogF,EAAUe,0BAA0B9lF,EAASmpB,GAI7Cw7D,GAAkB59E,KAAM/G,GAKxBwgG,EAAY/4F,OAAOzH,EAAS2E,GAC5B+3F,EAAkB18F,GAClB+kF,EAAUkB,mBAAmBjmF,EAASmpB,GACtCD,GAAOniB,KAAM/G,EAAS2E,EAAKwkB,EAAS8uE,GAEpC,IAAIz3D,EAAkBxgC,EAAQ+E,IAAI,oBAAsB,cACpD6oE,EAAW5tE,EAAQ+E,IAAI,YAC3BwyB,EAAGwjE,mBAAmBv6D,GAEN,MAAZotC,GAAiC,SAAbA,GACtBr2C,EAAGkpE,YAAY7yB,GAGjB,WAAkB,cAAe5tE,EAAS2E,EAjC1C,CAkCF,EACA6oC,gBAAiB,SAAUrkB,GACzB,IAAItX,EAAQ9K,KAER/G,EAAU+G,KAAKqiB,OACfzkB,EAAMoC,KAAKuyB,KAEf,GAAKt5B,EAAL,CAIAA,EAAQ8yE,iBAAiB3pD,GAEzB,IAAIu3E,EAAqB,GACzB1gG,EAAQ01B,eAAc,SAAUtG,EAAeyG,GAC7C,GAAsB,WAAlBzG,EAAJ,CAIA,IAAIuxE,EAAgB9uF,EAAMsoD,wBAAwBtkC,GAElD,GAAI8qE,GAAiBA,EAAc3C,QACjC,GAAI2C,EAAcnzD,gBAAiB,CACjC,IAAIz3B,EAAS4qF,EAAcnzD,gBAAgB3X,EAAgB71B,EAAS2E,EAAKwkB,GACzEpT,GAAUA,EAAOtO,QAAUi5F,EAAmB52F,KAAK62F,EACrD,MACED,EAAmB52F,KAAK62F,EAT5B,CAYF,IACA,IAAIC,GAAiB,UACrB5gG,EAAQooC,YAAW,SAAU1jC,GAC3B,IAAIq5F,EAAYlsF,EAAMukF,WAAW1xF,EAAY+0F,UAE7C,GAAIsE,EAAUvwD,gBAAiB,CAC7B,IAAIz3B,EAASgoF,EAAUvwD,gBAAgB9oC,EAAa1E,EAAS2E,EAAKwkB,GAClEpT,GAAUA,EAAOtO,QAAUm5F,EAAer1F,IAAI7G,EAAYwuD,IAAK,EACjE,MACE0tC,EAAer1F,IAAI7G,EAAYwuD,IAAK,EAExC,IACAwpC,EAAkB18F,GAGlB+G,KAAK6wF,WAAW3R,mBAAmBjmF,EAASmpB,EAAS,CACnDk9D,UAAU,EACVC,SAAUsa,IAKZlL,GAAa3uF,KAAM/G,EAAS2E,EAAKwkB,EAAS,CAAC,EAAGy3E,GAC9C,WAAkB,cAAe5gG,EAAS2E,EA3C1C,CA4CF,EACAk8F,WAAY,SAAU13E,GACpB,IAAInpB,EAAU+G,KAAKqiB,OAEdppB,IAILA,EAAQ8yE,iBAAiB3pD,GACzBuG,GAAA,mBAA2BvG,EAAS,cACpCuzE,EAAkB18F,GAElB+G,KAAK6wF,WAAW3R,mBAAmBjmF,EAASmpB,EAAS,CACnDk9D,UAAU,IAGZn9D,GAAOniB,KAAM/G,EAAS+G,KAAKuyB,KAAMnQ,EAAS,CAAC,GAC3C,WAAkB,cAAenpB,EAAS+G,KAAKuyB,MACjD,EACAwnE,aAAc,SAAU33E,GAEtB,IAAItX,EAAQ9K,KAER/G,EAAU+G,KAAKqiB,OAEdppB,IAILA,EAAQ8yE,iBAAiB3pD,GAEzBnpB,EAAQooC,YAAW,SAAU1jC,GAC3BA,EAAYG,UAAU6S,gBACxB,IAEAgY,GAAA,mBAA2BvG,EAAS,gBACpCuzE,EAAkB18F,GAElB+G,KAAK6wF,WAAW3R,mBAAmBjmF,EAASmpB,EAAS,CACnDq9D,WAAY,SACZH,UAAU,IAGZrmF,EAAQ01B,eAAc,SAAUtG,EAAeyG,GAC7C,GAAsB,WAAlBzG,EAA4B,CAC9B,IAAIuxE,EAAgB9uF,EAAMsoD,wBAAwBtkC,GAElD8qE,GAAiBA,EAAc3C,SAAW2C,EAAcG,aAAajrE,EAAgB71B,EAAS6R,EAAMynB,KAAMnQ,EAC5G,CACF,IACAnpB,EAAQooC,YAAW,SAAU1jC,GAC3B,IAAIq5F,EAAYlsF,EAAMukF,WAAW1xF,EAAY+0F,UAC7CsE,EAAU+C,aAAap8F,EAAa1E,EAAS6R,EAAMynB,KAAMnQ,EAC3D,IACA,WAAkB,cAAenpB,EAAS+G,KAAKuyB,MACjD,EACAynE,aAAc,SAAU53E,GACtB+rE,GAAcztF,OAAO8Q,KAAKxR,KAAMoiB,EAClC,GAGFgsE,GAAiB,SAAU1H,EAAO/0E,EAAY6d,EAAQtiB,GACpD,GAAIw5E,EAAMuK,UACRlD,GAAgBrH,EAAM95E,QADxB,CAYA,IAPA,IAIIoC,EAJA/V,EAAUytF,EAAMrkE,OAEhB43E,EAAevT,EAAM6J,aAAa7wD,uBAGlC20D,EAAehvE,EAAA,GAAsBpsB,EAASu2B,GAEzCl0B,EAAI,EAAGA,EAAI2+F,EAAaz+F,OAAQF,IAAK,CAC5C,IAAI2C,EAAWg8F,EAAa3+F,GAE5B,GAAI2C,EAAS0T,IAAgF,OAAhE3C,EAAS/Q,EAAS0T,GAAY1Y,EAASo7F,EAAcnnF,IAChF,OAAO8B,CAEX,CAEI,CAjBJ,CAoBF,EAEA4uE,GAAoB,SAAU8I,EAAOztF,GACnC,IAAIihG,EAAYxT,EAAM2I,WAClBrR,EAAY0I,EAAMmK,WACtB53F,EAAQooC,YAAW,SAAU1jC,GAC3BqgF,EAAUJ,kBAAkBjgF,EAAau8F,EAAUv8F,EAAY+0F,UACjE,GACF,EAEArE,GAAmB,SAAUjsE,EAAS6K,GACpC,IAAIniB,EAAQ9K,KAER/G,EAAU+G,KAAKmkB,WACfg2E,EAAc/3E,EAAQjkB,KACtBkgC,EAAgBjc,EAAQic,cACxB+7D,EAAa5E,GAAQ2E,GACrBE,EAAaD,EAAWC,WACxBC,GAAcD,EAAW35F,QAAU,UAAUq1E,MAAM,KACnDwkB,EAAeD,EAAW3gD,MAC1B6gD,EAA2B,MAAjBF,EAAW,KAAc,SAAeA,EAAW,IACjEt6F,KAAKktF,KAAuB,EAC5B,IAAIuN,EAAW,CAACr4E,GACZs4E,GAAU,EAEVt4E,EAAQyc,QACV67D,GAAU,EACVD,GAAW,QAAIr4E,EAAQyc,OAAO,SAAUr/B,GAGtC,OAFAA,GAAO,SAAS,QAAO,CAAC,EAAGA,GAAO4iB,GAClC5iB,EAAKq/B,MAAQ,KACNr/B,CACT,KAGF,IACI+1F,EADAoF,EAAgB,GAEhBC,GAAiB,SAAsBx4E,GACvCy4E,GAAa,SAAkBz4E,GAiCnC,GA/BIy4E,IACF,SAAa76F,KAAKuyB,OAGpB,QAAKkoE,GAAU,SAAUh8D,GASvB,GAPA82D,EAAW6E,EAAWU,OAAOr8D,EAAW3zB,EAAMuX,OAAQvX,EAAMynB,MAE5DgjE,EAAWA,IAAY,QAAO,CAAC,EAAG92D,GAElC82D,EAASp3F,KAAOk8F,EAAWhtE,OAASkoE,EAASp3F,KAC7Cw8F,EAAc53F,KAAKwyF,GAEfsF,EAAY,CACd,IAAIpvF,EAAK4Z,EAAA,GAAyBjD,GAC9BywC,EAAiBpnD,EAAGonD,eACpBkoC,EAAoBtvF,EAAGsvF,kBAEvBnrC,EAAoBmrC,EAAoBloC,EAAeC,OAAO,GAAK,SACvEo7B,GAAepjF,EAAOyvF,EAAc97D,EAAWmxB,GAC/Ck/B,GAAmBhkF,EACrB,MAAW8vF,GAGT1M,GAAepjF,EAAOyvF,EAAc97D,EAAW,UAC/CqwD,GAAmBhkF,IACV0vF,GACTtM,GAAepjF,EAAOyvF,EAAc97D,EAAW+7D,EAAQhW,KAAMgW,EAAQ/V,IAEzE,IAEqB,SAAjB8V,IAA4BM,IAAeD,IAAmBJ,EAChE,IAEMx6F,KAAKmtF,KACPc,GAAQjuF,MACRmuF,GAAcztF,OAAO8Q,KAAKxR,KAAMoiB,GAChCpiB,KAAKmtF,IAAkB,MAEvBgB,GAAcoM,GAAc/oF,KAAKxR,KAAMoiB,EAK3C,CAHE,MAAO0O,GAEP,MADA9wB,KAAKktF,KAAuB,EACtBp8D,CACR,CAgBF,GAXEykE,EADEmF,EACS,CACTv8F,KAAMk8F,EAAWhtE,OAAS8sE,EAC1B97D,cAAeA,EACfQ,MAAO87D,GAGEA,EAAc,GAG3B36F,KAAKktF,KAAuB,GAEvBjgE,EAAQ,CACX,IAAIg6D,EAAgBjnF,KAAK8wF,eAGzB,GAFA7J,EAAc5kC,QAAQkzC,EAASp3F,KAAMo3F,GAEjCqF,EAAgB,CAClB,IAAII,EAAS,CACX78F,KAAM,gBACNkgC,cAAeA,EACfyoD,UAAU,SAAsB7tF,GAChCiuF,YAAa9kE,EAAQ8kE,cAAe,EACpCC,WAAY/kE,EAAQjkB,KACpB4oF,kBAAmB3kE,GAErB6kE,EAAc5kC,QAAQ24C,EAAO78F,KAAM68F,EACrC,CACF,CACF,EAEA1M,GAAsB,SAAUrhE,GAC9B,IAAIguE,EAAiBj7F,KAAKuvF,gBAE1B,MAAO0L,EAAez/F,OAAQ,CAC5B,IAAI4mB,EAAU64E,EAAen5F,QAC7BusF,GAAiB78E,KAAKxR,KAAMoiB,EAAS6K,EACvC,CACF,EAEAshE,GAAsB,SAAUthE,IAC7BA,GAAUjtB,KAAKqiD,QAAQ,UAC1B,EAeAmsC,GAAoB,SAAUh+D,EAAIk2D,GAChCl2D,EAAG3J,GAAG,YAAY,SAAU5D,GAC1ByjE,EAAMrkC,QAAQ,WAAYp/B,IAQ1BuN,EAAGp3B,UAAU8hG,cAAiBxU,EAAMyG,KAAoBzG,EAAMmK,WAAWzR,YAAesH,EAAM6I,gBAAgB/zF,QAC5GkrF,EAAMrkC,QAAQ,WAElB,GACF,EAEAosC,GAAiB,SAAUj+D,EAAIk2D,GAC7Bl2D,EAAG3J,GAAG,aAAa,SAAUiK,GAC3B,IAAIh3B,EAAKg3B,EAAE5e,OACPk9C,GAAa,QAAoBt1D,EAAI,OAErCs1D,KACF,SAAiCA,EAAYt+B,EAAG41D,EAAMn0D,MACtDu8D,GAAmBpI,GAEvB,IAAG7/D,GAAG,YAAY,SAAUiK,GAC1B,IAAIh3B,EAAKg3B,EAAE5e,OACPk9C,GAAa,QAAoBt1D,EAAI,OAErCs1D,KACF,SAAgCA,EAAYt+B,EAAG41D,EAAMn0D,MACrDu8D,GAAmBpI,GAEvB,IAAG7/D,GAAG,SAAS,SAAUiK,GACvB,IAAIh3B,EAAKg3B,EAAE5e,OACPk9C,GAAa,QAAoBt1D,GAAI,SAAUoY,GACjD,OAAsC,OAA/B,QAAUA,GAAQrZ,SAC3B,IAAG,GAEH,GAAIu2D,EAAY,CACd,IAAI0lC,EAAa1lC,EAAW03B,SAAW,WAAa,SAChDz3B,GAAS,QAAUD,GAEvBs3B,EAAMn0D,KAAKnK,eAAe,CACxBjqB,KAAM22F,EACNzjF,SAAUg+C,EAAOh+C,SACjBksB,gBAAiB8xB,EAAOx2D,UACxBuY,YAAai+C,EAAOj+C,YACpB81E,aAAa,GAEjB,CACF,GACF,EAuEA/kE,GAAS,SAAUukE,EAAOztF,EAAS2E,EAAKwkB,EAAS8uE,GAC/C0E,EAAgB38F,GAChBy1F,GAAiBhI,EAAOztF,EAAS2E,EAAKwkB,EAAS8uE,IAC/C,QAAKxK,EAAM0I,cAAc,SAAUoE,GACjCA,EAAMyD,SAAU,CAClB,IACAtI,GAAajI,EAAOztF,EAAS2E,EAAKwkB,EAAS8uE,IAE3C,QAAKxK,EAAM0I,cAAc,SAAUoE,GAC5BA,EAAMyD,SACTzD,EAAMr3F,OAAOlD,EAAS2E,EAE1B,GACF,EAEA8wF,GAAmB,SAAUhI,EAAOztF,EAAS2E,EAAKwkB,EAAS8uE,EAAciK,IACvE,QAAKA,GAAazU,EAAM4I,kBAAkB,SAAUsK,GAClD,IAAI9qE,EAAiB8qE,EAAcd,QACnCjB,EAAY/oE,EAAgB8qE,GAC5BA,EAAcz3E,OAAO2M,EAAgB71B,EAAS2E,EAAKwkB,GACnDi1E,EAAQvoE,EAAgB8qE,GACxB1B,EAAappE,EAAgB8qE,EAC/B,GACF,EAMAjL,GAAe,SAAUjI,EAAOztF,EAAS2E,EAAKwkB,EAAS8uE,EAAc3R,GAEnE,IAAIvB,EAAY0I,EAAMmK,WACtBK,GAAe,QAAOA,GAAgB,CAAC,EAAG,CACxCwE,cAAez8F,EAAQm0E,cAGzB,WAAkB,sBAAuBn0E,EAAS2E,EAAKszF,GACvD,IAAI9R,GAAa,EACjBnmF,EAAQooC,YAAW,SAAU1jC,GAC3B,IAAIq5F,EAAYtQ,EAAM2I,WAAW1xF,EAAY+0F,UAC7CsE,EAAUC,SAAU,EACpB,IAAIpY,EAAamY,EAAUnY,WAC3Bb,EAAU9kF,cAAc2lF,EAAYz8D,GAEpCy1E,EAAYl6F,EAAaq5F,GAErBzX,GAAYA,EAASvhF,IAAIL,EAAYwuD,MACvC0yB,EAAWvE,QAGTuE,EAAWmB,QAAQhC,EAAUlB,eAAe+B,MAC9CO,GAAa,GAGf4X,EAAU3zE,MAAM4J,SAAWtvB,EAAYK,IAAI,UAI3Cm5F,EAAYx5F,EAAaq5F,IACzB,SAA6Br5F,EAC/B,IACAqgF,EAAUoB,WAAaA,GAAcpB,EAAUoB,WAC/C,WAAkB,sBAAuBnmF,EAAS2E,EAAKszF,GAEvD,WAAkB,oBAAqBj4F,EAAS2E,EAAKszF,GACrDj4F,EAAQooC,YAAW,SAAU1jC,GAC3B,IAAIq5F,EAAYtQ,EAAM2I,WAAW1xF,EAAY+0F,UAE7C2E,EAAQ15F,EAAaq5F,GAGrBkB,EAAav6F,EAAaq5F,EAC5B,IAEAH,EAAuBnQ,EAAOztF,GAC9B,WAAkB,qBAAsBA,EAAS2E,EAAKszF,EACxD,EAEApC,GAAqB,SAAUpI,GAC7BA,EAAM0G,KAA2B,EAEjC1G,EAAM9/D,QAAQ+qE,QAChB,EAEA5C,GAAqB,SAAUrI,GACxBA,EAAM0G,MAIX1G,EAAM9/D,QAAQwrE,QAAQ/1F,UAAS,SAAUvC,GAEnC,MAAyBA,IAI7Bw8F,EAAmBx8F,EACrB,IACA4sF,EAAM0G,KAA2B,EACnC,EA6NAwB,GAAqB,SAAUlI,GAC7B,OAAO,IAEP,SAAUhtE,GAGR,SAAS0hF,IACP,OAAkB,OAAX1hF,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,IAC7D,CA4DA,OAhEA,QAAUo7F,EAAS1hF,GAMnB0hF,EAAQ96F,UAAUo/B,qBAAuB,WACvC,OAAOgnD,EAAM6J,aAAa7wD,sBAC5B,EAEA07D,EAAQ96F,UAAU+6F,sBAAwB,SAAUvhG,GAClD,MAAOA,EAAI,CACT,IAAIwhG,EAAYxhG,EAAGi/F,kBAEnB,GAAiB,MAAbuC,EACF,OAAO5U,EAAMrkE,OAAO3K,aAAa4jF,EAAU1sE,SAAU0sE,EAAUzjF,OAGjE/d,EAAKA,EAAGoC,MACV,CACF,EAEAk/F,EAAQ96F,UAAUi7F,cAAgB,SAAUzhG,EAAI0hG,IAC9C,SAAc1hG,EAAI0hG,GAClB1M,GAAmBpI,EACrB,EAEA0U,EAAQ96F,UAAUm7F,cAAgB,SAAU3hG,EAAI0hG,IAC9C,SAAc1hG,EAAI0hG,GAClB1M,GAAmBpI,EACrB,EAEA0U,EAAQ96F,UAAUo7F,UAAY,SAAU5hG,IACtC,SAAUA,GACVg1F,GAAmBpI,EACrB,EAEA0U,EAAQ96F,UAAUq7F,UAAY,SAAU7hG,IACtC,SAAUA,GACVg1F,GAAmBpI,EACrB,EAEA0U,EAAQ96F,UAAUs7F,YAAc,SAAU9hG,IACxC,SAAYA,GACZg1F,GAAmBpI,EACrB,EAEA0U,EAAQ96F,UAAUu7F,YAAc,SAAU/hG,IACxC,SAAYA,GACZg1F,GAAmBpI,EACrB,EAEA0U,EAAQ96F,UAAU6jB,SAAW,WAC3B,OAAOuiE,EAAMviE,UACf,EAEAi3E,EAAQ96F,UAAU8yD,wBAA0B,SAAUtkC,GACpD,OAAO43D,EAAMtzB,wBAAwBtkC,EACvC,EAEAssE,EAAQ96F,UAAUi0F,qBAAuB,SAAU52F,GACjD,OAAO+oF,EAAM6N,qBAAqB52F,EACpC,EAEOy9F,CACT,CApEW,CAoET,GApEK,CAoEU1U,EACnB,EAEAmI,GAAgB,SAAU2E,GACxB,SAASsI,EAA4BC,EAAQ3pE,GAC3C,IAAK,IAAI92B,EAAI,EAAGA,EAAIygG,EAAOvgG,OAAQF,IAAK,CACtC,IAAI0gG,EAAaD,EAAOzgG,GACxB0gG,EAAW1O,IAAsBl7D,CACnC,CACF,EAEA,QAAKyiE,IAAgB,SAAUC,EAAYjkE,GACzC2iE,EAAM1C,eAAejqE,GAAGgK,GAAW,SAAUxD,GAC3C,GAAI4lE,GAAgBO,EAAMnwE,QAAUmwE,EAAMlG,MAAwBC,GAAwB,CACxF,GAAIlgE,GAASA,EAAMgR,cACjB,OAGF,IAAI49D,EAAWzI,EAAM8B,oBAAoBjoE,GACrC6uE,EAAgB,IACpB,QAAK3I,IAAW,SAAUyI,GACpBA,IAAexI,GAASwI,EAAW34E,QAAUmwE,EAAMnwE,OACrD64E,EAAcn5F,KAAKi5F,EAEvB,IACAF,EAA4BI,EAAe3O,KAC3C,QAAK2O,GAAe,SAAUF,GACxBA,EAAW1O,MAAwBE,IACrCwO,EAAW5zE,eAAe6zE,EAE9B,IACAH,EAA4BI,EAAezO,GAC7C,CACF,GACF,GACF,CACF,CA9iCwB,GAgjCjByB,CACT,CA57DA,CA47DE5D,EAAA,GAEE6Q,GAAejN,GAAQ5uF,UAC3B67F,GAAat1E,GAAK6mE,GAAwC,MAC1DyO,GAAazzE,IAAMglE,GAAwC,OAM3DyO,GAAaC,IAAM,SAAUC,EAAWriG,EAAIwU,GAC1C,IAAIs5C,EAAO9nD,KAGX,SAASs8F,IAGP,IAFA,IAAIC,EAAQ,GAEH1O,EAAK,EAAGA,EAAK3+E,UAAU1T,OAAQqyF,IACtC0O,EAAM1O,GAAM3+E,UAAU2+E,GAGxB7zF,GAAMA,EAAGiV,OAASjV,EAAGiV,MAAMjP,KAAMu8F,GAEjCz0C,EAAKp/B,IAAI2zE,EAAWC,EACtB,EAZA,SAAa,8BAgBbt8F,KAAK6mB,GAAGrV,KAAKxR,KAAMq8F,EAAWC,EAAS9tF,EACzC,EAEA,IAAIgmF,GAAoB,CAAC,QAAS,WAAY,YAAa,WAAY,YAAa,YAAa,UAAW,YAAa,eAEzH,SAASzG,GAAgBnhF,GACnB,CAGN,CAEA,IAAI4oF,GAAU,CAAC,EAKXX,GAAiB,CAAC,EAClBjE,GAAqB,GACrB9nB,GAA0B,GAC1B6nB,GAAc,GACdnB,GAAe,CAAC,EAChB6F,GAAiB,CAAC,EAClB9B,GAAY,CAAC,EACbN,GAAkB,CAAC,EACnBuJ,IAAU,IAAI5hC,KAAS,EAEvBm6B,IADe,IAAIn6B,KACC,sBAYjB,SAAS7P,GAAKokC,EAAK3mB,EAAOnqD,GAC/B,IAAIo+E,IAAap+E,GAAQA,EAAK2xE,KAE9B,GAAIyM,EAAU,CACR,EAMJ,IAAIC,EAAgBC,GAAiBxN,GAErC,GAAIuN,EAKF,OAAOA,EAGL,CAKN,CAEA,IAAIlJ,EAAQ,IAAItE,GAAQC,EAAK3mB,EAAOnqD,GAMpC,OALAm1E,EAAM5mF,GAAK,MAAQ4vF,KACnBjJ,GAAUC,EAAM5mF,IAAM4mF,EACtBiJ,GAAYp3E,EAAA,GAAuB8pE,EAAK4F,GAAmBvB,EAAM5mF,IACjEiiF,GAAc2E,GACd,WAAkB,YAAaA,GACxBA,CACT,CAmEO,SAASmJ,GAAiBxN,GAC/B,OAAOoE,GAAUluE,EAAA,GAAuB8pE,EAAK4F,IAC/C,CAQO,SAAS6H,GAAcj4F,EAAM6jE,GAClCgnB,GAAa7qF,GAAQ6jE,CACvB,CAKO,SAAStpC,GAAqB29D,IAC/B,QAAQ/zB,GAAyB+zB,GAAoB,GACvD/zB,GAAwB/lE,KAAK85F,EAEjC,CACO,SAAStuE,GAAkB4W,EAAU23D,GAC1CC,GAAkBnM,GAAoBzrD,EAAU23D,EAAWlR,GAC7D,CAMO,SAASoR,GAAiBC,GAC/BC,GAAwB,YAAaD,EACvC,CAMO,SAASE,GAAmBC,GACjCF,GAAwB,cAAeE,EACzC,CACO,SAASF,GAAwBv4F,EAAM3K,GAC5C,MAAa2K,EAAM3K,EACrB,CACO,SAAS00B,GAAe2rE,EAAYgC,EAAWvB,IAChD,QAAWuB,KACbvB,EAASuB,EACTA,EAAY,IAGd,IAAIvH,GAAa,QAASuF,GAAcA,EAAWl8F,KAAO,CAACk8F,EAAYA,EAAa,CAClFhtE,MAAOgvE,IACN,GAEHhC,EAAWhtE,OAASgtE,EAAWhtE,OAASynE,GAAY3iD,cACpDkqD,EAAYhC,EAAWhtE,MAEnBwnE,GAAewH,MAMnB,QAAOhP,GAAWgQ,KAAKvI,IAAezH,GAAWgQ,KAAKhB,IAEjD7G,GAAQV,KACXU,GAAQV,GAAc,CACpBgG,OAAQA,EACRT,WAAYA,IAIhBxF,GAAewH,GAAavH,EAC9B,CACO,SAAS7zC,GAAyB9iD,EAAMm/F,GAC7CllF,EAAA,WAAiCja,EAAMm/F,EACzC,CAgBA,SAASpvE,GAAeiX,EAAUo4D,GAChCR,GAAkBpM,GAAaxrD,EAAUo4D,EAAYzR,GAAwB,SAC/E,CAEA,SAAS0R,GAAer4D,EAAUs4D,GAChCV,GAAkBpM,GAAaxrD,EAAUs4D,EAAYxR,GAAuB,SAC9E,CAGA,IAAIyR,GAAkB,GAEtB,SAASX,GAAkBY,EAAYx4D,EAAUy4D,EAAIC,EAAiBpe,GAkBpE,KAjBI,QAAWt6C,KAAa,QAASA,MACnCy4D,EAAKz4D,EACLA,EAAW04D,MAeT,QAAQH,GAAiBE,IAAO,GAApC,CAIAF,GAAgB36F,KAAK66F,GACrB,IAAIpe,EAAe,oBAA2Boe,EAAIne,GAClDD,EAAaiR,OAAStrD,EACtBq6C,EAAase,MAAQF,EACrBD,EAAW56F,KAAKy8E,EANhB,CAOF,CAEO,SAASue,GAAgBp5F,EAAMq5F,GACpC3I,GAAe1wF,GAAQq5F,CACzB,CAgCO,SAASC,GAAYC,EAASC,EAASC,GAC5C,IAAIH,GAAc,QAAQ,eAC1BA,GAAeA,EAAYC,EAASC,EAASC,EAC/C,CAKO,IAAIC,GAAoB,MAgB/Bb,GAAexR,GAAwBjS,IACvCyjB,GAAerR,GAAmCtR,IAClD2iB,GAAerR,GAAmCnR,IAClDwiB,GAAexR,GAAwBtG,IACvC8X,GAAerR,GAAmC9F,IAClDmX,GAAejR,GAAuB,IACtCrtD,GAAqB,IACrB3Q,GAAkBm9D,GAA8B5T,IAChDimB,GAAgB,UAAW,IAE3BrvE,GAAe,CACbvwB,KAAM,MACNkvB,MAAO,MACP3sB,OAAQ,OACP,MACHguB,GAAe,CACbvwB,KAAM,MACNkvB,MAAO,MACP3sB,OAAQ,OACP,MACHguB,GAAe,CACbvwB,KAAM,MACNkvB,MAAO,MACP3sB,OAAQ,OACP,MACHguB,GAAe,CACbvwB,KAAM,MACNkvB,MAAO,MACP3sB,OAAQ,OACP,MACHguB,GAAe,CACbvwB,KAAM,MACNkvB,MAAO,MACP3sB,OAAQ,OACP,MAEHk8F,GAAc,QAAS0B,IACvB1B,GAAc,OAAQ2B,G,8ECp/EtB,IAAIC,EAAa,CAAC,EAEX,SAASC,EAAa95F,EAAM+5F,GAOjCF,EAAW75F,GAAQ+5F,CACrB,CACO,SAASC,EAAQh6F,GAOtB,OAAO65F,EAAW75F,EACpB,C,wJCnBA,GACE+rC,KAAM,CACJkuD,MAAO,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YACtHC,UAAW,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACzFC,UAAW,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YAC9EC,cAAe,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,QAE5Djc,OAAQ,CACNkc,SAAU,CACRC,IAAK,MACL7hF,QAAS,QAGbq4D,QAAS,CACPypB,MAAO,CACLnc,MAAO,CACL3nE,KAAM,aACN+jF,QAAS,eACTC,MAAO,sBACPC,MAAO,oBACPC,KAAM,kBACNnsE,MAAO,qBAGXosE,SAAU,CACRxc,MAAO,YACPzoB,KAAM,CAAC,YAAa,QAAS,YAE/B2oB,SAAU,CACRF,MAAO,CACLyc,KAAM,OACNC,KAAM,eAGVC,UAAW,CACT3c,MAAO,CACLxqD,KAAM,uBACNonE,IAAK,sBACL3nB,MAAO,QACP4nB,MAAO,SAGXC,QAAS,CACP9c,MAAO,WAET+c,YAAa,CACX/c,MAAO,gBACPzoB,KAAM,CAAC,+BAGXt9B,OAAQ,CACN+iE,UAAW,CACTC,IAAK,YACLL,IAAK,YACLpnE,KAAM,aACN0nE,QAAS,eACTC,cAAe,sBACfhrB,MAAO,cACPirB,KAAM,OACNC,QAAS,UACTC,QAAS,UACTtc,YAAa,cACbv3C,EAAG,eACH8zD,QAAS,WACT79F,IAAK,MACL+U,SAAU,0BACV+oF,MAAO,aACP3c,MAAO,qBACP4c,OAAQ,iBACRC,OAAQ,eACR5c,MAAO,QACP6c,aAAc,gBACdC,WAAY,kBACZC,SAAU,aAGd55B,KAAM,CACJ65B,QAAS,CACPC,UAAW,kCACXC,aAAc,mBAEhB/jE,OAAQ,CACNgkE,OAAQ,CACNC,OAAQ,GACRC,SAAU,8CACVC,YAAa,4BAEfC,SAAU,CACRH,OAAQ,+CACRC,SAAU,sEACVC,YAAa,4CACbE,UAAW,CACTC,OAAQ,GACR31F,IAAK,MAIX9N,KAAM,CACJ0jG,QAAS,2BACTC,YAAa,qCACbN,SAAU,iCACVC,YAAa,UACbE,UAAW,CACTC,OAAQ,KACR31F,IAAK,SC5Gb,GACE+kC,KAAM,CACJkuD,MAAO,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,OAC3EC,UAAW,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,MAAO,OAChFC,UAAW,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACtDC,cAAe,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MAEhDjc,OAAQ,CACNkc,SAAU,CACRC,IAAK,KACL7hF,QAAS,OAGbq4D,QAAS,CACPypB,MAAO,CACLnc,MAAO,CACL3nE,KAAM,OACN+jF,QAAS,KACTC,MAAO,OACPC,MAAO,OACPC,KAAM,OACNnsE,MAAO,SAGXosE,SAAU,CACRxc,MAAO,OACPzoB,KAAM,CAAC,OAAQ,KAAM,OAEvB2oB,SAAU,CACRF,MAAO,CACLyc,KAAM,OACNC,KAAM,WAGVC,UAAW,CACT3c,MAAO,CACLxqD,KAAM,SACNonE,IAAK,SACL3nB,MAAO,QACP4nB,MAAO,UAGXC,QAAS,CACP9c,MAAO,MAET+c,YAAa,CACX/c,MAAO,QACPzoB,KAAM,CAAC,aAGXt9B,OAAQ,CACN+iE,UAAW,CACTC,IAAK,KACLL,IAAK,MACLpnE,KAAM,MACN0nE,QAAS,MACTC,cAAe,QACfhrB,MAAO,MACPirB,KAAM,KACNC,QAAS,OACTC,QAAS,MACTtc,YAAa,MACbv3C,EAAG,MACH8zD,QAAS,MACT79F,IAAK,KACL+U,SAAU,QACV+oF,MAAO,KACP3c,MAAO,MACP4c,OAAQ,MACRC,OAAQ,MACR5c,MAAO,OACP6c,aAAc,OACdC,WAAY,QACZC,SAAU,QAGd55B,KAAM,CACJ65B,QAAS,CACPC,UAAW,sBACXC,aAAc,WAEhB/jE,OAAQ,CACNgkE,OAAQ,CACNC,OAAQ,GACRC,SAAU,oCACVC,YAAa,sBAEfC,SAAU,CACRH,OAAQ,0BACRC,SAAU,gDACVC,YAAa,iCACbE,UAAW,CACTC,OAAQ,IACR31F,IAAK,OAIX9N,KAAM,CACJ0jG,QAAS,SACTC,YAAa,uBACbN,SAAU,oBACVC,YAAa,UACbE,UAAW,CACTC,OAAQ,IACR31F,IAAK,O,UClGT81F,EAAY,KACZC,EAAY,KACZC,EAAiBD,EACjBE,EAAgB,CAAC,EACjBC,EAAe,CAAC,EACTC,EAAez+C,EAAA,eAAoC,WAC5D,IAAI0+C,GAEJz+C,SAASC,gBAAgB+W,MAAQqM,UAAUq7B,UAAYr7B,UAAUs7B,iBAAiBC,cAClF,OAAOH,EAAQ9nE,QAAQwnE,IAAc,EAAIA,EAAYE,CACvD,CAL8D,GAAjBA,EAMtC,SAASQ,EAAel+B,EAAQm+B,GACrCn+B,EAASA,EAAOi+B,cAChBL,EAAa59B,GAAU,IAAIr0D,EAAA,EAAMwyF,GACjCR,EAAc39B,GAAUm+B,CAC1B,CAIO,SAASC,EAAmBp+B,GACjC,IAAI,QAASA,GAAS,CACpB,IAAIm+B,EAAYR,EAAc39B,EAAOi+B,gBAAkB,CAAC,EAExD,OAAIj+B,IAAWw9B,GAAax9B,IAAWy9B,GAC9B,QAAMU,IAEN,SAAM,QAAMA,IAAY,QAAMR,EAAcD,KAAkB,EAEzE,CACE,OAAO,SAAM,QAAM19B,IAAS,QAAM29B,EAAcD,KAAkB,EAEtE,CACO,SAASz9B,EAAe5J,GAC7B,OAAOunC,EAAavnC,EACtB,CACO,SAASgoC,IACd,OAAOT,EAAaF,EACtB,CAEAQ,EAAeT,EAAWa,GAC1BJ,EAAeV,EAAWe,E,qECvCnB,SAASC,EAAWC,GACzB,OAAO,IAAIC,EAAKD,EAClB,CAEA,IAAIC,EAEJ,WACE,SAASA,EAAKD,GACZA,EAASA,GAAU,CAAC,EACpB1iG,KAAK4iG,OAASF,EAAOhlG,MACrBsC,KAAK6iG,MAAQH,EAAOtiB,KACpBpgF,KAAK8iG,OAASJ,EAAO7lG,MACrBmD,KAAK+iG,SAAWL,EAAOphB,QACvBthF,KAAKgjG,QAAS,CAChB,CA+MA,OArMAL,EAAKriG,UAAU0/E,QAAU,SAAUC,GACjC,IAcIgjB,EAdAC,EAASljG,KAAKmjG,UACdjjB,EAAOD,GAAeA,EAAYC,KAItC,GAAIlgF,KAAKgjG,QAAUE,EAAQ,CACzB,IAAIpjG,EAAUE,KAAKF,QACnBA,EAAQjC,KAAOiC,EAAQsjG,WAAaF,EAAOpjG,QAAQsjG,UACrD,CAEIpjG,KAAKi9E,aACPj9E,KAAKi9E,WAAWomB,YAAcrjG,MAK5BA,KAAK6iG,QAAU3iB,IACjB+iB,EAAajjG,KAAK6iG,MAAM7iG,KAAKF,UAK/B,IAeIwjG,EAfAC,EAAYC,EAAexjG,KAAKyjG,QAChCC,EAAmB1jG,KAAK2jG,eAAiB,EACzClmB,EAAQ+lB,EAAevjB,GAAeA,EAAYxC,OAClDD,EAAeyC,GAAeA,EAAYzC,cAAgB,EAM9D,SAASgmB,EAAepzF,GAGtB,QAFEA,GAAO,KAAOA,EAAM,GAEfA,CACT,CARImzF,IAAc9lB,GAASimB,IAAqBlmB,IAC9CylB,EAAa,UAWXjjG,KAAKgjG,QAAyB,UAAfC,KACjBjjG,KAAKgjG,QAAS,EACdM,EAAqBtjG,KAAK4jG,SAAS1jB,IAGrClgF,KAAKyjG,OAAShmB,EACdz9E,KAAK2jG,cAAgBnmB,EACrB,IAAI3mC,EAAOopC,GAAeA,EAAYppC,KAmBtC,GAZE72C,KAAK6jG,QALHX,EAKaA,EAAOY,cAOL9jG,KAAK8iG,OAAS9iG,KAAK8iG,OAAO9iG,KAAKF,SAAW7C,IAKzD+C,KAAK+jG,UAAW,CAClB,IAAIr4F,EAAQ1L,KAAKgkG,UACbr4F,EAAMrO,KAAKH,IAAY,MAAR05C,EAAe72C,KAAKgkG,UAAYntD,EAAO55C,IAAU+C,KAAK6jG,SAEzE,IAAK3jB,IAASojB,GAAsB53F,EAAQC,GAAM,CAChD,IAAIw2E,EAAWniF,KAAK+jG,UAEpB,IAAI,QAAQ5hB,GACV,IAAK,IAAI7mF,EAAI,EAAGA,EAAI6mF,EAAS3mF,OAAQF,IACnC0E,KAAKikG,YAAY9hB,EAAS7mF,GAAIoQ,EAAOC,EAAK8xE,EAAOD,QAGnDx9E,KAAKikG,YAAY9hB,EAAUz2E,EAAOC,EAAK8xE,EAAOD,EAElD,CAEAx9E,KAAKgkG,UAAYr4F,EAGjB,IAAIu4F,EAAwC,MAAzBlkG,KAAKmkG,iBAA2BnkG,KAAKmkG,iBAAmBx4F,EAEvE,EAKJ3L,KAAK8jG,cAAgBI,CACvB,MAIElkG,KAAKgkG,UAAYhkG,KAAK8jG,cAAyC,MAAzB9jG,KAAKmkG,iBAA2BnkG,KAAKmkG,iBAAmBnkG,KAAK6jG,QAGrG,OAAO7jG,KAAKo/E,YACd,EAEAujB,EAAKriG,UAAUg6E,MAAQ,WACrBt6E,KAAKgjG,QAAS,EACdhjG,KAAK+iG,UAAY/iG,KAAK+iG,SAAS/iG,KAAKF,QACtC,EAEA6iG,EAAKriG,UAAU2jG,YAAc,SAAU9hB,EAAUz2E,EAAOC,EAAK8xE,EAAOD,GAClE4mB,EAAS1mG,MAAMgO,EAAOC,EAAK8xE,EAAOD,GAClCx9E,KAAKqkG,iBAAmBliB,EAExBniF,KAAKqkG,iBAAiB,CACpB34F,MAAOA,EACPC,IAAKA,EACL9O,MAAO8O,EAAMD,EACbu/B,KAAMm5D,EAASn5D,MACdjrC,KAAKF,QACV,EAEA6iG,EAAKriG,UAAUsjG,SAAW,SAAU1jB,GAGlC,IAAIiC,EACAmhB,EAHJtjG,KAAKgkG,UAAYhkG,KAAK8jG,cAAgB9jG,KAAK6jG,QAAU,EACrD7jG,KAAKmkG,iBAAmB,MAInBjkB,GAAQlgF,KAAK4iG,SAChBzgB,EAAWniF,KAAK4iG,OAAO5iG,KAAKF,SAExBqiF,GAAYA,EAASA,WACvBmhB,EAAqBnhB,EAASmhB,mBAC9BnhB,EAAWA,EAASA,WAIlB,QAAQA,KAAcA,EAAS3mF,SACjC2mF,EAAW,OAIfniF,KAAK+jG,UAAY5hB,EACjBniF,KAAKyjG,OAASzjG,KAAK2jG,cAAgB,KACnC,IAAIW,EAAatkG,KAAKukG,YAEtB,OADAD,GAAcA,EAAWhqB,QAClBgpB,CACT,EAEAX,EAAKriG,UAAU8+E,WAAa,WAC1B,OAAOp/E,KAAK+jG,WAAa/jG,KAAKgkG,UAAYhkG,KAAK6jG,OACjD,EAOAlB,EAAKriG,UAAUmhF,KAAO,SAAU+iB,IAM1BxkG,KAAKukG,cAAgBC,GAAYxkG,KAAKgjG,UACxChjG,KAAKukG,YAAcC,EACnBA,EAASrB,UAAYnjG,KACrBwkG,EAASlqB,QAEb,EAEAqoB,EAAKriG,UAAUmoB,QAAU,WACnBzoB,KAAKixF,YAITjxF,KAAKmjG,YAAcnjG,KAAKmjG,UAAUoB,YAAc,MAChDvkG,KAAKukG,cAAgBvkG,KAAKukG,YAAYpB,UAAY,MAClDnjG,KAAKgjG,QAAS,EACdhjG,KAAKixF,WAAY,EACnB,EAEA0R,EAAKriG,UAAU+/E,YAAc,WAC3B,OAAOrgF,KAAKmjG,SACd,EAEAR,EAAKriG,UAAUuhF,cAAgB,WAC7B,OAAO7hF,KAAKukG,WACd,EAEA5B,EAAKriG,UAAUmkG,aAAe,SAAU94F,GAMtC3L,KAAK8jG,cAAgB9jG,KAAKmkG,iBAAmBx4F,CAC/C,EAEOg3F,CACT,CAxNA,GA4NIyB,EAAW,WACb,IAAIz4F,EACAq/B,EACAyyC,EACAD,EACAknB,EACAC,EAAK,CACPjnG,MAAO,SAAUknG,EAAG9zE,EAAG+zE,EAAOC,GAC5B95D,EAAU45D,EACVj5F,EAAMmlB,EACN2sD,EAAQonB,EACRrnB,EAAesnB,EACfJ,EAAWpnG,KAAKu6C,KAAK2lC,EAAeC,GACpCknB,EAAG15D,KAAOwyC,EAAQ,GAAKD,EAAe,EAAIunB,EAAUC,CACtD,GAEF,OAAOL,EAEP,SAASK,IACP,OAAOh6D,EAAUr/B,EAAMq/B,IAAY,IACrC,CAEA,SAAS+5D,IACP,IAAIlsG,EAAYmyC,EAAU05D,EAAWjnB,EAAQngF,KAAKu6C,KAAK7M,EAAU05D,GAC7D11F,EAASg8B,GAAWr/B,EAAM,KAAO9S,EAAY2kF,EAAe3kF,EAE9DmyC,EAEF,OADAA,IACOh8B,CACT,CACF,CA9Be,E,4DCjNXi2F,E,8BArBAC,EAAY,YAKLC,SAAyBC,cAAgBF,EAAY3jG,MAAQ6jG,YAC7DC,SAAyBC,cAAgBJ,EAAY3jG,MAAQ+jG,YAC7Dz+F,SAAwBC,aAAeo+F,EAAY3jG,MAAQuF,WAC3Dy+F,SAA0BC,eAAiBN,EAAY3jG,MAAQikG,aAKtEC,EAAY,CACd,MAASF,EACT,IAAO1+F,EAEP,QAAWtF,MACX,OAAUA,MACV,KAAQgkG,GAIV,SAASG,EAAeC,GAEtB,OAAOA,EAAW,MAAQR,EAAkBE,CAC9C,CAIA,SAASO,IACP,MAAO,CAAC3oG,KAAWA,IACrB,CAIA,SAAS4oG,EAAWC,GAClB,IAAIC,EAAOD,EAAc16B,YAEzB,OAAO26B,IAASxkG,MAAQukG,EAAcngG,QAAU,IAAIogG,EAAKD,EAC3D,CAEA,SAASE,EAAan7F,EAAOpB,EAAQvD,EAASyF,EAAKs6F,GACjD,IAAIC,EAAWT,EAAUv/F,GAAW,SAEpC,GAAI+/F,EAAQ,CACV,IAAIE,EAAWt7F,EAAMpB,GACjB28F,EAASD,GAAYA,EAAS3qG,OAElC,GAAM4qG,IAAWz6F,EAAM,CAIrB,IAHA,IAAI06F,EAAW,IAAIH,EAASv6F,GAGnBpJ,EAAI,EAAGA,EAAI6jG,EAAQ7jG,IAC1B8jG,EAAS9jG,GAAK4jG,EAAS5jG,GAGzBsI,EAAMpB,GAAU48F,CAClB,CACF,MACEx7F,EAAMpB,GAAU,IAAIy8F,EAASv6F,EAEjC,CAOA,IAAIZ,EAEJ,WACE,SAASA,IACP/K,KAAKsmG,QAAU,GAEftmG,KAAKumG,WAAa,GAClBvmG,KAAKq4C,QAAU,GACfr4C,KAAK8iG,OAAS,EACd9iG,KAAKwmG,UAAY,EACjBxmG,KAAKymG,mBAAoB,SAC3B,CA2jCA,OArjCA17F,EAAUzK,UAAUoK,SAAW,SAAUM,EAAU07F,EAAiB97F,GAKlE5K,KAAK2mG,UAAY37F,EAEjBhL,KAAKsmG,QAAU,GACftmG,KAAK4mG,SAAW,KAChB5mG,KAAKqN,YAAcrN,KAAK6mG,mBACxB,IAAI10F,EAASnH,EAASmB,YAClB26F,EAAgB9mG,KAAKsZ,sBAAwB2rF,EAAuB9yF,EAAO/F,cAE/EpM,KAAK+mG,gBAAkBn8F,GAAkBk8F,EAEzC9mG,KAAKumG,WAAa,IACW,QAAyBp0F,GACtDnS,KAAKgnG,aAAc,QAAIN,GAAiB,SAAUxnG,GAOhD,MAAO,CAELf,KAAMe,EAAIf,KACV8M,SAAU/L,EAAI+L,SAElB,IAEAjL,KAAKinG,sBAAsB,EAAGj8F,EAASnO,QACzC,EAEAkO,EAAUzK,UAAU4L,YAAc,WAChC,OAAOlM,KAAK2mG,SACd,EAUA57F,EAAUzK,UAAU6L,UAAY,WAC9B,OAAOnM,KAAK2mG,UAAUx6F,WACxB,EAMApB,EAAUzK,UAAU4mG,2BAA6B,SAAUjjG,EAAS9F,GAClE,IAAIgpG,EAAmBnnG,KAAKymG,kBACxBziG,EAAahE,KAAKgnG,YAClBI,EAAaD,EAAiBnpG,IAAIiG,GAEtC,GAAkB,MAAdmjG,GACF,GAAIpjG,EAAWojG,GAAYjpG,OAASA,EAClC,OAAOipG,OAGTA,EAAapjG,EAAWxI,OAS1B,OANAwI,EAAWojG,GAAc,CACvBjpG,KAAMA,GAERgpG,EAAiB3iG,IAAIP,EAASmjG,GAC9BpnG,KAAKsmG,QAAQc,GAAc,IAAI3B,EAAUtnG,GAAQ,SAAS6B,KAAKwmG,WAC/DxmG,KAAKumG,WAAWa,GAAcxB,IACvBwB,CACT,EAEAr8F,EAAUzK,UAAU2L,mBAAqB,SAAUxC,EAAQuC,GACzD,IAAIq7F,EAAQrnG,KAAKsmG,QAAQ78F,GACrBvK,EAAMc,KAAKgnG,YAAYv9F,GACvB69F,EAAatnG,KAAKumG,WAClBtsF,EAAS/a,EAAIqoG,eAAiB,EAC9Bt5F,EAAMo5F,EAAM7rG,OAED,IAAXye,IAGFqtF,EAAW79F,GAAUm8F,KAKvB,IAFA,IAAI4B,EAAeF,EAAW79F,GAErBnO,EAAI2e,EAAQ3e,EAAI2S,EAAK3S,IAAK,CACjC,IAAI8U,EAAMi3F,EAAM/rG,GAAK0Q,EAAYy7F,gBAAgBJ,EAAM/rG,IAElDwB,MAAMsT,KACTo3F,EAAa,GAAKlqG,KAAKH,IAAIiT,EAAKo3F,EAAa,IAC7CA,EAAa,GAAKlqG,KAAKN,IAAIoT,EAAKo3F,EAAa,IAEjD,CAEAtoG,EAAI8M,YAAcA,EAClB9M,EAAIqoG,cAAgBt5F,EACpB/O,EAAIf,KAAO,SACb,EAEA4M,EAAUzK,UAAUkN,eAAiB,SAAU/D,GAC7C,IAAII,EAAU7J,KAAKgnG,YAAYv9F,GAC3BuC,EAAcnC,EAAQmC,YAC1B,OAAOA,CACT,EAEAjB,EAAUzK,UAAUonG,qBAAuB,SAAU1iG,GACnD,IAAIxF,EAAOQ,KAAKgnG,YAAYhiG,GAC5B,OAAOxF,GAAQA,EAAKyL,QACtB,EAMAF,EAAUzK,UAAU8K,WAAa,SAAUvN,GAKzC,IAAImN,EAAWhL,KAAK2mG,UAChBj7F,EAAQ1L,KAAKnD,QACjBmO,EAASI,WAAWvN,GACpB,IAAI8N,EAAMX,EAASnO,QAUnB,OARKmO,EAAS28F,aACZh8F,GAAOD,GAGLA,EAAQC,GACV3L,KAAKinG,sBAAsBv7F,EAAOC,GAAK,GAGlC,CAACD,EAAOC,EACjB,EAEAZ,EAAUzK,UAAUgL,aAAe,SAAUC,EAAQq8F,GAQnD,IAPA,IAAIC,EAAS7nG,KAAKsmG,QACdtiG,EAAahE,KAAKgnG,YAClBc,EAAS9jG,EAAWxI,OACpBq/C,EAAY76C,KAAKumG,WACjB76F,EAAQ1L,KAAKnD,QACb8O,EAAMD,EAAQpO,KAAKN,IAAIuO,EAAO/P,OAAQosG,GAAc,GAE/CtsG,EAAI,EAAGA,EAAIwsG,EAAQxsG,IAAK,CAC/B,IAAI4D,EAAM8E,EAAW1I,GACrB0qG,EAAa6B,EAAQvsG,EAAG4D,EAAIf,KAAMwN,GAAK,EACzC,CAIA,IAFA,IAAIo8F,EAAgB,GAEX39F,EAAMsB,EAAOtB,EAAMuB,EAAKvB,IAG/B,IAFA,IAAI2B,EAAY3B,EAAMsB,EAEbjC,EAAS,EAAGA,EAASq+F,EAAQr+F,IAAU,CAC1CvK,EAAM8E,EAAWyF,GAArB,IACI2G,EAAM60F,EAAuB+C,UAAUx2F,KAAKxR,KAAMuL,EAAOQ,IAAcg8F,EAAe7oG,EAAI+L,SAAUc,EAAWtC,GACnHo+F,EAAOp+F,GAAQW,GAAOgG,EACtB,IAAIo3F,EAAe3sD,EAAUpxC,GAC7B2G,EAAMo3F,EAAa,KAAOA,EAAa,GAAKp3F,GAC5CA,EAAMo3F,EAAa,KAAOA,EAAa,GAAKp3F,EAC9C,CAIF,OADApQ,KAAKwmG,UAAYxmG,KAAK8iG,OAASn3F,EACxB,CACLD,MAAOA,EACPC,IAAKA,EAET,EAEAZ,EAAUzK,UAAU2mG,sBAAwB,SAAUv7F,EAAOC,EAAKs6F,GAUhE,IATA,IAAIj7F,EAAWhL,KAAK2mG,UAChBkB,EAAS7nG,KAAKsmG,QACdtiG,EAAahE,KAAKgnG,YAClBc,EAAS9jG,EAAWxI,OACpBq/C,EAAY76C,KAAKumG,WACjB0B,GAAW,QAAIjkG,GAAY,SAAU9E,GACvC,OAAOA,EAAI+L,QACb,IAES3P,EAAI,EAAGA,EAAIwsG,EAAQxsG,IAAK,CAC/B,IAAI4D,EAAM8E,EAAW1I,GAEhBu/C,EAAUv/C,KACbu/C,EAAUv/C,GAAKsqG,KAGjBI,EAAa6B,EAAQvsG,EAAG4D,EAAIf,KAAMwN,EAAKs6F,EACzC,CAEA,GAAIj7F,EAASqB,YACXrB,EAASqB,YAAYX,EAAOC,EAAKk8F,EAAQhtD,QAIzC,IAFA,IAAInuC,EAAW,GAENtC,EAAMsB,EAAOtB,EAAMuB,EAAKvB,IAAO,CAEtCsC,EAAW1B,EAAS2B,QAAQvC,EAAKsC,GAQjC,IAAK,IAAIjD,EAAS,EAAGA,EAASq+F,EAAQr+F,IAAU,CAC9C,IAAIy+F,EAAaL,EAAOp+F,GAEpB2G,EAAMpQ,KAAK+mG,gBAAgBr6F,EAAUu7F,EAASx+F,GAASW,EAAKX,GAEhEy+F,EAAW99F,GAAOgG,EAClB,IAAIo3F,EAAe3sD,EAAUpxC,GAC7B2G,EAAMo3F,EAAa,KAAOA,EAAa,GAAKp3F,GAC5CA,EAAMo3F,EAAa,KAAOA,EAAa,GAAKp3F,EAC9C,CACF,EAGGpF,EAAS28F,YAAc38F,EAASm9F,OAEnCn9F,EAASm9F,QAGXnoG,KAAKwmG,UAAYxmG,KAAK8iG,OAASn3F,EAE/B3L,KAAKq4C,QAAU,EACjB,EAEAttC,EAAUzK,UAAUzD,MAAQ,WAC1B,OAAOmD,KAAK8iG,MACd,EAMA/3F,EAAUzK,UAAUtC,IAAM,SAAUkB,EAAKkL,GACvC,KAAMA,GAAO,GAAKA,EAAMpK,KAAK8iG,QAC3B,OAAO/lG,IAGT,IAAIqrG,EAAWpoG,KAAKsmG,QAAQpnG,GAC5B,OAAOkpG,EAAWA,EAASpoG,KAAKqN,YAAYjD,IAAQrN,GACtD,EAEAgO,EAAUzK,UAAUyN,UAAY,SAAU/J,EAAYoG,GACpD,IAAImB,EAAS,GACTlG,EAAS,GAEb,GAAW,MAAP+E,EAAa,CACfA,EAAMpG,EAENA,EAAa,GAEb,IAAK,IAAI1I,EAAI,EAAGA,EAAI0E,KAAKgnG,YAAYxrG,OAAQF,IAC3C+J,EAAOtC,KAAKzH,EAEhB,MACE+J,EAASrB,EAGF1I,EAAI,EAAb,IAAK,IAAW2S,EAAM5I,EAAO7J,OAAQF,EAAI2S,EAAK3S,IAC5CiQ,EAAOxI,KAAK/C,KAAKhC,IAAIqH,EAAO/J,GAAI8O,IAGlC,OAAOmB,CACT,EAMAR,EAAUzK,UAAUoN,cAAgB,SAAUxO,EAAKyO,GACjD,KAAMA,GAAU,GAAKA,EAAS3N,KAAKwmG,WACjC,OAAOzpG,IAGT,IAAIqrG,EAAWpoG,KAAKsmG,QAAQpnG,GAC5B,OAAOkpG,EAAWA,EAASz6F,GAAU5Q,GACvC,EAMAgO,EAAUzK,UAAUuN,OAAS,SAAU3O,GACrC,IAAImpG,EAAUroG,KAAKsmG,QAAQpnG,GACvBtC,EAAM,EAEV,GAAIyrG,EACF,IAAK,IAAI/sG,EAAI,EAAG2S,EAAMjO,KAAKnD,QAASvB,EAAI2S,EAAK3S,IAAK,CAChD,IAAI4R,EAAQlN,KAAKhC,IAAIkB,EAAK5D,GAErBwB,MAAMoQ,KACTtQ,GAAOsQ,EAEX,CAGF,OAAOtQ,CACT,EAMAmO,EAAUzK,UAAUwN,UAAY,SAAU5O,GACxC,IAAIopG,EAAe,GAEnBtoG,KAAKoF,KAAK,CAAClG,IAAM,SAAUkR,GACpBtT,MAAMsT,IACTk4F,EAAavlG,KAAKqN,EAEtB,IAGA,IAAIm4F,EAAqBD,EAAanzF,MAAK,SAAUiS,EAAGC,GACtD,OAAOD,EAAIC,CACb,IACIpZ,EAAMjO,KAAKnD,QAEf,OAAe,IAARoR,EAAY,EAAIA,EAAM,IAAM,EAAIs6F,GAAoBt6F,EAAM,GAAK,IAAMs6F,EAAmBt6F,EAAM,GAAKs6F,EAAmBt6F,EAAM,EAAI,IAAM,CAC/I,EAMAlD,EAAUzK,UAAU6N,gBAAkB,SAAUf,GAC9C,GAAIA,GAAYpN,KAAKwmG,WAAap5F,EAAW,EAC3C,OAAQ,EAGV,IAAKpN,KAAK4mG,SACR,OAAOx5F,EAIT,IAAIwjE,EAAU5wE,KAAK4mG,SAEf4B,EAAe53B,EAAQxjE,GAE3B,GAAoB,MAAhBo7F,GAAwBA,EAAexoG,KAAK8iG,QAAU0F,IAAiBp7F,EACzE,OAAOA,EAGT,IAAIghC,EAAO,EACPE,EAAQtuC,KAAK8iG,OAAS,EAE1B,MAAO10D,GAAQE,EAAO,CACpB,IAAI0rB,GAAO5rB,EAAOE,GAAS,EAAI,EAE/B,GAAIsiC,EAAQ5W,GAAO5sD,EACjBghC,EAAO4rB,EAAM,MACR,MAAI4W,EAAQ5W,GAAO5sD,GAGxB,OAAO4sD,EAFP1rB,EAAQ0rB,EAAM,CAGhB,CACF,CAEA,OAAQ,CACV,EAWAjvD,EAAUzK,UAAUgO,iBAAmB,SAAUpP,EAAKgO,EAAOqB,GAC3D,IAAIs5F,EAAS7nG,KAAKsmG,QACd+B,EAAUR,EAAO3oG,GACjBupG,EAAiB,GAErB,IAAKJ,EACH,OAAOI,EAGU,MAAfl6F,IACFA,EAActR,KAOhB,IAJA,IAAI4/B,EAAU5/B,IACV6/B,GAAW,EACX4rE,EAAoB,EAEfptG,EAAI,EAAG2S,EAAMjO,KAAKnD,QAASvB,EAAI2S,EAAK3S,IAAK,CAChD,IAAIzC,EAAYmH,KAAKqN,YAAY/R,GAC7BuU,EAAO3C,EAAQm7F,EAAQxvG,GACvBykC,EAAOhgC,KAAKuB,IAAIgR,GAEhBytB,GAAQ/uB,KAON+uB,EAAOT,GAAWS,IAAST,GAAWhtB,GAAQ,GAAKitB,EAAU,KAC/DD,EAAUS,EACVR,EAAUjtB,EACV64F,EAAoB,GAGlB74F,IAASitB,IACX2rE,EAAeC,KAAuBptG,GAG5C,CAGA,OADAmtG,EAAejtG,OAASktG,EACjBD,CACT,EAEA19F,EAAUzK,UAAUsN,WAAa,WAC/B,IAAImkD,EACA6e,EAAU5wE,KAAK4mG,SAEnB,GAAIh2B,EAAS,CACX,IAAIm1B,EAAOn1B,EAAQxF,YACfu9B,EAAY3oG,KAAK8iG,OAErB,GAAIiD,IAASxkG,MAAO,CAClBwwD,EAAa,IAAIg0C,EAAK4C,GAEtB,IAAK,IAAIrtG,EAAI,EAAGA,EAAIqtG,EAAWrtG,IAC7By2D,EAAWz2D,GAAKs1E,EAAQt1E,EAE5B,MACEy2D,EAAa,IAAIg0C,EAAKn1B,EAAQg4B,OAAQ,EAAGD,EAE7C,KAAO,CACD5C,EAAOL,EAAe1lG,KAAKwmG,WAC/Bz0C,EAAa,IAAIg0C,EAAK/lG,KAAKnD,SAE3B,IAASvB,EAAI,EAAGA,EAAIy2D,EAAWv2D,OAAQF,IACrCy2D,EAAWz2D,GAAKA,CAEpB,CAEA,OAAOy2D,CACT,EAMAhnD,EAAUzK,UAAUsO,OAAS,SAAUtE,EAAMtQ,GAC3C,IAAKgG,KAAK8iG,OACR,OAAO9iG,KAaT,IAVA,IAAIqmG,EAAWrmG,KAAKmwB,QAChBtzB,EAAQwpG,EAASxpG,QACjBkpG,EAAOL,EAAeW,EAASG,WAC/Bz0C,EAAa,IAAIg0C,EAAKlpG,GACtBqQ,EAAQ,GACR27F,EAAUv+F,EAAK9O,OACfye,EAAS,EACT6uF,EAAOx+F,EAAK,GACZu9F,EAASxB,EAASC,QAEbhrG,EAAI,EAAGA,EAAIuB,EAAOvB,IAAK,CAC9B,IAAIgkG,OAAO,EACP3xF,EAAS04F,EAASh5F,YAAY/R,GAElC,GAAgB,IAAZutG,EACFvJ,EAAOtlG,EAAGsB,QACL,GAAgB,IAAZutG,EAAe,CACxB,IAAIz4F,EAAMy3F,EAAOiB,GAAMn7F,GACvB2xF,EAAOtlG,EAAGoW,EAAK9U,EACjB,KAAO,CAGL,IAFA,IAAIkxC,EAAI,EAEDA,EAAIq8D,EAASr8D,IAClBt/B,EAAMs/B,GAAKq7D,EAAOv9F,EAAKkiC,IAAI7+B,GAG7BT,EAAMs/B,GAAKlxC,EACXgkG,EAAOtlG,EAAGiV,MAAM,KAAM/B,EACxB,CAEIoyF,IACFvtC,EAAW93C,KAAYtM,EAE3B,CAaA,OAVIsM,EAASpd,IACXwpG,EAASO,SAAW70C,GAGtBs0C,EAASvD,OAAS7oF,EAElBosF,EAAShuD,QAAU,GAEnBguD,EAAS0C,mBAEF1C,CACT,EAOAt7F,EAAUzK,UAAUuO,YAAc,SAAUxD,GAC1C,IAAIg7F,EAAWrmG,KAAKmwB,QAChBliB,EAAMo4F,EAASvD,OAEnB,IAAK70F,EACH,OAAOjO,KAGT,IAAIsK,GAAO,QAAKe,GACZw9F,EAAUv+F,EAAK9O,OAEnB,IAAKqtG,EACH,OAAO7oG,KAGT,IAAIgpG,EAAgB3C,EAASxpG,QACzBkpG,EAAOL,EAAeW,EAASG,WAC/Bz0C,EAAa,IAAIg0C,EAAKiD,GACtB/uF,EAAS,EACT6uF,EAAOx+F,EAAK,GACZnN,EAAMkO,EAAMy9F,GAAM,GAClB9rG,EAAMqO,EAAMy9F,GAAM,GAClBG,EAAW5C,EAASC,QACpB4C,GAAgB,EAEpB,IAAK7C,EAASO,SAAU,CAEtB,IAAIx8F,EAAM,EAEV,GAAgB,IAAZy+F,EAAe,CAGjB,IAFA,IAAIX,EAAae,EAAS3+F,EAAK,IAEtBhP,EAAI,EAAGA,EAAI2S,EAAK3S,IAAK,CAC5B,IAAI8U,EAAM83F,EAAW5sG,IAMjB8U,GAAOjT,GAAOiT,GAAOpT,GAAOF,MAAMsT,MACpC2hD,EAAW93C,KAAY7P,GAGzBA,GACF,CAEA8+F,GAAgB,CAClB,MAAO,GAAgB,IAAZL,EAAe,CACpBX,EAAae,EAAS3+F,EAAK,IAA/B,IACI6+F,EAAcF,EAAS3+F,EAAK,IAC5B8+F,EAAO/9F,EAAMf,EAAK,IAAI,GACtB++F,EAAOh+F,EAAMf,EAAK,IAAI,GAE1B,IAAShP,EAAI,EAAGA,EAAI2S,EAAK3S,IAAK,CACxB8U,EAAM83F,EAAW5sG,GAArB,IACIguG,EAAOH,EAAY7tG,IAElB8U,GAAOjT,GAAOiT,GAAOpT,GAAOF,MAAMsT,MAAUk5F,GAAQF,GAAQE,GAAQD,GAAQvsG,MAAMwsG,MACrFv3C,EAAW93C,KAAY7P,GAGzBA,GACF,CAEA8+F,GAAgB,CAClB,CACF,CAEA,IAAKA,EACH,GAAgB,IAAZL,EACF,IAASvtG,EAAI,EAAGA,EAAI0tG,EAAe1tG,IAAK,CACtC,IAAI8R,EAAWi5F,EAASh5F,YAAY/R,GAChC8U,EAAM64F,EAAS3+F,EAAK,IAAI8C,IAExBgD,GAAOjT,GAAOiT,GAAOpT,GAAOF,MAAMsT,MACpC2hD,EAAW93C,KAAY7M,EAE3B,MAEA,IAAS9R,EAAI,EAAGA,EAAI0tG,EAAe1tG,IAAK,CAItC,IAHA,IAAIgkG,GAAO,EAGF9yD,GAFLp/B,EAAWi5F,EAASh5F,YAAY/R,GAEvB,GAAGkxC,EAAIq8D,EAASr8D,IAAK,CAChC,IAAI+8D,EAAOj/F,EAAKkiC,GACZp8B,EAAM64F,EAASM,GAAMn8F,IAErBgD,EAAM/E,EAAMk+F,GAAM,IAAMn5F,EAAM/E,EAAMk+F,GAAM,MAC5CjK,GAAO,EAEX,CAEIA,IACFvtC,EAAW93C,KAAYosF,EAASh5F,YAAY/R,GAEhD,CAeJ,OAVI2e,EAAS+uF,IACX3C,EAASO,SAAW70C,GAGtBs0C,EAASvD,OAAS7oF,EAElBosF,EAAShuD,QAAU,GAEnBguD,EAAS0C,mBAEF1C,CACT,EAgBAt7F,EAAUzK,UAAUmC,IAAM,SAAU6H,EAAMtQ,GAExC,IAAIkY,EAASlS,KAAKmwB,MAAM7lB,GAIxB,OAFAtK,KAAKwpG,YAAYt3F,EAAQ5H,EAAMtQ,GAExBkY,CACT,EAMAnH,EAAUzK,UAAU+O,OAAS,SAAU/E,EAAMtQ,GAC3CgG,KAAKwpG,YAAYxpG,KAAMsK,EAAMtQ,EAC/B,EAEA+Q,EAAUzK,UAAUkpG,YAAc,SAAUt3F,EAAQ5H,EAAMtQ,GAQxD,IAPA,IAAIyvG,EAAev3F,EAAOo0F,QACtBoD,EAAc,GACdb,EAAUv+F,EAAK9O,OACfkgF,EAAYxpE,EAAOrV,QACnB0O,EAAS,GACTsvC,EAAY3oC,EAAOq0F,WAEdjrG,EAAI,EAAGA,EAAIgP,EAAK9O,OAAQF,IAC/Bu/C,EAAUvwC,EAAKhP,IAAMsqG,IAGvB,IAAK,IAAI/sG,EAAY,EAAGA,EAAY6iF,EAAW7iF,IAAa,CAG1D,IAFA,IAAIuU,EAAW8E,EAAO7E,YAAYxU,GAEzB2zC,EAAI,EAAGA,EAAIq8D,EAASr8D,IAC3BjhC,EAAOihC,GAAKi9D,EAAan/F,EAAKkiC,IAAIp/B,GAGpC7B,EAAOs9F,GAAWhwG,EAClB,IAAI8wG,EAAW3vG,GAAMA,EAAGiV,MAAM,KAAM1D,GAEpC,GAAgB,MAAZo+F,EAAkB,CAEI,kBAAbA,IACTD,EAAY,GAAKC,EACjBA,EAAWD,GAGb,IAASpuG,EAAI,EAAGA,EAAIquG,EAASnuG,OAAQF,IAAK,CACxC,IAAI4D,EAAMoL,EAAKhP,GACX8U,EAAMu5F,EAASruG,GACfsuG,EAAiB/uD,EAAU37C,GAC3BkpG,EAAWqB,EAAavqG,GAExBkpG,IACFA,EAASh7F,GAAYgD,GAGnBA,EAAMw5F,EAAe,KACvBA,EAAe,GAAKx5F,GAGlBA,EAAMw5F,EAAe,KACvBA,EAAe,GAAKx5F,EAExB,CACF,CACF,CACF,EAQArF,EAAUzK,UAAUtB,eAAiB,SAAUyQ,EAAgB3Q,GAC7D,IAOI+qG,EACAh2D,EACAi2D,EATA53F,EAASlS,KAAKmwB,MAAM,CAAC1gB,IAAiB,GACtCs6F,EAAgB73F,EAAOo0F,QACvB8B,EAAW2B,EAAct6F,GACzBxB,EAAMjO,KAAKnD,QACXmtG,EAAe,EACfC,EAAY3sG,KAAK0f,MAAM,EAAIle,GAC3BorG,EAAkBlqG,KAAKqN,YAAY,GAInC0kD,EAAa,IAAK2zC,EAAe1lG,KAAKwmG,WAAzB,CAAqClpG,KAAKH,IAAuC,GAAlCG,KAAKu6C,KAAK5pC,EAAMg8F,GAAa,GAAQh8F,IAErG8jD,EAAWi4C,KAAkBE,EAE7B,IAAK,IAAI5uG,EAAI,EAAGA,EAAI2S,EAAM,EAAG3S,GAAK2uG,EAAW,CAM3C,IALA,IAAIE,EAAiB7sG,KAAKH,IAAI7B,EAAI2uG,EAAWh8F,EAAM,GAC/Cm8F,EAAe9sG,KAAKH,IAAI7B,EAAgB,EAAZ2uG,EAAeh8F,GAC3Co8F,GAAQD,EAAeD,GAAkB,EACzCG,EAAO,EAEFlgG,EAAM+/F,EAAgB//F,EAAMggG,EAAchgG,IAAO,CACxD,IAAIgD,EAAWpN,KAAKqN,YAAYjD,GAC5BwS,EAAIwrF,EAASh7F,GAEbtQ,MAAM8f,KAIV0tF,GAAQ1tF,EACV,CAEA0tF,GAAQF,EAAeD,EACvB,IAAII,EAAajvG,EACbkvG,EAAWltG,KAAKH,IAAI7B,EAAI2uG,EAAWh8F,GACnCw8F,EAAUnvG,EAAI,EACdovG,EAAUtC,EAAS8B,GACvBL,GAAW,EACXC,EAAeS,EACf,IAAII,GAAiB,EACjBC,EAAW,EAGf,IAASxgG,EAAMmgG,EAAYngG,EAAMogG,EAAUpgG,IAAO,CAC5CgD,EAAWpN,KAAKqN,YAAYjD,GAC5BwS,EAAIwrF,EAASh7F,GAEbtQ,MAAM8f,IACRguF,IAEID,EAAgB,IAClBA,EAAgBv9F,KAOpBymC,EAAOv2C,KAAKuB,KAAK4rG,EAAUJ,IAASztF,EAAI8tF,IAAYD,EAAUrgG,IAAQkgG,EAAOI,IAEzE72D,EAAOg2D,IACTA,EAAUh2D,EACVi2D,EAAe18F,GAEnB,CAEIw9F,EAAW,GAAKA,EAAWJ,EAAWD,IAGxCx4C,EAAWi4C,KAAkB1sG,KAAKH,IAAIwtG,EAAeb,GACrDA,EAAexsG,KAAKN,IAAI2tG,EAAeb,IAGzC/3C,EAAWi4C,KAAkBF,EAC7BI,EAAkBJ,CACpB,CAOA,OAJA/3C,EAAWi4C,KAAkBhqG,KAAKqN,YAAYY,EAAM,GACpDiE,EAAO4wF,OAASkH,EAChB93F,EAAO00F,SAAW70C,EAClB7/C,EAAO7E,YAAcrN,KAAK6qG,WACnB34F,CACT,EAOAnH,EAAUzK,UAAUlB,WAAa,SAAUkQ,EAAWxQ,EAAMyQ,EAAaC,GAWvE,IAVA,IAAI0C,EAASlS,KAAKmwB,MAAM,CAAC7gB,IAAY,GACjCy6F,EAAgB73F,EAAOo0F,QACvBwE,EAAc,GACdb,EAAY3sG,KAAK0f,MAAM,EAAIle,GAC3BspG,EAAW2B,EAAcz6F,GACzBrB,EAAMjO,KAAKnD,QACX+sG,EAAiB13F,EAAOq0F,WAAWj3F,GAAas2F,IAChD7zC,EAAa,IAAK2zC,EAAe1lG,KAAKwmG,WAAzB,CAAqClpG,KAAKu6C,KAAK5pC,EAAMg8F,IAClEhwF,EAAS,EAEJ3e,EAAI,EAAGA,EAAI2S,EAAK3S,GAAK2uG,EAAW,CAEnCA,EAAYh8F,EAAM3S,IACpB2uG,EAAYh8F,EAAM3S,EAClBwvG,EAAYtvG,OAASyuG,GAGvB,IAAK,IAAIz9D,EAAI,EAAGA,EAAIy9D,EAAWz9D,IAAK,CAClC,IAAItlB,EAAUlnB,KAAKqN,YAAY/R,EAAIkxC,GACnCs+D,EAAYt+D,GAAK47D,EAASlhF,EAC5B,CAEA,IAAIha,EAAQqC,EAAYu7F,GACpBC,EAAiB/qG,KAAKqN,YAAY/P,KAAKH,IAAI7B,EAAIkU,EAAYs7F,EAAa59F,IAAU,EAAGe,EAAM,IAE/Fm6F,EAAS2C,GAAkB79F,EAEvBA,EAAQ08F,EAAe,KACzBA,EAAe,GAAK18F,GAGlBA,EAAQ08F,EAAe,KACzBA,EAAe,GAAK18F,GAGtB6kD,EAAW93C,KAAY8wF,CACzB,CAOA,OALA74F,EAAO4wF,OAAS7oF,EAChB/H,EAAO00F,SAAW70C,EAElB7/C,EAAO62F,mBAEA72F,CACT,EAWAnH,EAAUzK,UAAU8E,KAAO,SAAUkF,EAAMtQ,GACzC,GAAKgG,KAAK8iG,OAOV,IAHA,IAAI+F,EAAUv+F,EAAK9O,OACfqsG,EAAS7nG,KAAKsmG,QAEThrG,EAAI,EAAG2S,EAAMjO,KAAKnD,QAASvB,EAAI2S,EAAK3S,IAAK,CAChD,IAAIqS,EAAS3N,KAAKqN,YAAY/R,GAE9B,OAAQutG,GACN,KAAK,EACH7uG,EAAGsB,GACH,MAEF,KAAK,EACHtB,EAAG6tG,EAAOv9F,EAAK,IAAIqD,GAASrS,GAC5B,MAEF,KAAK,EACHtB,EAAG6tG,EAAOv9F,EAAK,IAAIqD,GAASk6F,EAAOv9F,EAAK,IAAIqD,GAASrS,GACrD,MAEF,QAIE,IAHA,IAAIkxC,EAAI,EACJt/B,EAAQ,GAELs/B,EAAIq8D,EAASr8D,IAClBt/B,EAAMs/B,GAAKq7D,EAAOv9F,EAAKkiC,IAAI7+B,GAI7BT,EAAMs/B,GAAKlxC,EACXtB,EAAGiV,MAAM,KAAM/B,GAErB,CACF,EAMAnC,EAAUzK,UAAUwM,cAAgB,SAAU5N,GAE5C,IAAImpG,EAAUroG,KAAKsmG,QAAQpnG,GACvB8rG,EAAgBpF,IAEpB,IAAKyC,EACH,OAAO2C,EAIT,IAKIC,EALAC,EAAUlrG,KAAKnD,QAIfsuG,GAAUnrG,KAAK4mG,SAGnB,GAAIuE,EACF,OAAOnrG,KAAKumG,WAAWrnG,GAAKyG,QAK9B,GAFAslG,EAAYjrG,KAAKq4C,QAAQn5C,GAErB+rG,EACF,OAAOA,EAAUtlG,QAGnBslG,EAAYD,EAIZ,IAHA,IAAI7tG,EAAM8tG,EAAU,GAChBjuG,EAAMiuG,EAAU,GAEX3vG,EAAI,EAAGA,EAAI4vG,EAAS5vG,IAAK,CAChC,IAAIqS,EAAS3N,KAAKqN,YAAY/R,GAC1B4R,EAAQm7F,EAAQ16F,GACpBT,EAAQ/P,IAAQA,EAAM+P,GACtBA,EAAQlQ,IAAQA,EAAMkQ,EACxB,CAIA,OAFA+9F,EAAY,CAAC9tG,EAAKH,GAClBgD,KAAKq4C,QAAQn5C,GAAO+rG,EACbA,CACT,EAMAlgG,EAAUzK,UAAUoP,eAAiB,SAAUtF,GAC7C,IAAIuD,EAAS3N,KAAKqN,YAAYjD,GAE9B,GAAKpK,KAAK2mG,UAAUgB,WAUlB,OAAO3nG,KAAK2mG,UAAUh6F,QAAQgB,GAN9B,IAHA,IAAIyC,EAAM,GACNy3F,EAAS7nG,KAAKsmG,QAEThrG,EAAI,EAAGA,EAAIusG,EAAOrsG,OAAQF,IACjC8U,EAAIrN,KAAK8kG,EAAOvsG,GAAGqS,IAGrB,OAAOyC,CAIX,EAQArF,EAAUzK,UAAU6vB,MAAQ,SAAUi7E,EAAYC,GAChD,IAAIn5F,EAAS,IAAInH,EACb88F,EAAS7nG,KAAKsmG,QACdgF,EAAgBF,IAAc,QAAOA,GAAY,SAAU1gF,EAAKjhB,GAElE,OADAihB,EAAIjhB,IAAU,EACPihB,CACT,GAAG,CAAC,GAEJ,GAAI4gF,EACF,IAAK,IAAIhwG,EAAI,EAAGA,EAAIusG,EAAOrsG,OAAQF,IAEjC4W,EAAOo0F,QAAQhrG,GAAMgwG,EAAchwG,GAAiBuqG,EAAWgC,EAAOvsG,IAA9BusG,EAAOvsG,QAGjD4W,EAAOo0F,QAAUuB,EAWnB,OARA7nG,KAAKurG,iBAAiBr5F,GAEjBm5F,IACHn5F,EAAO00F,SAAW5mG,KAAKwrG,iBAGzBt5F,EAAO62F,mBAEA72F,CACT,EAEAnH,EAAUzK,UAAUirG,iBAAmB,SAAUr5F,GAC/CA,EAAO4wF,OAAS9iG,KAAK8iG,OACrB5wF,EAAOs0F,UAAYxmG,KAAKwmG,UACxBt0F,EAAOy0F,UAAY3mG,KAAK2mG,UACxBz0F,EAAO80F,YAAchnG,KAAKgnG,YAC1B90F,EAAOmmC,SAAU,QAAMr4C,KAAKq4C,SAC5BnmC,EAAOq0F,YAAa,QAAMvmG,KAAKumG,WACjC,EAEAx7F,EAAUzK,UAAUkrG,cAAgB,WAClC,GAAIxrG,KAAK4mG,SAAU,CACjB,IAAIb,EAAO/lG,KAAK4mG,SAASx7B,YACrBwF,OAAU,EAEd,GAAIm1B,IAASxkG,MAAO,CAClB,IAAIonG,EAAY3oG,KAAK4mG,SAASprG,OAC9Bo1E,EAAU,IAAIm1B,EAAK4C,GAEnB,IAAK,IAAIrtG,EAAI,EAAGA,EAAIqtG,EAAWrtG,IAC7Bs1E,EAAQt1E,GAAK0E,KAAK4mG,SAAStrG,EAE/B,MACEs1E,EAAU,IAAIm1B,EAAK/lG,KAAK4mG,UAG1B,OAAOh2B,CACT,CAEA,OAAO,IACT,EAEA7lE,EAAUzK,UAAUumG,mBAAqB,SAAUz8F,GACjD,OAAOA,CACT,EAEAW,EAAUzK,UAAUuqG,WAAa,SAAUzgG,GACzC,OAAIA,EAAMpK,KAAK8iG,QAAU14F,GAAO,EACvBpK,KAAK4mG,SAASx8F,IAGf,CACV,EAEAW,EAAUzK,UAAUyoG,iBAAmB,WACrC/oG,KAAKqN,YAAcrN,KAAK4mG,SAAW5mG,KAAK6qG,WAAa7qG,KAAK6mG,kBAC5D,EAEA97F,EAAUiH,cAAgB,WACxB,SAASy5F,EAAkB/+F,EAAUzB,EAAUpS,EAAWmM,GACxD,OAAO,QAAe0H,EAAS1H,GAAWhF,KAAKgnG,YAAYhiG,GAC7D,CAEAigG,EAAyB,CACvB+C,UAAWyD,EACXC,WAAY,SAAUh/F,EAAUzB,EAAUpS,EAAWmM,GACnD,OAAO,QAAe0H,EAASzB,GAAWjL,KAAKgnG,YAAYhiG,GAC7D,EACA2mG,aAAcF,EACdx5F,SAAU,SAAUvF,EAAUzB,EAAUpS,EAAWmM,GAKjD,IAAIkI,EAAQR,IAA+B,MAAlBA,EAASQ,MAAgBR,EAAWA,EAASQ,OACtE,OAAO,QAAeA,aAAiB3L,MAAQ2L,EAAMlI,GACnDkI,EAAOlN,KAAKgnG,YAAYhiG,GAC5B,EACA4mG,WAAY,SAAUl/F,EAAUzB,EAAUpS,EAAWmM,GACnD,OAAO0H,EAAS1H,EAClB,EAEJ,CAxB0B,GA0BnB+F,CACT,CArkCA,GAukCA,S,qCChpCI8gG,EAAU,EAEVl6D,EAEJ,WACE,SAASA,EAAYhrC,GACnB3G,KAAKyN,WAAa9G,EAAI8G,YAAc,GACpCzN,KAAK8rG,aAAenlG,EAAIolG,YACxB/rG,KAAKgsG,eAAiBrlG,EAAIkpC,cAC1B7vC,KAAKmsD,MAAQ0/C,CACf,CA2EA,OAzEAl6D,EAAYs6D,kBAAoB,SAAUn0F,GACxC,IAAI8B,EAAS9B,EAAU8B,OACnB/b,EAAO+b,EAAO/b,KACd4P,EAAa5P,IAAQ,QAAIA,EAAMsP,GACnC,OAAO,IAAIwkC,EAAY,CACrBlkC,WAAYA,EACZs+F,aAAct+F,EAEdoiC,eAAuC,IAAxBj2B,EAAOsyF,cAE1B,EAIAv6D,EAAYrxC,UAAUs4D,WAAa,SAAUnoB,GAE3C,OAAOzwC,KAAKmsG,kBAAkBnuG,IAAIyyC,EACpC,EAMAkB,EAAYrxC,UAAUmnG,gBAAkB,SAAUh3D,GAChD,IAAI54B,EACAk0F,EAAc/rG,KAAK8rG,aAMvB,KAAK,QAASr7D,KAAcs7D,EAC1B,OAAOt7D,EAWT,GAAIs7D,IAAgB/rG,KAAKgsG,eAGvB,OAFAn0F,EAAQ7X,KAAKyN,WAAWjS,OACxBwE,KAAKyN,WAAWoK,GAAS44B,EAClB54B,EAGT,IAAIpV,EAAMzC,KAAKmsG,kBAgBf,OAbAt0F,EAAQpV,EAAIzE,IAAIyyC,GAEH,MAAT54B,IACEk0F,GACFl0F,EAAQ7X,KAAKyN,WAAWjS,OACxBwE,KAAKyN,WAAWoK,GAAS44B,EAEzBhuC,EAAI+B,IAAIisC,EAAU54B,IAElBA,EAAQ9a,KAIL8a,CACT,EAGA85B,EAAYrxC,UAAU6rG,gBAAkB,WACtC,OAAOnsG,KAAKosG,OAASpsG,KAAKosG,MAAO,QAAcpsG,KAAKyN,YACtD,EAEOkkC,CACT,CAlFA,GAoFA,SAASxkC,EAAQud,GACf,OAAI,QAASA,IAAqB,MAAbA,EAAIxd,MAChBwd,EAAIxd,MAEJwd,EAAM,EAEjB,CAEA,Q,4NC3FI2hF,EAEJ,WACE,SAASA,EAAWl9E,GAClBnvB,KAAKnC,KAAOsxB,EAAOtxB,OAASsxB,EAAO/iB,eAAiB,KAA8B,CAAC,EAAI,IACvFpM,KAAKoM,aAAe+iB,EAAO/iB,cAAgB,KAE3CpM,KAAKssG,eAAiBn9E,EAAOm9E,gBAAkB,KAC/CtsG,KAAKusG,WAAap9E,EAAOo9E,YAAc,EACvCvsG,KAAK+V,wBAA0BoZ,EAAOpZ,wBACtC/V,KAAKwsG,cAAgBr9E,EAAOq9E,cAC5B,IAAI35F,EAAmB7S,KAAK6S,iBAAmBsc,EAAOtc,iBAEtD,GAAIA,EACF,IAAK,IAAIvX,EAAI,EAAGA,EAAIuX,EAAiBrX,OAAQF,IAAK,CAChD,IAAI4D,EAAM2T,EAAiBvX,GAEX,MAAZ4D,EAAIf,OACF,QAAa6B,KAAM1E,KAAO,YAC5B4D,EAAIf,KAAO,UAGjB,CAEJ,CAEA,OAAOkuG,CACT,CAzBA,GA2BO,SAASI,EAAiBr8F,GAC/B,OAAOA,aAAei8F,CACxB,CAMO,SAASK,EAAaC,EAAYC,EACzCxgG,GACEA,EAAeA,GAAgBygG,EAAmBF,GAClD,IAAIL,EAAiBM,EAAkBN,eACnCQ,EAAaC,EAA0BJ,EAAYvgG,EAAckgG,EAAgBM,EAAkBI,aAAcJ,EAAkB5oG,YACnImO,EAAS,IAAIk6F,EAAW,CAC1BxuG,KAAM8uG,EACNvgG,aAAcA,EACdkgG,eAAgBA,EAChBz5F,iBAAkBi6F,EAAWj6F,iBAC7B05F,WAAYO,EAAWP,WACvBx2F,wBAAyB+2F,EAAW/2F,wBACpCy2F,eAAe,QAAMI,KAEvB,OAAOz6F,CACT,CAKO,SAAS86F,EAAiCpvG,GAC/C,OAAO,IAAIwuG,EAAW,CACpBxuG,KAAMA,EACNuO,cAAc,QAAavO,GAAQ,KAA4B,MAEnE,CAKO,SAASqvG,EAAmB/6F,GACjC,OAAO,IAAIk6F,EAAW,CACpBxuG,KAAMsU,EAAOtU,KACbuO,aAAc+F,EAAO/F,aACrBkgG,eAAgBn6F,EAAOm6F,eACvBz5F,kBAAkB,QAAMV,EAAOU,kBAC/B05F,WAAYp6F,EAAOo6F,WACnBx2F,wBAAyB5D,EAAO4D,yBAEpC,CAKO,SAAS82F,EAAmBhvG,GACjC,IAAIuO,EAAe,KAEnB,IAAI,QAAavO,GACfuO,EAAe,UACV,IAAI,QAAQvO,GAAO,CAEJ,IAAhBA,EAAKrC,SACP4Q,EAAe,MAGjB,IAAK,IAAI9Q,EAAI,EAAG2S,EAAMpQ,EAAKrC,OAAQF,EAAI2S,EAAK3S,IAAK,CAC/C,IAAIkE,EAAO3B,EAAKvC,GAEhB,GAAY,MAARkE,EAAJ,CAEO,IAAI,QAAQA,GAAO,CACxB4M,EAAe,KACf,KACF,CAAO,IAAI,QAAS5M,GAAO,CACzB4M,EAAe,KACf,KACF,EACF,CACF,MAAO,IAAI,QAASvO,GAClB,IAAK,IAAIgF,KAAOhF,EACd,IAAI,QAAOA,EAAMgF,KAAQ,QAAYhF,EAAKgF,IAAO,CAC/CuJ,EAAe,KACf,KACF,CAIJ,OAAOA,CACT,CAMA,SAAS2gG,EAA0BlvG,EAAMuO,EAAckgG,EAAgBU,EAKvEn6F,GACE,IAAIkD,EACAw2F,EAKJ,IAAK1uG,EACH,MAAO,CACLgV,iBAAkBs6F,EAA0Bt6F,GAC5C05F,WAAYA,EACZx2F,wBAAyBA,GAI7B,GAAI3J,IAAiB,KAA0B,CAC7C,IAAIghG,EAAgBvvG,EAKC,SAAjBmvG,GAA2C,MAAhBA,EAC7BK,GAAqB,SAAUj9F,GAElB,MAAPA,GAAuB,MAARA,KACb,QAASA,GACG,MAAdm8F,IAAuBA,EAAa,GAEpCA,EAAa,EAInB,GAAGD,EAAgBc,EAAe,IAElCb,GAAa,QAASS,GAAgBA,EAAeA,EAAe,EAAI,EAGrEn6F,GAAmC,IAAf05F,IACvB15F,EAAmB,GACnBw6F,GAAqB,SAAUj9F,EAAKyH,GAClChF,EAAiBgF,GAAgB,MAAPzH,EAAcA,EAAM,GAAK,EACrD,GAAGk8F,EAAgBc,EAAenwG,MAGpC8Y,EAA0BlD,EAAmBA,EAAiBrX,OAAS8wG,IAAmB,KAAuBc,EAAc5xG,OAAS4xG,EAAc,GAAKA,EAAc,GAAG5xG,OAAS,IACvL,MAAO,GAAI4Q,IAAiB,KACrByG,IACHA,EAAmBy6F,EAA4BzvG,SAE5C,GAAIuO,IAAiB,KACrByG,IACHA,EAAmB,IACnB,QAAKhV,GAAM,SAAU0vG,EAAQ1qG,GAC3BgQ,EAAiB9P,KAAKF,EACxB,UAEG,GAAIuJ,IAAiB,KAAwB,CAClD,IAAIohG,GAAS,QAAiB3vG,EAAK,IACnCkY,GAA0B,QAAQy3F,IAAWA,EAAOhyG,QAAU,CAChE,MAA4B,KAM5B,MAAO,CACL+wG,WAAYA,EACZ15F,iBAAkBs6F,EAA0Bt6F,GAC5CkD,wBAAyBA,EAE7B,CAEA,SAASu3F,EAA4BzvG,GACnC,IACI6sB,EADA+iF,EAAa,EAGjB,MAAOA,EAAa5vG,EAAKrC,UAAYkvB,EAAM7sB,EAAK4vG,OAGhD,GAAI/iF,EAAK,CACP,IAAIgjF,EAAe,GAInB,OAHA,QAAKhjF,GAAK,SAAUxd,EAAOrK,GACzB6qG,EAAa3qG,KAAKF,EACpB,IACO6qG,CACT,CACF,CAKA,SAASP,EAA0Bt6F,GACjC,GAAKA,EAAL,CAKA,IAAI86F,GAAU,UACd,OAAO,QAAI96F,GAAkB,SAAU4xB,EAAS5sB,GAC9C4sB,GAAU,QAASA,GAAWA,EAAU,CACtC9/B,KAAM8/B,GAGR,IAAIjlC,EAAO,CACTmF,KAAM8/B,EAAQ9/B,KACdsP,YAAawwB,EAAQxwB,YACrB9V,KAAMsmC,EAAQtmC,MAKhB,GAAiB,MAAbqB,EAAKmF,KACP,OAAOnF,EAITA,EAAKmF,MAAQ,GAMW,MAApBnF,EAAKyU,cACPzU,EAAKyU,YAAczU,EAAKmF,MAG1B,IAAIipG,EAAQD,EAAQ3vG,IAAIwB,EAAKmF,MAU7B,OARKipG,EAKHpuG,EAAKmF,MAAQ,IAAMipG,EAAM/wG,QAJzB8wG,EAAQnpG,IAAIhF,EAAKmF,KAAM,CACrB9H,MAAO,IAMJ2C,CACT,GA1CA,CA2CF,CAEA,SAAS6tG,EAAqBrzG,EAAIsyG,EAAgBzuG,EAAMgwG,GACtD,GAAIvB,IAAmB,KACrB,IAAK,IAAIhxG,EAAI,EAAGA,EAAIuC,EAAKrC,QAAUF,EAAIuyG,EAASvyG,IAC9CtB,EAAG6D,EAAKvC,GAAKuC,EAAKvC,GAAG,GAAK,KAAMA,OAGlC,KAAIkyG,EAAS3vG,EAAK,IAAM,GAExB,IAASvC,EAAI,EAAGA,EAAIkyG,EAAOhyG,QAAUF,EAAIuyG,EAASvyG,IAChDtB,EAAGwzG,EAAOlyG,GAAIA,EAHU,CAM9B,CAEO,SAASwyG,EAAyB37F,GACvC,IAAI/F,EAAe+F,EAAO/F,aAC1B,OAAOA,IAAiB,MAA6BA,IAAiB,IACxE,C,0LC9RI8iB,GAAQ,UACR6+E,EAAe,CACjBC,MAAO,IACPC,IAAK,IACL1gG,QAAS,IACT8tD,OAAQ,IACR3qB,KAAM,KAcJj7B,EAEJ,WACE,SAASA,EAAiB9O,GACxB3G,KAAKgE,WAAa2C,EAAI3C,WACtBhE,KAAKsH,YAAcX,EAAIgP,iBACvB3V,KAAKmS,OAASxL,EAAIwL,OAClBnS,KAAKkuG,cAAgBvnG,EAAI+O,mBAEzB1V,KAAKmuG,kBAAkBxnG,EAAIgP,iBAC7B,CAsJA,OApJAF,EAAiBnV,UAAU+H,mBAAqB,WAC9C,OAAOrI,KAAKsH,WACd,EAEAmO,EAAiBnV,UAAU6tG,kBAAoB,SAAUx4F,GACvD3V,KAAKsH,YAAcqO,EAEdA,IAIA3V,KAAKouG,cACRpuG,KAAKouG,YAAcC,EAAuBruG,KAAKmS,SAEnD,EAUAsD,EAAiBnV,UAAUyJ,wBAA0B,SAAU9F,GAC7D,OAAO,QAAUjE,KAAKouG,YAAYpwG,IAAIiG,IAAW,EACnD,EAQAwR,EAAiBnV,UAAUsJ,mBAAqB,SAAU5E,GACxD,IAAI6N,EAAmB7S,KAAKmS,OAAOU,iBAEnC,GAAIA,EACF,OAAOA,EAAiB7N,EAE5B,EAEAyQ,EAAiBnV,UAAUguG,gBAAkB,WAS3C,IARA,IAAIt7F,EAAWhT,KAAKkuG,cAChBK,GAAyB,QAAyBvuG,KAAKmS,QACvDq8F,GAAkBC,EAA2Bz7F,GAG7C07F,EAAU,GACVpkG,EAAO,GAEFqkG,EAAa,EAAGC,EAAe,EAAGD,EAAa37F,EAAU27F,IAAc,CAC9E,IAAI1jG,OAAW,EACX9M,OAAO,EACP6N,OAAc,EACd6iG,EAAe7uG,KAAKgE,WAAW4qG,GAEnC,GAAIC,GAAgBA,EAAarpG,gBAAkBmpG,EACjD1jG,EAAWsjG,EAAyBM,EAAalqG,KAAO,KACxDxG,EAAO0wG,EAAa1wG,KACpB6N,EAAc6iG,EAAa7iG,YAC3B4iG,QACK,CACL,IAAIjlG,EAAe3J,KAAK4J,mBAAmB+kG,GAEvChlG,IACFsB,EAAWsjG,EAAyB5kG,EAAahF,KAAO,KACxDxG,EAAOwL,EAAaxL,KAExB,CAEAmM,EAAKvH,KAAK,CACRkI,SAAUA,EACV9M,KAAMA,EACN6N,YAAaA,KAQXuiG,GAAsC,MAAZtjG,GAEzB4jG,GAAiBA,EAAaC,qBACjCJ,GAAWF,EACTvjG,EAAS24B,QAAQ,MAAO,MAAMA,QAAQ,MAAO,MAC7C34B,GAGJyjG,GAAW,IACXA,GAAWX,EAAa5vG,IAAS,IAE7B6N,IACF0iG,GAAW1iG,EAAYmgD,KAGzBuiD,GAAW,GACb,CAKA,IAAIv8F,EAASnS,KAAKmS,OACd48F,EAAO,CAAC58F,EAAOm6F,eAAgBn6F,EAAOo6F,WAAYmC,GAAShvF,KAAK,MACpE,MAAO,CACL1b,WAAYsG,EACZykG,KAAMA,EAEV,EAEAt5F,EAAiBnV,UAAUkD,yBAA2B,WAGpD,IAFA,IAAIwL,EAAS,GAEJ2/F,EAAa,EAAGC,EAAe,EAAGD,EAAa3uG,KAAKkuG,cAAeS,IAAc,CACxF,IAAIjgC,OAAS,EACTmgC,EAAe7uG,KAAKgE,WAAW4qG,GAEnC,GAAIC,GAAgBA,EAAarpG,gBAAkBmpG,EAC5CE,EAAaC,qBAChBpgC,EAASmgC,EAAalqG,MAGxBiqG,QACK,CACL,IAAIjlG,EAAe3J,KAAK4J,mBAAmB+kG,GAEvChlG,IACF+kE,EAAS/kE,EAAahF,KAE1B,CAEAqK,EAAOjM,KAAK2rE,EACd,CAEA,OAAO1/D,CACT,EAEAyG,EAAiBnV,UAAU0uG,2BAA6B,SAAUC,GAChEjvG,KAAKgE,WAAWjB,KAAKksG,GACrBA,EAAOH,oBAAqB,EAC5B9uG,KAAKkuG,gBAILluG,KAAKmuG,mBAAkB,EACzB,EAEO14F,CACT,CA/JA,GAkKO,SAASy5F,EAAmBxrG,GACjC,OAAOA,aAAkB+R,CAC3B,CACO,SAAS05F,EAAiBv8F,GAG/B,IAFA,IAAIU,GAAiB,UAEZhY,EAAI,EAAGA,GAAKsX,GAAW,IAAIpX,OAAQF,IAAK,CAC/C,IAAIuY,EAAgBjB,EAAQtX,GACxB0Y,GAAc,QAASH,GAAiBA,EAAclP,KAAOkP,EAE9C,MAAfG,GAA0D,MAAnCV,EAAetV,IAAIgW,IAC5CV,EAAe9O,IAAIwP,EAAa1Y,EAEpC,CAEA,OAAOgY,CACT,CACO,SAAS+6F,EAAuBl8F,GACrC,IAAIi9F,EAAclgF,EAAM/c,GACxB,OAAOi9F,EAAYC,aAAeD,EAAYC,WAAaF,EAAiBh9F,EAAOU,kBACrF,CACO,SAAS47F,EAA2Bz7F,GACzC,OAAOA,EAAW,EACpB,C,2JClNIvH,EAAI6jG,EAAIC,EASRC,EACAC,E,wCAMAC,EAEJ,WACE,SAASA,EAAoBC,EAAa9G,GAExC,IAAI12F,GAAU,QAAiBw9F,GAA+DA,GAAhD,QAAiCA,GAE/E3vG,KAAK4vG,QAAUz9F,EACf,IAAItU,EAAOmC,KAAK0jB,MAAQvR,EAAOtU,KAE3BsU,EAAO/F,eAAiB,OAO1BpM,KAAK6vG,QAAU,EACf7vG,KAAK8vG,SAAWjH,EAChB7oG,KAAK0jB,MAAQ7lB,GAGf4xG,EAAazvG,KAAMnC,EAAMsU,EAC3B,CAkJA,OAhJAu9F,EAAoBpvG,UAAU6L,UAAY,WACxC,OAAOnM,KAAK4vG,OACd,EAEAF,EAAoBpvG,UAAUzD,MAAQ,WACpC,OAAO,CACT,EAEA6yG,EAAoBpvG,UAAUqM,QAAU,SAAUvC,EAAK4V,GAEvD,EAEA0vF,EAAoBpvG,UAAU8K,WAAa,SAAU2kG,GAAU,EAE/DL,EAAoBpvG,UAAU6nG,MAAQ,WAAa,EAEnDuH,EAAoBM,gBAAkB,WAGpC,IAAI/vC,EAAQyvC,EAAoBpvG,UAChC2/D,EAAMzzD,MAAO,EACbyzD,EAAM0nC,YAAa,CACrB,CANsC,GAQtC+H,EAAoB19F,cAAgB,WAClC,IAAIvG,EAEJgkG,EAAe,SAAUzkG,EAAUnN,EAAMsU,GACvC,IAAI/F,EAAe+F,EAAO/F,aACtBkgG,EAAiBn6F,EAAOm6F,eACxBC,EAAap6F,EAAOo6F,WACpB35F,EAAUT,EAAOU,iBACjBo9F,EAAUT,EAAgBU,EAAgB9jG,EAAckgG,IAQ5D,IAFA,QAAOthG,EAAUilG,GAEb7jG,IAAiB,KACnBpB,EAAS2B,QAAUwjG,EACnBnlG,EAASnO,MAAQuzG,EACjBplG,EAASqB,YAAcgkG,MAClB,CACL,IAAIC,EAAgBC,EAAuBnkG,EAAckgG,GACzDthG,EAAS2B,SAAU,QAAK2jG,EAAe,KAAMzyG,EAAM0uG,EAAY35F,GAC/D,IAAI49F,EAAaC,EAAwBrkG,EAAckgG,GACvDthG,EAASnO,OAAQ,QAAK2zG,EAAY,KAAM3yG,EAAM0uG,EAAY35F,EAC5D,CACF,EAEA,IAAIu9F,EAAuB,SAAU/lG,EAAK4V,GACxC5V,GAAYpK,KAAK6vG,QACjB7vF,EAAMA,GAAO,GAKb,IAJA,IAAIniB,EAAOmC,KAAK0jB,MACZmlF,EAAU7oG,KAAK8vG,SACf71F,EAAS4uF,EAAUz+F,EAEd9O,EAAI,EAAGA,EAAIutG,EAASvtG,IAC3B0kB,EAAI1kB,GAAKuC,EAAKoc,EAAS3e,GAGzB,OAAO0kB,CACT,EAEIqwF,EAA2B,SAAU3kG,EAAOC,EAAKymF,EAAS5zF,GAI5D,IAHA,IAAIX,EAAOmC,KAAK0jB,MACZmlF,EAAU7oG,KAAK8vG,SAEV5wG,EAAM,EAAGA,EAAM2pG,EAAS3pG,IAAO,CAOtC,IANA,IAAI+rG,EAAYzsG,EAAOU,GACnB/B,EAAsB,MAAhB8tG,EAAU,GAAahuG,IAAWguG,EAAU,GAClDjuG,EAAsB,MAAhBiuG,EAAU,IAAchuG,IAAWguG,EAAU,GACnDpuG,EAAQ8O,EAAMD,EACdlJ,EAAM4vF,EAAQlzF,GAET5D,EAAI,EAAGA,EAAIuB,EAAOvB,IAAK,CAE9B,IAAI8U,EAAMvS,EAAKvC,EAAIutG,EAAU3pG,GAC7BsD,EAAIkJ,EAAQpQ,GAAK8U,EACjBA,EAAMjT,IAAQA,EAAMiT,GACpBA,EAAMpT,IAAQA,EAAMoT,EACtB,CAEA66F,EAAU,GAAK9tG,EACf8tG,EAAU,GAAKjuG,CACjB,CACF,EAEIozG,EAAqB,WACvB,OAAOpwG,KAAK0jB,MAAQ1jB,KAAK0jB,MAAMloB,OAASwE,KAAK8vG,SAAW,CAC1D,EA6CA,SAASY,EAAiBX,GACxB,IAAK,IAAIz0G,EAAI,EAAGA,EAAIy0G,EAAQv0G,OAAQF,IAClC0E,KAAK0jB,MAAM3gB,KAAKgtG,EAAQz0G,GAE5B,CA/CmBmQ,EAAK,CAAC,EAAGA,EAAG,KAA2B,IAAM,MAA2B,CACzFe,MAAM,EACNpB,WAAYslG,GACXjlG,EAAG,KAA2B,IAAM,MAAwB,CAC7De,MAAM,EACNpB,WAAY,WACV,MAAM,IAAIulG,MAAM,4DAClB,GACCllG,EAAG,MAA6B,CACjCe,MAAM,EACNpB,WAAYslG,GACXjlG,EAAG,MAA+B,CACnCe,MAAM,EACNpB,WAAY,SAAU2kG,GACpB,IAAIlyG,EAAOmC,KAAK0jB,OAChB,QAAKqsF,GAAS,SAAUa,EAAQ/tG,GAG9B,IAFA,IAAIguG,EAAShzG,EAAKgF,KAAShF,EAAKgF,GAAO,IAE9BvH,EAAI,EAAGA,GAAKs1G,GAAU,IAAIp1G,OAAQF,IACzCu1G,EAAO9tG,KAAK6tG,EAAOt1G,GAEvB,GACF,GACCmQ,EAAG,MAA0B,CAC9BL,WAAYslG,GACXjlG,EAAG,MAA6B,CACjCk8F,YAAY,EACZn7F,MAAM,EACNpB,WAAY,SAAU2kG,GAKpB/vG,KAAK0jB,MAAQqsF,CACf,EAEA5H,MAAO,WAELnoG,KAAK6vG,SAAW7vG,KAAKnD,QACrBmD,KAAK0jB,MAAQ,IACf,GAxCF8rF,EAyCG/jG,CAOL,CAtHoC,GAwH7BikG,CACT,CAxKA,GA4KIoB,EAAgB,SAAUl/D,EAAS26D,EAAY35F,EAASxI,GAC1D,OAAOwnC,EAAQxnC,EACjB,EAEI2mG,GAA0BtlG,EAAK,CAAC,EAAGA,EAAG,KAA2B,IAAM,MAA2B,SAAUmmC,EAAS26D,EAAY35F,EAASxI,GAC5I,OAAOwnC,EAAQxnC,EAAMmiG,EACvB,EAAG9gG,EAAG,KAA2B,IAAM,MAAwB,SAAUmmC,EAAS26D,EAAY35F,EAASxI,EAAK4V,GAC1G5V,GAAOmiG,EAIP,IAHA,IAAI/sG,EAAOwgB,GAAO,GACdniB,EAAO+zC,EAEFt2C,EAAI,EAAGA,EAAIuC,EAAKrC,OAAQF,IAAK,CACpC,IAAI01G,EAAMnzG,EAAKvC,GACfkE,EAAKlE,GAAK01G,EAAMA,EAAI5mG,GAAO,IAC7B,CAEA,OAAO5K,CACT,EAAGiM,EAAG,MAA6BqlG,EAAerlG,EAAG,MAA+B,SAAUmmC,EAAS26D,EAAY35F,EAASxI,EAAK4V,GAG/H,IAFA,IAAIxgB,EAAOwgB,GAAO,GAET1kB,EAAI,EAAGA,EAAIsX,EAAQpX,OAAQF,IAAK,CACvC,IAAI2I,EAAU2O,EAAQtX,GAAGqJ,KAErB,EAMJ,IAAIssG,EAAMr/D,EAAQ3tC,GAClBzE,EAAKlE,GAAK21G,EAAMA,EAAI7mG,GAAO,IAC7B,CAEA,OAAO5K,CACT,EAAGiM,EAAG,MAA0BqlG,EAAerlG,GACxC,SAAS8kG,EAAuBnkG,EAAckgG,GACnD,IAAI3e,EAASojB,EAAuBb,EAAgB9jG,EAAckgG,IAMlE,OAAO3e,CACT,CAEA,IAAIujB,EAAc,SAAUt/D,EAAS26D,EAAY35F,GAC/C,OAAOg/B,EAAQp2C,MACjB,EAEI21G,GAA2B7B,EAAK,CAAC,EAAGA,EAAG,KAA2B,IAAM,MAA2B,SAAU19D,EAAS26D,EAAY35F,GACpI,OAAOtV,KAAKN,IAAI,EAAG40C,EAAQp2C,OAAS+wG,EACtC,EAAG+C,EAAG,KAA2B,IAAM,MAAwB,SAAU19D,EAAS26D,EAAY35F,GAC5F,IAAIo+F,EAAMp/D,EAAQ,GAClB,OAAOo/D,EAAM1zG,KAAKN,IAAI,EAAGg0G,EAAIx1G,OAAS+wG,GAAc,CACtD,EAAG+C,EAAG,MAA6B4B,EAAa5B,EAAG,MAA+B,SAAU19D,EAAS26D,EAAY35F,GAC/G,IAAI3O,EAAU2O,EAAQ,GAAGjO,KAQzB,IAAIssG,EAAMr/D,EAAQ3tC,GAClB,OAAOgtG,EAAMA,EAAIz1G,OAAS,CAC5B,EAAG8zG,EAAG,MAA0B4B,EAAa5B,GACtC,SAASmB,EAAwBrkG,EAAckgG,GACpD,IAAI3e,EAASwjB,EAAwBjB,EAAgB9jG,EAAckgG,IAMnE,OAAO3e,CACT,CAEA,IAAIyjB,EAAoB,SAAU1kG,EAAU1H,EAAUiG,GACpD,OAAOyB,EAAS1H,EAClB,EAEIqsG,GAA2B9B,EAAK,CAAC,EAAGA,EAAG,MAA4B6B,EAAmB7B,EAAG,MAA6B,SAAU7iG,EAAU1H,EAAUiG,GACtJ,OAAOyB,EAASzB,EAClB,EAAGskG,EAAG,MAA+B6B,EAAmB7B,EAAG,MAA0B,SAAU7iG,EAAU1H,EAAUiG,GAGjH,IAAIiC,GAAQ,QAAiBR,GAC7B,OAASQ,aAAiB3L,MAAiB2L,EAAMlI,GAAdkI,CACrC,EAAGqiG,EAAG,MAA6B6B,EAAmB7B,GAC/C,SAAS+B,EAAwBllG,GACtC,IAAIuhF,EAAS0jB,EAAwBjlG,GAMrC,OAAOuhF,CACT,CAEA,SAASuiB,EAAgB9jG,EAAckgG,GACrC,OAAOlgG,IAAiB,KAA2BA,EAAe,IAAMkgG,EAAiBlgG,CAC3F,CASO,SAASmlG,EAAiB1zG,EAAMhF,EAEvCqG,GACE,GAAKrB,EAAL,CAKA,IAAI6O,EAAW7O,EAAK6R,eAAe7W,GAEnC,GAAgB,MAAZ6T,EAAJ,CAIA,IAAI7B,EAAQhN,EAAK2M,WACb4B,EAAevB,EAAMsB,YAAYC,aAErC,GAAW,MAAPlN,EAAa,CACf,IAAI8F,EAAWnH,EAAK6G,kBAAkBxF,GAClC+L,EAAWJ,EAAM68F,qBAAqB1iG,GAC1C,OAAOssG,EAAwBllG,EAAxBklG,CAAsC5kG,EAAU1H,EAAUiG,EACnE,CACE,IAAI+D,EAAStC,EAMb,OAJIN,IAAiB,OACnB4C,GAAS,QAAiBtC,IAGrBsC,CAhBT,CAPA,CAyBF,C,+HClTO,SAASwiG,EAAgB7zG,EAAayJ,EAAiBT,GAC5DA,EAAMA,GAAO,CAAC,EACd,IAEI8qG,EACA/tG,EACAmH,EAJA6mG,EAAU/qG,EAAI+qG,QACdC,EAAwBhrG,EAAIgrG,sBAK5BC,EAAwBxqG,GAC1BqqG,EAAsBrqG,GAEtB1D,EAAS0D,EAAgB1D,OACzB+tG,EAAsB/tG,EAAOM,WAC7B6G,EAAQzD,EAAgByD,OAI1B,IACIgnG,EACAC,EACA35B,EACAC,EAJA25B,KAAcp0G,IAAeA,EAAYK,IAAI,UAkCjD,IA7BA,QAAKyzG,GAAqB,SAAU7oG,EAAeiP,IAC7C,QAASjP,KACX6oG,EAAoB55F,GAASjP,EAAgB,CAC3CjE,KAAMiE,IAINmpG,IAAanpG,EAAcrE,eAExBmtG,GAAYG,IAAoBjpG,EAAcoD,cACjD6lG,EAAmBjpG,GAIhBkpG,GAAyC,YAAvBlpG,EAAczK,MAA6C,SAAvByK,EAAczK,MAAqBwzG,GAAyBA,IAA0B/oG,EAAcxE,WAC7J0tG,EAAiBlpG,GAGvB,KAEIkpG,GAAmBJ,GAAYG,IAGjCH,GAAU,GAMRI,EAAgB,CAIlB35B,EAAuB,qBAAuBx6E,EAAYiP,GAC1DwrE,EAAuB,qBAAuBz6E,EAAYiP,GAEtDilG,IACFA,EAAiB/oG,uBAAwB,GAG3C,IAAIkpG,EAAuBF,EAAe1tG,SACtC6tG,EAAiBH,EAAe3zG,KAChC+zG,EAAyB,GAC7B,QAAKT,GAAqB,SAAU7oG,GAC9BA,EAAcxE,WAAa4tG,GAC7BE,GAEJ,IACA,IAAIC,EAA6B,CAC/BxtG,KAAMwzE,EACN/zE,SAAU4tG,EACV3tG,cAAe6tG,EACf/zG,KAAM8zG,EACN1tG,cAAc,EACduqG,oBAAoB,EACpBtpG,cAAeisG,EAAoBj2G,QAEjC42G,EAA6B,CAC/BztG,KAAMyzE,EAGNh0E,SAAUg0E,EACV/zE,cAAe6tG,EAAyB,EACxC/zG,KAAM8zG,EACN1tG,cAAc,EACduqG,oBAAoB,EACpBtpG,cAAeisG,EAAoBj2G,OAAS,GAG1CkI,GACEmH,IACFsnG,EAA2B3sG,cAAgBqF,EAAMq8F,2BAA2B9uB,EAAsB65B,GAClGG,EAA2B5sG,cAAgBqF,EAAMq8F,2BAA2B/uB,EAAsB85B,IAGpGvuG,EAAOsrG,2BAA2BmD,GAClCzuG,EAAOsrG,2BAA2BoD,KAElCX,EAAoB1uG,KAAKovG,GACzBV,EAAoB1uG,KAAKqvG,GAE7B,CAEA,MAAO,CACL/5B,iBAAkBy5B,GAAkBA,EAAentG,KACnD2zE,mBAAoBu5B,GAAoBA,EAAiBltG,KACzD4zE,iBAAkBm5B,EAClBt5B,qBAAsBA,EACtBD,qBAAsBA,EAE1B,CAEA,SAASy5B,EAAwBxqG,GAC/B,QAAQ,QAAmBA,EAAgB1D,OAC7C,CAEO,SAAS2uG,EAAmBx0G,EAAMy0G,GAGvC,QAASA,GAAcA,IAAez0G,EAAKmP,mBAAmB,mBAChE,CACO,SAASulG,EAAoB10G,EAAM20G,GACxC,OAAOH,EAAmBx0G,EAAM20G,GAAa30G,EAAKmP,mBAAmB,wBAA0BwlG,CACjG,C,iHCxIO,SAASC,EAAevlG,EAC/BvG,GAEE,IAAIT,EAAUS,GAAOA,EAAIxI,KAEzB,MAAgB,YAAZ+H,EAEKgH,GAGO,SAAZhH,IACA,QAASgH,IAAmB,MAATA,GAA2B,MAAVA,IACtCA,IAAS,QAAUA,IAQL,MAATA,GAA2B,KAAVA,EAAenQ,KAEpCmQ,EACL,EAEqB,QAAc,CACjC,OAAU,SAAUkD,GAIlB,OAAOsiG,WAAWtiG,EACpB,EACA,KAAQ,SAAUA,GAEhB,QAAQ,QAAUA,EACpB,EACA,KAAQ,SAAUA,GAChB,OAAO,QAASA,IAAO,QAAKA,GAAOA,CACrC,IAKF,IAAIuiG,EAA0B,CAC5BC,GAAI,SAAUC,EAAMC,GAClB,OAAOD,EAAOC,CAChB,EACAC,IAAK,SAAUF,EAAMC,GACnB,OAAOD,GAAQC,CACjB,EACAE,GAAI,SAAUH,EAAMC,GAClB,OAAOD,EAAOC,CAChB,EACAG,IAAK,SAAUJ,EAAMC,GACnB,OAAOD,GAAQC,CACjB,GA8BEI,GAzBJ,WACE,SAASC,EAAsBC,EAAIN,GACjC,KAAK,QAASA,GAAO,CACnB,IAAIr0B,EAAS,GAET,GAIJ,QAAWA,EACb,CAEAz+E,KAAKqzG,MAAQV,EAAwBS,GACrCpzG,KAAKszG,YAAa,QAAgBR,EACpC,CAGAK,EAAsB7yG,UAAUk1D,SAAW,SAAUq9C,GAEnD,OAAO,QAASA,GAAQ7yG,KAAKqzG,MAAMR,EAAM7yG,KAAKszG,YAActzG,KAAKqzG,OAAM,QAAgBR,GAAO7yG,KAAKszG,WACrG,CAGF,CAvBA,GA2BA,WAOE,SAASJ,EAAoBK,EAAOC,GAClC,IAAIC,EAAmB,SAAVF,EACbvzG,KAAK0zG,UAAYD,EAAS,GAAK,EAEX,MAAhBD,IACFA,EAAeC,EAAS,MAAQ,OAGlCzzG,KAAK2zG,cAAiC,QAAjBH,GAA0Bv2G,IAAWA,GAC5D,CAmCA,OA/BAi2G,EAAoB5yG,UAAUk1D,SAAW,SAAUq9C,EAAMC,GAEvD,IAAIc,GAAY,QAASf,GAAQA,GAAO,QAAgBA,GACpDgB,GAAY,QAASf,GAAQA,GAAO,QAAgBA,GACpDgB,EAAiBh3G,MAAM82G,GACvBG,EAAiBj3G,MAAM+2G,GAU3B,GARIC,IACFF,EAAY5zG,KAAK2zG,eAGfI,IACFF,EAAY7zG,KAAK2zG,eAGfG,GAAkBC,EAAgB,CACpC,IAAIC,GAAY,QAASnB,GACrBoB,GAAY,QAASnB,GAErBkB,IACFJ,EAAYK,EAAYpB,EAAO,GAG7BoB,IACFJ,EAAYG,EAAYlB,EAAO,EAEnC,CAEA,OAAOc,EAAYC,EAAY7zG,KAAK0zG,UAAYE,EAAYC,GAAa7zG,KAAK0zG,UAAY,CAC5F,EAEOR,CACT,CApDA,KA0DA,WACE,SAASgB,EAAyBC,EAAMrB,GACtC9yG,KAAKo0G,MAAQtB,EACb9yG,KAAKq0G,MAAQF,EACbn0G,KAAKs0G,mBAAqBxB,EAC1B9yG,KAAKszG,YAAa,QAAgBR,EACpC,CAGAoB,EAAyB5zG,UAAUk1D,SAAW,SAAUq9C,GACtD,IAAI0B,EAAW1B,IAAS7yG,KAAKo0G,MAE7B,IAAKG,EAAU,CACb,IAAIC,SAAoB3B,EAEpB2B,IAAex0G,KAAKs0G,aAA+B,WAAfE,GAAgD,WAArBx0G,KAAKs0G,cACtEC,GAAW,QAAgB1B,KAAU7yG,KAAKszG,WAE9C,CAEA,OAAOtzG,KAAKq0G,MAAQE,GAAYA,CAClC,CAGF,EAxBA,E,kNCzJWE,EAAa,CACtBC,KAAM,EACNC,MAAO,EACPC,IAAK,GAGHC,GAAmB,UAKhB,SAASC,EAAqB77G,GAEnC47G,EAAiB57G,GAAS87G,YAAa,SACzC,CAiBO,SAASC,EAAgCriG,EAAiBhV,EAAawU,GAC5E,IAAIlP,EAAS,CAAC,EACVgyG,EAAeC,EAAgCv3G,GAEnD,IAAKs3G,IAAiBtiG,EACpB,OAAO1P,EAGT,IAKIkyG,EACAC,EANAC,EAAiB,GACjBC,EAAmB,GACnBr8G,EAAU0E,EAAY1E,QACtB87G,EAAaF,EAAiB57G,GAAS87G,WACvClyG,EAAMoyG,EAAa9oD,IAAM,IAAMh6C,EAAOm6F,eAG1C35F,EAAkBA,EAAgBhN,SAClC,QAAKgN,GAAiB,SAAU4iG,EAAmBC,GACjD,IAAIC,GAAe,QAASF,GAAqBA,EAAoB5iG,EAAgB6iG,GAAe,CAClG7wG,KAAM4wG,GAGkB,YAAtBE,EAAat3G,MAA8C,MAAxBg3G,IACrCA,EAAuBK,EACvBJ,EAA2BM,EAA0BD,IAGvDxyG,EAAOwyG,EAAa9wG,MAAQ,EAC9B,IACA,IAAIgxG,EAAgBZ,EAAW/2G,IAAI6E,IAAQkyG,EAAWvwG,IAAI3B,EAAK,CAC7D+yG,eAAgBR,EAChBS,YAAa,IA+Bf,SAASC,EAAQC,EAAWC,EAASC,GACnC,IAAK,IAAI36G,EAAI,EAAGA,EAAI26G,EAAU36G,IAC5By6G,EAAUhzG,KAAKizG,EAAU16G,EAE7B,CAEA,SAASo6G,EAA0BD,GACjC,IAAI7iG,EAAU6iG,EAAa7iG,QAC3B,OAAOA,EAAUA,EAAQpX,OAAS,CACpC,CAIA,OAxCA,QAAKmX,GAAiB,SAAU8iG,EAAcD,GAC5C,IAAIU,EAAeT,EAAa9wG,KAC5B9H,EAAQ64G,EAA0BD,GAEtC,GAA4B,MAAxBN,EAA8B,CAChC,IAAIzpG,EAAQiqG,EAAcE,YAC1BC,EAAQ7yG,EAAOizG,GAAexqG,EAAO7O,GACrCi5G,EAAQR,EAAkB5pG,EAAO7O,GACjC84G,EAAcE,aAAeh5G,CAM/B,MACK,GAAIs4G,IAAyBK,EAC9BM,EAAQ7yG,EAAOizG,GAAe,EAAGr5G,GACjCi5G,EAAQT,EAAgB,EAAGx4G,OAExB,CACG6O,EAAQiqG,EAAcC,eAC1BE,EAAQ7yG,EAAOizG,GAAexqG,EAAO7O,GACrCi5G,EAAQR,EAAkB5pG,EAAO7O,GACjC84G,EAAcC,gBAAkB/4G,CAClC,CACN,IAaAw4G,EAAe75G,SAAWyH,EAAO8F,SAAWssG,GAC5CC,EAAiB95G,SAAWyH,EAAOsS,WAAa+/F,GACzCryG,CACT,CA2FO,SAASiyG,EAAgCv3G,GAM9C,IAAIw4G,EAAWx4G,EAAYK,IAAI,QAAQ,GAEvC,IAAKm4G,EACH,OAAO,QAAyBx4G,EAAY1E,QAAS,UAAW,CAC9D4e,MAAOla,EAAYK,IAAI,gBAAgB,GACvC4O,GAAIjP,EAAYK,IAAI,aAAa,IAChC,MAAkB4Y,OAAO,EAEhC,CAKO,SAASw/F,EAAkCnB,GAGhD,OAAKA,EAAaj3G,IAAI,aAAa,IAAUi3G,EAAaj3G,IAAI,uBAAuB,IAI9E,QAAyBi3G,EAAah8G,QAAS,UAAW,CAC/D4e,MAAOo9F,EAAaj3G,IAAI,oBAAoB,GAC5C4O,GAAIqoG,EAAaj3G,IAAI,iBAAiB,IACrC,MAAkB4Y,OANZ,EAOX,CAOO,SAASy/F,EAAalkG,EAAQnN,GACnC,OAAOsxG,EAAenkG,EAAOtU,KAAMsU,EAAO/F,aAAc+F,EAAOm6F,eAAgBn6F,EAAOU,iBAAkBV,EAAOo6F,WAAYvnG,EAC7H,CAGA,SAASsxG,EAAez4G,EAAMuO,EAAckgG,EAAgBz5F,EAAkB05F,EAAYvnG,GACxF,IAAIgK,EAUA/K,EACAiC,EATA2nG,EAAU,EAEd,IAAI,QAAahwG,GACf,OAAO42G,EAAWG,IAQpB,GAAI/hG,EAAkB,CACpB,IAAIiB,EAAajB,EAAiB7N,IAE9B,QAAS8O,IACX7P,EAAU6P,EAAWnP,KACrBuB,EAAU4N,EAAW3V,OACZ,QAAS2V,KAClB7P,EAAU6P,EAEd,CAEA,GAAe,MAAX5N,EACF,MAAmB,YAAZA,EAAwBuuG,EAAWC,KAAOD,EAAWG,IAG9D,GAAIxoG,IAAiB,KAA0B,CAC7C,IAAIghG,EAAgBvvG,EAEpB,GAAIyuG,IAAmB,MAGrB,IAFA,IAAIiK,EAASnJ,EAAcpoG,GAElB1J,EAAI,EAAGA,GAAKi7G,GAAU,IAAI/6G,QAAUF,EAAIuyG,EAASvyG,IACxD,GAAsD,OAAjD0T,EAASwnG,EAAYD,EAAOhK,EAAajxG,KAC5C,OAAO0T,OAIX,IAAS1T,EAAI,EAAGA,EAAI8xG,EAAc5xG,QAAUF,EAAIuyG,EAASvyG,IAAK,CAC5D,IAAI01G,EAAM5D,EAAcb,EAAajxG,GAErC,GAAI01G,GAAgD,OAAxChiG,EAASwnG,EAAYxF,EAAIhsG,KACnC,OAAOgK,CAEX,CAEJ,MAAO,GAAI5C,IAAiB,KAA2B,CACrD,IAAIqqG,EAAiB54G,EAErB,IAAKoG,EACH,OAAOwwG,EAAWG,IAGpB,IAASt5G,EAAI,EAAGA,EAAIm7G,EAAej7G,QAAUF,EAAIuyG,EAASvyG,IAAK,CAC7D,IAAIkE,EAAOi3G,EAAen7G,GAE1B,GAAIkE,GAAiD,OAAxCwP,EAASwnG,EAAYh3G,EAAKyE,KACrC,OAAO+K,CAEX,CACF,MAAO,GAAI5C,IAAiB,KAA6B,CACvD,IAAIsqG,EAAmB74G,EAEvB,IAAKoG,EACH,OAAOwwG,EAAWG,IAGhB2B,EAASG,EAAiBzyG,GAE9B,IAAKsyG,IAAU,QAAaA,GAC1B,OAAO9B,EAAWG,IAGpB,IAASt5G,EAAI,EAAGA,EAAIi7G,EAAO/6G,QAAUF,EAAIuyG,EAASvyG,IAChD,GAAyC,OAApC0T,EAASwnG,EAAYD,EAAOj7G,KAC/B,OAAO0T,CAGb,MAAO,GAAI5C,IAAiB,KAC1B,KAAIuqG,EAAe94G,EAEnB,IAASvC,EAAI,EAAGA,EAAIq7G,EAAan7G,QAAUF,EAAIuyG,EAASvyG,IAAK,CACvDkE,EAAOm3G,EAAar7G,GAAxB,IACI8U,GAAM,QAAiB5Q,GAE3B,KAAK,QAAQ4Q,GACX,OAAOqkG,EAAWG,IAGpB,GAA6C,OAAxC5lG,EAASwnG,EAAYpmG,EAAIpL,KAC5B,OAAOgK,CAEX,CAbuB,CAgBzB,SAASwnG,EAAYpmG,GACnB,IAAIwmG,GAAQ,QAASxmG,GAGrB,OAAW,MAAPA,GAAelT,SAASkT,IAAgB,KAARA,EAC3BwmG,EAAQnC,EAAWE,MAAQF,EAAWG,IACpCgC,GAAiB,MAARxmG,EACXqkG,EAAWC,UADb,CAGT,CAEA,OAAOD,EAAWG,GACpB,C,wJCrVIiC,EAEJ,WACE,SAASA,IAAkB,CA4D3B,OA1DAA,EAAev2G,UAAUi7E,WAAa,WAEpC,MAAM,IAAIo1B,MAAM,gBAClB,EAEAkG,EAAev2G,UAAUoP,eAAiB,SAAU7W,GAElD,MAAM,IAAI83G,MAAM,gBAClB,EAEAkG,EAAev2G,UAAUw2G,aAAe,WAExC,EAMAD,EAAev2G,UAAU6D,iBAAmB,SAAUjF,GAEtD,EAYA23G,EAAev2G,UAAUy2G,sBAAwB,WAEjD,EAEAF,EAAev2G,UAAUzD,MAAQ,WAEjC,EAQAg6G,EAAev2G,UAAU02G,cAAgB,SAAUn+G,EAAWmM,GAE9D,EAEA6xG,EAAev2G,UAAU22G,sBAAwB,SAAUvqG,EAAU1H,GAErE,EAEA6xG,EAAev2G,UAAU42G,aAAe,SAAU13F,EAAQ3V,GACxD,OAAO,QAAe2V,EAAQ3V,EAChC,EAEOgtG,CACT,CA9DA,GAkEA,SAASM,EAAqBC,EAAgBC,GAC5C,IAAIC,EAAY,IAAIT,EAChBh5G,EAAOu5G,EAAev5G,KACtBuO,EAAekrG,EAAUlrG,aAAegrG,EAAehrG,aACvDmrG,EAAoBH,EAAe7K,WACnC9tB,EAAS,GAET24B,EAAe9K,iBAAmB,OAQpC,QAAW7tB,GASb,IAAIz6E,EAAa,GACbwzG,EAAa,CAAC,EACd5kG,EAAUwkG,EAAevkG,iBAE7B,GAAID,GACF,QAAKA,GAAS,SAAUq8F,EAAQ7kG,GAC9B,IAAIzF,EAAOsqG,EAAOtqG,KACd8yG,EAAY,CACd5/F,MAAOzN,EACPzF,KAAMA,EACNsP,YAAag7F,EAAOh7F,aAKtB,GAHAjQ,EAAWjB,KAAK00G,GAGJ,MAAR9yG,EAAc,CAIhB,IAAI+yG,EAAW,IAEX,QAAOF,EAAY7yG,KAKrB,QAAW+yG,GAGbF,EAAW7yG,GAAQ8yG,CACrB,CACF,SAIE,IAAK,IAAIn8G,EAAI,EAAGA,EAAI87G,EAAerhG,wBAA8Bza,IAG/D0I,EAAWjB,KAAK,CACd8U,MAAOvc,IAMf,IAAIg1G,GAAgB,QAAuBlkG,EAAc,MAErDirG,EAAkBM,cACpBL,EAAU5nG,eAAiB,SAAU7W,GACnC,OAAOy3G,EAAczyG,EAAM05G,EAAmBvzG,EAAYnL,EAC5D,EAEAy+G,EAAU/7B,YAAa,QAAKA,EAAY,KAAM67B,IAGhDE,EAAUR,cAAe,QAAKA,EAAc,KAAMM,GAClD,IAAI5G,GAAa,OAAwBpkG,EAAc,MACvDkrG,EAAUz6G,OAAQ,QAAK2zG,EAAY,KAAM3yG,EAAM05G,EAAmBvzG,GAClE,IAAI4zG,GAAiB,QAAwBxrG,GAE7CkrG,EAAUN,cAAgB,SAAUn+G,EAAWmM,GAC7C,IAAIy/B,EAAU6rE,EAAczyG,EAAM05G,EAAmBvzG,EAAYnL,GACjE,OAAOo+G,EAAsBxyE,EAASz/B,EACxC,EAEA,IAAIiyG,EAAwBK,EAAUL,sBAAwB,SAAUvqG,EAAU1H,GAChF,GAAgB,MAAZ0H,EAAJ,CAIA,IAAIuiG,EAASjrG,EAAWgB,GAExB,OAAIiqG,EACK2I,EAAelrG,EAAU1H,EAAUiqG,EAAOtqG,WADnD,CAJA,CAOF,EAIA,OAFA2yG,EAAUnzG,kBAAmB,QAAKA,EAAkB,KAAMH,EAAYwzG,GACtEF,EAAUP,uBAAwB,QAAKA,EAAuB,KAAM/yG,GAC7DszG,CACT,CAEA,SAAS/7B,EAAWs8B,GAClB,IAAIzrG,EAAeyrG,EAASzrG,aAE5B,IAAK0rG,EAAwB1rG,GAAe,CAC1C,IAAIqyE,EAAS,GAET,GAIJ,QAAWA,EACb,CAEA,OAAOo5B,EAASh6G,IAClB,CAEA,SAASi5G,EAAae,GACpB,IAAIzrG,EAAeyrG,EAASzrG,aACxBvO,EAAOg6G,EAASh6G,KAEpB,IAAKi6G,EAAwB1rG,GAAe,CAC1C,IAAIqyE,EAAS,GAET,GAIJ,QAAWA,EACb,CAEA,GAAIryE,IAAiB,KAA0B,CAG7C,IAFA,IAAI4C,EAAS,GAEJ1T,EAAI,EAAG2S,EAAMpQ,EAAKrC,OAAQF,EAAI2S,EAAK3S,IAE1C0T,EAAOjM,KAAKlF,EAAKvC,GAAGqK,SAGtB,OAAOqJ,CACT,CAAO,GAAI5C,IAAiB,KAA2B,CAGrD,IAFI4C,EAAS,GAEJ1T,EAAI,EAAG2S,EAAMpQ,EAAKrC,OAAQF,EAAI2S,EAAK3S,IAE1C0T,EAAOjM,MAAK,QAAO,CAAC,EAAGlF,EAAKvC,KAG9B,OAAO0T,CACT,CACF,CAEA,SAAS7K,EAAiBH,EAAYwzG,EAAYt4G,GAChD,GAAW,MAAPA,EAKJ,OAAI,QAASA,KACTpC,MAAMoC,MAAS,QAAOs4G,EAAYt4G,GAC7B8E,EAAW9E,IACT,QAAOs4G,EAAYt4G,GACrBs4G,EAAWt4G,QADb,CAGT,CAEA,SAAS63G,EAAsB/yG,GAC7B,OAAO,QAAMA,EACf,CAEA,IAAI+zG,GAAuB,UACpB,SAASC,EAA0BX,GACxCA,GAAoB,QAAMA,GAC1B,IAAIl5G,EAAOk5G,EAAkBl5G,KACzBsgF,EAAS,GAERtgF,IAKH,QAAWsgF,GAGb,IAAIw5B,EAAa95G,EAAK43E,MAAM,KAEF,IAAtBkiC,EAAWz8G,SAKb,QAAWijF,GAKb,IAAIy5B,GAAY,EAEM,YAAlBD,EAAW,KACb95G,EAAO85G,EAAW,GAClBC,GAAY,GAGdb,EAAkBM,YAAcO,EAChCH,EAAqBvzG,IAAIrG,EAAMk5G,EACjC,CACO,SAASc,EAAmBC,EAAgBC,EAAYC,GAC7D,IAAIC,GAAmB,QAAiBH,GACpCI,EAAUD,EAAiB/8G,OAC3BijF,EAAS,GAER+5B,IAKH,QAAW/5B,GAGb,IAAK,IAAInjF,EAAI,EAAG2S,EAAMuqG,EAASl9G,EAAI2S,EAAK3S,IAAK,CAC3C,IAAIm9G,EAAcF,EAAiBj9G,GACnC+8G,EAAaK,EAAyBD,EAAaJ,EAAYC,EAA0B,IAAZE,EAAgB,KAAOl9G,GAGhGA,IAAM2S,EAAM,IACdoqG,EAAW78G,OAAS8B,KAAKN,IAAIq7G,EAAW78G,OAAQ,GAEpD,CAEA,OAAO68G,CACT,CAEA,SAASK,EAAyBD,EAAaE,EAAcL,EAC7DM,GACE,IAAIn6B,EAAS,GAERk6B,EAAan9G,SAKhB,QAAWijF,IAGR,QAASg6B,KAKZ,QAAWh6B,GAGb,IAAIo6B,EAAYJ,EAAYt6G,KACxBk5G,EAAoBU,EAAqB/5G,IAAI66G,GAE5CxB,IAKH,QAAW54B,GAIb,IAAIq6B,GAAkB,QAAIH,GAAc,SAAUI,GAChD,OAAO5B,EAAqB4B,EAAU1B,EACxC,IACItkG,GAAa,QAAiBskG,EAAkBhnF,UAAU,CAC5DwnF,SAAUiB,EAAgB,GAC1BE,aAAcF,EACdl/G,QAAQ,QAAM6+G,EAAY7+G,WAa5B,OAAO,QAAImZ,GAAY,SAAU/D,EAAQiqG,GACvC,IAAIx6B,EAAS,IAER,QAASzvE,KAKZ,QAAWyvE,GAGRzvE,EAAOnR,OAKV,QAAW4gF,GAGb,IAUIy6B,EAVA9sG,GAAe,QAAmB4C,EAAOnR,MAExCi6G,EAAwB1rG,KAK3B,QAAWqyE,GAIb,IAAI06B,EAAgBR,EAAa,GAwBjC,GAAIQ,GAAiC,IAAhBF,IAEjBjqG,EAAOhL,WAAY,CACrB,IAAIuoG,EAAa4M,EAAc5M,WAO3BA,IACFv9F,EAAOnR,KAAOs7G,EAAct7G,KAAK8H,MAAM,EAAG4mG,GAAYjnG,OAAO0J,EAAOnR,OAGtEq7G,EAAsB,CACpB5M,eAAgB,KAChBU,aAAcT,EACdvoG,WAAYm1G,EAAc3M,cAAcxoG,WAE5C,MACEk1G,EAAsB,CACpB5M,eAAgB,KAChBU,aAAc,EACdhpG,WAAYgL,EAAOhL,YAIvB,OAAO,QAAagL,EAAOnR,KAAMq7G,EAAqB,KACxD,GACF,CAEA,SAASpB,EAAwB1rG,GAC/B,OAAOA,IAAiB,MAA4BA,IAAiB,IACvE,C,2IC/bIgtG,EAAa,GACbC,EAAqB,CACvBn6E,qBAAsB,KACtB3Q,kBAAmB,KACnByuE,iBAAkB,KAClBG,mBAAoB,KACpBD,wBAAyB,KACzBxuE,eAAgB,KAChBuyB,yBAA0B,KAC1B/yB,eAAgB,KAChBsvE,eAAgB,KAChBa,kBAAmB,KACnBN,gBAAiB,KACjBE,YAAa,KACbQ,aAAc,IACdtwE,SAAU,KACVmrF,eAAgB,IAChBC,cAAe,IACfC,YAAa,IACbC,UAAW,IAEXz6E,uBAAwB,SAAUisC,GAChC,kBAA6BA,EAC/B,EACAhsC,sBAAuB,SAAUy6E,GAC/B,kBAA4BA,EAC9B,EACA1rF,oBAAqB,SAAU2rF,GAC7B,kBAA0BA,EAC5B,EACA5rF,kBAAmB,SAAU6rF,GAC3B,kBAAwBA,EAC1B,EACA/nE,yBAA0B,SAAUxpB,EAAewxF,GACjD,6BAAwCxxF,EAAewxF,EACzD,EACAC,gBAAiB,SAAUC,EAAaC,IACtC,QAAgBD,EAAaC,EAC/B,GAEK,SAASC,EAAIC,IACd,QAAQA,IAEV,QAAKA,GAAK,SAAUC,GAClBF,EAAIE,EACN,KAIE,QAAQf,EAAYc,IAAQ,IAIhCd,EAAWr2G,KAAKm3G,IAEZ,QAAWA,KACbA,EAAM,CACJrsF,QAASqsF,IAIbA,EAAIrsF,QAAQwrF,GACd,C,4NChEIe,EAAY,CAAC,EACV,SAASC,EAAa30G,EAAO40G,GAClC,IAAK,IAAIh/G,EAAI,EAAGA,EAAI,YAAuBA,IAAK,CAC9C,IAAIo7F,EAAY,KAAep7F,GAC3BinC,EAAO+3E,EAAW5jB,GAClBtqE,EAAQ1mB,EAAMmgC,YAAY6wD,GAC9BtqE,EAAMtwB,MAAQswB,EAAMtwB,OAAS,CAAC,EAC9BswB,EAAMtwB,MAAMymC,KAAOA,CACrB,CAEA,IAAIi0D,EAAY9wF,EAAM+wF,cAAc9wF,QACpCD,EAAMmyF,aAAY,GAClBnyF,EAAM+uB,SAAS,CACb8N,KAAM+3E,EAAW3nC,SAEnBjtE,EAAMkxF,UAAUJ,GAAW,EAC7B,CAEA,SAAS+jB,EAAa5zG,EAAK6zG,EAAa56F,GACtC,IAII66F,EAJAlvF,EAAe5kB,EAAI4kB,aACnBC,EAAiB7kB,EAAI6kB,eACrBkvF,EAAgB/zG,EAAI+zG,cACpBC,EAAcH,EAAY7nC,OAG1BpnD,IACFkvF,EAAWlvF,EAAa6uC,kBAAkB5uC,EAAgB,SAAU,KAAMkvF,EAAeC,GAAeA,EAAY38G,IAAI,aAAmC,MAArB4hB,EAA4B,CAChKA,kBAAmBA,GACjB,OAGU,MAAZ66F,IACFA,GAAW,QAAW9zG,EAAI8kB,aAAe9kB,EAAI8kB,YAAYD,EAAgB7kB,EAAKiZ,GAAqBjZ,EAAI8kB,aAOzG,IAJA,IAAImvF,EAAa,CACfjoC,OAAQ8nC,GAGDn/G,EAAI,EAAGA,EAAI,YAAuBA,IAAK,CAC9C,IAAIo7F,EAAY,KAAep7F,GAC3Bu/G,EAAaL,EAAY9jB,GAC7BkkB,EAAWlkB,IAAa,QAAUnrE,EAAeA,EAAa6uC,kBAAkB5uC,EAAgBkrE,EAAW,KAAMgkB,EAAeG,GAAcA,EAAW78G,IAAI,cAAgB,KAAMy8G,EACrL,CAEA,OAAOG,CACT,CAEA,SAASE,EAAc71B,EAAU35D,EAAmB3kB,EAAKo0G,GAEvDp0G,EAAMA,GAAOyzG,EAIb,IAHA,IAAIY,EAAc/1B,aAAoB,KAClCg2B,GAAkB,EAEb3/G,EAAI,EAAGA,EAAI,YAAuBA,IAAK,CAC9C,IAAIu/G,EAAavvF,EAAkB,KAAehwB,IAElD,GAAIu/G,GAAcA,EAAWlhH,WAAW,QAAS,CAC/CshH,GAAkB,EAClB,KACF,CACF,CAEA,IAAIj/B,EAAcg/B,EAAc/1B,EAAWA,EAASn/D,iBAEpD,GAAIm1F,EAAiB,CACdD,IAEEh/B,IACHA,EAAc,IAAI,KAClBiJ,EAASi2B,eAAel/B,IAItBiJ,EAASk2B,aACXn/B,EAAYm/B,WAAal2B,EAASk2B,aAItC,IAAIC,EAAmBb,EAAa5zG,EAAK2kB,GACrCqvF,EAAcrvF,EAAkBqnD,OAChC0oC,IAAeV,EAAYhhH,WAAW,QACtC2hH,EAAcC,EAAgBZ,EAAaI,GAAkBA,EAAepoC,OAAQhsE,GAAK,GAAQq0G,GACrGM,EAAY/4E,KAAO64E,EAAiBzoC,OAE/BqoC,GAEH/1B,EAAS7jE,cAAco6F,EAAiBb,EAAah0G,GAAK,IAG5D,IAASrL,EAAI,EAAGA,EAAI,YAAuBA,IAAK,CAC9C,IAAIo7F,EAAY,KAAep7F,GAC3Bu/G,EAAavvF,EAAkBorE,GAEnC,GAAImkB,EAAY,CACd,IAAIY,EAAWz/B,EAAYn2C,YAAY6wD,GACnCglB,KAAc,QAAUb,EAAWlhH,WAAW,QAAS0hH,GAS3D,GAPIK,IAAcL,IAChBI,EAASh2F,QAAUi2F,GAGrBD,EAAS3/G,MAAQy/G,EAAgBV,EAAYE,GAAkBA,EAAerkB,GAAY/vF,GAAK,GAAOq0G,GACtGS,EAAS3/G,MAAMymC,KAAO64E,EAAiB1kB,IAElCskB,EAAa,CAChB,IAAIW,EAAwB12B,EAASp/C,YAAY6wD,GACjDilB,EAAsB7vF,WAAa0vF,EAAiBX,EAAYl0G,GAAK,EACvE,CACF,CACF,CAKAq1E,EAAY/uD,SAAW0tF,EAAYhhH,WAAW,UAEnB,MAAvBqiF,EAAYlgF,MAAM6gB,IACpB2+F,EAAY3+F,EAAIq/D,EAAYlgF,MAAM6gB,GAGT,MAAvBq/D,EAAYlgF,MAAM8gB,IACpB0+F,EAAY1+F,EAAIo/D,EAAYlgF,MAAM8gB,GAGpCo/D,EAAYv2D,QAAU41F,EAEtBr/B,EAAYl3D,SAASw2F,GACrBt/B,EAAY1B,QAER3zE,EAAIi1G,mBACNC,EAAW7/B,GAAaq+B,aAAe,SAAUz6F,GAC/C,IAAIw7F,EAAmBb,EAAa5zG,EAAK2kB,EAAmB1L,GAC5Dy6F,EAAar+B,EAAao/B,EAC5B,EAEJ,MAAWp/B,IAETA,EAAYv2D,QAAS,GAGvBw/D,EAAS3K,OACX,CAGO,SAASwhC,EAAqB72F,EAAW82F,GAC9CA,EAAYA,GAAa,QAKzB,IAJA,IAAIC,EAAe,CACjBrpC,OAAQ1tD,EAAUd,SAAS43F,IAGpBzgH,EAAI,EAAGA,EAAI,YAAuBA,IAAK,CAC9C,IAAIo7F,EAAY,KAAep7F,GAC/B0gH,EAAatlB,GAAazxE,EAAUd,SAAS,CAACuyE,EAAWqlB,GAC3D,CAEA,OAAOC,CACT,CAKO,SAAST,EAAgBtyE,EAAgBgzE,EAChDt1G,EAAKu1G,EAAaC,GAEhB,IAAI/6E,EAAY,CAAC,EAIjB,OAHAg7E,EAAmBh7E,EAAW6H,EAAgBtiC,EAAKu1G,EAAaC,GAChEF,IAAsB,QAAO76E,EAAW66E,GAEjC76E,CACT,CACO,SAASo6E,EAAiBvyE,EAAgBtiC,EAAKu1G,GACpDv1G,EAAMA,GAAO,CAAC,EACd,IACI01G,EADAvwF,EAAa,CAAC,EAEd+gB,EAAc5D,EAAetvC,WAAW,UACxC2iH,GAAgB,QAAUrzE,EAAetvC,WAAW,YAAauiH,EAAc,KAAO,GACtFp4E,EAAcmF,EAAetvC,WAAW,UAyB5C,OAxBA0iH,EAAgBpzE,EAAetvC,WAAW,cAAgBuiH,EAAc,KAAO,UAG7D,YAAlBG,IAAgCA,EAAgB11G,EAAIklB,wBAA0B,OAEzD,MAAjBwwF,IACFvwF,EAAW3L,SAAWk8F,GAGL,MAAfv4E,IACFhY,EAAW7R,OAAS6pB,GAGH,MAAf+I,IACFA,GAAevvC,KAAK6gB,GAAK,IACzB2N,EAAWzK,SAAWwrB,GAGH,MAAjByvE,IACFxwF,EAAWzL,SAAWi8F,GAIxBxwF,EAAWywF,YAA8C,YAAhCtzE,EAAejrC,IAAI,SAAyB2I,EAAI+kB,cAAgB,KAAO,OACzFI,CACT,CAWA,SAASswF,EAAmBh7E,EAAW6H,EAAgBtiC,EAAKu1G,EAAaC,GAEvEx1G,EAAMA,GAAOyzG,EACb,IAiBIoC,EAjBAvjH,EAAUgwC,EAAehwC,QACzBwjH,EAAkBxjH,GAAWA,EAAQ2gB,OAAOwnB,UAe5Cs7E,EAAgBC,EAAiB1zE,GAGrC,GAAIyzE,EAGF,IAAK,IAAIhuC,KAFT8tC,EAAa,CAAC,EAEKE,EACjB,GAAIA,EAAc32G,eAAe2oE,GAAS,CAExC,IAAIkuC,EAAgB3zE,EAAe9kB,SAAS,CAAC,OAAQuqD,IAMrDmuC,EAAkBL,EAAW9tC,GAAU,CAAC,EAAGkuC,EAAeH,EAAiB91G,EAAKu1G,EAAaC,GAAY,GAAO,EAClH,CAIAK,IACFp7E,EAAUgP,KAAOosE,GAGnB,IAAI5yE,EAAWX,EAAejrC,IAAI,YAE9B4rC,IACFxI,EAAUwI,SAAWA,GAGvB,IAAIrQ,EAAS0P,EAAejrC,IAAI,aAElB,MAAVu7B,IACF6H,EAAU7H,OAASA,GAGrBsjF,EAAkBz7E,EAAW6H,EAAgBwzE,EAAiB91G,EAAKu1G,EAAaC,GAAY,GAAM,EACpG,CAiBA,SAASQ,EAAiB1zE,GAExB,IAAI6zE,EAEJ,MAAO7zE,GAAkBA,IAAmBA,EAAehwC,QAAS,CAClE,IAAIm3C,GAAQnH,EAAervB,QAAUwgG,GAAWhqE,KAEhD,GAAIA,EAAM,CACR0sE,EAAkBA,GAAmB,CAAC,EAGtC,IAFA,IAAIC,GAAW,QAAK3sE,GAEX90C,EAAI,EAAGA,EAAIyhH,EAASvhH,OAAQF,IAAK,CACxC,IAAI0hH,EAAUD,EAASzhH,GACvBwhH,EAAgBE,GAAW,CAC7B,CACF,CAEA/zE,EAAiBA,EAAes/B,WAClC,CAEA,OAAOu0C,CACT,CAEA,IAAIG,EAAyB,CAAC,YAAa,aAAc,WAAY,aAAc,kBAAmB,iBAAkB,oBAAqB,qBACzIC,EAAkB,CAAC,QAAS,aAAc,QAAS,SAAU,MAAO,iBACpEC,EAAiB,CAAC,UAAW,cAAe,eAAgB,mBAAoB,kBAAmB,cAAe,cAAe,aAAc,gBAAiB,iBAEpK,SAASN,EAAkBz7E,EAAW6H,EAAgBwzE,EAAiB91G,EAAKu1G,EAAaC,EAAYn/B,EAASogC,GAE5GX,GAAmBP,GAAeO,GAAmBrC,EACrD,IAAI1uF,EAAe/kB,GAAOA,EAAI+kB,aAC1B2xF,EAAYp0E,EAAetvC,WAAW,SACtC2jH,EAAcr0E,EAAetvC,WAAW,mBACxCoC,GAAU,QAAUktC,EAAetvC,WAAW,WAAY8iH,EAAgB1gH,SAE5D,YAAdshH,GAAyC,SAAdA,IAQ3BA,EADE3xF,GAGU,MAII,YAAhB4xF,GAA6C,SAAhBA,IAQ7BA,EADE5xF,GAGY,MAIbywF,IAGHkB,EAAYA,GAAaZ,EAAgB9gG,MACzC2hG,EAAcA,GAAeb,EAAgBc,iBAG9B,MAAbF,IACFj8E,EAAUzV,KAAO0xF,GAGA,MAAfC,IACFl8E,EAAUlV,OAASoxF,GAGrB,IAAIE,GAAkB,QAAUv0E,EAAetvC,WAAW,mBAAoB8iH,EAAgBe,iBAEvE,MAAnBA,IACFp8E,EAAUrkB,UAAYygG,GAGxB,IAAIC,GAAiB,QAAUx0E,EAAetvC,WAAW,kBAAmB8iH,EAAgBgB,gBAEtE,MAAlBA,IACFr8E,EAAUs8E,SAAWD,GAGvB,IAAIE,GAAuB,QAAU10E,EAAetvC,WAAW,wBAAyB8iH,EAAgBkB,sBAE5E,MAAxBA,IACFv8E,EAAUw8E,eAAiBD,GAGxBzB,GAA0B,MAAXngH,GAAoBqhH,IACtCrhH,EAAU4K,GAAOA,EAAIilB,gBAGR,MAAX7vB,IACFqlC,EAAUrlC,QAAUA,GAIjBmgH,GAAgBC,GAEG,MAAlB/6E,EAAUzV,MAAgBhlB,EAAI+kB,eAChC0V,EAAUzV,KAAOhlB,EAAI+kB,cAOzB,IAAK,IAAIpwB,EAAI,EAAGA,EAAI2hH,EAAuBzhH,OAAQF,IAAK,CACtD,IAAIuH,EAAMo6G,EAAuB3hH,GAC7B8U,GAAM,QAAU64B,EAAetvC,WAAWkJ,GAAM45G,EAAgB55G,IAEzD,MAAPuN,IACFgxB,EAAUv+B,GAAOuN,EAErB,CAEA,IAAS9U,EAAI,EAAGA,EAAI4hH,EAAgB1hH,OAAQF,IAAK,CAC3CuH,EAAMq6G,EAAgB5hH,GACtB8U,EAAM64B,EAAetvC,WAAWkJ,GAEzB,MAAPuN,IACFgxB,EAAUv+B,GAAOuN,EAErB,CAEA,GAA+B,MAA3BgxB,EAAUngB,cAAuB,CACnC,IAAI48F,EAAW50E,EAAetvC,WAAW,YAEzB,MAAZkkH,IACFz8E,EAAUngB,cAAgB48F,EAE9B,CAEA,IAAK7gC,IAAYr2E,EAAIg7C,WAAY,CAC/B,IAASrmD,EAAI,EAAGA,EAAI6hH,EAAe3hH,OAAQF,IAAK,CAC1CuH,EAAMs6G,EAAe7hH,GACrB8U,EAAM64B,EAAetvC,WAAWkJ,GAEzB,MAAPuN,IACFgxB,EAAUv+B,GAAOuN,EAErB,CAEA,IAAI0L,EAAamtB,EAAetvC,WAAW,cAEzB,MAAdmiB,IACFslB,EAAU08E,WAAahiG,GAGU,SAA9BslB,EAAU3H,iBAA4D,YAA9B2H,EAAU3H,kBAAkC/N,IAOvF0V,EAAU3H,gBAAkB/N,GAGC,SAA1B0V,EAAUxlB,aAAoD,YAA1BwlB,EAAUxlB,cAA8B8P,IAO/E0V,EAAUxlB,YAAc8P,EAE5B,CACF,CAEO,SAASkX,EAAQj8B,EAAK1N,GAC3B,IAAI8kH,EAAkB9kH,GAAWA,EAAQkrB,SAAS,aAClD,OAAO,QAAK,CACZxd,EAAI4gE,WAAaw2C,GAAmBA,EAAgBpkH,WAAW,cAAgB,GAAIgN,EAAI2pC,YAAcytE,GAAmBA,EAAgBpkH,WAAW,eAAiB,IAAKgN,EAAI4oC,UAAYwuE,GAAmBA,EAAgBpkH,WAAW,aAAe,IAAM,KAAMgN,EAAI0gE,YAAc02C,GAAmBA,EAAgBpkH,WAAW,eAAiB,cAAc+lB,KAAK,KACxW,CACO,IAAIm8F,GAAa,UACjB,SAASmC,EAAuBt4G,EAAO4lB,EAAmBpe,EAAO+wG,GACtE,GAAKv4G,EAAL,CAIA,IAAIglB,EAAMmxF,EAAWn2G,GACrBglB,EAAI1E,UAAY0E,EAAIxd,MACpBwd,EAAIxd,MAAQA,EACZ,IAAIgxG,EAAmB5yF,EAAkBqnD,OACzCjoD,EAAIyzF,eAAiBD,EAAiBlgH,IAAI,kBAEtC0sB,EAAIyzF,iBACNzzF,EAAI4O,UAAY4kF,EAAiBlgH,IAAI,aACrC0sB,EAAI0zF,wBAA0BH,EAC9BvzF,EAAIsxF,aAAe1wF,EAXrB,CAaF,C,oMC3eI+yF,EAA8C,qBAAjBC,aAC7BC,EAAoBF,EAA8BC,aAAR/8G,MACvC,SAASi9G,EAAmBC,GACjC,OAAI,QAAQA,GAEHJ,EAAsB,IAAIC,aAAaG,GAAOA,EAIhD,IAAIF,EAAiBE,EAC9B,CCRA,IAAIC,EAAe,cAEnB,SAASC,EAAiBhhH,GACxB,OAAOA,EAAYK,IAAI,UAAY0gH,EAAe/gH,EAAYyT,WAChE,CAEA,SAASwtG,EAAW7vF,GAClB,OAAOA,EAAK7vB,IAAM6vB,EAAKlX,KACzB,CAoCO,SAASgnG,EAAuBphH,EAAYxE,GACjD,IAAI8jC,EAAe,GAOnB,OANA9jC,EAAQu0E,iBAAiB/vE,GAAY,SAAUE,GAEzCmhH,EAAcnhH,IAChBo/B,EAAah6B,KAAKpF,EAEtB,IACOo/B,CACT,CAUA,SAASgiF,EAAoBC,GAQ3B,IAAIC,EAAa,CAAC,GAClB,QAAKD,GAAW,SAAUrhH,GACxB,IAAI6e,EAAY7e,EAAYO,iBACxBE,EAAWoe,EAAUne,cAEzB,GAAsB,SAAlBD,EAASD,MAAqC,UAAlBC,EAASD,KASzC,IALA,IAAIN,EAAOF,EAAYG,UACnB+E,EAAMzE,EAASc,IAAM,IAAMd,EAASyZ,MACpCpO,EAAS5L,EAAK6G,kBAAkB7G,EAAKoB,aAAab,EAASc,MAC3D2L,EAAQhN,EAAK2M,WAERlP,EAAI,EAAG4jH,EAAMr0G,EAAMhO,QAASvB,EAAI4jH,IAAO5jH,EAAG,CACjD,IAAI4R,EAAQrC,EAAM7M,IAAIyL,EAAQnO,GAEzB2jH,EAAWp8G,GAKdo8G,EAAWp8G,GAAKE,KAAKmK,GAHrB+xG,EAAWp8G,GAAO,CAACqK,EAMvB,CACF,IACA,IAAIiyG,EAAc,CAAC,EAEnB,IAAK,IAAIt8G,KAAOo8G,EACd,GAAIA,EAAWl5G,eAAelD,GAAM,CAClC,IAAIu8G,EAAeH,EAAWp8G,GAE9B,GAAIu8G,EAAc,CAEhBA,EAAajqG,MAAK,SAAUiS,EAAGC,GAC7B,OAAOD,EAAIC,CACb,IAGA,IAFA,IAAIlqB,EAAM,KAEDoF,EAAI,EAAGA,EAAI68G,EAAa5jH,SAAU+G,EAAG,CAC5C,IAAI41B,EAAQinF,EAAa78G,GAAK68G,EAAa78G,EAAI,GAE3C41B,EAAQ,IAEVh7B,EAAc,OAARA,EAAeg7B,EAAQ76B,KAAKH,IAAIA,EAAKg7B,GAE/C,CAGAgnF,EAAYt8G,GAAO1F,CACrB,CACF,CAGF,OAAOgiH,CACT,CAEO,SAASE,EAAiBL,GAC/B,IAAIG,EAAcJ,EAAoBC,GAClCM,EAAiB,GAuCrB,OAtCA,QAAKN,GAAW,SAAUrhH,GACxB,IAGIi7B,EAHApc,EAAY7e,EAAYO,iBACxBE,EAAWoe,EAAUne,cACrB61B,EAAa91B,EAASK,YAG1B,GAAsB,aAAlBL,EAASD,KACXy6B,EAAYx6B,EAAS41B,oBAChB,GAAsB,UAAlB51B,EAASD,MAAsC,SAAlBC,EAASD,KAAiB,CAChE,IAAI0E,EAAMzE,EAASc,IAAM,IAAMd,EAASyZ,MACpC0nG,EAASJ,EAAYt8G,GACrB28G,EAAaliH,KAAKuB,IAAIq1B,EAAW,GAAKA,EAAW,IACjD1M,EAAQppB,EAASopB,MAAM/oB,YACvBghH,EAAYniH,KAAKuB,IAAI2oB,EAAM,GAAKA,EAAM,IAC1CoR,EAAY2mF,EAASC,EAAaC,EAAYF,EAASC,CACzD,KAAO,CACL,IAAI3hH,EAAOF,EAAYG,UACvB86B,EAAYt7B,KAAKuB,IAAIq1B,EAAW,GAAKA,EAAW,IAAMr2B,EAAKhB,OAC7D,CAEA,IAAI+vB,GAAW,QAAajvB,EAAYK,IAAI,YAAa46B,GACrD8mF,GAAc,QAAa/hH,EAAYK,IAAI,eAAgB46B,GAC3D+mF,GAAc,QAElBhiH,EAAYK,IAAI,iBAAmB4hH,EAAcjiH,GAAe,GAAM,GAAIi7B,GACtEinF,EAASliH,EAAYK,IAAI,UACzB8hH,EAAiBniH,EAAYK,IAAI,kBACrCshH,EAAev8G,KAAK,CAClB61B,UAAWA,EACXhM,SAAUA,EACV8yF,YAAaA,EACbC,YAAaA,EACbE,OAAQA,EACRC,eAAgBA,EAChBn/E,QAASi+E,EAAWxgH,GACpB2hH,QAASpB,EAAiBhhH,IAE9B,IACOqiH,EAAuBV,EAChC,CAEA,SAASU,EAAuBV,GAE9B,IAAIW,EAAa,CAAC,GAClB,QAAKX,GAAgB,SAAUY,EAAY91G,GACzC,IAAIu2B,EAAUu/E,EAAWv/E,QACrB/H,EAAYsnF,EAAWtnF,UACvBunF,EAAgBF,EAAWt/E,IAAY,CACzC/H,UAAWA,EACXwnF,cAAexnF,EACfynF,eAAgB,EAChBC,YAAa,KACbp3E,IAAK,MACLq3E,OAAQ,CAAC,GAEPA,EAASJ,EAAcI,OAC3BN,EAAWt/E,GAAWw/E,EACtB,IAAIJ,EAAUG,EAAWH,QAEpBQ,EAAOR,IACVI,EAAcE,iBAGhBE,EAAOR,GAAWQ,EAAOR,IAAY,CACnCljG,MAAO,EACP6sB,SAAU,GAMZ,IAAI9c,EAAWszF,EAAWtzF,SAEtBA,IAAa2zF,EAAOR,GAASljG,QAE/B0jG,EAAOR,GAASljG,MAAQ+P,EACxBA,EAAWtvB,KAAKH,IAAIgjH,EAAcC,cAAexzF,GACjDuzF,EAAcC,eAAiBxzF,GAGjC,IAAI8yF,EAAcQ,EAAWR,YAC7BA,IAAgBa,EAAOR,GAASr2E,SAAWg2E,GAC3C,IAAIC,EAAcO,EAAWP,YAC7BA,IAAgBY,EAAOR,GAASS,SAAWb,GAC3C,IAAIE,EAASK,EAAWL,OACd,MAAVA,IAAmBM,EAAcj3E,IAAM22E,GACvC,IAAIC,EAAiBI,EAAWJ,eACd,MAAlBA,IAA2BK,EAAcG,YAAcR,EACzD,IACA,IAAI9wG,EAAS,CAAC,EA8Fd,OA7FA,QAAKixG,GAAY,SAAUE,EAAejqG,GACxClH,EAAOkH,GAAgB,CAAC,EACxB,IAAIqqG,EAASJ,EAAcI,OACvB3nF,EAAYunF,EAAcvnF,UAC1B6nF,EAAqBN,EAAcG,YAEvC,GAA0B,MAAtBG,EAA4B,CAC9B,IAAIC,GAAc,QAAKH,GAAQ/kH,OAG/BilH,EAAqBnjH,KAAKN,IAAI,GAAmB,EAAd0jH,EAAiB,IAAM,GAC5D,CAEA,IAAIJ,GAAc,QAAaG,EAAoB7nF,GAC/C+nF,GAAgB,QAAaR,EAAcj3E,IAAK,GAChDk3E,EAAgBD,EAAcC,cAC9BC,EAAiBF,EAAcE,eAC/BO,GAAaR,EAAgBE,IAAgBD,GAAkBA,EAAiB,GAAKM,GACzFC,EAAYtjH,KAAKN,IAAI4jH,EAAW,IAEhC,QAAKL,GAAQ,SAAUM,GACrB,IAAIn3E,EAAWm3E,EAAOn3E,SAClB82E,EAAWK,EAAOL,SAEtB,GAAKK,EAAOhkG,MAqBL,CAIDikG,EAAaD,EAAOhkG,MAEpB6sB,IACFo3E,EAAaxjH,KAAKH,IAAI2jH,EAAYp3E,IAIhC82E,IACFM,EAAaxjH,KAAKN,IAAI8jH,EAAYN,IAGpCK,EAAOhkG,MAAQikG,EACfV,GAAiBU,EAAaH,EAAgBG,EAC9CT,GACF,KAvCmB,CACjB,IAAIS,EAAaF,EAEbl3E,GAAYA,EAAWo3E,IACzBA,EAAaxjH,KAAKH,IAAIusC,EAAU02E,IAQ9BI,GAAYA,EAAWM,IACzBA,EAAaN,GAGXM,IAAeF,IACjBC,EAAOhkG,MAAQikG,EACfV,GAAiBU,EAAaH,EAAgBG,EAC9CT,IAEJ,CAmBF,IAEAO,GAAaR,EAAgBE,IAAgBD,GAAkBA,EAAiB,GAAKM,GACrFC,EAAYtjH,KAAKN,IAAI4jH,EAAW,GAChC,IACIG,EADAC,EAAW,GAEf,QAAKT,GAAQ,SAAUM,EAAQz2G,GACxBy2G,EAAOhkG,QACVgkG,EAAOhkG,MAAQ+jG,GAGjBG,EAAaF,EACbG,GAAYH,EAAOhkG,OAAS,EAAI8jG,EAClC,IAEII,IACFC,GAAYD,EAAWlkG,MAAQ8jG,GAGjC,IAAI1mG,GAAU+mG,EAAW,GACzB,QAAKT,GAAQ,SAAUM,EAAQd,GAC7B/wG,EAAOkH,GAAc6pG,GAAW/wG,EAAOkH,GAAc6pG,IAAY,CAC/DnnF,UAAWA,EACX3e,OAAQA,EACR4C,MAAOgkG,EAAOhkG,OAEhB5C,GAAU4mG,EAAOhkG,OAAS,EAAI8jG,EAChC,GACF,IACO3xG,CACT,CAEA,SAASiyG,EAAqBn+C,EAAmB/zC,EAAMpxB,GACrD,GAAImlE,GAAqB/zC,EAAM,CAC7B,IAAI/f,EAAS8zD,EAAkB87C,EAAW7vF,IAE1C,OAAc,MAAV/f,GAAiC,MAAfrR,EACbqR,EAAO2vG,EAAiBhhH,IAG1BqR,CACT,CACF,CAGO,SAASgC,EAAOvT,EAAYxE,GACjC,IAAI8jC,EAAe8hF,EAAuBphH,EAAYxE,GAClD6pE,EAAoBu8C,EAAiBtiF,IACzC,QAAKA,GAAc,SAAUp/B,GAC3B,IAAIE,EAAOF,EAAYG,UACnB0e,EAAY7e,EAAYO,iBACxBE,EAAWoe,EAAUne,cACrB0hH,EAAUpB,EAAiBhhH,GAC3BujH,EAAmBp+C,EAAkB87C,EAAWxgH,IAAW2hH,GAC3DoB,EAAeD,EAAiBjnG,OAChCmnG,EAAcF,EAAiBrkG,MACnChf,EAAK+S,UAAU,CACbgoB,UAAWsoF,EAAiBtoF,UAC5B3e,OAAQknG,EACRviH,KAAMwiH,GAEV,GACF,CAEO,SAASC,EAAwB5jH,GACtC,MAAO,CACLA,WAAYA,EACZ2iF,MAAM,EAAAnxD,EAAA,KACNvxB,MAAO,SAAUC,GACf,GAAKmhH,EAAcnhH,GAAnB,CAIA,IAAIE,EAAOF,EAAYG,UACnB0e,EAAY7e,EAAYO,iBACxBE,EAAWoe,EAAUne,cACrBC,EAAYke,EAAUje,aAAaH,GACnCsuB,EAAc7uB,EAAK6G,kBAAkB7G,EAAKoB,aAAaX,EAAUY,MACjEutB,EAAa5uB,EAAK6G,kBAAkB7G,EAAKoB,aAAab,EAASc,MAC/D+kB,EAAiBtmB,EAAYK,IAAI,kBAAkB,GACnDsjH,EAAWzjH,EAAKoB,aAAaX,EAAUY,KACvCqiH,EAAiB1jH,EAAKmP,mBAAmB,wBACzCw0G,GAAU,OAAmB3jH,EAAMyjH,MAAezjH,EAAKmP,mBAAmB,mBAC1Ey0G,EAAenjH,EAAU6b,eACzBunG,EAAiBC,EAAkBvjH,EAAUE,GAC7CsjH,EAAUhC,EAAcjiH,GACxB4c,EAAe5c,EAAYK,IAAI,iBAAmB,EAClD6jH,EAAgBN,GAAkB1jH,EAAK6G,kBAAkB68G,GAEzDH,EAAcvjH,EAAKgT,UAAU,QAC7BswG,EAAetjH,EAAKgT,UAAU,UAClC,MAAO,CACLsxE,SAAU,SAAUl/D,EAAQplB,GAC1B,IAMIhF,EANAgE,EAAQomB,EAAOpmB,MACfilH,EAAcF,GAAWpD,EAA2B,EAAR3hH,GAC5CklH,EAAwBH,GAAW39F,GAAkBu6F,EAA2B,EAAR3hH,GACxEkwB,EAAmB60F,GAAWpD,EAAmB3hH,GACjD8wB,EAAcnR,EAAU2hC,OAAOnC,UAC/BgmE,EAASP,EAAe9zF,EAAY9Q,MAAQ8Q,EAAY7Q,OAExDjS,EAAQhN,EAAK2M,WACby3G,EAAY,EAEhB,MAAsC,OAA9BppH,EAAYoqB,EAAOgoB,QAAiB,CAC1C,IAAI/9B,EAAQrC,EAAM7M,IAAIwjH,EAAUK,EAAgBn1F,EAAa7zB,GACzDqpH,EAAYr3G,EAAM7M,IAAIyuB,EAAY5zB,GAClCspH,EAAYT,EACZU,OAAa,EAGbZ,IACFY,GAAcl1G,EAAQrC,EAAM7M,IAAI0uB,EAAa7zB,IAG/C,IAAI8jB,OAAI,EACJC,OAAI,EACJC,OAAQ,EACRC,OAAS,EAEb,GAAI2kG,EAAc,CAChB,IAAI5/F,EAAQrF,EAAUxC,YAAY,CAAC9M,EAAOg1G,IAE1C,GAAIV,EAAS,CACX,IAAIa,EAAa7lG,EAAUxC,YAAY,CAACooG,EAAYF,IACpDC,EAAYE,EAAW,EACzB,CAEA1lG,EAAIwlG,EACJvlG,EAAIiF,EAAM,GAAKs/F,EACftkG,EAAQgF,EAAM,GAAKsgG,EACnBrlG,EAASskG,EAEL9jH,KAAKuB,IAAIge,GAAStC,IACpBsC,GAASA,EAAQ,GAAK,EAAI,GAAKtC,EAEnC,KAAO,CACDsH,EAAQrF,EAAUxC,YAAY,CAACkoG,EAAWh1G,IAE9C,GAAIs0G,EAAS,CACPa,EAAa7lG,EAAUxC,YAAY,CAACkoG,EAAWE,IACnDD,EAAYE,EAAW,EACzB,CAEA1lG,EAAIkF,EAAM,GAAKs/F,EACfvkG,EAAIulG,EACJtlG,EAAQukG,EACRtkG,EAAS+E,EAAM,GAAKsgG,EAEhB7kH,KAAKuB,IAAIie,GAAUvC,IAErBuC,GAAUA,GAAU,GAAK,EAAI,GAAKvC,EAEtC,CAEKqnG,GAQHE,EAAYG,GAAatlG,EACzBmlG,EAAYG,EAAY,GAAKrlG,EAC7BklG,EAAYG,EAAY,GAAKR,EAAe5kG,EAAQC,EAEhDilG,IACFA,EAAsBE,GAAaR,EAAe9zF,EAAYhR,EAAIA,EAClEolG,EAAsBE,EAAY,GAAKR,EAAe7kG,EAAI+Q,EAAY/Q,EACtEmlG,EAAsBE,EAAY,GAAKD,GAGzCj1F,EAAiBl0B,GAAaA,GAjB9BgF,EAAKkT,cAAclY,EAAW,CAC5B8jB,EAAGA,EACHC,EAAGA,EACHC,MAAOA,EACPC,OAAQA,IAgBZmlG,GAAa,CACf,CAEIL,GACF/jH,EAAK+S,UAAU,CACbkxG,YAAaA,EACb/0F,iBAAkBA,EAClBg1F,sBAAuBA,EACvBO,oBAAqBb,GAG3B,EAnHF,CAqHF,EAEJ,CAEA,SAAS3C,EAAcnhH,GACrB,OAAOA,EAAYO,kBAA0D,gBAAtCP,EAAYO,iBAAiBC,IACtE,CAEA,SAASyhH,EAAcjiH,GACrB,OAAOA,EAAY4lB,iBAAmB5lB,EAAY4lB,gBAAgB9I,KACpE,CAGA,SAASknG,EAAkBvjH,EAAUE,GACnC,OAAOA,EAAUk5B,cAAcl5B,EAAUm5B,YAA+B,QAAnBn5B,EAAUH,KAAiB,EAAI,GACtF,C,gGCveI+wB,GAAQ,UAERoqF,EAEJ,SAAU5/F,GAGR,SAAS4/F,EAAe1/F,EAAQ2uD,EAAatvE,GAC3C,IAAI6R,EAAQ4O,EAAOlI,KAAKxR,KAAM4Z,EAAQ2uD,EAAatvE,IAAY+G,KAG/D,OADA8K,EAAMqhD,IAAM,KAAqB,gBAC1BrhD,CACT,CAkLA,OAzLA,QAAUwuG,EAAgB5/F,GAS1B4/F,EAAeh5G,UAAUyqD,KAAO,SAAUnxC,EAAQ2uD,EAAatvE,GAC7D+G,KAAKkxC,qBAAqBt3B,EAAQ3gB,EACpC,EAEAqgH,EAAeh5G,UAAU4wC,qBAAuB,SAAUt3B,EAAQ3gB,GAChE,IAAIk1C,EAAa,KAAuBnuC,MACpCmxC,EAAsBhD,EAAa,KAAuBv0B,GAAU,CAAC,EACrEw3B,EAAan4C,EAAQo4C,WACzB,KAAaz3B,EAAQw3B,EAAWpzC,IAAIgC,KAAK4uB,WACzC,KAAahV,EAAQ5Z,KAAKsxC,oBAEtBnD,GACF,KAAwBv0B,EAAQu3B,EAAqBhD,EAEzD,EAEAmrE,EAAeh5G,UAAUupE,YAAc,SAAUjwD,EAAQ3gB,GACvD,KAAa+G,KAAK4Z,OAAQA,GAAQ,GAClC,IAAIu0B,EAAa,KAAuBnuC,MAEpCmuC,GACF,KAAwBnuC,KAAK4Z,OAAQA,EAAQu0B,EAEjD,EAMAmrE,EAAeh5G,UAAUkxC,cAAgB,SAAU+wE,EAAc5tF,GAAS,EAyD1E2kF,EAAeh5G,UAAUgxC,iBAAmB,WAC1C,IAAIkxE,EAAOxiH,KAAKorE,YAIhB,KAAK,QAAgBo3C,GAEnB,OAAOA,EAAKpoG,cAId,IAAI+U,EAASD,EAAMlvB,MAEnB,IAAKmvB,EAAO/U,cAAe,CACzB,IAAIqoG,EAAU,GACVC,EAAMF,EAEV,MAAOE,EAAK,CACV,IAAI/7G,EAAM+7G,EAAIpiH,UAAU8Z,cACxBzT,GAAO87G,EAAQ1/G,KAAK4D,GACpB+7G,EAAMA,EAAIC,UACZ,CAIA,IAFA,IAAIvoG,EAAgB,CAAC,EAEZ9e,EAAImnH,EAAQjnH,OAAS,EAAGF,GAAK,EAAGA,IACvC8e,EAAgB,KAAaA,EAAeqoG,EAAQnnH,IAAI,GAG1D6zB,EAAO/U,cAAgBA,CACzB,CAEA,OAAO+U,EAAO/U,aAChB,EAWAk/F,EAAeh5G,UAAUqW,uBAAyB,SAAUiY,EAAUjoB,GACpE,IAAIi8G,EAAWh0F,EAAW,QACtBi0F,EAAQj0F,EAAW,KACvB,OAAO,QAAyB5uB,KAAK/G,QAAS21B,EAAU,CACtD/W,MAAO7X,KAAKhC,IAAI4kH,GAAU,GAC1Bh2G,GAAI5M,KAAKhC,IAAI6kH,GAAO,IACnBl8G,EACL,EAEA2yG,EAAeh5G,UAAUw8C,mBAAqB,WAE5C,IAAIgmE,EAAiB9iH,KACrB,MAAO,CACLouC,KAAM00E,EAAe9kH,IAAI,QACzBqwC,IAAKy0E,EAAe9kH,IAAI,OACxBswC,MAAOw0E,EAAe9kH,IAAI,SAC1BuwC,OAAQu0E,EAAe9kH,IAAI,UAC3B6e,MAAOimG,EAAe9kH,IAAI,SAC1B8e,OAAQgmG,EAAe9kH,IAAI,UAE/B,EAQAs7G,EAAeh5G,UAAU21F,aAAe,WACtC,MAAO,EACT,EAEAqjB,EAAeh5G,UAAU+1F,UAAY,SAAUr/D,GAC7Ch3B,KAAK4Z,OAAOod,OAASA,CACvB,EAEAsiF,EAAetJ,gBAAkB,WAC/B,IAAI/vC,EAAQq5C,EAAeh5G,UAC3B2/D,EAAM9hE,KAAO,YACb8hE,EAAMrzD,GAAK,GACXqzD,EAAMt7D,KAAO,GACbs7D,EAAMrxC,SAAW,GACjBqxC,EAAMkL,QAAU,GAChBlL,EAAM3pC,eAAiB,CACzB,CARiC,GAU1BgjF,CACT,CA3LA,CA2LE,KAOF,SAASyJ,EAAgB16F,GACvB,IAAI26F,EAAO,GAaX,OAZA,KAAY1J,EAAe2J,qBAAqB56F,IAAgB,SAAUq6F,GACxEM,EAAOA,EAAK19G,OAAOo9G,EAAIrnG,cAAgBqnG,EAAIpiH,UAAU+a,cAAgB,GACvE,IAEA2nG,EAAO,KAAWA,GAAM,SAAU7kH,GAChC,OAAO,QAAeA,GAAMqmF,IAC9B,IAEsB,YAAlBn8D,GAA+B,KAAe26F,EAAM,YAAc,GACpEA,EAAKtpE,QAAQ,WAGRspE,CACT,EApBA,QAAY1J,EAAgB,MAC5B,QAAsBA,GACtB,KAAqCA,GACrC,KAAsCA,EAAgByJ,GAmBtD,Q,yFC7NWG,EAAqB,CAAC,CAAC,OAAQ,SAAU,CAAC,cAAe,CAAC,iBAAkB,CAAC,iBAAkB,CAAC,WAAY,CAAC,gBAGpH9gF,GAAe,EAAAi3C,EAAA,GAAgB6pC,GAE/BC,EAEJ,WACE,SAASA,IAAkB,CAM3B,OAJAA,EAAe7iH,UAAU8hC,aAAe,SAAUghF,EAAUC,GAC1D,OAAOjhF,EAAapiC,KAAMojH,EAAUC,EACtC,EAEOF,CACT,CARA,G,oBCNIG,EAAa,CAAC,YAAa,SAC3BC,EAAkB,CAAC,YAAa,aAAc,WAAY,aAAc,UAAW,aAAc,OAAQ,QAAS,SAAU,YAE5HC,EAAU,IAAI,KAEdC,EAEJ,WACE,SAASA,IAAkB,CAyC3B,OAlCAA,EAAenjH,UAAU0iC,aAAe,SAAU0gF,GAChD,IAAIzqH,EAAU+G,KAAK/G,QACnB,OAAO+G,KAAKrG,WAAW,YAAc+pH,GAAczqH,EAAUA,EAAQ+E,IAAIslH,GAAc,KACzF,EAOAG,EAAenjH,UAAUsiC,QAAU,WACjC,OAAO,QAAQ,CACb2kC,UAAWvnE,KAAKrG,WAAW,aAC3B22C,WAAYtwC,KAAKrG,WAAW,cAC5B41C,SAAUvvC,KAAKrG,WAAW,YAC1B0tE,WAAYrnE,KAAKrG,WAAW,eAC3BqG,KAAK/G,QACV,EAEAwqH,EAAenjH,UAAUukE,YAAc,SAAUtiC,GAM/C,IALA,IAAIzmC,EAAQ,CACVymC,KAAMA,EACNthB,cAAejhB,KAAKrG,WAAW,kBAAoBqG,KAAKrG,WAAW,aAG5D2B,EAAI,EAAGA,EAAIioH,EAAgB/nH,OAAQF,IAC1CQ,EAAMynH,EAAgBjoH,IAAM0E,KAAKrG,WAAW4pH,EAAgBjoH,IAK9D,OAFAkoH,EAAQ1+F,SAAShpB,GACjB0nH,EAAQ9iH,SACD8iH,EAAQtzF,iBACjB,EAEOuzF,CACT,CA3CA,GA8CA,I,8BC/CI7zG,EAEJ,WACE,SAASA,EAAMgK,EAAQ2uD,EAAatvE,GAClC+G,KAAKuoE,YAAcA,EACnBvoE,KAAK/G,QAAUA,EACf+G,KAAK4Z,OAASA,CAShB,CAkIA,OAhIAhK,EAAMtP,UAAUyqD,KAAO,SAAUnxC,EAAQ2uD,EAAatvE,GAGpD,IAFA,IAAI0qH,EAAO,GAEF91B,EAAK,EAAGA,EAAK3+E,UAAU1T,OAAQqyF,IACtC81B,EAAK91B,EAAK,GAAK3+E,UAAU2+E,EAE7B,EAMAj+E,EAAMtP,UAAUupE,YAAc,SAAUjwD,EAAQ3gB,IAC9C,QAAM+G,KAAK4Z,OAAQA,GAAQ,EAC7B,EAKAhK,EAAMtP,UAAUtC,IAAM,SAAU63E,EAAM+tC,GACpC,OAAY,MAAR/tC,EACK71E,KAAK4Z,OAGP5Z,KAAK6jH,OAAO7jH,KAAK8jH,UAAUjuC,IAAQ+tC,GAAgB5jH,KAAKuoE,YACjE,EAEA34D,EAAMtP,UAAU3G,WAAa,SAAUkJ,EAAK+gH,GAC1C,IAAIhqG,EAAS5Z,KAAK4Z,OACdxJ,EAAgB,MAAVwJ,EAAiBA,EAASA,EAAO/W,GAE3C,GAAW,MAAPuN,IAAgBwzG,EAAc,CAChC,IAAIr7C,EAAcvoE,KAAKuoE,YAEnBA,IAEFn4D,EAAMm4D,EAAY5uE,WAAWkJ,GAEjC,CAEA,OAAOuN,CACT,EAKAR,EAAMtP,UAAU6jB,SAAW,SAAU0xD,EAAMtN,GACzC,IAAIw7C,EAAkB,MAARluC,EACVmuC,EAAYD,EAAU/jH,KAAK8jH,UAAUjuC,GAAQ,KAC7CnrD,EAAMq5F,EAAU/jH,KAAK6jH,OAAOG,GAAahkH,KAAK4Z,OAElD,OADA2uD,EAAcA,GAAevoE,KAAKuoE,aAAevoE,KAAKuoE,YAAYpkD,SAASnkB,KAAKikH,kBAAkBD,IAC3F,IAAIp0G,EAAM8a,EAAK69C,EAAavoE,KAAK/G,QAC1C,EAMA2W,EAAMtP,UAAU4jH,QAAU,WACxB,OAAsB,MAAflkH,KAAK4Z,MACd,EAEAhK,EAAMtP,UAAUgpE,YAAc,WAAa,EAG3C15D,EAAMtP,UAAU6vB,MAAQ,WACtB,IAAI41E,EAAO/lG,KAAKorE,YAChB,OAAO,IAAI26B,GAAK,QAAM/lG,KAAK4Z,QAC7B,EAMAhK,EAAMtP,UAAUwjH,UAAY,SAAUjuC,GACpC,MAAoB,kBAATA,EACFA,EAAKE,MAAM,KAGbF,CACT,EAKAjmE,EAAMtP,UAAU2jH,kBAAoB,SAAUpuC,GAC5C,OAAOA,CACT,EAGAjmE,EAAMtP,UAAUhH,mBAAqB,WACnC,IAAK+pD,EAAA,QAAYrjD,KAAK4Z,OAAQ,CAC5B,GAA6B,MAAzB5Z,KAAK4Z,OAAOxgB,UACd,QAAS4G,KAAK4Z,OAAOxgB,UAChB,GAAI4G,KAAKuoE,YACd,OAAOvoE,KAAKuoE,YAAYjvE,oBAE5B,CACF,EAEAsW,EAAMtP,UAAUujH,OAAS,SAAU/tC,EAASvN,GAC1C,IAAI79C,EAAM1qB,KAAK4Z,OAEf,IAAKk8D,EACH,OAAOprD,EAGT,IAAK,IAAIpvB,EAAI,EAAGA,EAAIw6E,EAAQt6E,OAAQF,IAElC,GAAKw6E,EAAQx6E,KAKbovB,EAAMA,GAAsB,kBAARA,EAAmBA,EAAIorD,EAAQx6E,IAAM,KAE9C,MAAPovB,GACF,MAQJ,OAJW,MAAPA,GAAe69C,IACjB79C,EAAM69C,EAAYs7C,OAAO7jH,KAAKikH,kBAAkBnuC,GAAUvN,EAAYA,cAGjE79C,CACT,EAEO9a,CACT,CAhJA,IAoJA,QAAkBA,IAClB,QAAiBA,IACjB,QAAMA,EAAO,MACb,QAAMA,EAAO,MACb,QAAMA,EAAOuzG,IACb,QAAMvzG,EAAO,GACb,O,yNClEIu0G,EAEJ,WACE,SAASA,EAAcC,GAErBpkH,KAAKqkH,YAAc,GACnBrkH,KAAKskH,WAAa,GAElBtkH,KAAKukH,kBAAoB,GACzBvkH,KAAKwkH,iBAAmB,EACxBxkH,KAAKgjG,QAAS,EACdhjG,KAAKykH,YAAcL,CACrB,CA+SA,OAzSAD,EAAc7jH,UAAUg6E,MAAQ,WAC9Bt6E,KAAK0kH,gBAAgB,GAAI,IAEzB1kH,KAAKskH,WAAa,GAClBtkH,KAAKgjG,QAAS,CAChB,EAEAmhB,EAAc7jH,UAAUokH,gBAAkB,SAAUrM,EAAYsM,GAC9D3kH,KAAKqkH,YAAchM,EACnBr4G,KAAKukH,kBAAoBI,EACzB3kH,KAAKwkH,mBAEDxkH,KAAKwkH,iBAAmB,OAC1BxkH,KAAKwkH,iBAAmB,EAE5B,EAOAL,EAAc7jH,UAAUskH,gBAAkB,WACxC,OAAO5kH,KAAKykH,YAAYt4D,IAAM,IAAMnsD,KAAKwkH,gBAC3C,EAMAL,EAAc7jH,UAAUukH,cAAgB,WAGlC7kH,KAAK8kH,aACP9kH,KAAK+kH,gBAEL/kH,KAAKgjG,QAAS,EAElB,EAEAmhB,EAAc7jH,UAAUykH,cAAgB,WACtC/kH,KAAK0kH,gBAAgB,GAAI,IAEzB,IAKIM,EACAL,EANAP,EAAapkH,KAAKykH,YAElBQ,EAAkBjlH,KAAKklH,6BAEvBC,IAAgBF,EAAgBzpH,OAIpC,GAAI4pH,EAAShB,GAAa,CACxB,IAAIzmH,EAAcymH,EACdvmH,OAAO,EACPuO,OAAe,EACf2sG,OAAW,EAEf,GAAIoM,EAAa,CACf,IAAIE,EAAcJ,EAAgB,GAClCI,EAAYR,gBACZ9L,EAAWsM,EAAYl5G,YACvBtO,EAAOk7G,EAASl7G,KAChBuO,EAAe2sG,EAAS3sG,aACxBu4G,EAAmB,CAACU,EAAYT,kBAClC,MAEI/mH,EAAOF,EAAYK,IAAI,QAAQ,GAC/BoO,GAAe,QAAavO,GAAQ,KAA4B,KAChE8mH,EAAmB,GAIvB,IAAIW,EAAmBtlH,KAAKulH,2BAA6B,CAAC,EACtDC,EAAkBzM,GAAYA,EAASvM,eAAiB,CAAC,EACzDF,GAAiB,QAAUgZ,EAAiBhZ,eAAgBkZ,EAAgBlZ,iBAAmB,KAC/FU,GAAe,QAAUsY,EAAiBtY,aAAcwY,EAAgBxY,cAIxEhpG,GAAa,QAAUshH,EAAiBthH,WAAYwhH,EAAgBxhH,YAGpEyhH,EAAoBnZ,IAAmBkZ,EAAgBlZ,kBAAoBU,MAAmBwY,EAAgBxY,cAAgBhpG,EAClIghH,EAAmBS,EAAoB,EAAC,QAAa5nH,EAAM,CACzDyuG,eAAgBA,EAChBU,aAAcA,EACdhpG,WAAYA,GACXoI,IAAiB,EACtB,KAAO,CACL,IAAI6oG,EAAemP,EAEnB,GAAIe,EAAa,CACf,IAAIn2G,EAAShP,KAAK0lH,gBAAgBT,GAElCD,EAAmBh2G,EAAOqpG,WAC1BsM,EAAmB31G,EAAO21G,gBAC5B,KACK,CACD,IAAIhY,EAAasI,EAAaj3G,IAAI,UAAU,GAC5CgnH,EAAmB,EAAC,QAAarY,EAAY3sG,KAAKulH,0BAA2B,OAC7EZ,EAAmB,EACrB,CACJ,CAMA3kH,KAAK0kH,gBAAgBM,EAAkBL,EACzC,EAEAR,EAAc7jH,UAAUolH,gBAAkB,SAAUC,GAClD,IAoBItN,EApBApD,EAAej1G,KAAKykH,YACpBmB,EAAkB3Q,EAAaj3G,IAAI,aAAa,GAChD6nH,EAAsB5Q,EAAaj3G,IAAI,uBAAuB,GAMlE,GAA2B,MAAvB6nH,EAA6B,CAC/B,IAAIpnC,EAAS,GAEY,IAArBknC,EAAUnqH,QAKZsqH,EAAQrnC,EAEZ,CAGA,IAAIk6B,EAAe,GACfgM,EAAmB,GA0BvB,OAzBA,QAAKgB,GAAW,SAAUI,GACxBA,EAAMlB,gBACN,IAAI9L,EAAWgN,EAAM55G,UAAU05G,GAAuB,GAClDpnC,EAAS,GAEc,MAAvBonC,GAAgC9M,GAKlC+M,EAAQrnC,GAGVk6B,EAAa51G,KAAKg2G,GAClB4L,EAAiB5hH,KAAKgjH,EAAMnB,kBAC9B,IAEIgB,EACFvN,GAAa,QAAmBuN,EAAiBjN,EAAc,CAC7DqN,aAAc/Q,EAAa3+E,iBAEG,MAAvBuvF,IACTxN,EAAa,EAAC,QAAmBM,EAAa,MAGzC,CACLN,WAAYA,EACZsM,iBAAkBA,EAEtB,EAEAR,EAAc7jH,UAAUwkH,SAAW,WACjC,GAAI9kH,KAAKgjG,OACP,OAAO,EAMT,IAFA,IAAIiiB,EAAkBjlH,KAAKklH,6BAElB5pH,EAAI,EAAGA,EAAI2pH,EAAgBzpH,OAAQF,IAAK,CAC/C,IAAI2qH,EAAWhB,EAAgB3pH,GAE/B,GAEA2qH,EAASnB,YAAc9kH,KAAKukH,kBAAkBjpH,KAAO2qH,EAASrB,kBAC5D,OAAO,CAEX,CACF,EAOAT,EAAc7jH,UAAU6L,UAAY,SAAU+5G,GAC5CA,EAAcA,GAAe,EAC7B,IAAI/zG,EAASnS,KAAKqkH,YAAY6B,GAE9B,IAAK/zG,EAAQ,CAEX,IAAI8yG,EAAkBjlH,KAAKklH,6BAE3B,OAAOD,EAAgB,IAAMA,EAAgB,GAAG94G,UAAU+5G,EAC5D,CAEA,OAAO/zG,CACT,EAWAgyG,EAAc7jH,UAAU4Y,mBAAqB,SAAUitG,GAKrD,IAAIziH,EAASyiH,EAAiB7X,kBAC9B,OAAOtuG,KAAKomH,mBAAmB1iH,EAAOM,WAAYmiH,EAAiBh0G,OAAQzO,EAAOqrG,KACpF,EAEAoV,EAAc7jH,UAAU8lH,mBAAqB,SAAUC,EAAWC,EAAcC,GAE9E,IAAIL,EAAc,EACdM,EAAYxmH,KAAKskH,WACjBmC,EAAiBD,EAAUN,GAE1BO,IACHA,EAAiBD,EAAUN,GAAe,CAAC,GAG7C,IAAIQ,EAAcD,EAAeF,GAEjC,IAAKG,EAAa,CAChB,IAAIrB,EAAcrlH,KAAKklH,6BAA6B,GAEhDE,EAASplH,KAAKykH,cAAgBY,EAChCqB,EAAcrB,EAAYe,mBAAmBC,EAAWC,EAAcC,IAEtEG,EAAc,IAAI37G,EAAA,GAElB27G,EAAYh8G,SAAS,IAAI,KAAoB47G,EAAcD,EAAU7qH,QAAS6qH,IAGhFI,EAAeF,GAAiBG,CAClC,CAEA,OAAOA,CACT,EAOAvC,EAAc7jH,UAAU4kH,2BAA6B,WAInD,IAAId,EAAapkH,KAAKykH,YAEtB,GAAIW,EAAShB,GAAa,CACxB,IAAInP,GAAe,QAAgCmP,GACnD,OAAQnP,EAAoB,CAACA,EAAap8F,oBAAnB,EACzB,CACE,OAAO,SAAI,QAAkCurG,IAAa,SAAUnP,GAClE,OAAOA,EAAap8F,kBACtB,GAEJ,EAEAsrG,EAAc7jH,UAAUilH,wBAA0B,WAChD,IACIjZ,EACAU,EACAhpG,EAHAogH,EAAapkH,KAAKykH,YAKtB,GAAIW,EAAShB,GACX9X,EAAiB8X,EAAWpmH,IAAI,kBAAkB,GAClDgvG,EAAeoX,EAAWpmH,IAAI,gBAAgB,GAC9CgG,EAAaogH,EAAWpmH,IAAI,cAAc,QAEvC,IAAKgC,KAAKklH,6BAA6B1pH,OAAQ,CAChD,IAAI6pB,EAAQ++F,EACZ9X,EAAiBjnF,EAAMrnB,IAAI,kBAAkB,GAC7CgvG,EAAe3nF,EAAMrnB,IAAI,gBAAgB,GACzCgG,EAAaqhB,EAAMrnB,IAAI,cAAc,EACvC,CAEF,MAAO,CACLsuG,eAAgBA,EAChBU,aAAcA,EACdhpG,WAAYA,EAEhB,EAEOmgH,CACT,CA1TA,GAoUA,SAASiB,EAAShB,GAEhB,MAA+B,WAAxBA,EAAWx1F,QACpB,CAEA,SAASk3F,EAAQrnC,GACf,MAAM,IAAIkyB,MAAMlyB,EAClB,C,cC3aO,SAASkoC,EAA2BhgH,GACzC,IAUIigH,EACAC,EACA1xD,EACAM,EAbAz4B,EAASr2B,EAAIq2B,OACbnkC,EAAY8N,EAAI9N,UAChBiuH,EAAiBngH,EAAImgH,eACrBjpH,EAAOm/B,EAAOl/B,UACdipH,EAAclpH,EAAK0M,iBAAiB,oBACpCy8G,EAAgBD,EAAYvrH,OAC5B0R,EAAQ8vB,EAAOhR,YAAYnzB,GAC3BouH,GAAa,QAAQ/5G,GACrBmpD,GAAc,QAAoCr5B,EAAQnkC,GAO9D,GAAImuH,EAAgB,GAAKC,IAAeD,EAAe,CACrD,IAAIE,EAAkBC,EAAwBj6G,EAAO8vB,EAAQnkC,EAAWkuH,EAAa1wD,GACrFuwD,EAAcM,EAAgBE,aAC9BP,EAAkBK,EAAgBG,iBAClClyD,EAAY+xD,EAAgBz5D,OAE5BgI,EAAYyxD,EAAgBE,aAAa,EAC3C,MAAO,GAAIJ,EAAe,CACxB,IAAIn9G,EAAUhM,EAAKsG,iBAAiB4iH,EAAY,IAChDtxD,EAAYmxD,GAAc,QAAiB/oH,EAAMhF,EAAWkuH,EAAY,IACxEF,EAAkBh9G,EAAQ1L,IAC5B,MACEs3D,EAAYmxD,EAAcK,EAAa/5G,EAAM,GAAKA,EAIpD,IAAIo6G,GAAsB,QAAgBtqF,GACtCznB,EAAa+xG,GAAuBtqF,EAAOr4B,MAAQ,GACnDoE,EAAWlL,EAAKsP,QAAQtU,GACxB0uH,EAAaT,EAAiBvxG,EAAaxM,EAC/C,OAAO,QAAoB,UAAW,CACpCklD,OAAQ14C,EAGRm4C,SAAUo5D,IAAmBQ,EAC7B7xD,UAAWA,EACXhI,OAAQ,EAAC,QAAoB,YAAa,CACxCyI,WAAY,OACZG,YAAaA,EAGb1xD,KAAM4iH,EAGNxxD,SAAS,QAAKwxD,GACdr6G,MAAO05G,EACPrwD,UAAWswD,KACTvhH,OAAO6vD,GAAa,KAE5B,CAEA,SAASgyD,EAAwBj6G,EAAO8vB,EAAQnkC,EAAWkuH,EAAa3uD,GAEtE,IAAIv6D,EAAOm/B,EAAOl/B,UACd0pH,GAAsB,QAAOt6G,GAAO,SAAUs6G,EAAqBp3G,EAAKhG,GAC1E,IAAIlG,EAAUrG,EAAKsG,iBAAiBiG,GACpC,OAA6Bo9G,GAAuBtjH,IAA+B,IAApBA,EAAQ2B,SAA4C,MAAvB3B,EAAQ+P,WACtG,IAAG,GACCmzG,EAAe,GACfC,EAAmB,GACnB55D,EAAS,GAMb,SAASg6D,EAAYr3G,EAAKlR,GACxB,IAAI2K,EAAUhM,EAAKsG,iBAAiBjF,GAE/B2K,IAAyC,IAA9BA,EAAQ5E,UAAUY,UAI9B2hH,EACF/5D,EAAO1qD,MAAK,QAAoB,YAAa,CAC3CmzD,WAAY,UACZG,YAAa+B,EACbzzD,KAAMkF,EAAQoK,YACd/G,MAAOkD,EACPmmD,UAAW1sD,EAAQ1L,SAGrBipH,EAAarkH,KAAKqN,GAClBi3G,EAAiBtkH,KAAK8G,EAAQ1L,OAElC,CAEA,OA1BA4oH,EAAYvrH,QAAS,QAAKurH,GAAa,SAAU7nH,GAC/CuoH,GAAY,QAAiB5pH,EAAMhF,EAAWqG,GAAMA,EACtD,KACE,QAAKgO,EAAOu6G,GAuBP,CACLL,aAAcA,EACdC,iBAAkBA,EAClB55D,OAAQA,EAEZ,CC1FA,IAAIv+B,EAAQ7J,EAAA,KAEZ,SAASqiG,EAAgB7pH,EAAMhF,GAC7B,OAAOgF,EAAKsP,QAAQtU,IAAcgF,EAAKuI,MAAMvN,EAC/C,CAEO,IAAI8uH,EAAmC,+BAE1CnO,EAEJ,SAAU9/F,GAGR,SAAS8/F,IAUP,IAAI1uG,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAMhE,OADA8K,EAAM88G,wBAA0B,CAAC,EAC1B98G,CACT,CA6dA,OAhfA,QAAU0uG,EAAa9/F,GAqBvB8/F,EAAYl5G,UAAUyqD,KAAO,SAAUnxC,EAAQ2uD,EAAatvE,GAC1D+G,KAAKoR,YAAcpR,KAAKs2B,eACxBt2B,KAAKs+E,UAAW,OAAW,CACzBzhF,MAAOgrH,EACPnqH,MAAOoqH,IAET9nH,KAAKs+E,SAASx+E,QAAU,CACtBulB,MAAOrlB,MAETA,KAAKkxC,qBAAqBt3B,EAAQ3gB,GAClC,IAAI2f,EAAgBsW,EAAMlvB,MAAM4Y,cAAgB,IAAIurG,EAAcnkH,MAClE4Y,EAAcisG,gBACd,IAAIhnH,EAAOmC,KAAK2Z,eAAeC,EAAQ3gB,GACvC8uH,EAASlqH,EAAMmC,MACfA,KAAKs+E,SAASx+E,QAAQjC,KAAOA,EAM7BqxB,EAAMlvB,MAAMgoH,oBAAsBnqH,EAWlCoqH,EAAejoH,MAEfA,KAAKkoH,yBAAyBrqH,EAChC,EAMA27G,EAAYl5G,UAAU4wC,qBAAuB,SAAUt3B,EAAQ3gB,GAC7D,IAAIk1C,GAAa,QAAgBnuC,MAC7BmxC,EAAsBhD,GAAa,QAAgBv0B,GAAU,CAAC,EAK9DuuG,EAAenoH,KAAKmrE,QAEpBxxC,EAAA,WAAwBwuF,KAC1BA,GAAgB,UAGlB,KAAavuG,EAAQ3gB,EAAQo4C,WAAWrzC,IAAIgC,KAAKmrE,UACjD,KAAavxD,EAAQ5Z,KAAKsxC,oBAE1BjsB,EAAA,GAA0BzL,EAAQ,QAAS,CAAC,SAC5C5Z,KAAKooH,kBAAkBxuG,EAAO/b,MAE1BswC,IACF,QAAiBv0B,EAAQu3B,EAAqBhD,EAElD,EAEAqrE,EAAYl5G,UAAUupE,YAAc,SAAUw+C,EAAiBpvH,GAE7DovH,EAAkB,KAAaroH,KAAK4Z,OAAQyuG,GAAiB,GAC7DroH,KAAKooH,kBAAkBC,EAAgBxqH,MACvC,IAAIswC,GAAa,QAAgBnuC,MAE7BmuC,IACF,QAAiBnuC,KAAK4Z,OAAQyuG,EAAiBl6E,GAGjD,IAAIv1B,EAAgBsW,EAAMlvB,MAAM4Y,cAChCA,EAAc0hE,QACd1hE,EAAcisG,gBACd,IAAIhnH,EAAOmC,KAAK2Z,eAAe0uG,EAAiBpvH,GAChD8uH,EAASlqH,EAAMmC,MACfA,KAAKs+E,SAAShE,QACdt6E,KAAKs+E,SAASx+E,QAAQjC,KAAOA,EAC7BqxB,EAAMlvB,MAAMgoH,oBAAsBnqH,EAClCoqH,EAAejoH,MAEfA,KAAKkoH,yBAAyBrqH,EAChC,EAEA27G,EAAYl5G,UAAU8nH,kBAAoB,SAAUvqH,GAIlD,GAAIA,IAAS,KAAoBA,GAG/B,IAFA,IAAI9D,EAAQ,CAAC,QAEJuB,EAAI,EAAGA,EAAIuC,EAAKrC,OAAQF,IAC3BuC,EAAKvC,IAAMuC,EAAKvC,GAAGoK,OACrB2f,EAAA,GAA0BxnB,EAAKvC,GAAI,QAASvB,EAIpD,EAOAy/G,EAAYl5G,UAAUqZ,eAAiB,SAAUC,EAAQ3gB,GAEzD,EAMAugH,EAAYl5G,UAAU8K,WAAa,SAAU6X,GAI3C,IAAIplB,EAAOmC,KAAKu7E,aAChB19E,EAAKuN,WAAW6X,EAAOplB,KACzB,EASA27G,EAAYl5G,UAAUxC,QAAU,SAAUuT,GACxC,IAAI0rE,EAAOurC,EAAetoH,MAE1B,GAAI+8E,EAAM,CACR,IAAIl/E,EAAOk/E,EAAKj9E,QAAQjC,KACxB,OAAmB,MAAZwT,EAAmBxT,EAAOA,EAAK0qH,cAAcl3G,EACtD,CAKE,OAAO6d,EAAMlvB,MAAMnC,IAEvB,EAEA27G,EAAYl5G,UAAUkoH,WAAa,WACjC,IAAIC,EAAWzoH,KAAKlC,UACpB,OAAO2qH,GAAYA,EAASC,iBAAmBD,EAASC,mBAAqB,CAAC,CAC5E7qH,KAAM4qH,GAEV,EAEAjP,EAAYl5G,UAAUvB,QAAU,SAAUlB,GACxC,IAAIk/E,EAAOurC,EAAetoH,MAE1B,GAAI+8E,EAAM,CACR,IAAIj9E,EAAUi9E,EAAKj9E,QAMnBA,EAAQsjG,WAAavlG,EASjBk/E,IAAS/8E,KAAKs+E,WAChBx+E,EAAQjC,KAAOA,EAEnB,CAEAqxB,EAAMlvB,MAAMnC,KAAOA,CACrB,EAEA27G,EAAYl5G,UAAU2Y,UAAY,WAChC,IAAIhW,EAASjD,KAAKhC,IAAI,UAAU,GAEhC,GAAIiF,EACF,OAAO,KAAqBA,EAEhC,EAEAu2G,EAAYl5G,UAAUuY,iBAAmB,WACvC,OAAOqW,EAAMlvB,MAAM4Y,aACrB,EAEA4gG,EAAYl5G,UAAU6L,UAAY,WAChC,OAAOnM,KAAK6Y,mBAAmB1M,WACjC,EAMAqtG,EAAYl5G,UAAUi7E,WAAa,WACjC,OAAOrsD,EAAMlvB,MAAMgoH,mBACrB,EAEAxO,EAAYl5G,UAAU66E,WAAa,WACjC,IAAIrU,EAAU9mE,KAAKhC,IAAI,WACvB,OAAO8oE,GAAW,QACpB,EAEA0yC,EAAYl5G,UAAU86E,gBAAkB,WACtC,MAA6B,WAAtBp7E,KAAKm7E,YACd,EASAq+B,EAAYl5G,UAAUjC,YAAc,WAClC,IAAIJ,EAAW+B,KAAK9B,iBAEpB,OAAOD,GAAYA,EAASI,aAAeJ,EAASI,aACtD,EAiBAm7G,EAAYl5G,UAAUkuD,cAAgB,SAAU31D,EAAWiuH,EAAgBz1G,GACzE,OAAOs1G,EAA2B,CAChC3pF,OAAQh9B,KACRnH,UAAWA,EACXiuH,eAAgBA,GAEpB,EAEAtN,EAAYl5G,UAAUhH,mBAAqB,WACzC,IAAIL,EAAU+G,KAAK/G,QAGnB,GAAIoqD,EAAA,UAAcpqD,IAAWA,EAAQ+2F,KACnC,OAAO,EAGT,IAAI32F,EAAmB2G,KAAKrG,WAAW,aAQvC,OANIN,GACE2G,KAAKlC,UAAUjB,QAAUmD,KAAKrG,WAAW,wBAC3CN,GAAmB,KAIdA,CACX,EAEAmgH,EAAYl5G,UAAUgpE,YAAc,WAClCtpE,KAAKs+E,SAAShE,OAChB,EAEAk/B,EAAYl5G,UAAUo6E,oBAAsB,SAAU/1E,EAAM7J,EAAO6tH,GACjE,IAAI1vH,EAAU+G,KAAK/G,QAEf0iB,EAAQ,uCAAgD3b,KAAM2E,EAAM7J,EAAO6tH,GAM/E,OAJKhtG,IACHA,EAAQ1iB,EAAQyhF,oBAAoB/1E,EAAM7J,EAAO6tH,IAG5ChtG,CACT,EAOA69F,EAAYl5G,UAAUsoH,kBAAoB,SAAUxkH,GAClD,OAAOpE,KAAKu7E,aAAahxE,iBAAiBnG,EAC5C,EAMAo1G,EAAYl5G,UAAUya,eAAiB,WACrC,OAAO/a,KAAKhC,IAAI,cAClB,EAMAw7G,EAAYl5G,UAAU0a,wBAA0B,WAC9C,OAAOhb,KAAKhC,IAAI,uBAClB,EAGAw7G,EAAYl5G,UAAU8b,OAAS,SAAUysG,EAAkBx3G,GACzDrR,KAAK8oH,aAAa9oH,KAAKlC,QAAQuT,GAAWw3G,EAC5C,EAEArP,EAAYl5G,UAAUyoH,SAAW,SAAUF,EAAkBx3G,GAC3D,IAAIw1E,EAAc7mF,KAAK4Z,OAAOitE,YAE9B,GAAKA,EAAL,CAIA,IAAImiC,EAAehpH,KAAK4Z,OAAOovG,aAC3BnrH,EAAOmC,KAAKlC,QAAQuT,GAExB,GAAqB,WAAjB23G,GAA6C,QAAhBniC,EAG/B,OAFA7mF,KAAK4Z,OAAOitE,YAAc,CAAC,OAC3B7mF,KAAK4nH,wBAA0B,CAAC,GAIlC,IAAK,IAAItsH,EAAI,EAAGA,EAAIutH,EAAiBrtH,OAAQF,IAAK,CAChD,IAAIzC,EAAYgwH,EAAiBvtH,GAC7B2tH,EAAWvB,EAAgB7pH,EAAMhF,GACrCguF,EAAYoiC,IAAY,EACxBjpH,KAAK4nH,wBAAwBqB,IAAa,CAC5C,CAhBA,CAiBF,EAEAzP,EAAYl5G,UAAU4oH,aAAe,SAAUL,EAAkBx3G,GAG/D,IAFA,IAAI83G,EAAS,GAEJ7tH,EAAI,EAAGA,EAAIutH,EAAiBrtH,OAAQF,IAC3C6tH,EAAO,GAAKN,EAAiBvtH,GAC7B0E,KAAKopH,WAAWP,EAAiBvtH,GAAI+V,GAAYrR,KAAK+oH,SAASI,EAAQ93G,GAAYrR,KAAKoc,OAAO+sG,EAAQ93G,EAE3G,EAEAmoG,EAAYl5G,UAAU+oH,uBAAyB,WAC7C,GAAgC,QAA5BrpH,KAAK4Z,OAAOitE,YACd,MAAO,GAAGlhF,MAAM6L,KAAKxR,KAAKlC,UAAU8P,cAOtC,IAJA,IAAI07G,EAAyBtpH,KAAK4nH,wBAC9B2B,EAAY,KAAYD,GACxBpsF,EAAc,GAET5hC,EAAI,EAAGA,EAAIiuH,EAAU/tH,OAAQF,IAAK,CACzC,IAAIzC,EAAYywH,EAAuBC,EAAUjuH,IAE7CzC,GAAa,GACfqkC,EAAYn6B,KAAKlK,EAErB,CAEA,OAAOqkC,CACT,EAEAs8E,EAAYl5G,UAAU8oH,WAAa,SAAUvwH,EAAWwY,GACtD,IAAIw1E,EAAc7mF,KAAK4Z,OAAOitE,YAE9B,IAAKA,EACH,OAAO,EAGT,IAAIhpF,EAAOmC,KAAKlC,QAAQuT,GACxB,OAAwB,QAAhBw1E,GAAyBA,EAAY6gC,EAAgB7pH,EAAMhF,OAAiBgF,EAAK8R,aAAa9W,GAAWmF,IAAI,CAAC,SAAU,YAClI,EAEAw7G,EAAYl5G,UAAUkpH,6BAA+B,WACnD,GAAIxpH,KAAK2nH,GACP,OAAO,EAGT,IAAI8B,EAAyBzpH,KAAK4Z,OAAO8vG,oBAEzC,QAAKD,KAI0B,IAA3BA,GAKGA,GAA0BA,EAAuBn7C,QAC1D,EAEAkrC,EAAYl5G,UAAUwoH,aAAe,SAAUjrH,EAAMgrH,GACnD,IAAIp9G,EAAI6jG,EAEJ11F,EAAS5Z,KAAK4Z,OACdovG,EAAepvG,EAAOovG,aACtB/6G,EAAM46G,EAAiBrtH,OAE3B,GAAKwtH,GAAiB/6G,EAItB,GAAqB,WAAjB+6G,EACFpvG,EAAOitE,YAAc,WAChB,GAAqB,aAAjBmiC,EAA6B,CACjC,KAAgBpvG,EAAOitE,eAC1BjtE,EAAOitE,YAAc,CAAC,GAKxB,IAFA,IAAIA,EAAcjtE,EAAOitE,YAEhBvrF,EAAI,EAAGA,EAAI2S,EAAK3S,IAAK,CAC5B,IAAIzC,EAAYgwH,EAAiBvtH,GAE7B2tH,EAAWvB,EAAgB7pH,EAAMhF,GACrCguF,EAAYoiC,IAAY,EACxBjpH,KAAK4nH,wBAAwBqB,GAAYprH,EAAKwP,YAAYxU,EAC5D,CACF,MAAO,GAAqB,WAAjBmwH,IAA8C,IAAjBA,EAAuB,CAC7D,IAAIW,EAAgBd,EAAiB56G,EAAM,GACvCg7G,EAAWvB,EAAgB7pH,EAAM8rH,GACrC/vG,EAAOitE,aAAep7E,EAAK,CAAC,EAAGA,EAAGw9G,IAAY,EAAMx9G,GACpDzL,KAAK4nH,yBAA2BtY,EAAK,CAAC,EAAGA,EAAG2Z,GAAYprH,EAAKwP,YAAYs8G,GAAgBra,EAC3F,CACF,EAEAkK,EAAYl5G,UAAU4nH,yBAA2B,SAAUrqH,GAGzD,IAAImC,KAAK4Z,OAAOitE,YAAhB,CAIA,IAAI3pD,EAAc,GAEdr/B,EAAKmK,eACPnK,EAAKuH,MAAK,SAAUgF,GAClB,IAAIq6B,EAAU5mC,EAAK6R,eAAetF,GAE9Bq6B,GAAWA,EAAQqiD,UACrB5pD,EAAYn6B,KAAKqH,EAErB,IAGE8yB,EAAY1hC,OAAS,GACvBwE,KAAK8oH,aAAajrH,EAAMq/B,EAf1B,CAiBF,EAMAs8E,EAAYoQ,cAAgB,SAAUlH,GACpC,OAAO/oF,EAAA,gBAA6B+oF,EACtC,EAEAlJ,EAAYxJ,gBAAkB,WAC5B,IAAI/vC,EAAQu5C,EAAYl5G,UACxB2/D,EAAM9hE,KAAO,kBACb8hE,EAAM7uD,YAAc,EACpB6uD,EAAM6a,mBAAoB,EAC1B7a,EAAM2lB,iBAAkB,EACxB3lB,EAAMgmB,cAAgB,SAEtBhmB,EAAMia,sBAAwB,YAC9Bja,EAAMlI,eAAiB,MACzB,CAV8B,GAYvByhD,CACT,CAlfA,CAkfE7/E,EAAA,GAWF,SAASsuF,EAAetqH,GAGtB,IAAIgH,EAAOhH,EAAYgH,KAElB0gB,EAAA,GAA0B1nB,KAC7BA,EAAYgH,KAAOklH,EAAkBlsH,IAAgBgH,EAEzD,CAEA,SAASklH,EAAkBlsH,GACzB,IAAIE,EAAOF,EAAY49E,aACnBpnE,EAAWtW,EAAK0M,iBAAiB,cACjCu/G,EAAU,GAKd,OAJA,KAAY31G,GAAU,SAAUgpB,GAC9B,IAAItzB,EAAUhM,EAAKsG,iBAAiBg5B,GACpCtzB,EAAQoK,aAAe61G,EAAQ/mH,KAAK8G,EAAQoK,YAC9C,IACO61G,EAAQpqG,KAAK,IACtB,CAEA,SAASmoG,EAAc/nH,GACrB,OAAOA,EAAQulB,MAAMk2D,aAAa1+E,OACpC,CAEA,SAASirH,EAAchoH,GACrB,IAAInC,EAAcmC,EAAQulB,MAE1B,OADA1nB,EAAYoB,QAAQpB,EAAY49E,aAAa9pE,gBACtCs4G,CACT,CAEA,SAASA,EAAiBC,EAAOlqH,GAE3BA,EAAQsjG,YAAc4mB,EAAMr+G,IAAM7L,EAAQsjG,WAAWvmG,SACvDiD,EAAQulB,MAAMk2D,aAAa9pE,aAAa3R,EAAQsjG,WAEpD,CAGA,SAAS2kB,EAASlqH,EAAMF,GACtB,KAAY,KAAmBE,EAAKqK,kBAAmBrK,EAAKsK,qBAAqB,SAAUwJ,GACzF9T,EAAK6T,WAAWC,EAAY,KAAas4G,EAActsH,GACzD,GACF,CAEA,SAASssH,EAAatsH,EAAausH,GACjC,IAAIntC,EAAOurC,EAAe3qH,GAO1B,OALIo/E,GAEFA,EAAK0nB,cAAcylB,GAAWlqH,MAAMnD,SAG/BqtH,CACT,CAEA,SAAS5B,EAAe3qH,GACtB,IAAIqgF,GAAargF,EAAY1E,SAAW,CAAC,GAAG+kF,UACxCd,EAAWc,GAAaA,EAAUN,YAAY//E,EAAYwuD,KAE9D,GAAI+wB,EAAU,CAGZ,IAAIH,EAAOG,EAASmmB,YAEpB,GAAItmB,EAAM,CACR,IAAI8C,EAAe9C,EAAK8C,aAEpBA,IACF9C,EAAO8C,EAAa7hF,IAAIL,EAAYwuD,KAExC,CAEA,OAAO4wB,CACT,CACF,CApFA,KAAay8B,EAAa,KAC1B,KAAaA,EAAa,MAC1B,QAAYA,EAAa7/E,EAAA,GAoFzB,O,gHC5lBIwwF,EAAsB,cAEtBC,EAEJ,WACE,SAASA,IAAmB,CA+H5B,OAzHAA,EAAgB9pH,UAAUqjC,cAAgB,SAAU9qC,EAAWwY,GAC7D,IAAIxT,EAAOmC,KAAKlC,QAAQuT,GACpB+0E,EAAWpmF,KAAKgsB,YAAYnzB,EAAWwY,GACvCm3F,EAAe3qG,EAAKwP,YAAYxU,GAChC8L,EAAO9G,EAAKsP,QAAQtU,GACpBwgB,EAAUxb,EAAK6R,eAAe7W,GAC9BiD,EAAQ+B,EAAKwS,cAAcxX,EAAW,SACtC8iB,EAAQ7f,GAASA,EAAM+B,EAAKwS,cAAcxX,EAAW,aAAe,QACpE+iB,EAAc9f,GAASA,EAAMowB,OAC7B0C,EAAW5uB,KAAK4uB,SAChBw2F,EAAwB,WAAbx2F,EACX9oB,EAAajI,EAAKiI,YAAcjI,EAAKiI,WAAW9H,MACpD,MAAO,CACLqqB,cAAeuG,EACfy7F,iBAAkBrqH,KAAKmrE,QACvB70C,eAAgBt2B,KAAKs2B,eACrB74B,WAAY2nH,EAAWplH,KAAKmrE,QAAU,KACtC/5D,YAAapR,KAAKoR,YAClBq9D,SAAU22C,EAAWplH,KAAK4M,GAAK,KAC/B2I,WAAY6vG,EAAWplH,KAAK2E,KAAO,KACnCA,KAAMA,EACN9L,UAAW2vG,EACX3qG,KAAMwb,EACNhI,SAAUA,EACVnE,MAAOk5E,EACPzqE,MAAOA,EACPC,YAAaA,EACbrT,eAAgBzC,EAAaA,EAAWzC,eAAiB,KACzDJ,OAAQ6C,EAAaA,EAAW7C,OAAS,KAEzCqnH,MAAO,CAAC,aAAc,OAAQ,SAElC,EAaAF,EAAgB9pH,UAAU85D,kBAAoB,SAAUvhE,EAAWu5B,EAAQ/gB,EAAUqpG,EAAerhF,EAAWkxF,GAC7Gn4F,EAASA,GAAU,SACnB,IAAIv0B,EAAOmC,KAAKlC,QAAQuT,GACpB4R,EAASjjB,KAAK2jC,cAAc9qC,EAAWwY,GAU3C,GARIk5G,IACFtnG,EAAO/V,MAAQq9G,EAAa3qG,mBAGT,MAAjB86F,GAAyB,KAAez3F,EAAO/V,SACjD+V,EAAO/V,MAAQ+V,EAAO/V,MAAMwtG,KAGzBrhF,EAAW,CACd,IAAIpU,EAAYpnB,EAAK8R,aAAa9W,GAElCwgC,EAAYpU,EAAUjnB,IAAe,WAAXo0B,EAAsB,CAAC,QAAS,aAAe,CAACA,EAAQ,QAAS,aAC7F,CAEA,GAAI,KAAkBiH,GAGpB,OAFApW,EAAOmP,OAASA,EAChBnP,EAAOunG,eAAiB9P,EACjBrhF,EAAUpW,GACZ,GAAI,KAAgBoW,GAAY,CACrC,IAAIoxF,GAAM,QAAUpxF,EAAWpW,GAG/B,OAAOwnG,EAAI7mF,QAAQumF,GAAqB,SAAUO,EAAQC,GACxD,IAAI18G,EAAM08G,EAAOnvH,OACbovH,EAAWD,EAEY,MAAvBC,EAASC,OAAO,IAA2C,MAA7BD,EAASC,OAAO58G,EAAM,KACtD28G,GAAYA,EAASjlH,MAAM,EAAGsI,EAAM,IAStC,IAAImC,GAAM,QAAiBvS,EAAMhF,EAAW+xH,GAE5C,GAAIL,GAAgB,KAAeA,EAAa3qG,mBAAoB,CAClE,IAAI5a,EAAWnH,EAAK6G,kBAAkBkmH,GAElC5lH,GAAY,IACdoL,EAAMm6G,EAAa3qG,kBAAkB5a,GAEzC,CAEA,OAAc,MAAPoL,EAAcA,EAAM,GAAK,EAClC,GACF,CACF,EAMAg6G,EAAgB9pH,UAAU0rB,YAAc,SAAU5hB,EAAKiH,GACrD,OAAO,QAAiBrR,KAAKlC,QAAQuT,GAAWjH,EAClD,EASAggH,EAAgB9pH,UAAUkuD,cAAgB,SAAU31D,EAAWiuH,EAAgBz1G,GAG/E,EAEO+4G,CACT,CAjIA,GAmJO,SAASU,EAA6B97G,GAC3C,IAAIwgD,EAEAu7D,EAqBJ,OAnBI,KAAgB/7G,GACdA,EAAO7Q,OACT4sH,EAAiB/7G,GAcnBwgD,EAAaxgD,EAGR,CACLuzB,KAAMitB,EAENf,KAAMs8D,EAEV,C,4FCvLWC,EAAqB,CAAC,CAAC,OAAQ,SAAU,CAAC,SAAU,eAAgB,CAAC,YAAa,eAAgB,CAAC,WAAY,CAAC,cAAe,CAAC,iBAAkB,CAAC,iBAAkB,CAAC,eAAgB,CAAC,WAAY,cAAe,CAAC,iBAAkB,oBAAqB,CAAC,UAAW,aAAc,CAAC,WAAY,cAAe,CAAC,aAAc,qBAGtUjmG,GAAe,OAAgBimG,GAE/BC,EAEJ,WACE,SAASA,IAAkB,CAM3B,OAJAA,EAAe3qH,UAAUykB,aAAe,SAAUq+F,EAAUC,GAC1D,OAAOt+F,EAAa/kB,KAAMojH,EAAUC,EACtC,EAEO4H,CACT,CARA,E,4FCPWC,EAAqB,CAAC,CAAC,YAAa,SAAU,CAAC,SAAU,SAAU,CAAC,WAAY,CAAC,cAAe,CAAC,iBAAkB,CAAC,iBAAkB,CAAC,eAAgB,CAAC,WAAY,QAAS,CAAC,iBAAkB,cAAe,CAAC,UAAW,OAAQ,CAAC,WAAY,QAAS,CAAC,eAGjQ/oF,GAAe,OAAgB+oF,GAE/BC,EAEJ,WACE,SAASA,IAAkB,CAM3B,OAJAA,EAAe7qH,UAAU6hC,aAAe,SAAUihF,GAChD,OAAOjhF,EAAaniC,KAAMojH,EAC5B,EAEO+H,CACT,CARA,E,qECLe,SAAS9xC,EAAgB+xC,EAAYxH,GAElD,IAAK,IAAItoH,EAAI,EAAGA,EAAI8vH,EAAW5vH,OAAQF,IAChC8vH,EAAW9vH,GAAG,KACjB8vH,EAAW9vH,GAAG,GAAK8vH,EAAW9vH,GAAG,IAKrC,OADAsoH,EAAeA,IAAgB,EACxB,SAAUv+F,EAAO+9F,EAAUC,GAGhC,IAFA,IAAIvnH,EAAQ,CAAC,EAEJR,EAAI,EAAGA,EAAI8vH,EAAW5vH,OAAQF,IAAK,CAC1C,IAAI8W,EAAWg5G,EAAW9vH,GAAG,GAE7B,KAAI8nH,GAAY,KAAeA,EAAUhxG,IAAa,GAAKixG,GAAY,KAAeA,EAAUjxG,GAAY,GAA5G,CAIA,IAAIhC,EAAMiV,EAAM1rB,WAAWyY,EAAUwxG,GAE1B,MAAPxzG,IACFtU,EAAMsvH,EAAW9vH,GAAG,IAAM8U,EAL5B,CAOF,CAGA,OAAOtU,CACT,CACF,C,qEC/BIuvH,GAAa,UAGbC,IAFa,UAIjB,WACE,SAASA,IAAgB,CAYzB,OAVAA,EAAahrH,UAAUo6E,oBAAsB,SAAU/1E,EAAM7J,EAAOywH,GAClE,IAAIC,GAAiB,QAAiBxrH,KAAKhC,IAAI,SAAS,IACpDytH,EAAiBzrH,KAAKhC,IAAI,cAAc,GAC5C,OAAO0tH,EAAe1rH,KAAMqrH,EAAYG,EAAgBC,EAAgB9mH,EAAM7J,EAAOywH,EACvF,EAEAD,EAAahrH,UAAUq1F,kBAAoB,WACzCg2B,EAAa3rH,KAAMqrH,EACrB,EAEOC,CACT,CAdA,IAqBA,SAASM,EAAkBC,EAAUlD,GAGnC,IAFA,IAAImD,EAAaD,EAASrwH,OAEjBF,EAAI,EAAGA,EAAIwwH,EAAYxwH,IAC9B,GAAIuwH,EAASvwH,GAAGE,OAASmtH,EACvB,OAAOkD,EAASvwH,GAIpB,OAAOuwH,EAASC,EAAa,EAC/B,CASA,SAASJ,EAAeK,EAAM78F,EAAOs8F,EAAgBC,EAAgB9mH,EAAM7J,EAAOywH,GAChFzwH,EAAQA,GAASixH,EACjB,IAAIC,EAAc98F,EAAMp0B,GACpBmxH,EAAaD,EAAYC,YAAc,EACvCC,EAAiBF,EAAYE,eAAiBF,EAAYE,gBAAkB,CAAC,EAEjF,GAAIA,EAAenmH,eAAepB,GAChC,OAAOunH,EAAevnH,GAGxB,IAAIwnH,EAAwB,MAAdZ,GAAuBE,EAAkCG,EAAkBH,EAAgBF,GAAnDC,EAItD,GAFAW,EAAUA,GAAWX,EAEhBW,GAAYA,EAAQ3wH,OAAzB,CAIA,IAAI4wH,EAAoBD,EAAQF,GAOhC,OALItnH,IACFunH,EAAevnH,GAAQynH,GAGzBJ,EAAYC,YAAcA,EAAa,GAAKE,EAAQ3wH,OAC7C4wH,CATP,CAUF,CAEA,SAAST,EAAaI,EAAM78F,GAC1BA,EAAM68F,GAAME,WAAa,EACzB/8F,EAAM68F,GAAMG,eAAiB,CAAC,CAChC,C,qEC5EO,SAASr+F,EAAQC,GACtBA,EAAUgsF,gBAAgB,MAAO,IACnC,C,0ECEIuS,EAAc,KAEdC,EAEJ,SAAU5yG,GAGR,SAAS4yG,IACP,IAAIxhH,EAAmB,OAAX4O,GAAmBA,EAAOzK,MAAMjP,KAAMkP,YAAclP,KAMhE,OAJA8K,EAAM3M,KAAO,WAEb2M,EAAMyvD,UAAY,EAClBzvD,EAAMyhH,mBAAqB,EACpBzhH,CACT,CAwPA,OAlQA,QAAUwhH,EAAe5yG,GAYzB4yG,EAAchsH,UAAUy7B,MAAQ,SAAU3rB,GACxC,OAAOA,CACT,EAEAk8G,EAAchsH,UAAUgzC,QAAU,SAAUljC,GAC1C,OAAO,KAAeA,EAAKpQ,KAAKq4C,QAClC,EAEAi0E,EAAchsH,UAAUm4C,UAAY,SAAUroC,GAC5C,OAAO,KAAiBA,EAAKpQ,KAAKq4C,QACpC,EAEAi0E,EAAchsH,UAAUknB,MAAQ,SAAUpX,GACxC,OAAO,KAAaA,EAAKpQ,KAAKq4C,QAChC,EAEAi0E,EAAchsH,UAAUk4C,UAAY,SAAU9sC,EAAOC,GACnD,IAAI6gH,EAAaxsH,KAAKq4C,QAEjBv7C,MAAM4O,KACT8gH,EAAW,GAAK9Z,WAAWhnG,IAGxB5O,MAAM6O,KACT6gH,EAAW,GAAK9Z,WAAW/mG,GAE/B,EAEA2gH,EAAchsH,UAAU89C,YAAc,SAAUquE,GAC9C,IAAIjuH,EAASwB,KAAKq4C,QAClBo0E,EAAM,GAAKjuH,EAAO,KAAOA,EAAO,GAAKiuH,EAAM,IAC3CA,EAAM,GAAKjuH,EAAO,KAAOA,EAAO,GAAKiuH,EAAM,IAE3CzsH,KAAKw4C,UAAUh6C,EAAO,GAAIA,EAAO,GACnC,EAEA8tH,EAAchsH,UAAUq6C,YAAc,WACpC,OAAO36C,KAAKu6D,SACd,EAEA+xD,EAAchsH,UAAUi7C,YAAc,SAAUxL,GAC9C/vC,KAAKu6D,UAAYxqB,EAGjB/vC,KAAKggE,YAAchgE,KAAKq4C,QAAQ1yC,QAChC3F,KAAKusH,mBAAqB,KAA4Bx8E,EACxD,EAMAu8E,EAAchsH,UAAU20C,SAAW,SAAUsqB,GAC3C,IAAIxvB,EAAW/vC,KAAKu6D,UAChB/7D,EAASwB,KAAKq4C,QACdq0E,EAAiB1sH,KAAKggE,YACtB2sD,EAAoB3sH,KAAKusH,mBACzBv3E,EAAQ,GAEZ,IAAKjF,EACH,OAAOiF,EAIT,IAAImoB,EAAY,IAEZ3+D,EAAO,GAAKkuH,EAAe,KACzBntD,EACFvqB,EAAMjyC,KAAK,CACTmK,MAAOm/G,EAAYK,EAAe,GAAK38E,EAAU48E,KAGnD33E,EAAMjyC,KAAK,CACTmK,MAAO1O,EAAO,MAKpB,IAAI02C,EAAOw3E,EAAe,GAE1B,MAAOx3E,GAAQw3E,EAAe,GAAI,CAOhC,GANA13E,EAAMjyC,KAAK,CACTmK,MAAOgoC,IAGTA,EAAOm3E,EAAYn3E,EAAOnF,EAAU48E,GAEhCz3E,IAASF,EAAMA,EAAMx5C,OAAS,GAAG0R,MAGnC,MAGF,GAAI8nC,EAAMx5C,OAAS2hE,EACjB,MAAO,EAEX,CAIA,IAAIyvD,EAAe53E,EAAMx5C,OAASw5C,EAAMA,EAAMx5C,OAAS,GAAG0R,MAAQw/G,EAAe,GAcjF,OAZIluH,EAAO,GAAKouH,IACVrtD,EACFvqB,EAAMjyC,KAAK,CACTmK,MAAOm/G,EAAYO,EAAe78E,EAAU48E,KAG9C33E,EAAMjyC,KAAK,CACTmK,MAAO1O,EAAO,MAKbw2C,CACT,EAEAs3E,EAAchsH,UAAU04C,cAAgB,SAAUhJ,GAKhD,IAJA,IAAIgF,EAAQh1C,KAAKi1C,UAAS,GACtB8D,EAAa,GACbv6C,EAASwB,KAAKvB,YAETnD,EAAI,EAAGA,EAAI05C,EAAMx5C,OAAQF,IAAK,CACrC,IAAIqvC,EAAWqK,EAAM15C,GACjBuvC,EAAWmK,EAAM15C,EAAI,GACrBuB,EAAQ,EACRo8C,EAAkB,GAClBlJ,EAAWpF,EAASz9B,MAAQ29B,EAAS39B,MACrC2/G,EAAgB98E,EAAWC,EAE/B,MAAOnzC,EAAQmzC,EAAc,EAAG,CAC9B,IAAIC,EAAYo8E,EAAYxhF,EAAS39B,OAASrQ,EAAQ,GAAKgwH,GAEvD58E,EAAYzxC,EAAO,IAAMyxC,EAAYzxC,EAAO,IAC9Cy6C,EAAgBl2C,KAAKktC,GAGvBpzC,GACF,CAEAk8C,EAAWh2C,KAAKk2C,EAClB,CAEA,OAAOF,CACT,EAOAuzE,EAAchsH,UAAU+iC,SAAW,SAAUxlC,EAAM8I,GACjD,GAAY,MAAR9I,EACF,MAAO,GAGT,IAAIy7B,EAAY3yB,GAAOA,EAAI2yB,UAEV,MAAbA,EACFA,EAAY,KAAwBz7B,EAAKqP,QAAU,EAC5B,SAAdosB,IAETA,EAAYt5B,KAAKusH,oBAKnB,IAAIO,EAAUT,EAAYxuH,EAAKqP,MAAOosB,GAAW,GACjD,OAAO,KAAqBwzF,EAC9B,EAMAR,EAAchsH,UAAUq5D,cAAgB,SAAU3pB,EAAagrB,EAAaC,GAC1EjrB,EAAcA,GAAe,EAC7B,IAAIxxC,EAASwB,KAAKq4C,QACdxf,EAAOr6B,EAAO,GAAKA,EAAO,GAE9B,GAAKtB,SAAS27B,GAAd,CAMIA,EAAO,IACTA,GAAQA,EACRr6B,EAAOujC,WAGT,IAAI/yB,EAAS,KAA8BxQ,EAAQwxC,EAAagrB,EAAaC,GAC7Ej7D,KAAKusH,mBAAqBv9G,EAAO29G,kBACjC3sH,KAAKu6D,UAAYvrD,EAAO+gC,SACxB/vC,KAAKggE,YAAchxD,EAAO09G,cAZ1B,CAaF,EAEAJ,EAAchsH,UAAU66C,eAAiB,SAAUx0C,GACjD,IAAInI,EAASwB,KAAKq4C,QAElB,GAAI75C,EAAO,KAAOA,EAAO,GACvB,GAAkB,IAAdA,EAAO,GAAU,CAGnB,IAAIuuH,EAAazvH,KAAKuB,IAAIL,EAAO,IAM5BmI,EAAIs0C,SACPz8C,EAAO,IAAMuuH,EAAa,GAG1BvuH,EAAO,IAAMuuH,EAAa,CAE9B,MACEvuH,EAAO,GAAK,EAIhB,IAAIq6B,EAAOr6B,EAAO,GAAKA,EAAO,GAEzBtB,SAAS27B,KACZr6B,EAAO,GAAK,EACZA,EAAO,GAAK,GAGdwB,KAAK25D,cAAchzD,EAAIqpC,YAAarpC,EAAIq0D,YAAar0D,EAAIs0D,aAEzD,IAAIlrB,EAAW/vC,KAAKu6D,UAEf5zD,EAAIo0C,SACPv8C,EAAO,GAAK6tH,EAAY/uH,KAAK0f,MAAMxe,EAAO,GAAKuxC,GAAYA,IAGxDppC,EAAIs0C,SACPz8C,EAAO,GAAK6tH,EAAY/uH,KAAKu6C,KAAKr5C,EAAO,GAAKuxC,GAAYA,GAE9D,EAEAu8E,EAAchsH,UAAUk7C,cAAgB,SAAUr+C,EAAKH,GACrDgD,KAAKggE,YAAc,CAAC7iE,EAAKH,EAC3B,EAEAsvH,EAAcnuH,KAAO,WACdmuH,CACT,CApQA,CAoQE,KAEF,kBAAoBA,GACpB,Q,oCC9QI1yD,EAEJ,WACE,SAASA,EAAMnB,GACbz4D,KAAKgtH,SAAWv0D,GAAW,CAAC,EAC5Bz4D,KAAKq4C,QAAU,CAACp7C,KAAWA,IAC7B,CA6EA,OA3EA28D,EAAMt5D,UAAUo4D,WAAa,SAAU/zD,GACrC,OAAO3E,KAAKgtH,SAASroH,EACvB,EAMAi1D,EAAMt5D,UAAU89C,YAAc,SAAUquE,GACtC,IAAIjuH,EAASwB,KAAKq4C,QAClBo0E,EAAM,GAAKjuH,EAAO,KAAOA,EAAO,GAAKiuH,EAAM,IAC3CA,EAAM,GAAKjuH,EAAO,KAAOA,EAAO,GAAKiuH,EAAM,GAE7C,EAMA7yD,EAAMt5D,UAAU+9C,oBAAsB,SAAUxgD,EAAMqB,GACpDc,KAAKo+C,YAAYvgD,EAAKgP,qBAAqB3N,GAC7C,EAQA06D,EAAMt5D,UAAU7B,UAAY,WAC1B,OAAOuB,KAAKq4C,QAAQ1yC,OACtB,EAMAi0D,EAAMt5D,UAAUk4C,UAAY,SAAU9sC,EAAOC,GAC3C,IAAI6gH,EAAaxsH,KAAKq4C,QAEjBv7C,MAAM4O,KACT8gH,EAAW,GAAK9gH,GAGb5O,MAAM6O,KACT6gH,EAAW,GAAK7gH,EAEpB,EAMAiuD,EAAMt5D,UAAUo5D,gBAAkB,SAAUxsD,GAC1C,OAAOlN,KAAKq4C,QAAQ,IAAMnrC,GAASlN,KAAKq4C,QAAQ,IAAMnrC,CACxD,EAOA0sD,EAAMt5D,UAAUi8B,QAAU,WACxB,OAAOv8B,KAAKitH,QACd,EAOArzD,EAAMt5D,UAAUqiE,SAAW,SAAUpmC,GACnCv8B,KAAKitH,SAAW1wF,CAClB,EAEOq9B,CACT,CAlFA,GAoFA,KAAgCA,GAChC,Q,sNCnFO,SAASszD,EAAqB1lG,GACnC,MAAsB,aAAfA,EAAMrpB,MAAsC,QAAfqpB,EAAMrpB,IAC5C,CAOO,SAASgvH,EAAuB3uH,EAAQwxC,EAAagrB,EAAaC,GACvE,IAAIjsD,EAAS,CAAC,EACV6pB,EAAOr6B,EAAO,GAAKA,EAAO,GAC1BuxC,EAAW/gC,EAAO+gC,UAAW,QAAKlX,EAAOmX,GAAa,GAEvC,MAAfgrB,GAAuBjrB,EAAWirB,IACpCjrB,EAAW/gC,EAAO+gC,SAAWirB,GAGZ,MAAfC,GAAuBlrB,EAAWkrB,IACpClrB,EAAW/gC,EAAO+gC,SAAWkrB,GAI/B,IAAI3hC,EAAYtqB,EAAO29G,kBAAoBS,EAAqBr9E,GAE5D28E,EAAiB19G,EAAO09G,eAAiB,EAAC,QAAMpvH,KAAKu6C,KAAKr5C,EAAO,GAAKuxC,GAAYA,EAAUzW,IAAY,QAAMh8B,KAAK0f,MAAMxe,EAAO,GAAKuxC,GAAYA,EAAUzW,IAE/J,OADA+zF,EAAUX,EAAgBluH,GACnBwQ,CACT,CACO,SAASs+G,EAAiBv9E,GAC/B,IAAIw9E,EAAQjwH,KAAK8hE,IAAI,IAAI,QAAiBrvB,IAEtCy9E,EAAIz9E,EAAWw9E,EAanB,OAXKC,EAEY,IAANA,EACTA,EAAI,EACW,IAANA,EACTA,EAAI,EAGJA,GAAK,EAPLA,EAAI,GAUC,QAAMA,EAAID,EACnB,CAKO,SAASH,EAAqBr9E,GAEnC,OAAO,QAAaA,GAAY,CAClC,CAEA,SAASgE,EAAM24E,EAAgBtiH,EAAK5L,GAClCkuH,EAAetiH,GAAO9M,KAAKN,IAAIM,KAAKH,IAAIuvH,EAAetiH,GAAM5L,EAAO,IAAKA,EAAO,GAClF,CAGO,SAAS6uH,EAAUX,EAAgBluH,IACvCtB,SAASwvH,EAAe,MAAQA,EAAe,GAAKluH,EAAO,KAC3DtB,SAASwvH,EAAe,MAAQA,EAAe,GAAKluH,EAAO,IAC5Du1C,EAAM24E,EAAgB,EAAGluH,GACzBu1C,EAAM24E,EAAgB,EAAGluH,GAErBkuH,EAAe,GAAKA,EAAe,KACrCA,EAAe,GAAKA,EAAe,GAEvC,CACO,SAASp5E,EAAQljC,EAAK5R,GAC3B,OAAO4R,GAAO5R,EAAO,IAAM4R,GAAO5R,EAAO,EAC3C,CACO,SAASi6C,EAAUroC,EAAK5R,GAC7B,OAAIA,EAAO,KAAOA,EAAO,GAChB,IAGD4R,EAAM5R,EAAO,KAAOA,EAAO,GAAKA,EAAO,GACjD,CACO,SAASgpB,EAAMpX,EAAK5R,GACzB,OAAO4R,GAAO5R,EAAO,GAAKA,EAAO,IAAMA,EAAO,EAChD,C,uMCvFIivH,EAAiB,IACjBC,EAAe,iCACfC,EAAoB,2BAMjB,SAASC,EAAevlG,GAC7B,IAAI0xB,EAAM,CACRyqC,KAAM,GACNC,IAAK,IAGP,GAAIp8D,EAAe,CACjB,IAAIwlG,EAAUxlG,EAAc0tD,MAAM03C,GAClC1zE,EAAIyqC,KAAOqpC,EAAQ,IAAM,GACzB9zE,EAAI0qC,IAAMopC,EAAQ,IAAM,EAC1B,CAEA,OAAO9zE,CACT,CAKA,SAAS+zE,EAAezlG,GACtB,KAAc,qCAAqCg1E,KAAKh1E,GAAgB,kBAAoBA,EAAgB,YAC9G,CAEO,SAAS0lG,EAAgBrL,GAC9B,SAAUA,IAAOA,EAAIiL,GACvB,CAYO,SAASK,EAAkBC,EAASC,GACzCD,EAAQE,aAAeF,EAEvBA,EAAQG,OAAS,SAAUnuD,GASzB,IACIouD,EADA1L,EAAa3iH,KAoCjB,OAjCIsuH,EAAU3L,GACZ0L,EAEA,SAAU30G,GAGR,SAAS0hF,IACP,OAAO1hF,EAAOzK,MAAMjP,KAAMkP,YAAclP,IAC1C,CAEA,OANA,QAAUo7F,EAAS1hF,GAMZ0hF,CACT,CARA,CAQEunB,IASF0L,EAAgB,YACbpuD,EAAMkuD,cAAgBxL,GAAY1zG,MAAMjP,KAAMkP,UACjD,EAEA,KAAgBm/G,EAAeruH,OAGjC,KAAcquH,EAAc/tH,UAAW2/D,GACvCouD,EAAcV,IAAqB,EACnCU,EAAcD,OAASpuH,KAAKouH,OAC5BC,EAAcE,UAAYA,EAC1BF,EAAcG,WAAaA,EAC3BH,EAAc1L,WAAaA,EACpB0L,CACT,CACF,CAEA,SAASC,EAAU1wB,GACjB,OAAO,KAAkBA,IAAO,WAAWP,KAAKoxB,SAASnuH,UAAUilD,SAAS/zC,KAAKosF,GACnF,CAiBO,SAAS8wB,EAAYC,EAAQC,GAClCD,EAAOP,OAASQ,EAAUR,MAC5B,CAEA,IAAIS,EAAYvxH,KAAKC,MAAsB,GAAhBD,KAAK6xD,UAezB,SAAS2/D,EAAiB58G,GAC/B,IAAI68G,EAAY,CAAC,aAAcF,KAAanvG,KAAK,KACjDxN,EAAO5R,UAAUyuH,IAAa,EAM9B78G,EAAO88G,WAAa,SAAUtkG,GAC5B,SAAUA,IAAOA,EAAIqkG,GACvB,CACF,CAOA,SAASR,EAAUzuH,EAAS6R,GAG1B,IAFA,IAAIi8E,EAAO,GAEFC,EAAK,EAAGA,EAAK3+E,UAAU1T,OAAQqyF,IACtCD,EAAKC,EAAK,GAAK3+E,UAAU2+E,GAG3B,OAAO7tF,KAAK2iH,WAAWriH,UAAUqR,GAAY1C,MAAMnP,EAAS8tF,EAC9D,CAEA,SAAS4gC,EAAW1uH,EAAS6R,EAAYi8E,GACvC,OAAO5tF,KAAK2iH,WAAWriH,UAAUqR,GAAY1C,MAAMnP,EAAS8tF,EAC9D,CAaO,SAASqhC,EAAsB/8G,GAQpC,IAAIkgF,EAAU,CAAC,EA2Ff,SAAS88B,EAAcC,GACrB,IAAIjoE,EAAYkrC,EAAQ+8B,EAAkB3qC,MAO1C,OALKt9B,GAAcA,EAAUwmE,KAC3BxmE,EAAYkrC,EAAQ+8B,EAAkB3qC,MAAQ,CAAC,EAC/Ct9B,EAAUwmE,IAAgB,GAGrBxmE,CACT,CAlGAh1C,EAAO03G,cAAgB,SAAUlH,GAM/B,IAAI0M,EAAoB1M,EAAIvkH,MAAQukH,EAAIpiH,UAAUnC,KAElD,GAAIixH,EAAmB,CACrBtB,EAAesB,GAEf1M,EAAIpiH,UAAUnC,KAAOixH,EACrB,IAAID,EAAoBvB,EAAewB,GAEvC,GAAKD,EAAkB1qC,KAQhB,GAAI0qC,EAAkB1qC,MAAQipC,EAAc,CACjD,IAAIxmE,EAAYgoE,EAAcC,GAC9BjoE,EAAUioE,EAAkB1qC,KAAOi+B,CACrC,OAJEtwB,EAAQ+8B,EAAkB3qC,MAAQk+B,CAKtC,CAEA,OAAOA,CACT,EAEAxwG,EAAOm9G,SAAW,SAAUzgG,EAAUu8C,EAASmkD,GAC7C,IAAI5M,EAAMtwB,EAAQxjE,GAMlB,GAJI8zF,GAAOA,EAAIgL,KACbhL,EAAMv3C,EAAUu3C,EAAIv3C,GAAW,MAG7BmkD,IAAsB5M,EACxB,MAAM,IAAI/R,MAAOxlC,EAAyD,aAAev8C,EAAW,KAAOu8C,GAAW,IAAM,6BAAjGv8C,gCAG7B,OAAO8zF,CACT,EAEAxwG,EAAO+wG,qBAAuB,SAAU56F,GACtC,IAAI8mG,EAAoBvB,EAAevlG,GACnCrZ,EAAS,GACT0b,EAAM0nE,EAAQ+8B,EAAkB3qC,MAUpC,OARI95D,GAAOA,EAAIgjG,GACb,KAAYhjG,GAAK,SAAU+pD,EAAGt2E,GAC5BA,IAASuvH,GAAgB1+G,EAAOjM,KAAK0xE,EACvC,IAEAzlE,EAAOjM,KAAK2nB,GAGP1b,CACT,EAEAkD,EAAOq9G,SAAW,SAAUlnG,GAE1B,IAAI8mG,EAAoBvB,EAAevlG,GACvC,QAAS+pE,EAAQ+8B,EAAkB3qC,KACrC,EAMAtyE,EAAOs9G,qBAAuB,WAC5B,IAAIC,EAAQ,GAIZ,OAHA,KAAYr9B,GAAS,SAAU1nE,EAAKvsB,GAClCsxH,EAAM1sH,KAAK5E,EACb,IACOsxH,CACT,EAMAv9G,EAAOw9G,YAAc,SAAUrnG,GAC7B,IAAI8mG,EAAoBvB,EAAevlG,GACnCqC,EAAM0nE,EAAQ+8B,EAAkB3qC,MACpC,OAAO95D,GAAOA,EAAIgjG,EACpB,CAYF,C,wJC5RIxyE,EAAO59C,KAAKC,MAAsB,GAAhBD,KAAK6xD,UAOpB,SAASwgE,EAAOxxH,GAGrB,MAAO,CAACA,GAAQ,GAAI+8C,KAAQx7B,KAAK,IACnC,CAKO,SAASkwG,EAAuB19G,GACrC,IAAI29G,EAAoB,CAAC,EAEzB39G,EAAO2/B,yBAA2B,SAAUxpB,EAAewxF,GACzD,IAAIsV,GAAoB,QAAe9mG,GACvCwnG,EAAkBV,EAAkB3qC,MAAQq1B,CAC9C,EAEA3nG,EAAO49G,iBAAmB,SAAUznG,EAAezO,GACjD,IAAIzb,EAAOyb,EAAOzb,KAElB,IAAKA,EAAM,CACT,IAAI4xH,GAAoB,QAAe1nG,GAAem8D,KAElDtyE,EAAOw9G,YAAYrnG,IAAkBwnG,EAAkBE,KACzD5xH,EAAO0xH,EAAkBE,GAAmBn2G,GAEhD,CAEA,OAAOzb,CACT,CACF,CAUO,SAAS6xH,EAAwBC,EAAQC,GAgE9C,SAASC,EAAmBC,GAC1B,IAAIxsC,EAAQ,CAAC,EACTysC,EAAc,GAuBlB,OAtBA,KAAYD,GAAc,SAAUzrH,GAClC,IAAIktD,EAAWy+D,EAA0B1sC,EAAOj/E,GAC5C4rH,EAAe1+D,EAAS0+D,aAAeL,EAAiBvrH,GACxD6rH,EAAgBC,EAAyBF,EAAcH,GAC3Dv+D,EAAS6+D,WAAaF,EAAch1H,OAER,IAAxBq2D,EAAS6+D,YACXL,EAAYttH,KAAK4B,GAGnB,KAAY6rH,GAAe,SAAUG,GAC/B,KAAe9+D,EAAS++D,YAAaD,GAAiB,GACxD9+D,EAAS++D,YAAY7tH,KAAK4tH,GAG5B,IAAIE,EAAWP,EAA0B1sC,EAAO+sC,GAE5C,KAAeE,EAASC,UAAWH,GAAiB,GACtDE,EAASC,UAAU/tH,KAAK4B,EAE5B,GACF,IACO,CACLi/E,MAAOA,EACPysC,YAAaA,EAEjB,CAEA,SAASC,EAA0B1sC,EAAOj/E,GAQxC,OAPKi/E,EAAMj/E,KACTi/E,EAAMj/E,GAAQ,CACZisH,YAAa,GACbE,UAAW,KAIRltC,EAAMj/E,EACf,CAEA,SAAS8rH,EAAyBF,EAAcH,GAC9C,IAAII,EAAgB,GAIpB,OAHA,KAAYD,GAAc,SAAUQ,GAClC,KAAeX,EAAcW,IAAQ,GAAKP,EAAcztH,KAAKguH,EAC/D,IACOP,CACT,CAxGAP,EAAOe,kBAAoB,SAAUC,EAAgBb,EAAc7/D,EAAUzwD,GAC3E,GAAKmxH,EAAez1H,OAApB,CAIA,IAAIwT,EAASmhH,EAAmBC,GAC5BxsC,EAAQ50E,EAAO40E,MACfysC,EAAcrhH,EAAOqhH,YACrBa,EAAgB,CAAC,EACrB,KAAYD,GAAgB,SAAUtsH,GACpCusH,EAAcvsH,IAAQ,CACxB,IAEA,MAAO0rH,EAAY70H,OAAQ,CACzB,IAAI21H,EAAoBd,EAAY12E,MAChCy3E,EAAaxtC,EAAMutC,GACnBE,IAAsBH,EAAcC,GAEpCE,IACF9gE,EAAS/+C,KAAK1R,EAASqxH,EAAmBC,EAAWb,aAAa5qH,gBAC3DurH,EAAcC,IAGvB,KAAYC,EAAWN,UAAWO,EAAoBC,EAAmBC,EAC3E,CAEA,KAAYL,GAAe,WACzB,IAAIzyC,EAAS,GAMb,MAAM,IAAIkyB,MAAMlyB,EAClB,GA/BA,CAiCA,SAAS8yC,EAAWC,GAClB5tC,EAAM4tC,GAAmBd,aAEmB,IAAxC9sC,EAAM4tC,GAAmBd,YAC3BL,EAAYttH,KAAKyuH,EAErB,CAQA,SAASF,EAAiBE,GACxBN,EAAcM,IAAqB,EACnCD,EAAWC,EACb,CACF,CAmDF,CACO,SAASC,EAAqBC,EAAaC,GAEhD,OAAO,KAAa,KAAa,CAAC,EAAGD,GAAa,GAAOC,GAAW,EACtE,C,uBCxKO,SAASC,EAAoB1/G,EAAQ2/G,EAAKC,GAC/C,IAAIC,EAEJ,MAAO7/G,EAAQ,CACb,GAAI2/G,EAAI3/G,KACN6/G,EAAQ7/G,EAEJ4/G,GACF,MAIJ5/G,EAASA,EAAO8/G,cAAgB9/G,EAAOhW,MACzC,CAEA,OAAO61H,CACT,C,2SCPO,SAASE,EAAUt1G,GACxB,KAAK,QAAUA,GACb,OAAO,KAAgBA,GAAKA,EAAI,IAGlC,IAAIu1G,GAASv1G,EAAI,IAAIo5D,MAAM,KAC3B,OAAOm8C,EAAM,GAAGtuF,QAAQ,iCAAkC,QAAUsuF,EAAM12H,OAAS,EAAI,IAAM02H,EAAM,GAAK,GAC1G,CACO,SAASC,EAAY1H,EAAK2H,GAS/B,OARA3H,GAAOA,GAAO,IAAIt4E,cAAcvO,QAAQ,SAAS,SAAU0jC,EAAO+qD,GAChE,OAAOA,EAAOnwB,aAChB,IAEIkwB,GAAkB3H,IACpBA,EAAMA,EAAII,OAAO,GAAG3oB,cAAgBuoB,EAAI9kH,MAAM,IAGzC8kH,CACT,CACO,IAAI6H,EAAoB,KAUxB,SAASC,EAAkBrlH,EAAOqpD,EAAWpG,GAClD,IAAIqiE,EAAqC,kCAEzC,SAASC,EAAqBhI,GAC5B,OAAOA,GAAO,KAAYA,GAAOA,EAAM,GACzC,CAEA,SAASiI,EAAqBC,GAC5B,QAAiB,MAAPA,GAAgB71H,MAAM61H,KAAQz1H,SAASy1H,GACnD,CAEA,IAAIC,EAA2B,SAAdr8D,EACbs8D,EAAc3lH,aAAiB0tD,KAEnC,GAAIg4D,GAAcC,EAAa,CAC7B,IAAI/1D,EAAO81D,GAAa,QAAU1lH,GAASA,EAE3C,IAAKpQ,OAAOggE,GACV,OAAO,QAAWA,EAAM01D,EAAoCriE,GACvD,GAAI0iE,EACT,MAAO,GAGX,CAEA,GAAkB,YAAdt8D,EACF,OAAO,KAAoBrpD,GAASulH,EAAqBvlH,GAAS,KAAgBA,IAASwlH,EAAqBxlH,GAASA,EAAQ,GAAW,IAI9I,IAAI4lH,GAAgB,QAAgB5lH,GACpC,OAAOwlH,EAAqBI,GAAiBb,EAAUa,GAAiB,KAAoB5lH,GAASulH,EAAqBvlH,GAA0B,mBAAVA,EAAsBA,EAAQ,GAAK,GAC/K,CACA,IAAI6lH,EAAgB,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAE/CC,EAAU,SAAUC,EAAS/gE,GAC/B,MAAO,IAAM+gE,GAAwB,MAAb/gE,EAAoB,GAAKA,GAAa,GAChE,EAOO,SAASghE,EAAU5uD,EAAK6uD,EAAYlwH,GACpC,KAAekwH,KAClBA,EAAa,CAACA,IAGhB,IAAIC,EAAYD,EAAW33H,OAE3B,IAAK43H,EACH,MAAO,GAKT,IAFA,IAAI9I,EAAQ6I,EAAW,GAAG7I,OAAS,GAE1BhvH,EAAI,EAAGA,EAAIgvH,EAAM9uH,OAAQF,IAAK,CACrC,IAAI+3H,EAAQN,EAAcz3H,GAC1BgpE,EAAMA,EAAI1gC,QAAQovF,EAAQK,GAAQL,EAAQK,EAAO,GACnD,CAEA,IAAK,IAAInhE,EAAY,EAAGA,EAAYkhE,EAAWlhE,IAC7C,IAAK,IAAI1lB,EAAI,EAAGA,EAAI89E,EAAM9uH,OAAQgxC,IAAK,CACrC,IAAIp8B,EAAM+iH,EAAWjhE,GAAWo4D,EAAM99E,IACtC83B,EAAMA,EAAI1gC,QAAQovF,EAAQD,EAAcvmF,GAAI0lB,GAAYjvD,GAAS,QAAWmN,GAAOA,EACrF,CAGF,OAAOk0D,CACT,CAWO,SAASgvD,EAAiBC,EAAOzwE,GACtC,IAAIn8C,EAAM,KAAgB4sH,GAAS,CACjC53G,MAAO43G,EACPzwE,aAAcA,GACZywE,GAAS,CAAC,EACV53G,EAAQhV,EAAIgV,MACZxd,EAAOwI,EAAIxI,KACf2kD,EAAen8C,EAAIm8C,aACnB,IAAIN,EAAa77C,EAAI67C,YAAc,OAEnC,IAAK7mC,EACH,MAAO,GAGT,GAAmB,SAAf6mC,EACF,MAAgB,YAATrkD,EAAqB,qJAC1B,QAAWwd,GAAS,KAAOmnC,GAAgB,IAAM,YAAc,kHAAwH,QAAWnnC,GAAS,KAAOmnC,GAAgB,IAAM,YAM1O,IAAIuV,EAAW1xD,EAAI0xD,UAAY,UAC/B,MAAO,CACL7V,WAAYA,EACZyG,QAAS,IAAMoP,EAAW,OAC1Bv8D,MAAgB,YAATqC,EAAqB,CAC1B0e,MAAO,EACPC,OAAQ,EACRf,aAAc,EACd0d,gBAAiB9d,GACf,CACFkB,MAAO,GACPC,OAAQ,GACRf,aAAc,EACd0d,gBAAiB9d,GAIzB,CA8CO,SAAS63G,EAAqB73G,EAAO83G,GAE1C,OADAA,EAAeA,GAAgB,cACxB,KAAgB93G,GAASA,EAAQ,KAAgBA,IAASA,EAAM+3G,aAAe/3G,EAAM+3G,WAAW,IAAM,CAAC,GAAG/3G,OAAwB83G,CAC3I,CAQO,SAASE,EAAW16F,EAAM/mB,GAE/B,GAAe,WAAXA,GAAkC,UAAXA,EAAoB,CAC7C,IAAI0hH,EAAQzrE,OAAO0rE,OACnBD,EAAME,OAAS,KACfF,EAAMG,SAASC,KAAO/6F,CACxB,MACEkvB,OAAO0rE,KAAK56F,EAAM/mB,EAEtB,C,w9DC9LIwP,EAAUpkB,KAAKN,IACf2kB,EAAUrkB,KAAKH,IACf82H,EAAkB,CAAC,EAKhB,SAASC,EAAY71G,GAC1B,OAAO,YAAYA,EACrB,CACA,IAAI81G,EAAuB,KAKpB,SAASC,EAAWC,EAAUh2G,GACnC,OAAO81G,EAAqBE,EAAUh2G,EACxC,CAaO,SAASi2G,EAAc3vH,EAAMklB,GAClCoqG,EAAgBtvH,GAAQklB,CAC1B,CA6BO,SAAS0qG,EAAc5vH,GAC5B,GAAIsvH,EAAgBluH,eAAepB,GACjC,OAAOsvH,EAAgBtvH,EAE3B,CASO,SAAS6vH,EAASH,EAAUh2G,EAAMjD,EAAMpK,GAC7C,IAAI6kE,EAAO,KAA0Bw+C,EAAUh2G,GAU/C,OARIjD,IACa,WAAXpK,IACFoK,EAAOq5G,EAAcr5G,EAAMy6D,EAAK3lD,oBAGlCwkG,EAAW7+C,EAAMz6D,IAGZy6D,CACT,CASO,SAAS8+C,EAAUC,EAAUx5G,EAAMpK,GACxC,IAAI6jH,EAAQ,IAAI,KAAQ,CACtB/4H,MAAO,CACLwsF,MAAOssC,EACPj4G,EAAGvB,EAAKuB,EACRC,EAAGxB,EAAKwB,EACRC,MAAOzB,EAAKyB,MACZC,OAAQ1B,EAAK0B,QAEfg4G,OAAQ,SAAU5gC,GAChB,GAAe,WAAXljF,EAAqB,CACvB,IAAIiP,EAAe,CACjBpD,MAAOq3E,EAAIr3E,MACXC,OAAQo3E,EAAIp3E,QAEd+3G,EAAMpgG,SAASggG,EAAcr5G,EAAM6E,GACrC,CACF,IAEF,OAAO40G,CACT,CASA,SAASJ,EAAcr5G,EAAM6E,GAE3B,IAEInD,EAFAi4G,EAAS90G,EAAapD,MAAQoD,EAAanD,OAC3CD,EAAQzB,EAAK0B,OAASi4G,EAGtBl4G,GAASzB,EAAKyB,MAChBC,EAAS1B,EAAK0B,QAEdD,EAAQzB,EAAKyB,MACbC,EAASD,EAAQk4G,GAGnB,IAAIp3G,EAAKvC,EAAKuB,EAAIvB,EAAKyB,MAAQ,EAC3Be,EAAKxC,EAAKwB,EAAIxB,EAAK0B,OAAS,EAChC,MAAO,CACLH,EAAGgB,EAAKd,EAAQ,EAChBD,EAAGgB,EAAKd,EAAS,EACjBD,MAAOA,EACPC,OAAQA,EAEZ,CAEO,IAAIk4G,EAAY,KAOhB,SAASN,EAAW7+C,EAAMz6D,GAC/B,GAAKy6D,EAAKzlD,eAAV,CAIA,IAAI6kG,EAAWp/C,EAAK3lD,kBAChBijB,EAAI8hF,EAASC,mBAAmB95G,GACpCy6D,EAAKzlD,eAAe+iB,EAJpB,CAKF,CAKO,SAASrL,EAAqB5qB,EAAOH,GAI1C,OAHA,KAA0CG,EAAOA,EAAO,CACtDH,UAAWA,IAENG,CACT,CAKO,SAASi4G,EAAqBnL,GAEnC,OADA,KAA0CA,EAAM9sG,MAAO8sG,EAAM9sG,MAAO8sG,EAAMluH,OACnEkuH,CACT,CAUO,IAAItxF,EAAmB,KASvB,SAAS08F,EAAaljH,EAAQmjH,GACnC,IAAIC,EAAM,KAAgB,IAE1B,MAAOpjH,GAAUA,IAAWmjH,EAC1B,KAAWC,EAAKpjH,EAAOm5B,oBAAqBiqF,GAC5CpjH,EAASA,EAAOhW,OAGlB,OAAOo5H,CACT,CAWO,SAASllG,EAAele,EAAQme,EAAWklG,GAShD,OARIllG,KAAc,QAAYA,KAC5BA,EAAY,uBAAgCA,IAG1CklG,IACFllG,EAAY,KAAc,GAAIA,IAGzB,KAAsB,GAAIne,EAAQme,EAC3C,CAQO,SAASmlG,EAAmBvuF,EAAW5W,EAAWklG,GAEvD,IAAIE,EAAyB,IAAjBplG,EAAU,IAA6B,IAAjBA,EAAU,IAA6B,IAAjBA,EAAU,GAAW,EAAI/yB,KAAKuB,IAAI,EAAIwxB,EAAU,GAAKA,EAAU,IACnHqlG,EAAyB,IAAjBrlG,EAAU,IAA6B,IAAjBA,EAAU,IAA6B,IAAjBA,EAAU,GAAW,EAAI/yB,KAAKuB,IAAI,EAAIwxB,EAAU,GAAKA,EAAU,IACnHslG,EAAS,CAAe,SAAd1uF,GAAwBwuF,EAAsB,UAAdxuF,EAAwBwuF,EAAQ,EAAiB,QAAdxuF,GAAuByuF,EAAsB,WAAdzuF,EAAyByuF,EAAQ,GAEjJ,OADAC,EAASvlG,EAAeulG,EAAQtlG,EAAWklG,GACpCj4H,KAAKuB,IAAI82H,EAAO,IAAMr4H,KAAKuB,IAAI82H,EAAO,IAAMA,EAAO,GAAK,EAAI,QAAU,OAASA,EAAO,GAAK,EAAI,SAAW,KACnH,CAEA,SAASC,EAAW97H,GAClB,OAAQA,EAAGsC,OACb,CAEA,SAASy5H,EAAO/7H,GACd,OAAmB,MAAZA,EAAGojB,KACZ,CAOO,SAASsjC,EAAgBs1E,EAAIC,EAAIn9H,GACtC,GAAKk9H,GAAOC,EAAZ,CA4BA,IAAIC,EAASC,EAASH,GACtBC,EAAG15H,UAAS,SAAUvC,GACpB,GAAI87H,EAAW97H,IAAOA,EAAGiuC,KAAM,CAC7B,IAAImuF,EAAQF,EAAOl8H,EAAGiuC,MAEtB,GAAImuF,EAAO,CACT,IAAIC,EAAUC,EAAmBt8H,GACjCA,EAAGmB,KAAKm7H,EAAmBF,KAC3B,OAAYp8H,EAAIq8H,EAASv9H,GAAiB,OAAUkB,GAAIjB,UAC1D,CACF,CACF,GArCA,CAEA,SAASo9H,EAASI,GAChB,IAAIC,EAAQ,CAAC,EAMb,OALAD,EAAEh6H,UAAS,SAAUvC,GACf87H,EAAW97H,IAAOA,EAAGiuC,OACvBuuF,EAAMx8H,EAAGiuC,MAAQjuC,EAErB,IACOw8H,CACT,CAEA,SAASF,EAAmBt8H,GAC1B,IAAI4wB,EAAM,CACR/N,EAAG7iB,EAAG6iB,EACNC,EAAG9iB,EAAG8iB,EACNyE,SAAUvnB,EAAGunB,UAOf,OAJIw0G,EAAO/7H,KACT4wB,EAAIxN,OAAQ,QAAO,CAAC,EAAGpjB,EAAGojB,QAGrBwN,CACT,CAcF,CACO,SAAS6rG,GAAiB/pG,EAAQpR,GAGvC,OAAO,QAAIoR,GAAQ,SAAUiD,GAC3B,IAAI9S,EAAI8S,EAAM,GACd9S,EAAI+E,EAAQ/E,EAAGvB,EAAKuB,GACpBA,EAAIgF,EAAQhF,EAAGvB,EAAKuB,EAAIvB,EAAKyB,OAC7B,IAAID,EAAI6S,EAAM,GAGd,OAFA7S,EAAI8E,EAAQ9E,EAAGxB,EAAKwB,GACpBA,EAAI+E,EAAQ/E,EAAGxB,EAAKwB,EAAIxB,EAAK0B,QACtB,CAACH,EAAGC,EACb,GACF,CAKO,SAAS45G,GAAeC,EAAYr7G,GACzC,IAAIuB,EAAI+E,EAAQ+0G,EAAW95G,EAAGvB,EAAKuB,GAC/BsM,EAAKtH,EAAQ80G,EAAW95G,EAAI85G,EAAW55G,MAAOzB,EAAKuB,EAAIvB,EAAKyB,OAC5DD,EAAI8E,EAAQ+0G,EAAW75G,EAAGxB,EAAKwB,GAC/BsM,EAAKvH,EAAQ80G,EAAW75G,EAAI65G,EAAW35G,OAAQ1B,EAAKwB,EAAIxB,EAAK0B,QAGjE,GAAImM,GAAMtM,GAAKuM,GAAMtM,EACnB,MAAO,CACLD,EAAGA,EACHC,EAAGA,EACHC,MAAOoM,EAAKtM,EACZG,OAAQoM,EAAKtM,EAGnB,CACO,SAASiY,GAAW6hG,EAC3B/vH,EAAKyU,GACH,IAAIu7G,GAAY,QAAO,CACrBC,WAAW,GACVjwH,GACC7K,EAAQ66H,EAAU76H,MAAQ,CAC5B+6H,eAAe,GASjB,GAPAz7G,EAAOA,GAAQ,CACbuB,GAAI,EACJC,GAAI,EACJC,MAAO,EACPC,OAAQ,GAGN45G,EACF,OAAuC,IAAhCA,EAAQz8F,QAAQ,aAAqBn+B,EAAMwsF,MAAQouC,EAAQ/wH,MAAM,IAAI,QAAS7J,EAAOsf,GAAO,IAAI,KAAQu7G,IAAcnC,EAASkC,EAAQ9yF,QAAQ,UAAW,IAAK+yF,EAAWv7G,EAAM,SAE3L,CAQO,SAAS07G,GAAqBC,EAAKC,EAAKC,EAAKC,EAAK1qG,GACvD,IAAK,IAAIlxB,EAAI,EAAG6oC,EAAK3X,EAAOA,EAAOhxB,OAAS,GAAIF,EAAIkxB,EAAOhxB,OAAQF,IAAK,CACtE,IAAI67H,EAAI3qG,EAAOlxB,GAEf,GAAI87H,GAAkBL,EAAKC,EAAKC,EAAKC,EAAKC,EAAE,GAAIA,EAAE,GAAIhzF,EAAG,GAAIA,EAAG,IAC9D,OAAO,EAGTA,EAAKgzF,CACP,CACF,CAQO,SAASC,GAAkBL,EAAKC,EAAKC,EAAKC,EAAKG,EAAKC,EAAKC,EAAKC,GAEnE,IAAIC,EAAKR,EAAMF,EACXW,EAAKR,EAAMF,EACXW,EAAKJ,EAAMF,EACXO,EAAKJ,EAAMF,EAGXO,EAAiBC,GAAeH,EAAIC,EAAIH,EAAIC,GAEhD,GAAIK,GAASF,GACX,OAAO,EAOT,IAAIG,EAAQjB,EAAMM,EACdY,EAAQjB,EAAMM,EACd5qD,EAAIorD,GAAeE,EAAOC,EAAOR,EAAIC,GAAMG,EAE/C,GAAInrD,EAAI,GAAKA,EAAI,EACf,OAAO,EAGT,IAAIyqD,EAAIW,GAAeE,EAAOC,EAAON,EAAIC,GAAMC,EAE/C,QAAIV,EAAI,GAAKA,EAAI,EAKnB,CAKA,SAASW,GAAe1zF,EAAIC,EAAIpb,EAAIC,GAClC,OAAOkb,EAAKlb,EAAKD,EAAKob,CACxB,CAEA,SAAS0zF,GAAS3nH,GAChB,OAAOA,GAAO,MAAQA,IAAQ,IAChC,CAEO,SAASy5B,GAAiBljC,GAC/B,IAAIuxH,EAAoBvxH,EAAIuxH,kBACxBppG,EAAiBnoB,EAAImoB,eACrB/lB,EAAWpC,EAAIoC,SACfovH,GAAuB,QAASD,GAAqB,CACvD7+F,UAAW6+F,GACTA,EACAtpG,EAAWE,EAAeF,SAC1B0H,EAAiBxH,EAAewH,eAChCy5B,EAAkB,CACpB1nC,cAAeuG,EACfjqB,KAAMoE,EACNuhH,MAAO,CAAC,SAEVv6D,EAAgBnhC,EAAW,SAAW0H,EACtC,IAAI8hG,EAAuBzxH,EAAIyxH,qBAE3BA,IACF,SAAK,QAAKA,IAAuB,SAAUv1H,IACpC,QAAOktD,EAAiBltD,KAC3BktD,EAAgBltD,GAAOu1H,EAAqBv1H,GAC5CktD,EAAgBu6D,MAAMvnH,KAAKF,GAE/B,IAGF,IAAIwsD,GAAS,OAAU1oD,EAAI7M,IAC3Bu1D,EAAOO,kBAAoBhhC,EAC3BygC,EAAO/4B,eAAiBA,EACxB+4B,EAAO7C,cAAgB,CACrB7nD,KAAMoE,EACN6Q,QAAQ,QAAS,CACfqvC,QAASlgD,EACTgnD,gBAAiBA,GAChBooE,GAEP,CAEA,SAASE,GAAgBv+H,EAAIE,GAC3B,IAAIs+H,EAGAx+H,EAAGsC,UACLk8H,EAAUt+H,EAAGF,IAGVw+H,GACHx+H,EAAGuC,SAASrC,EAEhB,CAEO,SAASopB,GAAiBm1G,EAAKv+H,GACpC,GAAIu+H,EACF,IAAI,QAAQA,GACV,IAAK,IAAIj9H,EAAI,EAAGA,EAAIi9H,EAAI/8H,OAAQF,IAC9B+8H,GAAgBE,EAAIj9H,GAAItB,QAG1Bq+H,GAAgBE,EAAKv+H,EAG3B,CAGAs6H,EAAc,SAAU,KACxBA,EAAc,UAAW,KACzBA,EAAc,SAAU,KACxBA,EAAc,OAAQ,KACtBA,EAAc,UAAW,KACzBA,EAAc,WAAY,KAC1BA,EAAc,OAAQ,KACtBA,EAAc,OAAQ,KACtBA,EAAc,cAAe,KAC7BA,EAAc,MAAO,I,2FClhBVkE,GAAY,UACZC,EAAkB,SAAUrnH,EAAaC,EAAU6V,EAASptB,GACrE,GAAIA,EAAI,CACN,IAAIu1D,EAASmpE,EAAU1+H,GAGvBu1D,EAAOx2D,UAAYquB,EACnBmoC,EAAOh+C,SAAWA,EAClBg+C,EAAOj+C,YAAcA,EAEL,UAAZtX,EAAGqE,MACLrE,EAAGuC,UAAS,SAAUq8H,GACpB,IAAIC,EAAcH,EAAUE,GAC5BC,EAAYvnH,YAAcA,EAC1BunH,EAAY9/H,UAAYquB,EACxByxG,EAAYtnH,SAAWA,CACzB,GAEJ,CACF,C,2KCfIjM,EAAO,KAKAwzH,EAAkB,CAAC,OAAQ,QAAS,MAAO,SAAU,QAAS,UAK9DC,EAAW,CAAC,CAAC,QAAS,OAAQ,SAAU,CAAC,SAAU,MAAO,WAErE,SAASC,EAAUC,EAAQ11G,EAAO6lB,EAAKQ,EAAUsvF,GAC/C,IAAIr8G,EAAI,EACJC,EAAI,EAEQ,MAAZ8sB,IACFA,EAAWzsC,KAGI,MAAb+7H,IACFA,EAAY/7H,KAGd,IAAIg8H,EAAqB,EACzB51G,EAAM61G,WAAU,SAAUR,EAAOtuH,GAC/B,IAGI+uH,EACAC,EAJAh+G,EAAOs9G,EAAMxoG,kBACbmpG,EAAYh2G,EAAMi2G,QAAQlvH,EAAM,GAChCmvH,EAAgBF,GAAaA,EAAUnpG,kBAI3C,GAAe,eAAX6oG,EAAyB,CAC3B,IAAIS,EAAQp+G,EAAKyB,OAAS08G,GAAiBA,EAAc58G,EAAIvB,EAAKuB,EAAI,GACtEw8G,EAAQx8G,EAAI68G,EAGRL,EAAQzvF,GAAYgvF,EAAMe,SAC5B98G,EAAI,EACJw8G,EAAQK,EACR58G,GAAKq8G,EAAqB/vF,EAC1B+vF,EAAqB79G,EAAK0B,QAG1Bm8G,EAAqB37H,KAAKN,IAAIi8H,EAAoB79G,EAAK0B,OAE3D,KAAO,CACL,IAAI48G,EAAQt+G,EAAK0B,QAAUy8G,GAAiBA,EAAc38G,EAAIxB,EAAKwB,EAAI,GACvEw8G,EAAQx8G,EAAI88G,EAERN,EAAQJ,GAAaN,EAAMe,SAC7B98G,GAAKs8G,EAAqB/vF,EAC1BtsB,EAAI,EACJw8G,EAAQM,EACRT,EAAqB79G,EAAKyB,OAE1Bo8G,EAAqB37H,KAAKN,IAAIi8H,EAAoB79G,EAAKyB,MAE3D,CAEI67G,EAAMe,UAIVf,EAAM/7G,EAAIA,EACV+7G,EAAM97G,EAAIA,EACV87G,EAAMz2E,aACK,eAAX82E,EAA0Bp8G,EAAIw8G,EAAQjwF,EAAMtsB,EAAIw8G,EAAQlwF,EAC1D,GACF,CAoBkB,KAAa4vF,EAAW,YASxB,KAAaA,EAAW,cA6BnC,SAASa,EAAcC,EAAcC,EAAetgG,GACzDA,EAAS,KAA6BA,GAAU,GAChD,IAAIugG,EAAiBD,EAAch9G,MAC/Bk9G,EAAkBF,EAAc/8G,OAChCsxB,GAAO,QAAawrF,EAAaxrF,KAAM0rF,GACvCzrF,GAAM,QAAaurF,EAAavrF,IAAK0rF,GACrCzrF,GAAQ,QAAasrF,EAAatrF,MAAOwrF,GACzCvrF,GAAS,QAAaqrF,EAAarrF,OAAQwrF,GAC3Cl9G,GAAQ,QAAa+8G,EAAa/8G,MAAOi9G,GACzCh9G,GAAS,QAAa88G,EAAa98G,OAAQi9G,GAC3CC,EAAiBzgG,EAAO,GAAKA,EAAO,GACpC0gG,EAAmB1gG,EAAO,GAAKA,EAAO,GACtCw7F,EAAS6E,EAAa7E,OA8C1B,OA5CIj4H,MAAM+f,KACRA,EAAQi9G,EAAiBxrF,EAAQ2rF,EAAmB7rF,GAGlDtxC,MAAMggB,KACRA,EAASi9G,EAAkBxrF,EAASyrF,EAAiB3rF,GAGzC,MAAV0mF,IAQEj4H,MAAM+f,IAAU/f,MAAMggB,KACpBi4G,EAAS+E,EAAiBC,EAC5Bl9G,EAAyB,GAAjBi9G,EAERh9G,EAA2B,GAAlBi9G,GAKTj9H,MAAM+f,KACRA,EAAQk4G,EAASj4G,GAGfhgB,MAAMggB,KACRA,EAASD,EAAQk4G,IAKjBj4H,MAAMsxC,KACRA,EAAO0rF,EAAiBxrF,EAAQzxB,EAAQo9G,GAGtCn9H,MAAMuxC,KACRA,EAAM0rF,EAAkBxrF,EAASzxB,EAASk9G,GAIpCJ,EAAaxrF,MAAQwrF,EAAatrF,OACxC,IAAK,SACHF,EAAO0rF,EAAiB,EAAIj9G,EAAQ,EAAI0c,EAAO,GAC/C,MAEF,IAAK,QACH6U,EAAO0rF,EAAiBj9G,EAAQo9G,EAChC,MAGJ,OAAQL,EAAavrF,KAAOurF,EAAarrF,QACvC,IAAK,SACL,IAAK,SACHF,EAAM0rF,EAAkB,EAAIj9G,EAAS,EAAIyc,EAAO,GAChD,MAEF,IAAK,SACH8U,EAAM0rF,EAAkBj9G,EAASk9G,EACjC,MAIJ5rF,EAAOA,GAAQ,EACfC,EAAMA,GAAO,EAETvxC,MAAM+f,KAERA,EAAQi9G,EAAiBG,EAAmB7rF,GAAQE,GAAS,IAG3DxxC,MAAMggB,KAERA,EAASi9G,EAAkBC,EAAiB3rF,GAAOE,GAAU,IAG/D,IAAInzB,EAAO,IAAI,IAAagzB,EAAO7U,EAAO,GAAI8U,EAAM9U,EAAO,GAAI1c,EAAOC,GAEtE,OADA1B,EAAKme,OAASA,EACPne,CACT,CAuGO,SAAS8+G,EAAgBC,GAC9B,IAAIhsF,EAAagsF,EAAIhsF,YAAcgsF,EAAI/uD,YAAYj9B,WACnD,OAAO,KAAgBA,GAAcA,EAAaA,EAAa,CAC7DhwC,KAAMgwC,GACJ,IACN,CAyBO,SAASisF,EAAiBC,EAAcvwD,EAAWnjE,GACxD,IAAIw6C,EAAax6C,GAAOA,EAAIw6C,YAC3B,KAAeA,KAAgBA,EAAa,CAACA,EAAYA,IAC1D,IAAIm5E,EAAUrpH,EAAM4nH,EAAS,GAAI,GAC7B0B,EAAUtpH,EAAM4nH,EAAS,GAAI,GAIjC,SAAS5nH,EAAMzF,EAAOgvH,GACpB,IAAIC,EAAY,CAAC,EACbC,EAAgB,EAChBC,EAAS,CAAC,EACVC,EAAmB,EACnBC,EAAoB,EAYxB,GAXAz1H,EAAKoG,GAAO,SAAU7G,GACpBg2H,EAAOh2H,GAAQ01H,EAAa11H,EAC9B,IACAS,EAAKoG,GAAO,SAAU7G,GAGpBm2H,EAAQhxD,EAAWnlE,KAAU81H,EAAU91H,GAAQg2H,EAAOh2H,GAAQmlE,EAAUnlE,IACxEqJ,EAASysH,EAAW91H,IAAS+1H,IAC7B1sH,EAAS2sH,EAAQh2H,IAASi2H,GAC5B,IAEIz5E,EAAWq5E,GAQb,OANIxsH,EAAS87D,EAAWt+D,EAAM,IAC5BmvH,EAAOnvH,EAAM,IAAM,KACVwC,EAAS87D,EAAWt+D,EAAM,MACnCmvH,EAAOnvH,EAAM,IAAM,MAGdmvH,EAOT,GAAIC,IAAqBC,GAAsBH,EAK1C,IAAIA,GAAiBG,EACtB,OAAOJ,EAGP,IAAK,IAAIn/H,EAAI,EAAGA,EAAIkQ,EAAMhQ,OAAQF,IAAK,CACrC,IAAIozE,EAASljE,EAAMlQ,GAEnB,IAAKw/H,EAAQL,EAAW/rD,IAAWosD,EAAQT,EAAc3rD,GAAS,CAChE+rD,EAAU/rD,GAAU2rD,EAAa3rD,GACjC,KACF,CACF,CAEA,OAAO+rD,CACT,CAlBA,OAAOE,CAmBX,CAEA,SAASG,EAAQpwG,EAAK/lB,GACpB,OAAO+lB,EAAI3kB,eAAepB,EAC5B,CAEA,SAASqJ,EAAS0c,EAAK/lB,GACrB,OAAoB,MAAb+lB,EAAI/lB,IAA+B,SAAd+lB,EAAI/lB,EAClC,CAEA,SAASohC,EAAKv6B,EAAO0G,EAAQC,GAC3B/M,EAAKoG,GAAO,SAAU7G,GACpBuN,EAAOvN,GAAQwN,EAAOxN,EACxB,GACF,CArEAohC,EAAK8yF,EAAS,GAAIwB,EAAcC,GAChCv0F,EAAK8yF,EAAS,GAAIwB,EAAcE,EAqElC,CAKO,SAASQ,EAAgB5oH,GAC9B,OAAO6oH,EAAiB,CAAC,EAAG7oH,EAC9B,CAOO,SAAS6oH,EAAiB9oH,EAAQC,GAIvC,OAHAA,GAAUD,GAAU9M,EAAKwzH,GAAiB,SAAUj0H,GAClDwN,EAAOpM,eAAepB,KAAUuN,EAAOvN,GAAQwN,EAAOxN,GACxD,IACOuN,CACT,C,+ECpcoC,qBAAZynE,SACrBA,QAAQC,MAAQD,QAAQhpC,IA0BpB,SAASsqF,EAAaxQ,GACvB,CAIN,CA+DO,SAASyQ,EAAWC,GACzB,MAAM,IAAIxqB,MAAMwqB,EAClB,C,0gBCrFA,IAAIC,EAA8B,WAC9BC,EAA+B,WAO5B,SAASC,EAAiBpuH,GAC/B,OAAOA,aAAiB3L,MAAQ2L,EAAiB,MAATA,EAAgB,GAAK,CAACA,EAChE,CAcO,SAASquH,EAAgB50H,EAAK9D,EAAK24H,GAExC,GAAI70H,EAAK,CACPA,EAAI9D,GAAO8D,EAAI9D,IAAQ,CAAC,EACxB8D,EAAIksE,SAAWlsE,EAAIksE,UAAY,CAAC,EAChClsE,EAAIksE,SAAShwE,GAAO8D,EAAIksE,SAAShwE,IAAQ,CAAC,EAE1C,IAAK,IAAIvH,EAAI,EAAG2S,EAAMutH,EAAQhgI,OAAQF,EAAI2S,EAAK3S,IAAK,CAClD,IAAImgI,EAAaD,EAAQlgI,IAEpBqL,EAAIksE,SAAShwE,GAAKkD,eAAe01H,IAAe90H,EAAI9D,GAAKkD,eAAe01H,KAC3E90H,EAAIksE,SAAShwE,GAAK44H,GAAc90H,EAAI9D,GAAK44H,GAE7C,CACF,CACF,CACO,IAAIC,EAAqB,CAAC,YAAa,aAAc,WAAY,aAAc,OAAQ,MAAO,QAAS,kBAAmB,kBAAmB,QAAS,SAAU,aAAc,QAAS,gBAAiB,WAAY,cAAe,aAAc,gBAAiB,gBAAiB,kBAAmB,iBAAkB,oBAAqB,oBAAqB,kBAAmB,cAAe,cAAe,eAAgB,WAana,SAASC,EAAiBjvH,GAC/B,QAAO,QAASA,KAAc,QAAQA,IAAeA,aAAoBkuD,KAAyBluD,EAAjBA,EAASQ,KAC5F,CAMO,SAAS0uH,EAAiBlvH,GAC/B,OAAO,QAASA,MAAeA,aAAoBnL,MAErD,CAgCO,SAASs6H,EAAgBC,EAAWC,EAAgBC,GACzD,IAAIC,EAA6B,gBAATD,EACpBE,EAA8B,iBAATF,EACrBG,EAA4B,eAATH,EACvBF,EAAYA,GAAa,GACzBC,GAAkBA,GAAkB,IAAIp2H,QACxC,IAAIy2H,GAAmB,WAEvB,QAAKL,GAAgB,SAAUM,EAAYxkH,IACpC,QAASwkH,KACZN,EAAelkH,GAAS,KAe5B,IACA,IAAI7I,EAASstH,EAAcR,EAAWM,EAAkBJ,GAmBxD,OAjBIC,GAAqBC,IACvBK,EAAYvtH,EAAQ8sH,EAAWM,EAAkBL,GAG/CE,GACFO,EAAcxtH,EAAQ+sH,GAGpBE,GAAqBC,EACvBO,EAAeztH,EAAQ+sH,EAAgBG,GAC9BC,GACTO,EAAwB1tH,EAAQ+sH,GAGlCY,EAAc3tH,GAGPA,CACT,CAEA,SAASstH,EAAcR,EAAWM,EAAkBJ,GAClD,IAAIhtH,EAAS,GAEb,GAAa,eAATgtH,EACF,OAAOhtH,EAKT,IAAK,IAAI6I,EAAQ,EAAGA,EAAQikH,EAAUtgI,OAAQqc,IAAS,CACrD,IAAIizD,EAAWgxD,EAAUjkH,GAErBizD,GAA2B,MAAfA,EAASl+D,IACvBwvH,EAAiB53H,IAAIsmE,EAASl+D,GAAIiL,GAQpC7I,EAAOjM,KAAK,CACV+nE,SAAmB,iBAATkxD,GAA2BY,EAAsB9xD,GAAY,KAAOA,EAC9EhB,UAAW,KACXoB,QAAS,KACTI,SAAU,MAEd,CAEA,OAAOt8D,CACT,CAEA,SAASutH,EAAYvtH,EAAQ8sH,EAAWM,EAAkBL,IAExD,QAAKA,GAAgB,SAAUM,EAAYxkH,GACzC,GAAKwkH,GAA+B,MAAjBA,EAAWzvH,GAA9B,CAIA,IAAIiwH,EAAWC,EAAkBT,EAAWzvH,IACxCmwH,EAAcX,EAAiBp+H,IAAI6+H,GAEvC,GAAmB,MAAfE,EAAqB,CACvB,IAAIhpH,EAAa/E,EAAO+tH,IACxB,SAAQhpH,EAAW+1D,UAAW,4BAA8B+yD,EAAW,MACvE9oH,EAAW+1D,UAAYuyD,EAGvBtoH,EAAW+2D,SAAWgxD,EAAUiB,GAChChB,EAAelkH,GAAS,IAC1B,CAbA,CAcF,GACF,CAEA,SAAS2kH,EAAcxtH,EAAQ+sH,IAE7B,QAAKA,GAAgB,SAAUM,EAAYxkH,GACzC,GAAKwkH,GAAiC,MAAnBA,EAAW13H,KAI9B,IAAK,IAAIrJ,EAAI,EAAGA,EAAI0T,EAAOxT,OAAQF,IAAK,CACtC,IAAIwvE,EAAW97D,EAAO1T,GAAGwvE,SAEzB,IAAK97D,EAAO1T,GAAGwuE,WAEZgB,IAA4B,MAAfA,EAASl+D,IAA+B,MAAjByvH,EAAWzvH,MAAgBgwH,EAAsBP,KAAgBO,EAAsB9xD,IAAakyD,EAAiB,OAAQlyD,EAAUuxD,GAG5K,OAFArtH,EAAO1T,GAAGwuE,UAAYuyD,OACtBN,EAAelkH,GAAS,KAG5B,CACF,GACF,CAEA,SAAS4kH,EAAeztH,EAAQ+sH,EAAgBzwD,IAC9C,QAAKywD,GAAgB,SAAUM,GAC7B,GAAKA,EAAL,CAKA,IAAItoH,EACAkpH,EAAU,EAEd,OACClpH,EAAa/E,EAAOiuH,MAMrBlpH,EAAW+1D,WAAa8yD,EAAsB7oH,EAAW+2D,WACzD/2D,EAAW+2D,UAA6B,MAAjBuxD,EAAWzvH,KAAeowH,EAAiB,KAAMX,EAAYtoH,EAAW+2D,WAC7FmyD,IAGElpH,GACFA,EAAW+1D,UAAYuyD,EACvBtoH,EAAWu3D,SAAWA,GAEtBt8D,EAAOjM,KAAK,CACV+mE,UAAWuyD,EACX/wD,SAAUA,EACVR,SAAU,KACVI,QAAS,OAIb+xD,GA9BA,CA+BF,GACF,CAEA,SAASP,EAAwB1tH,EAAQ+sH,IACvC,QAAKA,GAAgB,SAAUM,GAG7BrtH,EAAOjM,KAAK,CACV+mE,UAAWuyD,EACX/wD,UAAU,EACVR,SAAU,KACVI,QAAS,MAEb,GACF,CAOA,SAASyxD,EAAcO,GAUrB,IAAIC,GAAQ,WACZ,QAAKD,GAAW,SAAU19H,GACxB,IAAIsrE,EAAWtrE,EAAKsrE,SACpBA,GAAYqyD,EAAM34H,IAAIsmE,EAASl+D,GAAIpN,EACrC,KACA,QAAK09H,GAAW,SAAU19H,GACxB,IAAImH,EAAMnH,EAAKsqE,WAEf,SAAQnjE,GAAiB,MAAVA,EAAIiG,KAAeuwH,EAAMn/H,IAAI2I,EAAIiG,KAAOuwH,EAAMn/H,IAAI2I,EAAIiG,MAAQpN,EAAM,mBAAqBmH,GAAOA,EAAIiG,KACnHjG,GAAiB,MAAVA,EAAIiG,IAAcuwH,EAAM34H,IAAImC,EAAIiG,GAAIpN,IAC1CA,EAAK0rE,UAAY1rE,EAAK0rE,QAAU,CAAC,EACpC,KAEA,QAAKgyD,GAAW,SAAU19H,EAAMqY,GAC9B,IAAIizD,EAAWtrE,EAAKsrE,SAChBnkE,EAAMnH,EAAKsqE,UACXoB,EAAU1rE,EAAK0rE,QAEnB,IAAK,QAASvkE,GAAd,CAYA,GAJAukE,EAAQvmE,KAAmB,MAAZgC,EAAIhC,KAAem4H,EAAkBn2H,EAAIhC,MAAQmmE,EAAWA,EAASnmE,KAElFy2H,EAA8BvjH,EAE5BizD,EACFI,EAAQt+D,GAAKkwH,EAAkBhyD,EAASl+D,SACnC,GAAc,MAAVjG,EAAIiG,GACbs+D,EAAQt+D,GAAKkwH,EAAkBn2H,EAAIiG,QAC9B,CAML,IAAIwwH,EAAQ,EAEZ,GACElyD,EAAQt+D,GAAK,KAAOs+D,EAAQvmE,KAAO,KAAOy4H,UACnCD,EAAMn/H,IAAIktE,EAAQt+D,IAC7B,CAEAuwH,EAAM34H,IAAI0mE,EAAQt+D,GAAIpN,EA3BtB,CA4BF,GACF,CAEA,SAASw9H,EAAiB/hI,EAAMoiI,EAAMC,GACpC,IAAIC,EAAOC,EAAoBH,EAAKpiI,GAAO,MACvCwiI,EAAOD,EAAoBF,EAAKriI,GAAO,MAE3C,OAAe,MAARsiI,GAAwB,MAARE,GAAgBF,IAASE,CAClD,CAMA,SAASX,EAAkB1sH,GAOzB,OAAOotH,EAAoBptH,EAAK,GAClC,CAEO,SAASotH,EAAoB1uD,EAAU4uD,GAC5C,OAAgB,MAAZ5uD,EACK4uD,GAGF,QAAS5uD,GAAYA,GAAW,QAASA,KAAa,QAAaA,GAAYA,EAAW,GAAK4uD,CACxG,CAYO,SAASC,EAAgB7uG,GAC9B,IAAInqB,EAAOmqB,EAAenqB,KAE1B,SAAUA,IAAQA,EAAKs1B,QAAQmhG,GACjC,CAOO,SAASwB,EAAsBP,GACpC,OAAOA,GAA+B,MAAjBA,EAAWzvH,IAAyF,IAA3EkwH,EAAkBT,EAAWzvH,IAAIqtB,QAAQohG,EACzF,CAIO,SAASuC,EAA0BnzD,EAAe77C,EAAUivG,IAEjE,QAAKpzD,GAAe,SAAUjrE,GAC5B,IAAIsqE,EAAYtqE,EAAKsqE,WAEjB,QAASA,KACXtqE,EAAK0rE,QAAQt8C,SAAWA,EACxBpvB,EAAK0rE,QAAQC,QAAU2kD,EAAiBlhG,EAAUk7C,EAAWtqE,EAAKsrE,SAAU+yD,GAEhF,GACF,CAEA,SAAS/N,EAAiBlhG,EAAUm8C,EAAe+yD,EAAgBD,GACjE,IAAI1yD,EAAUJ,EAAc5sE,KAAO4sE,EAAc5sE,KAAO2/H,EAAiBA,EAAe3yD,QACtF0yD,EAAmB/N,iBAAiBlhG,EAAUm8C,GAEhD,OAAOI,CACT,CAmEO,SAAS4yD,EAAelgI,EAAMukB,GACnC,OAA+B,MAA3BA,EAAQmb,gBACHnb,EAAQmb,gBACe,MAArBnb,EAAQvpB,WACV,QAAQupB,EAAQvpB,YAAa,QAAIupB,EAAQvpB,WAAW,SAAUqU,GACnE,OAAOrP,EAAKsQ,gBAAgBjB,EAC9B,IAAKrP,EAAKsQ,gBAAgBiU,EAAQvpB,WACT,MAAhBupB,EAAQzd,MACV,QAAQyd,EAAQzd,OAAQ,QAAIyd,EAAQzd,MAAM,SAAUuI,GACzD,OAAOrP,EAAKqQ,YAAYhB,EAC1B,IAAKrP,EAAKqQ,YAAYkU,EAAQzd,WAHzB,CAKT,CAsBO,SAASq5H,IACd,IAAIn7H,EAAM,cAAgBo7H,IAC1B,OAAO,SAAUC,GACf,OAAOA,EAAQr7H,KAASq7H,EAAQr7H,GAAO,CAAC,EAC1C,CACF,CACA,IAAIo7H,GAAmB,UAKhB,SAASE,EAAYllI,EAASmlI,EAAaz3H,GAChD,IAAI8E,EAAK4yH,EAAeD,EAAaz3H,GACjCo0F,EAAoBtvF,EAAGsvF,kBACvBloC,EAAiBpnD,EAAGonD,eACpByrE,EAAS7yH,EAAG6yH,OAEZtvH,EAASsvH,EACThqC,EAAkB3tF,EAAMA,EAAI2tF,gBAAkB,KAelD,OAbKyG,GAAqBzG,GACxBzhC,EAAeruD,IAAI8vF,EAAiB,CAAC,GAGvCzhC,EAAeztD,MAAK,SAAUm5H,EAAa3vG,GACzC,IAAImkC,EAAcyrE,EAAyBvlI,EAAS21B,EAAU2vG,EAAa,CACzEvrE,WAAYshC,IAAoB1lE,EAChCqkC,WAAWtsD,GAAwB,MAAjBA,EAAIssD,WAAoBtsD,EAAIssD,UAC9CC,YAAYvsD,GAAyB,MAAlBA,EAAIusD,YAAqBvsD,EAAIusD,aAElDlkD,EAAO4f,EAAW,UAAYmkC,EAAYn8C,OAC1C5H,EAAO4f,EAAW,SAAWmkC,EAAYn8C,OAAO,EAClD,IACO5H,CACT,CACO,SAASqvH,EAAeD,EAAaz3H,GAC1C,IAAI6oB,EAEJ,IAAI,QAAS4uG,GAAc,CACzB,IAAI1zG,EAAM,CAAC,EACXA,EAAI0zG,EAAc,SAAW,EAC7B5uG,EAAS9E,CACX,MACE8E,EAAS4uG,EAGX,IAAIvrE,GAAiB,UACjByrE,EAAS,CAAC,EACVvjC,GAAoB,EAoBxB,OAnBA,QAAKvrE,GAAQ,SAAUtiB,EAAOrK,GAE5B,GAAY,cAARA,GAA+B,oBAARA,EAA3B,CAKA,IAAI47H,EAAY57H,EAAIykE,MAAM,2BAA6B,GACnD14C,EAAW6vG,EAAU,GACrBC,GAAaD,EAAU,IAAM,IAAItsF,cAErC,GAAKvjB,GAAa8vG,KAAa/3H,GAAOA,EAAIg4H,mBAAoB,QAAQh4H,EAAIg4H,iBAAkB/vG,GAAY,GAAxG,CAIAmsE,EAAoBA,KAAuBnsE,EAC3C,IAAI2vG,EAAc1rE,EAAe70D,IAAI4wB,IAAaikC,EAAeruD,IAAIoqB,EAAU,CAAC,GAChF2vG,EAAYG,GAAaxxH,CAJzB,CARA,MAFEoxH,EAAOz7H,GAAOqK,CAelB,IACO,CACL6tF,kBAAmBA,EACnBloC,eAAgBA,EAChByrE,OAAQA,EAEZ,CACO,IAAIM,EAAmB,CAC5B5rE,YAAY,EACZC,WAAW,EACXC,YAAY,GAOP,SAASsrE,EAAyBvlI,EAAS21B,EAAUiwG,EAAYl4H,GACtEA,EAAMA,GAAOi4H,EACb,IAAIE,EAAcD,EAAWhnH,MACzBknH,EAAWF,EAAWjyH,GACtBoyH,EAAaH,EAAWl6H,KACxBqK,EAAS,CACX4H,OAAQ,KACRqoH,UAA0B,MAAfH,GAAmC,MAAZC,GAAkC,MAAdC,GAGxD,IAAKhwH,EAAOiwH,UAAW,CAErB,IAAIC,OAAY,EAEhB,OADAlwH,EAAO4H,OAASjQ,EAAIqsD,aAAeksE,EAAYjmI,EAAQye,aAAakX,IAAa,CAACswG,GAAa,GACxFlwH,CACT,CAEA,MAAoB,SAAhB8vH,IAA0C,IAAhBA,IAC5B,QAAOn4H,EAAIusD,WAAY,6DACvBlkD,EAAO4H,OAAS,GACT5H,IAKW,QAAhB8vH,KACF,QAAOn4H,EAAIssD,UAAW,iDACtB6rE,EAAcC,EAAWC,EAAa,MAGxChwH,EAAO4H,OAAS3d,EAAQgzE,gBAAgB,CACtCr9C,SAAUA,EACV/W,MAAOinH,EACPlyH,GAAImyH,EACJp6H,KAAMq6H,IAEDhwH,EACT,CACO,SAASmwH,EAAahwC,EAAKtsF,EAAKqK,GACrCiiF,EAAIgwC,aAAehwC,EAAIgwC,aAAat8H,EAAKqK,GAASiiF,EAAItsF,GAAOqK,CAC/D,CACO,SAASkyH,EAAajwC,EAAKtsF,GAChC,OAAOssF,EAAIiwC,aAAejwC,EAAIiwC,aAAav8H,GAAOssF,EAAItsF,EACxD,CACO,SAASw8H,EAAqBC,GACnC,MAAyB,SAArBA,EAEK,iBAAmB,OAAS,WAE5BA,GAAoB,MAE/B,C,8aC1oBIC,EAAiB,KAGjBC,EAAgC,GAEpC,SAASC,EAAMhV,GACb,OAAOA,EAAI7mF,QAAQ,aAAc,GACnC,CAUO,SAAS87F,EAAUtvH,EAAKuvH,EAAQt0H,EAAO0oC,GAC5C,IAAI6rF,EAAKD,EAAO,GACZE,EAAKF,EAAO,GACZliH,EAAKpS,EAAM,GACXy0H,EAAKz0H,EAAM,GACX00H,EAAYF,EAAKD,EACjBI,EAAWF,EAAKriH,EAEpB,GAAkB,IAAdsiH,EACF,OAAoB,IAAbC,EAAiBviH,GAAMA,EAAKqiH,GAAM,EAQ3C,GAAI/rF,EACF,GAAIgsF,EAAY,EAAG,CACjB,GAAI3vH,GAAOwvH,EACT,OAAOniH,EACF,GAAIrN,GAAOyvH,EAChB,OAAOC,CAEX,KAAO,CACL,GAAI1vH,GAAOwvH,EACT,OAAOniH,EACF,GAAIrN,GAAOyvH,EAChB,OAAOC,CAEX,KACK,CACL,GAAI1vH,IAAQwvH,EACV,OAAOniH,EAGT,GAAIrN,IAAQyvH,EACV,OAAOC,CAEX,CAEA,OAAQ1vH,EAAMwvH,GAAMG,EAAYC,EAAWviH,CAC7C,CAMO,SAASwiH,EAAa3iH,EAAS2hF,GACpC,OAAQ3hF,GACN,IAAK,SACL,IAAK,SACHA,EAAU,MACV,MAEF,IAAK,OACL,IAAK,MACHA,EAAU,KACV,MAEF,IAAK,QACL,IAAK,SACHA,EAAU,OACV,MAGJ,OAAI,KAAgBA,GACdmiH,EAAMniH,GAASgqD,MAAM,MAChBorC,WAAWp1F,GAAW,IAAM2hF,EAG9ByT,WAAWp1F,GAGF,MAAXA,EAAkBvgB,KAAOugB,CAClC,CACO,SAAS/f,EAAMof,EAAG2c,EAAW4mG,GASlC,OARiB,MAAb5mG,IACFA,EAAY,IAIdA,EAAYh8B,KAAKH,IAAIG,KAAKN,IAAI,EAAGs8B,GAAYkmG,GAE7C7iH,IAAMA,GAAG8oC,QAAQnsB,GACV4mG,EAAYvjH,GAAKA,CAC1B,CAgBO,SAASwjH,EAAa/vH,GAG3B,GAFAA,GAAOA,EAEHtT,MAAMsT,GACR,OAAO,EAYT,GAAIA,EAAM,MAGR,IAFA,IAAI0gB,EAAI,EAECx1B,EAAI,EAAGA,EAAI,GAAIA,IAAKw1B,GAAK,GAChC,GAAIxzB,KAAKC,MAAM6S,EAAM0gB,GAAKA,IAAM1gB,EAC9B,OAAO9U,EAKb,OAAO8kI,EAAiBhwH,EAC1B,CAKO,SAASgwH,EAAiBhwH,GAE/B,IAAIq6G,EAAMr6G,EAAIm1C,WAAWpT,cAErBkuF,EAAS5V,EAAIxwF,QAAQ,KACrBqmG,EAAMD,EAAS,GAAK5V,EAAI9kH,MAAM06H,EAAS,GAAK,EAC5CE,EAAqBF,EAAS,EAAIA,EAAS5V,EAAIjvH,OAC/CglI,EAAW/V,EAAIxwF,QAAQ,KACvBwmG,EAAiBD,EAAW,EAAI,EAAID,EAAqB,EAAIC,EACjE,OAAOljI,KAAKN,IAAI,EAAGyjI,EAAiBH,EACtC,CAKO,SAAShoF,EAAkBC,EAAYmoF,GAC5C,IAAI/vF,EAAMrzC,KAAKqzC,IACXgwF,EAAOrjI,KAAKqjI,KACZC,EAAetjI,KAAK0f,MAAM2zB,EAAI4H,EAAW,GAAKA,EAAW,IAAMooF,GAC/DE,EAAevjI,KAAKC,MAAMozC,EAAIrzC,KAAKuB,IAAI6hI,EAAY,GAAKA,EAAY,KAAOC,GAE3ErnG,EAAYh8B,KAAKH,IAAIG,KAAKN,KAAK4jI,EAAeC,EAAc,GAAI,IACpE,OAAQ3jI,SAASo8B,GAAkBA,EAAL,EAChC,CAoFO,SAASwnG,EAAQC,EAAMC,GAC5B,IAAIC,EAAe3jI,KAAKN,IAAImjI,EAAaY,GAAOZ,EAAaa,IAGzDpkI,EAAMmkI,EAAOC,EAEjB,OAAOC,EAAezB,EAAgC5iI,EAAMW,EAAMX,EAAKqkI,EACzE,CAOO,SAASC,EAAUC,GACxB,IAAIC,EAAgB,EAAV9jI,KAAK6gB,GACf,OAAQgjH,EAASC,EAAMA,GAAOA,CAChC,CAMO,SAASC,EAAmBjxH,GACjC,OAAOA,GAAOmvH,GAAkBnvH,EAAMmvH,CACxC,CAEA,IAAI+B,EAAW,0IAmBR,SAASC,EAAUr0H,GACxB,GAAIA,aAAiB0tD,KACnB,OAAO1tD,EACF,GAAI,KAAgBA,GAAQ,CAMjC,IAAIo6D,EAAQg6D,EAASE,KAAKt0H,GAE1B,IAAKo6D,EAEH,OAAO,IAAI1M,KAAK79D,KAIlB,GAAKuqE,EAAM,GAWN,CACD,IAAIm6D,GAAQn6D,EAAM,IAAM,EAMxB,MAJ+B,MAA3BA,EAAM,GAAG46B,gBACXu/B,IAASn6D,EAAM,GAAG3hE,MAAM,EAAG,IAGtB,IAAIi1D,KAAKA,KAAK8mE,KAAKp6D,EAAM,KAAMA,EAAM,IAAM,GAAK,GAAIA,EAAM,IAAM,EAAGm6D,IAAQn6D,EAAM,IAAM,IAAKA,EAAM,IAAM,EAAGA,EAAM,IAAMA,EAAM,GAAGq6D,UAAU,EAAG,GAAK,GAC3J,CAhBA,OAAO,IAAI/mE,MAAM0M,EAAM,KAAMA,EAAM,IAAM,GAAK,GAAIA,EAAM,IAAM,GAAIA,EAAM,IAAM,IAAKA,EAAM,IAAM,IAAKA,EAAM,IAAM,EAAGA,EAAM,IAAMA,EAAM,GAAGq6D,UAAU,EAAG,GAAK,EAiB9J,CAAO,OAAa,MAATz0H,EACF,IAAI0tD,KAAK79D,KAGX,IAAI69D,KAAKt9D,KAAKC,MAAM2P,GAC7B,CAQO,SAAS00H,EAASxxH,GACvB,OAAO9S,KAAK8hE,IAAI,GAAIyiE,EAAiBzxH,GACvC,CASO,SAASyxH,EAAiBzxH,GAC/B,GAAY,IAARA,EACF,OAAO,EAGT,IAAIkwH,EAAMhjI,KAAK0f,MAAM1f,KAAKqzC,IAAIvgC,GAAO9S,KAAKqjI,MAW1C,OAJIvwH,EAAM9S,KAAK8hE,IAAI,GAAIkhE,IAAQ,IAC7BA,IAGKA,CACT,CAaO,SAASwB,EAAK1xH,EAAK7S,GACxB,IAIIwkI,EAJAC,EAAWH,EAAiBzxH,GAC5Bm9G,EAAQjwH,KAAK8hE,IAAI,GAAI4iE,GACrBxU,EAAIp9G,EAAMm9G,EAiCd,OA3BIwU,EAFAxkI,EACEiwH,EAAI,IACD,EACIA,EAAI,IACR,EACIA,EAAI,EACR,EACIA,EAAI,EACR,EAEA,GAGHA,EAAI,EACD,EACIA,EAAI,EACR,EACIA,EAAI,EACR,EACIA,EAAI,EACR,EAEA,GAITp9G,EAAM2xH,EAAKxU,EAGJyU,IAAa,IAAM5xH,EAAIq1C,QAAQu8E,EAAW,GAAKA,EAAW,GAAK5xH,CACxE,CAyFO,SAAS6xH,EAAgB7xH,GAC9B,IAAI8xH,EAAWxvB,WAAWtiG,GAC1B,OAAO8xH,GAAY9xH,IACF,IAAb8xH,IAAmB,KAAgB9xH,IAAQA,EAAI6pB,QAAQ,MAAQ,GACjEioG,EAAWnlI,GACf,CAKO,SAASolI,EAAU/xH,GACxB,OAAQtT,MAAMmlI,EAAgB7xH,GAChC,CAOO,SAASgyH,IACd,OAAO9kI,KAAKC,MAAsB,EAAhBD,KAAK6xD,SACzB,CAQO,SAASkzE,EAAyBj7G,EAAGC,GAC1C,OAAU,IAANA,EACKD,EAGFi7G,EAAyBh7G,EAAGD,EAAIC,EACzC,CAQO,SAASi7G,EAAuBl7G,EAAGC,GACxC,OAAS,MAALD,EACKC,EAGA,MAALA,EACKD,EAGFA,EAAIC,EAAIg7G,EAAyBj7G,EAAGC,EAC7C,C,s1BChkBIk7G,EAAsB,EACtBC,EAAmB,CAAC,EACpBC,GAAiB,UACjBC,GAAqB,UACdC,EAAqB,EACrBC,EAAmB,EACnBC,EAAuB,EACvBC,EAAiB,CAAC,WAAY,OAAQ,UACtCC,EAAiB,CAAC,SAAU,WAAY,OAAQ,UAChDC,EAAmB,GACnBC,EAAiB,EACjBC,EAAwB,YACxBC,EAAuB,WACvBC,EAAqB,SACrBC,EAAuB,WACvBC,EAA4B,eAEvC,SAASC,EAAgBC,GACvB,OAAuB,MAAhBA,GAAyC,SAAjBA,CACjC,CAGA,IAAIC,EAAmB,IAAI,KAAI,KAE/B,SAASC,EAAU/nH,GACjB,IAAI,QAASA,GAAQ,CACnB,IAAIgoH,EAAcF,EAAiBzlI,IAAI2d,GAOvC,OALKgoH,IACHA,EAAc,KAAehoH,GAAQ,IACrC8nH,EAAiB/4C,IAAI/uE,EAAOgoH,IAGvBA,CACT,CAAO,IAAI,QAAiBhoH,GAAQ,CAClC,IAAIo+B,GAAM,QAAO,CAAC,EAAGp+B,GAOrB,OANAo+B,EAAI25E,YAAa,QAAI/3G,EAAM+3G,YAAY,SAAUkQ,GAC/C,MAAO,CACL3pH,OAAQ2pH,EAAK3pH,OACb0B,MAAO,KAAeioH,EAAKjoH,OAAQ,IAEvC,IACOo+B,CACT,CAGA,OAAOp+B,CACT,CAEA,SAASkoH,EAAmB/pI,EAAI48F,EAAWotC,GACrChqI,EAAGiqI,qBAAuBjqI,EAAG68F,YAAc,KAAOmtC,GACpDhqI,EAAGiqI,mBAAmBrtC,GAGxB58F,EAAG68F,WAAamtC,CAClB,CAEA,SAASE,EAAoBlqI,GAG3B+pI,EAAmB/pI,EAAI,WAAY+oI,EACrC,CAEA,SAASoB,EAAoBnqI,GAGvBA,EAAG68F,aAAeksC,GACpBgB,EAAmB/pI,EAAI,SAAU6oI,EAErC,CAEA,SAASuB,EAAgBpqI,GACvB+pI,EAAmB/pI,EAAI,OAAQ8oI,EACjC,CAEA,SAASuB,EAAgBrqI,GACnBA,EAAG68F,aAAeisC,GACpBiB,EAAmB/pI,EAAI,SAAU6oI,EAErC,CAEA,SAASyB,EAAkBtqI,GACzBA,EAAGgtF,UAAW,CAChB,CAEA,SAASu9C,EAAkBvqI,GACzBA,EAAGgtF,UAAW,CAChB,CAEA,SAASw9C,EAAmBxqI,EAAIyqI,EAASC,GACvCD,EAAQzqI,EAAI0qI,EACd,CAEA,SAASC,EAAoB3qI,EAAIyqI,EAASC,GACxCF,EAAmBxqI,EAAIyqI,EAASC,GAChC1qI,EAAGsC,SAAWtC,EAAGuC,UAAS,SAAUq8H,GAClC4L,EAAmB5L,EAAO6L,EAASC,EACrC,GACF,CAoCA,SAASE,EAAkB5qI,EAAIC,EAAO4qI,EAAajH,GAIjD,IAHA,IAAI5hI,EAAQhC,EAAGgC,MACX8oI,EAAY,CAAC,EAERtpI,EAAI,EAAGA,EAAIvB,EAAMyB,OAAQF,IAAK,CACrC,IAAI8W,EAAWrY,EAAMuB,GACjB8U,EAAMtU,EAAMsW,GAChBwyH,EAAUxyH,GAAmB,MAAPhC,EAAcstH,GAAgBA,EAAatrH,GAAYhC,CAC/E,CAEA,IAAS9U,EAAI,EAAGA,EAAIxB,EAAGyB,UAAUC,OAAQF,IAAK,CAC5C,IAAIG,EAAW3B,EAAGyB,UAAUD,GAExBG,EAASopI,uBACVppI,EAASopI,sBAAsB5qG,QAAQ0qG,GAAe,GAA6B,UAAxBlpI,EAASqpI,YACrErpI,EAASspI,OAAOH,EAAW7qI,EAE/B,CAEA,OAAO6qI,CACT,CAEA,SAASI,EAA2BlrI,EAAI48F,EAAWuuC,EAAc74G,GAC/D,IAAI84G,EAAYD,IAAgB,QAAQA,EAAc,WAAa,EAC/DE,GAAS,EAEb,GAAIrrI,aAAc,KAAM,CACtB,IAAI+Q,EAAQ43H,EAAe3oI,GACvBsrI,EAAWF,GAAYr6H,EAAMw6H,YAAiCx6H,EAAMy6H,WACpEC,EAAaL,GAAYr6H,EAAM26H,cAAqC36H,EAAM46H,aAE9E,GAAIlC,EAAgB6B,IAAa7B,EAAgBgC,GAAa,CAC5Dn5G,EAAQA,GAAS,CAAC,EAClB,IAAIs5G,EAAgBt5G,EAAMtwB,OAAS,CAAC,EAET,YAAvB4pI,EAAc/5G,MAChBw5G,GAAS,EACT/4G,GAAQ,QAAO,CAAC,EAAGA,GACnBs5G,GAAgB,QAAO,CAAC,EAAGA,GAC3BA,EAAc/5G,KAAOy5G,IAEb7B,EAAgBmC,EAAc/5G,OAAS43G,EAAgB6B,IAC7DD,GAAS,EAET/4G,GAAQ,QAAO,CAAC,EAAGA,GACnBs5G,GAAgB,QAAO,CAAC,EAAGA,GAE3BA,EAAc/5G,KAAO+3G,EAAU0B,KAEvB7B,EAAgBmC,EAAcx5G,SAAWq3G,EAAgBgC,KAC1DJ,IACH/4G,GAAQ,QAAO,CAAC,EAAGA,GACnBs5G,GAAgB,QAAO,CAAC,EAAGA,IAG7BA,EAAcx5G,OAASw3G,EAAU6B,IAGvCn5G,EAAMtwB,MAAQ4pI,CAChB,CACF,CAEA,GAAIt5G,GAEc,MAAZA,EAAM3C,GAAY,CACf07G,IACH/4G,GAAQ,QAAO,CAAC,EAAGA,IAGrB,IAAIu5G,EAAiB7rI,EAAG6rI,eACxBv5G,EAAM3C,GAAK3vB,EAAG2vB,IAAwB,MAAlBk8G,EAAyBA,EAAiB3C,EAChE,CAGF,OAAO52G,CACT,CAEA,SAASw5G,EAAyB9rI,EAAI48F,EAAWtqE,GAE/C,GAAIA,GAEc,MAAZA,EAAM3C,GAAY,CACpB2C,GAAQ,QAAO,CAAC,EAAGA,GACnB,IAAIy5G,EAAe/rI,EAAG+rI,aACtBz5G,EAAM3C,GAAK3vB,EAAG2vB,IAAsB,MAAhBo8G,EAAuBA,EAAe5C,EAC5D,CAGF,OAAO72G,CACT,CAEA,SAAS05G,EAAuBhsI,EAAI48F,EAAWtqE,GAC7C,IAAI25G,GAAU,QAAQjsI,EAAG28F,cAAeC,IAAc,EAClDsvC,EAAiBlsI,EAAGgC,MAAMC,QAC1B6oI,EAAamB,EAEZ,KAFsBrB,EAAkB5qI,EAAI,CAAC,WAAY48F,EAAW,CACvE36F,QAAS,IAEXqwB,EAAQA,GAAS,CAAC,EAClB,IAAI65G,EAAY75G,EAAMtwB,OAAS,CAAC,EAYhC,OAVyB,MAArBmqI,EAAUlqI,UAEZqwB,GAAQ,QAAO,CAAC,EAAGA,GACnB65G,GAAY,QAAO,CAEjBlqI,QAASgqI,EAAUC,EAAqC,GAApBpB,EAAU7oI,SAC7CkqI,GACH75G,EAAMtwB,MAAQmqI,GAGT75G,CACT,CAEA,SAAS85G,EAAkBxvC,EAAWuuC,GACpC,IAAI74G,EAAQpsB,KAAKmsB,OAAOuqE,GAExB,GAAI12F,KAAKlE,MAAO,CACd,GAAkB,aAAd46F,EACF,OAAOsuC,EAA2BhlI,KAAM02F,EAAWuuC,EAAc74G,GAC5D,GAAkB,SAAdsqE,EACT,OAAOovC,EAAuB9lI,KAAM02F,EAAWtqE,GAC1C,GAAkB,WAAdsqE,EACT,OAAOkvC,EAAyB5lI,KAAM02F,EAAWtqE,EAErD,CAEA,OAAOA,CACT,CAQO,SAAS+5G,EAAqBrsI,GACnCA,EAAGqhH,WAAa+qB,EAChB,IAAIlqD,EAAcliF,EAAGgsB,iBACjBgyE,EAAYh+F,EAAG29F,mBAEfzb,IACFA,EAAYm/B,WAAa+qB,GAGvBpuC,IACFA,EAAUqjB,WAAa+qB,EAE3B,CACO,SAASE,EAA2BtsI,EAAIg3B,IAC5Cu1G,EAAavsI,EAAIg3B,KACdh3B,EAAGwsI,eAAiB7B,EAAoB3qI,EAAIkqI,EAClD,CACO,SAASuC,EAA0BzsI,EAAIg3B,IAC3Cu1G,EAAavsI,EAAIg3B,KACdh3B,EAAGwsI,eAAiB7B,EAAoB3qI,EAAImqI,EAClD,CACO,SAAS1oC,EAAczhG,EAAI0hG,GAChC1hG,EAAGwsI,eAAiB,IAAM9qC,GAAkB,GAC5CipC,EAAoB3qI,EAAIkqI,EAC1B,CACO,SAASvoC,EAAc3hG,EAAI0hG,KAC9B1hG,EAAGwsI,iBAAmB,IAAM9qC,GAAkB,MAAQipC,EAAoB3qI,EAAImqI,EAClF,CACO,SAASvoC,EAAU5hG,GACxB2qI,EAAoB3qI,EAAIoqI,EAC1B,CACO,SAASvoC,EAAU7hG,GACxB2qI,EAAoB3qI,EAAIqqI,EAC1B,CACO,SAASvoC,EAAY9hG,GAC1B2qI,EAAoB3qI,EAAIsqI,EAC1B,CACO,SAASvoC,EAAY/hG,GAC1B2qI,EAAoB3qI,EAAIuqI,EAC1B,CAEA,SAASgC,EAAavsI,EAAIg3B,GACxB,OAAOh3B,EAAG0sI,yBAA2B11G,EAAE21G,SACzC,CAEO,SAASC,EAAa9oI,GAC3B,IAAIynB,EAAQznB,EAAIumB,WACZwiH,EAAqB,GACrBC,EAAoB,GACxBvhH,EAAMsJ,eAAc,SAAUtG,EAAeyG,GAC3C,IAAI+3G,EAAkBnE,EAAmB5zG,GACrCs2F,EAA6B,WAAlB/8F,EACX8qC,EAAOiyD,EAAWxnH,EAAI22F,qBAAqBzlE,GAAkBlxB,EAAIw1D,wBAAwBtkC,IAC5Fs2F,GAAYwhB,EAAkB7jI,KAAKowD,GAEhC0zE,EAAgBC,WAElB3zE,EAAK9vC,MAAMhnB,UAAS,SAAUq8H,GAC5ByL,EAAgBzL,EAClB,IACAtT,GAAYuhB,EAAmB5jI,KAAK+rB,IAGtC+3G,EAAgBC,UAAW,CAC7B,KACA,QAAKF,GAAmB,SAAUzzE,GAC5BA,GAAQA,EAAK4zE,kBACf5zE,EAAK4zE,iBAAiBJ,GAAoB,EAAOthH,EAErD,GACF,CACO,SAAS2hH,EAAWC,EAAmB9zD,EAAOC,EAAWx1E,GAC9D,IAAI3E,EAAU2E,EAAIumB,WAGlB,SAAS+iH,EAAmBrpI,EAAMq/B,GAChC,IAAK,IAAI5hC,EAAI,EAAGA,EAAI4hC,EAAY1hC,OAAQF,IAAK,CAC3C,IAAI6rI,EAAStpI,EAAKyT,iBAAiB4rB,EAAY5hC,IAC/C6rI,GAAUxrC,EAAUwrC,EACtB,CACF,CAEA,GATA/zD,EAAYA,GAAa,mBASA,MAArB6zD,GAIC9zD,GAAmB,SAAVA,EAAd,CAIA,IAAIi0D,EAAoBnuI,EAAQy2B,iBAAiBu3G,GAC7CI,EAAiBD,EAAkBlpI,iBAEnCmpI,GAAkBA,EAAelpF,SACnCkpF,EAAiBA,EAAelpF,QAGlC,IAAImpF,EAAgB,GACpBruI,EAAQooC,YAAW,SAAU1jC,GAC3B,IAAI4pI,EAAaH,IAAsBzpI,EACnCM,EAAWN,EAAYO,iBAEvBD,GAAYA,EAASkgD,SACvBlgD,EAAWA,EAASkgD,QAGtB,IAAIqpF,EAAevpI,GAAYopI,EAAiBppI,IAAaopI,EAAiBE,EAE9E,KACc,WAAdn0D,IAA2Bm0D,GACV,qBAAdn0D,IAAqCo0D,GAC3B,WAAVr0D,GAAsBo0D,GACtB,CACD,IAAIp0E,EAAOv1D,EAAI22F,qBAAqB52F,GAKpC,GAJAw1D,EAAK9vC,MAAMhnB,UAAS,SAAUq8H,GAC5BwL,EAAgBxL,EAClB,KAEI,QAAYvlD,GACd+zD,EAAmBvpI,EAAYG,UAAWq1E,QACrC,IAAI,QAASA,GAGlB,IAFA,IAAIs0D,GAAY,QAAKt0D,GAEZxY,EAAI,EAAGA,EAAI8sE,EAAUjsI,OAAQm/D,IACpCusE,EAAmBvpI,EAAYG,QAAQ2pI,EAAU9sE,IAAKwY,EAAMs0D,EAAU9sE,KAI1E2sE,EAAcvkI,KAAKpF,GACnB+kI,EAAmB/kI,GAAampI,UAAW,CAC7C,CACF,IACA7tI,EAAQ01B,eAAc,SAAUtG,EAAeyG,GAC7C,GAAsB,WAAlBzG,EAAJ,CAIA,IAAI8qC,EAAOv1D,EAAIw1D,wBAAwBtkC,GAEnCqkC,GAAQA,EAAK4zE,kBACf5zE,EAAK4zE,iBAAiBO,GAAe,EAAMruI,EAL7C,CAOF,GAtDA,CAuDF,CACO,SAASyuI,GAAc93E,EAAmBt5B,EAAgB14B,GAC/D,GAAyB,MAArBgyD,GAA+C,MAAlBt5B,EAAjC,CAIA,IAAIxH,EAAiBlxB,EAAIumB,WAAWzM,aAAak4C,EAAmBt5B,GAEpE,GAAKxH,EAAL,CAIA4zG,EAAmB5zG,GAAgBg4G,UAAW,EAC9C,IAAI3zE,EAAOv1D,EAAIw1D,wBAAwBtkC,GAElCqkC,GAASA,EAAKw0E,kBAInBx0E,EAAK9vC,MAAMhnB,UAAS,SAAUq8H,GAC5BwL,EAAgBxL,EAClB,GAXA,CANA,CAkBF,CACO,SAASkP,GAA+BjqI,EAAaykB,EAASxkB,GACnE,IAAIwT,EAAczT,EAAYyT,YAC1BvT,EAAOF,EAAYG,QAAQskB,EAAQ/Q,UAEvC,GAAKxT,EAAL,CAQA,IAAIhF,GAAY,QAAegF,EAAMukB,GAErCvpB,IAAa,QAAQA,GAAaA,EAAU,GAAKA,IAAc,EAC/D,IAAIiB,EAAK+D,EAAKyT,iBAAiBzY,GAE/B,IAAKiB,EAAI,CACP,IAAI+C,EAAQgB,EAAKhB,QACbmuC,EAAU,EAEd,OAAQlxC,GAAMkxC,EAAUnuC,EACtB/C,EAAK+D,EAAKyT,iBAAiB05B,IAE/B,CAEA,GAAIlxC,EAAI,CACN,IAAIu1D,GAAS,OAAUv1D,GACvBktI,EAAW51H,EAAai+C,EAAO8jB,MAAO9jB,EAAO+jB,UAAWx1E,EAC1D,KAAO,CAGL,IAAIiqI,EAAUlqI,EAAYK,IAAI,CAAC,WAAY,UACvCo1E,EAAYz1E,EAAYK,IAAI,CAAC,WAAY,cAE9B,MAAX6pI,GACFb,EAAW51H,EAAay2H,EAASz0D,EAAWx1E,EAEhD,CA5BA,CA6BF,CACO,SAASkqI,GAAiCl4E,EAAmBt5B,EAAgB3xB,EAAM/G,GACxF,IAAIm8C,EAAM,CACRs/C,WAAW,EACXC,YAAa,MAGf,GAAyB,MAArB1pC,GAAmD,WAAtBA,GAAoD,MAAlBt5B,GAAkC,MAAR3xB,EAC3F,OAAOo1C,EAGT,IAAIjrB,EAAiBlxB,EAAIumB,WAAWzM,aAAak4C,EAAmBt5B,GAEpE,IAAKxH,EACH,OAAOirB,EAGT,IAAIoZ,EAAOv1D,EAAIw1D,wBAAwBtkC,GAEvC,IAAKqkC,IAASA,EAAK40E,wBACjB,OAAOhuF,EAQT,IALA,IAGIs/C,EAHAC,EAAcnmC,EAAK40E,wBAAwBpjI,GAKtCrJ,EAAI,EAAGA,EAAIg+F,EAAY99F,OAAQF,IAKtC,GAAwC,UAApC,OAAUg+F,EAAYh+F,IAAI63E,MAAkB,CAC9CkmB,GAAY,EACZ,KACF,CAGF,MAAO,CACLA,UAAWA,EACXC,YAAaA,EAEjB,CACO,SAAS0uC,GAAiC54E,EAAYt+B,EAAGlzB,GAK9D,IAAIyxD,GAAS,OAAUD,GAEnB3jD,EAAKq8H,GAAiCz4E,EAAOO,kBAAmBP,EAAO/4B,eAAgB+4B,EAAO44E,sBAAuBrqI,GACrH07F,EAAc7tF,EAAG6tF,YACjBD,EAAY5tF,EAAG4tF,UAIfC,GACED,GACFquC,GAAcr4E,EAAOO,kBAAmBP,EAAO/4B,eAAgB14B,IAGjE,QAAK07F,GAAa,SAAUlqC,GAC1B,OAAOg3E,EAA2Bh3E,EAAYt+B,EAChD,MAIAk2G,EAAW33E,EAAOj+C,YAAai+C,EAAO8jB,MAAO9jB,EAAO+jB,UAAWx1E,GAE1C,SAAjByxD,EAAO8jB,OACTu0D,GAAcr4E,EAAOO,kBAAmBP,EAAO/4B,eAAgB14B,GAMjEwoI,EAA2Bh3E,EAAYt+B,GAE3C,CACO,SAASo3G,GAAgC94E,EAAYt+B,EAAGlzB,GAK7D8oI,EAAa9oI,GACb,IAAIyxD,GAAS,OAAUD,GACnBkqC,EAAcwuC,GAAiCz4E,EAAOO,kBAAmBP,EAAO/4B,eAAgB+4B,EAAO44E,sBAAuBrqI,GAAK07F,YAEnIA,GACF,QAAKA,GAAa,SAAUlqC,GAC1B,OAAOm3E,EAA0Bn3E,EAAYt+B,EAC/C,IAEAy1G,EAA0Bn3E,EAAYt+B,EAE1C,CACO,SAASq3G,GAA2BxqI,EAAaykB,EAASxkB,GAC/D,GAAKwqI,GAAsBhmH,GAA3B,CAIA,IAAI/Q,EAAW+Q,EAAQ/Q,SACnBxT,EAAOF,EAAYG,QAAQuT,GAC3BxY,GAAY,QAAegF,EAAMukB,IAEhC,QAAQvpB,KACXA,EAAY,CAACA,IAGf8E,EAAYykB,EAAQjkB,OAASmlI,EAA4B,eAAiBlhH,EAAQjkB,OAASilI,EAAqB,SAAW,YAAYvqI,EAAWwY,EAVlJ,CAWF,CACO,SAASg3H,GAA6B1qI,GAC3C,IAAI4jG,EAAU5jG,EAAY6qH,cAC1B,QAAKjnB,GAAS,SAAU91F,GACtB,IAAI5N,EAAO4N,EAAG5N,KACVM,EAAOsN,EAAGtN,KACdN,EAAK0T,mBAAkB,SAAUzX,EAAIsQ,GACnCzM,EAAYyrH,WAAWh/G,EAAKjM,GAAQy9F,EAAY9hG,GAAM+hG,EAAY/hG,EACpE,GACF,GACF,CACO,SAASwuI,GAAsBrvI,GACpC,IAAI8gD,EAAM,GAsBV,OArBA9gD,EAAQooC,YAAW,SAAU1jC,GAC3B,IAAI4jG,EAAU5jG,EAAY6qH,cAC1B,QAAKjnB,GAAS,SAAU91F,GACXA,EAAG5N,KAAd,IACIM,EAAOsN,EAAGtN,KACV++B,EAAcv/B,EAAY0rH,yBAE9B,GAAInsF,EAAY1hC,OAAS,EAAG,CAC1B,IAAIgE,EAAO,CACT3G,UAAWqkC,EACX9rB,YAAazT,EAAYyT,aAGf,MAARjT,IACFqB,EAAK6R,SAAWlT,GAGlB47C,EAAIh3C,KAAKvD,EACX,CACF,GACF,IACOu6C,CACT,CASO,SAASwuF,GAAoBzuI,EAAIq5E,EAAOC,GAC7Co1D,GAAwB1uI,GAAI,GAC5B2qI,EAAoB3qI,EAAIqsI,GACxBsC,GAAiB3uI,EAAIq5E,EAAOC,EAC9B,CACO,SAASs1D,GAAqB5uI,GACnC0uI,GAAwB1uI,GAAI,EAC9B,CACO,SAAS6uI,GAAoB7uI,EAAIq5E,EAAOC,EAAWw1D,GACxDA,EAAaF,GAAqB5uI,GAAMyuI,GAAoBzuI,EAAIq5E,EAAOC,EACzE,CACO,SAASq1D,GAAiB3uI,EAAIq5E,EAAOC,GAC1C,IAAI/jB,GAAS,OAAUv1D,GAEV,MAATq5E,GAQF9jB,EAAO8jB,MAAQA,EACf9jB,EAAO+jB,UAAYA,GACV/jB,EAAO8jB,QAChB9jB,EAAO8jB,MAAQ,KAEnB,CACA,IAAI01D,GAAe,CAAC,WAAY,OAAQ,UACpCC,GAAwB,CAC1BzsH,UAAW,eACX8c,UAAW,eACXuW,UAAW,gBAMN,SAASq5F,GAAyBjvI,EAAImrB,EAAW+jH,EACxDC,GACED,EAAYA,GAAa,YAEzB,IAAK,IAAI1tI,EAAI,EAAGA,EAAIutI,GAAartI,OAAQF,IAAK,CAC5C,IAAIo7F,EAAYmyC,GAAavtI,GACzB+pB,EAAQJ,EAAUd,SAAS,CAACuyE,EAAWsyC,IACvC58G,EAAQtyB,EAAG+rC,YAAY6wD,GAE3BtqE,EAAMtwB,MAAQmtI,EAASA,EAAO5jH,GAASA,EAAMyjH,GAAsBE,KACrE,CACF,CAqBO,SAASR,GAAwB1uI,EAAIovI,GAC1C,IAAIC,GAA2B,IAAjBD,EACVE,EAAatvI,EAGbA,EAAGuvI,wBACLD,EAAW5C,wBAA0B1sI,EAAGuvI,uBAKrCF,IAAWC,EAAWE,uBAIzBF,EAAW9C,cAAgB8C,EAAW9C,eAAiB,EACvD8C,EAAWE,sBAAwBH,EAEvC,CACO,SAASI,GAAqBzvI,GACnC,SAAUA,IAAMA,EAAGwvI,qBACrB,CAsBO,SAASE,GAAkBC,GAChC,IAAIjuC,EAAiBgnC,EAAiBiH,GAMtC,OAJsB,MAAlBjuC,GAA0B+mC,GAAuB,KACnD/mC,EAAiBgnC,EAAiBiH,GAAgBlH,KAG7C/mC,CACT,CACO,SAAS4sC,GAAsBhmH,GACpC,IAAI+3E,EAAc/3E,EAAQjkB,KAC1B,OAAOg8F,IAAgBipC,GAAsBjpC,IAAgBkpC,GAAwBlpC,IAAgBmpC,CACvG,CACO,SAASoG,GAAkBtnH,GAChC,IAAI+3E,EAAc/3E,EAAQjkB,KAC1B,OAAOg8F,IAAgB+oC,GAAyB/oC,IAAgBgpC,CAClE,CACO,SAASwG,GAAe7vI,GAC7B,IAAI+Q,EAAQ43H,EAAe3oI,GAC3B+Q,EAAMy6H,WAAaxrI,EAAGgC,MAAM6vB,KAC5B9gB,EAAM46H,aAAe3rI,EAAGgC,MAAMowB,OAC9B,IAAI09G,EAAc9vI,EAAGqyB,OAAO/P,QAAU,CAAC,EACvCvR,EAAMw6H,WAAauE,EAAY9tI,OAAS8tI,EAAY9tI,MAAM6vB,MAAQ,KAClE9gB,EAAM26H,aAAeoE,EAAY9tI,OAAS8tI,EAAY9tI,MAAMowB,QAAU,IACxE,C,4KC3vBI29G,EAAW,YAAoB,CACjC1rI,KAAM,WACN+e,MAAO,CACLS,GAAI,EACJC,GAAI,EACJf,MAAO,EACPC,OAAQ,GAEVyB,UAAW,SAAUs3D,EAAM34D,GACzB,IAAIS,EAAKT,EAAMS,GACXC,EAAKV,EAAMU,GACXf,EAAQK,EAAML,MAAQ,EACtBC,EAASI,EAAMJ,OAAS,EAC5B+4D,EAAK32D,OAAOvB,EAAIC,EAAKd,GACrB+4D,EAAKi0D,OAAOnsH,EAAKd,EAAOe,EAAKd,GAC7B+4D,EAAKi0D,OAAOnsH,EAAKd,EAAOe,EAAKd,GAC7B+4D,EAAKk0D,WACP,IAOEC,EAAU,YAAoB,CAChC7rI,KAAM,UACN+e,MAAO,CACLS,GAAI,EACJC,GAAI,EACJf,MAAO,EACPC,OAAQ,GAEVyB,UAAW,SAAUs3D,EAAM34D,GACzB,IAAIS,EAAKT,EAAMS,GACXC,EAAKV,EAAMU,GACXf,EAAQK,EAAML,MAAQ,EACtBC,EAASI,EAAMJ,OAAS,EAC5B+4D,EAAK32D,OAAOvB,EAAIC,EAAKd,GACrB+4D,EAAKi0D,OAAOnsH,EAAKd,EAAOe,GACxBi4D,EAAKi0D,OAAOnsH,EAAIC,EAAKd,GACrB+4D,EAAKi0D,OAAOnsH,EAAKd,EAAOe,GACxBi4D,EAAKk0D,WACP,IAOEE,EAAM,YAAoB,CAC5B9rI,KAAM,MACN+e,MAAO,CAELP,EAAG,EACHC,EAAG,EACHC,MAAO,EACPC,OAAQ,GAEVyB,UAAW,SAAUs3D,EAAM34D,GACzB,IAAIP,EAAIO,EAAMP,EACVC,EAAIM,EAAMN,EACVstH,EAAIhtH,EAAML,MAAQ,EAAI,EAEtBstH,EAAI7sI,KAAKN,IAAIktI,EAAGhtH,EAAMJ,QACtBY,EAAIwsH,EAAI,EAERr0G,EAAKnY,EAAIA,GAAKysH,EAAIzsH,GAClBE,EAAKhB,EAAIutH,EAAIzsH,EAAImY,EACjBrU,EAAQlkB,KAAK8sI,KAAKv0G,EAAKnY,GAEvBkY,EAAKt4B,KAAKuhB,IAAI2C,GAAS9D,EACvB2sH,EAAO/sI,KAAKyhB,IAAIyC,GAChB8oH,EAAOhtI,KAAKuhB,IAAI2C,GAChB+oH,EAAY,GAAJ7sH,EACR8sH,EAAa,GAAJ9sH,EACbm4D,EAAK32D,OAAOvC,EAAIiZ,EAAIhY,EAAKiY,GACzBggD,EAAK12D,IAAIxC,EAAGiB,EAAIF,EAAGpgB,KAAK6gB,GAAKqD,EAAiB,EAAVlkB,KAAK6gB,GAASqD,GAClDq0D,EAAK40D,cAAc9tH,EAAIiZ,EAAKy0G,EAAOE,EAAO3sH,EAAKiY,EAAKy0G,EAAOC,EAAO5tH,EAAGC,EAAI4tH,EAAQ7tH,EAAGC,GACpFi5D,EAAK40D,cAAc9tH,EAAGC,EAAI4tH,EAAQ7tH,EAAIiZ,EAAKy0G,EAAOE,EAAO3sH,EAAKiY,EAAKy0G,EAAOC,EAAO5tH,EAAIiZ,EAAIhY,EAAKiY,GAC9FggD,EAAKk0D,WACP,IAOEW,EAAQ,YAAoB,CAC9BvsI,KAAM,QACN+e,MAAO,CACLP,EAAG,EACHC,EAAG,EACHC,MAAO,EACPC,OAAQ,GAEVyB,UAAW,SAAU/P,EAAK0O,GACxB,IAAIJ,EAASI,EAAMJ,OACfD,EAAQK,EAAML,MACdF,EAAIO,EAAMP,EACVC,EAAIM,EAAMN,EACVgZ,EAAK/Y,EAAQ,EAAI,EACrBrO,EAAI0Q,OAAOvC,EAAGC,GACdpO,EAAIs7H,OAAOntH,EAAIiZ,EAAIhZ,EAAIE,GACvBtO,EAAIs7H,OAAOntH,EAAGC,EAAIE,EAAS,EAAI,GAC/BtO,EAAIs7H,OAAOntH,EAAIiZ,EAAIhZ,EAAIE,GACvBtO,EAAIs7H,OAAOntH,EAAGC,GACdpO,EAAIu7H,WACN,IAOEY,EAAc,CAChBpyG,KAAM,IACNnd,KAAM,IACNwvH,UAAW,IACXC,OAAQ,IACRC,OAAQ,IACRC,QAASf,EACTgB,IAAKf,EACL9gF,MAAOuhF,EACPO,SAAUpB,GAERqB,EAAoB,CACtB3yG,KAAM,SAAU5b,EAAGC,EAAGstH,EAAGC,EAAGjtH,GAC1BA,EAAMknB,GAAKznB,EACXO,EAAMmnB,GAAKznB,EAAIutH,EAAI,EACnBjtH,EAAM+L,GAAKtM,EAAIutH,EACfhtH,EAAMgM,GAAKtM,EAAIutH,EAAI,CACrB,EACA/uH,KAAM,SAAUuB,EAAGC,EAAGstH,EAAGC,EAAGjtH,GAC1BA,EAAMP,EAAIA,EACVO,EAAMN,EAAIA,EACVM,EAAML,MAAQqtH,EACdhtH,EAAMJ,OAASqtH,CACjB,EACAS,UAAW,SAAUjuH,EAAGC,EAAGstH,EAAGC,EAAGjtH,GAC/BA,EAAMP,EAAIA,EACVO,EAAMN,EAAIA,EACVM,EAAML,MAAQqtH,EACdhtH,EAAMJ,OAASqtH,EACfjtH,EAAMQ,EAAIpgB,KAAKH,IAAI+sI,EAAGC,GAAK,CAC7B,EACAU,OAAQ,SAAUluH,EAAGC,EAAGstH,EAAGC,EAAGjtH,GAC5B,IAAIte,EAAOtB,KAAKH,IAAI+sI,EAAGC,GACvBjtH,EAAMP,EAAIA,EACVO,EAAMN,EAAIA,EACVM,EAAML,MAAQje,EACdse,EAAMJ,OAASle,CACjB,EACAksI,OAAQ,SAAUnuH,EAAGC,EAAGstH,EAAGC,EAAGjtH,GAE5BA,EAAMS,GAAKhB,EAAIutH,EAAI,EACnBhtH,EAAMU,GAAKhB,EAAIutH,EAAI,EACnBjtH,EAAMQ,EAAIpgB,KAAKH,IAAI+sI,EAAGC,GAAK,CAC7B,EACAY,QAAS,SAAUpuH,EAAGC,EAAGstH,EAAGC,EAAGjtH,GAC7BA,EAAMS,GAAKhB,EAAIutH,EAAI,EACnBhtH,EAAMU,GAAKhB,EAAIutH,EAAI,EACnBjtH,EAAML,MAAQqtH,EACdhtH,EAAMJ,OAASqtH,CACjB,EACAa,IAAK,SAAUruH,EAAGC,EAAGstH,EAAGC,EAAGjtH,GACzBA,EAAMP,EAAIA,EAAIutH,EAAI,EAClBhtH,EAAMN,EAAIA,EAAIutH,EAAI,EAClBjtH,EAAML,MAAQqtH,EACdhtH,EAAMJ,OAASqtH,CACjB,EACAhhF,MAAO,SAAUxsC,EAAGC,EAAGstH,EAAGC,EAAGjtH,GAC3BA,EAAMP,EAAIA,EAAIutH,EAAI,EAClBhtH,EAAMN,EAAIA,EAAIutH,EAAI,EAClBjtH,EAAML,MAAQqtH,EACdhtH,EAAMJ,OAASqtH,CACjB,EACAc,SAAU,SAAUtuH,EAAGC,EAAGstH,EAAGC,EAAGjtH,GAC9BA,EAAMS,GAAKhB,EAAIutH,EAAI,EACnBhtH,EAAMU,GAAKhB,EAAIutH,EAAI,EACnBjtH,EAAML,MAAQqtH,EACdhtH,EAAMJ,OAASqtH,CACjB,GAESgB,EAAqB,CAAC,GACjC,QAAKR,GAAa,SAAU5kC,EAAMphG,GAChCwmI,EAAmBxmI,GAAQ,IAAIohG,CACjC,IACA,IAAIqlC,EAAY,YAAoB,CAClCjtI,KAAM,SACN+e,MAAO,CACLotE,WAAY,GACZ3tE,EAAG,EACHC,EAAG,EACHC,MAAO,EACPC,OAAQ,GAEVmN,sBAAuB,SAAUjK,EAAKpmB,EAAQwhB,GAC5C,IAAIrJ,GAAM,QAAsBiO,EAAKpmB,EAAQwhB,GACzC8B,EAAQld,KAAKkd,MAMjB,OAJIA,GAA8B,QAArBA,EAAMotE,YAA4C,WAApB1wF,EAAOumB,WAChDpO,EAAI6K,EAAIxB,EAAKwB,EAAkB,GAAdxB,EAAK0B,QAGjB/K,CACT,EACAwM,UAAW,SAAU/P,EAAK0O,EAAOmuH,GAC/B,IAAI/gD,EAAaptE,EAAMotE,WAEvB,GAAmB,SAAfA,EAAuB,CACzB,IAAIghD,EAAcH,EAAmB7gD,GAEhCghD,IAEHhhD,EAAa,OACbghD,EAAcH,EAAmB7gD,IAGnC4gD,EAAkB5gD,GAAYptE,EAAMP,EAAGO,EAAMN,EAAGM,EAAML,MAAOK,EAAMJ,OAAQwuH,EAAYpuH,OACvFouH,EAAY/sH,UAAU/P,EAAK88H,EAAYpuH,MAAOmuH,EAChD,CACF,IAGF,SAASE,EAAmB5vH,EAAO0vG,GACjC,GAAkB,UAAdrrH,KAAK7B,KAAkB,CACzB,IAAIqtI,EAAcxrI,KAAKlE,MAEnBkE,KAAKyrI,gBACPD,EAAYt/G,OAASvQ,EACrB6vH,EAAY7/G,KAAO0/F,GAAc,OAEjCmgB,EAAYzuH,UAAY,GACW,SAA1B/c,KAAKkd,MAAMotE,WACpBkhD,EAAYt/G,OAASvQ,EAErB6vH,EAAY7/G,KAAOhQ,EAGrB3b,KAAKiiD,YACP,CACF,CAMO,SAASypF,EAAaphD,EAAY3tE,EAAGC,EAAGstH,EAAGC,EAAGxuH,EACrDgwH,GAEE,IAMIC,EANA1nB,EAA0C,IAAhC55B,EAAWrwD,QAAQ,SAgCjC,OA9BIiqF,IACF55B,EAAaA,EAAWuhD,OAAO,EAAG,GAAG15F,cAAgBm4C,EAAWuhD,OAAO,IAMvED,EADqC,IAAnCthD,EAAWrwD,QAAQ,YACR,YAAkBqwD,EAAW3kF,MAAM,GAAI,IAAI,IAAagX,EAAGC,EAAGstH,EAAGC,GAAIwB,EAAa,SAAW,SAC/D,IAAlCrhD,EAAWrwD,QAAQ,WACf,WAAiBqwD,EAAW3kF,MAAM,GAAI,CAAC,EAAG,IAAI,IAAagX,EAAGC,EAAGstH,EAAGC,GAAIwB,EAAa,SAAW,SAEhG,IAAIP,EAAU,CACzBluH,MAAO,CACLotE,WAAYA,EACZ3tE,EAAGA,EACHC,EAAGA,EACHC,MAAOqtH,EACPptH,OAAQqtH,KAKdyB,EAAWH,eAAiBvnB,EAE5B0nB,EAAWE,SAAWP,EAElB5vH,GACFiwH,EAAWE,SAASnwH,GAGfiwH,CACT,CAQO,SAASG,EAAsBC,EAAc58F,GAClD,GAAoB,MAAhB48F,EAQJ,OAJK,QAAQA,KACXA,EAAe,CAACA,EAAcA,IAGzB,EAAC,QAAaA,EAAa,GAAI58F,EAAW,KAAO,GAAG,SAAa,QAAU48F,EAAa,GAAIA,EAAa,IAAK58F,EAAW,KAAO,EACzI,C,uGCxTA,IAAI68F,EAAgB,2BAChBC,EAAO,mBACPC,EAAgB,mBAYb,SAAS/+G,EAASwwE,EAAIlkG,EAAO0yI,GAClC,IAAIC,EAIAx8H,EACA/U,EACA8yF,EACA0+C,EANAC,EAAW,EACXC,EAAW,EACXC,EAAQ,KAOZ,SAASjL,IACPgL,GAAW,IAAI5xE,MAAOqC,UACtBwvE,EAAQ,KACR7uC,EAAG3uF,MAAMnU,EAAO8yF,GAAQ,GAC1B,CANAl0F,EAAQA,GAAS,EAQjB,IAAIM,EAAK,WAGP,IAFA,IAAI0yI,EAAS,GAEJ7+C,EAAK,EAAGA,EAAK3+E,UAAU1T,OAAQqyF,IACtC6+C,EAAO7+C,GAAM3+E,UAAU2+E,GAGzBw+C,GAAW,IAAIzxE,MAAOqC,UACtBniE,EAAQkF,KACR4tF,EAAO8+C,EACP,IAAIC,EAAYL,GAAoB5yI,EAChCkzI,EAAeN,GAAoBF,EACvCE,EAAmB,KACnBz8H,EAAOw8H,GAAYO,EAAeL,EAAWC,GAAYG,EACzD3kF,aAAaykF,GASTG,EACFH,EAAQxiF,WAAWu3E,EAAMmL,GAErB98H,GAAQ,EACV2xH,IAEAiL,EAAQxiF,WAAWu3E,GAAO3xH,GAI9B08H,EAAWF,CACb,EAsBA,OAfAryI,EAAGm5B,MAAQ,WACLs5G,IACFzkF,aAAaykF,GACbA,EAAQ,KAEZ,EAMAzyI,EAAGsyI,iBAAmB,SAAUO,GAC9BP,EAAmBO,CACrB,EAEO7yI,CACT,CAuBO,SAAS8yI,EAAepiH,EAAKqiH,EAAQjuI,EAAMkuI,GAChD,IAAIpvC,EAAKlzE,EAAIqiH,GAEb,GAAKnvC,EAAL,CAIA,IAAIqvC,EAAWrvC,EAAGquC,IAAkBruC,EAChCsvC,EAAmBtvC,EAAGuuC,GACtBgB,EAAWvvC,EAAGsuC,GAElB,GAAIiB,IAAaruI,GAAQouI,IAAqBF,EAAc,CAC1D,GAAY,MAARluI,IAAiBkuI,EACnB,OAAOtiH,EAAIqiH,GAAUE,EAGvBrvC,EAAKlzE,EAAIqiH,GAAU3/G,EAAS6/G,EAAUnuI,EAAuB,aAAjBkuI,GAC5CpvC,EAAGquC,GAAiBgB,EACpBrvC,EAAGuuC,GAAiBa,EACpBpvC,EAAGsuC,GAAQptI,CACb,CAEA,OAAO8+F,CAjBP,CAkBF,CAKO,SAASzqE,EAAMzI,EAAKqiH,GACzB,IAAInvC,EAAKlzE,EAAIqiH,GAETnvC,GAAMA,EAAGquC,KAEXruC,EAAGzqE,OAASyqE,EAAGzqE,QACfzI,EAAIqiH,GAAUnvC,EAAGquC,GAErB,C,otBC/IWmB,EAAa,IACbC,EAA0B,GAAbD,EACbE,EAAwB,GAAbD,EACXE,EAAqB,GAAXD,EACVE,EAAqB,IAAVD,EACXE,EAA0B,CACnCC,KAAM,SACN9uC,MAAO,QACP+uC,IAAK,MACLlM,KAAM,YACNmM,OAAQ,YACRC,OAAQ,iBACRC,YAAa,uBACbC,KAAM,yCAEJC,EAAmB,mBACZC,EAAuB,CAChCP,KAAM,SACN9uC,MAAO,cACP+uC,IAAKK,EACLvM,KAAMuM,EAAmB,IAAMP,EAAwBhM,KACvDmM,OAAQI,EAAmB,IAAMP,EAAwBG,OACzDC,OAAQG,EAAmB,IAAMP,EAAwBI,OACzDC,YAAaL,EAAwBM,MAE5BG,EAAmB,CAAC,OAAQ,QAAS,MAAO,OAAQ,SAAU,SAAU,eACxEC,EAAY,CAAC,OAAQ,YAAa,UAAW,QAAS,OAAQ,YAAa,MAAO,WAAY,cAAe,OAAQ,SAAU,SAAU,eAC7I,SAASC,EAAI3jB,EAAKx8G,GAEvB,OADAw8G,GAAO,GACA,OAAOohB,OAAO,EAAG59H,EAAMw8G,EAAIjvH,QAAUivH,CAC9C,CACO,SAAS4jB,EAAmBC,GACjC,OAAQA,GACN,IAAK,YACL,IAAK,UACH,MAAO,QAET,IAAK,OACL,IAAK,YACH,MAAO,MAET,IAAK,WACL,IAAK,cACH,MAAO,OAET,QAEE,OAAOA,EAEb,CACO,SAASC,EAAkBD,GAChC,OAAOA,IAAaD,EAAmBC,EACzC,CACO,SAASE,EAAoCF,GAClD,OAAQA,GACN,IAAK,OACL,IAAK,QACH,MAAO,MAET,IAAK,cACH,MAAO,cAET,QAEE,MAAO,SAEb,CACO,SAASh+E,EAEhB5f,EAAM+9F,EAAUp0E,EAAOC,GACrB,IAAIwC,EAAO,KAAqBpsB,GAC5B9zB,EAAIkgD,EAAK4xE,EAAmBr0E,MAC5Bs0E,EAAI7xE,EAAK8xE,EAAgBv0E,MAAY,EACrCqS,EAAIpvE,KAAK0f,OAAO2xH,EAAI,GAAK,GAAK,EAC9Bh0E,EAAImC,EAAK+xE,EAAex0E,MACxBvpC,EAAIgsC,EAAK,OAASzC,EAAQ,MAAQ,IAAM,SACxCy0E,EAAIhyE,EAAKiyE,EAAgB10E,MACzB8vE,GAAK2E,EAAI,GAAK,GAAK,EACnB37F,EAAI2pB,EAAKkyE,EAAkB30E,MAC3BuqC,EAAI9nC,EAAKmyE,EAAkB50E,MAC3B60E,EAAIpyE,EAAKqyE,EAAuB90E,MAChC+0E,EAAc90E,aAAgB,IAAQA,GAAO,QAAeA,GAAQ,QAAgB,UACpF+0E,EAAYD,EAAYjrH,SAAS,QACjCy6E,EAAQywC,EAAUrxI,IAAI,SACtB6gG,EAAYwwC,EAAUrxI,IAAI,aAC1B8gG,EAAYuwC,EAAUrxI,IAAI,aAC1B+gG,EAAgBswC,EAAUrxI,IAAI,iBAClC,OAAQywI,GAAY,IAAI7qG,QAAQ,UAAWhnB,EAAI,IAAIgnB,QAAQ,QAAShnB,EAAI,IAAM,IAAIgnB,QAAQ,OAAQ8oC,EAAI,IAAI9oC,QAAQ,UAAWg7D,EAAM+vC,EAAI,IAAI/qG,QAAQ,SAAUi7D,EAAU8vC,EAAI,IAAI/qG,QAAQ,QAASwqG,EAAIO,EAAG,IAAI/qG,QAAQ,OAAQ+qG,EAAI,IAAI/qG,QAAQ,QAASwqG,EAAIzzE,EAAG,IAAI/2B,QAAQ,OAAQ+2B,EAAI,IAAI/2B,QAAQ,UAAWk7D,EAAUhuE,IAAI8S,QAAQ,QAASm7D,EAAcjuE,IAAI8S,QAAQ,OAAQ9S,EAAI,IAAI8S,QAAQ,QAASwqG,EAAIU,EAAG,IAAIlrG,QAAQ,OAAQkrG,EAAI,IAAIlrG,QAAQ,QAASwqG,EAAIjE,EAAI,GAAI,IAAIvmG,QAAQ,OAAQumG,EAAI,IAAIvmG,QAAQ,QAASwqG,EAAIj7F,EAAG,IAAIvP,QAAQ,OAAQuP,EAAI,IAAIvP,QAAQ,QAASwqG,EAAIxpC,EAAG,IAAIhhE,QAAQ,OAAQghE,EAAI,IAAIhhE,QAAQ,SAAUwqG,EAAIc,EAAG,IAAItrG,QAAQ,OAAQsrG,EAAI,GAC3nB,CACO,SAASI,EAAcp6F,EAAM9qC,EAAKivB,EAAWihC,EAAMD,GACxD,IAAIo0E,EAAW,KAEf,GAAI,KAAgBp1G,GAElBo1G,EAAWp1G,OACN,GAAI,KAAkBA,GAE3Bo1G,EAAWp1G,EAAU6b,EAAKhoC,MAAO9C,EAAK,CACpCkjC,MAAO4H,EAAK5H,YAET,CACL,IAAIiiG,EAAW,KAAc,CAAC,EAAG9B,GAEjC,GAAIv4F,EAAK5H,MAAQ,EACf,IAAK,IAAIhyC,EAAI,EAAGA,EAAI4yI,EAAiB1yI,SAAUF,EAC7Ci0I,EAASrB,EAAiB5yI,IAAM,YAAci0I,EAASrB,EAAiB5yI,IAAM,IAIlF,IAAIk0I,EAAkBn2G,GAAkC,IAAtBA,EAAUo2G,QAAoBp2G,EAC9D,KAAgBA,EAAWk2G,GAAYA,EACrCh0E,EAAOm0E,EAAiBx6F,EAAKhoC,MAAOmtD,GAExC,GAAIm1E,EAAgBj0E,GAClBkzE,EAAWe,EAAgBj0E,QACtB,GAAIi0E,EAAgBC,QAAS,CAElC,IAAIE,EAAWxB,EAAUl0G,QAAQshC,GAEjC,IAASjgE,EAAIq0I,EAAW,EAAGr0I,GAAK,IAAKA,EACnC,GAAIk0I,EAAgBj0E,GAAO,CACzBkzE,EAAWe,EAAgBj0E,GAC3B,KACF,CAGFkzE,EAAWA,GAAYc,EAASxB,IAClC,CAEA,GAAI,KAAeU,GAAW,CAC5B,IAAImB,EAAwB,MAAd16F,EAAK5H,MAAgB,EAAI4H,EAAK5H,OAAS,EAAI4H,EAAK5H,MAAQmhG,EAASjzI,OAAS05C,EAAK5H,MAC7FsiG,EAAUtyI,KAAKH,IAAIyyI,EAASnB,EAASjzI,OAAS,GAC9CizI,EAAWA,EAASmB,EACtB,CACF,CAEA,OAAOt/E,EAAO,IAAIsK,KAAK1lB,EAAKhoC,OAAQuhI,EAAUp0E,EAAOC,EACvD,CACO,SAASo1E,EAAiBxiI,EAAOmtD,GACtC,IAAIyC,EAAO,KAAqB5vD,GAC5ByhI,EAAI7xE,EAAK8xE,EAAgBv0E,MAAY,EACrCM,EAAImC,EAAK+xE,EAAex0E,MACxB8vE,EAAIrtE,EAAKiyE,EAAgB10E,MACzBlnB,EAAI2pB,EAAKkyE,EAAkB30E,MAC3BuqC,EAAI9nC,EAAKmyE,EAAkB50E,MAC3B60E,EAAIpyE,EAAKqyE,EAAuB90E,MAChCw1E,EAAiB,IAANX,EACXY,EAAWD,GAAkB,IAANjrC,EACvBmrC,EAASD,GAAkB,IAAN38F,EACrB68F,EAAQD,GAAgB,IAAN5F,EAClB8F,EAAUD,GAAe,IAANr1E,EACnBu1E,EAASD,GAAiB,IAANtB,EAExB,OAAIuB,EACK,OACED,EACF,QACED,EACF,MACED,EACF,OACED,EACF,SACED,EACF,SAEA,aAEX,CACO,SAASM,EAAajjI,EAAOquD,EAAMlB,GACxC,IAAIyC,EAAO,KAAgB5vD,GAAS,KAAqBA,GAASA,EAGlE,OAFAquD,EAAOA,GAAQm0E,EAAiBxiI,EAAOmtD,GAE/BkB,GACN,IAAK,OACH,OAAOuB,EAAK4xE,EAAmBr0E,MAEjC,IAAK,YACH,OAAOyC,EAAK8xE,EAAgBv0E,OAAa,EAAI,EAAI,EAEnD,IAAK,UACH,OAAO/8D,KAAK0f,OAAO8/C,EAAK8xE,EAAgBv0E,MAAY,GAAK,GAE3D,IAAK,QACH,OAAOyC,EAAK8xE,EAAgBv0E,MAE9B,IAAK,MACH,OAAOyC,EAAK+xE,EAAex0E,MAE7B,IAAK,WACH,OAAOyC,EAAKiyE,EAAgB10E,MAAY,GAE1C,IAAK,OACH,OAAOyC,EAAKiyE,EAAgB10E,MAE9B,IAAK,SACH,OAAOyC,EAAKkyE,EAAkB30E,MAEhC,IAAK,SACH,OAAOyC,EAAKmyE,EAAkB50E,MAEhC,IAAK,cACH,OAAOyC,EAAKqyE,EAAuB90E,MAEzC,CACO,SAASq0E,EAAmBr0E,GACjC,OAAOA,EAAQ,iBAAmB,aACpC,CACO,SAASu0E,EAAgBv0E,GAC9B,OAAOA,EAAQ,cAAgB,UACjC,CACO,SAASw0E,EAAex0E,GAC7B,OAAOA,EAAQ,aAAe,SAChC,CACO,SAAS00E,EAAgB10E,GAC9B,OAAOA,EAAQ,cAAgB,UACjC,CACO,SAAS20E,EAAkB30E,GAChC,OAAOA,EAAQ,gBAAkB,YACnC,CACO,SAAS40E,EAAkB50E,GAChC,OAAOA,EAAQ,gBAAkB,YACnC,CACO,SAAS80E,EAAuB90E,GACrC,OAAOA,EAAQ,qBAAuB,iBACxC,CACO,SAAS+1E,EAAmB/1E,GACjC,OAAOA,EAAQ,iBAAmB,aACpC,CACO,SAASg2E,EAAgBh2E,GAC9B,OAAOA,EAAQ,cAAgB,UACjC,CACO,SAASi2E,EAAej2E,GAC7B,OAAOA,EAAQ,aAAe,SAChC,CACO,SAASk2E,EAAgBl2E,GAC9B,OAAOA,EAAQ,cAAgB,UACjC,CACO,SAASm2E,EAAkBn2E,GAChC,OAAOA,EAAQ,gBAAkB,YACnC,CACO,SAASo2E,EAAkBp2E,GAChC,OAAOA,EAAQ,gBAAkB,YACnC,CACO,SAASq2E,EAAuBr2E,GACrC,OAAOA,EAAQ,qBAAuB,iBACxC,C,sQCtPWs2E,GAAoB,QAAc,CAAC,UAAW,QAAS,WAAY,SAAU,cAAe,eAC5FC,EAAyB,WACzBC,EAA2B,YAC3BC,EAA4B,aAC5BC,EAA8B,eAC9BC,EAA4B,aAC5BC,EAAwB,UACxBC,EAA0B,SAC1BC,EAAuB,K,qHCF9BjiH,EAAQ,OACRkiH,GAAgB,SAEhB33B,EAEJ,WACE,SAASA,IACPz5G,KAAKqjB,MAAQ,IAAI,IACjBrjB,KAAKmsD,IAAM,KAAqB,aAChCnsD,KAAK6+E,YAAa,OAAW,CAC3BuB,KAAMixD,EACN3zI,MAAO4zI,IAETtxI,KAAK6+E,WAAW/+E,QAAU,CACxBqzD,KAAMnzD,KAEV,CA8FA,OA5FAy5G,EAAUn5G,UAAUyqD,KAAO,SAAU9xD,EAAS2E,GAAM,EAEpD67G,EAAUn5G,UAAU6hB,OAAS,SAAUxkB,EAAa1E,EAAS2E,EAAKwkB,GAC5D,CAGN,EAMAq3F,EAAUn5G,UAAUixI,UAAY,SAAU5zI,EAAa1E,EAAS2E,EAAKwkB,GACnE,IAAIvkB,EAAOF,EAAYG,QAAQskB,GAAWA,EAAQ/Q,UAE7CxT,GAQL2zI,EAAgB3zI,EAAMukB,EAAS,WACjC,EAMAq3F,EAAUn5G,UAAUq2E,SAAW,SAAUh5E,EAAa1E,EAAS2E,EAAKwkB,GAClE,IAAIvkB,EAAOF,EAAYG,QAAQskB,GAAWA,EAAQ/Q,UAE7CxT,GAQL2zI,EAAgB3zI,EAAMukB,EAAS,SACjC,EAMAq3F,EAAUn5G,UAAUnE,OAAS,SAAUlD,EAAS2E,GAC9CoC,KAAKqjB,MAAM+C,WACb,EAMAqzF,EAAUn5G,UAAUmoB,QAAU,SAAUxvB,EAAS2E,GAAM,EAEvD67G,EAAUn5G,UAAUw5F,WAAa,SAAUn8F,EAAa1E,EAAS2E,EAAKwkB,GACpEpiB,KAAKmiB,OAAOxkB,EAAa1E,EAAS2E,EAAKwkB,EACzC,EAGAq3F,EAAUn5G,UAAU05F,aAAe,SAAUr8F,EAAa1E,EAAS2E,EAAKwkB,GACtEpiB,KAAKmiB,OAAOxkB,EAAa1E,EAAS2E,EAAKwkB,EACzC,EAGAq3F,EAAUn5G,UAAUy5F,aAAe,SAAUp8F,EAAa1E,EAAS2E,EAAKwkB,GACtEpiB,KAAKmiB,OAAOxkB,EAAa1E,EAAS2E,EAAKwkB,EACzC,EASAq3F,EAAUn5G,UAAU6iB,aAAe,SAAUnpB,IAC3C,IAAAopB,kBAAiBpjB,KAAKqjB,MAAOrpB,EAC/B,EAEAy/G,EAAUg4B,iBAAmB,SAAUrvH,EAASzQ,GAC9Cud,EAAM9M,GAASm4E,aAAe5oF,CAChC,EAEA8nG,EAAUzJ,gBAAkB,WAC1B,IAAI/vC,EAAQw5C,EAAUn5G,UACtB2/D,EAAM9hE,KAAO,OACf,CAH4B,GAKrBs7G,CACT,CA1GA,GAiHA,SAASi4B,EAAW53I,EAAIsyB,EAAOovE,GACzB1hG,IAAM,QAAqBA,KAClB,aAAVsyB,EAAuB,KAAgB,MAAetyB,EAAI0hG,EAE/D,CAEA,SAASg2C,EAAgB3zI,EAAMukB,EAASgK,GACtC,IAAIvzB,EAAY,KAAyBgF,EAAMukB,GAC3Co5E,EAAiBp5E,GAAmC,MAAxBA,EAAQqnH,cAAuB,QAAkBrnH,EAAQqnH,cAAgB,KAExF,MAAb5wI,GACF,QAAK,KAA2BA,IAAY,SAAUquB,GACpDwqH,EAAW7zI,EAAKyT,iBAAiB4V,GAAUkF,EAAOovE,EACpD,IAEA39F,EAAK0T,mBAAkB,SAAUzX,GAC/B43I,EAAW53I,EAAIsyB,EAAOovE,EACxB,GAEJ,CAKA,SAAS61C,EAAevxI,GACtB,OAAOsxI,EAActxI,EAAQulB,MAC/B,CAEA,SAASisH,EAAgBxxI,GACvB,IAAInC,EAAcmC,EAAQulB,MACtBpsB,EAAU6G,EAAQ7G,QAClB2E,EAAMkC,EAAQlC,IACdwkB,EAAUtiB,EAAQsiB,QAElBkN,EAAoB3xB,EAAY4lB,gBAAgB+L,kBAChD6jC,EAAOrzD,EAAQqzD,KACfonC,EAAen4E,GAAW8M,EAAM9M,GAASm4E,aACzC5oF,EAAa2d,EAAoB,2BAA6BirE,GAAgBpnC,EAAKonC,GAAgBA,EAErG,SAMF,MAJmB,WAAf5oF,GACFwhD,EAAKxhD,GAAYhU,EAAa1E,EAAS2E,EAAKwkB,GAGvCuvH,EAAkBhgI,EAC3B,CAzBA,KAA4B8nG,EAAW,CAAC,YACxC,KAAgCA,GA0BhC,IAAIk4B,EAAoB,CACtB9uH,yBAA0B,CACxBs/D,SAAU,SAAUl/D,EAAQnjB,GAC1BA,EAAQqzD,KAAKnwC,kBAAkBC,EAAQnjB,EAAQulB,MAAOvlB,EAAQ7G,QAAS6G,EAAQlC,IAAKkC,EAAQsiB,QAC9F,GAEFD,OAAQ,CAKNmhF,oBAAoB,EACpBnhB,SAAU,SAAUl/D,EAAQnjB,GAC1BA,EAAQqzD,KAAKhxC,OAAOriB,EAAQulB,MAAOvlB,EAAQ7G,QAAS6G,EAAQlC,IAAKkC,EAAQsiB,QAC3E,IAGJ,Q,yDC7LIm3F,EAEJ,WACE,SAASA,IACPv5G,KAAKqjB,MAAQ,IAAI,IACjBrjB,KAAKmsD,IAAM,KAAqB,gBAClC,CAwCA,OAtCAotD,EAAcj5G,UAAUyqD,KAAO,SAAU9xD,EAAS2E,GAAM,EAExD27G,EAAcj5G,UAAU6hB,OAAS,SAAUkD,EAAOpsB,EAAS2E,EAAKwkB,GAAU,EAE1Em3F,EAAcj5G,UAAUmoB,QAAU,SAAUxvB,EAAS2E,GAAM,EAE3D27G,EAAcj5G,UAAUw5F,WAAa,SAAUz0E,EAAOpsB,EAAS2E,EAAKwkB,GACpE,EAEAm3F,EAAcj5G,UAAU05F,aAAe,SAAU30E,EAAOpsB,EAAS2E,EAAKwkB,GACtE,EAEAm3F,EAAcj5G,UAAUy5F,aAAe,SAAU10E,EAAOpsB,EAAS2E,EAAKwkB,GACtE,EAOAm3F,EAAcj5G,UAAUymI,iBAAmB,SAAUhqG,EAAc60G,EAAQ34I,GAC3E,EASAsgH,EAAcj5G,UAAU6iB,aAAe,SAAUnpB,GAC/C,IAAIqpB,EAAQrjB,KAAKqjB,MAEbA,GACFA,EAAMhnB,SAASrC,EAEnB,EAEOu/G,CACT,CA7CA,GAgDA,KAA4BA,GAC5B,KAAgCA,GAChC,Q","sources":["webpack://weight-manager/./node_modules/echarts/lib/animation/basicTransition.js","webpack://weight-manager/./node_modules/echarts/lib/processor/dataSample.js","webpack://weight-manager/./node_modules/echarts/lib/data/DataDiffer.js","webpack://weight-manager/./node_modules/echarts/lib/data/helper/dimensionHelper.js","webpack://weight-manager/./node_modules/echarts/lib/data/SeriesDimensionDefine.js","webpack://weight-manager/./node_modules/echarts/lib/data/SeriesData.js","webpack://weight-manager/./node_modules/echarts/lib/data/helper/createDimensions.js","webpack://weight-manager/./node_modules/echarts/lib/model/referHelper.js","webpack://weight-manager/./node_modules/echarts/lib/chart/helper/createSeriesData.js","webpack://weight-manager/./node_modules/echarts/lib/chart/bar/BaseBarSeries.js","webpack://weight-manager/./node_modules/echarts/lib/chart/bar/BarSeries.js","webpack://weight-manager/./node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","webpack://weight-manager/./node_modules/echarts/lib/util/shape/sausage.js","webpack://weight-manager/./node_modules/echarts/lib/coord/CoordinateSystem.js","webpack://weight-manager/./node_modules/echarts/lib/chart/helper/labelHelper.js","webpack://weight-manager/./node_modules/echarts/lib/label/sectorLabel.js","webpack://weight-manager/./node_modules/echarts/lib/chart/bar/BarView.js","webpack://weight-manager/./node_modules/echarts/lib/chart/bar/install.js","webpack://weight-manager/./node_modules/echarts/lib/chart/helper/createRenderPlanner.js","webpack://weight-manager/./node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","webpack://weight-manager/./node_modules/echarts/lib/component/axisPointer/globalListener.js","webpack://weight-manager/./node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","webpack://weight-manager/./node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","webpack://weight-manager/./node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","webpack://weight-manager/./node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","webpack://weight-manager/./node_modules/echarts/lib/component/axisPointer/axisTrigger.js","webpack://weight-manager/./node_modules/echarts/lib/component/axisPointer/install.js","webpack://weight-manager/./node_modules/echarts/lib/component/axisPointer/modelHelper.js","webpack://weight-manager/./node_modules/echarts/lib/component/axisPointer/viewHelper.js","webpack://weight-manager/./node_modules/echarts/lib/label/labelLayoutHelper.js","webpack://weight-manager/./node_modules/echarts/lib/component/axis/AxisBuilder.js","webpack://weight-manager/./node_modules/echarts/lib/component/axis/AxisView.js","webpack://weight-manager/./node_modules/echarts/lib/coord/cartesian/GridModel.js","webpack://weight-manager/./node_modules/echarts/lib/coord/axisModelCommonMixin.js","webpack://weight-manager/./node_modules/echarts/lib/coord/cartesian/AxisModel.js","webpack://weight-manager/./node_modules/echarts/lib/coord/axisDefault.js","webpack://weight-manager/./node_modules/echarts/lib/coord/axisCommonTypes.js","webpack://weight-manager/./node_modules/echarts/lib/coord/axisModelCreator.js","webpack://weight-manager/./node_modules/echarts/lib/coord/cartesian/Cartesian.js","webpack://weight-manager/./node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","webpack://weight-manager/./node_modules/echarts/lib/coord/axisTickLabelBuilder.js","webpack://weight-manager/./node_modules/echarts/lib/coord/Axis.js","webpack://weight-manager/./node_modules/echarts/lib/coord/cartesian/Axis2D.js","webpack://weight-manager/./node_modules/echarts/lib/coord/axisAlignTicks.js","webpack://weight-manager/./node_modules/echarts/lib/coord/cartesian/Grid.js","webpack://weight-manager/./node_modules/echarts/lib/component/axis/axisSplitHelper.js","webpack://weight-manager/./node_modules/echarts/lib/component/axis/CartesianAxisView.js","webpack://weight-manager/./node_modules/echarts/lib/component/grid/installSimple.js","webpack://weight-manager/./node_modules/echarts/lib/component/grid/install.js","webpack://weight-manager/./node_modules/echarts/lib/component/title/install.js","webpack://weight-manager/./node_modules/echarts/lib/component/tooltip/TooltipModel.js","webpack://weight-manager/./node_modules/echarts/lib/component/tooltip/helper.js","webpack://weight-manager/./node_modules/echarts/lib/component/tooltip/TooltipHTMLContent.js","webpack://weight-manager/./node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","webpack://weight-manager/./node_modules/echarts/lib/component/tooltip/TooltipView.js","webpack://weight-manager/./node_modules/echarts/lib/component/tooltip/install.js","webpack://weight-manager/./node_modules/echarts/lib/component/tooltip/tooltipMarkup.js","webpack://weight-manager/./node_modules/echarts/lib/scale/Ordinal.js","webpack://weight-manager/./node_modules/echarts/lib/scale/Time.js","webpack://weight-manager/./node_modules/echarts/lib/scale/Log.js","webpack://weight-manager/./node_modules/echarts/lib/coord/scaleRawExtentInfo.js","webpack://weight-manager/./node_modules/echarts/lib/coord/axisHelper.js","webpack://weight-manager/./node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","webpack://weight-manager/./node_modules/echarts/lib/core/CoordinateSystem.js","webpack://weight-manager/./node_modules/echarts/lib/model/globalDefault.js","webpack://weight-manager/./node_modules/echarts/lib/model/internalComponentCreator.js","webpack://weight-manager/./node_modules/echarts/lib/model/Global.js","webpack://weight-manager/./node_modules/echarts/lib/core/ExtensionAPI.js","webpack://weight-manager/./node_modules/echarts/lib/model/OptionManager.js","webpack://weight-manager/./node_modules/echarts/lib/preprocessor/helper/compatStyle.js","webpack://weight-manager/./node_modules/echarts/lib/preprocessor/backwardCompat.js","webpack://weight-manager/./node_modules/echarts/lib/processor/dataStack.js","webpack://weight-manager/./node_modules/echarts/lib/visual/style.js","webpack://weight-manager/./node_modules/echarts/lib/loading/default.js","webpack://weight-manager/./node_modules/echarts/lib/core/Scheduler.js","webpack://weight-manager/./node_modules/echarts/lib/theme/light.js","webpack://weight-manager/./node_modules/echarts/lib/theme/dark.js","webpack://weight-manager/./node_modules/echarts/lib/util/ECEventProcessor.js","webpack://weight-manager/./node_modules/echarts/lib/visual/symbol.js","webpack://weight-manager/./node_modules/echarts/lib/visual/helper.js","webpack://weight-manager/./node_modules/echarts/lib/legacy/dataSelectAction.js","webpack://weight-manager/./node_modules/echarts/lib/util/decal.js","webpack://weight-manager/./node_modules/echarts/lib/visual/decal.js","webpack://weight-manager/./node_modules/echarts/lib/core/lifecycle.js","webpack://weight-manager/./node_modules/echarts/lib/core/echarts.js","webpack://weight-manager/./node_modules/echarts/lib/core/impl.js","webpack://weight-manager/./node_modules/echarts/lib/i18n/langEN.js","webpack://weight-manager/./node_modules/echarts/lib/i18n/langZH.js","webpack://weight-manager/./node_modules/echarts/lib/core/locale.js","webpack://weight-manager/./node_modules/echarts/lib/core/task.js","webpack://weight-manager/./node_modules/echarts/lib/data/DataStore.js","webpack://weight-manager/./node_modules/echarts/lib/data/OrdinalMeta.js","webpack://weight-manager/./node_modules/echarts/lib/data/Source.js","webpack://weight-manager/./node_modules/echarts/lib/data/helper/SeriesDataSchema.js","webpack://weight-manager/./node_modules/echarts/lib/data/helper/dataProvider.js","webpack://weight-manager/./node_modules/echarts/lib/data/helper/dataStackHelper.js","webpack://weight-manager/./node_modules/echarts/lib/data/helper/dataValueHelper.js","webpack://weight-manager/./node_modules/echarts/lib/data/helper/sourceHelper.js","webpack://weight-manager/./node_modules/echarts/lib/data/helper/transform.js","webpack://weight-manager/./node_modules/echarts/lib/extension.js","webpack://weight-manager/./node_modules/echarts/lib/label/labelStyle.js","webpack://weight-manager/./node_modules/echarts/lib/util/vendor.js","webpack://weight-manager/./node_modules/echarts/lib/layout/barGrid.js","webpack://weight-manager/./node_modules/echarts/lib/model/Component.js","webpack://weight-manager/./node_modules/echarts/lib/model/mixin/areaStyle.js","webpack://weight-manager/./node_modules/echarts/lib/model/mixin/textStyle.js","webpack://weight-manager/./node_modules/echarts/lib/model/Model.js","webpack://weight-manager/./node_modules/echarts/lib/data/helper/sourceManager.js","webpack://weight-manager/./node_modules/echarts/lib/component/tooltip/seriesFormatTooltip.js","webpack://weight-manager/./node_modules/echarts/lib/model/Series.js","webpack://weight-manager/./node_modules/echarts/lib/model/mixin/dataFormat.js","webpack://weight-manager/./node_modules/echarts/lib/model/mixin/itemStyle.js","webpack://weight-manager/./node_modules/echarts/lib/model/mixin/lineStyle.js","webpack://weight-manager/./node_modules/echarts/lib/model/mixin/makeStyleMapper.js","webpack://weight-manager/./node_modules/echarts/lib/model/mixin/palette.js","webpack://weight-manager/./node_modules/echarts/lib/renderer/installSVGRenderer.js","webpack://weight-manager/./node_modules/echarts/lib/scale/Interval.js","webpack://weight-manager/./node_modules/echarts/lib/scale/Scale.js","webpack://weight-manager/./node_modules/echarts/lib/scale/helper.js","webpack://weight-manager/./node_modules/echarts/lib/util/clazz.js","webpack://weight-manager/./node_modules/echarts/lib/util/component.js","webpack://weight-manager/./node_modules/echarts/lib/util/event.js","webpack://weight-manager/./node_modules/echarts/lib/util/format.js","webpack://weight-manager/./node_modules/echarts/lib/util/graphic.js","webpack://weight-manager/./node_modules/echarts/lib/util/innerStore.js","webpack://weight-manager/./node_modules/echarts/lib/util/layout.js","webpack://weight-manager/./node_modules/echarts/lib/util/log.js","webpack://weight-manager/./node_modules/echarts/lib/util/model.js","webpack://weight-manager/./node_modules/echarts/lib/util/number.js","webpack://weight-manager/./node_modules/echarts/lib/util/states.js","webpack://weight-manager/./node_modules/echarts/lib/util/symbol.js","webpack://weight-manager/./node_modules/echarts/lib/util/throttle.js","webpack://weight-manager/./node_modules/echarts/lib/util/time.js","webpack://weight-manager/./node_modules/echarts/lib/util/types.js","webpack://weight-manager/./node_modules/echarts/lib/view/Chart.js","webpack://weight-manager/./node_modules/echarts/lib/view/Component.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isFunction, isObject, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../util/model.js'; // Stored properties for further transition.\n\nexport var transitionStore = makeInner();\n/**\n * Return null if animation is disabled.\n */\n\nexport function getAnimationConfig(animationType, animatableModel, dataIndex, // Extra opts can override the option in animatable model.\nextraOpts, // TODO It's only for pictorial bar now.\nextraDelayParams) {\n  var animationPayload; // Check if there is global animation configuration from dataZoom/resize can override the config in option.\n  // If animation is enabled. Will use this animation config in payload.\n  // If animation is disabled. Just ignore it.\n\n  if (animatableModel && animatableModel.ecModel) {\n    var updatePayload = animatableModel.ecModel.getUpdatePayload();\n    animationPayload = updatePayload && updatePayload.animation;\n  }\n\n  var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();\n  var isUpdate = animationType === 'update';\n\n  if (animationEnabled) {\n    var duration = void 0;\n    var easing = void 0;\n    var delay = void 0;\n\n    if (extraOpts) {\n      duration = retrieve2(extraOpts.duration, 200);\n      easing = retrieve2(extraOpts.easing, 'cubicOut');\n      delay = 0;\n    } else {\n      duration = animatableModel.getShallow(isUpdate ? 'animationDurationUpdate' : 'animationDuration');\n      easing = animatableModel.getShallow(isUpdate ? 'animationEasingUpdate' : 'animationEasing');\n      delay = animatableModel.getShallow(isUpdate ? 'animationDelayUpdate' : 'animationDelay');\n    } // animation from payload has highest priority.\n\n\n    if (animationPayload) {\n      animationPayload.duration != null && (duration = animationPayload.duration);\n      animationPayload.easing != null && (easing = animationPayload.easing);\n      animationPayload.delay != null && (delay = animationPayload.delay);\n    }\n\n    if (isFunction(delay)) {\n      delay = delay(dataIndex, extraDelayParams);\n    }\n\n    if (isFunction(duration)) {\n      duration = duration(dataIndex);\n    }\n\n    var config = {\n      duration: duration || 0,\n      delay: delay,\n      easing: easing\n    };\n    return config;\n  } else {\n    return null;\n  }\n}\n\nfunction animateOrSetProps(animationType, el, props, animatableModel, dataIndex, cb, during) {\n  var isFrom = false;\n  var removeOpt;\n\n  if (isFunction(dataIndex)) {\n    during = cb;\n    cb = dataIndex;\n    dataIndex = null;\n  } else if (isObject(dataIndex)) {\n    cb = dataIndex.cb;\n    during = dataIndex.during;\n    isFrom = dataIndex.isFrom;\n    removeOpt = dataIndex.removeOpt;\n    dataIndex = dataIndex.dataIndex;\n  }\n\n  var isRemove = animationType === 'leave';\n\n  if (!isRemove) {\n    // Must stop the remove animation.\n    el.stopAnimation('leave');\n  }\n\n  var animationConfig = getAnimationConfig(animationType, animatableModel, dataIndex, isRemove ? removeOpt || {} : null, animatableModel && animatableModel.getAnimationDelayParams ? animatableModel.getAnimationDelayParams(el, dataIndex) : null);\n\n  if (animationConfig && animationConfig.duration > 0) {\n    var duration = animationConfig.duration;\n    var animationDelay = animationConfig.delay;\n    var animationEasing = animationConfig.easing;\n    var animateConfig = {\n      duration: duration,\n      delay: animationDelay || 0,\n      easing: animationEasing,\n      done: cb,\n      force: !!cb || !!during,\n      // Set to final state in update/init animation.\n      // So the post processing based on the path shape can be done correctly.\n      setToFinal: !isRemove,\n      scope: animationType,\n      during: during\n    };\n    isFrom ? el.animateFrom(props, animateConfig) : el.animateTo(props, animateConfig);\n  } else {\n    el.stopAnimation(); // If `isFrom`, the props is the \"from\" props.\n\n    !isFrom && el.attr(props); // Call during at least once.\n\n    during && during(1);\n    cb && cb();\n  }\n}\n/**\n * Update graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n * @example\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, dataIndex, function () { console.log('Animation done!'); });\n *     // Or\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, function () { console.log('Animation done!'); });\n */\n\n\nfunction updateProps(el, props, // TODO: TYPE AnimatableModel\nanimatableModel, dataIndex, cb, during) {\n  animateOrSetProps('update', el, props, animatableModel, dataIndex, cb, during);\n}\n\nexport { updateProps };\n/**\n * Init graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n */\n\nexport function initProps(el, props, animatableModel, dataIndex, cb, during) {\n  animateOrSetProps('enter', el, props, animatableModel, dataIndex, cb, during);\n}\n/**\n * If element is removed.\n * It can determine if element is having remove animation.\n */\n\nexport function isElementRemoved(el) {\n  if (!el.__zr) {\n    return true;\n  }\n\n  for (var i = 0; i < el.animators.length; i++) {\n    var animator = el.animators[i];\n\n    if (animator.scope === 'leave') {\n      return true;\n    }\n  }\n\n  return false;\n}\n/**\n * Remove graphic element\n */\n\nexport function removeElement(el, props, animatableModel, dataIndex, cb, during) {\n  // Don't do remove animation twice.\n  if (isElementRemoved(el)) {\n    return;\n  }\n\n  animateOrSetProps('leave', el, props, animatableModel, dataIndex, cb, during);\n}\n\nfunction fadeOutDisplayable(el, animatableModel, dataIndex, done) {\n  el.removeTextContent();\n  el.removeTextGuideLine();\n  removeElement(el, {\n    style: {\n      opacity: 0\n    }\n  }, animatableModel, dataIndex, done);\n}\n\nexport function removeElementWithFadeOut(el, animatableModel, dataIndex) {\n  function doRemove() {\n    el.parent && el.parent.remove(el);\n  } // Hide label and labelLine first\n  // TODO Also use fade out animation?\n\n\n  if (!el.isGroup) {\n    fadeOutDisplayable(el, animatableModel, dataIndex, doRemove);\n  } else {\n    el.traverse(function (disp) {\n      if (!disp.isGroup) {\n        // Can invoke doRemove multiple times.\n        fadeOutDisplayable(disp, animatableModel, dataIndex, doRemove);\n      }\n    });\n  }\n}\n/**\n * Save old style for style transition in universalTransition module.\n * It's used when element will be reused in each render.\n * For chart like map, heatmap, which will always create new element.\n * We don't need to save this because universalTransition can get old style from the old element\n */\n\nexport function saveOldStyle(el) {\n  transitionStore(el).oldStyle = el.style;\n}\nexport function getOldStyle(el) {\n  return transitionStore(el).oldStyle;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isFunction, isString } from 'zrender/lib/core/util.js';\nvar samplers = {\n  average: function (frame) {\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    } // Return NaN if count is 0\n\n\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function (frame) {\n    var sum = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n\n    return sum;\n  },\n  max: function (frame) {\n    var max = -Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(max) ? max : NaN;\n  },\n  min: function (frame) {\n    var min = Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function (frame) {\n    return frame[0];\n  }\n};\n\nvar indexSampler = function (frame) {\n  return Math.round(frame.length / 2);\n};\n\nexport default function dataSample(seriesType) {\n  return {\n    seriesType: seriesType,\n    // FIXME:TS never used, so comment it\n    // modifyOutputEnd: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem;\n      var count = data.count(); // Only cartesian2d support down sampling. Disable it when there is few data.\n\n      if (count > 10 && coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent();\n        var dpr = api.getDevicePixelRatio(); // Coordinste system has been resized\n\n        var size = Math.abs(extent[1] - extent[0]) * (dpr || 1);\n        var rate = Math.round(count / size);\n\n        if (isFinite(rate) && rate > 1) {\n          if (sampling === 'lttb') {\n            seriesModel.setData(data.lttbDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n          }\n\n          var sampler = void 0;\n\n          if (isString(sampling)) {\n            sampler = samplers[sampling];\n          } else if (isFunction(sampling)) {\n            sampler = sampling;\n          }\n\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction dataIndexMapValueLength(valNumOrArrLengthMoreThan2) {\n  return valNumOrArrLengthMoreThan2 == null ? 0 : valNumOrArrLengthMoreThan2.length || 1;\n}\n\nfunction defaultKeyGetter(item) {\n  return item;\n}\n\nvar DataDiffer =\n/** @class */\nfunction () {\n  /**\n   * @param context Can be visited by this.context in callback.\n   */\n  function DataDiffer(oldArr, newArr, oldKeyGetter, newKeyGetter, context, // By default: 'oneToOne'.\n  diffMode) {\n    this._old = oldArr;\n    this._new = newArr;\n    this._oldKeyGetter = oldKeyGetter || defaultKeyGetter;\n    this._newKeyGetter = newKeyGetter || defaultKeyGetter; // Visible in callback via `this.context`;\n\n    this.context = context;\n    this._diffModeMultiple = diffMode === 'multiple';\n  }\n  /**\n   * Callback function when add a data\n   */\n\n\n  DataDiffer.prototype.add = function (func) {\n    this._add = func;\n    return this;\n  };\n  /**\n   * Callback function when update a data\n   */\n\n\n  DataDiffer.prototype.update = function (func) {\n    this._update = func;\n    return this;\n  };\n  /**\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\n   */\n\n\n  DataDiffer.prototype.updateManyToOne = function (func) {\n    this._updateManyToOne = func;\n    return this;\n  };\n  /**\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\n   */\n\n\n  DataDiffer.prototype.updateOneToMany = function (func) {\n    this._updateOneToMany = func;\n    return this;\n  };\n  /**\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\n   */\n\n\n  DataDiffer.prototype.updateManyToMany = function (func) {\n    this._updateManyToMany = func;\n    return this;\n  };\n  /**\n   * Callback function when remove a data\n   */\n\n\n  DataDiffer.prototype.remove = function (func) {\n    this._remove = func;\n    return this;\n  };\n\n  DataDiffer.prototype.execute = function () {\n    this[this._diffModeMultiple ? '_executeMultiple' : '_executeOneToOne']();\n  };\n\n  DataDiffer.prototype._executeOneToOne = function () {\n    var oldArr = this._old;\n    var newArr = this._new;\n    var newDataIndexMap = {};\n    var oldDataKeyArr = new Array(oldArr.length);\n    var newDataKeyArr = new Array(newArr.length);\n\n    this._initIndexMap(oldArr, null, oldDataKeyArr, '_oldKeyGetter');\n\n    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n\n    for (var i = 0; i < oldArr.length; i++) {\n      var oldKey = oldDataKeyArr[i];\n      var newIdxMapVal = newDataIndexMap[oldKey];\n      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal); // idx can never be empty array here. see 'set null' logic below.\n\n      if (newIdxMapValLen > 1) {\n        // Consider there is duplicate key (for example, use dataItem.name as key).\n        // We should make sure every item in newArr and oldArr can be visited.\n        var newIdx = newIdxMapVal.shift();\n\n        if (newIdxMapVal.length === 1) {\n          newDataIndexMap[oldKey] = newIdxMapVal[0];\n        }\n\n        this._update && this._update(newIdx, i);\n      } else if (newIdxMapValLen === 1) {\n        newDataIndexMap[oldKey] = null;\n        this._update && this._update(newIdxMapVal, i);\n      } else {\n        this._remove && this._remove(i);\n      }\n    }\n\n    this._performRestAdd(newDataKeyArr, newDataIndexMap);\n  };\n  /**\n   * For example, consider the case:\n   * oldData: [o0, o1, o2, o3, o4, o5, o6, o7],\n   * newData: [n0, n1, n2, n3, n4, n5, n6, n7, n8],\n   * Where:\n   *     o0, o1, n0 has key 'a' (many to one)\n   *     o5, n4, n5, n6 has key 'b' (one to many)\n   *     o2, n1 has key 'c' (one to one)\n   *     n2, n3 has key 'd' (add)\n   *     o3, o4 has key 'e' (remove)\n   *     o6, o7, n7, n8 has key 'f' (many to many, treated as add and remove)\n   * Then:\n   *     (The order of the following directives are not ensured.)\n   *     this._updateManyToOne(n0, [o0, o1]);\n   *     this._updateOneToMany([n4, n5, n6], o5);\n   *     this._update(n1, o2);\n   *     this._remove(o3);\n   *     this._remove(o4);\n   *     this._remove(o6);\n   *     this._remove(o7);\n   *     this._add(n2);\n   *     this._add(n3);\n   *     this._add(n7);\n   *     this._add(n8);\n   */\n\n\n  DataDiffer.prototype._executeMultiple = function () {\n    var oldArr = this._old;\n    var newArr = this._new;\n    var oldDataIndexMap = {};\n    var newDataIndexMap = {};\n    var oldDataKeyArr = [];\n    var newDataKeyArr = [];\n\n    this._initIndexMap(oldArr, oldDataIndexMap, oldDataKeyArr, '_oldKeyGetter');\n\n    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n\n    for (var i = 0; i < oldDataKeyArr.length; i++) {\n      var oldKey = oldDataKeyArr[i];\n      var oldIdxMapVal = oldDataIndexMap[oldKey];\n      var newIdxMapVal = newDataIndexMap[oldKey];\n      var oldIdxMapValLen = dataIndexMapValueLength(oldIdxMapVal);\n      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n\n      if (oldIdxMapValLen > 1 && newIdxMapValLen === 1) {\n        this._updateManyToOne && this._updateManyToOne(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen === 1 && newIdxMapValLen > 1) {\n        this._updateOneToMany && this._updateOneToMany(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen === 1 && newIdxMapValLen === 1) {\n        this._update && this._update(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen > 1 && newIdxMapValLen > 1) {\n        this._updateManyToMany && this._updateManyToMany(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen > 1) {\n        for (var i_1 = 0; i_1 < oldIdxMapValLen; i_1++) {\n          this._remove && this._remove(oldIdxMapVal[i_1]);\n        }\n      } else {\n        this._remove && this._remove(oldIdxMapVal);\n      }\n    }\n\n    this._performRestAdd(newDataKeyArr, newDataIndexMap);\n  };\n\n  DataDiffer.prototype._performRestAdd = function (newDataKeyArr, newDataIndexMap) {\n    for (var i = 0; i < newDataKeyArr.length; i++) {\n      var newKey = newDataKeyArr[i];\n      var newIdxMapVal = newDataIndexMap[newKey];\n      var idxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n\n      if (idxMapValLen > 1) {\n        for (var j = 0; j < idxMapValLen; j++) {\n          this._add && this._add(newIdxMapVal[j]);\n        }\n      } else if (idxMapValLen === 1) {\n        this._add && this._add(newIdxMapVal);\n      } // Support both `newDataKeyArr` are duplication removed or not removed.\n\n\n      newDataIndexMap[newKey] = null;\n    }\n  };\n\n  DataDiffer.prototype._initIndexMap = function (arr, // Can be null.\n  map, // In 'byKey', the output `keyArr` is duplication removed.\n  // In 'byIndex', the output `keyArr` is not duplication removed and\n  //     its indices are accurately corresponding to `arr`.\n  keyArr, keyGetterName) {\n    var cbModeMultiple = this._diffModeMultiple;\n\n    for (var i = 0; i < arr.length; i++) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var key = '_ec_' + this[keyGetterName](arr[i], i);\n\n      if (!cbModeMultiple) {\n        keyArr[i] = key;\n      }\n\n      if (!map) {\n        continue;\n      }\n\n      var idxMapVal = map[key];\n      var idxMapValLen = dataIndexMapValueLength(idxMapVal);\n\n      if (idxMapValLen === 0) {\n        // Simple optimize: in most cases, one index has one key,\n        // do not need array.\n        map[key] = i;\n\n        if (cbModeMultiple) {\n          keyArr.push(key);\n        }\n      } else if (idxMapValLen === 1) {\n        map[key] = [idxMapVal, i];\n      } else {\n        idxMapVal.push(i);\n      }\n    }\n  };\n\n  return DataDiffer;\n}();\n\nexport default DataDiffer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, createHashMap, assert, map } from 'zrender/lib/core/util.js';\nimport { VISUAL_DIMENSIONS } from '../../util/types.js';\n\nvar DimensionUserOuput =\n/** @class */\nfunction () {\n  function DimensionUserOuput(encode, dimRequest) {\n    this._encode = encode;\n    this._schema = dimRequest;\n  }\n\n  DimensionUserOuput.prototype.get = function () {\n    return {\n      // Do not generate full dimension name until fist used.\n      fullDimensions: this._getFullDimensionNames(),\n      encode: this._encode\n    };\n  };\n  /**\n   * Get all data store dimension names.\n   * Theoretically a series data store is defined both by series and used dataset (if any).\n   * If some dimensions are omitted for performance reason in `this.dimensions`,\n   * the dimension name may not be auto-generated if user does not specify a dimension name.\n   * In this case, the dimension name is `null`/`undefined`.\n   */\n\n\n  DimensionUserOuput.prototype._getFullDimensionNames = function () {\n    if (!this._cachedDimNames) {\n      this._cachedDimNames = this._schema ? this._schema.makeOutputDimensionNames() : [];\n    }\n\n    return this._cachedDimNames;\n  };\n\n  return DimensionUserOuput;\n}();\n\n;\nexport function summarizeDimensions(data, schema) {\n  var summary = {};\n  var encode = summary.encode = {};\n  var notExtraCoordDimMap = createHashMap();\n  var defaultedLabel = [];\n  var defaultedTooltip = [];\n  var userOutputEncode = {};\n  each(data.dimensions, function (dimName) {\n    var dimItem = data.getDimensionInfo(dimName);\n    var coordDim = dimItem.coordDim;\n\n    if (coordDim) {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(VISUAL_DIMENSIONS.get(coordDim) == null);\n      }\n\n      var coordDimIndex = dimItem.coordDimIndex;\n      getOrCreateEncodeArr(encode, coordDim)[coordDimIndex] = dimName;\n\n      if (!dimItem.isExtraCoord) {\n        notExtraCoordDimMap.set(coordDim, 1); // Use the last coord dim (and label friendly) as default label,\n        // because when dataset is used, it is hard to guess which dimension\n        // can be value dimension. If both show x, y on label is not look good,\n        // and conventionally y axis is focused more.\n\n        if (mayLabelDimType(dimItem.type)) {\n          defaultedLabel[0] = dimName;\n        } // User output encode do not contain generated coords.\n        // And it only has index. User can use index to retrieve value from the raw item array.\n\n\n        getOrCreateEncodeArr(userOutputEncode, coordDim)[coordDimIndex] = data.getDimensionIndex(dimItem.name);\n      }\n\n      if (dimItem.defaultTooltip) {\n        defaultedTooltip.push(dimName);\n      }\n    }\n\n    VISUAL_DIMENSIONS.each(function (v, otherDim) {\n      var encodeArr = getOrCreateEncodeArr(encode, otherDim);\n      var dimIndex = dimItem.otherDims[otherDim];\n\n      if (dimIndex != null && dimIndex !== false) {\n        encodeArr[dimIndex] = dimItem.name;\n      }\n    });\n  });\n  var dataDimsOnCoord = [];\n  var encodeFirstDimNotExtra = {};\n  notExtraCoordDimMap.each(function (v, coordDim) {\n    var dimArr = encode[coordDim];\n    encodeFirstDimNotExtra[coordDim] = dimArr[0]; // Not necessary to remove duplicate, because a data\n    // dim canot on more than one coordDim.\n\n    dataDimsOnCoord = dataDimsOnCoord.concat(dimArr);\n  });\n  summary.dataDimsOnCoord = dataDimsOnCoord;\n  summary.dataDimIndicesOnCoord = map(dataDimsOnCoord, function (dimName) {\n    return data.getDimensionInfo(dimName).storeDimIndex;\n  });\n  summary.encodeFirstDimNotExtra = encodeFirstDimNotExtra;\n  var encodeLabel = encode.label; // FIXME `encode.label` is not recommanded, because formatter can not be set\n  // in this way. Use label.formatter instead. May be remove this approach someday.\n\n  if (encodeLabel && encodeLabel.length) {\n    defaultedLabel = encodeLabel.slice();\n  }\n\n  var encodeTooltip = encode.tooltip;\n\n  if (encodeTooltip && encodeTooltip.length) {\n    defaultedTooltip = encodeTooltip.slice();\n  } else if (!defaultedTooltip.length) {\n    defaultedTooltip = defaultedLabel.slice();\n  }\n\n  encode.defaultedLabel = defaultedLabel;\n  encode.defaultedTooltip = defaultedTooltip;\n  summary.userOutput = new DimensionUserOuput(userOutputEncode, schema);\n  return summary;\n}\n\nfunction getOrCreateEncodeArr(encode, dim) {\n  if (!encode.hasOwnProperty(dim)) {\n    encode[dim] = [];\n  }\n\n  return encode[dim];\n} // FIXME:TS should be type `AxisType`\n\n\nexport function getDimensionTypeByAxis(axisType) {\n  return axisType === 'category' ? 'ordinal' : axisType === 'time' ? 'time' : 'float';\n}\n\nfunction mayLabelDimType(dimType) {\n  // In most cases, ordinal and time do not suitable for label.\n  // Ordinal info can be displayed on axis. Time is too long.\n  return !(dimType === 'ordinal' || dimType === 'time');\n} // function findTheLastDimMayLabel(data) {\n//     // Get last value dim\n//     let dimensions = data.dimensions.slice();\n//     let valueType;\n//     let valueDim;\n//     while (dimensions.length && (\n//         valueDim = dimensions.pop(),\n//         valueType = data.getDimensionInfo(valueDim).type,\n//         valueType === 'ordinal' || valueType === 'time'\n//     )) {} // jshint ignore:line\n//     return valueDim;\n// }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\n\nvar SeriesDimensionDefine =\n/** @class */\nfunction () {\n  /**\n   * @param opt All of the fields will be shallow copied.\n   */\n  function SeriesDimensionDefine(opt) {\n    /**\n     * The format of `otherDims` is:\n     * ```js\n     * {\n     *     tooltip?: number\n     *     label?: number\n     *     itemName?: number\n     *     seriesName?: number\n     * }\n     * ```\n     *\n     * A `series.encode` can specified these fields:\n     * ```js\n     * encode: {\n     *     // \"3, 1, 5\" is the index of data dimension.\n     *     tooltip: [3, 1, 5],\n     *     label: [0, 3],\n     *     ...\n     * }\n     * ```\n     * `otherDims` is the parse result of the `series.encode` above, like:\n     * ```js\n     * // Suppose the index of this data dimension is `3`.\n     * this.otherDims = {\n     *     // `3` is at the index `0` of the `encode.tooltip`\n     *     tooltip: 0,\n     *     // `3` is at the index `1` of the `encode.label`\n     *     label: 1\n     * };\n     * ```\n     *\n     * This prop should never be `null`/`undefined` after initialized.\n     */\n    this.otherDims = {};\n\n    if (opt != null) {\n      zrUtil.extend(this, opt);\n    }\n  }\n\n  return SeriesDimensionDefine;\n}();\n\n;\nexport default SeriesDimensionDefine;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Int32Array */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from '../model/Model.js';\nimport DataDiffer from './DataDiffer.js';\nimport { DefaultDataProvider } from './helper/dataProvider.js';\nimport { summarizeDimensions } from './helper/dimensionHelper.js';\nimport SeriesDimensionDefine from './SeriesDimensionDefine.js';\nimport { SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ORIGINAL } from '../util/types.js';\nimport { convertOptionIdName, isDataItemOption } from '../util/model.js';\nimport { setCommonECData } from '../util/innerStore.js';\nimport { isSourceInstance } from './Source.js';\nimport DataStore from './DataStore.js';\nimport { isSeriesDataSchema } from './helper/SeriesDataSchema.js';\nvar isObject = zrUtil.isObject;\nvar map = zrUtil.map;\nvar CtorInt32Array = typeof Int32Array === 'undefined' ? Array : Int32Array; // Use prefix to avoid index to be the same as otherIdList[idx],\n// which will cause weird udpate animation.\n\nvar ID_PREFIX = 'e\\0\\0';\nvar INDEX_NOT_FOUND = -1; // type SeriesDimensionIndex = DimensionIndex;\n\nvar TRANSFERABLE_PROPERTIES = ['hasItemOption', '_nameList', '_idList', '_invertedIndicesMap', '_dimSummary', 'userOutput', '_rawData', '_dimValueGetter', '_nameDimIdx', '_idDimIdx', '_nameRepeatCount'];\nvar CLONE_PROPERTIES = ['_approximateExtent']; // -----------------------------\n// Internal method declarations:\n// -----------------------------\n\nvar prepareInvertedIndex;\nvar getId;\nvar getIdNameFromStore;\nvar normalizeDimensions;\nvar transferProperties;\nvar cloneListForMapAndSample;\nvar makeIdFromName;\n\nvar SeriesData =\n/** @class */\nfunction () {\n  /**\n   * @param dimensionsInput.dimensions\n   *        For example, ['someDimName', {name: 'someDimName', type: 'someDimType'}, ...].\n   *        Dimensions should be concrete names like x, y, z, lng, lat, angle, radius\n   */\n  function SeriesData(dimensionsInput, hostModel) {\n    this.type = 'list';\n    this._dimOmitted = false;\n    this._nameList = [];\n    this._idList = []; // Models of data option is stored sparse for optimizing memory cost\n    // Never used yet (not used yet).\n    // private _optionModels: Model[] = [];\n    // Global visual properties after visual coding\n\n    this._visual = {}; // Globel layout properties.\n\n    this._layout = {}; // Item visual properties after visual coding\n\n    this._itemVisuals = []; // Item layout properties after layout\n\n    this._itemLayouts = []; // Graphic elemnents\n\n    this._graphicEls = []; // key: dim, value: extent\n\n    this._approximateExtent = {};\n    this._calculationInfo = {}; // Having detected that there is data item is non primitive type\n    // (in type `OptionDataItemObject`).\n    // Like `data: [ { value: xx, itemStyle: {...} }, ...]`\n    // At present it only happen in `SOURCE_FORMAT_ORIGINAL`.\n\n    this.hasItemOption = false; // Methods that create a new list based on this list should be listed here.\n    // Notice that those method should `RETURN` the new list.\n\n    this.TRANSFERABLE_METHODS = ['cloneShallow', 'downSample', 'lttbDownSample', 'map']; // Methods that change indices of this list should be listed here.\n\n    this.CHANGABLE_METHODS = ['filterSelf', 'selectRange'];\n    this.DOWNSAMPLE_METHODS = ['downSample', 'lttbDownSample'];\n    var dimensions;\n    var assignStoreDimIdx = false;\n\n    if (isSeriesDataSchema(dimensionsInput)) {\n      dimensions = dimensionsInput.dimensions;\n      this._dimOmitted = dimensionsInput.isDimensionOmitted();\n      this._schema = dimensionsInput;\n    } else {\n      assignStoreDimIdx = true;\n      dimensions = dimensionsInput;\n    }\n\n    dimensions = dimensions || ['x', 'y'];\n    var dimensionInfos = {};\n    var dimensionNames = [];\n    var invertedIndicesMap = {};\n    var needsHasOwn = false;\n    var emptyObj = {};\n\n    for (var i = 0; i < dimensions.length; i++) {\n      // Use the original dimensions[i], where other flag props may exists.\n      var dimInfoInput = dimensions[i];\n      var dimensionInfo = zrUtil.isString(dimInfoInput) ? new SeriesDimensionDefine({\n        name: dimInfoInput\n      }) : !(dimInfoInput instanceof SeriesDimensionDefine) ? new SeriesDimensionDefine(dimInfoInput) : dimInfoInput;\n      var dimensionName = dimensionInfo.name;\n      dimensionInfo.type = dimensionInfo.type || 'float';\n\n      if (!dimensionInfo.coordDim) {\n        dimensionInfo.coordDim = dimensionName;\n        dimensionInfo.coordDimIndex = 0;\n      }\n\n      var otherDims = dimensionInfo.otherDims = dimensionInfo.otherDims || {};\n      dimensionNames.push(dimensionName);\n      dimensionInfos[dimensionName] = dimensionInfo;\n\n      if (emptyObj[dimensionName] != null) {\n        needsHasOwn = true;\n      }\n\n      if (dimensionInfo.createInvertedIndices) {\n        invertedIndicesMap[dimensionName] = [];\n      }\n\n      if (otherDims.itemName === 0) {\n        this._nameDimIdx = i;\n      }\n\n      if (otherDims.itemId === 0) {\n        this._idDimIdx = i;\n      }\n\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.assert(assignStoreDimIdx || dimensionInfo.storeDimIndex >= 0);\n      }\n\n      if (assignStoreDimIdx) {\n        dimensionInfo.storeDimIndex = i;\n      }\n    }\n\n    this.dimensions = dimensionNames;\n    this._dimInfos = dimensionInfos;\n\n    this._initGetDimensionInfo(needsHasOwn);\n\n    this.hostModel = hostModel;\n    this._invertedIndicesMap = invertedIndicesMap;\n\n    if (this._dimOmitted) {\n      var dimIdxToName_1 = this._dimIdxToName = zrUtil.createHashMap();\n      zrUtil.each(dimensionNames, function (dimName) {\n        dimIdxToName_1.set(dimensionInfos[dimName].storeDimIndex, dimName);\n      });\n    }\n  }\n  /**\n   *\n   * Get concrete dimension name by dimension name or dimension index.\n   * If input a dimension name, do not validate whether the dimension name exits.\n   *\n   * @caution\n   * @param dim Must make sure the dimension is `SeriesDimensionLoose`.\n   * Because only those dimensions will have auto-generated dimension names if not\n   * have a user-specified name, and other dimensions will get a return of null/undefined.\n   *\n   * @notice Becuause of this reason, should better use `getDimensionIndex` instead, for examples:\n   * ```js\n   * const val = data.getStore().get(data.getDimensionIndex(dim), dataIdx);\n   * ```\n   *\n   * @return Concrete dim name.\n   */\n\n\n  SeriesData.prototype.getDimension = function (dim) {\n    var dimIdx = this._recognizeDimIndex(dim);\n\n    if (dimIdx == null) {\n      return dim;\n    }\n\n    dimIdx = dim;\n\n    if (!this._dimOmitted) {\n      return this.dimensions[dimIdx];\n    } // Retrieve from series dimension definition becuase it probably contains\n    // generated dimension name (like 'x', 'y').\n\n\n    var dimName = this._dimIdxToName.get(dimIdx);\n\n    if (dimName != null) {\n      return dimName;\n    }\n\n    var sourceDimDef = this._schema.getSourceDimension(dimIdx);\n\n    if (sourceDimDef) {\n      return sourceDimDef.name;\n    }\n  };\n  /**\n   * Get dimension index in data store. Return -1 if not found.\n   * Can be used to index value from getRawValue.\n   */\n\n\n  SeriesData.prototype.getDimensionIndex = function (dim) {\n    var dimIdx = this._recognizeDimIndex(dim);\n\n    if (dimIdx != null) {\n      return dimIdx;\n    }\n\n    if (dim == null) {\n      return -1;\n    }\n\n    var dimInfo = this._getDimInfo(dim);\n\n    return dimInfo ? dimInfo.storeDimIndex : this._dimOmitted ? this._schema.getSourceDimensionIndex(dim) : -1;\n  };\n  /**\n   * The meanings of the input parameter `dim`:\n   *\n   * + If dim is a number (e.g., `1`), it means the index of the dimension.\n   *   For example, `getDimension(0)` will return 'x' or 'lng' or 'radius'.\n   * + If dim is a number-like string (e.g., `\"1\"`):\n   *     + If there is the same concrete dim name defined in `series.dimensions` or `dataset.dimensions`,\n   *        it means that concrete name.\n   *     + If not, it will be converted to a number, which means the index of the dimension.\n   *        (why? because of the backward compatbility. We have been tolerating number-like string in\n   *        dimension setting, although now it seems that it is not a good idea.)\n   *     For example, `visualMap[i].dimension: \"1\"` is the same meaning as `visualMap[i].dimension: 1`,\n   *     if no dimension name is defined as `\"1\"`.\n   * + If dim is a not-number-like string, it means the concrete dim name.\n   *   For example, it can be be default name `\"x\"`, `\"y\"`, `\"z\"`, `\"lng\"`, `\"lat\"`, `\"angle\"`, `\"radius\"`,\n   *   or customized in `dimensions` property of option like `\"age\"`.\n   *\n   * @return recogonized `DimensionIndex`. Otherwise return null/undefined (means that dim is `DimensionName`).\n   */\n\n\n  SeriesData.prototype._recognizeDimIndex = function (dim) {\n    if (zrUtil.isNumber(dim) // If being a number-like string but not being defined as a dimension name.\n    || dim != null && !isNaN(dim) && !this._getDimInfo(dim) && (!this._dimOmitted || this._schema.getSourceDimensionIndex(dim) < 0)) {\n      return +dim;\n    }\n  };\n\n  SeriesData.prototype._getStoreDimIndex = function (dim) {\n    var dimIdx = this.getDimensionIndex(dim);\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (dimIdx == null) {\n        throw new Error('Unkown dimension ' + dim);\n      }\n    }\n\n    return dimIdx;\n  };\n  /**\n   * Get type and calculation info of particular dimension\n   * @param dim\n   *        Dimension can be concrete names like x, y, z, lng, lat, angle, radius\n   *        Or a ordinal number. For example getDimensionInfo(0) will return 'x' or 'lng' or 'radius'\n   */\n\n\n  SeriesData.prototype.getDimensionInfo = function (dim) {\n    // Do not clone, because there may be categories in dimInfo.\n    return this._getDimInfo(this.getDimension(dim));\n  };\n\n  SeriesData.prototype._initGetDimensionInfo = function (needsHasOwn) {\n    var dimensionInfos = this._dimInfos;\n    this._getDimInfo = needsHasOwn ? function (dimName) {\n      return dimensionInfos.hasOwnProperty(dimName) ? dimensionInfos[dimName] : undefined;\n    } : function (dimName) {\n      return dimensionInfos[dimName];\n    };\n  };\n  /**\n   * concrete dimension name list on coord.\n   */\n\n\n  SeriesData.prototype.getDimensionsOnCoord = function () {\n    return this._dimSummary.dataDimsOnCoord.slice();\n  };\n\n  SeriesData.prototype.mapDimension = function (coordDim, idx) {\n    var dimensionsSummary = this._dimSummary;\n\n    if (idx == null) {\n      return dimensionsSummary.encodeFirstDimNotExtra[coordDim];\n    }\n\n    var dims = dimensionsSummary.encode[coordDim];\n    return dims ? dims[idx] : null;\n  };\n\n  SeriesData.prototype.mapDimensionsAll = function (coordDim) {\n    var dimensionsSummary = this._dimSummary;\n    var dims = dimensionsSummary.encode[coordDim];\n    return (dims || []).slice();\n  };\n\n  SeriesData.prototype.getStore = function () {\n    return this._store;\n  };\n  /**\n   * Initialize from data\n   * @param data source or data or data store.\n   * @param nameList The name of a datum is used on data diff and\n   *        default label/tooltip.\n   *        A name can be specified in encode.itemName,\n   *        or dataItem.name (only for series option data),\n   *        or provided in nameList from outside.\n   */\n\n\n  SeriesData.prototype.initData = function (data, nameList, dimValueGetter) {\n    var _this = this;\n\n    var store;\n\n    if (data instanceof DataStore) {\n      store = data;\n    }\n\n    if (!store) {\n      var dimensions = this.dimensions;\n      var provider = isSourceInstance(data) || zrUtil.isArrayLike(data) ? new DefaultDataProvider(data, dimensions.length) : data;\n      store = new DataStore();\n      var dimensionInfos = map(dimensions, function (dimName) {\n        return {\n          type: _this._dimInfos[dimName].type,\n          property: dimName\n        };\n      });\n      store.initData(provider, dimensionInfos, dimValueGetter);\n    }\n\n    this._store = store; // Reset\n\n    this._nameList = (nameList || []).slice();\n    this._idList = [];\n    this._nameRepeatCount = {};\n\n    this._doInit(0, store.count()); // Cache summary info for fast visit. See \"dimensionHelper\".\n    // Needs to be initialized after store is prepared.\n\n\n    this._dimSummary = summarizeDimensions(this, this._schema);\n    this.userOutput = this._dimSummary.userOutput;\n  };\n  /**\n   * Caution: Can be only called on raw data (before `this._indices` created).\n   */\n\n\n  SeriesData.prototype.appendData = function (data) {\n    var range = this._store.appendData(data);\n\n    this._doInit(range[0], range[1]);\n  };\n  /**\n   * Caution: Can be only called on raw data (before `this._indices` created).\n   * This method does not modify `rawData` (`dataProvider`), but only\n   * add values to store.\n   *\n   * The final count will be increased by `Math.max(values.length, names.length)`.\n   *\n   * @param values That is the SourceType: 'arrayRows', like\n   *        [\n   *            [12, 33, 44],\n   *            [NaN, 43, 1],\n   *            ['-', 'asdf', 0]\n   *        ]\n   *        Each item is exaclty cooresponding to a dimension.\n   */\n\n\n  SeriesData.prototype.appendValues = function (values, names) {\n    var _a = this._store.appendValues(values, names.length),\n        start = _a.start,\n        end = _a.end;\n\n    var shouldMakeIdFromName = this._shouldMakeIdFromName();\n\n    this._updateOrdinalMeta();\n\n    if (names) {\n      for (var idx = start; idx < end; idx++) {\n        var sourceIdx = idx - start;\n        this._nameList[idx] = names[sourceIdx];\n\n        if (shouldMakeIdFromName) {\n          makeIdFromName(this, idx);\n        }\n      }\n    }\n  };\n\n  SeriesData.prototype._updateOrdinalMeta = function () {\n    var store = this._store;\n    var dimensions = this.dimensions;\n\n    for (var i = 0; i < dimensions.length; i++) {\n      var dimInfo = this._dimInfos[dimensions[i]];\n\n      if (dimInfo.ordinalMeta) {\n        store.collectOrdinalMeta(dimInfo.storeDimIndex, dimInfo.ordinalMeta);\n      }\n    }\n  };\n\n  SeriesData.prototype._shouldMakeIdFromName = function () {\n    var provider = this._store.getProvider();\n\n    return this._idDimIdx == null && provider.getSource().sourceFormat !== SOURCE_FORMAT_TYPED_ARRAY && !provider.fillStorage;\n  };\n\n  SeriesData.prototype._doInit = function (start, end) {\n    if (start >= end) {\n      return;\n    }\n\n    var store = this._store;\n    var provider = store.getProvider();\n\n    this._updateOrdinalMeta();\n\n    var nameList = this._nameList;\n    var idList = this._idList;\n    var sourceFormat = provider.getSource().sourceFormat;\n    var isFormatOriginal = sourceFormat === SOURCE_FORMAT_ORIGINAL; // Each data item is value\n    // [1, 2]\n    // 2\n    // Bar chart, line chart which uses category axis\n    // only gives the 'y' value. 'x' value is the indices of category\n    // Use a tempValue to normalize the value to be a (x, y) value\n    // If dataItem is {name: ...} or {id: ...}, it has highest priority.\n    // This kind of ids and names are always stored `_nameList` and `_idList`.\n\n    if (isFormatOriginal && !provider.pure) {\n      var sharedDataItem = [];\n\n      for (var idx = start; idx < end; idx++) {\n        // NOTICE: Try not to write things into dataItem\n        var dataItem = provider.getItem(idx, sharedDataItem);\n\n        if (!this.hasItemOption && isDataItemOption(dataItem)) {\n          this.hasItemOption = true;\n        }\n\n        if (dataItem) {\n          var itemName = dataItem.name;\n\n          if (nameList[idx] == null && itemName != null) {\n            nameList[idx] = convertOptionIdName(itemName, null);\n          }\n\n          var itemId = dataItem.id;\n\n          if (idList[idx] == null && itemId != null) {\n            idList[idx] = convertOptionIdName(itemId, null);\n          }\n        }\n      }\n    }\n\n    if (this._shouldMakeIdFromName()) {\n      for (var idx = start; idx < end; idx++) {\n        makeIdFromName(this, idx);\n      }\n    }\n\n    prepareInvertedIndex(this);\n  };\n  /**\n   * PENDING: In fact currently this function is only used to short-circuit\n   * the calling of `scale.unionExtentFromData` when data have been filtered by modules\n   * like \"dataZoom\". `scale.unionExtentFromData` is used to calculate data extent for series on\n   * an axis, but if a \"axis related data filter module\" is used, the extent of the axis have\n   * been fixed and no need to calling `scale.unionExtentFromData` actually.\n   * But if we add \"custom data filter\" in future, which is not \"axis related\", this method may\n   * be still needed.\n   *\n   * Optimize for the scenario that data is filtered by a given extent.\n   * Consider that if data amount is more than hundreds of thousand,\n   * extent calculation will cost more than 10ms and the cache will\n   * be erased because of the filtering.\n   */\n\n\n  SeriesData.prototype.getApproximateExtent = function (dim) {\n    return this._approximateExtent[dim] || this._store.getDataExtent(this._getStoreDimIndex(dim));\n  };\n  /**\n   * Calculate extent on a filtered data might be time consuming.\n   * Approximate extent is only used for: calculte extent of filtered data outside.\n   */\n\n\n  SeriesData.prototype.setApproximateExtent = function (extent, dim) {\n    dim = this.getDimension(dim);\n    this._approximateExtent[dim] = extent.slice();\n  };\n\n  SeriesData.prototype.getCalculationInfo = function (key) {\n    return this._calculationInfo[key];\n  };\n\n  SeriesData.prototype.setCalculationInfo = function (key, value) {\n    isObject(key) ? zrUtil.extend(this._calculationInfo, key) : this._calculationInfo[key] = value;\n  };\n  /**\n   * @return Never be null/undefined. `number` will be converted to string. Becuase:\n   * In most cases, name is used in display, where returning a string is more convenient.\n   * In other cases, name is used in query (see `indexOfName`), where we can keep the\n   * rule that name `2` equals to name `'2'`.\n   */\n\n\n  SeriesData.prototype.getName = function (idx) {\n    var rawIndex = this.getRawIndex(idx);\n    var name = this._nameList[rawIndex];\n\n    if (name == null && this._nameDimIdx != null) {\n      name = getIdNameFromStore(this, this._nameDimIdx, rawIndex);\n    }\n\n    if (name == null) {\n      name = '';\n    }\n\n    return name;\n  };\n\n  SeriesData.prototype._getCategory = function (dimIdx, idx) {\n    var ordinal = this._store.get(dimIdx, idx);\n\n    var ordinalMeta = this._store.getOrdinalMeta(dimIdx);\n\n    if (ordinalMeta) {\n      return ordinalMeta.categories[ordinal];\n    }\n\n    return ordinal;\n  };\n  /**\n   * @return Never null/undefined. `number` will be converted to string. Becuase:\n   * In all cases having encountered at present, id is used in making diff comparison, which\n   * are usually based on hash map. We can keep the rule that the internal id are always string\n   * (treat `2` is the same as `'2'`) to make the related logic simple.\n   */\n\n\n  SeriesData.prototype.getId = function (idx) {\n    return getId(this, this.getRawIndex(idx));\n  };\n\n  SeriesData.prototype.count = function () {\n    return this._store.count();\n  };\n  /**\n   * Get value. Return NaN if idx is out of range.\n   *\n   * @notice Should better to use `data.getStore().get(dimIndex, dataIdx)` instead.\n   */\n\n\n  SeriesData.prototype.get = function (dim, idx) {\n    var store = this._store;\n    var dimInfo = this._dimInfos[dim];\n\n    if (dimInfo) {\n      return store.get(dimInfo.storeDimIndex, idx);\n    }\n  };\n  /**\n   * @notice Should better to use `data.getStore().getByRawIndex(dimIndex, dataIdx)` instead.\n   */\n\n\n  SeriesData.prototype.getByRawIndex = function (dim, rawIdx) {\n    var store = this._store;\n    var dimInfo = this._dimInfos[dim];\n\n    if (dimInfo) {\n      return store.getByRawIndex(dimInfo.storeDimIndex, rawIdx);\n    }\n  };\n\n  SeriesData.prototype.getIndices = function () {\n    return this._store.getIndices();\n  };\n\n  SeriesData.prototype.getDataExtent = function (dim) {\n    return this._store.getDataExtent(this._getStoreDimIndex(dim));\n  };\n\n  SeriesData.prototype.getSum = function (dim) {\n    return this._store.getSum(this._getStoreDimIndex(dim));\n  };\n\n  SeriesData.prototype.getMedian = function (dim) {\n    return this._store.getMedian(this._getStoreDimIndex(dim));\n  };\n\n  SeriesData.prototype.getValues = function (dimensions, idx) {\n    var _this = this;\n\n    var store = this._store;\n    return zrUtil.isArray(dimensions) ? store.getValues(map(dimensions, function (dim) {\n      return _this._getStoreDimIndex(dim);\n    }), idx) : store.getValues(dimensions);\n  };\n  /**\n   * If value is NaN. Inlcuding '-'\n   * Only check the coord dimensions.\n   */\n\n\n  SeriesData.prototype.hasValue = function (idx) {\n    var dataDimIndicesOnCoord = this._dimSummary.dataDimIndicesOnCoord;\n\n    for (var i = 0, len = dataDimIndicesOnCoord.length; i < len; i++) {\n      // Ordinal type originally can be string or number.\n      // But when an ordinal type is used on coord, it can\n      // not be string but only number. So we can also use isNaN.\n      if (isNaN(this._store.get(dataDimIndicesOnCoord[i], idx))) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n  /**\n   * Retreive the index with given name\n   */\n\n\n  SeriesData.prototype.indexOfName = function (name) {\n    for (var i = 0, len = this._store.count(); i < len; i++) {\n      if (this.getName(i) === name) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  SeriesData.prototype.getRawIndex = function (idx) {\n    return this._store.getRawIndex(idx);\n  };\n\n  SeriesData.prototype.indexOfRawIndex = function (rawIndex) {\n    return this._store.indexOfRawIndex(rawIndex);\n  };\n  /**\n   * Only support the dimension which inverted index created.\n   * Do not support other cases until required.\n   * @param dim concrete dim\n   * @param value ordinal index\n   * @return rawIndex\n   */\n\n\n  SeriesData.prototype.rawIndexOf = function (dim, value) {\n    var invertedIndices = dim && this._invertedIndicesMap[dim];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!invertedIndices) {\n        throw new Error('Do not supported yet');\n      }\n    }\n\n    var rawIndex = invertedIndices[value];\n\n    if (rawIndex == null || isNaN(rawIndex)) {\n      return INDEX_NOT_FOUND;\n    }\n\n    return rawIndex;\n  };\n  /**\n   * Retreive the index of nearest value\n   * @param dim\n   * @param value\n   * @param [maxDistance=Infinity]\n   * @return If and only if multiple indices has\n   *         the same value, they are put to the result.\n   */\n\n\n  SeriesData.prototype.indicesOfNearest = function (dim, value, maxDistance) {\n    return this._store.indicesOfNearest(this._getStoreDimIndex(dim), value, maxDistance);\n  };\n\n  SeriesData.prototype.each = function (dims, cb, ctx) {\n    'use strict';\n\n    if (zrUtil.isFunction(dims)) {\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    } // ctxCompat just for compat echarts3\n\n\n    var fCtx = ctx || this;\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n\n    this._store.each(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n  };\n\n  SeriesData.prototype.filterSelf = function (dims, cb, ctx) {\n    'use strict';\n\n    if (zrUtil.isFunction(dims)) {\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    } // ctxCompat just for compat echarts3\n\n\n    var fCtx = ctx || this;\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    this._store = this._store.filter(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n    return this;\n  };\n  /**\n   * Select data in range. (For optimization of filter)\n   * (Manually inline code, support 5 million data filtering in data zoom.)\n   */\n\n\n  SeriesData.prototype.selectRange = function (range) {\n    'use strict';\n\n    var _this = this;\n\n    var innerRange = {};\n    var dims = zrUtil.keys(range);\n    var dimIndices = [];\n    zrUtil.each(dims, function (dim) {\n      var dimIdx = _this._getStoreDimIndex(dim);\n\n      innerRange[dimIdx] = range[dim];\n      dimIndices.push(dimIdx);\n    });\n    this._store = this._store.selectRange(innerRange);\n    return this;\n  };\n  /* eslint-enable max-len */\n\n\n  SeriesData.prototype.mapArray = function (dims, cb, ctx) {\n    'use strict';\n\n    if (zrUtil.isFunction(dims)) {\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    } // ctxCompat just for compat echarts3\n\n\n    ctx = ctx || this;\n    var result = [];\n    this.each(dims, function () {\n      result.push(cb && cb.apply(this, arguments));\n    }, ctx);\n    return result;\n  };\n\n  SeriesData.prototype.map = function (dims, cb, ctx, ctxCompat) {\n    'use strict'; // ctxCompat just for compat echarts3\n\n    var fCtx = ctx || ctxCompat || this;\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.map(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n    return list;\n  };\n\n  SeriesData.prototype.modify = function (dims, cb, ctx, ctxCompat) {\n    var _this = this; // ctxCompat just for compat echarts3\n\n\n    var fCtx = ctx || ctxCompat || this;\n\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.each(normalizeDimensions(dims), function (dim) {\n        var dimInfo = _this.getDimensionInfo(dim);\n\n        if (!dimInfo.isCalculationCoord) {\n          console.error('Danger: only stack dimension can be modified');\n        }\n      });\n    }\n\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this); // If do shallow clone here, if there are too many stacked series,\n    // it still cost lots of memory, becuase `_store.dimensions` are not shared.\n    // We should consider there probably be shallow clone happen in each sereis\n    // in consequent filter/map.\n\n    this._store.modify(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n  };\n  /**\n   * Large data down sampling on given dimension\n   * @param sampleIndex Sample index for name and id\n   */\n\n\n  SeriesData.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.downSample(this._getStoreDimIndex(dimension), rate, sampleValue, sampleIndex);\n    return list;\n  };\n  /**\n   * Large data down sampling using largest-triangle-three-buckets\n   * @param {string} valueDimension\n   * @param {number} targetCount\n   */\n\n\n  SeriesData.prototype.lttbDownSample = function (valueDimension, rate) {\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.lttbDownSample(this._getStoreDimIndex(valueDimension), rate);\n    return list;\n  };\n\n  SeriesData.prototype.getRawDataItem = function (idx) {\n    return this._store.getRawDataItem(idx);\n  };\n  /**\n   * Get model of one data item.\n   */\n  // TODO: Type of data item\n\n\n  SeriesData.prototype.getItemModel = function (idx) {\n    var hostModel = this.hostModel;\n    var dataItem = this.getRawDataItem(idx);\n    return new Model(dataItem, hostModel, hostModel && hostModel.ecModel);\n  };\n  /**\n   * Create a data differ\n   */\n\n\n  SeriesData.prototype.diff = function (otherList) {\n    var thisList = this;\n    return new DataDiffer(otherList ? otherList.getStore().getIndices() : [], this.getStore().getIndices(), function (idx) {\n      return getId(otherList, idx);\n    }, function (idx) {\n      return getId(thisList, idx);\n    });\n  };\n  /**\n   * Get visual property.\n   */\n\n\n  SeriesData.prototype.getVisual = function (key) {\n    var visual = this._visual;\n    return visual && visual[key];\n  };\n\n  SeriesData.prototype.setVisual = function (kvObj, val) {\n    this._visual = this._visual || {};\n\n    if (isObject(kvObj)) {\n      zrUtil.extend(this._visual, kvObj);\n    } else {\n      this._visual[kvObj] = val;\n    }\n  };\n  /**\n   * Get visual property of single data item\n   */\n  // eslint-disable-next-line\n\n\n  SeriesData.prototype.getItemVisual = function (idx, key) {\n    var itemVisual = this._itemVisuals[idx];\n    var val = itemVisual && itemVisual[key];\n\n    if (val == null) {\n      // Use global visual property\n      return this.getVisual(key);\n    }\n\n    return val;\n  };\n  /**\n   * If exists visual property of single data item\n   */\n\n\n  SeriesData.prototype.hasItemVisual = function () {\n    return this._itemVisuals.length > 0;\n  };\n  /**\n   * Make sure itemVisual property is unique\n   */\n  // TODO: use key to save visual to reduce memory.\n\n\n  SeriesData.prototype.ensureUniqueItemVisual = function (idx, key) {\n    var itemVisuals = this._itemVisuals;\n    var itemVisual = itemVisuals[idx];\n\n    if (!itemVisual) {\n      itemVisual = itemVisuals[idx] = {};\n    }\n\n    var val = itemVisual[key];\n\n    if (val == null) {\n      val = this.getVisual(key); // TODO Performance?\n\n      if (zrUtil.isArray(val)) {\n        val = val.slice();\n      } else if (isObject(val)) {\n        val = zrUtil.extend({}, val);\n      }\n\n      itemVisual[key] = val;\n    }\n\n    return val;\n  }; // eslint-disable-next-line\n\n\n  SeriesData.prototype.setItemVisual = function (idx, key, value) {\n    var itemVisual = this._itemVisuals[idx] || {};\n    this._itemVisuals[idx] = itemVisual;\n\n    if (isObject(key)) {\n      zrUtil.extend(itemVisual, key);\n    } else {\n      itemVisual[key] = value;\n    }\n  };\n  /**\n   * Clear itemVisuals and list visual.\n   */\n\n\n  SeriesData.prototype.clearAllVisual = function () {\n    this._visual = {};\n    this._itemVisuals = [];\n  };\n\n  SeriesData.prototype.setLayout = function (key, val) {\n    isObject(key) ? zrUtil.extend(this._layout, key) : this._layout[key] = val;\n  };\n  /**\n   * Get layout property.\n   */\n\n\n  SeriesData.prototype.getLayout = function (key) {\n    return this._layout[key];\n  };\n  /**\n   * Get layout of single data item\n   */\n\n\n  SeriesData.prototype.getItemLayout = function (idx) {\n    return this._itemLayouts[idx];\n  };\n  /**\n   * Set layout of single data item\n   */\n\n\n  SeriesData.prototype.setItemLayout = function (idx, layout, merge) {\n    this._itemLayouts[idx] = merge ? zrUtil.extend(this._itemLayouts[idx] || {}, layout) : layout;\n  };\n  /**\n   * Clear all layout of single data item\n   */\n\n\n  SeriesData.prototype.clearItemLayouts = function () {\n    this._itemLayouts.length = 0;\n  };\n  /**\n   * Set graphic element relative to data. It can be set as null\n   */\n\n\n  SeriesData.prototype.setItemGraphicEl = function (idx, el) {\n    var seriesIndex = this.hostModel && this.hostModel.seriesIndex;\n    setCommonECData(seriesIndex, this.dataType, idx, el);\n    this._graphicEls[idx] = el;\n  };\n\n  SeriesData.prototype.getItemGraphicEl = function (idx) {\n    return this._graphicEls[idx];\n  };\n\n  SeriesData.prototype.eachItemGraphicEl = function (cb, context) {\n    zrUtil.each(this._graphicEls, function (el, idx) {\n      if (el) {\n        cb && cb.call(context, el, idx);\n      }\n    });\n  };\n  /**\n   * Shallow clone a new list except visual and layout properties, and graph elements.\n   * New list only change the indices.\n   */\n\n\n  SeriesData.prototype.cloneShallow = function (list) {\n    if (!list) {\n      list = new SeriesData(this._schema ? this._schema : map(this.dimensions, this._getDimInfo, this), this.hostModel);\n    }\n\n    transferProperties(list, this);\n    list._store = this._store;\n    return list;\n  };\n  /**\n   * Wrap some method to add more feature\n   */\n\n\n  SeriesData.prototype.wrapMethod = function (methodName, injectFunction) {\n    var originalMethod = this[methodName];\n\n    if (!zrUtil.isFunction(originalMethod)) {\n      return;\n    }\n\n    this.__wrappedMethods = this.__wrappedMethods || [];\n\n    this.__wrappedMethods.push(methodName);\n\n    this[methodName] = function () {\n      var res = originalMethod.apply(this, arguments);\n      return injectFunction.apply(this, [res].concat(zrUtil.slice(arguments)));\n    };\n  }; // ----------------------------------------------------------\n  // A work around for internal method visiting private member.\n  // ----------------------------------------------------------\n\n\n  SeriesData.internalField = function () {\n    prepareInvertedIndex = function (data) {\n      var invertedIndicesMap = data._invertedIndicesMap;\n      zrUtil.each(invertedIndicesMap, function (invertedIndices, dim) {\n        var dimInfo = data._dimInfos[dim]; // Currently, only dimensions that has ordinalMeta can create inverted indices.\n\n        var ordinalMeta = dimInfo.ordinalMeta;\n        var store = data._store;\n\n        if (ordinalMeta) {\n          invertedIndices = invertedIndicesMap[dim] = new CtorInt32Array(ordinalMeta.categories.length); // The default value of TypedArray is 0. To avoid miss\n          // mapping to 0, we should set it as INDEX_NOT_FOUND.\n\n          for (var i = 0; i < invertedIndices.length; i++) {\n            invertedIndices[i] = INDEX_NOT_FOUND;\n          }\n\n          for (var i = 0; i < store.count(); i++) {\n            // Only support the case that all values are distinct.\n            invertedIndices[store.get(dimInfo.storeDimIndex, i)] = i;\n          }\n        }\n      });\n    };\n\n    getIdNameFromStore = function (data, dimIdx, idx) {\n      return convertOptionIdName(data._getCategory(dimIdx, idx), null);\n    };\n    /**\n     * @see the comment of `List['getId']`.\n     */\n\n\n    getId = function (data, rawIndex) {\n      var id = data._idList[rawIndex];\n\n      if (id == null && data._idDimIdx != null) {\n        id = getIdNameFromStore(data, data._idDimIdx, rawIndex);\n      }\n\n      if (id == null) {\n        id = ID_PREFIX + rawIndex;\n      }\n\n      return id;\n    };\n\n    normalizeDimensions = function (dimensions) {\n      if (!zrUtil.isArray(dimensions)) {\n        dimensions = dimensions != null ? [dimensions] : [];\n      }\n\n      return dimensions;\n    };\n    /**\n     * Data in excludeDimensions is copied, otherwise transfered.\n     */\n\n\n    cloneListForMapAndSample = function (original) {\n      var list = new SeriesData(original._schema ? original._schema : map(original.dimensions, original._getDimInfo, original), original.hostModel); // FIXME If needs stackedOn, value may already been stacked\n\n      transferProperties(list, original);\n      return list;\n    };\n\n    transferProperties = function (target, source) {\n      zrUtil.each(TRANSFERABLE_PROPERTIES.concat(source.__wrappedMethods || []), function (propName) {\n        if (source.hasOwnProperty(propName)) {\n          target[propName] = source[propName];\n        }\n      });\n      target.__wrappedMethods = source.__wrappedMethods;\n      zrUtil.each(CLONE_PROPERTIES, function (propName) {\n        target[propName] = zrUtil.clone(source[propName]);\n      });\n      target._calculationInfo = zrUtil.extend({}, source._calculationInfo);\n    };\n\n    makeIdFromName = function (data, idx) {\n      var nameList = data._nameList;\n      var idList = data._idList;\n      var nameDimIdx = data._nameDimIdx;\n      var idDimIdx = data._idDimIdx;\n      var name = nameList[idx];\n      var id = idList[idx];\n\n      if (name == null && nameDimIdx != null) {\n        nameList[idx] = name = getIdNameFromStore(data, nameDimIdx, idx);\n      }\n\n      if (id == null && idDimIdx != null) {\n        idList[idx] = id = getIdNameFromStore(data, idDimIdx, idx);\n      }\n\n      if (id == null && name != null) {\n        var nameRepeatCount = data._nameRepeatCount;\n        var nmCnt = nameRepeatCount[name] = (nameRepeatCount[name] || 0) + 1;\n        id = name;\n\n        if (nmCnt > 1) {\n          id += '__ec__' + nmCnt;\n        }\n\n        idList[idx] = id;\n      }\n    };\n  }();\n\n  return SeriesData;\n}();\n\nexport default SeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { VISUAL_DIMENSIONS } from '../../util/types.js';\nimport SeriesDimensionDefine from '../SeriesDimensionDefine.js';\nimport { createHashMap, defaults, each, extend, isObject, isString } from 'zrender/lib/core/util.js';\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../Source.js';\nimport { CtorInt32Array } from '../DataStore.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { BE_ORDINAL, guessOrdinal } from './sourceHelper.js';\nimport { createDimNameMap, ensureSourceDimNameMap, SeriesDataSchema, shouldOmitUnusedDimensions } from './SeriesDataSchema.js';\n/**\n * For outside usage compat (like echarts-gl are using it).\n */\n\nexport function createDimensions(source, opt) {\n  return prepareSeriesDataSchema(source, opt).dimensions;\n}\n/**\n * This method builds the relationship between:\n * + \"what the coord sys or series requires (see `coordDimensions`)\",\n * + \"what the user defines (in `encode` and `dimensions`, see `opt.dimensionsDefine` and `opt.encodeDefine`)\"\n * + \"what the data source provids (see `source`)\".\n *\n * Some guess strategy will be adapted if user does not define something.\n * If no 'value' dimension specified, the first no-named dimension will be\n * named as 'value'.\n *\n * @return The results are always sorted by `storeDimIndex` asc.\n */\n\nexport default function prepareSeriesDataSchema( // TODO: TYPE completeDimensions type\nsource, opt) {\n  if (!isSourceInstance(source)) {\n    source = createSourceFromSeriesDataOption(source);\n  }\n\n  opt = opt || {};\n  var sysDims = opt.coordDimensions || [];\n  var dimsDef = opt.dimensionsDefine || source.dimensionsDefine || [];\n  var coordDimNameMap = createHashMap();\n  var resultList = [];\n  var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimensionsCount); // Try to ignore unsed dimensions if sharing a high dimension datastore\n  // 30 is an experience value.\n\n  var omitUnusedDimensions = opt.canOmitUnusedDimensions && shouldOmitUnusedDimensions(dimCount);\n  var isUsingSourceDimensionsDef = dimsDef === source.dimensionsDefine;\n  var dataDimNameMap = isUsingSourceDimensionsDef ? ensureSourceDimNameMap(source) : createDimNameMap(dimsDef);\n  var encodeDef = opt.encodeDefine;\n\n  if (!encodeDef && opt.encodeDefaulter) {\n    encodeDef = opt.encodeDefaulter(source, dimCount);\n  }\n\n  var encodeDefMap = createHashMap(encodeDef);\n  var indicesMap = new CtorInt32Array(dimCount);\n\n  for (var i = 0; i < indicesMap.length; i++) {\n    indicesMap[i] = -1;\n  }\n\n  function getResultItem(dimIdx) {\n    var idx = indicesMap[dimIdx];\n\n    if (idx < 0) {\n      var dimDefItemRaw = dimsDef[dimIdx];\n      var dimDefItem = isObject(dimDefItemRaw) ? dimDefItemRaw : {\n        name: dimDefItemRaw\n      };\n      var resultItem = new SeriesDimensionDefine();\n      var userDimName = dimDefItem.name;\n\n      if (userDimName != null && dataDimNameMap.get(userDimName) != null) {\n        // Only if `series.dimensions` is defined in option\n        // displayName, will be set, and dimension will be diplayed vertically in\n        // tooltip by default.\n        resultItem.name = resultItem.displayName = userDimName;\n      }\n\n      dimDefItem.type != null && (resultItem.type = dimDefItem.type);\n      dimDefItem.displayName != null && (resultItem.displayName = dimDefItem.displayName);\n      var newIdx = resultList.length;\n      indicesMap[dimIdx] = newIdx;\n      resultItem.storeDimIndex = dimIdx;\n      resultList.push(resultItem);\n      return resultItem;\n    }\n\n    return resultList[idx];\n  }\n\n  if (!omitUnusedDimensions) {\n    for (var i = 0; i < dimCount; i++) {\n      getResultItem(i);\n    }\n  } // Set `coordDim` and `coordDimIndex` by `encodeDefMap` and normalize `encodeDefMap`.\n\n\n  encodeDefMap.each(function (dataDimsRaw, coordDim) {\n    var dataDims = normalizeToArray(dataDimsRaw).slice(); // Note: It is allowed that `dataDims.length` is `0`, e.g., options is\n    // `{encode: {x: -1, y: 1}}`. Should not filter anything in\n    // this case.\n\n    if (dataDims.length === 1 && !isString(dataDims[0]) && dataDims[0] < 0) {\n      encodeDefMap.set(coordDim, false);\n      return;\n    }\n\n    var validDataDims = encodeDefMap.set(coordDim, []);\n    each(dataDims, function (resultDimIdxOrName, idx) {\n      // The input resultDimIdx can be dim name or index.\n      var resultDimIdx = isString(resultDimIdxOrName) ? dataDimNameMap.get(resultDimIdxOrName) : resultDimIdxOrName;\n\n      if (resultDimIdx != null && resultDimIdx < dimCount) {\n        validDataDims[idx] = resultDimIdx;\n        applyDim(getResultItem(resultDimIdx), coordDim, idx);\n      }\n    });\n  }); // Apply templetes and default order from `sysDims`.\n\n  var availDimIdx = 0;\n  each(sysDims, function (sysDimItemRaw) {\n    var coordDim;\n    var sysDimItemDimsDef;\n    var sysDimItemOtherDims;\n    var sysDimItem;\n\n    if (isString(sysDimItemRaw)) {\n      coordDim = sysDimItemRaw;\n      sysDimItem = {};\n    } else {\n      sysDimItem = sysDimItemRaw;\n      coordDim = sysDimItem.name;\n      var ordinalMeta = sysDimItem.ordinalMeta;\n      sysDimItem.ordinalMeta = null;\n      sysDimItem = extend({}, sysDimItem);\n      sysDimItem.ordinalMeta = ordinalMeta; // `coordDimIndex` should not be set directly.\n\n      sysDimItemDimsDef = sysDimItem.dimsDef;\n      sysDimItemOtherDims = sysDimItem.otherDims;\n      sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex = sysDimItem.dimsDef = sysDimItem.otherDims = null;\n    }\n\n    var dataDims = encodeDefMap.get(coordDim); // negative resultDimIdx means no need to mapping.\n\n    if (dataDims === false) {\n      return;\n    }\n\n    dataDims = normalizeToArray(dataDims); // dimensions provides default dim sequences.\n\n    if (!dataDims.length) {\n      for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\n        while (availDimIdx < dimCount && getResultItem(availDimIdx).coordDim != null) {\n          availDimIdx++;\n        }\n\n        availDimIdx < dimCount && dataDims.push(availDimIdx++);\n      }\n    } // Apply templates.\n\n\n    each(dataDims, function (resultDimIdx, coordDimIndex) {\n      var resultItem = getResultItem(resultDimIdx); // Coordinate system has a higher priority on dim type than source.\n\n      if (isUsingSourceDimensionsDef && sysDimItem.type != null) {\n        resultItem.type = sysDimItem.type;\n      }\n\n      applyDim(defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\n\n      if (resultItem.name == null && sysDimItemDimsDef) {\n        var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];\n        !isObject(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = {\n          name: sysDimItemDimsDefItem\n        });\n        resultItem.name = resultItem.displayName = sysDimItemDimsDefItem.name;\n        resultItem.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;\n      } // FIXME refactor, currently only used in case: {otherDims: {tooltip: false}}\n\n\n      sysDimItemOtherDims && defaults(resultItem.otherDims, sysDimItemOtherDims);\n    });\n  });\n\n  function applyDim(resultItem, coordDim, coordDimIndex) {\n    if (VISUAL_DIMENSIONS.get(coordDim) != null) {\n      resultItem.otherDims[coordDim] = coordDimIndex;\n    } else {\n      resultItem.coordDim = coordDim;\n      resultItem.coordDimIndex = coordDimIndex;\n      coordDimNameMap.set(coordDim, true);\n    }\n  } // Make sure the first extra dim is 'value'.\n\n\n  var generateCoord = opt.generateCoord;\n  var generateCoordCount = opt.generateCoordCount;\n  var fromZero = generateCoordCount != null;\n  generateCoordCount = generateCoord ? generateCoordCount || 1 : 0;\n  var extra = generateCoord || 'value';\n\n  function ifNoNameFillWithCoordName(resultItem) {\n    if (resultItem.name == null) {\n      // Duplication will be removed in the next step.\n      resultItem.name = resultItem.coordDim;\n    }\n  } // Set dim `name` and other `coordDim` and other props.\n\n\n  if (!omitUnusedDimensions) {\n    for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\n      var resultItem = getResultItem(resultDimIdx);\n      var coordDim = resultItem.coordDim;\n\n      if (coordDim == null) {\n        // TODO no need to generate coordDim for isExtraCoord?\n        resultItem.coordDim = genCoordDimName(extra, coordDimNameMap, fromZero);\n        resultItem.coordDimIndex = 0; // Series specified generateCoord is using out.\n\n        if (!generateCoord || generateCoordCount <= 0) {\n          resultItem.isExtraCoord = true;\n        }\n\n        generateCoordCount--;\n      }\n\n      ifNoNameFillWithCoordName(resultItem);\n\n      if (resultItem.type == null && (guessOrdinal(source, resultDimIdx) === BE_ORDINAL.Must // Consider the case:\n      // {\n      //    dataset: {source: [\n      //        ['2001', 123],\n      //        ['2002', 456],\n      //        ...\n      //        ['The others', 987],\n      //    ]},\n      //    series: {type: 'pie'}\n      // }\n      // The first colum should better be treated as a \"ordinal\" although it\n      // might not able to be detected as an \"ordinal\" by `guessOrdinal`.\n      || resultItem.isExtraCoord && (resultItem.otherDims.itemName != null || resultItem.otherDims.seriesName != null))) {\n        resultItem.type = 'ordinal';\n      }\n    }\n  } else {\n    each(resultList, function (resultItem) {\n      // PENDING: guessOrdinal or let user specify type: 'ordinal' manually?\n      ifNoNameFillWithCoordName(resultItem);\n    }); // Sort dimensions: there are some rule that use the last dim as label,\n    // and for some latter travel process easier.\n\n    resultList.sort(function (item0, item1) {\n      return item0.storeDimIndex - item1.storeDimIndex;\n    });\n  }\n\n  removeDuplication(resultList);\n  return new SeriesDataSchema({\n    source: source,\n    dimensions: resultList,\n    fullDimensionCount: dimCount,\n    dimensionOmitted: omitUnusedDimensions\n  });\n}\n\nfunction removeDuplication(result) {\n  var duplicationMap = createHashMap();\n\n  for (var i = 0; i < result.length; i++) {\n    var dim = result[i];\n    var dimOriginalName = dim.name;\n    var count = duplicationMap.get(dimOriginalName) || 0;\n\n    if (count > 0) {\n      // Starts from 0.\n      dim.name = dimOriginalName + (count - 1);\n    }\n\n    count++;\n    duplicationMap.set(dimOriginalName, count);\n  }\n} // ??? TODO\n// Originally detect dimCount by data[0]. Should we\n// optimize it to only by sysDims and dimensions and encode.\n// So only necessary dims will be initialized.\n// But\n// (1) custom series should be considered. where other dims\n// may be visited.\n// (2) sometimes user need to calcualte bubble size or use visualMap\n// on other dimensions besides coordSys needed.\n// So, dims that is not used by system, should be shared in data store?\n\n\nfunction getDimCount(source, sysDims, dimsDef, optDimCount) {\n  // Note that the result dimCount should not small than columns count\n  // of data, otherwise `dataDimNameMap` checking will be incorrect.\n  var dimCount = Math.max(source.dimensionsDetectedCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);\n  each(sysDims, function (sysDimItem) {\n    var sysDimItemDimsDef;\n\n    if (isObject(sysDimItem) && (sysDimItemDimsDef = sysDimItem.dimsDef)) {\n      dimCount = Math.max(dimCount, sysDimItemDimsDef.length);\n    }\n  });\n  return dimCount;\n}\n\nfunction genCoordDimName(name, map, fromZero) {\n  var mapData = map.data;\n\n  if (fromZero || mapData.hasOwnProperty(name)) {\n    var i = 0;\n\n    while (mapData.hasOwnProperty(name + i)) {\n      i++;\n    }\n\n    name += i;\n  }\n\n  map.set(name, true);\n  return name;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Helper for model references.\n * There are many manners to refer axis/coordSys.\n */\n// TODO\n// merge relevant logic to this file?\n// check: \"modelHelper\" of tooltip and \"BrushTargetManager\".\nimport { createHashMap, retrieve, each } from 'zrender/lib/core/util.js';\nimport { SINGLE_REFERRING } from '../util/model.js';\n/**\n * @class\n * For example:\n * {\n *     coordSysName: 'cartesian2d',\n *     coordSysDims: ['x', 'y', ...],\n *     axisMap: HashMap({\n *         x: xAxisModel,\n *         y: yAxisModel\n *     }),\n *     categoryAxisMap: HashMap({\n *         x: xAxisModel,\n *         y: undefined\n *     }),\n *     // The index of the first category axis in `coordSysDims`.\n *     // `null/undefined` means no category axis exists.\n *     firstCategoryDimIndex: 1,\n *     // To replace user specified encode.\n * }\n */\n\nvar CoordSysInfo =\n/** @class */\nfunction () {\n  function CoordSysInfo(coordSysName) {\n    this.coordSysDims = [];\n    this.axisMap = createHashMap();\n    this.categoryAxisMap = createHashMap();\n    this.coordSysName = coordSysName;\n  }\n\n  return CoordSysInfo;\n}();\n\nexport function getCoordSysInfoBySeries(seriesModel) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var result = new CoordSysInfo(coordSysName);\n  var fetch = fetchers[coordSysName];\n\n  if (fetch) {\n    fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\n    return result;\n  }\n}\nvar fetchers = {\n  cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var xAxisModel = seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!xAxisModel) {\n        throw new Error('xAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('xAxisId'), 0) + '\" not found');\n      }\n\n      if (!yAxisModel) {\n        throw new Error('yAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('yAxisId'), 0) + '\" not found');\n      }\n    }\n\n    result.coordSysDims = ['x', 'y'];\n    axisMap.set('x', xAxisModel);\n    axisMap.set('y', yAxisModel);\n\n    if (isCategory(xAxisModel)) {\n      categoryAxisMap.set('x', xAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n\n    if (isCategory(yAxisModel)) {\n      categoryAxisMap.set('y', yAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!singleAxisModel) {\n        throw new Error('singleAxis should be specified.');\n      }\n    }\n\n    result.coordSysDims = ['single'];\n    axisMap.set('single', singleAxisModel);\n\n    if (isCategory(singleAxisModel)) {\n      categoryAxisMap.set('single', singleAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n  },\n  polar: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n    var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n    var angleAxisModel = polarModel.findAxisModel('angleAxis');\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!angleAxisModel) {\n        throw new Error('angleAxis option not found');\n      }\n\n      if (!radiusAxisModel) {\n        throw new Error('radiusAxis option not found');\n      }\n    }\n\n    result.coordSysDims = ['radius', 'angle'];\n    axisMap.set('radius', radiusAxisModel);\n    axisMap.set('angle', angleAxisModel);\n\n    if (isCategory(radiusAxisModel)) {\n      categoryAxisMap.set('radius', radiusAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n\n    if (isCategory(angleAxisModel)) {\n      categoryAxisMap.set('angle', angleAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  geo: function (seriesModel, result, axisMap, categoryAxisMap) {\n    result.coordSysDims = ['lng', 'lat'];\n  },\n  parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var ecModel = seriesModel.ecModel;\n    var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n    var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\n    each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n      var axisDim = coordSysDims[index];\n      axisMap.set(axisDim, axisModel);\n\n      if (isCategory(axisModel)) {\n        categoryAxisMap.set(axisDim, axisModel);\n\n        if (result.firstCategoryDimIndex == null) {\n          result.firstCategoryDimIndex = index;\n        }\n      }\n    });\n  }\n};\n\nfunction isCategory(axisModel) {\n  return axisModel.get('type') === 'category';\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport { getDataItemValue } from '../../util/model.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport { getCoordSysInfoBySeries } from '../../model/referHelper.js';\nimport { createSourceFromSeriesDataOption } from '../../data/Source.js';\nimport { enableDataStack } from '../../data/helper/dataStackHelper.js';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper.js';\nimport { SOURCE_FORMAT_ORIGINAL } from '../../util/types.js';\n\nfunction getCoordSysDimDefs(seriesModel, coordSysInfo) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var registeredCoordSys = CoordinateSystem.get(coordSysName);\n  var coordSysDimDefs;\n\n  if (coordSysInfo && coordSysInfo.coordSysDims) {\n    coordSysDimDefs = zrUtil.map(coordSysInfo.coordSysDims, function (dim) {\n      var dimInfo = {\n        name: dim\n      };\n      var axisModel = coordSysInfo.axisMap.get(dim);\n\n      if (axisModel) {\n        var axisType = axisModel.get('type');\n        dimInfo.type = getDimensionTypeByAxis(axisType);\n      }\n\n      return dimInfo;\n    });\n  }\n\n  if (!coordSysDimDefs) {\n    // Get dimensions from registered coordinate system\n    coordSysDimDefs = registeredCoordSys && (registeredCoordSys.getDimensionsInfo ? registeredCoordSys.getDimensionsInfo() : registeredCoordSys.dimensions.slice()) || ['x', 'y'];\n  }\n\n  return coordSysDimDefs;\n}\n\nfunction injectOrdinalMeta(dimInfoList, createInvertedIndices, coordSysInfo) {\n  var firstCategoryDimIndex;\n  var hasNameEncode;\n  coordSysInfo && zrUtil.each(dimInfoList, function (dimInfo, dimIndex) {\n    var coordDim = dimInfo.coordDim;\n    var categoryAxisModel = coordSysInfo.categoryAxisMap.get(coordDim);\n\n    if (categoryAxisModel) {\n      if (firstCategoryDimIndex == null) {\n        firstCategoryDimIndex = dimIndex;\n      }\n\n      dimInfo.ordinalMeta = categoryAxisModel.getOrdinalMeta();\n\n      if (createInvertedIndices) {\n        dimInfo.createInvertedIndices = true;\n      }\n    }\n\n    if (dimInfo.otherDims.itemName != null) {\n      hasNameEncode = true;\n    }\n  });\n\n  if (!hasNameEncode && firstCategoryDimIndex != null) {\n    dimInfoList[firstCategoryDimIndex].otherDims.itemName = 0;\n  }\n\n  return firstCategoryDimIndex;\n}\n/**\n * Caution: there are side effects to `sourceManager` in this method.\n * Should better only be called in `Series['getInitialData']`.\n */\n\n\nfunction createSeriesData(sourceRaw, seriesModel, opt) {\n  opt = opt || {};\n  var sourceManager = seriesModel.getSourceManager();\n  var source;\n  var isOriginalSource = false;\n\n  if (sourceRaw) {\n    isOriginalSource = true;\n    source = createSourceFromSeriesDataOption(sourceRaw);\n  } else {\n    source = sourceManager.getSource(); // Is series.data. not dataset.\n\n    isOriginalSource = source.sourceFormat === SOURCE_FORMAT_ORIGINAL;\n  }\n\n  var coordSysInfo = getCoordSysInfoBySeries(seriesModel);\n  var coordSysDimDefs = getCoordSysDimDefs(seriesModel, coordSysInfo);\n  var useEncodeDefaulter = opt.useEncodeDefaulter;\n  var encodeDefaulter = zrUtil.isFunction(useEncodeDefaulter) ? useEncodeDefaulter : useEncodeDefaulter ? zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordSysDimDefs, seriesModel) : null;\n  var createDimensionOptions = {\n    coordDimensions: coordSysDimDefs,\n    generateCoord: opt.generateCoord,\n    encodeDefine: seriesModel.getEncode(),\n    encodeDefaulter: encodeDefaulter,\n    canOmitUnusedDimensions: !isOriginalSource\n  };\n  var schema = prepareSeriesDataSchema(source, createDimensionOptions);\n  var firstCategoryDimIndex = injectOrdinalMeta(schema.dimensions, opt.createInvertedIndices, coordSysInfo);\n  var store = !isOriginalSource ? sourceManager.getSharedDataStore(schema) : null;\n  var stackCalculationInfo = enableDataStack(seriesModel, {\n    schema: schema,\n    store: store\n  });\n  var data = new SeriesData(schema, seriesModel);\n  data.setCalculationInfo(stackCalculationInfo);\n  var dimValueGetter = firstCategoryDimIndex != null && isNeedCompleteOrdinalData(source) ? function (itemOpt, dimName, dataIndex, dimIndex) {\n    // Use dataIndex as ordinal value in categoryAxis\n    return dimIndex === firstCategoryDimIndex ? dataIndex : this.defaultDimValueGetter(itemOpt, dimName, dataIndex, dimIndex);\n  } : null;\n  data.hasItemOption = false;\n  data.initData( // Try to reuse the data store in sourceManager if using dataset.\n  isOriginalSource ? source : store, null, dimValueGetter);\n  return data;\n}\n\nfunction isNeedCompleteOrdinalData(source) {\n  if (source.sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var sampleItem = firstDataNotNull(source.data || []);\n    return !zrUtil.isArray(getDataItemValue(sampleItem));\n  }\n}\n\nfunction firstDataNotNull(arr) {\n  var i = 0;\n\n  while (i < arr.length && arr[i] == null) {\n    i++;\n  }\n\n  return arr[i];\n}\n\nexport default createSeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\n\nvar BaseBarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BaseBarSeriesModel, _super);\n\n  function BaseBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BaseBarSeriesModel.type;\n    return _this;\n  }\n\n  BaseBarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  BaseBarSeriesModel.prototype.getMarkerPosition = function (value) {\n    var coordSys = this.coordinateSystem;\n\n    if (coordSys && coordSys.clampData) {\n      // PENDING if clamp ?\n      var pt = coordSys.dataToPoint(coordSys.clampData(value));\n      var data = this.getData();\n      var offset = data.getLayout('offset');\n      var size = data.getLayout('size');\n      var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n      pt[offsetIndex] += offset + size / 2;\n      return pt;\n    }\n\n    return [NaN, NaN];\n  };\n\n  BaseBarSeriesModel.type = 'series.__base_bar__';\n  BaseBarSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // stack: null\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    barMinHeight: 0,\n    barMinAngle: 0,\n    // cursor: null,\n    large: false,\n    largeThreshold: 400,\n    progressive: 3e3,\n    progressiveChunkMode: 'mod'\n  };\n  return BaseBarSeriesModel;\n}(SeriesModel);\n\nSeriesModel.registerClass(BaseBarSeriesModel);\nexport default BaseBarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { inheritDefaultOption } from '../../util/component.js';\n\nvar BarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BarSeriesModel, _super);\n\n  function BarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BarSeriesModel.type;\n    return _this;\n  }\n\n  BarSeriesModel.prototype.getInitialData = function () {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true,\n      createInvertedIndices: !!this.get('realtimeSort', true) || null\n    });\n  };\n  /**\n   * @override\n   */\n\n\n  BarSeriesModel.prototype.getProgressive = function () {\n    // Do not support progressive in normal mode.\n    return this.get('large') ? this.get('progressive') : false;\n  };\n  /**\n   * @override\n   */\n\n\n  BarSeriesModel.prototype.getProgressiveThreshold = function () {\n    // Do not support progressive in normal mode.\n    var progressiveThreshold = this.get('progressiveThreshold');\n    var largeThreshold = this.get('largeThreshold');\n\n    if (largeThreshold > progressiveThreshold) {\n      progressiveThreshold = largeThreshold;\n    }\n\n    return progressiveThreshold;\n  };\n\n  BarSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.rect(data.getItemLayout(dataIndex));\n  };\n\n  BarSeriesModel.type = 'series.bar';\n  BarSeriesModel.dependencies = ['grid', 'polar'];\n  BarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    // If clipped\n    // Only available on cartesian2d\n    clip: true,\n    roundCap: false,\n    showBackground: false,\n    backgroundStyle: {\n      color: 'rgba(180, 180, 180, 0.2)',\n      borderColor: null,\n      borderWidth: 0,\n      borderType: 'solid',\n      borderRadius: 0,\n      shadowBlur: 0,\n      shadowColor: null,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    realtimeSort: false\n  });\n  return BarSeriesModel;\n}(BaseBarSeriesModel);\n\nexport default BarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport { round } from '../../util/number.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\n\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel, done, during) {\n  var rect = cartesian.getArea();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get(['lineStyle', 'width']) || 2; // Expand the clip path a bit to avoid the border is clipped and looks thinner\n\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth; // fix: https://github.com/apache/incubator-echarts/issues/11369\n\n  x = Math.floor(x);\n  width = Math.round(width);\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n\n  if (hasAnimation) {\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var isAxisInversed = baseAxis.inverse;\n\n    if (isHorizontal) {\n      if (isAxisInversed) {\n        clipPath.shape.x += width;\n      }\n\n      clipPath.shape.width = 0;\n    } else {\n      if (!isAxisInversed) {\n        clipPath.shape.y += height;\n      }\n\n      clipPath.shape.height = 0;\n    }\n\n    var duringCb = isFunction(during) ? function (percent) {\n      during(percent, clipPath);\n    } : null;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height,\n        x: x,\n        y: y\n      }\n    }, seriesModel, null, done, duringCb);\n  }\n\n  return clipPath;\n}\n\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n\n  var r0 = round(sectorArea.r0, 1);\n  var r = round(sectorArea.r, 1);\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: r0,\n      r: r,\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n\n  if (hasAnimation) {\n    var isRadial = polar.getBaseAxis().dim === 'angle';\n\n    if (isRadial) {\n      clipPath.shape.endAngle = sectorArea.startAngle;\n    } else {\n      clipPath.shape.r = r0;\n    }\n\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle,\n        r: r\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createClipPath(coordSys, hasAnimation, seriesModel, done, during) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel, done, during);\n  }\n\n  return null;\n}\n\nexport { createGridClipPath, createPolarClipPath, createClipPath };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { Path } from '../graphic.js';\n/**\n * Sausage: similar to sector, but have half circle on both sides\n */\n\nvar SausageShape =\n/** @class */\nfunction () {\n  function SausageShape() {\n    this.cx = 0;\n    this.cy = 0;\n    this.r0 = 0;\n    this.r = 0;\n    this.startAngle = 0;\n    this.endAngle = Math.PI * 2;\n    this.clockwise = true;\n  }\n\n  return SausageShape;\n}();\n\nvar SausagePath =\n/** @class */\nfunction (_super) {\n  __extends(SausagePath, _super);\n\n  function SausagePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'sausage';\n    return _this;\n  }\n\n  SausagePath.prototype.getDefaultShape = function () {\n    return new SausageShape();\n  };\n\n  SausagePath.prototype.buildPath = function (ctx, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var r0 = Math.max(shape.r0 || 0, 0);\n    var r = Math.max(shape.r, 0);\n    var dr = (r - r0) * 0.5;\n    var rCenter = r0 + dr;\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var PI2 = Math.PI * 2;\n    var lessThanCircle = clockwise ? endAngle - startAngle < PI2 : startAngle - endAngle < PI2;\n\n    if (!lessThanCircle) {\n      // Normalize angles\n      startAngle = endAngle - (clockwise ? PI2 : -PI2);\n    }\n\n    var unitStartX = Math.cos(startAngle);\n    var unitStartY = Math.sin(startAngle);\n    var unitEndX = Math.cos(endAngle);\n    var unitEndY = Math.sin(endAngle);\n\n    if (lessThanCircle) {\n      ctx.moveTo(unitStartX * r0 + cx, unitStartY * r0 + cy);\n      ctx.arc(unitStartX * rCenter + cx, unitStartY * rCenter + cy, dr, -Math.PI + startAngle, startAngle, !clockwise);\n    } else {\n      ctx.moveTo(unitStartX * r + cx, unitStartY * r + cy);\n    }\n\n    ctx.arc(cx, cy, r, startAngle, endAngle, !clockwise);\n    ctx.arc(unitEndX * rCenter + cx, unitEndY * rCenter + cy, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\n\n    if (r0 !== 0) {\n      ctx.arc(cx, cy, r0, endAngle, startAngle, clockwise);\n    } // ctx.closePath();\n\n  };\n\n  return SausagePath;\n}(Path);\n\nexport default SausagePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function isCoordinateSystemType(coordSys, type) {\n  return coordSys.type === type;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isArray } from 'zrender/lib/core/util.js';\n/**\n * @return label string. Not null/undefined\n */\n\nexport function getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  var len = labelDims.length; // Simple optimization (in lots of cases, label dims length is 1)\n\n  if (len === 1) {\n    var rawVal = retrieveRawValue(data, dataIndex, labelDims[0]);\n    return rawVal != null ? rawVal + '' : null;\n  } else if (len) {\n    var vals = [];\n\n    for (var i = 0; i < labelDims.length; i++) {\n      vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\n    }\n\n    return vals.join(' ');\n  }\n}\nexport function getDefaultInterpolatedLabel(data, interpolatedValue) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n\n  if (!isArray(interpolatedValue)) {\n    return interpolatedValue + '';\n  }\n\n  var vals = [];\n\n  for (var i = 0; i < labelDims.length; i++) {\n    var dimIndex = data.getDimensionIndex(labelDims[i]);\n\n    if (dimIndex >= 0) {\n      vals.push(interpolatedValue[dimIndex]);\n    }\n  }\n\n  return vals.join(' ');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { calculateTextPosition } from 'zrender/lib/contain/text.js';\nimport { isArray, isNumber } from 'zrender/lib/core/util.js';\nexport function createSectorCalculateTextPosition(positionMapping, opts) {\n  opts = opts || {};\n  var isRoundCap = opts.isRoundCap;\n  return function (out, opts, boundingRect) {\n    var textPosition = opts.position;\n\n    if (!textPosition || textPosition instanceof Array) {\n      return calculateTextPosition(out, opts, boundingRect);\n    }\n\n    var mappedSectorPosition = positionMapping(textPosition);\n    var distance = opts.distance != null ? opts.distance : 5;\n    var sector = this.shape;\n    var cx = sector.cx;\n    var cy = sector.cy;\n    var r = sector.r;\n    var r0 = sector.r0;\n    var middleR = (r + r0) / 2;\n    var startAngle = sector.startAngle;\n    var endAngle = sector.endAngle;\n    var middleAngle = (startAngle + endAngle) / 2;\n    var extraDist = isRoundCap ? Math.abs(r - r0) / 2 : 0;\n    var mathCos = Math.cos;\n    var mathSin = Math.sin; // base position: top-left\n\n    var x = cx + r * mathCos(startAngle);\n    var y = cy + r * mathSin(startAngle);\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n\n    switch (mappedSectorPosition) {\n      case 'startArc':\n        x = cx + (r0 - distance) * mathCos(middleAngle);\n        y = cy + (r0 - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n\n      case 'insideStartArc':\n        x = cx + (r0 + distance) * mathCos(middleAngle);\n        y = cy + (r0 + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n\n      case 'startAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, distance + extraDist, false);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'insideStartAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, -distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, -distance + extraDist, false);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'middle':\n        x = cx + middleR * mathCos(middleAngle);\n        y = cy + middleR * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'endArc':\n        x = cx + (r + distance) * mathCos(middleAngle);\n        y = cy + (r + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n\n      case 'insideEndArc':\n        x = cx + (r - distance) * mathCos(middleAngle);\n        y = cy + (r - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n\n      case 'endAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, distance + extraDist, true);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'insideEndAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, -distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, -distance + extraDist, true);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n\n      default:\n        return calculateTextPosition(out, opts, boundingRect);\n    }\n\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n  };\n}\nexport function setSectorTextRotation(sector, textPosition, positionMapping, rotateType) {\n  if (isNumber(rotateType)) {\n    // user-set rotation\n    sector.setTextConfig({\n      rotation: rotateType\n    });\n    return;\n  } else if (isArray(textPosition)) {\n    // user-set position, use 0 as auto rotation\n    sector.setTextConfig({\n      rotation: 0\n    });\n    return;\n  }\n\n  var shape = sector.shape;\n  var startAngle = shape.clockwise ? shape.startAngle : shape.endAngle;\n  var endAngle = shape.clockwise ? shape.endAngle : shape.startAngle;\n  var middleAngle = (startAngle + endAngle) / 2;\n  var anchorAngle;\n  var mappedSectorPosition = positionMapping(textPosition);\n\n  switch (mappedSectorPosition) {\n    case 'startArc':\n    case 'insideStartArc':\n    case 'middle':\n    case 'insideEndArc':\n    case 'endArc':\n      anchorAngle = middleAngle;\n      break;\n\n    case 'startAngle':\n    case 'insideStartAngle':\n      anchorAngle = startAngle;\n      break;\n\n    case 'endAngle':\n    case 'insideEndAngle':\n      anchorAngle = endAngle;\n      break;\n\n    default:\n      sector.setTextConfig({\n        rotation: 0\n      });\n      return;\n  }\n\n  var rotate = Math.PI * 1.5 - anchorAngle;\n  /**\n   * TODO: labels with rotate > Math.PI / 2 should be rotate another\n   * half round flipped to increase readability. However, only middle\n   * position supports this for now, because in other positions, the\n   * anchor point is not at the center of the text, so the positions\n   * after rotating is not as expected.\n   */\n\n  if (mappedSectorPosition === 'middle' && rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\n    rotate -= Math.PI;\n  }\n\n  sector.setTextConfig({\n    rotation: rotate\n  });\n}\n\nfunction adjustAngleDistanceX(angle, distance, isEnd) {\n  return distance * Math.sin(angle) * (isEnd ? -1 : 1);\n}\n\nfunction adjustAngleDistanceY(angle, distance, isEnd) {\n  return distance * Math.cos(angle) * (isEnd ? 1 : -1);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport { extend, each, map } from 'zrender/lib/core/util.js';\nimport { Rect, Sector, updateProps, initProps, removeElementWithFadeOut, traverseElements } from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels, setLabelValueAnimation, labelInner } from '../../label/labelStyle.js';\nimport { throttle } from '../../util/throttle.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport Sausage from '../../util/shape/sausage.js';\nimport ChartView from '../../view/Chart.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper.js';\nimport { warn } from '../../util/log.js';\nimport { createSectorCalculateTextPosition, setSectorTextRotation } from '../../label/sectorLabel.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar mathMax = Math.max;\nvar mathMin = Math.min;\n\nfunction getClipArea(coord, data) {\n  var coordSysClipArea = coord.getArea && coord.getArea();\n\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var baseAxis = coord.getBaseAxis(); // When boundaryGap is false or using time axis. bar may exceed the grid.\n    // We should not clip this part.\n    // See test/bar2.html\n\n    if (baseAxis.type !== 'category' || !baseAxis.onBand) {\n      var expandWidth = data.getLayout('bandWidth');\n\n      if (baseAxis.isHorizontal()) {\n        coordSysClipArea.x -= expandWidth;\n        coordSysClipArea.width += expandWidth * 2;\n      } else {\n        coordSysClipArea.y -= expandWidth;\n        coordSysClipArea.height += expandWidth * 2;\n      }\n    }\n  }\n\n  return coordSysClipArea;\n}\n\nvar BarView =\n/** @class */\nfunction (_super) {\n  __extends(BarView, _super);\n\n  function BarView() {\n    var _this = _super.call(this) || this;\n\n    _this.type = BarView.type;\n    _this._isFirstFrame = true;\n    return _this;\n  }\n\n  BarView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    this._model = seriesModel;\n\n    this._removeOnRenderedListener(api);\n\n    this._updateDrawMode(seriesModel);\n\n    var coordinateSystemType = seriesModel.get('coordinateSystem');\n\n    if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n      // Clear previously rendered progressive elements.\n      this._progressiveEls = null;\n      this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api, payload);\n    } else if (process.env.NODE_ENV !== 'production') {\n      warn('Only cartesian2d and polar supported for bar.');\n    }\n  };\n\n  BarView.prototype.incrementalPrepareRender = function (seriesModel) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel); // incremental also need to clip, otherwise might be overlow.\n    // But must not set clip in each frame, otherwise all of the children will be marked redraw.\n\n\n    this._updateLargeClip(seriesModel);\n  };\n\n  BarView.prototype.incrementalRender = function (params, seriesModel) {\n    // Reset\n    this._progressiveEls = []; // Do not support progressive in normal mode.\n\n    this._incrementalRenderLarge(params, seriesModel);\n  };\n\n  BarView.prototype.eachRendered = function (cb) {\n    traverseElements(this._progressiveEls || this.group, cb);\n  };\n\n  BarView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  };\n\n  BarView.prototype._renderNormal = function (seriesModel, ecModel, api, payload) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coord = seriesModel.coordinateSystem;\n    var baseAxis = coord.getBaseAxis();\n    var isHorizontalOrRadial;\n\n    if (coord.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n    } else if (coord.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n    }\n\n    var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n    var realtimeSortCfg = shouldRealtimeSort(seriesModel, coord);\n\n    if (realtimeSortCfg) {\n      this._enableRealtimeSort(realtimeSortCfg, data, api);\n    }\n\n    var needsClip = seriesModel.get('clip', true) || realtimeSortCfg;\n    var coordSysClipArea = getClipArea(coord, data); // If there is clipPath created in large mode. Remove it.\n\n    group.removeClipPath(); // We don't use clipPath in normal mode because we needs a perfect animation\n    // And don't want the label are clipped.\n\n    var roundCap = seriesModel.get('roundCap', true);\n    var drawBackground = seriesModel.get('showBackground', true);\n    var backgroundModel = seriesModel.getModel('backgroundStyle');\n    var barBorderRadius = backgroundModel.get('borderRadius') || 0;\n    var bgEls = [];\n    var oldBgEls = this._backgroundEls;\n    var isInitSort = payload && payload.isInitSort;\n    var isChangeOrder = payload && payload.type === 'changeAxisOrder';\n\n    function createBackground(dataIndex) {\n      var bgLayout = getLayout[coord.type](data, dataIndex);\n      var bgEl = createBackgroundEl(coord, isHorizontalOrRadial, bgLayout);\n      bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n      if (coord.type === 'cartesian2d') {\n        bgEl.setShape('r', barBorderRadius);\n      }\n\n      bgEls[dataIndex] = bgEl;\n      return bgEl;\n    }\n\n    ;\n    data.diff(oldData).add(function (dataIndex) {\n      var itemModel = data.getItemModel(dataIndex);\n      var layout = getLayout[coord.type](data, dataIndex, itemModel);\n\n      if (drawBackground) {\n        createBackground(dataIndex);\n      } // If dataZoom in filteMode: 'empty', the baseValue can be set as NaN in \"axisProxy\".\n\n\n      if (!data.hasValue(dataIndex) || !isValidLayout[coord.type](layout)) {\n        return;\n      }\n\n      var isClipped = false;\n\n      if (needsClip) {\n        // Clip will modify the layout params.\n        // And return a boolean to determine if the shape are fully clipped.\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n      }\n\n      var el = elementCreator[coord.type](seriesModel, data, dataIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, false, roundCap);\n\n      if (realtimeSortCfg) {\n        /**\n         * Force label animation because even if the element is\n         * ignored because it's clipped, it may not be clipped after\n         * changing order. Then, if not using forceLabelAnimation,\n         * the label animation was never started, in which case,\n         * the label will be the final value and doesn't have label\n         * animation.\n         */\n        el.forceLabelAnimation = true;\n      }\n\n      updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, dataIndex, isHorizontalOrRadial, false, false);\n      } else {\n        initProps(el, {\n          shape: layout\n        }, seriesModel, dataIndex);\n      }\n\n      data.setItemGraphicEl(dataIndex, el);\n      group.add(el);\n      el.ignore = isClipped;\n    }).update(function (newIndex, oldIndex) {\n      var itemModel = data.getItemModel(newIndex);\n      var layout = getLayout[coord.type](data, newIndex, itemModel);\n\n      if (drawBackground) {\n        var bgEl = void 0;\n\n        if (oldBgEls.length === 0) {\n          bgEl = createBackground(oldIndex);\n        } else {\n          bgEl = oldBgEls[oldIndex];\n          bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n          if (coord.type === 'cartesian2d') {\n            bgEl.setShape('r', barBorderRadius);\n          }\n\n          bgEls[newIndex] = bgEl;\n        }\n\n        var bgLayout = getLayout[coord.type](data, newIndex);\n        var shape = createBackgroundShape(isHorizontalOrRadial, bgLayout, coord);\n        updateProps(bgEl, {\n          shape: shape\n        }, animationModel, newIndex);\n      }\n\n      var el = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex) || !isValidLayout[coord.type](layout)) {\n        group.remove(el);\n        return;\n      }\n\n      var isClipped = false;\n\n      if (needsClip) {\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n\n        if (isClipped) {\n          group.remove(el);\n        }\n      }\n\n      if (!el) {\n        el = elementCreator[coord.type](seriesModel, data, newIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, !!el, roundCap);\n      } else {\n        saveOldStyle(el);\n      }\n\n      if (realtimeSortCfg) {\n        el.forceLabelAnimation = true;\n      }\n\n      if (isChangeOrder) {\n        var textEl = el.getTextContent();\n\n        if (textEl) {\n          var labelInnerStore = labelInner(textEl);\n\n          if (labelInnerStore.prevValue != null) {\n            /**\n             * Set preValue to be value so that no new label\n             * should be started, otherwise, it will take a full\n             * `animationDurationUpdate` time to finish the\n             * animation, which is not expected.\n             */\n            labelInnerStore.prevValue = labelInnerStore.value;\n          }\n        }\n      } // Not change anything if only order changed.\n      // Especially not change label.\n      else {\n          updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n        }\n\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, newIndex, isHorizontalOrRadial, true, isChangeOrder);\n      } else {\n        updateProps(el, {\n          shape: layout\n        }, seriesModel, newIndex, null);\n      }\n\n      data.setItemGraphicEl(newIndex, el);\n      el.ignore = isClipped;\n      group.add(el);\n    }).remove(function (dataIndex) {\n      var el = oldData.getItemGraphicEl(dataIndex);\n      el && removeElementWithFadeOut(el, seriesModel, dataIndex);\n    }).execute();\n    var bgGroup = this._backgroundGroup || (this._backgroundGroup = new Group());\n    bgGroup.removeAll();\n\n    for (var i = 0; i < bgEls.length; ++i) {\n      bgGroup.add(bgEls[i]);\n    }\n\n    group.add(bgGroup);\n    this._backgroundEls = bgEls;\n    this._data = data;\n  };\n\n  BarView.prototype._renderLarge = function (seriesModel, ecModel, api) {\n    this._clear();\n\n    createLarge(seriesModel, this.group);\n\n    this._updateLargeClip(seriesModel);\n  };\n\n  BarView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    this._removeBackground();\n\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\n  };\n\n  BarView.prototype._updateLargeClip = function (seriesModel) {\n    // Use clipPath in large mode.\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n    var group = this.group;\n\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n  };\n\n  BarView.prototype._enableRealtimeSort = function (realtimeSortCfg, data, api) {\n    var _this = this; // If no data in the first frame, wait for data to initSort\n\n\n    if (!data.count()) {\n      return;\n    }\n\n    var baseAxis = realtimeSortCfg.baseAxis;\n\n    if (this._isFirstFrame) {\n      this._dispatchInitSort(data, realtimeSortCfg, api);\n\n      this._isFirstFrame = false;\n    } else {\n      var orderMapping_1 = function (idx) {\n        var el = data.getItemGraphicEl(idx);\n        var shape = el && el.shape;\n        return shape && // The result should be consistent with the initial sort by data value.\n        // Do not support the case that both positive and negative exist.\n        Math.abs(baseAxis.isHorizontal() ? shape.height : shape.width) // If data is NaN, shape.xxx may be NaN, so use || 0 here in case\n        || 0;\n      };\n\n      this._onRendered = function () {\n        _this._updateSortWithinSameData(data, orderMapping_1, baseAxis, api);\n      };\n\n      api.getZr().on('rendered', this._onRendered);\n    }\n  };\n\n  BarView.prototype._dataSort = function (data, baseAxis, orderMapping) {\n    var info = [];\n    data.each(data.mapDimension(baseAxis.dim), function (ordinalNumber, dataIdx) {\n      var mappedValue = orderMapping(dataIdx);\n      mappedValue = mappedValue == null ? NaN : mappedValue;\n      info.push({\n        dataIndex: dataIdx,\n        mappedValue: mappedValue,\n        ordinalNumber: ordinalNumber\n      });\n    });\n    info.sort(function (a, b) {\n      // If NaN, it will be treated as min val.\n      return b.mappedValue - a.mappedValue;\n    });\n    return {\n      ordinalNumbers: map(info, function (item) {\n        return item.ordinalNumber;\n      })\n    };\n  };\n\n  BarView.prototype._isOrderChangedWithinSameData = function (data, orderMapping, baseAxis) {\n    var scale = baseAxis.scale;\n    var ordinalDataDim = data.mapDimension(baseAxis.dim);\n    var lastValue = Number.MAX_VALUE;\n\n    for (var tickNum = 0, len = scale.getOrdinalMeta().categories.length; tickNum < len; ++tickNum) {\n      var rawIdx = data.rawIndexOf(ordinalDataDim, scale.getRawOrdinalNumber(tickNum));\n      var value = rawIdx < 0 // If some tick have no bar, the tick will be treated as min.\n      ? Number.MIN_VALUE // PENDING: if dataZoom on baseAxis exits, is it a performance issue?\n      : orderMapping(data.indexOfRawIndex(rawIdx));\n\n      if (value > lastValue) {\n        return true;\n      }\n\n      lastValue = value;\n    }\n\n    return false;\n  };\n  /*\n   * Consider the case when A and B changed order, whose representing\n   * bars are both out of sight, we don't wish to trigger reorder action\n   * as long as the order in the view doesn't change.\n   */\n\n\n  BarView.prototype._isOrderDifferentInView = function (orderInfo, baseAxis) {\n    var scale = baseAxis.scale;\n    var extent = scale.getExtent();\n    var tickNum = Math.max(0, extent[0]);\n    var tickMax = Math.min(extent[1], scale.getOrdinalMeta().categories.length - 1);\n\n    for (; tickNum <= tickMax; ++tickNum) {\n      if (orderInfo.ordinalNumbers[tickNum] !== scale.getRawOrdinalNumber(tickNum)) {\n        return true;\n      }\n    }\n  };\n\n  BarView.prototype._updateSortWithinSameData = function (data, orderMapping, baseAxis, api) {\n    if (!this._isOrderChangedWithinSameData(data, orderMapping, baseAxis)) {\n      return;\n    }\n\n    var sortInfo = this._dataSort(data, baseAxis, orderMapping);\n\n    if (this._isOrderDifferentInView(sortInfo, baseAxis)) {\n      this._removeOnRenderedListener(api);\n\n      api.dispatchAction({\n        type: 'changeAxisOrder',\n        componentType: baseAxis.dim + 'Axis',\n        axisId: baseAxis.index,\n        sortInfo: sortInfo\n      });\n    }\n  };\n\n  BarView.prototype._dispatchInitSort = function (data, realtimeSortCfg, api) {\n    var baseAxis = realtimeSortCfg.baseAxis;\n\n    var sortResult = this._dataSort(data, baseAxis, function (dataIdx) {\n      return data.get(data.mapDimension(realtimeSortCfg.otherAxis.dim), dataIdx);\n    });\n\n    api.dispatchAction({\n      type: 'changeAxisOrder',\n      componentType: baseAxis.dim + 'Axis',\n      isInitSort: true,\n      axisId: baseAxis.index,\n      sortInfo: sortResult\n    });\n  };\n\n  BarView.prototype.remove = function (ecModel, api) {\n    this._clear(this._model);\n\n    this._removeOnRenderedListener(api);\n  };\n\n  BarView.prototype.dispose = function (ecModel, api) {\n    this._removeOnRenderedListener(api);\n  };\n\n  BarView.prototype._removeOnRenderedListener = function (api) {\n    if (this._onRendered) {\n      api.getZr().off('rendered', this._onRendered);\n      this._onRendered = null;\n    }\n  };\n\n  BarView.prototype._clear = function (model) {\n    var group = this.group;\n    var data = this._data;\n\n    if (model && model.isAnimationEnabled() && data && !this._isLargeDraw) {\n      this._removeBackground();\n\n      this._backgroundEls = [];\n      data.eachItemGraphicEl(function (el) {\n        removeElementWithFadeOut(el, model, getECData(el).dataIndex);\n      });\n    } else {\n      group.removeAll();\n    }\n\n    this._data = null;\n    this._isFirstFrame = true;\n  };\n\n  BarView.prototype._removeBackground = function () {\n    this.group.remove(this._backgroundGroup);\n    this._backgroundGroup = null;\n  };\n\n  BarView.type = 'bar';\n  return BarView;\n}(ChartView);\n\nvar clip = {\n  cartesian2d: function (coordSysBoundingRect, layout) {\n    var signWidth = layout.width < 0 ? -1 : 1;\n    var signHeight = layout.height < 0 ? -1 : 1; // Needs positive width and height\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    var coordSysX2 = coordSysBoundingRect.x + coordSysBoundingRect.width;\n    var coordSysY2 = coordSysBoundingRect.y + coordSysBoundingRect.height;\n    var x = mathMax(layout.x, coordSysBoundingRect.x);\n    var x2 = mathMin(layout.x + layout.width, coordSysX2);\n    var y = mathMax(layout.y, coordSysBoundingRect.y);\n    var y2 = mathMin(layout.y + layout.height, coordSysY2);\n    var xClipped = x2 < x;\n    var yClipped = y2 < y; // When xClipped or yClipped, the element will be marked as `ignore`.\n    // But we should also place the element at the edge of the coord sys bounding rect.\n    // Beause if data changed and the bar show again, its transition animaiton\n    // will begin at this place.\n\n    layout.x = xClipped && x > coordSysX2 ? x2 : x;\n    layout.y = yClipped && y > coordSysY2 ? y2 : y;\n    layout.width = xClipped ? 0 : x2 - x;\n    layout.height = yClipped ? 0 : y2 - y; // Reverse back\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    return xClipped || yClipped;\n  },\n  polar: function (coordSysClipArea, layout) {\n    var signR = layout.r0 <= layout.r ? 1 : -1; // Make sure r is larger than r0\n\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n\n    var r = mathMin(layout.r, coordSysClipArea.r);\n    var r0 = mathMax(layout.r0, coordSysClipArea.r0);\n    layout.r = r;\n    layout.r0 = r0;\n    var clipped = r - r0 < 0; // Reverse back\n\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n\n    return clipped;\n  }\n};\nvar elementCreator = {\n  cartesian2d: function (seriesModel, data, newIndex, layout, isHorizontal, animationModel, axisModel, isUpdate, roundCap) {\n    var rect = new Rect({\n      shape: extend({}, layout),\n      z2: 1\n    });\n    rect.__dataIndex = newIndex;\n    rect.name = 'item';\n\n    if (animationModel) {\n      var rectShape = rect.shape;\n      var animateProperty = isHorizontal ? 'height' : 'width';\n      rectShape[animateProperty] = 0;\n    }\n\n    return rect;\n  },\n  polar: function (seriesModel, data, newIndex, layout, isRadial, animationModel, axisModel, isUpdate, roundCap) {\n    var ShapeClass = !isRadial && roundCap ? Sausage : Sector;\n    var sector = new ShapeClass({\n      shape: layout,\n      z2: 1\n    });\n    sector.name = 'item';\n    var positionMap = createPolarPositionMapping(isRadial);\n    sector.calculateTextPosition = createSectorCalculateTextPosition(positionMap, {\n      isRoundCap: ShapeClass === Sausage\n    }); // Animation\n\n    if (animationModel) {\n      var sectorShape = sector.shape;\n      var animateProperty = isRadial ? 'r' : 'endAngle';\n      var animateTarget = {};\n      sectorShape[animateProperty] = isRadial ? 0 : layout.startAngle;\n      animateTarget[animateProperty] = layout[animateProperty];\n      (isUpdate ? updateProps : initProps)(sector, {\n        shape: animateTarget // __value: typeof dataValue === 'string' ? parseInt(dataValue, 10) : dataValue\n\n      }, animationModel);\n    }\n\n    return sector;\n  }\n};\n\nfunction shouldRealtimeSort(seriesModel, coordSys) {\n  var realtimeSortOption = seriesModel.get('realtimeSort', true);\n  var baseAxis = coordSys.getBaseAxis();\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (realtimeSortOption) {\n      if (baseAxis.type !== 'category') {\n        warn('`realtimeSort` will not work because this bar series is not based on a category axis.');\n      }\n\n      if (coordSys.type !== 'cartesian2d') {\n        warn('`realtimeSort` will not work because this bar series is not on cartesian2d.');\n      }\n    }\n  }\n\n  if (realtimeSortOption && baseAxis.type === 'category' && coordSys.type === 'cartesian2d') {\n    return {\n      baseAxis: baseAxis,\n      otherAxis: coordSys.getOtherAxis(baseAxis)\n    };\n  }\n}\n\nfunction updateRealtimeAnimation(realtimeSortCfg, seriesAnimationModel, el, layout, newIndex, isHorizontal, isUpdate, isChangeOrder) {\n  var seriesTarget;\n  var axisTarget;\n\n  if (isHorizontal) {\n    axisTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n    seriesTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n  } else {\n    axisTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n    seriesTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n  }\n\n  if (!isChangeOrder) {\n    // Keep the original growth animation if only axis order changed.\n    // Not start a new animation.\n    (isUpdate ? updateProps : initProps)(el, {\n      shape: seriesTarget\n    }, seriesAnimationModel, newIndex, null);\n  }\n\n  var axisAnimationModel = seriesAnimationModel ? realtimeSortCfg.baseAxis.model : null;\n  (isUpdate ? updateProps : initProps)(el, {\n    shape: axisTarget\n  }, axisAnimationModel, newIndex);\n}\n\nfunction checkPropertiesNotValid(obj, props) {\n  for (var i = 0; i < props.length; i++) {\n    if (!isFinite(obj[props[i]])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar rectPropties = ['x', 'y', 'width', 'height'];\nvar polarPropties = ['cx', 'cy', 'r', 'startAngle', 'endAngle'];\nvar isValidLayout = {\n  cartesian2d: function (layout) {\n    return !checkPropertiesNotValid(layout, rectPropties);\n  },\n  polar: function (layout) {\n    return !checkPropertiesNotValid(layout, polarPropties);\n  }\n};\nvar getLayout = {\n  // itemModel is only used to get borderWidth, which is not needed\n  // when calculating bar background layout.\n  cartesian2d: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    var fixedLineWidth = itemModel ? getLineWidth(itemModel, layout) : 0; // fix layout with lineWidth\n\n    var signX = layout.width > 0 ? 1 : -1;\n    var signY = layout.height > 0 ? 1 : -1;\n    return {\n      x: layout.x + signX * fixedLineWidth / 2,\n      y: layout.y + signY * fixedLineWidth / 2,\n      width: layout.width - signX * fixedLineWidth,\n      height: layout.height - signY * fixedLineWidth\n    };\n  },\n  polar: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    return {\n      cx: layout.cx,\n      cy: layout.cy,\n      r0: layout.r0,\n      r: layout.r,\n      startAngle: layout.startAngle,\n      endAngle: layout.endAngle,\n      clockwise: layout.clockwise\n    };\n  }\n};\n\nfunction isZeroOnPolar(layout) {\n  return layout.startAngle != null && layout.endAngle != null && layout.startAngle === layout.endAngle;\n}\n\nfunction createPolarPositionMapping(isRadial) {\n  return function (isRadial) {\n    var arcOrAngle = isRadial ? 'Arc' : 'Angle';\n    return function (position) {\n      switch (position) {\n        case 'start':\n        case 'insideStart':\n        case 'end':\n        case 'insideEnd':\n          return position + arcOrAngle;\n\n        default:\n          return position;\n      }\n    };\n  }(isRadial);\n}\n\nfunction updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, isPolar) {\n  var style = data.getItemVisual(dataIndex, 'style');\n\n  if (!isPolar) {\n    el.setShape('r', itemModel.get(['itemStyle', 'borderRadius']) || 0);\n  }\n\n  el.useStyle(style);\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && el.attr('cursor', cursorStyle);\n  var labelPositionOutside = isPolar ? isHorizontalOrRadial ? layout.r >= layout.r0 ? 'endArc' : 'startArc' : layout.endAngle >= layout.startAngle ? 'endAngle' : 'startAngle' : isHorizontalOrRadial ? layout.height >= 0 ? 'bottom' : 'top' : layout.width >= 0 ? 'right' : 'left';\n  var labelStatesModels = getLabelStatesModels(itemModel);\n  setLabelStyle(el, labelStatesModels, {\n    labelFetcher: seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\n    inheritColor: style.fill,\n    defaultOpacity: style.opacity,\n    defaultOutsidePosition: labelPositionOutside\n  });\n  var label = el.getTextContent();\n\n  if (isPolar && label) {\n    var position = itemModel.get(['label', 'position']);\n    el.textConfig.inside = position === 'middle' ? true : null;\n    setSectorTextRotation(el, position === 'outside' ? labelPositionOutside : position, createPolarPositionMapping(isHorizontalOrRadial), itemModel.get(['label', 'rotate']));\n  }\n\n  setLabelValueAnimation(label, labelStatesModels, seriesModel.getRawValue(dataIndex), function (value) {\n    return getDefaultInterpolatedLabel(data, value);\n  });\n  var emphasisModel = itemModel.getModel(['emphasis']);\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  setStatesStylesFromModel(el, itemModel);\n\n  if (isZeroOnPolar(layout)) {\n    el.style.fill = 'none';\n    el.style.stroke = 'none';\n    each(el.states, function (state) {\n      if (state.style) {\n        state.style.fill = state.style.stroke = 'none';\n      }\n    });\n  }\n} // In case width or height are too small.\n\n\nfunction getLineWidth(itemModel, rawLayout) {\n  // Has no border.\n  var borderColor = itemModel.get(['itemStyle', 'borderColor']);\n\n  if (!borderColor || borderColor === 'none') {\n    return 0;\n  }\n\n  var lineWidth = itemModel.get(['itemStyle', 'borderWidth']) || 0; // width or height may be NaN for empty data\n\n  var width = isNaN(rawLayout.width) ? Number.MAX_VALUE : Math.abs(rawLayout.width);\n  var height = isNaN(rawLayout.height) ? Number.MAX_VALUE : Math.abs(rawLayout.height);\n  return Math.min(lineWidth, width, height);\n}\n\nvar LagePathShape =\n/** @class */\nfunction () {\n  function LagePathShape() {}\n\n  return LagePathShape;\n}();\n\nvar LargePath =\n/** @class */\nfunction (_super) {\n  __extends(LargePath, _super);\n\n  function LargePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'largeBar';\n    return _this;\n  }\n\n  LargePath.prototype.getDefaultShape = function () {\n    return new LagePathShape();\n  };\n\n  LargePath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    var baseDimIdx = this.baseDimIdx;\n    var valueDimIdx = 1 - this.baseDimIdx;\n    var startPoint = [];\n    var size = [];\n    var barWidth = this.barWidth;\n\n    for (var i = 0; i < points.length; i += 3) {\n      size[baseDimIdx] = barWidth;\n      size[valueDimIdx] = points[i + 2];\n      startPoint[baseDimIdx] = points[i + baseDimIdx];\n      startPoint[valueDimIdx] = points[i + valueDimIdx];\n      ctx.rect(startPoint[0], startPoint[1], size[0], size[1]);\n    }\n  };\n\n  return LargePath;\n}(Path);\n\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\n  // TODO support polar\n  var data = seriesModel.getData();\n  var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\n  var largeDataIndices = data.getLayout('largeDataIndices');\n  var barWidth = data.getLayout('size');\n  var backgroundModel = seriesModel.getModel('backgroundStyle');\n  var bgPoints = data.getLayout('largeBackgroundPoints');\n\n  if (bgPoints) {\n    var bgEl = new LargePath({\n      shape: {\n        points: bgPoints\n      },\n      incremental: !!incremental,\n      silent: true,\n      z2: 0\n    });\n    bgEl.baseDimIdx = baseDimIdx;\n    bgEl.largeDataIndices = largeDataIndices;\n    bgEl.barWidth = barWidth;\n    bgEl.useStyle(backgroundModel.getItemStyle());\n    group.add(bgEl);\n    progressiveEls && progressiveEls.push(bgEl);\n  }\n\n  var el = new LargePath({\n    shape: {\n      points: data.getLayout('largePoints')\n    },\n    incremental: !!incremental,\n    ignoreCoarsePointer: true,\n    z2: 1\n  });\n  el.baseDimIdx = baseDimIdx;\n  el.largeDataIndices = largeDataIndices;\n  el.barWidth = barWidth;\n  group.add(el);\n  el.useStyle(data.getVisual('style')); // Enable tooltip and user mouse/touch event handlers.\n\n  getECData(el).seriesIndex = seriesModel.seriesIndex;\n\n  if (!seriesModel.get('silent')) {\n    el.on('mousedown', largePathUpdateDataIndex);\n    el.on('mousemove', largePathUpdateDataIndex);\n  }\n\n  progressiveEls && progressiveEls.push(el);\n} // Use throttle to avoid frequently traverse to find dataIndex.\n\n\nvar largePathUpdateDataIndex = throttle(function (event) {\n  var largePath = this;\n  var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\n  getECData(largePath).dataIndex = dataIndex >= 0 ? dataIndex : null;\n}, 30, false);\n\nfunction largePathFindDataIndex(largePath, x, y) {\n  var baseDimIdx = largePath.baseDimIdx;\n  var valueDimIdx = 1 - baseDimIdx;\n  var points = largePath.shape.points;\n  var largeDataIndices = largePath.largeDataIndices;\n  var startPoint = [];\n  var size = [];\n  var barWidth = largePath.barWidth;\n\n  for (var i = 0, len = points.length / 3; i < len; i++) {\n    var ii = i * 3;\n    size[baseDimIdx] = barWidth;\n    size[valueDimIdx] = points[ii + 2];\n    startPoint[baseDimIdx] = points[ii + baseDimIdx];\n    startPoint[valueDimIdx] = points[ii + valueDimIdx];\n\n    if (size[valueDimIdx] < 0) {\n      startPoint[valueDimIdx] += size[valueDimIdx];\n      size[valueDimIdx] = -size[valueDimIdx];\n    }\n\n    if (x >= startPoint[0] && x <= startPoint[0] + size[0] && y >= startPoint[1] && y <= startPoint[1] + size[1]) {\n      return largeDataIndices[i];\n    }\n  }\n\n  return -1;\n}\n\nfunction createBackgroundShape(isHorizontalOrRadial, layout, coord) {\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var rectShape = layout;\n    var coordLayout = coord.getArea();\n    return {\n      x: isHorizontalOrRadial ? rectShape.x : coordLayout.x,\n      y: isHorizontalOrRadial ? coordLayout.y : rectShape.y,\n      width: isHorizontalOrRadial ? rectShape.width : coordLayout.width,\n      height: isHorizontalOrRadial ? coordLayout.height : rectShape.height\n    };\n  } else {\n    var coordLayout = coord.getArea();\n    var sectorShape = layout;\n    return {\n      cx: coordLayout.cx,\n      cy: coordLayout.cy,\n      r0: isHorizontalOrRadial ? coordLayout.r0 : sectorShape.r0,\n      r: isHorizontalOrRadial ? coordLayout.r : sectorShape.r,\n      startAngle: isHorizontalOrRadial ? sectorShape.startAngle : 0,\n      endAngle: isHorizontalOrRadial ? sectorShape.endAngle : Math.PI * 2\n    };\n  }\n}\n\nfunction createBackgroundEl(coord, isHorizontalOrRadial, layout) {\n  var ElementClz = coord.type === 'polar' ? Sector : Rect;\n  return new ElementClz({\n    shape: createBackgroundShape(isHorizontalOrRadial, layout, coord),\n    silent: true,\n    z2: 0\n  });\n}\n\nexport default BarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { layout, createProgressiveLayout } from '../../layout/barGrid.js';\nimport dataSample from '../../processor/dataSample.js';\nimport BarSeries from './BarSeries.js';\nimport BarView from './BarView.js';\nexport function install(registers) {\n  registers.registerChartView(BarView);\n  registers.registerSeriesModel(BarSeries);\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, zrUtil.curry(layout, 'bar')); // Do layout after other overall layout, which can preapre some informations.\n\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('bar')); // Down sample after filter\n\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('bar'));\n  /**\n   * @payload\n   * @property {string} [componentType=series]\n   * @property {number} [dx]\n   * @property {number} [dy]\n   * @property {number} [zoom]\n   * @property {number} [originX]\n   * @property {number} [originY]\n   */\n\n  registers.registerAction({\n    type: 'changeAxisOrder',\n    event: 'changeAxisOrder',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var componentType = payload.componentType || 'series';\n    ecModel.eachComponent({\n      mainType: componentType,\n      query: payload\n    }, function (componentModel) {\n      if (payload.sortInfo) {\n        componentModel.axis.setCategorySortInfo(payload.sortInfo);\n      }\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from '../../util/model.js';\n/**\n * @return {string} If large mode changed, return string 'reset';\n */\n\nexport default function createRenderPlanner() {\n  var inner = makeInner();\n  return function (seriesModel) {\n    var fields = inner(seriesModel);\n    var pipelineContext = seriesModel.pipelineContext;\n    var originalLarge = !!fields.large;\n    var originalProgressive = !!fields.progressiveRender; // FIXME: if the planner works on a filtered series, `pipelineContext` does not\n    // exists. See #11611 . Probably we need to modify this structure, see the comment\n    // on `performRawSeries` in `Schedular.js`.\n\n    var large = fields.large = !!(pipelineContext && pipelineContext.large);\n    var progressive = fields.progressiveRender = !!(pipelineContext && pipelineContext.progressiveRender);\n    return !!(originalLarge !== large || originalProgressive !== progressive) && 'reset';\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\n/**\n * @param finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param ecModel\n * @return  {point: [x, y], el: ...} point Will not be null.\n */\n\nexport default function findPointFromSeries(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    if (finder.isStacked) {\n      var baseAxis = coordSys.getBaseAxis();\n      var valueAxis = coordSys.getOtherAxis(baseAxis);\n      var valueAxisDim = valueAxis.dim;\n      var baseAxisDim = baseAxis.dim;\n      var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n      var baseDim = data.mapDimension(baseAxisDim);\n      var stackedData = [];\n      stackedData[baseDataOffset] = data.get(baseDim, dataIndex);\n      stackedData[1 - baseDataOffset] = data.get(data.getCalculationInfo('stackResultDimension'), dataIndex);\n      point = coordSys.dataToPoint(stackedData) || [];\n    } else {\n      point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }), dataIndex)) || [];\n    }\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n\n  return {\n    point: point,\n    el: el\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\n\nexport function register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\n\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n  useHandler('globalout', onLeave);\n\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\n\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\n\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\n\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\n\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  }; // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\n\nexport function unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as axisPointerModelHelper from './modelHelper.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as throttleUtil from '../../util/throttle.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n */\n\nvar BaseAxisPointer =\n/** @class */\nfunction () {\n  function BaseAxisPointer() {\n    this._dragging = false;\n    /**\n     * In px, arbitrary value. Do not set too small,\n     * no animation is ok for most cases.\n     */\n\n    this.animationThreshold = 15;\n  }\n  /**\n   * @implement\n   */\n\n\n  BaseAxisPointer.prototype.render = function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n\n    group && group.show();\n    handle && handle.show(); // Otherwise status is 'show'\n\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n    var graphicKey = elOption.graphicKey;\n\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n\n    updateMandatoryProps(group, axisPointerModel, true);\n\n    this._renderHandle(value);\n  };\n  /**\n   * @implement\n   */\n\n\n  BaseAxisPointer.prototype.remove = function (api) {\n    this.clear(api);\n  };\n  /**\n   * @implement\n   */\n\n\n  BaseAxisPointer.prototype.dispose = function (api) {\n    this.clear(api);\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.determineAnimation = function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      } // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n\n\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent(); // Approximate band width\n\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n\n      return false;\n    }\n\n    return animation === true;\n  };\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.createPointerEl = function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.createLabelEl = function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Text(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.updatePointerEl = function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.updateLabelEl = function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        // TODOTODO\n        // shape: elOption.label.shape,\n        x: elOption.label.x,\n        y: elOption.label.y\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  BaseAxisPointer.prototype._renderHandle = function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n\n    var axisPointerModel = this._axisPointerModel;\n\n    var zr = this._api.getZr();\n\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n\n    var isInit;\n\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n    handle.setStyle(handleModel.getItemStyle(null, ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'])); // update position\n\n    var handleSize = handleModel.get('size');\n\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n\n    handle.scaleX = handleSize[0] / 2;\n    handle.scaleY = handleSize[1] / 2;\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n    this._moveHandleToValue(value, isInit);\n  };\n\n  BaseAxisPointer.prototype._moveHandleToValue = function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  };\n\n  BaseAxisPointer.prototype._onHandleDragMove = function (dx, dy) {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    this._dragging = true; // Persistent for throttle.\n\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n\n    this._doDispatchAxisPointer();\n  };\n  /**\n   * Throttled method.\n   */\n\n\n  BaseAxisPointer.prototype._doDispatchAxisPointer = function () {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  };\n\n  BaseAxisPointer.prototype._onHandleDragEnd = function () {\n    this._dragging = false;\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n\n\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n\n\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  };\n  /**\n   * @private\n   */\n\n\n  BaseAxisPointer.prototype.clear = function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n\n    throttleUtil.clear(this, '_doDispatchAxisPointer');\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.doClear = function () {// Implemented by sub-class if necessary.\n  };\n\n  BaseAxisPointer.prototype.buildLabel = function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  };\n\n  return BaseAxisPointer;\n}();\n\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\n\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals_1 = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals_1 = equals_1 && propsEqual(lastProps[key], item);\n    });\n    return !!equals_1;\n  } else {\n    return lastProps === newProps;\n  }\n}\n\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get(['label', 'show']) ? 'show' : 'hide']();\n}\n\nfunction getHandleTransProps(trans) {\n  return {\n    x: trans.x || 0,\n    y: trans.y || 0,\n    rotation: trans.rotation || 0\n  };\n}\n\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\n\nexport default BaseAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer.js';\nimport * as viewHelper from './viewHelper.js';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper.js';\n\nvar CartesianAxisPointer =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisPointer, _super);\n\n  function CartesianAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @override\n   */\n\n\n  CartesianAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption( // @ts-ignore\n    value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  };\n  /**\n   * @override\n   */\n\n\n  CartesianAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    }); // @ts-ignore\n\n    layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n    var pos = viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo);\n    return {\n      x: pos[0],\n      y: pos[1],\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  };\n  /**\n   * @override\n   */\n\n\n  CartesianAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = [transform.x, transform.y];\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      x: currPosition[0],\n      y: currPosition[1],\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  };\n\n  return CartesianAxisPointer;\n}(BaseAxisPointer);\n\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\n\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\n\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\n\nexport default CartesianAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\n\nvar AxisPointerModel =\n/** @class */\nfunction (_super) {\n  __extends(AxisPointerModel, _super);\n\n  function AxisPointerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AxisPointerModel.type;\n    return _this;\n  }\n\n  AxisPointerModel.type = 'axisPointer';\n  AxisPointerModel.defaultOption = {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // zlevel: 0,\n    z: 50,\n    type: 'line',\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    value: null,\n    status: null,\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#B9BEC9',\n      width: 1,\n      type: 'dashed'\n    },\n    shadowStyle: {\n      color: 'rgba(210,219,238,0.2)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      precision: 'auto',\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      borderColor: null,\n      borderWidth: 0,\n      borderRadius: 3\n    },\n    handle: {\n      show: false,\n      // eslint-disable-next-line\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  };\n  return AxisPointerModel;\n}(ComponentModel);\n\nexport default AxisPointerModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as globalListener from './globalListener.js';\nimport ComponentView from '../../view/Component.js';\n\nvar AxisPointerView =\n/** @class */\nfunction (_super) {\n  __extends(AxisPointerView, _super);\n\n  function AxisPointerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AxisPointerView.type;\n    return _this;\n  }\n\n  AxisPointerView.prototype.render = function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  };\n\n  AxisPointerView.prototype.remove = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n\n  AxisPointerView.prototype.dispose = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n\n  AxisPointerView.type = 'axisPointer';\n  return AxisPointerView;\n}(ComponentView);\n\nexport default AxisPointerView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from '../../util/model.js';\nimport * as modelHelper from './modelHelper.js';\nimport findPointFromSeries from './findPointFromSeries.js';\nimport { each, curry, bind, extend } from 'zrender/lib/core/util.js';\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @return content of event obj for echarts.connect.\n */\n\nexport default function axisTrigger(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n  // See #6121. But we are not able to reproduce it yet.\n\n  if (!coordSysAxesInfo) {\n    return;\n  }\n\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputPayload = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  }; // Process for triggered axes.\n\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputPayload);\n      }\n    });\n  }); // Process for linked axes.\n\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputPayload);\n  });\n  updateModelActually(showValueMap, axesInfo, outputPayload);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputPayload;\n}\n\nfunction processOnAxis(axisInfo, newValue, updaters, noSnap, outputFinder) {\n  var axis = axisInfo.axis;\n\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  } // Heavy calculation. So put it after axis.containData checking.\n\n\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n  // By default use the first involved series data as a sample to connect.\n\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    extend(outputFinder, payloadBatch[0]);\n  } // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n\n\n  if (!noSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n\n  updaters.showPointer(axisInfo, newValue, payloadBatch); // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\n\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimensionsAll(dim);\n    var seriesNestestValue;\n    var dataIndices;\n\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n\n      if (!dataIndices.length) {\n        return;\n      }\n\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff); // Consider category case\n\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\n\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\n\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get(['label', 'precision']),\n      formatter: axisPointerModel.get(['label', 'formatter'])\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\n\nfunction updateModelActually(showValueMap, axesInfo, outputPayload) {\n  var outputAxesInfo = outputPayload.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value; // For label formatter param and highlight.\n\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    } // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n        // If hide, value still need to be set, consider\n        // click legend to toggle axis blank.\n        !axisInfo.useHandle && (option.status = 'hide');\n      } // If status is 'hide', should be no info in payload.\n\n\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\n\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  } // In most case only one axis (or event one series is used). It is\n  // convinient to fetch payload.seriesIndex and payload.dataIndex\n  // dirtectly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n\n\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\n\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification shoule be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  }); // Diff.\n\n  var toHighlight = [];\n  var toDownplay = [];\n  each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toHighlight\n  });\n}\n\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\n\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\n\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport AxisView from '../axis/AxisView.js';\nimport CartesianAxisPointer from './CartesianAxisPointer.js';\nimport AxisPointerModel from './AxisPointerModel.js';\nimport AxisPointerView from './AxisPointerView.js';\nimport { isArray } from 'zrender/lib/core/util.js';\nimport { collect } from './modelHelper.js';\nimport axisTrigger from './axisTrigger.js';\nexport function install(registers) {\n  // CartesianAxisPointer is not supposed to be required here. But consider\n  // echarts.simple.js and online build tooltip, which only require gridSimple,\n  // CartesianAxisPointer should be able to required somewhere.\n  AxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\n  registers.registerComponentModel(AxisPointerModel);\n  registers.registerComponentView(AxisPointerView);\n  registers.registerPreprocessor(function (option) {\n    // Always has a global axisPointerModel for default setting.\n    if (option) {\n      (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n      var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n      // is not set, remain null/undefined, otherwise it will\n      // override existent link setting.\n\n      if (link && !isArray(link)) {\n        option.axisPointer.link = [link];\n      }\n    }\n  }); // This process should proformed after coordinate systems created\n  // and series data processed. So put it on statistic processing stage.\n\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n    // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n    // allAxesInfo should be updated when setOption performed.\n    ecModel.getComponent('axisPointer').coordSysAxesInfo = collect(ecModel, api);\n  }); // Broadcast to all views.\n\n  registers.registerAction({\n    type: 'updateAxisPointer',\n    event: 'updateAxisPointer',\n    update: ':updateAxisPointer'\n  }, axisTrigger);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Model from '../../model/Model.js';\nimport { each, curry, clone, defaults, isArray, indexOf } from 'zrender/lib/core/util.js'; // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\n\nexport function collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\n\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = []; // Collect axes info.\n\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n    // for user. So we enable seting tooltip on coordSys model.\n\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n    if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get(['axisPointer', 'type']) === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get(['axisPointer', 'axis']));\n\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    } // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n\n\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var axisKey = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n      var axisInfo = result.axesInfo[axisKey] = {\n        key: axisKey,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: [],\n        linkGroup: null\n      };\n      axesInfoInCoordSys[axisKey] = axisInfo;\n      result.seriesInvolved = result.seriesInvolved || involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[axisKey] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\n\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var fields = ['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'];\n  var volatileOption = {};\n  each(fields, function (field) {\n    volatileOption[field] = clone(tooltipAxisPointerModel.get(field));\n  }); // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n  // Only these properties can be overrided from tooltip to axisPointer.\n\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n\n  var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n  labelOption.show == null && (labelOption.show = false);\n\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get(['label', 'show']);\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true; // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\n\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get(['tooltip', 'trigger'], true);\n    var seriesTooltipShow = seriesModel.get(['tooltip', 'show'], true);\n\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get(['axisPointer', 'show'], true) === false) {\n      return;\n    }\n\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  });\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\n\n\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\n\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || isArray(linkPropValue) && indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\n\nexport function fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n\n  if (!axisInfo) {\n    return;\n  }\n\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n  if (value != null) {\n    value = scale.parse(value);\n  }\n\n  var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n\n  if ( // Pick a value on axis when initializing.\n  value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n\n  option.value = value;\n\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\nexport function getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\nexport function getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\n\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get(['handle', 'show']);\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\n\n\nexport function makeKey(model) {\n  return model.type + '||' + model.id;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport AxisBuilder from '../axis/AxisBuilder.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nexport function buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\n\nexport function buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get(['label', 'precision']),\n    formatter: axisPointerModel.get(['label', 'formatter'])\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get(['axisLine', 'lineStyle', 'color']);\n  }\n\n  elOption.label = {\n    // shape: {x: 0, y: 0, width: width, height: height, r: labelModel.get('borderRadius')},\n    x: position[0],\n    y: position[1],\n    style: createTextStyle(labelModel, {\n      text: text,\n      font: font,\n      fill: labelModel.getTextColor(),\n      padding: paddings,\n      backgroundColor: bgColor\n    }),\n    // Lable should be over axisPointer.\n    z2: 10\n  };\n} // Do not overflow ec container\n\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\n\nexport function getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel({\n    value: value\n  }, {\n    // If `precision` is set, width can be fixed (like '12.00500'), which\n    // helps to debounce when when moving label.\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n\n  if (formatter) {\n    var params_1 = {\n      value: axisHelper.getAxisRawValue(axis, {\n        value: value\n      }),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params_1.seriesData.push(dataParams);\n    });\n\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params_1);\n    }\n  }\n\n  return text;\n}\nexport function getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\nexport function buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  // @ts-ignore\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get(['label', 'margin']);\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\nexport function makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\nexport function makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\nexport function makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { BoundingRect, OrientedBoundingRect } from '../util/graphic.js';\nexport function prepareLayoutList(input) {\n  var list = [];\n\n  for (var i = 0; i < input.length; i++) {\n    var rawItem = input[i];\n\n    if (rawItem.defaultAttr.ignore) {\n      continue;\n    }\n\n    var label = rawItem.label;\n    var transform = label.getComputedTransform(); // NOTE: Get bounding rect after getComputedTransform, or label may not been updated by the host el.\n\n    var localRect = label.getBoundingRect();\n    var isAxisAligned = !transform || transform[1] < 1e-5 && transform[2] < 1e-5;\n    var minMargin = label.style.margin || 0;\n    var globalRect = localRect.clone();\n    globalRect.applyTransform(transform);\n    globalRect.x -= minMargin / 2;\n    globalRect.y -= minMargin / 2;\n    globalRect.width += minMargin;\n    globalRect.height += minMargin;\n    var obb = isAxisAligned ? new OrientedBoundingRect(localRect, transform) : null;\n    list.push({\n      label: label,\n      labelLine: rawItem.labelLine,\n      rect: globalRect,\n      localRect: localRect,\n      obb: obb,\n      priority: rawItem.priority,\n      defaultAttr: rawItem.defaultAttr,\n      layoutOption: rawItem.computedLayoutOption,\n      axisAligned: isAxisAligned,\n      transform: transform\n    });\n  }\n\n  return list;\n}\n\nfunction shiftLayout(list, xyDim, sizeDim, minBound, maxBound, balanceShift) {\n  var len = list.length;\n\n  if (len < 2) {\n    return;\n  }\n\n  list.sort(function (a, b) {\n    return a.rect[xyDim] - b.rect[xyDim];\n  });\n  var lastPos = 0;\n  var delta;\n  var adjusted = false;\n  var shifts = [];\n  var totalShifts = 0;\n\n  for (var i = 0; i < len; i++) {\n    var item = list[i];\n    var rect = item.rect;\n    delta = rect[xyDim] - lastPos;\n\n    if (delta < 0) {\n      // shiftForward(i, len, -delta);\n      rect[xyDim] -= delta;\n      item.label[xyDim] -= delta;\n      adjusted = true;\n    }\n\n    var shift = Math.max(-delta, 0);\n    shifts.push(shift);\n    totalShifts += shift;\n    lastPos = rect[xyDim] + rect[sizeDim];\n  }\n\n  if (totalShifts > 0 && balanceShift) {\n    // Shift back to make the distribution more equally.\n    shiftList(-totalShifts / len, 0, len);\n  } // TODO bleedMargin?\n\n\n  var first = list[0];\n  var last = list[len - 1];\n  var minGap;\n  var maxGap;\n  updateMinMaxGap(); // If ends exceed two bounds, squeeze at most 80%, then take the gap of two bounds.\n\n  minGap < 0 && squeezeGaps(-minGap, 0.8);\n  maxGap < 0 && squeezeGaps(maxGap, 0.8);\n  updateMinMaxGap();\n  takeBoundsGap(minGap, maxGap, 1);\n  takeBoundsGap(maxGap, minGap, -1); // Handle bailout when there is not enough space.\n\n  updateMinMaxGap();\n\n  if (minGap < 0) {\n    squeezeWhenBailout(-minGap);\n  }\n\n  if (maxGap < 0) {\n    squeezeWhenBailout(maxGap);\n  }\n\n  function updateMinMaxGap() {\n    minGap = first.rect[xyDim] - minBound;\n    maxGap = maxBound - last.rect[xyDim] - last.rect[sizeDim];\n  }\n\n  function takeBoundsGap(gapThisBound, gapOtherBound, moveDir) {\n    if (gapThisBound < 0) {\n      // Move from other gap if can.\n      var moveFromMaxGap = Math.min(gapOtherBound, -gapThisBound);\n\n      if (moveFromMaxGap > 0) {\n        shiftList(moveFromMaxGap * moveDir, 0, len);\n        var remained = moveFromMaxGap + gapThisBound;\n\n        if (remained < 0) {\n          squeezeGaps(-remained * moveDir, 1);\n        }\n      } else {\n        squeezeGaps(-gapThisBound * moveDir, 1);\n      }\n    }\n  }\n\n  function shiftList(delta, start, end) {\n    if (delta !== 0) {\n      adjusted = true;\n    }\n\n    for (var i = start; i < end; i++) {\n      var item = list[i];\n      var rect = item.rect;\n      rect[xyDim] += delta;\n      item.label[xyDim] += delta;\n    }\n  } // Squeeze gaps if the labels exceed margin.\n\n\n  function squeezeGaps(delta, maxSqeezePercent) {\n    var gaps = [];\n    var totalGaps = 0;\n\n    for (var i = 1; i < len; i++) {\n      var prevItemRect = list[i - 1].rect;\n      var gap = Math.max(list[i].rect[xyDim] - prevItemRect[xyDim] - prevItemRect[sizeDim], 0);\n      gaps.push(gap);\n      totalGaps += gap;\n    }\n\n    if (!totalGaps) {\n      return;\n    }\n\n    var squeezePercent = Math.min(Math.abs(delta) / totalGaps, maxSqeezePercent);\n\n    if (delta > 0) {\n      for (var i = 0; i < len - 1; i++) {\n        // Distribute the shift delta to all gaps.\n        var movement = gaps[i] * squeezePercent; // Forward\n\n        shiftList(movement, 0, i + 1);\n      }\n    } else {\n      // Backward\n      for (var i = len - 1; i > 0; i--) {\n        // Distribute the shift delta to all gaps.\n        var movement = gaps[i - 1] * squeezePercent;\n        shiftList(-movement, i, len);\n      }\n    }\n  }\n  /**\n   * Squeeze to allow overlap if there is no more space available.\n   * Let other overlapping strategy like hideOverlap do the job instead of keep exceeding the bounds.\n   */\n\n\n  function squeezeWhenBailout(delta) {\n    var dir = delta < 0 ? -1 : 1;\n    delta = Math.abs(delta);\n    var moveForEachLabel = Math.ceil(delta / (len - 1));\n\n    for (var i = 0; i < len - 1; i++) {\n      if (dir > 0) {\n        // Forward\n        shiftList(moveForEachLabel, 0, i + 1);\n      } else {\n        // Backward\n        shiftList(-moveForEachLabel, len - i - 1, len);\n      }\n\n      delta -= moveForEachLabel;\n\n      if (delta <= 0) {\n        return;\n      }\n    }\n  }\n\n  return adjusted;\n}\n/**\n * Adjust labels on x direction to avoid overlap.\n */\n\n\nexport function shiftLayoutOnX(list, leftBound, rightBound, // If average the shifts on all labels and add them to 0\n// TODO: Not sure if should enable it.\n// Pros: The angle of lines will distribute more equally\n// Cons: In some layout. It may not what user wanted. like in pie. the label of last sector is usually changed unexpectedly.\nbalanceShift) {\n  return shiftLayout(list, 'x', 'width', leftBound, rightBound, balanceShift);\n}\n/**\n * Adjust labels on y direction to avoid overlap.\n */\n\nexport function shiftLayoutOnY(list, topBound, bottomBound, // If average the shifts on all labels and add them to 0\nbalanceShift) {\n  return shiftLayout(list, 'y', 'height', topBound, bottomBound, balanceShift);\n}\nexport function hideOverlap(labelList) {\n  var displayedLabels = []; // TODO, render overflow visible first, put in the displayedLabels.\n\n  labelList.sort(function (a, b) {\n    return b.priority - a.priority;\n  });\n  var globalRect = new BoundingRect(0, 0, 0, 0);\n\n  function hideEl(el) {\n    if (!el.ignore) {\n      // Show on emphasis.\n      var emphasisState = el.ensureState('emphasis');\n\n      if (emphasisState.ignore == null) {\n        emphasisState.ignore = false;\n      }\n    }\n\n    el.ignore = true;\n  }\n\n  for (var i = 0; i < labelList.length; i++) {\n    var labelItem = labelList[i];\n    var isAxisAligned = labelItem.axisAligned;\n    var localRect = labelItem.localRect;\n    var transform = labelItem.transform;\n    var label = labelItem.label;\n    var labelLine = labelItem.labelLine;\n    globalRect.copy(labelItem.rect); // Add a threshold because layout may be aligned precisely.\n\n    globalRect.width -= 0.1;\n    globalRect.height -= 0.1;\n    globalRect.x += 0.05;\n    globalRect.y += 0.05;\n    var obb = labelItem.obb;\n    var overlapped = false;\n\n    for (var j = 0; j < displayedLabels.length; j++) {\n      var existsTextCfg = displayedLabels[j]; // Fast rejection.\n\n      if (!globalRect.intersect(existsTextCfg.rect)) {\n        continue;\n      }\n\n      if (isAxisAligned && existsTextCfg.axisAligned) {\n        // Is overlapped\n        overlapped = true;\n        break;\n      }\n\n      if (!existsTextCfg.obb) {\n        // If self is not axis aligned. But other is.\n        existsTextCfg.obb = new OrientedBoundingRect(existsTextCfg.localRect, existsTextCfg.transform);\n      }\n\n      if (!obb) {\n        // If self is axis aligned. But other is not.\n        obb = new OrientedBoundingRect(localRect, transform);\n      }\n\n      if (obb.intersect(existsTextCfg.obb)) {\n        overlapped = true;\n        break;\n      }\n    } // TODO Callback to determine if this overlap should be handled?\n\n\n    if (overlapped) {\n      hideEl(label);\n      labelLine && hideEl(labelLine);\n    } else {\n      label.attr('ignore', labelItem.defaultAttr.ignore);\n      labelLine && labelLine.attr('ignore', labelItem.defaultAttr.labelGuideIgnore);\n      displayedLabels.push(labelItem);\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieve, defaults, extend, each, isObject, map, isString, isNumber, isFunction } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport Model from '../../model/Model.js';\nimport { isRadianAroundZero, remRadian } from '../../util/number.js';\nimport { createSymbol, normalizeSymbolOffset } from '../../util/symbol.js';\nimport * as matrixUtil from 'zrender/lib/core/matrix.js';\nimport { applyTransform as v2ApplyTransform } from 'zrender/lib/core/vector.js';\nimport { shouldShowAllLabels } from '../../coord/axisHelper.js';\nimport { prepareLayoutList, hideOverlap } from '../../label/labelLayoutHelper.js';\nvar PI = Math.PI;\n/**\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n * for example: (0, 0) ------------> (0, 50)\n *\n * nameDirection or tickDirection or labelDirection is 1 means tick\n * or label is below the standard axis, whereas is -1 means above\n * the standard axis. labelOffset means offset between label and axis,\n * which is useful when 'onZero', where axisLabel is in the grid and\n * label in outside grid.\n *\n * Tips: like always,\n * positive rotation represents anticlockwise, and negative rotation\n * represents clockwise.\n * The direction of position coordinate is the same as the direction\n * of screen coordinate.\n *\n * Do not need to consider axis 'inverse', which is auto processed by\n * axis extent.\n */\n\nvar AxisBuilder =\n/** @class */\nfunction () {\n  function AxisBuilder(axisModel, opt) {\n    this.group = new graphic.Group();\n    this.opt = opt;\n    this.axisModel = axisModel; // Default value\n\n    defaults(opt, {\n      labelOffset: 0,\n      nameDirection: 1,\n      tickDirection: 1,\n      labelDirection: 1,\n      silent: true,\n      handleAutoShown: function () {\n        return true;\n      }\n    }); // FIXME Not use a seperate text group?\n\n    var transformGroup = new graphic.Group({\n      x: opt.position[0],\n      y: opt.position[1],\n      rotation: opt.rotation\n    }); // this.group.add(transformGroup);\n    // this._transformGroup = transformGroup;\n\n    transformGroup.updateTransform();\n    this._transformGroup = transformGroup;\n  }\n\n  AxisBuilder.prototype.hasBuilder = function (name) {\n    return !!builders[name];\n  };\n\n  AxisBuilder.prototype.add = function (name) {\n    builders[name](this.opt, this.axisModel, this.group, this._transformGroup);\n  };\n\n  AxisBuilder.prototype.getGroup = function () {\n    return this.group;\n  };\n\n  AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n    var rotationDiff = remRadian(textRotation - axisRotation);\n    var textAlign;\n    var textVerticalAlign;\n\n    if (isRadianAroundZero(rotationDiff)) {\n      // Label is parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n      textAlign = 'center';\n    } else if (isRadianAroundZero(rotationDiff - PI)) {\n      // Label is inverse parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n      textAlign = 'center';\n    } else {\n      textVerticalAlign = 'middle';\n\n      if (rotationDiff > 0 && rotationDiff < PI) {\n        textAlign = direction > 0 ? 'right' : 'left';\n      } else {\n        textAlign = direction > 0 ? 'left' : 'right';\n      }\n    }\n\n    return {\n      rotation: rotationDiff,\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n  };\n\n  AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n    var eventData = {\n      componentType: axisModel.mainType,\n      componentIndex: axisModel.componentIndex\n    };\n    eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n    return eventData;\n  };\n\n  AxisBuilder.isLabelSilent = function (axisModel) {\n    var tooltipOpt = axisModel.get('tooltip');\n    return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n    || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n  };\n\n  return AxisBuilder;\n}();\n\n;\nvar builders = {\n  axisLine: function (opt, axisModel, group, transformGroup) {\n    var shown = axisModel.get(['axisLine', 'show']);\n\n    if (shown === 'auto' && opt.handleAutoShown) {\n      shown = opt.handleAutoShown('axisLine');\n    }\n\n    if (!shown) {\n      return;\n    }\n\n    var extent = axisModel.axis.getExtent();\n    var matrix = transformGroup.transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n    var inverse = pt1[0] > pt2[0];\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel(['axisLine', 'lineStyle']).getLineStyle());\n    var line = new graphic.Line({\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    });\n    graphic.subPixelOptimizeLine(line.shape, line.style.lineWidth);\n    line.anid = 'line';\n    group.add(line);\n    var arrows = axisModel.get(['axisLine', 'symbol']);\n\n    if (arrows != null) {\n      var arrowSize = axisModel.get(['axisLine', 'symbolSize']);\n\n      if (isString(arrows)) {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n\n      if (isString(arrowSize) || isNumber(arrowSize)) {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n\n      var arrowOffset = normalizeSymbolOffset(axisModel.get(['axisLine', 'symbolOffset']) || 0, arrowSize);\n      var symbolWidth_1 = arrowSize[0];\n      var symbolHeight_1 = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth_1 / 2, -symbolHeight_1 / 2, symbolWidth_1, symbolHeight_1, lineStyle.stroke, true); // Calculate arrow position with offset\n\n          var r = point.r + point.offset;\n          var pt = inverse ? pt2 : pt1;\n          symbol.attr({\n            rotation: point.rotate,\n            x: pt[0] + r * Math.cos(opt.rotation),\n            y: pt[1] - r * Math.sin(opt.rotation),\n            silent: true,\n            z2: 11\n          });\n          group.add(symbol);\n        }\n      });\n    }\n  },\n  axisTickLabel: function (opt, axisModel, group, transformGroup) {\n    var ticksEls = buildAxisMajorTicks(group, transformGroup, axisModel, opt);\n    var labelEls = buildAxisLabel(group, transformGroup, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\n    buildAxisMinorTicks(group, transformGroup, axisModel, opt.tickDirection); // This bit fixes the label overlap issue for the time chart.\n    // See https://github.com/apache/echarts/issues/14266 for more.\n\n    if (axisModel.get(['axisLabel', 'hideOverlap'])) {\n      var labelList = prepareLayoutList(map(labelEls, function (label) {\n        return {\n          label: label,\n          priority: label.z2,\n          defaultAttr: {\n            ignore: label.ignore\n          }\n        };\n      }));\n      hideOverlap(labelList);\n    }\n  },\n  axisName: function (opt, axisModel, group, transformGroup) {\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n\n    if (!name) {\n      return;\n    }\n\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n\n    var axisNameAvailableWidth;\n\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = AxisBuilder.innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt.rotation, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth);\n    var textEl = new graphic.Text({\n      x: pos[0],\n      y: pos[1],\n      rotation: labelLayout.rotation,\n      silent: AxisBuilder.isLabelSilent(axisModel),\n      style: createTextStyle(textStyleModel, {\n        text: name,\n        font: textFont,\n        overflow: 'truncate',\n        width: maxWidth,\n        ellipsis: ellipsis,\n        fill: textStyleModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']),\n        align: textStyleModel.get('align') || labelLayout.textAlign,\n        verticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n      }),\n      z2: 1\n    });\n    graphic.setTooltipConfig({\n      el: textEl,\n      componentModel: axisModel,\n      itemName: name\n    });\n    textEl.__fullText = name; // Id for animation\n\n    textEl.anid = 'name';\n\n    if (axisModel.get('triggerEvent')) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisName';\n      eventData.name = name;\n      getECData(textEl).eventData = eventData;\n    } // FIXME\n\n\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\n\nfunction endTextLayout(rotation, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  } // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n\n\n  var showMinLabel = axisModel.get(['axisLabel', 'showMinLabel']);\n  var showMaxLabel = axisModel.get(['axisLabel', 'showMaxLabel']); // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\n\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\n\nfunction isTwoLabelOverlapped(current, next) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n\n  if (!firstRect || !nextRect) {\n    return;\n  } // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\n\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\n\nfunction createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, anidPrefix) {\n  var tickEls = [];\n  var pt1 = [];\n  var pt2 = [];\n\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = tickEndCoord;\n\n    if (tickTransform) {\n      v2ApplyTransform(pt1, pt1, tickTransform);\n      v2ApplyTransform(pt2, pt2, tickTransform);\n    } // Tick line, Not use group transform to have better line draw\n\n\n    var tickEl = new graphic.Line({\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: tickLineStyle,\n      z2: 2,\n      autoBatch: true,\n      silent: true\n    });\n    graphic.subPixelOptimizeLine(tickEl.shape, tickEl.style.lineWidth);\n    tickEl.anid = anidPrefix + '_' + ticksCoords[i].tickValue;\n    tickEls.push(tickEl);\n  }\n\n  return tickEls;\n}\n\nfunction buildAxisMajorTicks(group, transformGroup, axisModel, opt) {\n  var axis = axisModel.axis;\n  var tickModel = axisModel.getModel('axisTick');\n  var shown = tickModel.get('show');\n\n  if (shown === 'auto' && opt.handleAutoShown) {\n    shown = opt.handleAutoShown('axisTick');\n  }\n\n  if (!shown || axis.scale.isBlank()) {\n    return;\n  }\n\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var ticksEls = createTicks(ticksCoords, transformGroup.transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }), 'ticks');\n\n  for (var i = 0; i < ticksEls.length; i++) {\n    group.add(ticksEls[i]);\n  }\n\n  return ticksEls;\n}\n\nfunction buildAxisMinorTicks(group, transformGroup, axisModel, tickDirection) {\n  var axis = axisModel.axis;\n  var minorTickModel = axisModel.getModel('minorTick');\n\n  if (!minorTickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var minorTicksCoords = axis.getMinorTicksCoords();\n\n  if (!minorTicksCoords.length) {\n    return;\n  }\n\n  var lineStyleModel = minorTickModel.getModel('lineStyle');\n  var tickEndCoord = tickDirection * minorTickModel.get('length');\n  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }));\n\n  for (var i = 0; i < minorTicksCoords.length; i++) {\n    var minorTicksEls = createTicks(minorTicksCoords[i], transformGroup.transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n\n    for (var k = 0; k < minorTicksEls.length; k++) {\n      group.add(minorTicksEls[k]);\n    }\n  }\n}\n\nfunction buildAxisLabel(group, transformGroup, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get(['axisLabel', 'show']));\n\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels(); // Special label rotate.\n\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = AxisBuilder.innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = AxisBuilder.isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = axis.scale.type === 'ordinal' ? axis.scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n\n    if (rawCategoryData && rawCategoryData[tickValue]) {\n      var rawCategoryItem = rawCategoryData[tickValue];\n\n      if (isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\n        itemLabelModel = new Model(rawCategoryItem.textStyle, labelModel, axisModel.ecModel);\n      }\n    }\n\n    var textColor = itemLabelModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']);\n    var tickCoord = axis.dataToCoord(tickValue);\n    var textEl = new graphic.Text({\n      x: tickCoord,\n      y: opt.labelOffset + opt.labelDirection * labelMargin,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10 + (labelItem.level || 0),\n      style: createTextStyle(itemLabelModel, {\n        text: formattedLabel,\n        align: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n        verticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n        fill: isFunction(textColor) ? textColor( // (1) In category axis with data zoom, tick is not the original\n        // index of axis.data. So tick should not be exposed to user\n        // in category axis.\n        // (2) Compatible with previous version, which always use formatted label as\n        // input. But in interval scale the formatted label is like '223,445', which\n        // maked user repalce ','. So we modify it to return original val but remain\n        // it as 'string' to avoid error in replacing.\n        axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n      })\n    });\n    textEl.anid = 'label_' + tickValue; // Pack data for mouse event\n\n    if (triggerEvent) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisLabel';\n      eventData.value = rawLabel;\n      eventData.tickIndex = index;\n\n      if (axis.type === 'category') {\n        eventData.dataIndex = tickValue;\n      }\n\n      getECData(textEl).eventData = eventData;\n    } // FIXME\n\n\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\n\nexport default AxisBuilder;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as axisPointerModelHelper from '../axisPointer/modelHelper.js';\nimport ComponentView from '../../view/Component.js';\nvar axisPointerClazz = {};\n/**\n * Base class of AxisView.\n */\n\nvar AxisView =\n/** @class */\nfunction (_super) {\n  __extends(AxisView, _super);\n\n  function AxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AxisView.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  AxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n\n    _super.prototype.render.apply(this, arguments);\n\n    this._doUpdateAxisPointerClass(axisModel, api, true);\n  };\n  /**\n   * Action handler.\n   */\n\n\n  AxisView.prototype.updateAxisPointer = function (axisModel, ecModel, api, payload) {\n    this._doUpdateAxisPointerClass(axisModel, api, false);\n  };\n  /**\n   * @override\n   */\n\n\n  AxisView.prototype.remove = function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n  };\n  /**\n   * @override\n   */\n\n\n  AxisView.prototype.dispose = function (ecModel, api) {\n    this._disposeAxisPointer(api);\n\n    _super.prototype.dispose.apply(this, arguments);\n  };\n\n  AxisView.prototype._doUpdateAxisPointerClass = function (axisModel, api, forceRender) {\n    var Clazz = AxisView.getAxisPointerClass(this.axisPointerClass);\n\n    if (!Clazz) {\n      return;\n    }\n\n    var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n    axisPointerModel ? (this._axisPointer || (this._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : this._disposeAxisPointer(api);\n  };\n\n  AxisView.prototype._disposeAxisPointer = function (api) {\n    this._axisPointer && this._axisPointer.dispose(api);\n    this._axisPointer = null;\n  };\n\n  AxisView.registerAxisPointerClass = function (type, clazz) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (axisPointerClazz[type]) {\n        throw new Error('axisPointer ' + type + ' exists');\n      }\n    }\n\n    axisPointerClazz[type] = clazz;\n  };\n\n  ;\n\n  AxisView.getAxisPointerClass = function (type) {\n    return type && axisPointerClazz[type];\n  };\n\n  ;\n  AxisView.type = 'axis';\n  return AxisView;\n}(ComponentView);\n\nexport default AxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\n\nvar GridModel =\n/** @class */\nfunction (_super) {\n  __extends(GridModel, _super);\n\n  function GridModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  GridModel.type = 'grid';\n  GridModel.dependencies = ['xAxis', 'yAxis'];\n  GridModel.layoutMode = 'box';\n  GridModel.defaultOption = {\n    show: false,\n    // zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 70,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  };\n  return GridModel;\n}(ComponentModel);\n\nexport default GridModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar AxisModelCommonMixin =\n/** @class */\nfunction () {\n  function AxisModelCommonMixin() {}\n\n  AxisModelCommonMixin.prototype.getNeedCrossZero = function () {\n    var option = this.option;\n    return !option.scale;\n  };\n  /**\n   * Should be implemented by each axis model if necessary.\n   * @return coordinate system model\n   */\n\n\n  AxisModelCommonMixin.prototype.getCoordSysModel = function () {\n    return;\n  };\n\n  return AxisModelCommonMixin;\n}();\n\nexport { AxisModelCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\n\nvar CartesianAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisModel, _super);\n\n  function CartesianAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  CartesianAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n  };\n\n  CartesianAxisModel.type = 'cartesian2dAxis';\n  return CartesianAxisModel;\n}(ComponentModel);\n\nexport { CartesianAxisModel };\nzrUtil.mixin(CartesianAxisModel, AxisModelCommonMixin);\nexport default CartesianAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar defaultOption = {\n  show: true,\n  // zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By default auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#6E7079',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    lineStyle: {\n      color: ['#E0E6F1'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n    }\n  }\n};\nvar categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\nvar valueAxis = zrUtil.merge({\n  boundaryGap: [0, 0],\n  axisLine: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  axisTick: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  splitNumber: 5,\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Lenght of minor tick\n    length: 3,\n    // Line style\n    lineStyle: {// Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: '#F4F7FD',\n      width: 1\n    }\n  }\n}, defaultOption);\nvar timeAxis = zrUtil.merge({\n  splitNumber: 6,\n  axisLabel: {\n    // To eliminate labels that are not nice\n    showMinLabel: false,\n    showMaxLabel: false,\n    rich: {\n      primary: {\n        fontWeight: 'bold'\n      }\n    }\n  },\n  splitLine: {\n    show: false\n  }\n}, valueAxis);\nvar logAxis = zrUtil.defaults({\n  logBase: 10\n}, valueAxis);\nexport default {\n  category: categoryAxis,\n  value: valueAxis,\n  time: timeAxis,\n  log: logAxis\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var AXIS_TYPES = {\n  value: 1,\n  category: 1,\n  time: 1,\n  log: 1\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport axisDefault from './axisDefault.js';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout.js';\nimport OrdinalMeta from '../data/OrdinalMeta.js';\nimport { AXIS_TYPES } from './axisCommonTypes.js';\nimport { each, merge } from 'zrender/lib/core/util.js';\n/**\n * Generate sub axis model class\n * @param axisName 'x' 'y' 'radius' 'angle' 'parallel' ...\n */\n\nexport default function axisModelCreator(registers, axisName, BaseAxisModelClass, extraDefaultOption) {\n  each(AXIS_TYPES, function (v, axisType) {\n    var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\n\n    var AxisModel =\n    /** @class */\n    function (_super) {\n      __extends(AxisModel, _super);\n\n      function AxisModel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = axisName + 'Axis.' + axisType;\n        return _this;\n      }\n\n      AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n        var layoutMode = fetchLayoutMode(this);\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        merge(option, themeModel.get(axisType + 'Axis'));\n        merge(option, this.getDefaultOption());\n        option.type = getAxisType(option);\n\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      };\n\n      AxisModel.prototype.optionUpdated = function () {\n        var thisOption = this.option;\n\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      };\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n\n\n      AxisModel.prototype.getCategories = function (rawData) {\n        var option = this.option; // FIXME\n        // warning if called before all of 'getInitailData' finished.\n\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n\n          return this.__ordinalMeta.categories;\n        }\n      };\n\n      AxisModel.prototype.getOrdinalMeta = function () {\n        return this.__ordinalMeta;\n      };\n\n      AxisModel.type = axisName + 'Axis.' + axisType;\n      AxisModel.defaultOption = defaultOption;\n      return AxisModel;\n    }(BaseAxisModelClass);\n\n    registers.registerComponentModel(AxisModel);\n  });\n  registers.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\n}\n\nfunction getAxisType(option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\n\nvar Cartesian =\n/** @class */\nfunction () {\n  function Cartesian(name) {\n    this.type = 'cartesian';\n    this._dimList = [];\n    this._axes = {};\n    this.name = name || '';\n  }\n\n  Cartesian.prototype.getAxis = function (dim) {\n    return this._axes[dim];\n  };\n\n  Cartesian.prototype.getAxes = function () {\n    return zrUtil.map(this._dimList, function (dim) {\n      return this._axes[dim];\n    }, this);\n  };\n\n  Cartesian.prototype.getAxesByScale = function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  };\n\n  Cartesian.prototype.addAxis = function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n\n    this._dimList.push(dim);\n  };\n\n  return Cartesian;\n}();\n\n;\nexport default Cartesian;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport Cartesian from './Cartesian.js';\nimport { invert } from 'zrender/lib/core/matrix.js';\nimport { applyTransform } from 'zrender/lib/core/vector.js';\nexport var cartesian2DDimensions = ['x', 'y'];\n\nfunction canCalculateAffineTransform(scale) {\n  return scale.type === 'interval' || scale.type === 'time';\n}\n\nvar Cartesian2D =\n/** @class */\nfunction (_super) {\n  __extends(Cartesian2D, _super);\n\n  function Cartesian2D() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'cartesian2d';\n    _this.dimensions = cartesian2DDimensions;\n    return _this;\n  }\n  /**\n   * Calculate an affine transform matrix if two axes are time or value.\n   * It's mainly for accelartion on the large time series data.\n   */\n\n\n  Cartesian2D.prototype.calcAffineTransform = function () {\n    this._transform = this._invTransform = null;\n    var xAxisScale = this.getAxis('x').scale;\n    var yAxisScale = this.getAxis('y').scale;\n\n    if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\n      return;\n    }\n\n    var xScaleExtent = xAxisScale.getExtent();\n    var yScaleExtent = yAxisScale.getExtent();\n    var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\n    var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\n    var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\n    var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\n\n    if (!xScaleSpan || !yScaleSpan) {\n      return;\n    } // Accelerate data to point calculation on the special large time series data.\n\n\n    var scaleX = (end[0] - start[0]) / xScaleSpan;\n    var scaleY = (end[1] - start[1]) / yScaleSpan;\n    var translateX = start[0] - xScaleExtent[0] * scaleX;\n    var translateY = start[1] - yScaleExtent[0] * scaleY;\n    var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\n    this._invTransform = invert([], m);\n  };\n  /**\n   * Base axis will be used on stacking.\n   */\n\n\n  Cartesian2D.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  };\n\n  Cartesian2D.prototype.containPoint = function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  };\n\n  Cartesian2D.prototype.containData = function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  };\n\n  Cartesian2D.prototype.containZone = function (data1, data2) {\n    var zoneDiag1 = this.dataToPoint(data1);\n    var zoneDiag2 = this.dataToPoint(data2);\n    var area = this.getArea();\n    var zone = new BoundingRect(zoneDiag1[0], zoneDiag1[1], zoneDiag2[0] - zoneDiag1[0], zoneDiag2[1] - zoneDiag1[1]);\n    return area.intersect(zone);\n  };\n\n  Cartesian2D.prototype.dataToPoint = function (data, clamp, out) {\n    out = out || [];\n    var xVal = data[0];\n    var yVal = data[1]; // Fast path\n\n    if (this._transform // It's supported that if data is like `[Inifity, 123]`, where only Y pixel calculated.\n    && xVal != null && isFinite(xVal) && yVal != null && isFinite(yVal)) {\n      return applyTransform(out, data, this._transform);\n    }\n\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(xVal, clamp));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(yVal, clamp));\n    return out;\n  };\n\n  Cartesian2D.prototype.clampData = function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  };\n\n  Cartesian2D.prototype.pointToData = function (point, clamp) {\n    var out = [];\n\n    if (this._invTransform) {\n      return applyTransform(out, point, this._invTransform);\n    }\n\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]), clamp);\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]), clamp);\n    return out;\n  };\n\n  Cartesian2D.prototype.getOtherAxis = function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  };\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   */\n\n\n  Cartesian2D.prototype.getArea = function () {\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]);\n    var y = Math.min(yExtent[0], yExtent[1]);\n    var width = Math.max(xExtent[0], xExtent[1]) - x;\n    var height = Math.max(yExtent[0], yExtent[1]) - y;\n    return new BoundingRect(x, y, width, height);\n  };\n\n  return Cartesian2D;\n}(Cartesian);\n\n;\nexport default Cartesian2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport { makeInner } from '../util/model.js';\nimport { makeLabelFormatter, getOptionCategoryInterval, shouldShowAllLabels } from './axisHelper.js';\nvar inner = makeInner();\nexport function createAxisLabels(axis) {\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryLabels(axis) : makeRealNumberLabels(axis);\n}\n/**\n * @param {module:echats/coord/Axis} axis\n * @param {module:echarts/model/Model} tickModel For example, can be axisTick, splitLine, splitArea.\n * @return {Object} {\n *     ticks: Array.<number>\n *     tickCategoryInterval: number\n * }\n */\n\nexport function createAxisTicks(axis, tickModel) {\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryTicks(axis, tickModel) : {\n    ticks: zrUtil.map(axis.scale.getTicks(), function (tick) {\n      return tick.value;\n    })\n  };\n}\n\nfunction makeCategoryLabels(axis) {\n  var labelModel = axis.getLabelModel();\n  var result = makeCategoryLabelsActually(axis, labelModel);\n  return !labelModel.get('show') || axis.scale.isBlank() ? {\n    labels: [],\n    labelCategoryInterval: result.labelCategoryInterval\n  } : result;\n}\n\nfunction makeCategoryLabelsActually(axis, labelModel) {\n  var labelsCache = getListCache(axis, 'labels');\n  var optionLabelInterval = getOptionCategoryInterval(labelModel);\n  var result = listCacheGet(labelsCache, optionLabelInterval);\n\n  if (result) {\n    return result;\n  }\n\n  var labels;\n  var numericLabelInterval;\n\n  if (zrUtil.isFunction(optionLabelInterval)) {\n    labels = makeLabelsByCustomizedCategoryInterval(axis, optionLabelInterval);\n  } else {\n    numericLabelInterval = optionLabelInterval === 'auto' ? makeAutoCategoryInterval(axis) : optionLabelInterval;\n    labels = makeLabelsByNumericCategoryInterval(axis, numericLabelInterval);\n  } // Cache to avoid calling interval function repeatly.\n\n\n  return listCacheSet(labelsCache, optionLabelInterval, {\n    labels: labels,\n    labelCategoryInterval: numericLabelInterval\n  });\n}\n\nfunction makeCategoryTicks(axis, tickModel) {\n  var ticksCache = getListCache(axis, 'ticks');\n  var optionTickInterval = getOptionCategoryInterval(tickModel);\n  var result = listCacheGet(ticksCache, optionTickInterval);\n\n  if (result) {\n    return result;\n  }\n\n  var ticks;\n  var tickCategoryInterval; // Optimize for the case that large category data and no label displayed,\n  // we should not return all ticks.\n\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    ticks = [];\n  }\n\n  if (zrUtil.isFunction(optionTickInterval)) {\n    ticks = makeLabelsByCustomizedCategoryInterval(axis, optionTickInterval, true);\n  } // Always use label interval by default despite label show. Consider this\n  // scenario, Use multiple grid with the xAxis sync, and only one xAxis shows\n  // labels. `splitLine` and `axisTick` should be consistent in this case.\n  else if (optionTickInterval === 'auto') {\n      var labelsResult = makeCategoryLabelsActually(axis, axis.getLabelModel());\n      tickCategoryInterval = labelsResult.labelCategoryInterval;\n      ticks = zrUtil.map(labelsResult.labels, function (labelItem) {\n        return labelItem.tickValue;\n      });\n    } else {\n      tickCategoryInterval = optionTickInterval;\n      ticks = makeLabelsByNumericCategoryInterval(axis, tickCategoryInterval, true);\n    } // Cache to avoid calling interval function repeatly.\n\n\n  return listCacheSet(ticksCache, optionTickInterval, {\n    ticks: ticks,\n    tickCategoryInterval: tickCategoryInterval\n  });\n}\n\nfunction makeRealNumberLabels(axis) {\n  var ticks = axis.scale.getTicks();\n  var labelFormatter = makeLabelFormatter(axis);\n  return {\n    labels: zrUtil.map(ticks, function (tick, idx) {\n      return {\n        level: tick.level,\n        formattedLabel: labelFormatter(tick, idx),\n        rawLabel: axis.scale.getLabel(tick),\n        tickValue: tick.value\n      };\n    })\n  };\n}\n\nfunction getListCache(axis, prop) {\n  // Because key can be funciton, and cache size always be small, we use array cache.\n  return inner(axis)[prop] || (inner(axis)[prop] = []);\n}\n\nfunction listCacheGet(cache, key) {\n  for (var i = 0; i < cache.length; i++) {\n    if (cache[i].key === key) {\n      return cache[i].value;\n    }\n  }\n}\n\nfunction listCacheSet(cache, key, value) {\n  cache.push({\n    key: key,\n    value: value\n  });\n  return value;\n}\n\nfunction makeAutoCategoryInterval(axis) {\n  var result = inner(axis).autoInterval;\n  return result != null ? result : inner(axis).autoInterval = axis.calculateCategoryInterval();\n}\n/**\n * Calculate interval for category axis ticks and labels.\n * To get precise result, at least one of `getRotate` and `isHorizontal`\n * should be implemented in axis.\n */\n\n\nexport function calculateCategoryInterval(axis) {\n  var params = fetchAutoCategoryIntervalCalculationParams(axis);\n  var labelFormatter = makeLabelFormatter(axis);\n  var rotation = (params.axisRotate - params.labelRotate) / 180 * Math.PI;\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent(); // Providing this method is for optimization:\n  // avoid generating a long array by `getTicks`\n  // in large category data case.\n\n  var tickCount = ordinalScale.count();\n\n  if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n    return 0;\n  }\n\n  var step = 1; // Simple optimization. Empirical value: tick count should less than 40.\n\n  if (tickCount > 40) {\n    step = Math.max(1, Math.floor(tickCount / 40));\n  }\n\n  var tickValue = ordinalExtent[0];\n  var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n  var unitW = Math.abs(unitSpan * Math.cos(rotation));\n  var unitH = Math.abs(unitSpan * Math.sin(rotation));\n  var maxW = 0;\n  var maxH = 0; // Caution: Performance sensitive for large category data.\n  // Consider dataZoom, we should make appropriate step to avoid O(n) loop.\n\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    var width = 0;\n    var height = 0; // Not precise, do not consider align and vertical align\n    // and each distance from axis line yet.\n\n    var rect = textContain.getBoundingRect(labelFormatter({\n      value: tickValue\n    }), params.font, 'center', 'top'); // Magic number\n\n    width = rect.width * 1.3;\n    height = rect.height * 1.3; // Min size, void long loop.\n\n    maxW = Math.max(maxW, width, 7);\n    maxH = Math.max(maxH, height, 7);\n  }\n\n  var dw = maxW / unitW;\n  var dh = maxH / unitH; // 0/0 is NaN, 1/0 is Infinity.\n\n  isNaN(dw) && (dw = Infinity);\n  isNaN(dh) && (dh = Infinity);\n  var interval = Math.max(0, Math.floor(Math.min(dw, dh)));\n  var cache = inner(axis.model);\n  var axisExtent = axis.getExtent();\n  var lastAutoInterval = cache.lastAutoInterval;\n  var lastTickCount = cache.lastTickCount; // Use cache to keep interval stable while moving zoom window,\n  // otherwise the calculated interval might jitter when the zoom\n  // window size is close to the interval-changing size.\n  // For example, if all of the axis labels are `a, b, c, d, e, f, g`.\n  // The jitter will cause that sometimes the displayed labels are\n  // `a, d, g` (interval: 2) sometimes `a, c, e`(interval: 1).\n\n  if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1 // Always choose the bigger one, otherwise the critical\n  // point is not the same when zooming in or zooming out.\n  && lastAutoInterval > interval // If the axis change is caused by chart resize, the cache should not\n  // be used. Otherwise some hiden labels might not be shown again.\n  && cache.axisExtent0 === axisExtent[0] && cache.axisExtent1 === axisExtent[1]) {\n    interval = lastAutoInterval;\n  } // Only update cache if cache not used, otherwise the\n  // changing of interval is too insensitive.\n  else {\n      cache.lastTickCount = tickCount;\n      cache.lastAutoInterval = interval;\n      cache.axisExtent0 = axisExtent[0];\n      cache.axisExtent1 = axisExtent[1];\n    }\n\n  return interval;\n}\n\nfunction fetchAutoCategoryIntervalCalculationParams(axis) {\n  var labelModel = axis.getLabelModel();\n  return {\n    axisRotate: axis.getRotate ? axis.getRotate() : axis.isHorizontal && !axis.isHorizontal() ? 90 : 0,\n    labelRotate: labelModel.get('rotate') || 0,\n    font: labelModel.getFont()\n  };\n}\n\nfunction makeLabelsByNumericCategoryInterval(axis, categoryInterval, onlyTick) {\n  var labelFormatter = makeLabelFormatter(axis);\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent();\n  var labelModel = axis.getLabelModel();\n  var result = []; // TODO: axisType: ordinalTime, pick the tick from each month/day/year/...\n\n  var step = Math.max((categoryInterval || 0) + 1, 1);\n  var startTick = ordinalExtent[0];\n  var tickCount = ordinalScale.count(); // Calculate start tick based on zero if possible to keep label consistent\n  // while zooming and moving while interval > 0. Otherwise the selection\n  // of displayable ticks and symbols probably keep changing.\n  // 3 is empirical value.\n\n  if (startTick !== 0 && step > 1 && tickCount / step > 2) {\n    startTick = Math.round(Math.ceil(startTick / step) * step);\n  } // (1) Only add min max label here but leave overlap checking\n  // to render stage, which also ensure the returned list\n  // suitable for splitLine and splitArea rendering.\n  // (2) Scales except category always contain min max label so\n  // do not need to perform this process.\n\n\n  var showAllLabel = shouldShowAllLabels(axis);\n  var includeMinLabel = labelModel.get('showMinLabel') || showAllLabel;\n  var includeMaxLabel = labelModel.get('showMaxLabel') || showAllLabel;\n\n  if (includeMinLabel && startTick !== ordinalExtent[0]) {\n    addItem(ordinalExtent[0]);\n  } // Optimize: avoid generating large array by `ordinalScale.getTicks()`.\n\n\n  var tickValue = startTick;\n\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    addItem(tickValue);\n  }\n\n  if (includeMaxLabel && tickValue - step !== ordinalExtent[1]) {\n    addItem(ordinalExtent[1]);\n  }\n\n  function addItem(tickValue) {\n    var tickObj = {\n      value: tickValue\n    };\n    result.push(onlyTick ? tickValue : {\n      formattedLabel: labelFormatter(tickObj),\n      rawLabel: ordinalScale.getLabel(tickObj),\n      tickValue: tickValue\n    });\n  }\n\n  return result;\n}\n\nfunction makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) {\n  var ordinalScale = axis.scale;\n  var labelFormatter = makeLabelFormatter(axis);\n  var result = [];\n  zrUtil.each(ordinalScale.getTicks(), function (tick) {\n    var rawLabel = ordinalScale.getLabel(tick);\n    var tickValue = tick.value;\n\n    if (categoryInterval(tick.value, rawLabel)) {\n      result.push(onlyTick ? tickValue : {\n        formattedLabel: labelFormatter(tick),\n        rawLabel: rawLabel,\n        tickValue: tickValue\n      });\n    }\n  });\n  return result;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, map } from 'zrender/lib/core/util.js';\nimport { linearMap, getPixelPrecision, round } from '../util/number.js';\nimport { createAxisTicks, createAxisLabels, calculateCategoryInterval } from './axisTickLabelBuilder.js';\nvar NORMALIZED_EXTENT = [0, 1];\n/**\n * Base class of Axis.\n */\n\nvar Axis =\n/** @class */\nfunction () {\n  function Axis(dim, scale, extent) {\n    this.onBand = false;\n    this.inverse = false;\n    this.dim = dim;\n    this.scale = scale;\n    this._extent = extent || [0, 0];\n  }\n  /**\n   * If axis extent contain given coord\n   */\n\n\n  Axis.prototype.contain = function (coord) {\n    var extent = this._extent;\n    var min = Math.min(extent[0], extent[1]);\n    var max = Math.max(extent[0], extent[1]);\n    return coord >= min && coord <= max;\n  };\n  /**\n   * If axis extent contain given data\n   */\n\n\n  Axis.prototype.containData = function (data) {\n    return this.scale.contain(data);\n  };\n  /**\n   * Get coord extent.\n   */\n\n\n  Axis.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  /**\n   * Get precision used for formatting\n   */\n\n\n  Axis.prototype.getPixelPrecision = function (dataExtent) {\n    return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\n  };\n  /**\n   * Set coord extent\n   */\n\n\n  Axis.prototype.setExtent = function (start, end) {\n    var extent = this._extent;\n    extent[0] = start;\n    extent[1] = end;\n  };\n  /**\n   * Convert data to coord. Data is the rank if it has an ordinal scale\n   */\n\n\n  Axis.prototype.dataToCoord = function (data, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    data = scale.normalize(data);\n\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n\n    return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\n  };\n  /**\n   * Convert coord to data. Data is the rank if it has an ordinal scale\n   */\n\n\n  Axis.prototype.coordToData = function (coord, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n\n    var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\n    return this.scale.scale(t);\n  };\n  /**\n   * Convert pixel point to data in axis\n   */\n\n\n  Axis.prototype.pointToData = function (point, clamp) {\n    // Should be implemented in derived class if necessary.\n    return;\n  };\n  /**\n   * Different from `zrUtil.map(axis.getTicks(), axis.dataToCoord, axis)`,\n   * `axis.getTicksCoords` considers `onBand`, which is used by\n   * `boundaryGap:true` of category axis and splitLine and splitArea.\n   * @param opt.tickModel default: axis.model.getModel('axisTick')\n   * @param opt.clamp If `true`, the first and the last\n   *        tick must be at the axis end points. Otherwise, clip ticks\n   *        that outside the axis extent.\n   */\n\n\n  Axis.prototype.getTicksCoords = function (opt) {\n    opt = opt || {};\n    var tickModel = opt.tickModel || this.getTickModel();\n    var result = createAxisTicks(this, tickModel);\n    var ticks = result.ticks;\n    var ticksCoords = map(ticks, function (tickVal) {\n      return {\n        coord: this.dataToCoord(this.scale.type === 'ordinal' ? this.scale.getRawOrdinalNumber(tickVal) : tickVal),\n        tickValue: tickVal\n      };\n    }, this);\n    var alignWithLabel = tickModel.get('alignWithLabel');\n    fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\n    return ticksCoords;\n  };\n\n  Axis.prototype.getMinorTicksCoords = function () {\n    if (this.scale.type === 'ordinal') {\n      // Category axis doesn't support minor ticks\n      return [];\n    }\n\n    var minorTickModel = this.model.getModel('minorTick');\n    var splitNumber = minorTickModel.get('splitNumber'); // Protection.\n\n    if (!(splitNumber > 0 && splitNumber < 100)) {\n      splitNumber = 5;\n    }\n\n    var minorTicks = this.scale.getMinorTicks(splitNumber);\n    var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\n      return map(minorTicksGroup, function (minorTick) {\n        return {\n          coord: this.dataToCoord(minorTick),\n          tickValue: minorTick\n        };\n      }, this);\n    }, this);\n    return minorTicksCoords;\n  };\n\n  Axis.prototype.getViewLabels = function () {\n    return createAxisLabels(this).labels;\n  };\n\n  Axis.prototype.getLabelModel = function () {\n    return this.model.getModel('axisLabel');\n  };\n  /**\n   * Notice here we only get the default tick model. For splitLine\n   * or splitArea, we should pass the splitLineModel or splitAreaModel\n   * manually when calling `getTicksCoords`.\n   * In GL, this method may be overrided to:\n   * `axisModel.getModel('axisTick', grid3DModel.getModel('axisTick'));`\n   */\n\n\n  Axis.prototype.getTickModel = function () {\n    return this.model.getModel('axisTick');\n  };\n  /**\n   * Get width of band\n   */\n\n\n  Axis.prototype.getBandWidth = function () {\n    var axisExtent = this._extent;\n    var dataExtent = this.scale.getExtent();\n    var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0); // Fix #2728, avoid NaN when only one data.\n\n    len === 0 && (len = 1);\n    var size = Math.abs(axisExtent[1] - axisExtent[0]);\n    return Math.abs(size) / len;\n  };\n  /**\n   * Only be called in category axis.\n   * Can be overrided, consider other axes like in 3D.\n   * @return Auto interval for cateogry axis tick and label\n   */\n\n\n  Axis.prototype.calculateCategoryInterval = function () {\n    return calculateCategoryInterval(this);\n  };\n\n  return Axis;\n}();\n\nfunction fixExtentWithBands(extent, nTick) {\n  var size = extent[1] - extent[0];\n  var len = nTick;\n  var margin = size / len / 2;\n  extent[0] += margin;\n  extent[1] -= margin;\n} // If axis has labels [1, 2, 3, 4]. Bands on the axis are\n// |---1---|---2---|---3---|---4---|.\n// So the displayed ticks and splitLine/splitArea should between\n// each data item, otherwise cause misleading (e.g., split tow bars\n// of a single data item when there are two bar series).\n// Also consider if tickCategoryInterval > 0 and onBand, ticks and\n// splitLine/spliteArea should layout appropriately corresponding\n// to displayed labels. (So we should not use `getBandWidth` in this\n// case).\n\n\nfunction fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\n  var ticksLen = ticksCoords.length;\n\n  if (!axis.onBand || alignWithLabel || !ticksLen) {\n    return;\n  }\n\n  var axisExtent = axis.getExtent();\n  var last;\n  var diffSize;\n\n  if (ticksLen === 1) {\n    ticksCoords[0].coord = axisExtent[0];\n    last = ticksCoords[1] = {\n      coord: axisExtent[0]\n    };\n  } else {\n    var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\n    var shift_1 = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\n    each(ticksCoords, function (ticksItem) {\n      ticksItem.coord -= shift_1 / 2;\n    });\n    var dataExtent = axis.scale.getExtent();\n    diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\n    last = {\n      coord: ticksCoords[ticksLen - 1].coord + shift_1 * diffSize\n    };\n    ticksCoords.push(last);\n  }\n\n  var inverse = axisExtent[0] > axisExtent[1]; // Handling clamp.\n\n  if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\n    clamp ? ticksCoords[0].coord = axisExtent[0] : ticksCoords.shift();\n  }\n\n  if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\n    ticksCoords.unshift({\n      coord: axisExtent[0]\n    });\n  }\n\n  if (littleThan(axisExtent[1], last.coord)) {\n    clamp ? last.coord = axisExtent[1] : ticksCoords.pop();\n  }\n\n  if (clamp && littleThan(last.coord, axisExtent[1])) {\n    ticksCoords.push({\n      coord: axisExtent[1]\n    });\n  }\n\n  function littleThan(a, b) {\n    // Avoid rounding error cause calculated tick coord different with extent.\n    // It may cause an extra unecessary tick added.\n    a = round(a);\n    b = round(b);\n    return inverse ? a > b : a < b;\n  }\n}\n\nexport default Axis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\n\nvar Axis2D =\n/** @class */\nfunction (_super) {\n  __extends(Axis2D, _super);\n\n  function Axis2D(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    /**\n     * Index of axis, can be used as key\n     * Injected outside.\n     */\n\n\n    _this.index = 0;\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n\n  Axis2D.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n\n\n  Axis2D.prototype.getGlobalExtent = function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  };\n\n  Axis2D.prototype.pointToData = function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  };\n  /**\n   * Set ordinalSortInfo\n   * @param info new OrdinalSortInfo\n   */\n\n\n  Axis2D.prototype.setCategorySortInfo = function (info) {\n    if (this.type !== 'category') {\n      return false;\n    }\n\n    this.model.option.categorySortInfo = info;\n    this.scale.setSortInfo(info);\n  };\n\n  return Axis2D;\n}(Axis);\n\nexport default Axis2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getPrecisionSafe, round } from '../util/number.js';\nimport IntervalScale from '../scale/Interval.js';\nimport { getScaleExtent } from './axisHelper.js';\nimport { warn } from '../util/log.js';\nimport { increaseInterval, isValueNice } from '../scale/helper.js';\nvar mathLog = Math.log;\nexport function alignScaleTicks(scale, axisModel, alignToScale) {\n  var intervalScaleProto = IntervalScale.prototype; // NOTE: There is a precondition for log scale  here:\n  // In log scale we store _interval and _extent of exponent value.\n  // So if we use the method of InternalScale to set/get these data.\n  // It process the exponent value, which is linear and what we want here.\n\n  var alignToTicks = intervalScaleProto.getTicks.call(alignToScale);\n  var alignToNicedTicks = intervalScaleProto.getTicks.call(alignToScale, true);\n  var alignToSplitNumber = alignToTicks.length - 1;\n  var alignToInterval = intervalScaleProto.getInterval.call(alignToScale);\n  var scaleExtent = getScaleExtent(scale, axisModel);\n  var rawExtent = scaleExtent.extent;\n  var isMinFixed = scaleExtent.fixMin;\n  var isMaxFixed = scaleExtent.fixMax;\n\n  if (scale.type === 'log') {\n    var logBase = mathLog(scale.base);\n    rawExtent = [mathLog(rawExtent[0]) / logBase, mathLog(rawExtent[1]) / logBase];\n  }\n\n  scale.setExtent(rawExtent[0], rawExtent[1]);\n  scale.calcNiceExtent({\n    splitNumber: alignToSplitNumber,\n    fixMin: isMinFixed,\n    fixMax: isMaxFixed\n  });\n  var extent = intervalScaleProto.getExtent.call(scale); // Need to update the rawExtent.\n  // Because value in rawExtent may be not parsed. e.g. 'dataMin', 'dataMax'\n\n  if (isMinFixed) {\n    rawExtent[0] = extent[0];\n  }\n\n  if (isMaxFixed) {\n    rawExtent[1] = extent[1];\n  }\n\n  var interval = intervalScaleProto.getInterval.call(scale);\n  var min = rawExtent[0];\n  var max = rawExtent[1];\n\n  if (isMinFixed && isMaxFixed) {\n    // User set min, max, divide to get new interval\n    interval = (max - min) / alignToSplitNumber;\n  } else if (isMinFixed) {\n    max = rawExtent[0] + interval * alignToSplitNumber; // User set min, expand extent on the other side\n\n    while (max < rawExtent[1] && isFinite(max) && isFinite(rawExtent[1])) {\n      interval = increaseInterval(interval);\n      max = rawExtent[0] + interval * alignToSplitNumber;\n    }\n  } else if (isMaxFixed) {\n    // User set max, expand extent on the other side\n    min = rawExtent[1] - interval * alignToSplitNumber;\n\n    while (min > rawExtent[0] && isFinite(min) && isFinite(rawExtent[0])) {\n      interval = increaseInterval(interval);\n      min = rawExtent[1] - interval * alignToSplitNumber;\n    }\n  } else {\n    var nicedSplitNumber = scale.getTicks().length - 1;\n\n    if (nicedSplitNumber > alignToSplitNumber) {\n      interval = increaseInterval(interval);\n    }\n\n    var range = interval * alignToSplitNumber;\n    max = Math.ceil(rawExtent[1] / interval) * interval;\n    min = round(max - range); // Not change the result that crossing zero.\n\n    if (min < 0 && rawExtent[0] >= 0) {\n      min = 0;\n      max = round(range);\n    } else if (max > 0 && rawExtent[1] <= 0) {\n      max = 0;\n      min = -round(range);\n    }\n  } // Adjust min, max based on the extent of alignTo. When min or max is set in alignTo scale\n\n\n  var t0 = (alignToTicks[0].value - alignToNicedTicks[0].value) / alignToInterval;\n  var t1 = (alignToTicks[alignToSplitNumber].value - alignToNicedTicks[alignToSplitNumber].value) / alignToInterval; // NOTE: Must in setExtent -> setInterval -> setNiceExtent order.\n\n  intervalScaleProto.setExtent.call(scale, min + interval * t0, max + interval * t1);\n  intervalScaleProto.setInterval.call(scale, interval);\n\n  if (t0 || t1) {\n    intervalScaleProto.setNiceExtent.call(scale, min + interval, max - interval);\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    var ticks = intervalScaleProto.getTicks.call(scale);\n\n    if (ticks[1] && (!isValueNice(interval) || getPrecisionSafe(ticks[1].value) > getPrecisionSafe(interval))) {\n      warn( // eslint-disable-next-line\n      \"The ticks may be not readable when set min: \" + axisModel.get('min') + \", max: \" + axisModel.get('max') + \" and alignTicks: true\");\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\nimport { isObject, each, indexOf, retrieve3, keys } from 'zrender/lib/core/util.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport { createScaleByModel, ifAxisCrossZero, niceScaleExtent, estimateLabelUnionRect, getDataDimensionsOnAxis } from '../../coord/axisHelper.js';\nimport Cartesian2D, { cartesian2DDimensions } from './Cartesian2D.js';\nimport Axis2D from './Axis2D.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nimport { isCartesian2DSeries, findAxisModels } from './cartesianAxisHelper.js';\nimport { isIntervalOrLogScale } from '../../scale/helper.js';\nimport { alignScaleTicks } from '../axisAlignTicks.js';\n\nvar Grid =\n/** @class */\nfunction () {\n  function Grid(gridModel, ecModel, api) {\n    // FIXME:TS where used (different from registered type 'cartesian2d')?\n    this.type = 'grid';\n    this._coordsMap = {};\n    this._coordsList = [];\n    this._axesMap = {};\n    this._axesList = [];\n    this.axisPointerEnabled = true;\n    this.dimensions = cartesian2DDimensions;\n\n    this._initCartesian(gridModel, ecModel, api);\n\n    this.model = gridModel;\n  }\n\n  Grid.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Grid.prototype.update = function (ecModel, api) {\n    var axesMap = this._axesMap;\n\n    this._updateScale(ecModel, this.model);\n\n    function updateAxisTicks(axes) {\n      var alignTo; // Axis is added in order of axisIndex.\n\n      var axesIndices = keys(axes);\n      var len = axesIndices.length;\n\n      if (!len) {\n        return;\n      }\n\n      var axisNeedsAlign = []; // Process once and calculate the ticks for those don't use alignTicks.\n\n      for (var i = len - 1; i >= 0; i--) {\n        var idx = +axesIndices[i]; // Convert to number.\n\n        var axis = axes[idx];\n        var model = axis.model;\n        var scale = axis.scale;\n\n        if ( // Only value and log axis without interval support alignTicks.\n        isIntervalOrLogScale(scale) && model.get('alignTicks') && model.get('interval') == null) {\n          axisNeedsAlign.push(axis);\n        } else {\n          niceScaleExtent(scale, model);\n\n          if (isIntervalOrLogScale(scale)) {\n            // Can only align to interval or log axis.\n            alignTo = axis;\n          }\n        }\n      }\n\n      ; // All axes has set alignTicks. Pick the first one.\n      // PENDING. Should we find the axis that both set interval, min, max and align to this one?\n\n      if (axisNeedsAlign.length) {\n        if (!alignTo) {\n          alignTo = axisNeedsAlign.pop();\n          niceScaleExtent(alignTo.scale, alignTo.model);\n        }\n\n        each(axisNeedsAlign, function (axis) {\n          alignScaleTicks(axis.scale, axis.model, alignTo.scale);\n        });\n      }\n    }\n\n    updateAxisTicks(axesMap.x);\n    updateAxisTicks(axesMap.y); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n    var onZeroRecords = {};\n    each(axesMap.x, function (xAxis) {\n      fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n    });\n    each(axesMap.y, function (yAxis) {\n      fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n    }); // Resize again if containLabel is enabled\n    // FIXME It may cause getting wrong grid size in data processing stage\n\n    this.resize(this.model, api);\n  };\n  /**\n   * Resize the grid\n   */\n\n\n  Grid.prototype.resize = function (gridModel, api, ignoreContainLabel) {\n    var boxLayoutParams = gridModel.getBoxLayoutParams();\n    var isContainLabel = !ignoreContainLabel && gridModel.get('containLabel');\n    var gridRect = getLayoutRect(boxLayoutParams, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    this._rect = gridRect;\n    var axesList = this._axesList;\n    adjustAxes(); // Minus label size\n\n    if (isContainLabel) {\n      each(axesList, function (axis) {\n        if (!axis.model.get(['axisLabel', 'inside'])) {\n          var labelUnionRect = estimateLabelUnionRect(axis);\n\n          if (labelUnionRect) {\n            var dim = axis.isHorizontal() ? 'height' : 'width';\n            var margin = axis.model.get(['axisLabel', 'margin']);\n            gridRect[dim] -= labelUnionRect[dim] + margin;\n\n            if (axis.position === 'top') {\n              gridRect.y += labelUnionRect.height + margin;\n            } else if (axis.position === 'left') {\n              gridRect.x += labelUnionRect.width + margin;\n            }\n          }\n        }\n      });\n      adjustAxes();\n    }\n\n    each(this._coordsList, function (coord) {\n      // Calculate affine matrix to accelerate the data to point transform.\n      // If all the axes scales are time or value.\n      coord.calcAffineTransform();\n    });\n\n    function adjustAxes() {\n      each(axesList, function (axis) {\n        var isHorizontal = axis.isHorizontal();\n        var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n        var idx = axis.inverse ? 1 : 0;\n        axis.setExtent(extent[idx], extent[1 - idx]);\n        updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n      });\n    }\n  };\n\n  Grid.prototype.getAxis = function (dim, axisIndex) {\n    var axesMapOnDim = this._axesMap[dim];\n\n    if (axesMapOnDim != null) {\n      return axesMapOnDim[axisIndex || 0];\n    }\n  };\n\n  Grid.prototype.getAxes = function () {\n    return this._axesList.slice();\n  };\n\n  Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\n    if (xAxisIndex != null && yAxisIndex != null) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      return this._coordsMap[key];\n    }\n\n    if (isObject(xAxisIndex)) {\n      yAxisIndex = xAxisIndex.yAxisIndex;\n      xAxisIndex = xAxisIndex.xAxisIndex;\n    }\n\n    for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n      if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n        return coordList[i];\n      }\n    }\n  };\n\n  Grid.prototype.getCartesians = function () {\n    return this._coordsList.slice();\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.convertToPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n\n    return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n\n    return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n  };\n\n  Grid.prototype._findConvertTarget = function (finder) {\n    var seriesModel = finder.seriesModel;\n    var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    var gridModel = finder.gridModel;\n    var coordsList = this._coordsList;\n    var cartesian;\n    var axis;\n\n    if (seriesModel) {\n      cartesian = seriesModel.coordinateSystem;\n      indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n    } else if (xAxisModel && yAxisModel) {\n      cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    } else if (xAxisModel) {\n      axis = this.getAxis('x', xAxisModel.componentIndex);\n    } else if (yAxisModel) {\n      axis = this.getAxis('y', yAxisModel.componentIndex);\n    } // Lowest priority.\n    else if (gridModel) {\n        var grid = gridModel.coordinateSystem;\n\n        if (grid === this) {\n          cartesian = this._coordsList[0];\n        }\n      }\n\n    return {\n      cartesian: cartesian,\n      axis: axis\n    };\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.containPoint = function (point) {\n    var coord = this._coordsList[0];\n\n    if (coord) {\n      return coord.containPoint(point);\n    }\n  };\n  /**\n   * Initialize cartesian coordinate systems\n   */\n\n\n  Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\n    var _this = this;\n\n    var grid = this;\n    var axisPositionUsed = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    var axesMap = {\n      x: {},\n      y: {}\n    };\n    var axesCount = {\n      x: 0,\n      y: 0\n    }; /// Create axis\n\n    ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n    ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n    if (!axesCount.x || !axesCount.y) {\n      // Roll back when there no either x or y axis\n      this._axesMap = {};\n      this._axesList = [];\n      return;\n    }\n\n    this._axesMap = axesMap; /// Create cartesian2d\n\n    each(axesMap.x, function (xAxis, xAxisIndex) {\n      each(axesMap.y, function (yAxis, yAxisIndex) {\n        var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n        var cartesian = new Cartesian2D(key);\n        cartesian.master = _this;\n        cartesian.model = gridModel;\n        _this._coordsMap[key] = cartesian;\n\n        _this._coordsList.push(cartesian);\n\n        cartesian.addAxis(xAxis);\n        cartesian.addAxis(yAxis);\n      });\n    });\n\n    function createAxisCreator(dimName) {\n      return function (axisModel, idx) {\n        if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\n          return;\n        }\n\n        var axisPosition = axisModel.get('position');\n\n        if (dimName === 'x') {\n          // Fix position\n          if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n            // Default bottom of X\n            axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n          }\n        } else {\n          // Fix position\n          if (axisPosition !== 'left' && axisPosition !== 'right') {\n            // Default left of Y\n            axisPosition = axisPositionUsed.left ? 'right' : 'left';\n          }\n        }\n\n        axisPositionUsed[axisPosition] = true;\n        var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n        var isCategory = axis.type === 'category';\n        axis.onBand = isCategory && axisModel.get('boundaryGap');\n        axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n        axisModel.axis = axis; // Inject axisModel into axis\n\n        axis.model = axisModel; // Inject grid info axis\n\n        axis.grid = grid; // Index of axis, can be used as key\n\n        axis.index = idx;\n\n        grid._axesList.push(axis);\n\n        axesMap[dimName][idx] = axis;\n        axesCount[dimName]++;\n      };\n    }\n  };\n  /**\n   * Update cartesian properties from series.\n   */\n\n\n  Grid.prototype._updateScale = function (ecModel, gridModel) {\n    // Reset scale\n    each(this._axesList, function (axis) {\n      axis.scale.setExtent(Infinity, -Infinity);\n\n      if (axis.type === 'category') {\n        var categorySortInfo = axis.model.get('categorySortInfo');\n        axis.scale.setSortInfo(categorySortInfo);\n      }\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (isCartesian2DSeries(seriesModel)) {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n\n        if (!isAxisUsedInTheGrid(xAxisModel, gridModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\n          return;\n        }\n\n        var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n        var data = seriesModel.getData();\n        var xAxis = cartesian.getAxis('x');\n        var yAxis = cartesian.getAxis('y');\n        unionExtent(data, xAxis);\n        unionExtent(data, yAxis);\n      }\n    }, this);\n\n    function unionExtent(data, axis) {\n      each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\n        axis.scale.unionExtentFromData(data, dim);\n      });\n    }\n  };\n  /**\n   * @param dim 'x' or 'y' or 'auto' or null/undefined\n   */\n\n\n  Grid.prototype.getTooltipAxes = function (dim) {\n    var baseAxes = [];\n    var otherAxes = [];\n    each(this.getCartesians(), function (cartesian) {\n      var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n      var otherAxis = cartesian.getOtherAxis(baseAxis);\n      indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n      indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n    });\n    return {\n      baseAxes: baseAxes,\n      otherAxes: otherAxes\n    };\n  };\n\n  Grid.create = function (ecModel, api) {\n    var grids = [];\n    ecModel.eachComponent('grid', function (gridModel, idx) {\n      var grid = new Grid(gridModel, ecModel, api);\n      grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n      // should be performed in create stage.\n\n      grid.resize(gridModel, api, true);\n      gridModel.coordinateSystem = grid;\n      grids.push(grid);\n    }); // Inject the coordinateSystems into seriesModel\n\n    ecModel.eachSeries(function (seriesModel) {\n      if (!isCartesian2DSeries(seriesModel)) {\n        return;\n      }\n\n      var axesModelMap = findAxisModels(seriesModel);\n      var xAxisModel = axesModelMap.xAxisModel;\n      var yAxisModel = axesModelMap.yAxisModel;\n      var gridModel = xAxisModel.getCoordSysModel();\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!gridModel) {\n          throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\n        }\n\n        if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\n          throw new Error('xAxis and yAxis must use the same grid');\n        }\n      }\n\n      var grid = gridModel.coordinateSystem;\n      seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    });\n    return grids;\n  }; // For deciding which dimensions to use when creating list data\n\n\n  Grid.dimensions = cartesian2DDimensions;\n  return Grid;\n}();\n/**\n * Check if the axis is used in the specified grid.\n */\n\n\nfunction isAxisUsedInTheGrid(axisModel, gridModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\n\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis, // Key: see `getOnZeroRecordKey`\nonZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  }; // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n\n\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get(['axisLine', 'onZero']);\n  var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\n\n  if (!onZero) {\n    return;\n  } // If target axis is specified.\n\n\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\n\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\n\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\n\nexport default Grid;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nexport function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n\n  if (axis.scale.isBlank()) {\n    return;\n  } // TODO: TYPE\n\n\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true\n  });\n\n  if (!ticksCoords.length) {\n    return;\n  } // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n\n\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = inner(axisView).splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x = void 0;\n    var y = void 0;\n    var width = void 0;\n    var height = void 0;\n\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      autoBatch: true,\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n\n  inner(axisView).splitAreaColors = newSplitAreaColors;\n}\nexport function rectCoordAxisHandleRemove(axisView) {\n  inner(axisView).splitAreaColors = null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport AxisBuilder from './AxisBuilder.js';\nimport AxisView from './AxisView.js';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper.js';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper.js';\nimport { isIntervalOrLogScale } from '../../scale/helper.js';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\n\nvar CartesianAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisView, _super);\n\n  function CartesianAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianAxisView.type;\n    _this.axisPointerClass = 'CartesianAxisPointer';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, zrUtil.extend({\n      handleAutoShown: function (elementType) {\n        var cartesians = gridModel.coordinateSystem.getCartesians();\n\n        for (var i = 0; i < cartesians.length; i++) {\n          if (isIntervalOrLogScale(cartesians[i].getOtherAxis(axisModel.axis).scale)) {\n            // Still show axis tick or axisLine if other axis is value / log\n            return true;\n          }\n        } // Not show axisTick or axisLine if other axis is category / time\n\n\n        return false;\n      }\n    }, layout));\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this._axisGroup, axisModel, gridModel);\n      }\n    }, this); // THIS is a special case for bar racing chart.\n    // Update the axis label from the natural initial layout to\n    // sorted layout should has no animation.\n\n    var isInitialSortFromBarRacing = payload && payload.type === 'changeAxisOrder' && payload.isInitSort;\n\n    if (!isInitialSortFromBarRacing) {\n      graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    }\n\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n\n  CartesianAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n\n  CartesianAxisView.type = 'cartesianAxis';\n  return CartesianAxisView;\n}(AxisView);\n\nvar axisElementBuilders = {\n  splitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      var tickValue = ticksCoords[i].tickValue;\n      var line = new graphic.Line({\n        anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n        autoBatch: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      });\n      graphic.subPixelOptimizeLine(line.shape, lineStyle.lineWidth);\n      axisGroup.add(line);\n    }\n  },\n  minorSplitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n\n        var line = new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          autoBatch: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        });\n        graphic.subPixelOptimizeLine(line.shape, lineStyle.lineWidth);\n        axisGroup.add(line);\n      }\n    }\n  },\n  splitArea: function (axisView, axisGroup, axisModel, gridModel) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\n  }\n};\n\nvar CartesianXAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianXAxisView, _super);\n\n  function CartesianXAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n\n  CartesianXAxisView.type = 'xAxis';\n  return CartesianXAxisView;\n}(CartesianAxisView);\n\nexport { CartesianXAxisView };\n\nvar CartesianYAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianYAxisView, _super);\n\n  function CartesianYAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n\n  CartesianYAxisView.type = 'yAxis';\n  return CartesianYAxisView;\n}(CartesianAxisView);\n\nexport { CartesianYAxisView };\nexport default CartesianAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nimport GridModel from '../../coord/cartesian/GridModel.js';\nimport { Rect } from '../../util/graphic.js';\nimport { defaults } from 'zrender/lib/core/util.js';\nimport { CartesianAxisModel } from '../../coord/cartesian/AxisModel.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport Grid from '../../coord/cartesian/Grid.js';\nimport { CartesianXAxisView, CartesianYAxisView } from '../axis/CartesianAxisView.js'; // Grid view\n\nvar GridView =\n/** @class */\nfunction (_super) {\n  __extends(GridView, _super);\n\n  function GridView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'grid';\n    return _this;\n  }\n\n  GridView.prototype.render = function (gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  };\n\n  GridView.type = 'grid';\n  return GridView;\n}(ComponentView);\n\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  offset: 0\n};\nexport function install(registers) {\n  registers.registerComponentView(GridView);\n  registers.registerComponentModel(GridModel);\n  registers.registerCoordinateSystem('cartesian2d', Grid);\n  axisModelCreator(registers, 'x', CartesianAxisModel, extraOption);\n  axisModelCreator(registers, 'y', CartesianAxisModel, extraOption);\n  registers.registerComponentView(CartesianXAxisView);\n  registers.registerComponentView(CartesianYAxisView);\n  registers.registerPreprocessor(function (option) {\n    // Only create grid when need\n    if (option.xAxis && option.yAxis && !option.grid) {\n      option.grid = {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installSimple } from './installSimple.js';\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nexport function install(registers) {\n  use(installSimple);\n  use(installAxisPointer);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport ComponentModel from '../../model/Component.js';\nimport ComponentView from '../../view/Component.js';\nimport { windowOpen } from '../../util/format.js';\n\nvar TitleModel =\n/** @class */\nfunction (_super) {\n  __extends(TitleModel, _super);\n\n  function TitleModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TitleModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    return _this;\n  }\n\n  TitleModel.type = 'title';\n  TitleModel.defaultOption = {\n    // zlevel: 0,\n    z: 6,\n    show: true,\n    text: '',\n    target: 'blank',\n    subtext: '',\n    subtarget: 'blank',\n    left: 0,\n    top: 0,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bold',\n      color: '#464646'\n    },\n    subtextStyle: {\n      fontSize: 12,\n      color: '#6E7079'\n    }\n  };\n  return TitleModel;\n}(ComponentModel); // View\n\n\nvar TitleView =\n/** @class */\nfunction (_super) {\n  __extends(TitleView, _super);\n\n  function TitleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TitleView.type;\n    return _this;\n  }\n\n  TitleView.prototype.render = function (titleModel, ecModel, api) {\n    this.group.removeAll();\n\n    if (!titleModel.get('show')) {\n      return;\n    }\n\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: titleModel.get('text'),\n        fill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: createTextStyle(subtextStyleModel, {\n        text: subText,\n        fill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        verticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n\n    if (link) {\n      textEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('target'));\n      });\n    }\n\n    if (sublink) {\n      subTextEl.on('click', function () {\n        windowOpen(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n\n    getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line.\n\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding')); // Adjust text align based on position\n\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right'); // @ts-ignore\n\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      } // Adjust layout by text align\n\n\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom'); // @ts-ignore\n\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n\n    group.x = layoutRect.x;\n    group.y = layoutRect.y;\n    group.markRedraw();\n    var alignStyle = {\n      align: textAlign,\n      verticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle); // Render background\n    // Get groupRect again because textAlign has been changed\n\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  };\n\n  TitleView.type = 'title';\n  return TitleView;\n}(ComponentView);\n\nexport function install(registers) {\n  registers.registerComponentModel(TitleModel);\n  registers.registerComponentView(TitleView);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\n\nvar TooltipModel =\n/** @class */\nfunction (_super) {\n  __extends(TooltipModel, _super);\n\n  function TooltipModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TooltipModel.type;\n    return _this;\n  }\n\n  TooltipModel.type = 'tooltip';\n  TooltipModel.dependencies = ['axisPointer'];\n  TooltipModel.defaultOption = {\n    // zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip main content\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    renderMode: 'auto',\n    // whether restraint content inside viewRect.\n    // If renderMode: 'richText', default true.\n    // If renderMode: 'html', defaut false (for backward compat).\n    confine: null,\n    showDelay: 0,\n    hideDelay: 100,\n    // Animation transition time, unit is second\n    transitionDuration: 0.4,\n    enterable: false,\n    backgroundColor: '#fff',\n    // box shadow\n    shadowBlur: 10,\n    shadowColor: 'rgba(0, 0, 0, .2)',\n    shadowOffsetX: 1,\n    shadowOffsetY: 2,\n    // tooltip border radius, unit is px, default is 4\n    borderRadius: 4,\n    // tooltip border width, unit is px, default is 0 (no border)\n    borderWidth: 1,\n    // Tooltip inside padding, default is 5 for all direction\n    // Array is allowed to set up, right, bottom, left, same with css\n    // The default value: See `tooltip/tooltipMarkup.ts#getPaddingFromTooltipModel`.\n    padding: null,\n    // Extra css text\n    extraCssText: '',\n    // axis indicator, trigger by axis\n    axisPointer: {\n      // default is line\n      // legal values: 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // Valid when type is line, appoint tooltip line locate on which line. Optional\n      // legal values: 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // default is 'auto', chose the axis which type is category.\n      // for multiply y axis, cartesian coord chose x axis, polar chose angle axis\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {}\n      } // lineStyle and shadowStyle should not be specified here,\n      // otherwise it will always override those styles on option.axisPointer.\n\n    },\n    textStyle: {\n      color: '#666',\n      fontSize: 14\n    }\n  };\n  return TooltipModel;\n}(ComponentModel);\n\nexport default TooltipModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { toCamelCase } from '../../util/format.js';\nimport env from 'zrender/lib/core/env.js';\n/* global document */\n\nexport function shouldTooltipConfine(tooltipModel) {\n  var confineOption = tooltipModel.get('confine');\n  return confineOption != null ? !!confineOption // In richText mode, the outside part can not be visible.\n  : tooltipModel.get('renderMode') === 'richText';\n}\n\nfunction testStyle(styleProps) {\n  if (!env.domSupported) {\n    return;\n  }\n\n  var style = document.documentElement.style;\n\n  for (var i = 0, len = styleProps.length; i < len; i++) {\n    if (styleProps[i] in style) {\n      return styleProps[i];\n    }\n  }\n}\n\nexport var TRANSFORM_VENDOR = testStyle(['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\nexport var TRANSITION_VENDOR = testStyle(['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\nexport function toCSSVendorPrefix(styleVendor, styleProp) {\n  if (!styleVendor) {\n    return styleProp;\n  }\n\n  styleProp = toCamelCase(styleProp, true);\n  var idx = styleVendor.indexOf(styleProp);\n  styleVendor = idx === -1 ? styleProp : \"-\" + styleVendor.slice(0, idx) + \"-\" + styleProp;\n  return styleVendor.toLowerCase();\n}\nexport function getComputedStyle(el, style) {\n  var stl = el.currentStyle || document.defaultView && document.defaultView.getComputedStyle(el);\n  return stl ? style ? stl[style] : stl : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isString, indexOf, each, bind, isArray, isDom } from 'zrender/lib/core/util.js';\nimport { normalizeEvent } from 'zrender/lib/core/event.js';\nimport { transformLocalCoord } from 'zrender/lib/core/dom.js';\nimport env from 'zrender/lib/core/env.js';\nimport { convertToColorString, toCamelCase, normalizeCssArray } from '../../util/format.js';\nimport { shouldTooltipConfine, toCSSVendorPrefix, getComputedStyle, TRANSFORM_VENDOR, TRANSITION_VENDOR } from './helper.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\n/* global document, window */\n\nvar CSS_TRANSITION_VENDOR = toCSSVendorPrefix(TRANSITION_VENDOR, 'transition');\nvar CSS_TRANSFORM_VENDOR = toCSSVendorPrefix(TRANSFORM_VENDOR, 'transform'); // eslint-disable-next-line\n\nvar gCssText = \"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;\" + (env.transform3dSupported ? 'will-change:transform;' : '');\n\nfunction mirrorPos(pos) {\n  pos = pos === 'left' ? 'right' : pos === 'right' ? 'left' : pos === 'top' ? 'bottom' : 'top';\n  return pos;\n}\n\nfunction assembleArrow(tooltipModel, borderColor, arrowPosition) {\n  if (!isString(arrowPosition) || arrowPosition === 'inside') {\n    return '';\n  }\n\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var borderWidth = tooltipModel.get('borderWidth');\n  borderColor = convertToColorString(borderColor);\n  var arrowPos = mirrorPos(arrowPosition);\n  var arrowSize = Math.max(Math.round(borderWidth) * 1.5, 6);\n  var positionStyle = '';\n  var transformStyle = CSS_TRANSFORM_VENDOR + ':';\n  var rotateDeg;\n\n  if (indexOf(['left', 'right'], arrowPos) > -1) {\n    positionStyle += 'top:50%';\n    transformStyle += \"translateY(-50%) rotate(\" + (rotateDeg = arrowPos === 'left' ? -225 : -45) + \"deg)\";\n  } else {\n    positionStyle += 'left:50%';\n    transformStyle += \"translateX(-50%) rotate(\" + (rotateDeg = arrowPos === 'top' ? 225 : 45) + \"deg)\";\n  }\n\n  var rotateRadian = rotateDeg * Math.PI / 180;\n  var arrowWH = arrowSize + borderWidth;\n  var rotatedWH = arrowWH * Math.abs(Math.cos(rotateRadian)) + arrowWH * Math.abs(Math.sin(rotateRadian));\n  var arrowOffset = Math.round(((rotatedWH - Math.SQRT2 * borderWidth) / 2 + Math.SQRT2 * borderWidth - (rotatedWH - arrowWH) / 2) * 100) / 100;\n  positionStyle += \";\" + arrowPos + \":-\" + arrowOffset + \"px\";\n  var borderStyle = borderColor + \" solid \" + borderWidth + \"px;\";\n  var styleCss = [\"position:absolute;width:\" + arrowSize + \"px;height:\" + arrowSize + \"px;\", positionStyle + \";\" + transformStyle + \";\", \"border-bottom:\" + borderStyle, \"border-right:\" + borderStyle, \"background-color:\" + backgroundColor + \";\"];\n  return \"<div style=\\\"\" + styleCss.join('') + \"\\\"></div>\";\n}\n\nfunction assembleTransition(duration, onlyFade) {\n  var transitionCurve = 'cubic-bezier(0.23,1,0.32,1)';\n  var transitionOption = \" \" + duration / 2 + \"s \" + transitionCurve;\n  var transitionText = \"opacity\" + transitionOption + \",visibility\" + transitionOption;\n\n  if (!onlyFade) {\n    transitionOption = \" \" + duration + \"s \" + transitionCurve;\n    transitionText += env.transformSupported ? \",\" + CSS_TRANSFORM_VENDOR + transitionOption : \",left\" + transitionOption + \",top\" + transitionOption;\n  }\n\n  return CSS_TRANSITION_VENDOR + ':' + transitionText;\n}\n\nfunction assembleTransform(x, y, toString) {\n  // If using float on style, the final width of the dom might\n  // keep changing slightly while mouse move. So `toFixed(0)` them.\n  var x0 = x.toFixed(0) + 'px';\n  var y0 = y.toFixed(0) + 'px'; // not support transform, use `left` and `top` instead.\n\n  if (!env.transformSupported) {\n    return toString ? \"top:\" + y0 + \";left:\" + x0 + \";\" : [['top', y0], ['left', x0]];\n  } // support transform\n\n\n  var is3d = env.transform3dSupported;\n  var translate = \"translate\" + (is3d ? '3d' : '') + \"(\" + x0 + \",\" + y0 + (is3d ? ',0' : '') + \")\";\n  return toString ? 'top:0;left:0;' + CSS_TRANSFORM_VENDOR + ':' + translate + ';' : [['top', 0], ['left', 0], [TRANSFORM_VENDOR, translate]];\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  fontSize // @ts-ignore, leave it to the tooltip refactor.\n  && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n  var shadowColor = textStyleModel.get('textShadowColor');\n  var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\n  var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\n  var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\n  shadowColor && shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n\nfunction assembleCssText(tooltipModel, enableTransition, onlyFade) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var shadowBlur = tooltipModel.get('shadowBlur');\n  var shadowColor = tooltipModel.get('shadowColor');\n  var shadowOffsetX = tooltipModel.get('shadowOffsetX');\n  var shadowOffsetY = tooltipModel.get('shadowOffsetY');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = getPaddingFromTooltipModel(tooltipModel, 'html');\n  var boxShadow = shadowOffsetX + \"px \" + shadowOffsetY + \"px \" + shadowBlur + \"px \" + shadowColor;\n  cssText.push('box-shadow:' + boxShadow); // Animation transition. Do not animate when transitionDuration is 0.\n\n  enableTransition && transitionDuration && cssText.push(assembleTransition(transitionDuration, onlyFade));\n\n  if (backgroundColor) {\n    cssText.push('background-color:' + backgroundColor);\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n} // If not able to make, do not modify the input `out`.\n\n\nfunction makeStyleCoord(out, zr, appendToBody, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n\n  if (appendToBody) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      transformLocalCoord(out, zrViewportRoot, document.body, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY; // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\n\nvar TooltipHTMLContent =\n/** @class */\nfunction () {\n  function TooltipHTMLContent(container, api, opt) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._enterable = true;\n    this._firstShow = true;\n    this._longHide = true;\n\n    if (env.wxa) {\n      return null;\n    }\n\n    var el = document.createElement('div'); // TODO: TYPE\n\n    el.domBelongToZr = true;\n    this.el = el;\n    var zr = this._zr = api.getZr();\n    var appendToBody = this._appendToBody = opt && opt.appendToBody;\n    makeStyleCoord(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);\n\n    if (appendToBody) {\n      document.body.appendChild(el);\n    } else {\n      container.appendChild(el);\n    }\n\n    this._container = container; // FIXME\n    // Is it needed to trigger zr event manually if\n    // the browser do not support `pointer-events: none`.\n\n    var self = this;\n\n    el.onmouseenter = function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    };\n\n    el.onmousemove = function (e) {\n      e = e || window.event;\n\n      if (!self._enterable) {\n        // `pointer-events: none` is set to tooltip content div\n        // if `enterable` is set as `false`, and `el.onmousemove`\n        // can not be triggered. But in browser that do not\n        // support `pointer-events`, we need to do this:\n        // Try trigger zrender event to avoid mouse\n        // in and out shape too frequently\n        var handler = zr.handler;\n        var zrViewportRoot = zr.painter.getViewportRoot();\n        normalizeEvent(zrViewportRoot, e, true);\n        handler.dispatch('mousemove', e);\n      }\n    };\n\n    el.onmouseleave = function () {\n      // set `_inContent` to `false` before `hideLater`\n      self._inContent = false;\n\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n    };\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n\n\n  TooltipHTMLContent.prototype.update = function (tooltipModel) {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var position = getComputedStyle(container, 'position');\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && position !== 'absolute') {\n      domStyle.position = 'relative';\n    } // move tooltip if chart resized\n\n\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized(); // update className\n\n    this.el.className = tooltipModel.get('className') || ''; // Hide the tooltip\n    // PENDING\n    // this.hide();\n  };\n\n  TooltipHTMLContent.prototype.show = function (tooltipModel, nearPointColor) {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var el = this.el;\n    var style = el.style;\n    var styleCoord = this._styleCoord;\n\n    if (!el.innerHTML) {\n      style.display = 'none';\n    } else {\n      style.cssText = gCssText + assembleCssText(tooltipModel, !this._firstShow, this._longHide) // initial transform\n      + assembleTransform(styleCoord[0], styleCoord[1], true) + (\"border-color:\" + convertToColorString(nearPointColor) + \";\") + (tooltipModel.get('extraCssText') || '') // If mouse occasionally move over the tooltip, a mouseout event will be\n      // triggered by canvas, and cause some unexpectable result like dragging\n      // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n      // it. Although it is not supported by IE8~IE10, fortunately it is a rare\n      // scenario.\n      + (\";pointer-events:\" + (this._enterable ? 'auto' : 'none'));\n    }\n\n    this._show = true;\n    this._firstShow = false;\n    this._longHide = false;\n  };\n\n  TooltipHTMLContent.prototype.setContent = function (content, markers, tooltipModel, borderColor, arrowPosition) {\n    var el = this.el;\n\n    if (content == null) {\n      el.innerHTML = '';\n      return;\n    }\n\n    var arrow = '';\n\n    if (isString(arrowPosition) && tooltipModel.get('trigger') === 'item' && !shouldTooltipConfine(tooltipModel)) {\n      arrow = assembleArrow(tooltipModel, borderColor, arrowPosition);\n    }\n\n    if (isString(content)) {\n      el.innerHTML = content + arrow;\n    } else if (content) {\n      // Clear previous\n      el.innerHTML = '';\n\n      if (!isArray(content)) {\n        content = [content];\n      }\n\n      for (var i = 0; i < content.length; i++) {\n        if (isDom(content[i]) && content[i].parentNode !== el) {\n          el.appendChild(content[i]);\n        }\n      } // no arrow if empty\n\n\n      if (arrow && el.childNodes.length) {\n        // no need to create a new parent element, but it's not supported by IE 10 and older.\n        // const arrowEl = document.createRange().createContextualFragment(arrow);\n        var arrowEl = document.createElement('div');\n        arrowEl.innerHTML = arrow;\n        el.appendChild(arrowEl);\n      }\n    }\n  };\n\n  TooltipHTMLContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n\n  TooltipHTMLContent.prototype.getSize = function () {\n    var el = this.el;\n    return [el.offsetWidth, el.offsetHeight];\n  };\n\n  TooltipHTMLContent.prototype.moveTo = function (zrX, zrY) {\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._appendToBody, zrX, zrY);\n\n    if (styleCoord[0] != null && styleCoord[1] != null) {\n      var style_1 = this.el.style;\n      var transforms = assembleTransform(styleCoord[0], styleCoord[1]);\n      each(transforms, function (transform) {\n        style_1[transform[0]] = transform[1];\n      });\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n\n\n  TooltipHTMLContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2]; // The ratio of top to height\n\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n\n  TooltipHTMLContent.prototype.hide = function () {\n    var _this = this;\n\n    var style = this.el.style;\n    style.visibility = 'hidden';\n    style.opacity = '0';\n    env.transform3dSupported && (style.willChange = '');\n    this._show = false;\n    this._longHideTimeout = setTimeout(function () {\n      return _this._longHide = true;\n    }, 500);\n  };\n\n  TooltipHTMLContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n\n  TooltipHTMLContent.prototype.isShow = function () {\n    return this._show;\n  };\n\n  TooltipHTMLContent.prototype.dispose = function () {\n    this.el.parentNode.removeChild(this.el);\n  };\n\n  return TooltipHTMLContent;\n}();\n\nexport default TooltipHTMLContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\nimport { throwError } from '../../util/log.js';\n\nvar TooltipRichContent =\n/** @class */\nfunction () {\n  function TooltipRichContent(api) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._enterable = true;\n    this._zr = api.getZr();\n    makeStyleCoord(this._styleCoord, this._zr, api.getWidth() / 2, api.getHeight() / 2);\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n\n\n  TooltipRichContent.prototype.update = function (tooltipModel) {\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n  };\n\n  TooltipRichContent.prototype.show = function () {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    this.el.show();\n    this._show = true;\n  };\n  /**\n   * Set tooltip content\n   */\n\n\n  TooltipRichContent.prototype.setContent = function (content, markupStyleCreator, tooltipModel, borderColor, arrowPosition) {\n    var _this = this;\n\n    if (zrUtil.isObject(content)) {\n      throwError(process.env.NODE_ENV !== 'production' ? 'Passing DOM nodes as content is not supported in richText tooltip!' : '');\n    }\n\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n\n    var textStyleModel = tooltipModel.getModel('textStyle');\n    this.el = new ZRText({\n      style: {\n        rich: markupStyleCreator.richTextStyles,\n        text: content,\n        lineHeight: 22,\n        borderWidth: 1,\n        borderColor: borderColor,\n        textShadowColor: textStyleModel.get('textShadowColor'),\n        fill: tooltipModel.get(['textStyle', 'color']),\n        padding: getPaddingFromTooltipModel(tooltipModel, 'richText'),\n        verticalAlign: 'top',\n        align: 'left'\n      },\n      z: tooltipModel.get('z')\n    });\n    zrUtil.each(['backgroundColor', 'borderRadius', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'], function (propName) {\n      _this.el.style[propName] = tooltipModel.get(propName);\n    });\n    zrUtil.each(['textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'], function (propName) {\n      _this.el.style[propName] = textStyleModel.get(propName) || 0;\n    });\n\n    this._zr.add(this.el);\n\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n\n      self._inContent = false;\n    });\n  };\n\n  TooltipRichContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n\n  TooltipRichContent.prototype.getSize = function () {\n    var el = this.el;\n    var bounding = this.el.getBoundingRect(); // bounding rect does not include shadow. For renderMode richText,\n    // if overflow, it will be cut. So calculate them accurately.\n\n    var shadowOuterSize = calcShadowOuterSize(el.style);\n    return [bounding.width + shadowOuterSize.left + shadowOuterSize.right, bounding.height + shadowOuterSize.top + shadowOuterSize.bottom];\n  };\n\n  TooltipRichContent.prototype.moveTo = function (x, y) {\n    var el = this.el;\n\n    if (el) {\n      var styleCoord = this._styleCoord;\n      makeStyleCoord(styleCoord, this._zr, x, y);\n      x = styleCoord[0];\n      y = styleCoord[1];\n      var style = el.style;\n      var borderWidth = mathMaxWith0(style.borderWidth || 0);\n      var shadowOuterSize = calcShadowOuterSize(style); // rich text x, y do not include border.\n\n      el.x = x + borderWidth + shadowOuterSize.left;\n      el.y = y + borderWidth + shadowOuterSize.top;\n      el.markRedraw();\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n\n\n  TooltipRichContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2]; // The ratio of top to height\n\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n\n  TooltipRichContent.prototype.hide = function () {\n    if (this.el) {\n      this.el.hide();\n    }\n\n    this._show = false;\n  };\n\n  TooltipRichContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n\n  TooltipRichContent.prototype.isShow = function () {\n    return this._show;\n  };\n\n  TooltipRichContent.prototype.dispose = function () {\n    this._zr.remove(this.el);\n  };\n\n  return TooltipRichContent;\n}();\n\nfunction mathMaxWith0(val) {\n  return Math.max(0, val);\n}\n\nfunction calcShadowOuterSize(style) {\n  var shadowBlur = mathMaxWith0(style.shadowBlur || 0);\n  var shadowOffsetX = mathMaxWith0(style.shadowOffsetX || 0);\n  var shadowOffsetY = mathMaxWith0(style.shadowOffsetY || 0);\n  return {\n    left: mathMaxWith0(shadowBlur - shadowOffsetX),\n    right: mathMaxWith0(shadowBlur + shadowOffsetX),\n    top: mathMaxWith0(shadowBlur - shadowOffsetY),\n    bottom: mathMaxWith0(shadowBlur + shadowOffsetY)\n  };\n}\n\nfunction makeStyleCoord(out, zr, zrX, zrY) {\n  out[0] = zrX;\n  out[1] = zrY;\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\n\nexport default TooltipRichContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nimport { bind, each, clone, trim, isString, isFunction, isArray, isObject, extend } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport TooltipHTMLContent from './TooltipHTMLContent.js';\nimport TooltipRichContent from './TooltipRichContent.js';\nimport { convertToColorString, formatTpl } from '../../util/format.js';\nimport { parsePercent } from '../../util/number.js';\nimport { Rect } from '../../util/graphic.js';\nimport findPointFromSeries from '../axisPointer/findPointFromSeries.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport Model from '../../model/Model.js';\nimport * as globalListener from '../axisPointer/globalListener.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport * as axisPointerViewHelper from '../axisPointer/viewHelper.js';\nimport { getTooltipRenderMode, preParseFinder, queryReferringComponents } from '../../util/model.js';\nimport ComponentView from '../../view/Component.js';\nimport { format as timeFormat } from '../../util/time.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { shouldTooltipConfine } from './helper.js';\nimport { normalizeTooltipFormatResult } from '../../model/mixin/dataFormat.js';\nimport { createTooltipMarkup, buildTooltipMarkup, TooltipMarkupStyleCreator } from './tooltipMarkup.js';\nimport { findEventDispatcher } from '../../util/event.js';\nimport { clear, createOrUpdate } from '../../util/throttle.js';\nvar proxyRect = new Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar TooltipView =\n/** @class */\nfunction (_super) {\n  __extends(TooltipView, _super);\n\n  function TooltipView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TooltipView.type;\n    return _this;\n  }\n\n  TooltipView.prototype.init = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = this._renderMode = getTooltipRenderMode(tooltipModel.get('renderMode'));\n    this._tooltipContent = renderMode === 'richText' ? new TooltipRichContent(api) : new TooltipHTMLContent(api.getDom(), api, {\n      appendToBody: tooltipModel.get('appendToBody', true)\n    });\n  };\n\n  TooltipView.prototype.render = function (tooltipModel, ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    this._tooltipModel = tooltipModel;\n    this._ecModel = ecModel;\n    this._api = api;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update(tooltipModel);\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow(); // PENDING\n    // `mousemove` event will be triggered very frequently when the mouse moves fast,\n    // which causes that the `updatePosition` function was also called frequently.\n    // In Chrome with devtools open and Firefox, tooltip looks laggy and shakes. See #14695 #16101\n    // To avoid frequent triggering,\n    // consider throttling it in 50ms when transition is enabled\n\n\n    if (this._renderMode !== 'richText' && tooltipModel.get('transitionDuration')) {\n      createOrUpdate(this, '_updatePosition', 50, 'fixRate');\n    } else {\n      clear(this, '_updatePosition');\n    }\n  };\n\n  TooltipView.prototype._initGlobalListener = function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  };\n\n  TooltipView.prototype._keepShow = function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api;\n    var triggerOn = tooltipModel.get('triggerOn'); // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && triggerOn !== 'none' && triggerOn !== 'click') {\n      var self_1 = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self_1._lastX,\n          y: self_1._lastY,\n          dataByCoordSys: self_1._lastDataByCoordSys\n        });\n      });\n    }\n  };\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n\n\n  TooltipView.prototype.manuallyShowTip = function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node || !api.getDom()) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n    var cmptRef = findComponentReference(payload, ecModel, api);\n\n    if (cmptRef) {\n      var rect = cmptRef.el.getBoundingRect().clone();\n      rect.applyTransform(cmptRef.el.transform);\n\n      this._tryShow({\n        offsetX: rect.x + rect.width / 2,\n        offsetY: rect.y + rect.height / 2,\n        target: cmptRef.el,\n        position: payload.position,\n        // When manully trigger, the mouse is not on the el, so we'd better to\n        // position tooltip on the bottom of the el and display arrow is possible.\n        positionDefault: 'bottom'\n      }, dispatchAction);\n    } else if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.x = payload.x;\n      el.y = payload.y;\n      el.update();\n      getECData(el).tooltipConfig = {\n        name: null,\n        option: payload.tooltip\n      }; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          target: pointInfo.el,\n          position: payload.position,\n          // When manully trigger, the mouse is not on the el, so we'd better to\n          // position tooltip on the bottom of the el and display arrow is possible.\n          positionDefault: 'bottom'\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  };\n\n  TooltipView.prototype.manuallyHideTip = function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent && this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = this._lastDataByCoordSys = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  }; // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n\n\n  TooltipView.prototype._manuallyAxisShowTip = function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex; // @ts-ignore\n\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipCascadedModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model], this._tooltipModel);\n\n    if (tooltipCascadedModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  };\n\n  TooltipView.prototype._tryShow = function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } else if (el) {\n      this._lastDataByCoordSys = null;\n      var seriesDispatcher_1;\n      var cmptDispatcher_1;\n      findEventDispatcher(el, function (target) {\n        // Always show item tooltip if mouse is on the element with dataIndex\n        if (getECData(target).dataIndex != null) {\n          seriesDispatcher_1 = target;\n          return true;\n        } // Tooltip provided directly. Like legend.\n\n\n        if (getECData(target).tooltipConfig != null) {\n          cmptDispatcher_1 = target;\n          return true;\n        }\n      }, true);\n\n      if (seriesDispatcher_1) {\n        this._showSeriesItemTooltip(e, seriesDispatcher_1, dispatchAction);\n      } else if (cmptDispatcher_1) {\n        this._showComponentItemTooltip(e, cmptDispatcher_1, dispatchAction);\n      } else {\n        this._hide(dispatchAction);\n      }\n    } else {\n      this._lastDataByCoordSys = null;\n\n      this._hide(dispatchAction);\n    }\n  };\n\n  TooltipView.prototype._showOrMove = function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easier to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  };\n\n  TooltipView.prototype._showAxisTooltip = function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption], globalTooltipModel);\n    var renderMode = this._renderMode;\n    var cbParamsList = [];\n    var articleMarkup = createTooltipMarkup('section', {\n      blocks: [],\n      noHeader: true\n    }); // Only for legacy: `Serise['formatTooltip']` returns a string.\n\n    var markupTextArrLegacy = [];\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    each(dataByCoordSys, function (itemCoordSys) {\n      each(itemCoordSys.dataByAxis, function (axisItem) {\n        var axisModel = ecModel.getComponent(axisItem.axisDim + 'Axis', axisItem.axisIndex);\n        var axisValue = axisItem.value;\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var axisValueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, axisItem.seriesDataIndices, axisItem.valueLabelOpt);\n        var axisSectionMarkup = createTooltipMarkup('section', {\n          header: axisValueLabel,\n          noHeader: !trim(axisValueLabel),\n          sortBlocks: true,\n          blocks: []\n        });\n        articleMarkup.blocks.push(axisSectionMarkup);\n        each(axisItem.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var cbParams = series.getDataParams(dataIndex); // Can't find data.\n\n          if (cbParams.dataIndex < 0) {\n            return;\n          }\n\n          cbParams.axisDim = axisItem.axisDim;\n          cbParams.axisIndex = axisItem.axisIndex;\n          cbParams.axisType = axisItem.axisType;\n          cbParams.axisId = axisItem.axisId;\n          cbParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, {\n            value: axisValue\n          });\n          cbParams.axisValueLabel = axisValueLabel; // Pre-create marker style for makers. Users can assemble richText\n          // text in `formatter` callback and use those markers style.\n\n          cbParams.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(cbParams.color), renderMode);\n          var seriesTooltipResult = normalizeTooltipFormatResult(series.formatTooltip(dataIndex, true, null));\n          var frag = seriesTooltipResult.frag;\n\n          if (frag) {\n            var valueFormatter = buildTooltipModel([series], globalTooltipModel).get('valueFormatter');\n            axisSectionMarkup.blocks.push(valueFormatter ? extend({\n              valueFormatter: valueFormatter\n            }, frag) : frag);\n          }\n\n          if (seriesTooltipResult.text) {\n            markupTextArrLegacy.push(seriesTooltipResult.text);\n          }\n\n          cbParamsList.push(cbParams);\n        });\n      });\n    }); // In most cases, the second axis is displays upper on the first one.\n    // So we reverse it to look better.\n\n    articleMarkup.blocks.reverse();\n    markupTextArrLegacy.reverse();\n    var positionExpr = e.position;\n    var orderMode = singleTooltipModel.get('order');\n    var builtMarkupText = buildTooltipMarkup(articleMarkup, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), singleTooltipModel.get('textStyle'));\n    builtMarkupText && markupTextArrLegacy.unshift(builtMarkupText);\n    var blockBreak = renderMode === 'richText' ? '\\n\\n' : '<br/>';\n    var allMarkupText = markupTextArrLegacy.join(blockBreak);\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys, cbParamsList)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, cbParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, allMarkupText, cbParamsList, Math.random() + '', point[0], point[1], positionExpr, null, markupStyleCreator);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  };\n\n  TooltipView.prototype._showSeriesItemTooltip = function (e, dispatcher, dispatchAction) {\n    var ecModel = this._ecModel;\n    var ecData = getECData(dispatcher); // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = ecData.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = ecData.dataModel || seriesModel;\n    var dataIndex = ecData.dataIndex;\n    var dataType = ecData.dataType;\n    var data = dataModel.getData(dataType);\n    var renderMode = this._renderMode;\n    var positionDefault = e.positionDefault;\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model], this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var markupStyleCreator = new TooltipMarkupStyleCreator(); // Pre-create marker style for makers. Users can assemble richText\n    // text in `formatter` callback and use those markers style.\n\n    params.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(params.color), renderMode);\n    var seriesTooltipResult = normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex, false, dataType));\n    var orderMode = tooltipModel.get('order');\n    var valueFormatter = tooltipModel.get('valueFormatter');\n    var frag = seriesTooltipResult.frag;\n    var markupText = frag ? buildTooltipMarkup(valueFormatter ? extend({\n      valueFormatter: valueFormatter\n    }, frag) : frag, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), tooltipModel.get('textStyle')) : seriesTooltipResult.text;\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, markupText, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markupStyleCreator);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  };\n\n  TooltipView.prototype._showComponentItemTooltip = function (e, el, dispatchAction) {\n    var ecData = getECData(el);\n    var tooltipConfig = ecData.tooltipConfig;\n    var tooltipOpt = tooltipConfig.option || {};\n\n    if (isString(tooltipOpt)) {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var tooltipModelCascade = [tooltipOpt];\n\n    var cmpt = this._ecModel.getComponent(ecData.componentMainType, ecData.componentIndex);\n\n    if (cmpt) {\n      tooltipModelCascade.push(cmpt);\n    } // In most cases, component tooltip formatter has different params with series tooltip formatter,\n    // so that they can not share the same formatter. Since the global tooltip formatter is used for series\n    // by convension, we do not use it as the default formatter for component.\n\n\n    tooltipModelCascade.push({\n      formatter: tooltipOpt.content\n    });\n    var positionDefault = e.positionDefault;\n    var subTooltipModel = buildTooltipModel(tooltipModelCascade, this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random() + ''; // PENDING: this case do not support richText style yet.\n\n    var markupStyleCreator = new TooltipMarkupStyleCreator(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on coordinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      // Use formatterParams from element defined in component\n      // Avoid users modify it.\n      var formatterParams = clone(subTooltipModel.get('formatterParams') || {});\n\n      this._showTooltipContent(subTooltipModel, defaultHtml, formatterParams, asyncTicket, e.offsetX, e.offsetY, e.position, el, markupStyleCreator);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  };\n\n  TooltipView.prototype._showTooltipContent = function ( // Use Model<TooltipOption> insteadof TooltipModel because this model may be from series or other options.\n  // Instead of top level tooltip.\n  tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markupStyleCreator) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    var nearPoint = this._getNearestPoint([x, y], params, tooltipModel.get('trigger'), tooltipModel.get('borderColor'));\n\n    var nearPointColor = nearPoint.color;\n\n    if (formatter) {\n      if (isString(formatter)) {\n        var useUTC = tooltipModel.ecModel.get('useUTC');\n        var params0 = isArray(params) ? params[0] : params;\n        var isTimeAxis = params0 && params0.axisType && params0.axisType.indexOf('time') >= 0;\n        html = formatter;\n\n        if (isTimeAxis) {\n          html = timeFormat(params0.axisValue, html, useUTC);\n        }\n\n        html = formatTpl(html, params, true);\n      } else if (isFunction(formatter)) {\n        var callback = bind(function (cbTicket, html) {\n          if (cbTicket === this._ticket) {\n            tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n\n            this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n          }\n        }, this);\n        this._ticket = asyncTicket;\n        html = formatter(params, asyncTicket, callback);\n      } else {\n        html = formatter;\n      }\n    }\n\n    tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n    tooltipContent.show(tooltipModel, nearPointColor);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  };\n\n  TooltipView.prototype._getNearestPoint = function (point, tooltipDataParams, trigger, borderColor) {\n    if (trigger === 'axis' || isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || (this._renderMode === 'html' ? '#fff' : 'none')\n      };\n    }\n\n    if (!isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || tooltipDataParams.color || tooltipDataParams.borderColor\n      };\n    }\n  };\n\n  TooltipView.prototype._updatePosition = function (tooltipModel, positionExpr, x, // Mouse x\n  y, // Mouse y\n  content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (isFunction(positionExpr)) {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (isObject(positionExpr)) {\n      var boxLayoutPosition = positionExpr;\n      boxLayoutPosition.width = contentSize[0];\n      boxLayoutPosition.height = contentSize[1];\n      var layoutRect = getLayoutRect(boxLayoutPosition, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (isString(positionExpr) && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize, tooltipModel.get('borderWidth'));\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (shouldTooltipConfine(tooltipModel)) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  }; // FIXME\n  // Should we remove this but leave this to user?\n\n\n  TooltipView.prototype._updateContentNotChangedOnAxis = function (dataByCoordSys, cbParamsList) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var lastCbParamsList = this._cbParamsList;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || [];\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged = contentNotChanged && lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged = contentNotChanged && lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        }); // check is cbParams data value changed\n\n        lastCbParamsList && each(lastItem.seriesDataIndices, function (idxItem) {\n          var seriesIdx = idxItem.seriesIndex;\n          var cbParams = cbParamsList[seriesIdx];\n          var lastCbParams = lastCbParamsList[seriesIdx];\n\n          if (cbParams && lastCbParams && lastCbParams.data !== cbParams.data) {\n            contentNotChanged = false;\n          }\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    this._cbParamsList = cbParamsList;\n    return !!contentNotChanged;\n  };\n\n  TooltipView.prototype._hide = function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  };\n\n  TooltipView.prototype.dispose = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n\n    clear(this, '_updatePosition');\n\n    this._tooltipContent.dispose();\n\n    globalListener.unregister('itemTooltip', api);\n  };\n\n  TooltipView.type = 'tooltip';\n  return TooltipView;\n}(ComponentView);\n/**\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade, globalTooltipModel, defaultTooltipOption) {\n  // Last is always tooltip model.\n  var ecModel = globalTooltipModel.ecModel;\n  var resultModel;\n\n  if (defaultTooltipOption) {\n    resultModel = new Model(defaultTooltipOption, ecModel, ecModel);\n    resultModel = new Model(globalTooltipModel.option, resultModel, ecModel);\n  } else {\n    resultModel = globalTooltipModel;\n  }\n\n  for (var i = modelCascade.length - 1; i >= 0; i--) {\n    var tooltipOpt = modelCascade[i];\n\n    if (tooltipOpt) {\n      if (tooltipOpt instanceof Model) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (isString(tooltipOpt)) {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      if (tooltipOpt) {\n        resultModel = new Model(tooltipOpt, resultModel, ecModel);\n      }\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n\n  if (gapH != null) {\n    // Add extra 2 pixels for this case:\n    // At present the \"values\" in defaut tooltip are using CSS `float: right`.\n    // When the right edge of the tooltip box is on the right side of the\n    // viewport, the `float` layout might push the \"values\" to the second line.\n    if (x + width + gapH + 2 > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize, borderWidth) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var offset = Math.ceil(Math.SQRT2 * borderWidth) + 8;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - offset;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + offset;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n/**\n * Find target component by payload like:\n * ```js\n * { legendId: 'some_id', name: 'xxx' }\n * { toolboxIndex: 1, name: 'xxx' }\n * { geoName: 'some_name', name: 'xxx' }\n * ```\n * PENDING: at present only\n *\n * If not found, return null/undefined.\n */\n\n\nfunction findComponentReference(payload, ecModel, api) {\n  var queryOptionMap = preParseFinder(payload).queryOptionMap;\n  var componentMainType = queryOptionMap.keys()[0];\n\n  if (!componentMainType || componentMainType === 'series') {\n    return;\n  }\n\n  var queryResult = queryReferringComponents(ecModel, componentMainType, queryOptionMap.get(componentMainType), {\n    useDefault: false,\n    enableAll: false,\n    enableNone: false\n  });\n  var model = queryResult.models[0];\n\n  if (!model) {\n    return;\n  }\n\n  var view = api.getViewOfComponentModel(model);\n  var el;\n  view.group.traverse(function (subEl) {\n    var tooltipConfig = getECData(subEl).tooltipConfig;\n\n    if (tooltipConfig && tooltipConfig.name === payload.name) {\n      el = subEl;\n      return true; // stop\n    }\n  });\n\n  if (el) {\n    return {\n      componentMainType: componentMainType,\n      componentIndex: model.componentIndex,\n      el: el\n    };\n  }\n}\n\nexport default TooltipView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nimport TooltipModel from './TooltipModel.js';\nimport TooltipView from './TooltipView.js';\nimport { noop } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  use(installAxisPointer);\n  registers.registerComponentModel(TooltipModel);\n  registers.registerComponentView(TooltipView);\n  /**\n   * @action\n   * @property {string} type\n   * @property {number} seriesIndex\n   * @property {number} dataIndex\n   * @property {number} [x]\n   * @property {number} [y]\n   */\n\n  registers.registerAction({\n    type: 'showTip',\n    event: 'showTip',\n    update: 'tooltip:manuallyShowTip'\n  }, noop);\n  registers.registerAction({\n    type: 'hideTip',\n    event: 'hideTip',\n    update: 'tooltip:manuallyHideTip'\n  }, noop);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getTooltipMarker, encodeHTML, makeValueReadable, convertToColorString } from '../../util/format.js';\nimport { isString, each, hasOwn, isArray, map, assert, extend } from 'zrender/lib/core/util.js';\nimport { SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nimport { getRandomIdBase } from '../../util/number.js';\nvar TOOLTIP_LINE_HEIGHT_CSS = 'line-height:1'; // TODO: more textStyle option\n\nfunction getTooltipTextStyle(textStyle, renderMode) {\n  var nameFontColor = textStyle.color || '#6e7079';\n  var nameFontSize = textStyle.fontSize || 12;\n  var nameFontWeight = textStyle.fontWeight || '400';\n  var valueFontColor = textStyle.color || '#464646';\n  var valueFontSize = textStyle.fontSize || 14;\n  var valueFontWeight = textStyle.fontWeight || '900';\n\n  if (renderMode === 'html') {\n    // `textStyle` is probably from user input, should be encoded to reduce security risk.\n    return {\n      // eslint-disable-next-line max-len\n      nameStyle: \"font-size:\" + encodeHTML(nameFontSize + '') + \"px;color:\" + encodeHTML(nameFontColor) + \";font-weight:\" + encodeHTML(nameFontWeight + ''),\n      // eslint-disable-next-line max-len\n      valueStyle: \"font-size:\" + encodeHTML(valueFontSize + '') + \"px;color:\" + encodeHTML(valueFontColor) + \";font-weight:\" + encodeHTML(valueFontWeight + '')\n    };\n  } else {\n    return {\n      nameStyle: {\n        fontSize: nameFontSize,\n        fill: nameFontColor,\n        fontWeight: nameFontWeight\n      },\n      valueStyle: {\n        fontSize: valueFontSize,\n        fill: valueFontColor,\n        fontWeight: valueFontWeight\n      }\n    };\n  }\n} // See `TooltipMarkupLayoutIntent['innerGapLevel']`.\n// (value from UI design)\n\n\nvar HTML_GAPS = [0, 10, 20, 30];\nvar RICH_TEXT_GAPS = ['', '\\n', '\\n\\n', '\\n\\n\\n']; // eslint-disable-next-line max-len\n\nexport function createTooltipMarkup(type, option) {\n  option.type = type;\n  return option;\n}\n\nfunction isSectionFragment(frag) {\n  return frag.type === 'section';\n}\n\nfunction getBuilder(frag) {\n  return isSectionFragment(frag) ? buildSection : buildNameValue;\n}\n\nfunction getBlockGapLevel(frag) {\n  if (isSectionFragment(frag)) {\n    var gapLevel_1 = 0;\n    var subBlockLen = frag.blocks.length;\n    var hasInnerGap_1 = subBlockLen > 1 || subBlockLen > 0 && !frag.noHeader;\n    each(frag.blocks, function (subBlock) {\n      var subGapLevel = getBlockGapLevel(subBlock); // If the some of the sub-blocks have some gaps (like 10px) inside, this block\n      // should use a larger gap (like 20px) to distinguish those sub-blocks.\n\n      if (subGapLevel >= gapLevel_1) {\n        gapLevel_1 = subGapLevel + +(hasInnerGap_1 && ( // 0 always can not be readable gap level.\n        !subGapLevel // If no header, always keep the sub gap level. Otherwise\n        // look weird in case `multipleSeries`.\n        || isSectionFragment(subBlock) && !subBlock.noHeader));\n      }\n    });\n    return gapLevel_1;\n  }\n\n  return 0;\n}\n\nfunction buildSection(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var noHeader = fragment.noHeader;\n  var gaps = getGap(getBlockGapLevel(fragment));\n  var subMarkupTextList = [];\n  var subBlocks = fragment.blocks || [];\n  assert(!subBlocks || isArray(subBlocks));\n  subBlocks = subBlocks || [];\n  var orderMode = ctx.orderMode;\n\n  if (fragment.sortBlocks && orderMode) {\n    subBlocks = subBlocks.slice();\n    var orderMap = {\n      valueAsc: 'asc',\n      valueDesc: 'desc'\n    };\n\n    if (hasOwn(orderMap, orderMode)) {\n      var comparator_1 = new SortOrderComparator(orderMap[orderMode], null);\n      subBlocks.sort(function (a, b) {\n        return comparator_1.evaluate(a.sortParam, b.sortParam);\n      });\n    } // FIXME 'seriesDesc' necessary?\n    else if (orderMode === 'seriesDesc') {\n        subBlocks.reverse();\n      }\n  }\n\n  each(subBlocks, function (subBlock, idx) {\n    var valueFormatter = fragment.valueFormatter;\n    var subMarkupText = getBuilder(subBlock)( // Inherit valueFormatter\n    valueFormatter ? extend(extend({}, ctx), {\n      valueFormatter: valueFormatter\n    }) : ctx, subBlock, idx > 0 ? gaps.html : 0, toolTipTextStyle);\n    subMarkupText != null && subMarkupTextList.push(subMarkupText);\n  });\n  var subMarkupText = ctx.renderMode === 'richText' ? subMarkupTextList.join(gaps.richText) : wrapBlockHTML(subMarkupTextList.join(''), noHeader ? topMarginForOuterGap : gaps.html);\n\n  if (noHeader) {\n    return subMarkupText;\n  }\n\n  var displayableHeader = makeValueReadable(fragment.header, 'ordinal', ctx.useUTC);\n  var nameStyle = getTooltipTextStyle(toolTipTextStyle, ctx.renderMode).nameStyle;\n\n  if (ctx.renderMode === 'richText') {\n    return wrapInlineNameRichText(ctx, displayableHeader, nameStyle) + gaps.richText + subMarkupText;\n  } else {\n    return wrapBlockHTML(\"<div style=\\\"\" + nameStyle + \";\" + TOOLTIP_LINE_HEIGHT_CSS + \";\\\">\" + encodeHTML(displayableHeader) + '</div>' + subMarkupText, topMarginForOuterGap);\n  }\n}\n\nfunction buildNameValue(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var renderMode = ctx.renderMode;\n  var noName = fragment.noName;\n  var noValue = fragment.noValue;\n  var noMarker = !fragment.markerType;\n  var name = fragment.name;\n  var useUTC = ctx.useUTC;\n\n  var valueFormatter = fragment.valueFormatter || ctx.valueFormatter || function (value) {\n    value = isArray(value) ? value : [value];\n    return map(value, function (val, idx) {\n      return makeValueReadable(val, isArray(valueTypeOption) ? valueTypeOption[idx] : valueTypeOption, useUTC);\n    });\n  };\n\n  if (noName && noValue) {\n    return;\n  }\n\n  var markerStr = noMarker ? '' : ctx.markupStyleCreator.makeTooltipMarker(fragment.markerType, fragment.markerColor || '#333', renderMode);\n  var readableName = noName ? '' : makeValueReadable(name, 'ordinal', useUTC);\n  var valueTypeOption = fragment.valueType;\n  var readableValueList = noValue ? [] : valueFormatter(fragment.value);\n  var valueAlignRight = !noMarker || !noName; // It little weird if only value next to marker but far from marker.\n\n  var valueCloseToMarker = !noMarker && noName;\n\n  var _a = getTooltipTextStyle(toolTipTextStyle, renderMode),\n      nameStyle = _a.nameStyle,\n      valueStyle = _a.valueStyle;\n\n  return renderMode === 'richText' ? (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameRichText(ctx, readableName, nameStyle)) // Value has commas inside, so use ' ' as delimiter for multiple values.\n  + (noValue ? '' : wrapInlineValueRichText(ctx, readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)) : wrapBlockHTML((noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameHTML(readableName, !noMarker, nameStyle)) + (noValue ? '' : wrapInlineValueHTML(readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)), topMarginForOuterGap);\n}\n/**\n * @return markupText. null/undefined means no content.\n */\n\n\nexport function buildTooltipMarkup(fragment, markupStyleCreator, renderMode, orderMode, useUTC, toolTipTextStyle) {\n  if (!fragment) {\n    return;\n  }\n\n  var builder = getBuilder(fragment);\n  var ctx = {\n    useUTC: useUTC,\n    renderMode: renderMode,\n    orderMode: orderMode,\n    markupStyleCreator: markupStyleCreator,\n    valueFormatter: fragment.valueFormatter\n  };\n  return builder(ctx, fragment, 0, toolTipTextStyle);\n}\n\nfunction getGap(gapLevel) {\n  return {\n    html: HTML_GAPS[gapLevel],\n    richText: RICH_TEXT_GAPS[gapLevel]\n  };\n}\n\nfunction wrapBlockHTML(encodedContent, topGap) {\n  var clearfix = '<div style=\"clear:both\"></div>';\n  var marginCSS = \"margin: \" + topGap + \"px 0 0\";\n  return \"<div style=\\\"\" + marginCSS + \";\" + TOOLTIP_LINE_HEIGHT_CSS + \";\\\">\" + encodedContent + clearfix + '</div>';\n}\n\nfunction wrapInlineNameHTML(name, leftHasMarker, style) {\n  var marginCss = leftHasMarker ? 'margin-left:2px' : '';\n  return \"<span style=\\\"\" + style + \";\" + marginCss + \"\\\">\" + encodeHTML(name) + '</span>';\n}\n\nfunction wrapInlineValueHTML(valueList, alignRight, valueCloseToMarker, style) {\n  // Do not too close to marker, considering there are multiple values separated by spaces.\n  var paddingStr = valueCloseToMarker ? '10px' : '20px';\n  var alignCSS = alignRight ? \"float:right;margin-left:\" + paddingStr : '';\n  valueList = isArray(valueList) ? valueList : [valueList];\n  return \"<span style=\\\"\" + alignCSS + \";\" + style + \"\\\">\" // Value has commas inside, so use '  ' as delimiter for multiple values.\n  + map(valueList, function (value) {\n    return encodeHTML(value);\n  }).join('&nbsp;&nbsp;') + '</span>';\n}\n\nfunction wrapInlineNameRichText(ctx, name, style) {\n  return ctx.markupStyleCreator.wrapRichTextStyle(name, style);\n}\n\nfunction wrapInlineValueRichText(ctx, values, alignRight, valueCloseToMarker, style) {\n  var styles = [style];\n  var paddingLeft = valueCloseToMarker ? 10 : 20;\n  alignRight && styles.push({\n    padding: [0, 0, 0, paddingLeft],\n    align: 'right'\n  }); // Value has commas inside, so use '  ' as delimiter for multiple values.\n\n  return ctx.markupStyleCreator.wrapRichTextStyle(isArray(values) ? values.join('  ') : values, styles);\n}\n\nexport function retrieveVisualColorForTooltipMarker(series, dataIndex) {\n  var style = series.getData().getItemVisual(dataIndex, 'style');\n  var color = style[series.visualDrawType];\n  return convertToColorString(color);\n}\nexport function getPaddingFromTooltipModel(model, renderMode) {\n  var padding = model.get('padding');\n  return padding != null ? padding // We give slightly different to look pretty.\n  : renderMode === 'richText' ? [8, 10] : 10;\n}\n/**\n * The major feature is generate styles for `renderMode: 'richText'`.\n * But it also serves `renderMode: 'html'` to provide\n * \"renderMode-independent\" API.\n */\n\nvar TooltipMarkupStyleCreator =\n/** @class */\nfunction () {\n  function TooltipMarkupStyleCreator() {\n    this.richTextStyles = {}; // Notice that \"generate a style name\" usuall happens repeatly when mouse moving and\n    // displaying a tooltip. So we put the `_nextStyleNameId` as a member of each creator\n    // rather than static shared by all creators (which will cause it increase to fast).\n\n    this._nextStyleNameId = getRandomIdBase();\n  }\n\n  TooltipMarkupStyleCreator.prototype._generateStyleName = function () {\n    return '__EC_aUTo_' + this._nextStyleNameId++;\n  };\n\n  TooltipMarkupStyleCreator.prototype.makeTooltipMarker = function (markerType, colorStr, renderMode) {\n    var markerId = renderMode === 'richText' ? this._generateStyleName() : null;\n    var marker = getTooltipMarker({\n      color: colorStr,\n      type: markerType,\n      renderMode: renderMode,\n      markerId: markerId\n    });\n\n    if (isString(marker)) {\n      return marker;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(markerId);\n      }\n\n      this.richTextStyles[markerId] = marker.style;\n      return marker.content;\n    }\n  };\n  /**\n   * @usage\n   * ```ts\n   * const styledText = markupStyleCreator.wrapRichTextStyle([\n   *     // The styles will be auto merged.\n   *     {\n   *         fontSize: 12,\n   *         color: 'blue'\n   *     },\n   *     {\n   *         padding: 20\n   *     }\n   * ]);\n   * ```\n   */\n\n\n  TooltipMarkupStyleCreator.prototype.wrapRichTextStyle = function (text, styles) {\n    var finalStl = {};\n\n    if (isArray(styles)) {\n      each(styles, function (stl) {\n        return extend(finalStl, stl);\n      });\n    } else {\n      extend(finalStl, styles);\n    }\n\n    var styleName = this._generateStyleName();\n\n    this.richTextStyles[styleName] = finalStl;\n    return \"{\" + styleName + \"|\" + text + \"}\";\n  };\n\n  return TooltipMarkupStyleCreator;\n}();\n\nexport { TooltipMarkupStyleCreator };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Linear continuous scale\n * http://en.wikipedia.org/wiki/Level_of_measurement\n */\n// FIXME only one data\n\nimport Scale from './Scale.js';\nimport OrdinalMeta from '../data/OrdinalMeta.js';\nimport * as scaleHelper from './helper.js';\nimport { isArray, map, isObject, isString } from 'zrender/lib/core/util.js';\n\nvar OrdinalScale =\n/** @class */\nfunction (_super) {\n  __extends(OrdinalScale, _super);\n\n  function OrdinalScale(setting) {\n    var _this = _super.call(this, setting) || this;\n\n    _this.type = 'ordinal';\n\n    var ordinalMeta = _this.getSetting('ordinalMeta'); // Caution: Should not use instanceof, consider ec-extensions using\n    // import approach to get OrdinalMeta class.\n\n\n    if (!ordinalMeta) {\n      ordinalMeta = new OrdinalMeta({});\n    }\n\n    if (isArray(ordinalMeta)) {\n      ordinalMeta = new OrdinalMeta({\n        categories: map(ordinalMeta, function (item) {\n          return isObject(item) ? item.value : item;\n        })\n      });\n    }\n\n    _this._ordinalMeta = ordinalMeta;\n    _this._extent = _this.getSetting('extent') || [0, ordinalMeta.categories.length - 1];\n    return _this;\n  }\n\n  OrdinalScale.prototype.parse = function (val) {\n    // Caution: Math.round(null) will return `0` rather than `NaN`\n    if (val == null) {\n      return NaN;\n    }\n\n    return isString(val) ? this._ordinalMeta.getOrdinal(val) // val might be float.\n    : Math.round(val);\n  };\n\n  OrdinalScale.prototype.contain = function (rank) {\n    rank = this.parse(rank);\n    return scaleHelper.contain(rank, this._extent) && this._ordinalMeta.categories[rank] != null;\n  };\n  /**\n   * Normalize given rank or name to linear [0, 1]\n   * @param val raw ordinal number.\n   * @return normalized value in [0, 1].\n   */\n\n\n  OrdinalScale.prototype.normalize = function (val) {\n    val = this._getTickNumber(this.parse(val));\n    return scaleHelper.normalize(val, this._extent);\n  };\n  /**\n   * @param val normalized value in [0, 1].\n   * @return raw ordinal number.\n   */\n\n\n  OrdinalScale.prototype.scale = function (val) {\n    val = Math.round(scaleHelper.scale(val, this._extent));\n    return this.getRawOrdinalNumber(val);\n  };\n\n  OrdinalScale.prototype.getTicks = function () {\n    var ticks = [];\n    var extent = this._extent;\n    var rank = extent[0];\n\n    while (rank <= extent[1]) {\n      ticks.push({\n        value: rank\n      });\n      rank++;\n    }\n\n    return ticks;\n  };\n\n  OrdinalScale.prototype.getMinorTicks = function (splitNumber) {\n    // Not support.\n    return;\n  };\n  /**\n   * @see `Ordinal['_ordinalNumbersByTick']`\n   */\n\n\n  OrdinalScale.prototype.setSortInfo = function (info) {\n    if (info == null) {\n      this._ordinalNumbersByTick = this._ticksByOrdinalNumber = null;\n      return;\n    }\n\n    var infoOrdinalNumbers = info.ordinalNumbers;\n    var ordinalsByTick = this._ordinalNumbersByTick = [];\n    var ticksByOrdinal = this._ticksByOrdinalNumber = []; // Unnecessary support negative tick in `realtimeSort`.\n\n    var tickNum = 0;\n    var allCategoryLen = this._ordinalMeta.categories.length;\n\n    for (var len = Math.min(allCategoryLen, infoOrdinalNumbers.length); tickNum < len; ++tickNum) {\n      var ordinalNumber = infoOrdinalNumbers[tickNum];\n      ordinalsByTick[tickNum] = ordinalNumber;\n      ticksByOrdinal[ordinalNumber] = tickNum;\n    } // Handle that `series.data` only covers part of the `axis.category.data`.\n\n\n    var unusedOrdinal = 0;\n\n    for (; tickNum < allCategoryLen; ++tickNum) {\n      while (ticksByOrdinal[unusedOrdinal] != null) {\n        unusedOrdinal++;\n      }\n\n      ;\n      ordinalsByTick.push(unusedOrdinal);\n      ticksByOrdinal[unusedOrdinal] = tickNum;\n    }\n  };\n\n  OrdinalScale.prototype._getTickNumber = function (ordinal) {\n    var ticksByOrdinalNumber = this._ticksByOrdinalNumber; // also support ordinal out of range of `ordinalMeta.categories.length`,\n    // where ordinal numbers are used as tick value directly.\n\n    return ticksByOrdinalNumber && ordinal >= 0 && ordinal < ticksByOrdinalNumber.length ? ticksByOrdinalNumber[ordinal] : ordinal;\n  };\n  /**\n   * @usage\n   * ```js\n   * const ordinalNumber = ordinalScale.getRawOrdinalNumber(tickVal);\n   *\n   * // case0\n   * const rawOrdinalValue = axisModel.getCategories()[ordinalNumber];\n   * // case1\n   * const rawOrdinalValue = this._ordinalMeta.categories[ordinalNumber];\n   * // case2\n   * const coord = axis.dataToCoord(ordinalNumber);\n   * ```\n   *\n   * @param {OrdinalNumber} tickNumber index of display\n   */\n\n\n  OrdinalScale.prototype.getRawOrdinalNumber = function (tickNumber) {\n    var ordinalNumbersByTick = this._ordinalNumbersByTick; // tickNumber may be out of range, e.g., when axis max is larger than `ordinalMeta.categories.length`.,\n    // where ordinal numbers are used as tick value directly.\n\n    return ordinalNumbersByTick && tickNumber >= 0 && tickNumber < ordinalNumbersByTick.length ? ordinalNumbersByTick[tickNumber] : tickNumber;\n  };\n  /**\n   * Get item on tick\n   */\n\n\n  OrdinalScale.prototype.getLabel = function (tick) {\n    if (!this.isBlank()) {\n      var ordinalNumber = this.getRawOrdinalNumber(tick.value);\n      var cateogry = this._ordinalMeta.categories[ordinalNumber]; // Note that if no data, ordinalMeta.categories is an empty array.\n      // Return empty if it's not exist.\n\n      return cateogry == null ? '' : cateogry + '';\n    }\n  };\n\n  OrdinalScale.prototype.count = function () {\n    return this._extent[1] - this._extent[0] + 1;\n  };\n\n  OrdinalScale.prototype.unionExtentFromData = function (data, dim) {\n    this.unionExtent(data.getApproximateExtent(dim));\n  };\n  /**\n   * @override\n   * If value is in extent range\n   */\n\n\n  OrdinalScale.prototype.isInExtentRange = function (value) {\n    value = this._getTickNumber(value);\n    return this._extent[0] <= value && this._extent[1] >= value;\n  };\n\n  OrdinalScale.prototype.getOrdinalMeta = function () {\n    return this._ordinalMeta;\n  };\n\n  OrdinalScale.prototype.calcNiceTicks = function () {};\n\n  OrdinalScale.prototype.calcNiceExtent = function () {};\n\n  OrdinalScale.type = 'ordinal';\n  return OrdinalScale;\n}(Scale);\n\nScale.registerClass(OrdinalScale);\nexport default OrdinalScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/*\n* A third-party license is embeded for some of the code in this file:\n* The \"scaleLevels\" was originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment on the definition of \"scaleLevels\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\n// [About UTC and local time zone]:\n// In most cases, `number.parseDate` will treat input data string as local time\n// (except time zone is specified in time string). And `format.formateTime` returns\n// local time by default. option.useUTC is false by default. This design have\n// concidered these common case:\n// (1) Time that is persistent in server is in UTC, but it is needed to be diplayed\n// in local time by default.\n// (2) By default, the input data string (e.g., '2011-01-02') should be displayed\n// as its original time, without any time difference.\n\nimport * as numberUtil from '../util/number.js';\nimport { ONE_SECOND, ONE_MINUTE, ONE_HOUR, ONE_DAY, ONE_YEAR, format, leveledFormat, getUnitValue, timeUnits, fullLeveledFormatter, getPrimaryTimeUnit, isPrimaryTimeUnit, getDefaultFormatPrecisionOfInterval, fullYearGetterName, monthSetterName, fullYearSetterName, dateSetterName, hoursGetterName, hoursSetterName, minutesSetterName, secondsSetterName, millisecondsSetterName, monthGetterName, dateGetterName, minutesGetterName, secondsGetterName, millisecondsGetterName } from '../util/time.js';\nimport * as scaleHelper from './helper.js';\nimport IntervalScale from './Interval.js';\nimport Scale from './Scale.js';\nimport { warn } from '../util/log.js';\nimport { filter, isNumber, map } from 'zrender/lib/core/util.js'; // FIXME 公用？\n\nvar bisect = function (a, x, lo, hi) {\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n\n    if (a[mid][1] < x) {\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n\n  return lo;\n};\n\nvar TimeScale =\n/** @class */\nfunction (_super) {\n  __extends(TimeScale, _super);\n\n  function TimeScale(settings) {\n    var _this = _super.call(this, settings) || this;\n\n    _this.type = 'time';\n    return _this;\n  }\n  /**\n   * Get label is mainly for other components like dataZoom, tooltip.\n   */\n\n\n  TimeScale.prototype.getLabel = function (tick) {\n    var useUTC = this.getSetting('useUTC');\n    return format(tick.value, fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))] || fullLeveledFormatter.second, useUTC, this.getSetting('locale'));\n  };\n\n  TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\n    var isUTC = this.getSetting('useUTC');\n    var lang = this.getSetting('locale');\n    return leveledFormat(tick, idx, labelFormatter, lang, isUTC);\n  };\n  /**\n   * @override\n   */\n\n\n  TimeScale.prototype.getTicks = function () {\n    var interval = this._interval;\n    var extent = this._extent;\n    var ticks = []; // If interval is 0, return [];\n\n    if (!interval) {\n      return ticks;\n    }\n\n    ticks.push({\n      value: extent[0],\n      level: 0\n    });\n    var useUTC = this.getSetting('useUTC');\n    var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent);\n    ticks = ticks.concat(innerTicks);\n    ticks.push({\n      value: extent[1],\n      level: 0\n    });\n    return ticks;\n  };\n\n  TimeScale.prototype.calcNiceExtent = function (opt) {\n    var extent = this._extent; // If extent start and end are same, expand them\n\n    if (extent[0] === extent[1]) {\n      // Expand extent\n      extent[0] -= ONE_DAY;\n      extent[1] += ONE_DAY;\n    } // If there are no data and extent are [Infinity, -Infinity]\n\n\n    if (extent[1] === -Infinity && extent[0] === Infinity) {\n      var d = new Date();\n      extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      extent[0] = extent[1] - ONE_DAY;\n    }\n\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n  };\n\n  TimeScale.prototype.calcNiceTicks = function (approxTickNum, minInterval, maxInterval) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n    this._approxInterval = span / approxTickNum;\n\n    if (minInterval != null && this._approxInterval < minInterval) {\n      this._approxInterval = minInterval;\n    }\n\n    if (maxInterval != null && this._approxInterval > maxInterval) {\n      this._approxInterval = maxInterval;\n    }\n\n    var scaleIntervalsLen = scaleIntervals.length;\n    var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1); // Interval that can be used to calculate ticks\n\n    this._interval = scaleIntervals[idx][1]; // Min level used when picking ticks from top down.\n    // We check one more level to avoid the ticks are to sparse in some case.\n\n    this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\n  };\n\n  TimeScale.prototype.parse = function (val) {\n    // val might be float.\n    return isNumber(val) ? val : +numberUtil.parseDate(val);\n  };\n\n  TimeScale.prototype.contain = function (val) {\n    return scaleHelper.contain(this.parse(val), this._extent);\n  };\n\n  TimeScale.prototype.normalize = function (val) {\n    return scaleHelper.normalize(this.parse(val), this._extent);\n  };\n\n  TimeScale.prototype.scale = function (val) {\n    return scaleHelper.scale(val, this._extent);\n  };\n\n  TimeScale.type = 'time';\n  return TimeScale;\n}(IntervalScale);\n/**\n * This implementation was originally copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/time/scale.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\n\n\nvar scaleIntervals = [// Format                           interval\n['second', ONE_SECOND], ['minute', ONE_MINUTE], ['hour', ONE_HOUR], ['quarter-day', ONE_HOUR * 6], ['half-day', ONE_HOUR * 12], ['day', ONE_DAY * 1.2], ['half-week', ONE_DAY * 3.5], ['week', ONE_DAY * 7], ['month', ONE_DAY * 31], ['quarter', ONE_DAY * 95], ['half-year', ONE_YEAR / 2], ['year', ONE_YEAR] // 1Y\n];\n\nfunction isUnitValueSame(unit, valueA, valueB, isUTC) {\n  var dateA = numberUtil.parseDate(valueA);\n  var dateB = numberUtil.parseDate(valueB);\n\n  var isSame = function (unit) {\n    return getUnitValue(dateA, unit, isUTC) === getUnitValue(dateB, unit, isUTC);\n  };\n\n  var isSameYear = function () {\n    return isSame('year');\n  }; // const isSameHalfYear = () => isSameYear() && isSame('half-year');\n  // const isSameQuater = () => isSameYear() && isSame('quarter');\n\n\n  var isSameMonth = function () {\n    return isSameYear() && isSame('month');\n  };\n\n  var isSameDay = function () {\n    return isSameMonth() && isSame('day');\n  }; // const isSameHalfDay = () => isSameDay() && isSame('half-day');\n\n\n  var isSameHour = function () {\n    return isSameDay() && isSame('hour');\n  };\n\n  var isSameMinute = function () {\n    return isSameHour() && isSame('minute');\n  };\n\n  var isSameSecond = function () {\n    return isSameMinute() && isSame('second');\n  };\n\n  var isSameMilliSecond = function () {\n    return isSameSecond() && isSame('millisecond');\n  };\n\n  switch (unit) {\n    case 'year':\n      return isSameYear();\n\n    case 'month':\n      return isSameMonth();\n\n    case 'day':\n      return isSameDay();\n\n    case 'hour':\n      return isSameHour();\n\n    case 'minute':\n      return isSameMinute();\n\n    case 'second':\n      return isSameSecond();\n\n    case 'millisecond':\n      return isSameMilliSecond();\n  }\n} // const primaryUnitGetters = {\n//     year: fullYearGetterName(),\n//     month: monthGetterName(),\n//     day: dateGetterName(),\n//     hour: hoursGetterName(),\n//     minute: minutesGetterName(),\n//     second: secondsGetterName(),\n//     millisecond: millisecondsGetterName()\n// };\n// const primaryUnitUTCGetters = {\n//     year: fullYearGetterName(true),\n//     month: monthGetterName(true),\n//     day: dateGetterName(true),\n//     hour: hoursGetterName(true),\n//     minute: minutesGetterName(true),\n//     second: secondsGetterName(true),\n//     millisecond: millisecondsGetterName(true)\n// };\n// function moveTick(date: Date, unitName: TimeUnit, step: number, isUTC: boolean) {\n//     step = step || 1;\n//     switch (getPrimaryTimeUnit(unitName)) {\n//         case 'year':\n//             date[fullYearSetterName(isUTC)](date[fullYearGetterName(isUTC)]() + step);\n//             break;\n//         case 'month':\n//             date[monthSetterName(isUTC)](date[monthGetterName(isUTC)]() + step);\n//             break;\n//         case 'day':\n//             date[dateSetterName(isUTC)](date[dateGetterName(isUTC)]() + step);\n//             break;\n//         case 'hour':\n//             date[hoursSetterName(isUTC)](date[hoursGetterName(isUTC)]() + step);\n//             break;\n//         case 'minute':\n//             date[minutesSetterName(isUTC)](date[minutesGetterName(isUTC)]() + step);\n//             break;\n//         case 'second':\n//             date[secondsSetterName(isUTC)](date[secondsGetterName(isUTC)]() + step);\n//             break;\n//         case 'millisecond':\n//             date[millisecondsSetterName(isUTC)](date[millisecondsGetterName(isUTC)]() + step);\n//             break;\n//     }\n//     return date.getTime();\n// }\n// const DATE_INTERVALS = [[8, 7.5], [4, 3.5], [2, 1.5]];\n// const MONTH_INTERVALS = [[6, 5.5], [3, 2.5], [2, 1.5]];\n// const MINUTES_SECONDS_INTERVALS = [[30, 30], [20, 20], [15, 15], [10, 10], [5, 5], [2, 2]];\n\n\nfunction getDateInterval(approxInterval, daysInMonth) {\n  approxInterval /= ONE_DAY;\n  return approxInterval > 16 ? 16 // Math.floor(daysInMonth / 2) + 1  // In this case we only want one tick betwen two month.\n  : approxInterval > 7.5 ? 7 // TODO week 7 or day 8?\n  : approxInterval > 3.5 ? 4 : approxInterval > 1.5 ? 2 : 1;\n}\n\nfunction getMonthInterval(approxInterval) {\n  var APPROX_ONE_MONTH = 30 * ONE_DAY;\n  approxInterval /= APPROX_ONE_MONTH;\n  return approxInterval > 6 ? 6 : approxInterval > 3 ? 3 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getHourInterval(approxInterval) {\n  approxInterval /= ONE_HOUR;\n  return approxInterval > 12 ? 12 : approxInterval > 6 ? 6 : approxInterval > 3.5 ? 4 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getMinutesAndSecondsInterval(approxInterval, isMinutes) {\n  approxInterval /= isMinutes ? ONE_MINUTE : ONE_SECOND;\n  return approxInterval > 30 ? 30 : approxInterval > 20 ? 20 : approxInterval > 15 ? 15 : approxInterval > 10 ? 10 : approxInterval > 5 ? 5 : approxInterval > 2 ? 2 : 1;\n}\n\nfunction getMillisecondsInterval(approxInterval) {\n  return numberUtil.nice(approxInterval, true);\n}\n\nfunction getFirstTimestampOfUnit(date, unitName, isUTC) {\n  var outDate = new Date(date);\n\n  switch (getPrimaryTimeUnit(unitName)) {\n    case 'year':\n    case 'month':\n      outDate[monthSetterName(isUTC)](0);\n\n    case 'day':\n      outDate[dateSetterName(isUTC)](1);\n\n    case 'hour':\n      outDate[hoursSetterName(isUTC)](0);\n\n    case 'minute':\n      outDate[minutesSetterName(isUTC)](0);\n\n    case 'second':\n      outDate[secondsSetterName(isUTC)](0);\n      outDate[millisecondsSetterName(isUTC)](0);\n  }\n\n  return outDate.getTime();\n}\n\nfunction getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent) {\n  var safeLimit = 10000;\n  var unitNames = timeUnits;\n  var iter = 0;\n\n  function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\n    var date = new Date(minTimestamp);\n    var dateTime = minTimestamp;\n    var d = date[getMethodName](); // if (isDate) {\n    //     d -= 1; // Starts with 0;   PENDING\n    // }\n\n    while (dateTime < maxTimestamp && dateTime <= extent[1]) {\n      out.push({\n        value: dateTime\n      });\n      d += interval;\n      date[setMethodName](d);\n      dateTime = date.getTime();\n    } // This extra tick is for calcuating ticks of next level. Will not been added to the final result\n\n\n    out.push({\n      value: dateTime,\n      notAdd: true\n    });\n  }\n\n  function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\n    var newAddedTicks = [];\n    var isFirstLevel = !lastLevelTicks.length;\n\n    if (isUnitValueSame(getPrimaryTimeUnit(unitName), extent[0], extent[1], isUTC)) {\n      return;\n    }\n\n    if (isFirstLevel) {\n      lastLevelTicks = [{\n        // TODO Optimize. Not include so may ticks.\n        value: getFirstTimestampOfUnit(new Date(extent[0]), unitName, isUTC)\n      }, {\n        value: extent[1]\n      }];\n    }\n\n    for (var i = 0; i < lastLevelTicks.length - 1; i++) {\n      var startTick = lastLevelTicks[i].value;\n      var endTick = lastLevelTicks[i + 1].value;\n\n      if (startTick === endTick) {\n        continue;\n      }\n\n      var interval = void 0;\n      var getterName = void 0;\n      var setterName = void 0;\n      var isDate = false;\n\n      switch (unitName) {\n        case 'year':\n          interval = Math.max(1, Math.round(approxInterval / ONE_DAY / 365));\n          getterName = fullYearGetterName(isUTC);\n          setterName = fullYearSetterName(isUTC);\n          break;\n\n        case 'half-year':\n        case 'quarter':\n        case 'month':\n          interval = getMonthInterval(approxInterval);\n          getterName = monthGetterName(isUTC);\n          setterName = monthSetterName(isUTC);\n          break;\n\n        case 'week': // PENDING If week is added. Ignore day.\n\n        case 'half-week':\n        case 'day':\n          interval = getDateInterval(approxInterval, 31); // Use 32 days and let interval been 16\n\n          getterName = dateGetterName(isUTC);\n          setterName = dateSetterName(isUTC);\n          isDate = true;\n          break;\n\n        case 'half-day':\n        case 'quarter-day':\n        case 'hour':\n          interval = getHourInterval(approxInterval);\n          getterName = hoursGetterName(isUTC);\n          setterName = hoursSetterName(isUTC);\n          break;\n\n        case 'minute':\n          interval = getMinutesAndSecondsInterval(approxInterval, true);\n          getterName = minutesGetterName(isUTC);\n          setterName = minutesSetterName(isUTC);\n          break;\n\n        case 'second':\n          interval = getMinutesAndSecondsInterval(approxInterval, false);\n          getterName = secondsGetterName(isUTC);\n          setterName = secondsSetterName(isUTC);\n          break;\n\n        case 'millisecond':\n          interval = getMillisecondsInterval(approxInterval);\n          getterName = millisecondsGetterName(isUTC);\n          setterName = millisecondsSetterName(isUTC);\n          break;\n      }\n\n      addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\n\n      if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\n        // Add nearest years to the left extent.\n        levelTicks.unshift({\n          value: levelTicks[0].value - interval\n        });\n      }\n    }\n\n    for (var i = 0; i < newAddedTicks.length; i++) {\n      levelTicks.push(newAddedTicks[i]);\n    } // newAddedTicks.length && console.log(unitName, newAddedTicks);\n\n\n    return newAddedTicks;\n  }\n\n  var levelsTicks = [];\n  var currentLevelTicks = [];\n  var tickCount = 0;\n  var lastLevelTickCount = 0;\n\n  for (var i = 0; i < unitNames.length && iter++ < safeLimit; ++i) {\n    var primaryTimeUnit = getPrimaryTimeUnit(unitNames[i]);\n\n    if (!isPrimaryTimeUnit(unitNames[i])) {\n      // TODO\n      continue;\n    }\n\n    addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\n    var nextPrimaryTimeUnit = unitNames[i + 1] ? getPrimaryTimeUnit(unitNames[i + 1]) : null;\n\n    if (primaryTimeUnit !== nextPrimaryTimeUnit) {\n      if (currentLevelTicks.length) {\n        lastLevelTickCount = tickCount; // Remove the duplicate so the tick count can be precisely.\n\n        currentLevelTicks.sort(function (a, b) {\n          return a.value - b.value;\n        });\n        var levelTicksRemoveDuplicated = [];\n\n        for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\n          var tickValue = currentLevelTicks[i_1].value;\n\n          if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\n            levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\n\n            if (tickValue >= extent[0] && tickValue <= extent[1]) {\n              tickCount++;\n            }\n          }\n        }\n\n        var targetTickNum = (extent[1] - extent[0]) / approxInterval; // Added too much in this level and not too less in last level\n\n        if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\n          break;\n        } // Only treat primary time unit as one level.\n\n\n        levelsTicks.push(levelTicksRemoveDuplicated);\n\n        if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\n          break;\n        }\n      } // Reset if next unitName is primary\n\n\n      currentLevelTicks = [];\n    }\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (iter >= safeLimit) {\n      warn('Exceed safe limit.');\n    }\n  }\n\n  var levelsTicksInExtent = filter(map(levelsTicks, function (levelTicks) {\n    return filter(levelTicks, function (tick) {\n      return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd;\n    });\n  }), function (levelTicks) {\n    return levelTicks.length > 0;\n  });\n  var ticks = [];\n  var maxLevel = levelsTicksInExtent.length - 1;\n\n  for (var i = 0; i < levelsTicksInExtent.length; ++i) {\n    var levelTicks = levelsTicksInExtent[i];\n\n    for (var k = 0; k < levelTicks.length; ++k) {\n      ticks.push({\n        value: levelTicks[k].value,\n        level: maxLevel - i\n      });\n    }\n  }\n\n  ticks.sort(function (a, b) {\n    return a.value - b.value;\n  }); // Remove duplicates\n\n  var result = [];\n\n  for (var i = 0; i < ticks.length; ++i) {\n    if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\n      result.push(ticks[i]);\n    }\n  }\n\n  return result;\n}\n\nScale.registerClass(TimeScale);\nexport default TimeScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Scale from './Scale.js';\nimport * as numberUtil from '../util/number.js';\nimport * as scaleHelper from './helper.js'; // Use some method of IntervalScale\n\nimport IntervalScale from './Interval.js';\nvar scaleProto = Scale.prototype; // FIXME:TS refactor: not good to call it directly with `this`?\n\nvar intervalScaleProto = IntervalScale.prototype;\nvar roundingErrorFix = numberUtil.round;\nvar mathFloor = Math.floor;\nvar mathCeil = Math.ceil;\nvar mathPow = Math.pow;\nvar mathLog = Math.log;\n\nvar LogScale =\n/** @class */\nfunction (_super) {\n  __extends(LogScale, _super);\n\n  function LogScale() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'log';\n    _this.base = 10;\n    _this._originalScale = new IntervalScale(); // FIXME:TS actually used by `IntervalScale`\n\n    _this._interval = 0;\n    return _this;\n  }\n  /**\n   * @param Whether expand the ticks to niced extent.\n   */\n\n\n  LogScale.prototype.getTicks = function (expandToNicedExtent) {\n    var originalScale = this._originalScale;\n    var extent = this._extent;\n    var originalExtent = originalScale.getExtent();\n    var ticks = intervalScaleProto.getTicks.call(this, expandToNicedExtent);\n    return zrUtil.map(ticks, function (tick) {\n      var val = tick.value;\n      var powVal = numberUtil.round(mathPow(this.base, val)); // Fix #4158\n\n      powVal = val === extent[0] && this._fixMin ? fixRoundingError(powVal, originalExtent[0]) : powVal;\n      powVal = val === extent[1] && this._fixMax ? fixRoundingError(powVal, originalExtent[1]) : powVal;\n      return {\n        value: powVal\n      };\n    }, this);\n  };\n\n  LogScale.prototype.setExtent = function (start, end) {\n    var base = mathLog(this.base); // log(-Infinity) is NaN, so safe guard here\n\n    start = mathLog(Math.max(0, start)) / base;\n    end = mathLog(Math.max(0, end)) / base;\n    intervalScaleProto.setExtent.call(this, start, end);\n  };\n  /**\n   * @return {number} end\n   */\n\n\n  LogScale.prototype.getExtent = function () {\n    var base = this.base;\n    var extent = scaleProto.getExtent.call(this);\n    extent[0] = mathPow(base, extent[0]);\n    extent[1] = mathPow(base, extent[1]); // Fix #4158\n\n    var originalScale = this._originalScale;\n    var originalExtent = originalScale.getExtent();\n    this._fixMin && (extent[0] = fixRoundingError(extent[0], originalExtent[0]));\n    this._fixMax && (extent[1] = fixRoundingError(extent[1], originalExtent[1]));\n    return extent;\n  };\n\n  LogScale.prototype.unionExtent = function (extent) {\n    this._originalScale.unionExtent(extent);\n\n    var base = this.base;\n    extent[0] = mathLog(extent[0]) / mathLog(base);\n    extent[1] = mathLog(extent[1]) / mathLog(base);\n    scaleProto.unionExtent.call(this, extent);\n  };\n\n  LogScale.prototype.unionExtentFromData = function (data, dim) {\n    // TODO\n    // filter value that <= 0\n    this.unionExtent(data.getApproximateExtent(dim));\n  };\n  /**\n   * Update interval and extent of intervals for nice ticks\n   * @param approxTickNum default 10 Given approx tick number\n   */\n\n\n  LogScale.prototype.calcNiceTicks = function (approxTickNum) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n\n    if (span === Infinity || span <= 0) {\n      return;\n    }\n\n    var interval = numberUtil.quantity(span);\n    var err = approxTickNum / span * interval; // Filter ticks to get closer to the desired count.\n\n    if (err <= 0.5) {\n      interval *= 10;\n    } // Interval should be integer\n\n\n    while (!isNaN(interval) && Math.abs(interval) < 1 && Math.abs(interval) > 0) {\n      interval *= 10;\n    }\n\n    var niceExtent = [numberUtil.round(mathCeil(extent[0] / interval) * interval), numberUtil.round(mathFloor(extent[1] / interval) * interval)];\n    this._interval = interval;\n    this._niceExtent = niceExtent;\n  };\n\n  LogScale.prototype.calcNiceExtent = function (opt) {\n    intervalScaleProto.calcNiceExtent.call(this, opt);\n    this._fixMin = opt.fixMin;\n    this._fixMax = opt.fixMax;\n  };\n\n  LogScale.prototype.parse = function (val) {\n    return val;\n  };\n\n  LogScale.prototype.contain = function (val) {\n    val = mathLog(val) / mathLog(this.base);\n    return scaleHelper.contain(val, this._extent);\n  };\n\n  LogScale.prototype.normalize = function (val) {\n    val = mathLog(val) / mathLog(this.base);\n    return scaleHelper.normalize(val, this._extent);\n  };\n\n  LogScale.prototype.scale = function (val) {\n    val = scaleHelper.scale(val, this._extent);\n    return mathPow(this.base, val);\n  };\n\n  LogScale.type = 'log';\n  return LogScale;\n}(Scale);\n\nvar proto = LogScale.prototype;\nproto.getMinorTicks = intervalScaleProto.getMinorTicks;\nproto.getLabel = intervalScaleProto.getLabel;\n\nfunction fixRoundingError(val, originalVal) {\n  return roundingErrorFix(val, numberUtil.getPrecision(originalVal));\n}\n\nScale.registerClass(LogScale);\nexport default LogScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { assert, isArray, eqNaN, isFunction } from 'zrender/lib/core/util.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\n\nvar ScaleRawExtentInfo =\n/** @class */\nfunction () {\n  function ScaleRawExtentInfo(scale, model, // Usually: data extent from all series on this axis.\n  originalExtent) {\n    this._prepareParams(scale, model, originalExtent);\n  }\n  /**\n   * Parameters depending on ouside (like model, user callback)\n   * are prepared and fixed here.\n   */\n\n\n  ScaleRawExtentInfo.prototype._prepareParams = function (scale, model, // Usually: data extent from all series on this axis.\n  dataExtent) {\n    if (dataExtent[1] < dataExtent[0]) {\n      dataExtent = [NaN, NaN];\n    }\n\n    this._dataMin = dataExtent[0];\n    this._dataMax = dataExtent[1];\n    var isOrdinal = this._isOrdinal = scale.type === 'ordinal';\n    this._needCrossZero = scale.type === 'interval' && model.getNeedCrossZero && model.getNeedCrossZero();\n    var modelMinRaw = this._modelMinRaw = model.get('min', true);\n\n    if (isFunction(modelMinRaw)) {\n      // This callback alway provide users the full data extent (before data filtered).\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw({\n        min: dataExtent[0],\n        max: dataExtent[1]\n      }));\n    } else if (modelMinRaw !== 'dataMin') {\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw);\n    }\n\n    var modelMaxRaw = this._modelMaxRaw = model.get('max', true);\n\n    if (isFunction(modelMaxRaw)) {\n      // This callback alway provide users the full data extent (before data filtered).\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw({\n        min: dataExtent[0],\n        max: dataExtent[1]\n      }));\n    } else if (modelMaxRaw !== 'dataMax') {\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw);\n    }\n\n    if (isOrdinal) {\n      // FIXME: there is a flaw here: if there is no \"block\" data processor like `dataZoom`,\n      // and progressive rendering is using, here the category result might just only contain\n      // the processed chunk rather than the entire result.\n      this._axisDataLen = model.getCategories().length;\n    } else {\n      var boundaryGap = model.get('boundaryGap');\n      var boundaryGapArr = isArray(boundaryGap) ? boundaryGap : [boundaryGap || 0, boundaryGap || 0];\n\n      if (typeof boundaryGapArr[0] === 'boolean' || typeof boundaryGapArr[1] === 'boolean') {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn('Boolean type for boundaryGap is only ' + 'allowed for ordinal axis. Please use string in ' + 'percentage instead, e.g., \"20%\". Currently, ' + 'boundaryGap is set to be 0.');\n        }\n\n        this._boundaryGapInner = [0, 0];\n      } else {\n        this._boundaryGapInner = [parsePercent(boundaryGapArr[0], 1), parsePercent(boundaryGapArr[1], 1)];\n      }\n    }\n  };\n  /**\n   * Calculate extent by prepared parameters.\n   * This method has no external dependency and can be called duplicatedly,\n   * getting the same result.\n   * If parameters changed, should call this method to recalcuate.\n   */\n\n\n  ScaleRawExtentInfo.prototype.calculate = function () {\n    // Notice: When min/max is not set (that is, when there are null/undefined,\n    // which is the most common case), these cases should be ensured:\n    // (1) For 'ordinal', show all axis.data.\n    // (2) For others:\n    //      + `boundaryGap` is applied (if min/max set, boundaryGap is\n    //      disabled).\n    //      + If `needCrossZero`, min/max should be zero, otherwise, min/max should\n    //      be the result that originalExtent enlarged by boundaryGap.\n    // (3) If no data, it should be ensured that `scale.setBlank` is set.\n    var isOrdinal = this._isOrdinal;\n    var dataMin = this._dataMin;\n    var dataMax = this._dataMax;\n    var axisDataLen = this._axisDataLen;\n    var boundaryGapInner = this._boundaryGapInner;\n    var span = !isOrdinal ? dataMax - dataMin || Math.abs(dataMin) : null; // Currently if a `'value'` axis model min is specified as 'dataMin'/'dataMax',\n    // `boundaryGap` will not be used. It's the different from specifying as `null`/`undefined`.\n\n    var min = this._modelMinRaw === 'dataMin' ? dataMin : this._modelMinNum;\n    var max = this._modelMaxRaw === 'dataMax' ? dataMax : this._modelMaxNum; // If `_modelMinNum`/`_modelMaxNum` is `null`/`undefined`, should not be fixed.\n\n    var minFixed = min != null;\n    var maxFixed = max != null;\n\n    if (min == null) {\n      min = isOrdinal ? axisDataLen ? 0 : NaN : dataMin - boundaryGapInner[0] * span;\n    }\n\n    if (max == null) {\n      max = isOrdinal ? axisDataLen ? axisDataLen - 1 : NaN : dataMax + boundaryGapInner[1] * span;\n    }\n\n    (min == null || !isFinite(min)) && (min = NaN);\n    (max == null || !isFinite(max)) && (max = NaN);\n    var isBlank = eqNaN(min) || eqNaN(max) || isOrdinal && !axisDataLen; // If data extent modified, need to recalculated to ensure cross zero.\n\n    if (this._needCrossZero) {\n      // Axis is over zero and min is not set\n      if (min > 0 && max > 0 && !minFixed) {\n        min = 0; // minFixed = true;\n      } // Axis is under zero and max is not set\n\n\n      if (min < 0 && max < 0 && !maxFixed) {\n        max = 0; // maxFixed = true;\n      } // PENDING:\n      // When `needCrossZero` and all data is positive/negative, should it be ensured\n      // that the results processed by boundaryGap are positive/negative?\n      // If so, here `minFixed`/`maxFixed` need to be set.\n\n    }\n\n    var determinedMin = this._determinedMin;\n    var determinedMax = this._determinedMax;\n\n    if (determinedMin != null) {\n      min = determinedMin;\n      minFixed = true;\n    }\n\n    if (determinedMax != null) {\n      max = determinedMax;\n      maxFixed = true;\n    } // Ensure min/max be finite number or NaN here. (not to be null/undefined)\n    // `NaN` means min/max axis is blank.\n\n\n    return {\n      min: min,\n      max: max,\n      minFixed: minFixed,\n      maxFixed: maxFixed,\n      isBlank: isBlank\n    };\n  };\n\n  ScaleRawExtentInfo.prototype.modifyDataMinMax = function (minMaxName, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this.frozen);\n    }\n\n    this[DATA_MIN_MAX_ATTR[minMaxName]] = val;\n  };\n\n  ScaleRawExtentInfo.prototype.setDeterminedMinMax = function (minMaxName, val) {\n    var attr = DETERMINED_MIN_MAX_ATTR[minMaxName];\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this.frozen // Earse them usually means logic flaw.\n      && this[attr] == null);\n    }\n\n    this[attr] = val;\n  };\n\n  ScaleRawExtentInfo.prototype.freeze = function () {\n    // @ts-ignore\n    this.frozen = true;\n  };\n\n  return ScaleRawExtentInfo;\n}();\n\nexport { ScaleRawExtentInfo };\nvar DETERMINED_MIN_MAX_ATTR = {\n  min: '_determinedMin',\n  max: '_determinedMax'\n};\nvar DATA_MIN_MAX_ATTR = {\n  min: '_dataMin',\n  max: '_dataMax'\n};\n/**\n * Get scale min max and related info only depends on model settings.\n * This method can be called after coordinate system created.\n * For example, in data processing stage.\n *\n * Scale extent info probably be required multiple times during a workflow.\n * For example:\n * (1) `dataZoom` depends it to get the axis extent in \"100%\" state.\n * (2) `processor/extentCalculator` depends it to make sure whether axis extent is specified.\n * (3) `coordSys.update` use it to finally decide the scale extent.\n * But the callback of `min`/`max` should not be called multiple times.\n * The code below should not be implemented repeatedly either.\n * So we cache the result in the scale instance, which will be recreated at the begining\n * of the workflow (because `scale` instance will be recreated each round of the workflow).\n */\n\nexport function ensureScaleRawExtentInfo(scale, model, // Usually: data extent from all series on this axis.\noriginalExtent) {\n  // Do not permit to recreate.\n  var rawExtentInfo = scale.rawExtentInfo;\n\n  if (rawExtentInfo) {\n    return rawExtentInfo;\n  }\n\n  rawExtentInfo = new ScaleRawExtentInfo(scale, model, originalExtent); // @ts-ignore\n\n  scale.rawExtentInfo = rawExtentInfo;\n  return rawExtentInfo;\n}\nexport function parseAxisModelMinMax(scale, minMax) {\n  return minMax == null ? null : eqNaN(minMax) ? NaN : scale.parse(minMax);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport OrdinalScale from '../scale/Ordinal.js';\nimport IntervalScale from '../scale/Interval.js';\nimport Scale from '../scale/Scale.js';\nimport { prepareLayoutBarSeries, makeColumnLayout, retrieveColumnLayout } from '../layout/barGrid.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport TimeScale from '../scale/Time.js';\nimport LogScale from '../scale/Log.js';\nimport { getStackedDimension } from '../data/helper/dataStackHelper.js';\nimport { ensureScaleRawExtentInfo } from './scaleRawExtentInfo.js';\n/**\n * Get axis scale extent before niced.\n * Item of returned array can only be number (including Infinity and NaN).\n *\n * Caution:\n * Precondition of calling this method:\n * The scale extent has been initialized using series data extent via\n * `scale.setExtent` or `scale.unionExtentFromData`;\n */\n\nexport function getScaleExtent(scale, model) {\n  var scaleType = scale.type;\n  var rawExtentResult = ensureScaleRawExtentInfo(scale, model, scale.getExtent()).calculate();\n  scale.setBlank(rawExtentResult.isBlank);\n  var min = rawExtentResult.min;\n  var max = rawExtentResult.max; // If bars are placed on a base axis of type time or interval account for axis boundary overflow and current axis\n  // is base axis\n  // FIXME\n  // (1) Consider support value axis, where below zero and axis `onZero` should be handled properly.\n  // (2) Refactor the logic with `barGrid`. Is it not need to `makeBarWidthAndOffsetInfo` twice with different extent?\n  //     Should not depend on series type `bar`?\n  // (3) Fix that might overlap when using dataZoom.\n  // (4) Consider other chart types using `barGrid`?\n  // See #6728, #4862, `test/bar-overflow-time-plot.html`\n\n  var ecModel = model.ecModel;\n\n  if (ecModel && scaleType === 'time'\n  /*|| scaleType === 'interval' */\n  ) {\n    var barSeriesModels = prepareLayoutBarSeries('bar', ecModel);\n    var isBaseAxisAndHasBarSeries_1 = false;\n    zrUtil.each(barSeriesModels, function (seriesModel) {\n      isBaseAxisAndHasBarSeries_1 = isBaseAxisAndHasBarSeries_1 || seriesModel.getBaseAxis() === model.axis;\n    });\n\n    if (isBaseAxisAndHasBarSeries_1) {\n      // Calculate placement of bars on axis. TODO should be decoupled\n      // with barLayout\n      var barWidthAndOffset = makeColumnLayout(barSeriesModels); // Adjust axis min and max to account for overflow\n\n      var adjustedScale = adjustScaleForOverflow(min, max, model, barWidthAndOffset);\n      min = adjustedScale.min;\n      max = adjustedScale.max;\n    }\n  }\n\n  return {\n    extent: [min, max],\n    // \"fix\" means \"fixed\", the value should not be\n    // changed in the subsequent steps.\n    fixMin: rawExtentResult.minFixed,\n    fixMax: rawExtentResult.maxFixed\n  };\n}\n\nfunction adjustScaleForOverflow(min, max, model, // Only support cartesian coord yet.\nbarWidthAndOffset) {\n  // Get Axis Length\n  var axisExtent = model.axis.getExtent();\n  var axisLength = axisExtent[1] - axisExtent[0]; // Get bars on current base axis and calculate min and max overflow\n\n  var barsOnCurrentAxis = retrieveColumnLayout(barWidthAndOffset, model.axis);\n\n  if (barsOnCurrentAxis === undefined) {\n    return {\n      min: min,\n      max: max\n    };\n  }\n\n  var minOverflow = Infinity;\n  zrUtil.each(barsOnCurrentAxis, function (item) {\n    minOverflow = Math.min(item.offset, minOverflow);\n  });\n  var maxOverflow = -Infinity;\n  zrUtil.each(barsOnCurrentAxis, function (item) {\n    maxOverflow = Math.max(item.offset + item.width, maxOverflow);\n  });\n  minOverflow = Math.abs(minOverflow);\n  maxOverflow = Math.abs(maxOverflow);\n  var totalOverFlow = minOverflow + maxOverflow; // Calculate required buffer based on old range and overflow\n\n  var oldRange = max - min;\n  var oldRangePercentOfNew = 1 - (minOverflow + maxOverflow) / axisLength;\n  var overflowBuffer = oldRange / oldRangePercentOfNew - oldRange;\n  max += overflowBuffer * (maxOverflow / totalOverFlow);\n  min -= overflowBuffer * (minOverflow / totalOverFlow);\n  return {\n    min: min,\n    max: max\n  };\n} // Precondition of calling this method:\n// The scale extent has been initailized using series data extent via\n// `scale.setExtent` or `scale.unionExtentFromData`;\n\n\nexport function niceScaleExtent(scale, inModel) {\n  var model = inModel;\n  var extentInfo = getScaleExtent(scale, model);\n  var extent = extentInfo.extent;\n  var splitNumber = model.get('splitNumber');\n\n  if (scale instanceof LogScale) {\n    scale.base = model.get('logBase');\n  }\n\n  var scaleType = scale.type;\n  var interval = model.get('interval');\n  var isIntervalOrTime = scaleType === 'interval' || scaleType === 'time';\n  scale.setExtent(extent[0], extent[1]);\n  scale.calcNiceExtent({\n    splitNumber: splitNumber,\n    fixMin: extentInfo.fixMin,\n    fixMax: extentInfo.fixMax,\n    minInterval: isIntervalOrTime ? model.get('minInterval') : null,\n    maxInterval: isIntervalOrTime ? model.get('maxInterval') : null\n  }); // If some one specified the min, max. And the default calculated interval\n  // is not good enough. He can specify the interval. It is often appeared\n  // in angle axis with angle 0 - 360. Interval calculated in interval scale is hard\n  // to be 60.\n  // FIXME\n\n  if (interval != null) {\n    scale.setInterval && scale.setInterval(interval);\n  }\n}\n/**\n * @param axisType Default retrieve from model.type\n */\n\nexport function createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale({\n          ordinalMeta: model.getOrdinalMeta ? model.getOrdinalMeta() : model.getCategories(),\n          extent: [Infinity, -Infinity]\n        });\n\n      case 'time':\n        return new TimeScale({\n          locale: model.ecModel.getLocaleModel(),\n          useUTC: model.ecModel.get('useUTC')\n        });\n\n      default:\n        // case 'value'/'interval', 'log', or others.\n        return new (Scale.getClass(axisType) || IntervalScale)();\n    }\n  }\n}\n/**\n * Check if the axis cross 0\n */\n\nexport function ifAxisCrossZero(axis) {\n  var dataExtent = axis.scale.getExtent();\n  var min = dataExtent[0];\n  var max = dataExtent[1];\n  return !(min > 0 && max > 0 || min < 0 && max < 0);\n}\n/**\n * @param axis\n * @return Label formatter function.\n *         param: {number} tickValue,\n *         param: {number} idx, the index in all ticks.\n *                         If category axis, this param is not required.\n *         return: {string} label string.\n */\n\nexport function makeLabelFormatter(axis) {\n  var labelFormatter = axis.getLabelModel().get('formatter');\n  var categoryTickStart = axis.type === 'category' ? axis.scale.getExtent()[0] : null;\n\n  if (axis.scale.type === 'time') {\n    return function (tpl) {\n      return function (tick, idx) {\n        return axis.scale.getFormattedLabel(tick, idx, tpl);\n      };\n    }(labelFormatter);\n  } else if (zrUtil.isString(labelFormatter)) {\n    return function (tpl) {\n      return function (tick) {\n        // For category axis, get raw value; for numeric axis,\n        // get formatted label like '1,333,444'.\n        var label = axis.scale.getLabel(tick);\n        var text = tpl.replace('{value}', label != null ? label : '');\n        return text;\n      };\n    }(labelFormatter);\n  } else if (zrUtil.isFunction(labelFormatter)) {\n    return function (cb) {\n      return function (tick, idx) {\n        // The original intention of `idx` is \"the index of the tick in all ticks\".\n        // But the previous implementation of category axis do not consider the\n        // `axisLabel.interval`, which cause that, for example, the `interval` is\n        // `1`, then the ticks \"name5\", \"name7\", \"name9\" are displayed, where the\n        // corresponding `idx` are `0`, `2`, `4`, but not `0`, `1`, `2`. So we keep\n        // the definition here for back compatibility.\n        if (categoryTickStart != null) {\n          idx = tick.value - categoryTickStart;\n        }\n\n        return cb(getAxisRawValue(axis, tick), idx, tick.level != null ? {\n          level: tick.level\n        } : null);\n      };\n    }(labelFormatter);\n  } else {\n    return function (tick) {\n      return axis.scale.getLabel(tick);\n    };\n  }\n}\nexport function getAxisRawValue(axis, tick) {\n  // In category axis with data zoom, tick is not the original\n  // index of axis.data. So tick should not be exposed to user\n  // in category axis.\n  return axis.type === 'category' ? axis.scale.getLabel(tick) : tick.value;\n}\n/**\n * @param axis\n * @return Be null/undefined if no labels.\n */\n\nexport function estimateLabelUnionRect(axis) {\n  var axisModel = axis.model;\n  var scale = axis.scale;\n\n  if (!axisModel.get(['axisLabel', 'show']) || scale.isBlank()) {\n    return;\n  }\n\n  var realNumberScaleTicks;\n  var tickCount;\n  var categoryScaleExtent = scale.getExtent(); // Optimize for large category data, avoid call `getTicks()`.\n\n  if (scale instanceof OrdinalScale) {\n    tickCount = scale.count();\n  } else {\n    realNumberScaleTicks = scale.getTicks();\n    tickCount = realNumberScaleTicks.length;\n  }\n\n  var axisLabelModel = axis.getLabelModel();\n  var labelFormatter = makeLabelFormatter(axis);\n  var rect;\n  var step = 1; // Simple optimization for large amount of labels\n\n  if (tickCount > 40) {\n    step = Math.ceil(tickCount / 40);\n  }\n\n  for (var i = 0; i < tickCount; i += step) {\n    var tick = realNumberScaleTicks ? realNumberScaleTicks[i] : {\n      value: categoryScaleExtent[0] + i\n    };\n    var label = labelFormatter(tick, i);\n    var unrotatedSingleRect = axisLabelModel.getTextRect(label);\n    var singleRect = rotateTextRect(unrotatedSingleRect, axisLabelModel.get('rotate') || 0);\n    rect ? rect.union(singleRect) : rect = singleRect;\n  }\n\n  return rect;\n}\n\nfunction rotateTextRect(textRect, rotate) {\n  var rotateRadians = rotate * Math.PI / 180;\n  var beforeWidth = textRect.width;\n  var beforeHeight = textRect.height;\n  var afterWidth = beforeWidth * Math.abs(Math.cos(rotateRadians)) + Math.abs(beforeHeight * Math.sin(rotateRadians));\n  var afterHeight = beforeWidth * Math.abs(Math.sin(rotateRadians)) + Math.abs(beforeHeight * Math.cos(rotateRadians));\n  var rotatedRect = new BoundingRect(textRect.x, textRect.y, afterWidth, afterHeight);\n  return rotatedRect;\n}\n/**\n * @param model axisLabelModel or axisTickModel\n * @return {number|String} Can be null|'auto'|number|function\n */\n\n\nexport function getOptionCategoryInterval(model) {\n  var interval = model.get('interval');\n  return interval == null ? 'auto' : interval;\n}\n/**\n * Set `categoryInterval` as 0 implicitly indicates that\n * show all labels reguardless of overlap.\n * @param {Object} axis axisModel.axis\n */\n\nexport function shouldShowAllLabels(axis) {\n  return axis.type === 'category' && getOptionCategoryInterval(axis.getLabelModel()) === 0;\n}\nexport function getDataDimensionsOnAxis(data, axisDim) {\n  // Remove duplicated dat dimensions caused by `getStackedDimension`.\n  var dataDimMap = {}; // Currently `mapDimensionsAll` will contain stack result dimension ('__\\0ecstackresult').\n  // PENDING: is it reasonable? Do we need to remove the original dim from \"coord dim\" since\n  // there has been stacked result dim?\n\n  zrUtil.each(data.mapDimensionsAll(axisDim), function (dataDim) {\n    // For example, the extent of the original dimension\n    // is [0.1, 0.5], the extent of the `stackResultDimension`\n    // is [7, 9], the final extent should NOT include [0.1, 0.5],\n    // because there is no graphic corresponding to [0.1, 0.5].\n    // See the case in `test/area-stack.html` `main1`, where area line\n    // stack needs `yAxis` not start from 0.\n    dataDimMap[getStackedDimension(data, dataDim)] = true;\n  });\n  return zrUtil.keys(dataDimMap);\n}\nexport function unionAxisExtentFromData(dataExtent, data, axisDim) {\n  if (data) {\n    zrUtil.each(getDataDimensionsOnAxis(data, axisDim), function (dim) {\n      var seriesExtent = data.getApproximateExtent(dim);\n      seriesExtent[0] < dataExtent[0] && (dataExtent[0] = seriesExtent[0]);\n      seriesExtent[1] > dataExtent[1] && (dataExtent[1] = seriesExtent[1]);\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\n/**\n * Can only be called after coordinate system creation stage.\n * (Can be called before coordinate system update stage).\n */\n\nexport function layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  } // Axis position\n\n\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]]; // Axis rotation\n\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1); // Tick and label direction, x y is axisDim\n\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n\n  if (axisModel.get(['axisTick', 'inside'])) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n    layout.labelDirection = -layout.labelDirection;\n  } // Special label rotation\n\n\n  var labelRotate = axisModel.get(['axisLabel', 'rotate']);\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate; // Over splitLine and splitArea\n\n  layout.z2 = 1;\n  return layout;\n}\nexport function isCartesian2DSeries(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\nexport function findAxisModels(seriesModel) {\n  var axisModelMap = {\n    xAxisModel: null,\n    yAxisModel: null\n  };\n  zrUtil.each(axisModelMap, function (v, key) {\n    var axisType = key.replace(/Model$/, '');\n    var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!axisModel) {\n        throw new Error(axisType + ' \"' + zrUtil.retrieve3(seriesModel.get(axisType + 'Index'), seriesModel.get(axisType + 'Id'), 0) + '\" not found');\n      }\n    }\n\n    axisModelMap[key] = axisModel;\n  });\n  return axisModelMap;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar coordinateSystemCreators = {};\n\nvar CoordinateSystemManager =\n/** @class */\nfunction () {\n  function CoordinateSystemManager() {\n    this._coordinateSystems = [];\n  }\n\n  CoordinateSystemManager.prototype.create = function (ecModel, api) {\n    var coordinateSystems = [];\n    zrUtil.each(coordinateSystemCreators, function (creater, type) {\n      var list = creater.create(ecModel, api);\n      coordinateSystems = coordinateSystems.concat(list || []);\n    });\n    this._coordinateSystems = coordinateSystems;\n  };\n\n  CoordinateSystemManager.prototype.update = function (ecModel, api) {\n    zrUtil.each(this._coordinateSystems, function (coordSys) {\n      coordSys.update && coordSys.update(ecModel, api);\n    });\n  };\n\n  CoordinateSystemManager.prototype.getCoordinateSystems = function () {\n    return this._coordinateSystems.slice();\n  };\n\n  CoordinateSystemManager.register = function (type, creator) {\n    coordinateSystemCreators[type] = creator;\n  };\n\n  CoordinateSystemManager.get = function (type) {\n    return coordinateSystemCreators[type];\n  };\n\n  return CoordinateSystemManager;\n}();\n\nexport default CoordinateSystemManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar platform = ''; // Navigator not exists in node\n\nif (typeof navigator !== 'undefined') {\n  /* global navigator */\n  platform = navigator.platform || '';\n}\n\nvar decalColor = 'rgba(0, 0, 0, 0.2)';\nexport default {\n  darkMode: 'auto',\n  // backgroundColor: 'rgba(0,0,0,0)',\n  colorBy: 'series',\n  color: ['#5470c6', '#91cc75', '#fac858', '#ee6666', '#73c0de', '#3ba272', '#fc8452', '#9a60b4', '#ea7ccc'],\n  gradientColor: ['#f6efa6', '#d88273', '#bf444c'],\n  aria: {\n    decal: {\n      decals: [{\n        color: decalColor,\n        dashArrayX: [1, 0],\n        dashArrayY: [2, 5],\n        symbolSize: 1,\n        rotation: Math.PI / 6\n      }, {\n        color: decalColor,\n        symbol: 'circle',\n        dashArrayX: [[8, 8], [0, 8, 8, 0]],\n        dashArrayY: [6, 0],\n        symbolSize: 0.8\n      }, {\n        color: decalColor,\n        dashArrayX: [1, 0],\n        dashArrayY: [4, 3],\n        rotation: -Math.PI / 4\n      }, {\n        color: decalColor,\n        dashArrayX: [[6, 6], [0, 6, 6, 0]],\n        dashArrayY: [6, 0]\n      }, {\n        color: decalColor,\n        dashArrayX: [[1, 0], [1, 6]],\n        dashArrayY: [1, 0, 6, 0],\n        rotation: Math.PI / 4\n      }, {\n        color: decalColor,\n        symbol: 'triangle',\n        dashArrayX: [[9, 9], [0, 9, 9, 0]],\n        dashArrayY: [7, 2],\n        symbolSize: 0.75\n      }]\n    }\n  },\n  // If xAxis and yAxis declared, grid is created by default.\n  // grid: {},\n  textStyle: {\n    // color: '#000',\n    // decoration: 'none',\n    // PENDING\n    fontFamily: platform.match(/^Win/) ? 'Microsoft YaHei' : 'sans-serif',\n    // fontFamily: 'Arial, Verdana, sans-serif',\n    fontSize: 12,\n    fontStyle: 'normal',\n    fontWeight: 'normal'\n  },\n  // http://blogs.adobe.com/webplatform/2014/02/24/using-blend-modes-in-html-canvas/\n  // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n  // Default is source-over\n  blendMode: null,\n  stateAnimation: {\n    duration: 300,\n    easing: 'cubicOut'\n  },\n  animation: 'auto',\n  animationDuration: 1000,\n  animationDurationUpdate: 500,\n  animationEasing: 'cubicInOut',\n  animationEasingUpdate: 'cubicInOut',\n  animationThreshold: 2000,\n  // Configuration for progressive/incremental rendering\n  progressiveThreshold: 3000,\n  progressive: 400,\n  // Threshold of if use single hover layer to optimize.\n  // It is recommended that `hoverLayerThreshold` is equivalent to or less than\n  // `progressiveThreshold`, otherwise hover will cause restart of progressive,\n  // which is unexpected.\n  // see example <echarts/test/heatmap-large.html>.\n  hoverLayerThreshold: 3000,\n  // See: module:echarts/scale/Time\n  useUTC: false\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, assert } from 'zrender/lib/core/util.js';\nimport { isComponentIdInternal } from '../util/model.js';\nvar internalOptionCreatorMap = createHashMap();\nexport function registerInternalOptionCreator(mainType, creator) {\n  assert(internalOptionCreatorMap.get(mainType) == null && creator);\n  internalOptionCreatorMap.set(mainType, creator);\n}\nexport function concatInternalOptions(ecModel, mainType, newCmptOptionList) {\n  var internalOptionCreator = internalOptionCreatorMap.get(mainType);\n\n  if (!internalOptionCreator) {\n    return newCmptOptionList;\n  }\n\n  var internalOptions = internalOptionCreator(ecModel);\n\n  if (!internalOptions) {\n    return newCmptOptionList;\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    for (var i = 0; i < internalOptions.length; i++) {\n      assert(isComponentIdInternal(internalOptions[i]));\n    }\n  }\n\n  return newCmptOptionList.concat(internalOptions);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Caution: If the mechanism should be changed some day, these cases\n * should be considered:\n *\n * (1) In `merge option` mode, if using the same option to call `setOption`\n * many times, the result should be the same (try our best to ensure that).\n * (2) In `merge option` mode, if a component has no id/name specified, it\n * will be merged by index, and the result sequence of the components is\n * consistent to the original sequence.\n * (3) In `replaceMerge` mode, keep the result sequence of the components is\n * consistent to the original sequence, even though there might result in \"hole\".\n * (4) `reset` feature (in toolbox). Find detailed info in comments about\n * `mergeOption` in module:echarts/model/OptionManager.\n */\n\nimport { each, filter, isArray, isObject, isString, createHashMap, assert, clone, merge, extend, mixin, isFunction } from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../util/model.js';\nimport Model from './Model.js';\nimport ComponentModel from './Component.js';\nimport globalDefault from './globalDefault.js';\nimport { resetSourceDefaulter } from '../data/helper/sourceHelper.js';\nimport { concatInternalOptions } from './internalComponentCreator.js';\nimport { PaletteMixin } from './mixin/palette.js';\nimport { error, warn } from '../util/log.js'; // -----------------------\n// Internal method names:\n// -----------------------\n\nvar reCreateSeriesIndices;\nvar assertSeriesInitialized;\nvar initBase;\nvar OPTION_INNER_KEY = '\\0_ec_inner';\nvar OPTION_INNER_VALUE = 1;\nvar BUITIN_COMPONENTS_MAP = {\n  grid: 'GridComponent',\n  polar: 'PolarComponent',\n  geo: 'GeoComponent',\n  singleAxis: 'SingleAxisComponent',\n  parallel: 'ParallelComponent',\n  calendar: 'CalendarComponent',\n  graphic: 'GraphicComponent',\n  toolbox: 'ToolboxComponent',\n  tooltip: 'TooltipComponent',\n  axisPointer: 'AxisPointerComponent',\n  brush: 'BrushComponent',\n  title: 'TitleComponent',\n  timeline: 'TimelineComponent',\n  markPoint: 'MarkPointComponent',\n  markLine: 'MarkLineComponent',\n  markArea: 'MarkAreaComponent',\n  legend: 'LegendComponent',\n  dataZoom: 'DataZoomComponent',\n  visualMap: 'VisualMapComponent',\n  // aria: 'AriaComponent',\n  // dataset: 'DatasetComponent',\n  // Dependencies\n  xAxis: 'GridComponent',\n  yAxis: 'GridComponent',\n  angleAxis: 'PolarComponent',\n  radiusAxis: 'PolarComponent'\n};\nvar BUILTIN_CHARTS_MAP = {\n  line: 'LineChart',\n  bar: 'BarChart',\n  pie: 'PieChart',\n  scatter: 'ScatterChart',\n  radar: 'RadarChart',\n  map: 'MapChart',\n  tree: 'TreeChart',\n  treemap: 'TreemapChart',\n  graph: 'GraphChart',\n  gauge: 'GaugeChart',\n  funnel: 'FunnelChart',\n  parallel: 'ParallelChart',\n  sankey: 'SankeyChart',\n  boxplot: 'BoxplotChart',\n  candlestick: 'CandlestickChart',\n  effectScatter: 'EffectScatterChart',\n  lines: 'LinesChart',\n  heatmap: 'HeatmapChart',\n  pictorialBar: 'PictorialBarChart',\n  themeRiver: 'ThemeRiverChart',\n  sunburst: 'SunburstChart',\n  custom: 'CustomChart'\n};\nvar componetsMissingLogPrinted = {};\n\nfunction checkMissingComponents(option) {\n  each(option, function (componentOption, mainType) {\n    if (!ComponentModel.hasClass(mainType)) {\n      var componentImportName = BUITIN_COMPONENTS_MAP[mainType];\n\n      if (componentImportName && !componetsMissingLogPrinted[componentImportName]) {\n        error(\"Component \" + mainType + \" is used but not imported.\\nimport { \" + componentImportName + \" } from 'echarts/components';\\necharts.use([\" + componentImportName + \"]);\");\n        componetsMissingLogPrinted[componentImportName] = true;\n      }\n    }\n  });\n}\n\nvar GlobalModel =\n/** @class */\nfunction (_super) {\n  __extends(GlobalModel, _super);\n\n  function GlobalModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  GlobalModel.prototype.init = function (option, parentModel, ecModel, theme, locale, optionManager) {\n    theme = theme || {};\n    this.option = null; // Mark as not initialized.\n\n    this._theme = new Model(theme);\n    this._locale = new Model(locale);\n    this._optionManager = optionManager;\n  };\n\n  GlobalModel.prototype.setOption = function (option, opts, optionPreprocessorFuncs) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(option != null, 'option is null/undefined');\n      assert(option[OPTION_INNER_KEY] !== OPTION_INNER_VALUE, 'please use chart.getOption()');\n    }\n\n    var innerOpt = normalizeSetOptionInput(opts);\n\n    this._optionManager.setOption(option, optionPreprocessorFuncs, innerOpt);\n\n    this._resetOption(null, innerOpt);\n  };\n  /**\n   * @param type null/undefined: reset all.\n   *        'recreate': force recreate all.\n   *        'timeline': only reset timeline option\n   *        'media': only reset media query option\n   * @return Whether option changed.\n   */\n\n\n  GlobalModel.prototype.resetOption = function (type, opt) {\n    return this._resetOption(type, normalizeSetOptionInput(opt));\n  };\n\n  GlobalModel.prototype._resetOption = function (type, opt) {\n    var optionChanged = false;\n    var optionManager = this._optionManager;\n\n    if (!type || type === 'recreate') {\n      var baseOption = optionManager.mountOption(type === 'recreate');\n\n      if (process.env.NODE_ENV !== 'production') {\n        checkMissingComponents(baseOption);\n      }\n\n      if (!this.option || type === 'recreate') {\n        initBase(this, baseOption);\n      } else {\n        this.restoreData();\n\n        this._mergeOption(baseOption, opt);\n      }\n\n      optionChanged = true;\n    }\n\n    if (type === 'timeline' || type === 'media') {\n      this.restoreData();\n    } // By design, if `setOption(option2)` at the second time, and `option2` is a `ECUnitOption`,\n    // it should better not have the same props with `MediaUnit['option']`.\n    // Becuase either `option2` or `MediaUnit['option']` will be always merged to \"current option\"\n    // rather than original \"baseOption\". If they both override a prop, the result might be\n    // unexpected when media state changed after `setOption` called.\n    // If we really need to modify a props in each `MediaUnit['option']`, use the full version\n    // (`{baseOption, media}`) in `setOption`.\n    // For `timeline`, the case is the same.\n\n\n    if (!type || type === 'recreate' || type === 'timeline') {\n      var timelineOption = optionManager.getTimelineOption(this);\n\n      if (timelineOption) {\n        optionChanged = true;\n\n        this._mergeOption(timelineOption, opt);\n      }\n    }\n\n    if (!type || type === 'recreate' || type === 'media') {\n      var mediaOptions = optionManager.getMediaOption(this);\n\n      if (mediaOptions.length) {\n        each(mediaOptions, function (mediaOption) {\n          optionChanged = true;\n\n          this._mergeOption(mediaOption, opt);\n        }, this);\n      }\n    }\n\n    return optionChanged;\n  };\n\n  GlobalModel.prototype.mergeOption = function (option) {\n    this._mergeOption(option, null);\n  };\n\n  GlobalModel.prototype._mergeOption = function (newOption, opt) {\n    var option = this.option;\n    var componentsMap = this._componentsMap;\n    var componentsCount = this._componentsCount;\n    var newCmptTypes = [];\n    var newCmptTypeMap = createHashMap();\n    var replaceMergeMainTypeMap = opt && opt.replaceMergeMainTypeMap;\n    resetSourceDefaulter(this); // If no component class, merge directly.\n    // For example: color, animaiton options, etc.\n\n    each(newOption, function (componentOption, mainType) {\n      if (componentOption == null) {\n        return;\n      }\n\n      if (!ComponentModel.hasClass(mainType)) {\n        // globalSettingTask.dirty();\n        option[mainType] = option[mainType] == null ? clone(componentOption) : merge(option[mainType], componentOption, true);\n      } else if (mainType) {\n        newCmptTypes.push(mainType);\n        newCmptTypeMap.set(mainType, true);\n      }\n    });\n\n    if (replaceMergeMainTypeMap) {\n      // If there is a mainType `xxx` in `replaceMerge` but not declared in option,\n      // we trade it as it is declared in option as `{xxx: []}`. Because:\n      // (1) for normal merge, `{xxx: null/undefined}` are the same meaning as `{xxx: []}`.\n      // (2) some preprocessor may convert some of `{xxx: null/undefined}` to `{xxx: []}`.\n      replaceMergeMainTypeMap.each(function (val, mainTypeInReplaceMerge) {\n        if (ComponentModel.hasClass(mainTypeInReplaceMerge) && !newCmptTypeMap.get(mainTypeInReplaceMerge)) {\n          newCmptTypes.push(mainTypeInReplaceMerge);\n          newCmptTypeMap.set(mainTypeInReplaceMerge, true);\n        }\n      });\n    }\n\n    ComponentModel.topologicalTravel(newCmptTypes, ComponentModel.getAllClassMainTypes(), visitComponent, this);\n\n    function visitComponent(mainType) {\n      var newCmptOptionList = concatInternalOptions(this, mainType, modelUtil.normalizeToArray(newOption[mainType]));\n      var oldCmptList = componentsMap.get(mainType);\n      var mergeMode = // `!oldCmptList` means init. See the comment in `mappingToExists`\n      !oldCmptList ? 'replaceAll' : replaceMergeMainTypeMap && replaceMergeMainTypeMap.get(mainType) ? 'replaceMerge' : 'normalMerge';\n      var mappingResult = modelUtil.mappingToExists(oldCmptList, newCmptOptionList, mergeMode); // Set mainType and complete subType.\n\n      modelUtil.setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel); // Empty it before the travel, in order to prevent `this._componentsMap`\n      // from being used in the `init`/`mergeOption`/`optionUpdated` of some\n      // components, which is probably incorrect logic.\n\n      option[mainType] = null;\n      componentsMap.set(mainType, null);\n      componentsCount.set(mainType, 0);\n      var optionsByMainType = [];\n      var cmptsByMainType = [];\n      var cmptsCountByMainType = 0;\n      var tooltipExists;\n      var tooltipWarningLogged;\n      each(mappingResult, function (resultItem, index) {\n        var componentModel = resultItem.existing;\n        var newCmptOption = resultItem.newOption;\n\n        if (!newCmptOption) {\n          if (componentModel) {\n            // Consider where is no new option and should be merged using {},\n            // see removeEdgeAndAdd in topologicalTravel and\n            // ComponentModel.getAllClassMainTypes.\n            componentModel.mergeOption({}, this);\n            componentModel.optionUpdated({}, false);\n          } // If no both `resultItem.exist` and `resultItem.option`,\n          // either it is in `replaceMerge` and not matched by any id,\n          // or it has been removed in previous `replaceMerge` and left a \"hole\" in this component index.\n\n        } else {\n          var isSeriesType = mainType === 'series';\n          var ComponentModelClass = ComponentModel.getClass(mainType, resultItem.keyInfo.subType, !isSeriesType // Give a more detailed warn later if series don't exists\n          );\n\n          if (!ComponentModelClass) {\n            if (process.env.NODE_ENV !== 'production') {\n              var subType = resultItem.keyInfo.subType;\n              var seriesImportName = BUILTIN_CHARTS_MAP[subType];\n\n              if (!componetsMissingLogPrinted[subType]) {\n                componetsMissingLogPrinted[subType] = true;\n\n                if (seriesImportName) {\n                  error(\"Series \" + subType + \" is used but not imported.\\nimport { \" + seriesImportName + \" } from 'echarts/charts';\\necharts.use([\" + seriesImportName + \"]);\");\n                } else {\n                  error(\"Unkown series \" + subType);\n                }\n              }\n            }\n\n            return;\n          } // TODO Before multiple tooltips get supported, we do this check to avoid unexpected exception.\n\n\n          if (mainType === 'tooltip') {\n            if (tooltipExists) {\n              if (process.env.NODE_ENV !== 'production') {\n                if (!tooltipWarningLogged) {\n                  warn('Currently only one tooltip component is allowed.');\n                  tooltipWarningLogged = true;\n                }\n              }\n\n              return;\n            }\n\n            tooltipExists = true;\n          }\n\n          if (componentModel && componentModel.constructor === ComponentModelClass) {\n            componentModel.name = resultItem.keyInfo.name; // componentModel.settingTask && componentModel.settingTask.dirty();\n\n            componentModel.mergeOption(newCmptOption, this);\n            componentModel.optionUpdated(newCmptOption, false);\n          } else {\n            // PENDING Global as parent ?\n            var extraOpt = extend({\n              componentIndex: index\n            }, resultItem.keyInfo);\n            componentModel = new ComponentModelClass(newCmptOption, this, this, extraOpt); // Assign `keyInfo`\n\n            extend(componentModel, extraOpt);\n\n            if (resultItem.brandNew) {\n              componentModel.__requireNewView = true;\n            }\n\n            componentModel.init(newCmptOption, this, this); // Call optionUpdated after init.\n            // newCmptOption has been used as componentModel.option\n            // and may be merged with theme and default, so pass null\n            // to avoid confusion.\n\n            componentModel.optionUpdated(null, true);\n          }\n        }\n\n        if (componentModel) {\n          optionsByMainType.push(componentModel.option);\n          cmptsByMainType.push(componentModel);\n          cmptsCountByMainType++;\n        } else {\n          // Always do assign to avoid elided item in array.\n          optionsByMainType.push(void 0);\n          cmptsByMainType.push(void 0);\n        }\n      }, this);\n      option[mainType] = optionsByMainType;\n      componentsMap.set(mainType, cmptsByMainType);\n      componentsCount.set(mainType, cmptsCountByMainType); // Backup series for filtering.\n\n      if (mainType === 'series') {\n        reCreateSeriesIndices(this);\n      }\n    } // If no series declared, ensure `_seriesIndices` initialized.\n\n\n    if (!this._seriesIndices) {\n      reCreateSeriesIndices(this);\n    }\n  };\n  /**\n   * Get option for output (cloned option and inner info removed)\n   */\n\n\n  GlobalModel.prototype.getOption = function () {\n    var option = clone(this.option);\n    each(option, function (optInMainType, mainType) {\n      if (ComponentModel.hasClass(mainType)) {\n        var opts = modelUtil.normalizeToArray(optInMainType); // Inner cmpts need to be removed.\n        // Inner cmpts might not be at last since ec5.0, but still\n        // compatible for users: if inner cmpt at last, splice the returned array.\n\n        var realLen = opts.length;\n        var metNonInner = false;\n\n        for (var i = realLen - 1; i >= 0; i--) {\n          // Remove options with inner id.\n          if (opts[i] && !modelUtil.isComponentIdInternal(opts[i])) {\n            metNonInner = true;\n          } else {\n            opts[i] = null;\n            !metNonInner && realLen--;\n          }\n        }\n\n        opts.length = realLen;\n        option[mainType] = opts;\n      }\n    });\n    delete option[OPTION_INNER_KEY];\n    return option;\n  };\n\n  GlobalModel.prototype.getTheme = function () {\n    return this._theme;\n  };\n\n  GlobalModel.prototype.getLocaleModel = function () {\n    return this._locale;\n  };\n\n  GlobalModel.prototype.setUpdatePayload = function (payload) {\n    this._payload = payload;\n  };\n\n  GlobalModel.prototype.getUpdatePayload = function () {\n    return this._payload;\n  };\n  /**\n   * @param idx If not specified, return the first one.\n   */\n\n\n  GlobalModel.prototype.getComponent = function (mainType, idx) {\n    var list = this._componentsMap.get(mainType);\n\n    if (list) {\n      var cmpt = list[idx || 0];\n\n      if (cmpt) {\n        return cmpt;\n      } else if (idx == null) {\n        for (var i = 0; i < list.length; i++) {\n          if (list[i]) {\n            return list[i];\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @return Never be null/undefined.\n   */\n\n\n  GlobalModel.prototype.queryComponents = function (condition) {\n    var mainType = condition.mainType;\n\n    if (!mainType) {\n      return [];\n    }\n\n    var index = condition.index;\n    var id = condition.id;\n    var name = condition.name;\n\n    var cmpts = this._componentsMap.get(mainType);\n\n    if (!cmpts || !cmpts.length) {\n      return [];\n    }\n\n    var result;\n\n    if (index != null) {\n      result = [];\n      each(modelUtil.normalizeToArray(index), function (idx) {\n        cmpts[idx] && result.push(cmpts[idx]);\n      });\n    } else if (id != null) {\n      result = queryByIdOrName('id', id, cmpts);\n    } else if (name != null) {\n      result = queryByIdOrName('name', name, cmpts);\n    } else {\n      // Return all non-empty components in that mainType\n      result = filter(cmpts, function (cmpt) {\n        return !!cmpt;\n      });\n    }\n\n    return filterBySubType(result, condition);\n  };\n  /**\n   * The interface is different from queryComponents,\n   * which is convenient for inner usage.\n   *\n   * @usage\n   * let result = findComponents(\n   *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}}\n   * );\n   * let result = findComponents(\n   *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}}\n   * );\n   * let result = findComponents(\n   *     {mainType: 'series',\n   *     filter: function (model, index) {...}}\n   * );\n   * // result like [component0, componnet1, ...]\n   */\n\n\n  GlobalModel.prototype.findComponents = function (condition) {\n    var query = condition.query;\n    var mainType = condition.mainType;\n    var queryCond = getQueryCond(query);\n    var result = queryCond ? this.queryComponents(queryCond) // Retrieve all non-empty components.\n    : filter(this._componentsMap.get(mainType), function (cmpt) {\n      return !!cmpt;\n    });\n    return doFilter(filterBySubType(result, condition));\n\n    function getQueryCond(q) {\n      var indexAttr = mainType + 'Index';\n      var idAttr = mainType + 'Id';\n      var nameAttr = mainType + 'Name';\n      return q && (q[indexAttr] != null || q[idAttr] != null || q[nameAttr] != null) ? {\n        mainType: mainType,\n        // subType will be filtered finally.\n        index: q[indexAttr],\n        id: q[idAttr],\n        name: q[nameAttr]\n      } : null;\n    }\n\n    function doFilter(res) {\n      return condition.filter ? filter(res, condition.filter) : res;\n    }\n  };\n\n  GlobalModel.prototype.eachComponent = function (mainType, cb, context) {\n    var componentsMap = this._componentsMap;\n\n    if (isFunction(mainType)) {\n      var ctxForAll_1 = cb;\n      var cbForAll_1 = mainType;\n      componentsMap.each(function (cmpts, componentType) {\n        for (var i = 0; cmpts && i < cmpts.length; i++) {\n          var cmpt = cmpts[i];\n          cmpt && cbForAll_1.call(ctxForAll_1, componentType, cmpt, cmpt.componentIndex);\n        }\n      });\n    } else {\n      var cmpts = isString(mainType) ? componentsMap.get(mainType) : isObject(mainType) ? this.findComponents(mainType) : null;\n\n      for (var i = 0; cmpts && i < cmpts.length; i++) {\n        var cmpt = cmpts[i];\n        cmpt && cb.call(context, cmpt, cmpt.componentIndex);\n      }\n    }\n  };\n  /**\n   * Get series list before filtered by name.\n   */\n\n\n  GlobalModel.prototype.getSeriesByName = function (name) {\n    var nameStr = modelUtil.convertOptionIdName(name, null);\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\n      return !!oneSeries && nameStr != null && oneSeries.name === nameStr;\n    });\n  };\n  /**\n   * Get series list before filtered by index.\n   */\n\n\n  GlobalModel.prototype.getSeriesByIndex = function (seriesIndex) {\n    return this._componentsMap.get('series')[seriesIndex];\n  };\n  /**\n   * Get series list before filtered by type.\n   * FIXME: rename to getRawSeriesByType?\n   */\n\n\n  GlobalModel.prototype.getSeriesByType = function (subType) {\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\n      return !!oneSeries && oneSeries.subType === subType;\n    });\n  };\n  /**\n   * Get all series before filtered.\n   */\n\n\n  GlobalModel.prototype.getSeries = function () {\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\n      return !!oneSeries;\n    });\n  };\n  /**\n   * Count series before filtered.\n   */\n\n\n  GlobalModel.prototype.getSeriesCount = function () {\n    return this._componentsCount.get('series');\n  };\n  /**\n   * After filtering, series may be different\n   * frome raw series.\n   */\n\n\n  GlobalModel.prototype.eachSeries = function (cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n\n      cb.call(context, series, rawSeriesIndex);\n    }, this);\n  };\n  /**\n   * Iterate raw series before filtered.\n   *\n   * @param {Function} cb\n   * @param {*} context\n   */\n\n\n  GlobalModel.prototype.eachRawSeries = function (cb, context) {\n    each(this._componentsMap.get('series'), function (series) {\n      series && cb.call(context, series, series.componentIndex);\n    });\n  };\n  /**\n   * After filtering, series may be different.\n   * frome raw series.\n   */\n\n\n  GlobalModel.prototype.eachSeriesByType = function (subType, cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n\n      if (series.subType === subType) {\n        cb.call(context, series, rawSeriesIndex);\n      }\n    }, this);\n  };\n  /**\n   * Iterate raw series before filtered of given type.\n   */\n\n\n  GlobalModel.prototype.eachRawSeriesByType = function (subType, cb, context) {\n    return each(this.getSeriesByType(subType), cb, context);\n  };\n\n  GlobalModel.prototype.isSeriesFiltered = function (seriesModel) {\n    assertSeriesInitialized(this);\n    return this._seriesIndicesMap.get(seriesModel.componentIndex) == null;\n  };\n\n  GlobalModel.prototype.getCurrentSeriesIndices = function () {\n    return (this._seriesIndices || []).slice();\n  };\n\n  GlobalModel.prototype.filterSeries = function (cb, context) {\n    assertSeriesInitialized(this);\n    var newSeriesIndices = [];\n    each(this._seriesIndices, function (seriesRawIdx) {\n      var series = this._componentsMap.get('series')[seriesRawIdx];\n\n      cb.call(context, series, seriesRawIdx) && newSeriesIndices.push(seriesRawIdx);\n    }, this);\n    this._seriesIndices = newSeriesIndices;\n    this._seriesIndicesMap = createHashMap(newSeriesIndices);\n  };\n\n  GlobalModel.prototype.restoreData = function (payload) {\n    reCreateSeriesIndices(this);\n    var componentsMap = this._componentsMap;\n    var componentTypes = [];\n    componentsMap.each(function (components, componentType) {\n      if (ComponentModel.hasClass(componentType)) {\n        componentTypes.push(componentType);\n      }\n    });\n    ComponentModel.topologicalTravel(componentTypes, ComponentModel.getAllClassMainTypes(), function (componentType) {\n      each(componentsMap.get(componentType), function (component) {\n        if (component && (componentType !== 'series' || !isNotTargetSeries(component, payload))) {\n          component.restoreData();\n        }\n      });\n    });\n  };\n\n  GlobalModel.internalField = function () {\n    reCreateSeriesIndices = function (ecModel) {\n      var seriesIndices = ecModel._seriesIndices = [];\n      each(ecModel._componentsMap.get('series'), function (series) {\n        // series may have been removed by `replaceMerge`.\n        series && seriesIndices.push(series.componentIndex);\n      });\n      ecModel._seriesIndicesMap = createHashMap(seriesIndices);\n    };\n\n    assertSeriesInitialized = function (ecModel) {\n      // Components that use _seriesIndices should depends on series component,\n      // which make sure that their initialization is after series.\n      if (process.env.NODE_ENV !== 'production') {\n        if (!ecModel._seriesIndices) {\n          throw new Error('Option should contains series.');\n        }\n      }\n    };\n\n    initBase = function (ecModel, baseOption) {\n      // Using OPTION_INNER_KEY to mark that this option can not be used outside,\n      // i.e. `chart.setOption(chart.getModel().option);` is forbiden.\n      ecModel.option = {};\n      ecModel.option[OPTION_INNER_KEY] = OPTION_INNER_VALUE; // Init with series: [], in case of calling findSeries method\n      // before series initialized.\n\n      ecModel._componentsMap = createHashMap({\n        series: []\n      });\n      ecModel._componentsCount = createHashMap(); // If user spefied `option.aria`, aria will be enable. This detection should be\n      // performed before theme and globalDefault merge.\n\n      var airaOption = baseOption.aria;\n\n      if (isObject(airaOption) && airaOption.enabled == null) {\n        airaOption.enabled = true;\n      }\n\n      mergeTheme(baseOption, ecModel._theme.option); // TODO Needs clone when merging to the unexisted property\n\n      merge(baseOption, globalDefault, false);\n\n      ecModel._mergeOption(baseOption, null);\n    };\n  }();\n\n  return GlobalModel;\n}(Model);\n\nfunction isNotTargetSeries(seriesModel, payload) {\n  if (payload) {\n    var index = payload.seriesIndex;\n    var id = payload.seriesId;\n    var name_1 = payload.seriesName;\n    return index != null && seriesModel.componentIndex !== index || id != null && seriesModel.id !== id || name_1 != null && seriesModel.name !== name_1;\n  }\n}\n\nfunction mergeTheme(option, theme) {\n  // PENDING\n  // NOT use `colorLayer` in theme if option has `color`\n  var notMergeColorLayer = option.color && !option.colorLayer;\n  each(theme, function (themeItem, name) {\n    if (name === 'colorLayer' && notMergeColorLayer) {\n      return;\n    } // If it is component model mainType, the model handles that merge later.\n    // otherwise, merge them here.\n\n\n    if (!ComponentModel.hasClass(name)) {\n      if (typeof themeItem === 'object') {\n        option[name] = !option[name] ? clone(themeItem) : merge(option[name], themeItem, false);\n      } else {\n        if (option[name] == null) {\n          option[name] = themeItem;\n        }\n      }\n    }\n  });\n}\n\nfunction queryByIdOrName(attr, idOrName, cmpts) {\n  // Here is a break from echarts4: string and number are\n  // treated as equal.\n  if (isArray(idOrName)) {\n    var keyMap_1 = createHashMap();\n    each(idOrName, function (idOrNameItem) {\n      if (idOrNameItem != null) {\n        var idName = modelUtil.convertOptionIdName(idOrNameItem, null);\n        idName != null && keyMap_1.set(idOrNameItem, true);\n      }\n    });\n    return filter(cmpts, function (cmpt) {\n      return cmpt && keyMap_1.get(cmpt[attr]);\n    });\n  } else {\n    var idName_1 = modelUtil.convertOptionIdName(idOrName, null);\n    return filter(cmpts, function (cmpt) {\n      return cmpt && idName_1 != null && cmpt[attr] === idName_1;\n    });\n  }\n}\n\nfunction filterBySubType(components, condition) {\n  // Using hasOwnProperty for restrict. Consider\n  // subType is undefined in user payload.\n  return condition.hasOwnProperty('subType') ? filter(components, function (cmpt) {\n    return cmpt && cmpt.subType === condition.subType;\n  }) : components;\n}\n\nfunction normalizeSetOptionInput(opts) {\n  var replaceMergeMainTypeMap = createHashMap();\n  opts && each(modelUtil.normalizeToArray(opts.replaceMerge), function (mainType) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(ComponentModel.hasClass(mainType), '\"' + mainType + '\" is not valid component main type in \"replaceMerge\"');\n    }\n\n    replaceMergeMainTypeMap.set(mainType, true);\n  });\n  return {\n    replaceMergeMainTypeMap: replaceMergeMainTypeMap\n  };\n}\n\nmixin(GlobalModel, PaletteMixin);\nexport default GlobalModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar availableMethods = ['getDom', 'getZr', 'getWidth', 'getHeight', 'getDevicePixelRatio', 'dispatchAction', 'isSSR', 'isDisposed', 'on', 'off', 'getDataURL', 'getConnectedDataURL', // 'getModel',\n'getOption', // 'getViewOfComponentModel',\n// 'getViewOfSeriesModel',\n'getId', 'updateLabelLayout'];\n\nvar ExtensionAPI =\n/** @class */\nfunction () {\n  function ExtensionAPI(ecInstance) {\n    zrUtil.each(availableMethods, function (methodName) {\n      this[methodName] = zrUtil.bind(ecInstance[methodName], ecInstance);\n    }, this);\n  }\n\n  return ExtensionAPI;\n}();\n\nexport default ExtensionAPI;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { normalizeToArray // , MappingExistingItem, setComponentTypeToKeyInfo, mappingToExists\n} from '../util/model.js';\nimport { each, clone, map, isTypedArray, setAsPrimitive, isArray, isObject // , HashMap , createHashMap, extend, merge,\n} from 'zrender/lib/core/util.js';\nimport { error } from '../util/log.js';\nvar QUERY_REG = /^(min|max)?(.+)$/; // Key: mainType\n// type FakeComponentsMap = HashMap<(MappingExistingItem & { subType: string })[]>;\n\n/**\n * TERM EXPLANATIONS:\n * See `ECOption` and `ECUnitOption` in `src/util/types.ts`.\n */\n\nvar OptionManager =\n/** @class */\nfunction () {\n  // timeline.notMerge is not supported in ec3. Firstly there is rearly\n  // case that notMerge is needed. Secondly supporting 'notMerge' requires\n  // rawOption cloned and backuped when timeline changed, which does no\n  // good to performance. What's more, that both timeline and setOption\n  // method supply 'notMerge' brings complex and some problems.\n  // Consider this case:\n  // (step1) chart.setOption({timeline: {notMerge: false}, ...}, false);\n  // (step2) chart.setOption({timeline: {notMerge: true}, ...}, false);\n  function OptionManager(api) {\n    this._timelineOptions = [];\n    this._mediaList = [];\n    /**\n     * -1, means default.\n     * empty means no media.\n     */\n\n    this._currentMediaIndices = [];\n    this._api = api;\n  }\n\n  OptionManager.prototype.setOption = function (rawOption, optionPreprocessorFuncs, opt) {\n    if (rawOption) {\n      // That set dat primitive is dangerous if user reuse the data when setOption again.\n      each(normalizeToArray(rawOption.series), function (series) {\n        series && series.data && isTypedArray(series.data) && setAsPrimitive(series.data);\n      });\n      each(normalizeToArray(rawOption.dataset), function (dataset) {\n        dataset && dataset.source && isTypedArray(dataset.source) && setAsPrimitive(dataset.source);\n      });\n    } // Caution: some series modify option data, if do not clone,\n    // it should ensure that the repeat modify correctly\n    // (create a new object when modify itself).\n\n\n    rawOption = clone(rawOption); // FIXME\n    // If some property is set in timeline options or media option but\n    // not set in baseOption, a warning should be given.\n\n    var optionBackup = this._optionBackup;\n    var newParsedOption = parseRawOption(rawOption, optionPreprocessorFuncs, !optionBackup);\n    this._newBaseOption = newParsedOption.baseOption; // For setOption at second time (using merge mode);\n\n    if (optionBackup) {\n      // FIXME\n      // the restore merge solution is essentially incorrect.\n      // the mapping can not be 100% consistent with ecModel, which probably brings\n      // potential bug!\n      // The first merge is delayed, becuase in most cases, users do not call `setOption` twice.\n      // let fakeCmptsMap = this._fakeCmptsMap;\n      // if (!fakeCmptsMap) {\n      //     fakeCmptsMap = this._fakeCmptsMap = createHashMap();\n      //     mergeToBackupOption(fakeCmptsMap, null, optionBackup.baseOption, null);\n      // }\n      // mergeToBackupOption(\n      //     fakeCmptsMap, optionBackup.baseOption, newParsedOption.baseOption, opt\n      // );\n      // For simplicity, timeline options and media options do not support merge,\n      // that is, if you `setOption` twice and both has timeline options, the latter\n      // timeline opitons will not be merged to the formers, but just substitude them.\n      if (newParsedOption.timelineOptions.length) {\n        optionBackup.timelineOptions = newParsedOption.timelineOptions;\n      }\n\n      if (newParsedOption.mediaList.length) {\n        optionBackup.mediaList = newParsedOption.mediaList;\n      }\n\n      if (newParsedOption.mediaDefault) {\n        optionBackup.mediaDefault = newParsedOption.mediaDefault;\n      }\n    } else {\n      this._optionBackup = newParsedOption;\n    }\n  };\n\n  OptionManager.prototype.mountOption = function (isRecreate) {\n    var optionBackup = this._optionBackup;\n    this._timelineOptions = optionBackup.timelineOptions;\n    this._mediaList = optionBackup.mediaList;\n    this._mediaDefault = optionBackup.mediaDefault;\n    this._currentMediaIndices = [];\n    return clone(isRecreate // this._optionBackup.baseOption, which is created at the first `setOption`\n    // called, and is merged into every new option by inner method `mergeToBackupOption`\n    // each time `setOption` called, can be only used in `isRecreate`, because\n    // its reliability is under suspicion. In other cases option merge is\n    // performed by `model.mergeOption`.\n    ? optionBackup.baseOption : this._newBaseOption);\n  };\n\n  OptionManager.prototype.getTimelineOption = function (ecModel) {\n    var option;\n    var timelineOptions = this._timelineOptions;\n\n    if (timelineOptions.length) {\n      // getTimelineOption can only be called after ecModel inited,\n      // so we can get currentIndex from timelineModel.\n      var timelineModel = ecModel.getComponent('timeline');\n\n      if (timelineModel) {\n        option = clone( // FIXME:TS as TimelineModel or quivlant interface\n        timelineOptions[timelineModel.getCurrentIndex()]);\n      }\n    }\n\n    return option;\n  };\n\n  OptionManager.prototype.getMediaOption = function (ecModel) {\n    var ecWidth = this._api.getWidth();\n\n    var ecHeight = this._api.getHeight();\n\n    var mediaList = this._mediaList;\n    var mediaDefault = this._mediaDefault;\n    var indices = [];\n    var result = []; // No media defined.\n\n    if (!mediaList.length && !mediaDefault) {\n      return result;\n    } // Multi media may be applied, the latter defined media has higher priority.\n\n\n    for (var i = 0, len = mediaList.length; i < len; i++) {\n      if (applyMediaQuery(mediaList[i].query, ecWidth, ecHeight)) {\n        indices.push(i);\n      }\n    } // FIXME\n    // Whether mediaDefault should force users to provide? Otherwise\n    // the change by media query can not be recorvered.\n\n\n    if (!indices.length && mediaDefault) {\n      indices = [-1];\n    }\n\n    if (indices.length && !indicesEquals(indices, this._currentMediaIndices)) {\n      result = map(indices, function (index) {\n        return clone(index === -1 ? mediaDefault.option : mediaList[index].option);\n      });\n    } // Otherwise return nothing.\n\n\n    this._currentMediaIndices = indices;\n    return result;\n  };\n\n  return OptionManager;\n}();\n/**\n * [RAW_OPTION_PATTERNS]\n * (Note: \"series: []\" represents all other props in `ECUnitOption`)\n *\n * (1) No prop \"baseOption\" declared:\n * Root option is used as \"baseOption\" (except prop \"options\" and \"media\").\n * ```js\n * option = {\n *     series: [],\n *     timeline: {},\n *     options: [],\n * };\n * option = {\n *     series: [],\n *     media: {},\n * };\n * option = {\n *     series: [],\n *     timeline: {},\n *     options: [],\n *     media: {},\n * }\n * ```\n *\n * (2) Prop \"baseOption\" declared:\n * If \"baseOption\" declared, `ECUnitOption` props can only be declared\n * inside \"baseOption\" except prop \"timeline\" (compat ec2).\n * ```js\n * option = {\n *     baseOption: {\n *         timeline: {},\n *         series: [],\n *     },\n *     options: []\n * };\n * option = {\n *     baseOption: {\n *         series: [],\n *     },\n *     media: []\n * };\n * option = {\n *     baseOption: {\n *         timeline: {},\n *         series: [],\n *     },\n *     options: []\n *     media: []\n * };\n * option = {\n *     // ec3 compat ec2: allow (only) `timeline` declared\n *     // outside baseOption. Keep this setting for compat.\n *     timeline: {},\n *     baseOption: {\n *         series: [],\n *     },\n *     options: [],\n *     media: []\n * };\n * ```\n */\n\n\nfunction parseRawOption( // `rawOption` May be modified\nrawOption, optionPreprocessorFuncs, isNew) {\n  var mediaList = [];\n  var mediaDefault;\n  var baseOption;\n  var declaredBaseOption = rawOption.baseOption; // Compatible with ec2, [RAW_OPTION_PATTERNS] above.\n\n  var timelineOnRoot = rawOption.timeline;\n  var timelineOptionsOnRoot = rawOption.options;\n  var mediaOnRoot = rawOption.media;\n  var hasMedia = !!rawOption.media;\n  var hasTimeline = !!(timelineOptionsOnRoot || timelineOnRoot || declaredBaseOption && declaredBaseOption.timeline);\n\n  if (declaredBaseOption) {\n    baseOption = declaredBaseOption; // For merge option.\n\n    if (!baseOption.timeline) {\n      baseOption.timeline = timelineOnRoot;\n    }\n  } // For convenience, enable to use the root option as the `baseOption`:\n  // `{ ...normalOptionProps, media: [{ ... }, { ... }] }`\n  else {\n      if (hasTimeline || hasMedia) {\n        rawOption.options = rawOption.media = null;\n      }\n\n      baseOption = rawOption;\n    }\n\n  if (hasMedia) {\n    if (isArray(mediaOnRoot)) {\n      each(mediaOnRoot, function (singleMedia) {\n        if (process.env.NODE_ENV !== 'production') {\n          // Real case of wrong config.\n          if (singleMedia && !singleMedia.option && isObject(singleMedia.query) && isObject(singleMedia.query.option)) {\n            error('Illegal media option. Must be like { media: [ { query: {}, option: {} } ] }');\n          }\n        }\n\n        if (singleMedia && singleMedia.option) {\n          if (singleMedia.query) {\n            mediaList.push(singleMedia);\n          } else if (!mediaDefault) {\n            // Use the first media default.\n            mediaDefault = singleMedia;\n          }\n        }\n      });\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        // Real case of wrong config.\n        error('Illegal media option. Must be an array. Like { media: [ {...}, {...} ] }');\n      }\n    }\n  }\n\n  doPreprocess(baseOption);\n  each(timelineOptionsOnRoot, function (option) {\n    return doPreprocess(option);\n  });\n  each(mediaList, function (media) {\n    return doPreprocess(media.option);\n  });\n\n  function doPreprocess(option) {\n    each(optionPreprocessorFuncs, function (preProcess) {\n      preProcess(option, isNew);\n    });\n  }\n\n  return {\n    baseOption: baseOption,\n    timelineOptions: timelineOptionsOnRoot || [],\n    mediaDefault: mediaDefault,\n    mediaList: mediaList\n  };\n}\n/**\n * @see <http://www.w3.org/TR/css3-mediaqueries/#media1>\n * Support: width, height, aspectRatio\n * Can use max or min as prefix.\n */\n\n\nfunction applyMediaQuery(query, ecWidth, ecHeight) {\n  var realMap = {\n    width: ecWidth,\n    height: ecHeight,\n    aspectratio: ecWidth / ecHeight // lowser case for convenientce.\n\n  };\n  var applicatable = true;\n  each(query, function (value, attr) {\n    var matched = attr.match(QUERY_REG);\n\n    if (!matched || !matched[1] || !matched[2]) {\n      return;\n    }\n\n    var operator = matched[1];\n    var realAttr = matched[2].toLowerCase();\n\n    if (!compare(realMap[realAttr], value, operator)) {\n      applicatable = false;\n    }\n  });\n  return applicatable;\n}\n\nfunction compare(real, expect, operator) {\n  if (operator === 'min') {\n    return real >= expect;\n  } else if (operator === 'max') {\n    return real <= expect;\n  } else {\n    // Equals\n    return real === expect;\n  }\n}\n\nfunction indicesEquals(indices1, indices2) {\n  // indices is always order by asc and has only finite number.\n  return indices1.join(',') === indices2.join(',');\n}\n/**\n * Consider case:\n * `chart.setOption(opt1);`\n * Then user do some interaction like dataZoom, dataView changing.\n * `chart.setOption(opt2);`\n * Then user press 'reset button' in toolbox.\n *\n * After doing that all of the interaction effects should be reset, the\n * chart should be the same as the result of invoke\n * `chart.setOption(opt1); chart.setOption(opt2);`.\n *\n * Although it is not able ensure that\n * `chart.setOption(opt1); chart.setOption(opt2);` is equivalents to\n * `chart.setOption(merge(opt1, opt2));` exactly,\n * this might be the only simple way to implement that feature.\n *\n * MEMO: We've considered some other approaches:\n * 1. Each model handle its self restoration but not uniform treatment.\n *     (Too complex in logic and error-prone)\n * 2. Use a shadow ecModel. (Performace expensive)\n *\n * FIXME: A possible solution:\n * Add a extra level of model for each component model. The inheritance chain would be:\n * ecModel <- componentModel <- componentActionModel <- dataItemModel\n * And all of the actions can only modify the `componentActionModel` rather than\n * `componentModel`. `setOption` will only modify the `ecModel` and `componentModel`.\n * When \"resotre\" action triggered, model from `componentActionModel` will be discarded\n * instead of recreating the \"ecModel\" from the \"_optionBackup\".\n */\n// function mergeToBackupOption(\n//     fakeCmptsMap: FakeComponentsMap,\n//     // `tarOption` Can be null/undefined, means init\n//     tarOption: ECUnitOption,\n//     newOption: ECUnitOption,\n//     // Can be null/undefined\n//     opt: InnerSetOptionOpts\n// ): void {\n//     newOption = newOption || {} as ECUnitOption;\n//     const notInit = !!tarOption;\n//     each(newOption, function (newOptsInMainType, mainType) {\n//         if (newOptsInMainType == null) {\n//             return;\n//         }\n//         if (!ComponentModel.hasClass(mainType)) {\n//             if (tarOption) {\n//                 tarOption[mainType] = merge(tarOption[mainType], newOptsInMainType, true);\n//             }\n//         }\n//         else {\n//             const oldTarOptsInMainType = notInit ? normalizeToArray(tarOption[mainType]) : null;\n//             const oldFakeCmptsInMainType = fakeCmptsMap.get(mainType) || [];\n//             const resultTarOptsInMainType = notInit ? (tarOption[mainType] = [] as ComponentOption[]) : null;\n//             const resultFakeCmptsInMainType = fakeCmptsMap.set(mainType, []);\n//             const mappingResult = mappingToExists(\n//                 oldFakeCmptsInMainType,\n//                 normalizeToArray(newOptsInMainType),\n//                 (opt && opt.replaceMergeMainTypeMap.get(mainType)) ? 'replaceMerge' : 'normalMerge'\n//             );\n//             setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel as ComponentModelConstructor);\n//             each(mappingResult, function (resultItem, index) {\n//                 // The same logic as `Global.ts#_mergeOption`.\n//                 let fakeCmpt = resultItem.existing;\n//                 const newOption = resultItem.newOption;\n//                 const keyInfo = resultItem.keyInfo;\n//                 let fakeCmptOpt;\n//                 if (!newOption) {\n//                     fakeCmptOpt = oldTarOptsInMainType[index];\n//                 }\n//                 else {\n//                     if (fakeCmpt && fakeCmpt.subType === keyInfo.subType) {\n//                         fakeCmpt.name = keyInfo.name;\n//                         if (notInit) {\n//                             fakeCmptOpt = merge(oldTarOptsInMainType[index], newOption, true);\n//                         }\n//                     }\n//                     else {\n//                         fakeCmpt = extend({}, keyInfo);\n//                         if (notInit) {\n//                             fakeCmptOpt = clone(newOption);\n//                         }\n//                     }\n//                 }\n//                 if (fakeCmpt) {\n//                     notInit && resultTarOptsInMainType.push(fakeCmptOpt);\n//                     resultFakeCmptsInMainType.push(fakeCmpt);\n//                 }\n//                 else {\n//                     notInit && resultTarOptsInMainType.push(void 0);\n//                     resultFakeCmptsInMainType.push(void 0);\n//                 }\n//             });\n//         }\n//     });\n// }\n\n\nexport default OptionManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nimport { deprecateLog, deprecateReplaceLog } from '../../util/log.js';\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar POSSIBLE_STYLES = ['areaStyle', 'lineStyle', 'nodeStyle', 'linkStyle', 'chordStyle', 'label', 'labelLine'];\n\nfunction compatEC2ItemStyle(opt) {\n  var itemStyleOpt = opt && opt.itemStyle;\n\n  if (!itemStyleOpt) {\n    return;\n  }\n\n  for (var i = 0, len = POSSIBLE_STYLES.length; i < len; i++) {\n    var styleName = POSSIBLE_STYLES[i];\n    var normalItemStyleOpt = itemStyleOpt.normal;\n    var emphasisItemStyleOpt = itemStyleOpt.emphasis;\n\n    if (normalItemStyleOpt && normalItemStyleOpt[styleName]) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog(\"itemStyle.normal.\" + styleName, styleName);\n      }\n\n      opt[styleName] = opt[styleName] || {};\n\n      if (!opt[styleName].normal) {\n        opt[styleName].normal = normalItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].normal, normalItemStyleOpt[styleName]);\n      }\n\n      normalItemStyleOpt[styleName] = null;\n    }\n\n    if (emphasisItemStyleOpt && emphasisItemStyleOpt[styleName]) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog(\"itemStyle.emphasis.\" + styleName, \"emphasis.\" + styleName);\n      }\n\n      opt[styleName] = opt[styleName] || {};\n\n      if (!opt[styleName].emphasis) {\n        opt[styleName].emphasis = emphasisItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].emphasis, emphasisItemStyleOpt[styleName]);\n      }\n\n      emphasisItemStyleOpt[styleName] = null;\n    }\n  }\n}\n\nfunction convertNormalEmphasis(opt, optType, useExtend) {\n  if (opt && opt[optType] && (opt[optType].normal || opt[optType].emphasis)) {\n    var normalOpt = opt[optType].normal;\n    var emphasisOpt = opt[optType].emphasis;\n\n    if (normalOpt) {\n      if (process.env.NODE_ENV !== 'production') {\n        // eslint-disable-next-line max-len\n        deprecateLog(\"'normal' hierarchy in \" + optType + \" has been removed since 4.0. All style properties are configured in \" + optType + \" directly now.\");\n      } // Timeline controlStyle has other properties besides normal and emphasis\n\n\n      if (useExtend) {\n        opt[optType].normal = opt[optType].emphasis = null;\n        zrUtil.defaults(opt[optType], normalOpt);\n      } else {\n        opt[optType] = normalOpt;\n      }\n    }\n\n    if (emphasisOpt) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateLog(optType + \".emphasis has been changed to emphasis.\" + optType + \" since 4.0\");\n      }\n\n      opt.emphasis = opt.emphasis || {};\n      opt.emphasis[optType] = emphasisOpt; // Also compat the case user mix the style and focus together in ec3 style\n      // for example: { itemStyle: { normal: {}, emphasis: {focus, shadowBlur} } }\n\n      if (emphasisOpt.focus) {\n        opt.emphasis.focus = emphasisOpt.focus;\n      }\n\n      if (emphasisOpt.blurScope) {\n        opt.emphasis.blurScope = emphasisOpt.blurScope;\n      }\n    }\n  }\n}\n\nfunction removeEC3NormalStatus(opt) {\n  convertNormalEmphasis(opt, 'itemStyle');\n  convertNormalEmphasis(opt, 'lineStyle');\n  convertNormalEmphasis(opt, 'areaStyle');\n  convertNormalEmphasis(opt, 'label');\n  convertNormalEmphasis(opt, 'labelLine'); // treemap\n\n  convertNormalEmphasis(opt, 'upperLabel'); // graph\n\n  convertNormalEmphasis(opt, 'edgeLabel');\n}\n\nfunction compatTextStyle(opt, propName) {\n  // Check whether is not object (string\\null\\undefined ...)\n  var labelOptSingle = isObject(opt) && opt[propName];\n  var textStyle = isObject(labelOptSingle) && labelOptSingle.textStyle;\n\n  if (textStyle) {\n    if (process.env.NODE_ENV !== 'production') {\n      // eslint-disable-next-line max-len\n      deprecateLog(\"textStyle hierarchy in \" + propName + \" has been removed since 4.0. All textStyle properties are configured in \" + propName + \" directly now.\");\n    }\n\n    for (var i = 0, len = modelUtil.TEXT_STYLE_OPTIONS.length; i < len; i++) {\n      var textPropName = modelUtil.TEXT_STYLE_OPTIONS[i];\n\n      if (textStyle.hasOwnProperty(textPropName)) {\n        labelOptSingle[textPropName] = textStyle[textPropName];\n      }\n    }\n  }\n}\n\nfunction compatEC3CommonStyles(opt) {\n  if (opt) {\n    removeEC3NormalStatus(opt);\n    compatTextStyle(opt, 'label');\n    opt.emphasis && compatTextStyle(opt.emphasis, 'label');\n  }\n}\n\nfunction processSeries(seriesOpt) {\n  if (!isObject(seriesOpt)) {\n    return;\n  }\n\n  compatEC2ItemStyle(seriesOpt);\n  removeEC3NormalStatus(seriesOpt);\n  compatTextStyle(seriesOpt, 'label'); // treemap\n\n  compatTextStyle(seriesOpt, 'upperLabel'); // graph\n\n  compatTextStyle(seriesOpt, 'edgeLabel');\n\n  if (seriesOpt.emphasis) {\n    compatTextStyle(seriesOpt.emphasis, 'label'); // treemap\n\n    compatTextStyle(seriesOpt.emphasis, 'upperLabel'); // graph\n\n    compatTextStyle(seriesOpt.emphasis, 'edgeLabel');\n  }\n\n  var markPoint = seriesOpt.markPoint;\n\n  if (markPoint) {\n    compatEC2ItemStyle(markPoint);\n    compatEC3CommonStyles(markPoint);\n  }\n\n  var markLine = seriesOpt.markLine;\n\n  if (markLine) {\n    compatEC2ItemStyle(markLine);\n    compatEC3CommonStyles(markLine);\n  }\n\n  var markArea = seriesOpt.markArea;\n\n  if (markArea) {\n    compatEC3CommonStyles(markArea);\n  }\n\n  var data = seriesOpt.data; // Break with ec3: if `setOption` again, there may be no `type` in option,\n  // then the backward compat based on option type will not be performed.\n\n  if (seriesOpt.type === 'graph') {\n    data = data || seriesOpt.nodes;\n    var edgeData = seriesOpt.links || seriesOpt.edges;\n\n    if (edgeData && !zrUtil.isTypedArray(edgeData)) {\n      for (var i = 0; i < edgeData.length; i++) {\n        compatEC3CommonStyles(edgeData[i]);\n      }\n    }\n\n    zrUtil.each(seriesOpt.categories, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  }\n\n  if (data && !zrUtil.isTypedArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      compatEC3CommonStyles(data[i]);\n    }\n  } // mark point data\n\n\n  markPoint = seriesOpt.markPoint;\n\n  if (markPoint && markPoint.data) {\n    var mpData = markPoint.data;\n\n    for (var i = 0; i < mpData.length; i++) {\n      compatEC3CommonStyles(mpData[i]);\n    }\n  } // mark line data\n\n\n  markLine = seriesOpt.markLine;\n\n  if (markLine && markLine.data) {\n    var mlData = markLine.data;\n\n    for (var i = 0; i < mlData.length; i++) {\n      if (zrUtil.isArray(mlData[i])) {\n        compatEC3CommonStyles(mlData[i][0]);\n        compatEC3CommonStyles(mlData[i][1]);\n      } else {\n        compatEC3CommonStyles(mlData[i]);\n      }\n    }\n  } // Series\n\n\n  if (seriesOpt.type === 'gauge') {\n    compatTextStyle(seriesOpt, 'axisLabel');\n    compatTextStyle(seriesOpt, 'title');\n    compatTextStyle(seriesOpt, 'detail');\n  } else if (seriesOpt.type === 'treemap') {\n    convertNormalEmphasis(seriesOpt.breadcrumb, 'itemStyle');\n    zrUtil.each(seriesOpt.levels, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  } else if (seriesOpt.type === 'tree') {\n    removeEC3NormalStatus(seriesOpt.leaves);\n  } // sunburst starts from ec4, so it does not need to compat levels.\n\n}\n\nfunction toArr(o) {\n  return zrUtil.isArray(o) ? o : o ? [o] : [];\n}\n\nfunction toObj(o) {\n  return (zrUtil.isArray(o) ? o[0] : o) || {};\n}\n\nexport default function globalCompatStyle(option, isTheme) {\n  each(toArr(option.series), function (seriesOpt) {\n    isObject(seriesOpt) && processSeries(seriesOpt);\n  });\n  var axes = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'parallelAxis', 'radar'];\n  isTheme && axes.push('valueAxis', 'categoryAxis', 'logAxis', 'timeAxis');\n  each(axes, function (axisName) {\n    each(toArr(option[axisName]), function (axisOpt) {\n      if (axisOpt) {\n        compatTextStyle(axisOpt, 'axisLabel');\n        compatTextStyle(axisOpt.axisPointer, 'label');\n      }\n    });\n  });\n  each(toArr(option.parallel), function (parallelOpt) {\n    var parallelAxisDefault = parallelOpt && parallelOpt.parallelAxisDefault;\n    compatTextStyle(parallelAxisDefault, 'axisLabel');\n    compatTextStyle(parallelAxisDefault && parallelAxisDefault.axisPointer, 'label');\n  });\n  each(toArr(option.calendar), function (calendarOpt) {\n    convertNormalEmphasis(calendarOpt, 'itemStyle');\n    compatTextStyle(calendarOpt, 'dayLabel');\n    compatTextStyle(calendarOpt, 'monthLabel');\n    compatTextStyle(calendarOpt, 'yearLabel');\n  }); // radar.name.textStyle\n\n  each(toArr(option.radar), function (radarOpt) {\n    compatTextStyle(radarOpt, 'name'); // Use axisName instead of name because component has name property\n\n    if (radarOpt.name && radarOpt.axisName == null) {\n      radarOpt.axisName = radarOpt.name;\n      delete radarOpt.name;\n\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateLog('name property in radar component has been changed to axisName');\n      }\n    }\n\n    if (radarOpt.nameGap != null && radarOpt.axisNameGap == null) {\n      radarOpt.axisNameGap = radarOpt.nameGap;\n      delete radarOpt.nameGap;\n\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateLog('nameGap property in radar component has been changed to axisNameGap');\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      each(radarOpt.indicator, function (indicatorOpt) {\n        if (indicatorOpt.text) {\n          deprecateReplaceLog('text', 'name', 'radar.indicator');\n        }\n      });\n    }\n  });\n  each(toArr(option.geo), function (geoOpt) {\n    if (isObject(geoOpt)) {\n      compatEC3CommonStyles(geoOpt);\n      each(toArr(geoOpt.regions), function (regionObj) {\n        compatEC3CommonStyles(regionObj);\n      });\n    }\n  });\n  each(toArr(option.timeline), function (timelineOpt) {\n    compatEC3CommonStyles(timelineOpt);\n    convertNormalEmphasis(timelineOpt, 'label');\n    convertNormalEmphasis(timelineOpt, 'itemStyle');\n    convertNormalEmphasis(timelineOpt, 'controlStyle', true);\n    var data = timelineOpt.data;\n    zrUtil.isArray(data) && zrUtil.each(data, function (item) {\n      if (zrUtil.isObject(item)) {\n        convertNormalEmphasis(item, 'label');\n        convertNormalEmphasis(item, 'itemStyle');\n      }\n    });\n  });\n  each(toArr(option.toolbox), function (toolboxOpt) {\n    convertNormalEmphasis(toolboxOpt, 'iconStyle');\n    each(toolboxOpt.feature, function (featureOpt) {\n      convertNormalEmphasis(featureOpt, 'iconStyle');\n    });\n  });\n  compatTextStyle(toObj(option.axisPointer), 'label');\n  compatTextStyle(toObj(option.tooltip).axisPointer, 'label'); // Clean logs\n  // storedLogs = {};\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, isArray, isObject, isTypedArray, defaults } from 'zrender/lib/core/util.js';\nimport compatStyle from './helper/compatStyle.js';\nimport { normalizeToArray } from '../util/model.js';\nimport { deprecateLog, deprecateReplaceLog } from '../util/log.js';\n\nfunction get(opt, path) {\n  var pathArr = path.split(',');\n  var obj = opt;\n\n  for (var i = 0; i < pathArr.length; i++) {\n    obj = obj && obj[pathArr[i]];\n\n    if (obj == null) {\n      break;\n    }\n  }\n\n  return obj;\n}\n\nfunction set(opt, path, val, overwrite) {\n  var pathArr = path.split(',');\n  var obj = opt;\n  var key;\n  var i = 0;\n\n  for (; i < pathArr.length - 1; i++) {\n    key = pathArr[i];\n\n    if (obj[key] == null) {\n      obj[key] = {};\n    }\n\n    obj = obj[key];\n  }\n\n  if (overwrite || obj[pathArr[i]] == null) {\n    obj[pathArr[i]] = val;\n  }\n}\n\nfunction compatLayoutProperties(option) {\n  option && each(LAYOUT_PROPERTIES, function (prop) {\n    if (prop[0] in option && !(prop[1] in option)) {\n      option[prop[1]] = option[prop[0]];\n    }\n  });\n}\n\nvar LAYOUT_PROPERTIES = [['x', 'left'], ['y', 'top'], ['x2', 'right'], ['y2', 'bottom']];\nvar COMPATITABLE_COMPONENTS = ['grid', 'geo', 'parallel', 'legend', 'toolbox', 'title', 'visualMap', 'dataZoom', 'timeline'];\nvar BAR_ITEM_STYLE_MAP = [['borderRadius', 'barBorderRadius'], ['borderColor', 'barBorderColor'], ['borderWidth', 'barBorderWidth']];\n\nfunction compatBarItemStyle(option) {\n  var itemStyle = option && option.itemStyle;\n\n  if (itemStyle) {\n    for (var i = 0; i < BAR_ITEM_STYLE_MAP.length; i++) {\n      var oldName = BAR_ITEM_STYLE_MAP[i][1];\n      var newName = BAR_ITEM_STYLE_MAP[i][0];\n\n      if (itemStyle[oldName] != null) {\n        itemStyle[newName] = itemStyle[oldName];\n\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog(oldName, newName);\n        }\n      }\n    }\n  }\n}\n\nfunction compatPieLabel(option) {\n  if (!option) {\n    return;\n  }\n\n  if (option.alignTo === 'edge' && option.margin != null && option.edgeDistance == null) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('label.margin', 'label.edgeDistance', 'pie');\n    }\n\n    option.edgeDistance = option.margin;\n  }\n}\n\nfunction compatSunburstState(option) {\n  if (!option) {\n    return;\n  }\n\n  if (option.downplay && !option.blur) {\n    option.blur = option.downplay;\n\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('downplay', 'blur', 'sunburst');\n    }\n  }\n}\n\nfunction compatGraphFocus(option) {\n  if (!option) {\n    return;\n  }\n\n  if (option.focusNodeAdjacency != null) {\n    option.emphasis = option.emphasis || {};\n\n    if (option.emphasis.focus == null) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog('focusNodeAdjacency', 'emphasis: { focus: \\'adjacency\\'}', 'graph/sankey');\n      }\n\n      option.emphasis.focus = 'adjacency';\n    }\n  }\n}\n\nfunction traverseTree(data, cb) {\n  if (data) {\n    for (var i = 0; i < data.length; i++) {\n      cb(data[i]);\n      data[i] && traverseTree(data[i].children, cb);\n    }\n  }\n}\n\nexport default function globalBackwardCompat(option, isTheme) {\n  compatStyle(option, isTheme); // Make sure series array for model initialization.\n\n  option.series = normalizeToArray(option.series);\n  each(option.series, function (seriesOpt) {\n    if (!isObject(seriesOpt)) {\n      return;\n    }\n\n    var seriesType = seriesOpt.type;\n\n    if (seriesType === 'line') {\n      if (seriesOpt.clipOverflow != null) {\n        seriesOpt.clip = seriesOpt.clipOverflow;\n\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('clipOverflow', 'clip', 'line');\n        }\n      }\n    } else if (seriesType === 'pie' || seriesType === 'gauge') {\n      if (seriesOpt.clockWise != null) {\n        seriesOpt.clockwise = seriesOpt.clockWise;\n\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('clockWise', 'clockwise');\n        }\n      }\n\n      compatPieLabel(seriesOpt.label);\n      var data = seriesOpt.data;\n\n      if (data && !isTypedArray(data)) {\n        for (var i = 0; i < data.length; i++) {\n          compatPieLabel(data[i]);\n        }\n      }\n\n      if (seriesOpt.hoverOffset != null) {\n        seriesOpt.emphasis = seriesOpt.emphasis || {};\n\n        if (seriesOpt.emphasis.scaleSize = null) {\n          if (process.env.NODE_ENV !== 'production') {\n            deprecateReplaceLog('hoverOffset', 'emphasis.scaleSize');\n          }\n\n          seriesOpt.emphasis.scaleSize = seriesOpt.hoverOffset;\n        }\n      }\n    } else if (seriesType === 'gauge') {\n      var pointerColor = get(seriesOpt, 'pointer.color');\n      pointerColor != null && set(seriesOpt, 'itemStyle.color', pointerColor);\n    } else if (seriesType === 'bar') {\n      compatBarItemStyle(seriesOpt);\n      compatBarItemStyle(seriesOpt.backgroundStyle);\n      compatBarItemStyle(seriesOpt.emphasis);\n      var data = seriesOpt.data;\n\n      if (data && !isTypedArray(data)) {\n        for (var i = 0; i < data.length; i++) {\n          if (typeof data[i] === 'object') {\n            compatBarItemStyle(data[i]);\n            compatBarItemStyle(data[i] && data[i].emphasis);\n          }\n        }\n      }\n    } else if (seriesType === 'sunburst') {\n      var highlightPolicy = seriesOpt.highlightPolicy;\n\n      if (highlightPolicy) {\n        seriesOpt.emphasis = seriesOpt.emphasis || {};\n\n        if (!seriesOpt.emphasis.focus) {\n          seriesOpt.emphasis.focus = highlightPolicy;\n\n          if (process.env.NODE_ENV !== 'production') {\n            deprecateReplaceLog('highlightPolicy', 'emphasis.focus', 'sunburst');\n          }\n        }\n      }\n\n      compatSunburstState(seriesOpt);\n      traverseTree(seriesOpt.data, compatSunburstState);\n    } else if (seriesType === 'graph' || seriesType === 'sankey') {\n      compatGraphFocus(seriesOpt); // TODO nodes, edges?\n    } else if (seriesType === 'map') {\n      if (seriesOpt.mapType && !seriesOpt.map) {\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('mapType', 'map', 'map');\n        }\n\n        seriesOpt.map = seriesOpt.mapType;\n      }\n\n      if (seriesOpt.mapLocation) {\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateLog('`mapLocation` is not used anymore.');\n        }\n\n        defaults(seriesOpt, seriesOpt.mapLocation);\n      }\n    }\n\n    if (seriesOpt.hoverAnimation != null) {\n      seriesOpt.emphasis = seriesOpt.emphasis || {};\n\n      if (seriesOpt.emphasis && seriesOpt.emphasis.scale == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('hoverAnimation', 'emphasis.scale');\n        }\n\n        seriesOpt.emphasis.scale = seriesOpt.hoverAnimation;\n      }\n    }\n\n    compatLayoutProperties(seriesOpt);\n  }); // dataRange has changed to visualMap\n\n  if (option.dataRange) {\n    option.visualMap = option.dataRange;\n  }\n\n  each(COMPATITABLE_COMPONENTS, function (componentName) {\n    var options = option[componentName];\n\n    if (options) {\n      if (!isArray(options)) {\n        options = [options];\n      }\n\n      each(options, function (option) {\n        compatLayoutProperties(option);\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\nimport { addSafe } from '../util/number.js'; // (1) [Caution]: the logic is correct based on the premises:\n//     data processing stage is blocked in stream.\n//     See <module:echarts/stream/Scheduler#performDataProcessorTasks>\n// (2) Only register once when import repeatedly.\n//     Should be executed after series is filtered and before stack calculation.\n\nexport default function dataStack(ecModel) {\n  var stackInfoMap = createHashMap();\n  ecModel.eachSeries(function (seriesModel) {\n    var stack = seriesModel.get('stack'); // Compatible: when `stack` is set as '', do not stack.\n\n    if (stack) {\n      var stackInfoList = stackInfoMap.get(stack) || stackInfoMap.set(stack, []);\n      var data = seriesModel.getData();\n      var stackInfo = {\n        // Used for calculate axis extent automatically.\n        // TODO: Type getCalculationInfo return more specific type?\n        stackResultDimension: data.getCalculationInfo('stackResultDimension'),\n        stackedOverDimension: data.getCalculationInfo('stackedOverDimension'),\n        stackedDimension: data.getCalculationInfo('stackedDimension'),\n        stackedByDimension: data.getCalculationInfo('stackedByDimension'),\n        isStackedByIndex: data.getCalculationInfo('isStackedByIndex'),\n        data: data,\n        seriesModel: seriesModel\n      }; // If stacked on axis that do not support data stack.\n\n      if (!stackInfo.stackedDimension || !(stackInfo.isStackedByIndex || stackInfo.stackedByDimension)) {\n        return;\n      }\n\n      stackInfoList.length && data.setCalculationInfo('stackedOnSeries', stackInfoList[stackInfoList.length - 1].seriesModel);\n      stackInfoList.push(stackInfo);\n    }\n  });\n  stackInfoMap.each(calculateStack);\n}\n\nfunction calculateStack(stackInfoList) {\n  each(stackInfoList, function (targetStackInfo, idxInStack) {\n    var resultVal = [];\n    var resultNaN = [NaN, NaN];\n    var dims = [targetStackInfo.stackResultDimension, targetStackInfo.stackedOverDimension];\n    var targetData = targetStackInfo.data;\n    var isStackedByIndex = targetStackInfo.isStackedByIndex;\n    var stackStrategy = targetStackInfo.seriesModel.get('stackStrategy') || 'samesign'; // Should not write on raw data, because stack series model list changes\n    // depending on legend selection.\n\n    targetData.modify(dims, function (v0, v1, dataIndex) {\n      var sum = targetData.get(targetStackInfo.stackedDimension, dataIndex); // Consider `connectNulls` of line area, if value is NaN, stackedOver\n      // should also be NaN, to draw a appropriate belt area.\n\n      if (isNaN(sum)) {\n        return resultNaN;\n      }\n\n      var byValue;\n      var stackedDataRawIndex;\n\n      if (isStackedByIndex) {\n        stackedDataRawIndex = targetData.getRawIndex(dataIndex);\n      } else {\n        byValue = targetData.get(targetStackInfo.stackedByDimension, dataIndex);\n      } // If stackOver is NaN, chart view will render point on value start.\n\n\n      var stackedOver = NaN;\n\n      for (var j = idxInStack - 1; j >= 0; j--) {\n        var stackInfo = stackInfoList[j]; // Has been optimized by inverted indices on `stackedByDimension`.\n\n        if (!isStackedByIndex) {\n          stackedDataRawIndex = stackInfo.data.rawIndexOf(stackInfo.stackedByDimension, byValue);\n        }\n\n        if (stackedDataRawIndex >= 0) {\n          var val = stackInfo.data.getByRawIndex(stackInfo.stackResultDimension, stackedDataRawIndex); // Considering positive stack, negative stack and empty data\n\n          if (stackStrategy === 'all' // single stack group\n          || stackStrategy === 'positive' && val > 0 || stackStrategy === 'negative' && val < 0 || stackStrategy === 'samesign' && sum >= 0 && val > 0 // All positive stack\n          || stackStrategy === 'samesign' && sum <= 0 && val < 0 // All negative stack\n          ) {\n              // The sum has to be very small to be affected by the\n              // floating arithmetic problem. An incorrect result will probably\n              // cause axis min/max to be filtered incorrectly.\n              sum = addSafe(sum, val);\n              stackedOver = val;\n              break;\n            }\n        }\n      }\n\n      resultVal[0] = sum;\n      resultVal[1] = stackedOver;\n      return resultVal;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isFunction, extend, createHashMap } from 'zrender/lib/core/util.js';\nimport makeStyleMapper from '../model/mixin/makeStyleMapper.js';\nimport { ITEM_STYLE_KEY_MAP } from '../model/mixin/itemStyle.js';\nimport { LINE_STYLE_KEY_MAP } from '../model/mixin/lineStyle.js';\nimport Model from '../model/Model.js';\nimport { makeInner } from '../util/model.js';\nvar inner = makeInner();\nvar defaultStyleMappers = {\n  itemStyle: makeStyleMapper(ITEM_STYLE_KEY_MAP, true),\n  lineStyle: makeStyleMapper(LINE_STYLE_KEY_MAP, true)\n};\nvar defaultColorKey = {\n  lineStyle: 'stroke',\n  itemStyle: 'fill'\n};\n\nfunction getStyleMapper(seriesModel, stylePath) {\n  var styleMapper = seriesModel.visualStyleMapper || defaultStyleMappers[stylePath];\n\n  if (!styleMapper) {\n    console.warn(\"Unkown style type '\" + stylePath + \"'.\");\n    return defaultStyleMappers.itemStyle;\n  }\n\n  return styleMapper;\n}\n\nfunction getDefaultColorKey(seriesModel, stylePath) {\n  // return defaultColorKey[stylePath] ||\n  var colorKey = seriesModel.visualDrawType || defaultColorKey[stylePath];\n\n  if (!colorKey) {\n    console.warn(\"Unkown style type '\" + stylePath + \"'.\");\n    return 'fill';\n  }\n\n  return colorKey;\n}\n\nvar seriesStyleTask = {\n  createOnAllSeries: true,\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle'; // Set in itemStyle\n\n    var styleModel = seriesModel.getModel(stylePath);\n    var getStyle = getStyleMapper(seriesModel, stylePath);\n    var globalStyle = getStyle(styleModel);\n    var decalOption = styleModel.getShallow('decal');\n\n    if (decalOption) {\n      data.setVisual('decal', decalOption);\n      decalOption.dirty = true;\n    } // TODO\n\n\n    var colorKey = getDefaultColorKey(seriesModel, stylePath);\n    var color = globalStyle[colorKey]; // TODO style callback\n\n    var colorCallback = isFunction(color) ? color : null;\n    var hasAutoColor = globalStyle.fill === 'auto' || globalStyle.stroke === 'auto'; // Get from color palette by default.\n\n    if (!globalStyle[colorKey] || colorCallback || hasAutoColor) {\n      // Note: if some series has color specified (e.g., by itemStyle.color), we DO NOT\n      // make it effect palette. Bacause some scenarios users need to make some series\n      // transparent or as background, which should better not effect the palette.\n      var colorPalette = seriesModel.getColorFromPalette( // TODO series count changed.\n      seriesModel.name, null, ecModel.getSeriesCount());\n\n      if (!globalStyle[colorKey]) {\n        globalStyle[colorKey] = colorPalette;\n        data.setVisual('colorFromPalette', true);\n      }\n\n      globalStyle.fill = globalStyle.fill === 'auto' || isFunction(globalStyle.fill) ? colorPalette : globalStyle.fill;\n      globalStyle.stroke = globalStyle.stroke === 'auto' || isFunction(globalStyle.stroke) ? colorPalette : globalStyle.stroke;\n    }\n\n    data.setVisual('style', globalStyle);\n    data.setVisual('drawType', colorKey); // Only visible series has each data be visual encoded\n\n    if (!ecModel.isSeriesFiltered(seriesModel) && colorCallback) {\n      data.setVisual('colorFromPalette', false);\n      return {\n        dataEach: function (data, idx) {\n          var dataParams = seriesModel.getDataParams(idx);\n          var itemStyle = extend({}, globalStyle);\n          itemStyle[colorKey] = colorCallback(dataParams);\n          data.setItemVisual(idx, 'style', itemStyle);\n        }\n      };\n    }\n  }\n};\nvar sharedModel = new Model();\nvar dataStyleTask = {\n  createOnAllSeries: true,\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    if (seriesModel.ignoreStyleOnData || ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle'; // Set in itemStyle\n\n    var getStyle = getStyleMapper(seriesModel, stylePath);\n    var colorKey = data.getVisual('drawType');\n    return {\n      dataEach: data.hasItemOption ? function (data, idx) {\n        // Not use getItemModel for performance considuration\n        var rawItem = data.getRawDataItem(idx);\n\n        if (rawItem && rawItem[stylePath]) {\n          sharedModel.option = rawItem[stylePath];\n          var style = getStyle(sharedModel);\n          var existsStyle = data.ensureUniqueItemVisual(idx, 'style');\n          extend(existsStyle, style);\n\n          if (sharedModel.option.decal) {\n            data.setItemVisual(idx, 'decal', sharedModel.option.decal);\n            sharedModel.option.decal.dirty = true;\n          }\n\n          if (colorKey in style) {\n            data.setItemVisual(idx, 'colorFromPalette', false);\n          }\n        }\n      } : null\n    };\n  }\n}; // Pick color from palette for the data which has not been set with color yet.\n// Note: do not support stream rendering. No such cases yet.\n\nvar dataColorPaletteTask = {\n  performRawSeries: true,\n  overallReset: function (ecModel) {\n    // Each type of series use one scope.\n    // Pie and funnel are using diferrent scopes\n    var paletteScopeGroupByType = createHashMap();\n    ecModel.eachSeries(function (seriesModel) {\n      var colorBy = seriesModel.getColorBy();\n\n      if (seriesModel.isColorBySeries()) {\n        return;\n      }\n\n      var key = seriesModel.type + '-' + colorBy;\n      var colorScope = paletteScopeGroupByType.get(key);\n\n      if (!colorScope) {\n        colorScope = {};\n        paletteScopeGroupByType.set(key, colorScope);\n      }\n\n      inner(seriesModel).scope = colorScope;\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.isColorBySeries() || ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      var dataAll = seriesModel.getRawData();\n      var idxMap = {};\n      var data = seriesModel.getData();\n      var colorScope = inner(seriesModel).scope;\n      var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\n      var colorKey = getDefaultColorKey(seriesModel, stylePath);\n      data.each(function (idx) {\n        var rawIdx = data.getRawIndex(idx);\n        idxMap[rawIdx] = idx;\n      }); // Iterate on data before filtered. To make sure color from palette can be\n      // Consistent when toggling legend.\n\n      dataAll.each(function (rawIdx) {\n        var idx = idxMap[rawIdx];\n        var fromPalette = data.getItemVisual(idx, 'colorFromPalette'); // Get color from palette for each data only when the color is inherited from series color, which is\n        // also picked from color palette. So following situation is not in the case:\n        // 1. series.itemStyle.color is set\n        // 2. color is encoded by visualMap\n\n        if (fromPalette) {\n          var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\n          var name_1 = dataAll.getName(rawIdx) || rawIdx + '';\n          var dataCount = dataAll.count();\n          itemStyle[colorKey] = seriesModel.getColorFromPalette(name_1, colorScope, dataCount);\n        }\n      });\n    });\n  }\n};\nexport { seriesStyleTask, dataStyleTask, dataColorPaletteTask };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../util/graphic.js';\nvar PI = Math.PI;\n/**\n * @param {module:echarts/ExtensionAPI} api\n * @param {Object} [opts]\n * @param {string} [opts.text]\n * @param {string} [opts.color]\n * @param {string} [opts.textColor]\n * @return {module:zrender/Element}\n */\n\nexport default function defaultLoading(api, opts) {\n  opts = opts || {};\n  zrUtil.defaults(opts, {\n    text: 'loading',\n    textColor: '#000',\n    fontSize: 12,\n    fontWeight: 'normal',\n    fontStyle: 'normal',\n    fontFamily: 'sans-serif',\n    maskColor: 'rgba(255, 255, 255, 0.8)',\n    showSpinner: true,\n    color: '#5470c6',\n    spinnerRadius: 10,\n    lineWidth: 5,\n    zlevel: 0\n  });\n  var group = new graphic.Group();\n  var mask = new graphic.Rect({\n    style: {\n      fill: opts.maskColor\n    },\n    zlevel: opts.zlevel,\n    z: 10000\n  });\n  group.add(mask);\n  var textContent = new graphic.Text({\n    style: {\n      text: opts.text,\n      fill: opts.textColor,\n      fontSize: opts.fontSize,\n      fontWeight: opts.fontWeight,\n      fontStyle: opts.fontStyle,\n      fontFamily: opts.fontFamily\n    },\n    zlevel: opts.zlevel,\n    z: 10001\n  });\n  var labelRect = new graphic.Rect({\n    style: {\n      fill: 'none'\n    },\n    textContent: textContent,\n    textConfig: {\n      position: 'right',\n      distance: 10\n    },\n    zlevel: opts.zlevel,\n    z: 10001\n  });\n  group.add(labelRect);\n  var arc;\n\n  if (opts.showSpinner) {\n    arc = new graphic.Arc({\n      shape: {\n        startAngle: -PI / 2,\n        endAngle: -PI / 2 + 0.1,\n        r: opts.spinnerRadius\n      },\n      style: {\n        stroke: opts.color,\n        lineCap: 'round',\n        lineWidth: opts.lineWidth\n      },\n      zlevel: opts.zlevel,\n      z: 10001\n    });\n    arc.animateShape(true).when(1000, {\n      endAngle: PI * 3 / 2\n    }).start('circularInOut');\n    arc.animateShape(true).when(1000, {\n      startAngle: PI * 3 / 2\n    }).delay(300).start('circularInOut');\n    group.add(arc);\n  } // Inject resize\n\n\n  group.resize = function () {\n    var textWidth = textContent.getBoundingRect().width;\n    var r = opts.showSpinner ? opts.spinnerRadius : 0; // cx = (containerWidth - arcDiameter - textDistance - textWidth) / 2\n    // textDistance needs to be calculated when both animation and text exist\n\n    var cx = (api.getWidth() - r * 2 - (opts.showSpinner && textWidth ? 10 : 0) - textWidth) / 2 - (opts.showSpinner && textWidth ? 0 : 5 + textWidth / 2) // only show the text\n    + (opts.showSpinner ? 0 : textWidth / 2) // only show the spinner\n    + (textWidth ? 0 : r);\n    var cy = api.getHeight() / 2;\n    opts.showSpinner && arc.setShape({\n      cx: cx,\n      cy: cy\n    });\n    labelRect.setShape({\n      x: cx - r,\n      y: cy - r,\n      width: r * 2,\n      height: r * 2\n    });\n    mask.setShape({\n      x: 0,\n      y: 0,\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  };\n\n  group.resize();\n  return group;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, map, isFunction, createHashMap, noop, assert } from 'zrender/lib/core/util.js';\nimport { createTask } from './task.js';\nimport { getUID } from '../util/component.js';\nimport GlobalModel from '../model/Global.js';\nimport ExtensionAPI from './ExtensionAPI.js';\nimport { normalizeToArray } from '../util/model.js';\n;\n\nvar Scheduler =\n/** @class */\nfunction () {\n  function Scheduler(ecInstance, api, dataProcessorHandlers, visualHandlers) {\n    // key: handlerUID\n    this._stageTaskMap = createHashMap();\n    this.ecInstance = ecInstance;\n    this.api = api; // Fix current processors in case that in some rear cases that\n    // processors might be registered after echarts instance created.\n    // Register processors incrementally for a echarts instance is\n    // not supported by this stream architecture.\n\n    dataProcessorHandlers = this._dataProcessorHandlers = dataProcessorHandlers.slice();\n    visualHandlers = this._visualHandlers = visualHandlers.slice();\n    this._allHandlers = dataProcessorHandlers.concat(visualHandlers);\n  }\n\n  Scheduler.prototype.restoreData = function (ecModel, payload) {\n    // TODO: Only restore needed series and components, but not all components.\n    // Currently `restoreData` of all of the series and component will be called.\n    // But some independent components like `title`, `legend`, `graphic`, `toolbox`,\n    // `tooltip`, `axisPointer`, etc, do not need series refresh when `setOption`,\n    // and some components like coordinate system, axes, dataZoom, visualMap only\n    // need their target series refresh.\n    // (1) If we are implementing this feature some day, we should consider these cases:\n    // if a data processor depends on a component (e.g., dataZoomProcessor depends\n    // on the settings of `dataZoom`), it should be re-performed if the component\n    // is modified by `setOption`.\n    // (2) If a processor depends on sevral series, speicified by its `getTargetSeries`,\n    // it should be re-performed when the result array of `getTargetSeries` changed.\n    // We use `dependencies` to cover these issues.\n    // (3) How to update target series when coordinate system related components modified.\n    // TODO: simply the dirty mechanism? Check whether only the case here can set tasks dirty,\n    // and this case all of the tasks will be set as dirty.\n    ecModel.restoreData(payload); // Theoretically an overall task not only depends on each of its target series, but also\n    // depends on all of the series.\n    // The overall task is not in pipeline, and `ecModel.restoreData` only set pipeline tasks\n    // dirty. If `getTargetSeries` of an overall task returns nothing, we should also ensure\n    // that the overall task is set as dirty and to be performed, otherwise it probably cause\n    // state chaos. So we have to set dirty of all of the overall tasks manually, otherwise it\n    // probably cause state chaos (consider `dataZoomProcessor`).\n\n    this._stageTaskMap.each(function (taskRecord) {\n      var overallTask = taskRecord.overallTask;\n      overallTask && overallTask.dirty();\n    });\n  }; // If seriesModel provided, incremental threshold is check by series data.\n\n\n  Scheduler.prototype.getPerformArgs = function (task, isBlock) {\n    // For overall task\n    if (!task.__pipeline) {\n      return;\n    }\n\n    var pipeline = this._pipelineMap.get(task.__pipeline.id);\n\n    var pCtx = pipeline.context;\n    var incremental = !isBlock && pipeline.progressiveEnabled && (!pCtx || pCtx.progressiveRender) && task.__idxInPipeline > pipeline.blockIndex;\n    var step = incremental ? pipeline.step : null;\n    var modDataCount = pCtx && pCtx.modDataCount;\n    var modBy = modDataCount != null ? Math.ceil(modDataCount / step) : null;\n    return {\n      step: step,\n      modBy: modBy,\n      modDataCount: modDataCount\n    };\n  };\n\n  Scheduler.prototype.getPipeline = function (pipelineId) {\n    return this._pipelineMap.get(pipelineId);\n  };\n  /**\n   * Current, progressive rendering starts from visual and layout.\n   * Always detect render mode in the same stage, avoiding that incorrect\n   * detection caused by data filtering.\n   * Caution:\n   * `updateStreamModes` use `seriesModel.getData()`.\n   */\n\n\n  Scheduler.prototype.updateStreamModes = function (seriesModel, view) {\n    var pipeline = this._pipelineMap.get(seriesModel.uid);\n\n    var data = seriesModel.getData();\n    var dataLen = data.count(); // `progressiveRender` means that can render progressively in each\n    // animation frame. Note that some types of series do not provide\n    // `view.incrementalPrepareRender` but support `chart.appendData`. We\n    // use the term `incremental` but not `progressive` to describe the\n    // case that `chart.appendData`.\n\n    var progressiveRender = pipeline.progressiveEnabled && view.incrementalPrepareRender && dataLen >= pipeline.threshold;\n    var large = seriesModel.get('large') && dataLen >= seriesModel.get('largeThreshold'); // TODO: modDataCount should not updated if `appendData`, otherwise cause whole repaint.\n    // see `test/candlestick-large3.html`\n\n    var modDataCount = seriesModel.get('progressiveChunkMode') === 'mod' ? dataLen : null;\n    seriesModel.pipelineContext = pipeline.context = {\n      progressiveRender: progressiveRender,\n      modDataCount: modDataCount,\n      large: large\n    };\n  };\n\n  Scheduler.prototype.restorePipelines = function (ecModel) {\n    var scheduler = this;\n    var pipelineMap = scheduler._pipelineMap = createHashMap();\n    ecModel.eachSeries(function (seriesModel) {\n      var progressive = seriesModel.getProgressive();\n      var pipelineId = seriesModel.uid;\n      pipelineMap.set(pipelineId, {\n        id: pipelineId,\n        head: null,\n        tail: null,\n        threshold: seriesModel.getProgressiveThreshold(),\n        progressiveEnabled: progressive && !(seriesModel.preventIncremental && seriesModel.preventIncremental()),\n        blockIndex: -1,\n        step: Math.round(progressive || 700),\n        count: 0\n      });\n\n      scheduler._pipe(seriesModel, seriesModel.dataTask);\n    });\n  };\n\n  Scheduler.prototype.prepareStageTasks = function () {\n    var stageTaskMap = this._stageTaskMap;\n    var ecModel = this.api.getModel();\n    var api = this.api;\n    each(this._allHandlers, function (handler) {\n      var record = stageTaskMap.get(handler.uid) || stageTaskMap.set(handler.uid, {});\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        // Currently do not need to support to sepecify them both.\n        errMsg = '\"reset\" and \"overallReset\" must not be both specified.';\n      }\n\n      assert(!(handler.reset && handler.overallReset), errMsg);\n      handler.reset && this._createSeriesStageTask(handler, record, ecModel, api);\n      handler.overallReset && this._createOverallStageTask(handler, record, ecModel, api);\n    }, this);\n  };\n\n  Scheduler.prototype.prepareView = function (view, model, ecModel, api) {\n    var renderTask = view.renderTask;\n    var context = renderTask.context;\n    context.model = model;\n    context.ecModel = ecModel;\n    context.api = api;\n    renderTask.__block = !view.incrementalPrepareRender;\n\n    this._pipe(model, renderTask);\n  };\n\n  Scheduler.prototype.performDataProcessorTasks = function (ecModel, payload) {\n    // If we do not use `block` here, it should be considered when to update modes.\n    this._performStageTasks(this._dataProcessorHandlers, ecModel, payload, {\n      block: true\n    });\n  };\n\n  Scheduler.prototype.performVisualTasks = function (ecModel, payload, opt) {\n    this._performStageTasks(this._visualHandlers, ecModel, payload, opt);\n  };\n\n  Scheduler.prototype._performStageTasks = function (stageHandlers, ecModel, payload, opt) {\n    opt = opt || {};\n    var unfinished = false;\n    var scheduler = this;\n    each(stageHandlers, function (stageHandler, idx) {\n      if (opt.visualType && opt.visualType !== stageHandler.visualType) {\n        return;\n      }\n\n      var stageHandlerRecord = scheduler._stageTaskMap.get(stageHandler.uid);\n\n      var seriesTaskMap = stageHandlerRecord.seriesTaskMap;\n      var overallTask = stageHandlerRecord.overallTask;\n\n      if (overallTask) {\n        var overallNeedDirty_1;\n        var agentStubMap = overallTask.agentStubMap;\n        agentStubMap.each(function (stub) {\n          if (needSetDirty(opt, stub)) {\n            stub.dirty();\n            overallNeedDirty_1 = true;\n          }\n        });\n        overallNeedDirty_1 && overallTask.dirty();\n        scheduler.updatePayload(overallTask, payload);\n        var performArgs_1 = scheduler.getPerformArgs(overallTask, opt.block); // Execute stubs firstly, which may set the overall task dirty,\n        // then execute the overall task. And stub will call seriesModel.setData,\n        // which ensures that in the overallTask seriesModel.getData() will not\n        // return incorrect data.\n\n        agentStubMap.each(function (stub) {\n          stub.perform(performArgs_1);\n        });\n\n        if (overallTask.perform(performArgs_1)) {\n          unfinished = true;\n        }\n      } else if (seriesTaskMap) {\n        seriesTaskMap.each(function (task, pipelineId) {\n          if (needSetDirty(opt, task)) {\n            task.dirty();\n          }\n\n          var performArgs = scheduler.getPerformArgs(task, opt.block); // FIXME\n          // if intending to decalare `performRawSeries` in handlers, only\n          // stream-independent (specifically, data item independent) operations can be\n          // performed. Because is a series is filtered, most of the tasks will not\n          // be performed. A stream-dependent operation probably cause wrong biz logic.\n          // Perhaps we should not provide a separate callback for this case instead\n          // of providing the config `performRawSeries`. The stream-dependent operaions\n          // and stream-independent operations should better not be mixed.\n\n          performArgs.skip = !stageHandler.performRawSeries && ecModel.isSeriesFiltered(task.context.model);\n          scheduler.updatePayload(task, payload);\n\n          if (task.perform(performArgs)) {\n            unfinished = true;\n          }\n        });\n      }\n    });\n\n    function needSetDirty(opt, task) {\n      return opt.setDirty && (!opt.dirtyMap || opt.dirtyMap.get(task.__pipeline.id));\n    }\n\n    this.unfinished = unfinished || this.unfinished;\n  };\n\n  Scheduler.prototype.performSeriesTasks = function (ecModel) {\n    var unfinished;\n    ecModel.eachSeries(function (seriesModel) {\n      // Progress to the end for dataInit and dataRestore.\n      unfinished = seriesModel.dataTask.perform() || unfinished;\n    });\n    this.unfinished = unfinished || this.unfinished;\n  };\n\n  Scheduler.prototype.plan = function () {\n    // Travel pipelines, check block.\n    this._pipelineMap.each(function (pipeline) {\n      var task = pipeline.tail;\n\n      do {\n        if (task.__block) {\n          pipeline.blockIndex = task.__idxInPipeline;\n          break;\n        }\n\n        task = task.getUpstream();\n      } while (task);\n    });\n  };\n\n  Scheduler.prototype.updatePayload = function (task, payload) {\n    payload !== 'remain' && (task.context.payload = payload);\n  };\n\n  Scheduler.prototype._createSeriesStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n    var scheduler = this;\n    var oldSeriesTaskMap = stageHandlerRecord.seriesTaskMap; // The count of stages are totally about only several dozen, so\n    // do not need to reuse the map.\n\n    var newSeriesTaskMap = stageHandlerRecord.seriesTaskMap = createHashMap();\n    var seriesType = stageHandler.seriesType;\n    var getTargetSeries = stageHandler.getTargetSeries; // If a stageHandler should cover all series, `createOnAllSeries` should be declared mandatorily,\n    // to avoid some typo or abuse. Otherwise if an extension do not specify a `seriesType`,\n    // it works but it may cause other irrelevant charts blocked.\n\n    if (stageHandler.createOnAllSeries) {\n      ecModel.eachRawSeries(create);\n    } else if (seriesType) {\n      ecModel.eachRawSeriesByType(seriesType, create);\n    } else if (getTargetSeries) {\n      getTargetSeries(ecModel, api).each(create);\n    }\n\n    function create(seriesModel) {\n      var pipelineId = seriesModel.uid; // Init tasks for each seriesModel only once.\n      // Reuse original task instance.\n\n      var task = newSeriesTaskMap.set(pipelineId, oldSeriesTaskMap && oldSeriesTaskMap.get(pipelineId) || createTask({\n        plan: seriesTaskPlan,\n        reset: seriesTaskReset,\n        count: seriesTaskCount\n      }));\n      task.context = {\n        model: seriesModel,\n        ecModel: ecModel,\n        api: api,\n        // PENDING: `useClearVisual` not used?\n        useClearVisual: stageHandler.isVisual && !stageHandler.isLayout,\n        plan: stageHandler.plan,\n        reset: stageHandler.reset,\n        scheduler: scheduler\n      };\n\n      scheduler._pipe(seriesModel, task);\n    }\n  };\n\n  Scheduler.prototype._createOverallStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n    var scheduler = this;\n    var overallTask = stageHandlerRecord.overallTask = stageHandlerRecord.overallTask // For overall task, the function only be called on reset stage.\n    || createTask({\n      reset: overallTaskReset\n    });\n    overallTask.context = {\n      ecModel: ecModel,\n      api: api,\n      overallReset: stageHandler.overallReset,\n      scheduler: scheduler\n    };\n    var oldAgentStubMap = overallTask.agentStubMap; // The count of stages are totally about only several dozen, so\n    // do not need to reuse the map.\n\n    var newAgentStubMap = overallTask.agentStubMap = createHashMap();\n    var seriesType = stageHandler.seriesType;\n    var getTargetSeries = stageHandler.getTargetSeries;\n    var overallProgress = true;\n    var shouldOverallTaskDirty = false; // FIXME:TS never used, so comment it\n    // let modifyOutputEnd = stageHandler.modifyOutputEnd;\n    // An overall task with seriesType detected or has `getTargetSeries`, we add\n    // stub in each pipelines, it will set the overall task dirty when the pipeline\n    // progress. Moreover, to avoid call the overall task each frame (too frequent),\n    // we set the pipeline block.\n\n    var errMsg = '';\n\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '\"createOnAllSeries\" do not supported for \"overallReset\", ' + 'becuase it will block all streams.';\n    }\n\n    assert(!stageHandler.createOnAllSeries, errMsg);\n\n    if (seriesType) {\n      ecModel.eachRawSeriesByType(seriesType, createStub);\n    } else if (getTargetSeries) {\n      getTargetSeries(ecModel, api).each(createStub);\n    } // Otherwise, (usually it is legancy case), the overall task will only be\n    // executed when upstream dirty. Otherwise the progressive rendering of all\n    // pipelines will be disabled unexpectedly. But it still needs stubs to receive\n    // dirty info from upsteam.\n    else {\n        overallProgress = false;\n        each(ecModel.getSeries(), createStub);\n      }\n\n    function createStub(seriesModel) {\n      var pipelineId = seriesModel.uid;\n      var stub = newAgentStubMap.set(pipelineId, oldAgentStubMap && oldAgentStubMap.get(pipelineId) || ( // When the result of `getTargetSeries` changed, the overallTask\n      // should be set as dirty and re-performed.\n      shouldOverallTaskDirty = true, createTask({\n        reset: stubReset,\n        onDirty: stubOnDirty\n      })));\n      stub.context = {\n        model: seriesModel,\n        overallProgress: overallProgress // FIXME:TS never used, so comment it\n        // modifyOutputEnd: modifyOutputEnd\n\n      };\n      stub.agent = overallTask;\n      stub.__block = overallProgress;\n\n      scheduler._pipe(seriesModel, stub);\n    }\n\n    if (shouldOverallTaskDirty) {\n      overallTask.dirty();\n    }\n  };\n\n  Scheduler.prototype._pipe = function (seriesModel, task) {\n    var pipelineId = seriesModel.uid;\n\n    var pipeline = this._pipelineMap.get(pipelineId);\n\n    !pipeline.head && (pipeline.head = task);\n    pipeline.tail && pipeline.tail.pipe(task);\n    pipeline.tail = task;\n    task.__idxInPipeline = pipeline.count++;\n    task.__pipeline = pipeline;\n  };\n\n  Scheduler.wrapStageHandler = function (stageHandler, visualType) {\n    if (isFunction(stageHandler)) {\n      stageHandler = {\n        overallReset: stageHandler,\n        seriesType: detectSeriseType(stageHandler)\n      };\n    }\n\n    stageHandler.uid = getUID('stageHandler');\n    visualType && (stageHandler.visualType = visualType);\n    return stageHandler;\n  };\n\n  ;\n  return Scheduler;\n}();\n\nfunction overallTaskReset(context) {\n  context.overallReset(context.ecModel, context.api, context.payload);\n}\n\nfunction stubReset(context) {\n  return context.overallProgress && stubProgress;\n}\n\nfunction stubProgress() {\n  this.agent.dirty();\n  this.getDownstream().dirty();\n}\n\nfunction stubOnDirty() {\n  this.agent && this.agent.dirty();\n}\n\nfunction seriesTaskPlan(context) {\n  return context.plan ? context.plan(context.model, context.ecModel, context.api, context.payload) : null;\n}\n\nfunction seriesTaskReset(context) {\n  if (context.useClearVisual) {\n    context.data.clearAllVisual();\n  }\n\n  var resetDefines = context.resetDefines = normalizeToArray(context.reset(context.model, context.ecModel, context.api, context.payload));\n  return resetDefines.length > 1 ? map(resetDefines, function (v, idx) {\n    return makeSeriesTaskProgress(idx);\n  }) : singleSeriesTaskProgress;\n}\n\nvar singleSeriesTaskProgress = makeSeriesTaskProgress(0);\n\nfunction makeSeriesTaskProgress(resetDefineIdx) {\n  return function (params, context) {\n    var data = context.data;\n    var resetDefine = context.resetDefines[resetDefineIdx];\n\n    if (resetDefine && resetDefine.dataEach) {\n      for (var i = params.start; i < params.end; i++) {\n        resetDefine.dataEach(data, i);\n      }\n    } else if (resetDefine && resetDefine.progress) {\n      resetDefine.progress(params, data);\n    }\n  };\n}\n\nfunction seriesTaskCount(context) {\n  return context.data.count();\n}\n/**\n * Only some legacy stage handlers (usually in echarts extensions) are pure function.\n * To ensure that they can work normally, they should work in block mode, that is,\n * they should not be started util the previous tasks finished. So they cause the\n * progressive rendering disabled. We try to detect the series type, to narrow down\n * the block range to only the series type they concern, but not all series.\n */\n\n\nfunction detectSeriseType(legacyFunc) {\n  seriesType = null;\n\n  try {\n    // Assume there is no async when calling `eachSeriesByType`.\n    legacyFunc(ecModelMock, apiMock);\n  } catch (e) {}\n\n  return seriesType;\n}\n\nvar ecModelMock = {};\nvar apiMock = {};\nvar seriesType;\nmockMethods(ecModelMock, GlobalModel);\nmockMethods(apiMock, ExtensionAPI);\n\necModelMock.eachSeriesByType = ecModelMock.eachRawSeriesByType = function (type) {\n  seriesType = type;\n};\n\necModelMock.eachComponent = function (cond) {\n  if (cond.mainType === 'series' && cond.subType) {\n    seriesType = cond.subType;\n  }\n};\n\nfunction mockMethods(target, Clz) {\n  /* eslint-disable */\n  for (var name_1 in Clz.prototype) {\n    // Do not use hasOwnProperty\n    target[name_1] = noop;\n  }\n  /* eslint-enable */\n\n}\n\nexport default Scheduler;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar colorAll = ['#37A2DA', '#32C5E9', '#67E0E3', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#E062AE', '#E690D1', '#e7bcf3', '#9d96f5', '#8378EA', '#96BFFF'];\nexport default {\n  color: colorAll,\n  colorLayer: [['#37A2DA', '#ffd85c', '#fd7b5f'], ['#37A2DA', '#67E0E3', '#FFDB5C', '#ff9f7f', '#E062AE', '#9d96f5'], ['#37A2DA', '#32C5E9', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#e7bcf3', '#8378EA', '#96BFFF'], colorAll]\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar contrastColor = '#B9B8CE';\nvar backgroundColor = '#100C2A';\n\nvar axisCommon = function () {\n  return {\n    axisLine: {\n      lineStyle: {\n        color: contrastColor\n      }\n    },\n    splitLine: {\n      lineStyle: {\n        color: '#484753'\n      }\n    },\n    splitArea: {\n      areaStyle: {\n        color: ['rgba(255,255,255,0.02)', 'rgba(255,255,255,0.05)']\n      }\n    },\n    minorSplitLine: {\n      lineStyle: {\n        color: '#20203B'\n      }\n    }\n  };\n};\n\nvar colorPalette = ['#4992ff', '#7cffb2', '#fddd60', '#ff6e76', '#58d9f9', '#05c091', '#ff8a45', '#8d48e3', '#dd79ff'];\nvar theme = {\n  darkMode: true,\n  color: colorPalette,\n  backgroundColor: backgroundColor,\n  axisPointer: {\n    lineStyle: {\n      color: '#817f91'\n    },\n    crossStyle: {\n      color: '#817f91'\n    },\n    label: {\n      // TODO Contrast of label backgorundColor\n      color: '#fff'\n    }\n  },\n  legend: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  textStyle: {\n    color: contrastColor\n  },\n  title: {\n    textStyle: {\n      color: '#EEF1FA'\n    },\n    subtextStyle: {\n      color: '#B9B8CE'\n    }\n  },\n  toolbox: {\n    iconStyle: {\n      borderColor: contrastColor\n    }\n  },\n  dataZoom: {\n    borderColor: '#71708A',\n    textStyle: {\n      color: contrastColor\n    },\n    brushStyle: {\n      color: 'rgba(135,163,206,0.3)'\n    },\n    handleStyle: {\n      color: '#353450',\n      borderColor: '#C5CBE3'\n    },\n    moveHandleStyle: {\n      color: '#B0B6C3',\n      opacity: 0.3\n    },\n    fillerColor: 'rgba(135,163,206,0.2)',\n    emphasis: {\n      handleStyle: {\n        borderColor: '#91B7F2',\n        color: '#4D587D'\n      },\n      moveHandleStyle: {\n        color: '#636D9A',\n        opacity: 0.7\n      }\n    },\n    dataBackground: {\n      lineStyle: {\n        color: '#71708A',\n        width: 1\n      },\n      areaStyle: {\n        color: '#71708A'\n      }\n    },\n    selectedDataBackground: {\n      lineStyle: {\n        color: '#87A3CE'\n      },\n      areaStyle: {\n        color: '#87A3CE'\n      }\n    }\n  },\n  visualMap: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  timeline: {\n    lineStyle: {\n      color: contrastColor\n    },\n    label: {\n      color: contrastColor\n    },\n    controlStyle: {\n      color: contrastColor,\n      borderColor: contrastColor\n    }\n  },\n  calendar: {\n    itemStyle: {\n      color: backgroundColor\n    },\n    dayLabel: {\n      color: contrastColor\n    },\n    monthLabel: {\n      color: contrastColor\n    },\n    yearLabel: {\n      color: contrastColor\n    }\n  },\n  timeAxis: axisCommon(),\n  logAxis: axisCommon(),\n  valueAxis: axisCommon(),\n  categoryAxis: axisCommon(),\n  line: {\n    symbol: 'circle'\n  },\n  graph: {\n    color: colorPalette\n  },\n  gauge: {\n    title: {\n      color: contrastColor\n    },\n    axisLine: {\n      lineStyle: {\n        color: [[1, 'rgba(207,212,219,0.2)']]\n      }\n    },\n    axisLabel: {\n      color: contrastColor\n    },\n    detail: {\n      color: '#EEF1FA'\n    }\n  },\n  candlestick: {\n    itemStyle: {\n      color: '#f64e56',\n      color0: '#54ea92',\n      borderColor: '#f64e56',\n      borderColor0: '#54ea92' // borderColor: '#ca2824',\n      // borderColor0: '#09a443'\n\n    }\n  }\n};\ntheme.categoryAxis.splitLine.show = false;\nexport default theme;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parseClassType } from './clazz.js';\n/**\n * Usage of query:\n * `chart.on('click', query, handler);`\n * The `query` can be:\n * + The component type query string, only `mainType` or `mainType.subType`,\n *   like: 'xAxis', 'series', 'xAxis.category' or 'series.line'.\n * + The component query object, like:\n *   `{seriesIndex: 2}`, `{seriesName: 'xx'}`, `{seriesId: 'some'}`,\n *   `{xAxisIndex: 2}`, `{xAxisName: 'xx'}`, `{xAxisId: 'some'}`.\n * + The data query object, like:\n *   `{dataIndex: 123}`, `{dataType: 'link'}`, `{name: 'some'}`.\n * + The other query object (cmponent customized query), like:\n *   `{element: 'some'}` (only available in custom series).\n *\n * Caveat: If a prop in the `query` object is `null/undefined`, it is the\n * same as there is no such prop in the `query` object.\n */\n\nvar ECEventProcessor =\n/** @class */\nfunction () {\n  function ECEventProcessor() {}\n\n  ECEventProcessor.prototype.normalizeQuery = function (query) {\n    var cptQuery = {};\n    var dataQuery = {};\n    var otherQuery = {}; // `query` is `mainType` or `mainType.subType` of component.\n\n    if (zrUtil.isString(query)) {\n      var condCptType = parseClassType(query); // `.main` and `.sub` may be ''.\n\n      cptQuery.mainType = condCptType.main || null;\n      cptQuery.subType = condCptType.sub || null;\n    } // `query` is an object, convert to {mainType, index, name, id}.\n    else {\n        // `xxxIndex`, `xxxName`, `xxxId`, `name`, `dataIndex`, `dataType` is reserved,\n        // can not be used in `compomentModel.filterForExposedEvent`.\n        var suffixes_1 = ['Index', 'Name', 'Id'];\n        var dataKeys_1 = {\n          name: 1,\n          dataIndex: 1,\n          dataType: 1\n        };\n        zrUtil.each(query, function (val, key) {\n          var reserved = false;\n\n          for (var i = 0; i < suffixes_1.length; i++) {\n            var propSuffix = suffixes_1[i];\n            var suffixPos = key.lastIndexOf(propSuffix);\n\n            if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\n              var mainType = key.slice(0, suffixPos); // Consider `dataIndex`.\n\n              if (mainType !== 'data') {\n                cptQuery.mainType = mainType;\n                cptQuery[propSuffix.toLowerCase()] = val;\n                reserved = true;\n              }\n            }\n          }\n\n          if (dataKeys_1.hasOwnProperty(key)) {\n            dataQuery[key] = val;\n            reserved = true;\n          }\n\n          if (!reserved) {\n            otherQuery[key] = val;\n          }\n        });\n      }\n\n    return {\n      cptQuery: cptQuery,\n      dataQuery: dataQuery,\n      otherQuery: otherQuery\n    };\n  };\n\n  ECEventProcessor.prototype.filter = function (eventType, query) {\n    // They should be assigned before each trigger call.\n    var eventInfo = this.eventInfo;\n\n    if (!eventInfo) {\n      return true;\n    }\n\n    var targetEl = eventInfo.targetEl;\n    var packedEvent = eventInfo.packedEvent;\n    var model = eventInfo.model;\n    var view = eventInfo.view; // For event like 'globalout'.\n\n    if (!model || !view) {\n      return true;\n    }\n\n    var cptQuery = query.cptQuery;\n    var dataQuery = query.dataQuery;\n    return check(cptQuery, model, 'mainType') && check(cptQuery, model, 'subType') && check(cptQuery, model, 'index', 'componentIndex') && check(cptQuery, model, 'name') && check(cptQuery, model, 'id') && check(dataQuery, packedEvent, 'name') && check(dataQuery, packedEvent, 'dataIndex') && check(dataQuery, packedEvent, 'dataType') && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\n\n    function check(query, host, prop, propOnHost) {\n      return query[prop] == null || host[propOnHost || prop] === query[prop];\n    }\n  };\n\n  ECEventProcessor.prototype.afterTrigger = function () {\n    // Make sure the eventInfo wont be used in next trigger.\n    this.eventInfo = null;\n  };\n\n  return ECEventProcessor;\n}();\n\nexport { ECEventProcessor };\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend, isFunction, keys } from 'zrender/lib/core/util.js';\nvar SYMBOL_PROPS_WITH_CB = ['symbol', 'symbolSize', 'symbolRotate', 'symbolOffset'];\nvar SYMBOL_PROPS = SYMBOL_PROPS_WITH_CB.concat(['symbolKeepAspect']); // Encoding visual for all series include which is filtered for legend drawing\n\nvar seriesSymbolTask = {\n  createOnAllSeries: true,\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n\n    if (seriesModel.legendIcon) {\n      data.setVisual('legendIcon', seriesModel.legendIcon);\n    }\n\n    if (!seriesModel.hasSymbolVisual) {\n      return;\n    }\n\n    var symbolOptions = {};\n    var symbolOptionsCb = {};\n    var hasCallback = false;\n\n    for (var i = 0; i < SYMBOL_PROPS_WITH_CB.length; i++) {\n      var symbolPropName = SYMBOL_PROPS_WITH_CB[i];\n      var val = seriesModel.get(symbolPropName);\n\n      if (isFunction(val)) {\n        hasCallback = true;\n        symbolOptionsCb[symbolPropName] = val;\n      } else {\n        symbolOptions[symbolPropName] = val;\n      }\n    }\n\n    symbolOptions.symbol = symbolOptions.symbol || seriesModel.defaultSymbol;\n    data.setVisual(extend({\n      legendIcon: seriesModel.legendIcon || symbolOptions.symbol,\n      symbolKeepAspect: seriesModel.get('symbolKeepAspect')\n    }, symbolOptions)); // Only visible series has each data be visual encoded\n\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n\n    var symbolPropsCb = keys(symbolOptionsCb);\n\n    function dataEach(data, idx) {\n      var rawValue = seriesModel.getRawValue(idx);\n      var params = seriesModel.getDataParams(idx);\n\n      for (var i = 0; i < symbolPropsCb.length; i++) {\n        var symbolPropName = symbolPropsCb[i];\n        data.setItemVisual(idx, symbolPropName, symbolOptionsCb[symbolPropName](rawValue, params));\n      }\n    }\n\n    return {\n      dataEach: hasCallback ? dataEach : null\n    };\n  }\n};\nvar dataSymbolTask = {\n  createOnAllSeries: true,\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    if (!seriesModel.hasSymbolVisual) {\n      return;\n    } // Only visible series has each data be visual encoded\n\n\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n\n    function dataEach(data, idx) {\n      var itemModel = data.getItemModel(idx);\n\n      for (var i = 0; i < SYMBOL_PROPS.length; i++) {\n        var symbolPropName = SYMBOL_PROPS[i];\n        var val = itemModel.getShallow(symbolPropName, true);\n\n        if (val != null) {\n          data.setItemVisual(idx, symbolPropName, val);\n        }\n      }\n    }\n\n    return {\n      dataEach: data.hasItemOption ? dataEach : null\n    };\n  }\n};\nexport { seriesSymbolTask, dataSymbolTask };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function getItemVisualFromData(data, dataIndex, key) {\n  switch (key) {\n    case 'color':\n      var style = data.getItemVisual(dataIndex, 'style');\n      return style[data.getVisual('drawType')];\n\n    case 'opacity':\n      return data.getItemVisual(dataIndex, 'style').opacity;\n\n    case 'symbol':\n    case 'symbolSize':\n    case 'liftZ':\n      return data.getItemVisual(dataIndex, key);\n\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\"Unknown visual type \" + key);\n      }\n\n  }\n}\nexport function getVisualFromData(data, key) {\n  switch (key) {\n    case 'color':\n      var style = data.getVisual('style');\n      return style[data.getVisual('drawType')];\n\n    case 'opacity':\n      return data.getVisual('style').opacity;\n\n    case 'symbol':\n    case 'symbolSize':\n    case 'liftZ':\n      return data.getVisual(key);\n\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\"Unknown visual type \" + key);\n      }\n\n  }\n}\nexport function setItemVisualFromData(data, dataIndex, key, value) {\n  switch (key) {\n    case 'color':\n      // Make sure not sharing style object.\n      var style = data.ensureUniqueItemVisual(dataIndex, 'style');\n      style[data.getVisual('drawType')] = value; // Mark the color has been changed, not from palette anymore\n\n      data.setItemVisual(dataIndex, 'colorFromPalette', false);\n      break;\n\n    case 'opacity':\n      data.ensureUniqueItemVisual(dataIndex, 'style').opacity = value;\n      break;\n\n    case 'symbol':\n    case 'symbolSize':\n    case 'liftZ':\n      data.setItemVisual(dataIndex, key, value);\n      break;\n\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\"Unknown visual type \" + key);\n      }\n\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend, each, isArray, isString } from 'zrender/lib/core/util.js';\nimport { deprecateReplaceLog, deprecateLog } from '../util/log.js';\nimport { queryDataIndex } from '../util/model.js'; // Legacy data selection action.\n// Inlucdes: pieSelect, pieUnSelect, pieToggleSelect, mapSelect, mapUnSelect, mapToggleSelect\n\nexport function createLegacyDataSelectAction(seriesType, ecRegisterAction) {\n  function getSeriesIndices(ecModel, payload) {\n    var seriesIndices = [];\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: seriesType,\n      query: payload\n    }, function (seriesModel) {\n      seriesIndices.push(seriesModel.seriesIndex);\n    });\n    return seriesIndices;\n  }\n\n  each([[seriesType + 'ToggleSelect', 'toggleSelect'], [seriesType + 'Select', 'select'], [seriesType + 'UnSelect', 'unselect']], function (eventsMap) {\n    ecRegisterAction(eventsMap[0], function (payload, ecModel, api) {\n      payload = extend({}, payload);\n\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog(payload.type, eventsMap[1]);\n      }\n\n      api.dispatchAction(extend(payload, {\n        type: eventsMap[1],\n        seriesIndex: getSeriesIndices(ecModel, payload)\n      }));\n    });\n  });\n}\n\nfunction handleSeriesLegacySelectEvents(type, eventPostfix, ecIns, ecModel, payload) {\n  var legacyEventName = type + eventPostfix;\n\n  if (!ecIns.isSilent(legacyEventName)) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateLog(\"event \" + legacyEventName + \" is deprecated.\");\n    }\n\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'pie'\n    }, function (seriesModel) {\n      var seriesIndex = seriesModel.seriesIndex;\n      var selectedMap = seriesModel.option.selectedMap;\n      var selected = payload.selected;\n\n      for (var i = 0; i < selected.length; i++) {\n        if (selected[i].seriesIndex === seriesIndex) {\n          var data = seriesModel.getData();\n          var dataIndex = queryDataIndex(data, payload.fromActionPayload);\n          ecIns.trigger(legacyEventName, {\n            type: legacyEventName,\n            seriesId: seriesModel.id,\n            name: isArray(dataIndex) ? data.getName(dataIndex[0]) : data.getName(dataIndex),\n            selected: isString(selectedMap) ? selectedMap : extend({}, selectedMap)\n          });\n        }\n      }\n    });\n  }\n}\n\nexport function handleLegacySelectEvents(messageCenter, ecIns, api) {\n  messageCenter.on('selectchanged', function (params) {\n    var ecModel = api.getModel();\n\n    if (params.isFromClick) {\n      handleSeriesLegacySelectEvents('map', 'selectchanged', ecIns, ecModel, params);\n      handleSeriesLegacySelectEvents('pie', 'selectchanged', ecIns, ecModel, params);\n    } else if (params.fromAction === 'select') {\n      handleSeriesLegacySelectEvents('map', 'selected', ecIns, ecModel, params);\n      handleSeriesLegacySelectEvents('pie', 'selected', ecIns, ecModel, params);\n    } else if (params.fromAction === 'unselect') {\n      handleSeriesLegacySelectEvents('map', 'unselected', ecIns, ecModel, params);\n      handleSeriesLegacySelectEvents('pie', 'unselected', ecIns, ecModel, params);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport WeakMap from 'zrender/lib/core/WeakMap.js';\nimport LRU from 'zrender/lib/core/LRU.js';\nimport { defaults, map, isArray, isString, isNumber } from 'zrender/lib/core/util.js';\nimport { getLeastCommonMultiple } from './number.js';\nimport { createSymbol } from './symbol.js';\nimport { brushSingle } from 'zrender/lib/canvas/graphic.js';\nimport { platformApi } from 'zrender/lib/core/platform.js';\nvar decalMap = new WeakMap();\nvar decalCache = new LRU(100);\nvar decalKeys = ['symbol', 'symbolSize', 'symbolKeepAspect', 'color', 'backgroundColor', 'dashArrayX', 'dashArrayY', 'maxTileWidth', 'maxTileHeight'];\n/**\n * Create or update pattern image from decal options\n *\n * @param {InnerDecalObject | 'none'} decalObject decal options, 'none' if no decal\n * @return {Pattern} pattern with generated image, null if no decal\n */\n\nexport function createOrUpdatePatternFromDecal(decalObject, api) {\n  if (decalObject === 'none') {\n    return null;\n  }\n\n  var dpr = api.getDevicePixelRatio();\n  var zr = api.getZr();\n  var isSVG = zr.painter.type === 'svg';\n\n  if (decalObject.dirty) {\n    decalMap[\"delete\"](decalObject);\n  }\n\n  var oldPattern = decalMap.get(decalObject);\n\n  if (oldPattern) {\n    return oldPattern;\n  }\n\n  var decalOpt = defaults(decalObject, {\n    symbol: 'rect',\n    symbolSize: 1,\n    symbolKeepAspect: true,\n    color: 'rgba(0, 0, 0, 0.2)',\n    backgroundColor: null,\n    dashArrayX: 5,\n    dashArrayY: 5,\n    rotation: 0,\n    maxTileWidth: 512,\n    maxTileHeight: 512\n  });\n\n  if (decalOpt.backgroundColor === 'none') {\n    decalOpt.backgroundColor = null;\n  }\n\n  var pattern = {\n    repeat: 'repeat'\n  };\n  setPatternnSource(pattern);\n  pattern.rotation = decalOpt.rotation;\n  pattern.scaleX = pattern.scaleY = isSVG ? 1 : 1 / dpr;\n  decalMap.set(decalObject, pattern);\n  decalObject.dirty = false;\n  return pattern;\n\n  function setPatternnSource(pattern) {\n    var keys = [dpr];\n    var isValidKey = true;\n\n    for (var i = 0; i < decalKeys.length; ++i) {\n      var value = decalOpt[decalKeys[i]];\n\n      if (value != null && !isArray(value) && !isString(value) && !isNumber(value) && typeof value !== 'boolean') {\n        isValidKey = false;\n        break;\n      }\n\n      keys.push(value);\n    }\n\n    var cacheKey;\n\n    if (isValidKey) {\n      cacheKey = keys.join(',') + (isSVG ? '-svg' : '');\n      var cache = decalCache.get(cacheKey);\n\n      if (cache) {\n        isSVG ? pattern.svgElement = cache : pattern.image = cache;\n      }\n    }\n\n    var dashArrayX = normalizeDashArrayX(decalOpt.dashArrayX);\n    var dashArrayY = normalizeDashArrayY(decalOpt.dashArrayY);\n    var symbolArray = normalizeSymbolArray(decalOpt.symbol);\n    var lineBlockLengthsX = getLineBlockLengthX(dashArrayX);\n    var lineBlockLengthY = getLineBlockLengthY(dashArrayY);\n    var canvas = !isSVG && platformApi.createCanvas();\n    var svgRoot = isSVG && {\n      tag: 'g',\n      attrs: {},\n      key: 'dcl',\n      children: []\n    };\n    var pSize = getPatternSize();\n    var ctx;\n\n    if (canvas) {\n      canvas.width = pSize.width * dpr;\n      canvas.height = pSize.height * dpr;\n      ctx = canvas.getContext('2d');\n    }\n\n    brushDecal();\n\n    if (isValidKey) {\n      decalCache.put(cacheKey, canvas || svgRoot);\n    }\n\n    pattern.image = canvas;\n    pattern.svgElement = svgRoot;\n    pattern.svgWidth = pSize.width;\n    pattern.svgHeight = pSize.height;\n    /**\n     * Get minumum length that can make a repeatable pattern.\n     *\n     * @return {Object} pattern width and height\n     */\n\n    function getPatternSize() {\n      /**\n       * For example, if dash is [[3, 2], [2, 1]] for X, it looks like\n       * |---  ---  ---  ---  --- ...\n       * |-- -- -- -- -- -- -- -- ...\n       * |---  ---  ---  ---  --- ...\n       * |-- -- -- -- -- -- -- -- ...\n       * So the minumum length of X is 15,\n       * which is the least common multiple of `3 + 2` and `2 + 1`\n       * |---  ---  ---  |---  --- ...\n       * |-- -- -- -- -- |-- -- -- ...\n       */\n      var width = 1;\n\n      for (var i = 0, xlen = lineBlockLengthsX.length; i < xlen; ++i) {\n        width = getLeastCommonMultiple(width, lineBlockLengthsX[i]);\n      }\n\n      var symbolRepeats = 1;\n\n      for (var i = 0, xlen = symbolArray.length; i < xlen; ++i) {\n        symbolRepeats = getLeastCommonMultiple(symbolRepeats, symbolArray[i].length);\n      }\n\n      width *= symbolRepeats;\n      var height = lineBlockLengthY * lineBlockLengthsX.length * symbolArray.length;\n\n      if (process.env.NODE_ENV !== 'production') {\n        var warn = function (attrName) {\n          /* eslint-disable-next-line */\n          console.warn(\"Calculated decal size is greater than \" + attrName + \" due to decal option settings so \" + attrName + \" is used for the decal size. Please consider changing the decal option to make a smaller decal or set \" + attrName + \" to be larger to avoid incontinuity.\");\n        };\n\n        if (width > decalOpt.maxTileWidth) {\n          warn('maxTileWidth');\n        }\n\n        if (height > decalOpt.maxTileHeight) {\n          warn('maxTileHeight');\n        }\n      }\n\n      return {\n        width: Math.max(1, Math.min(width, decalOpt.maxTileWidth)),\n        height: Math.max(1, Math.min(height, decalOpt.maxTileHeight))\n      };\n    }\n\n    function brushDecal() {\n      if (ctx) {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n        if (decalOpt.backgroundColor) {\n          ctx.fillStyle = decalOpt.backgroundColor;\n          ctx.fillRect(0, 0, canvas.width, canvas.height);\n        }\n      }\n\n      var ySum = 0;\n\n      for (var i = 0; i < dashArrayY.length; ++i) {\n        ySum += dashArrayY[i];\n      }\n\n      if (ySum <= 0) {\n        // dashArrayY is 0, draw nothing\n        return;\n      }\n\n      var y = -lineBlockLengthY;\n      var yId = 0;\n      var yIdTotal = 0;\n      var xId0 = 0;\n\n      while (y < pSize.height) {\n        if (yId % 2 === 0) {\n          var symbolYId = yIdTotal / 2 % symbolArray.length;\n          var x = 0;\n          var xId1 = 0;\n          var xId1Total = 0;\n\n          while (x < pSize.width * 2) {\n            var xSum = 0;\n\n            for (var i = 0; i < dashArrayX[xId0].length; ++i) {\n              xSum += dashArrayX[xId0][i];\n            }\n\n            if (xSum <= 0) {\n              // Skip empty line\n              break;\n            } // E.g., [15, 5, 20, 5] draws only for 15 and 20\n\n\n            if (xId1 % 2 === 0) {\n              var size = (1 - decalOpt.symbolSize) * 0.5;\n              var left = x + dashArrayX[xId0][xId1] * size;\n              var top_1 = y + dashArrayY[yId] * size;\n              var width = dashArrayX[xId0][xId1] * decalOpt.symbolSize;\n              var height = dashArrayY[yId] * decalOpt.symbolSize;\n              var symbolXId = xId1Total / 2 % symbolArray[symbolYId].length;\n              brushSymbol(left, top_1, width, height, symbolArray[symbolYId][symbolXId]);\n            }\n\n            x += dashArrayX[xId0][xId1];\n            ++xId1Total;\n            ++xId1;\n\n            if (xId1 === dashArrayX[xId0].length) {\n              xId1 = 0;\n            }\n          }\n\n          ++xId0;\n\n          if (xId0 === dashArrayX.length) {\n            xId0 = 0;\n          }\n        }\n\n        y += dashArrayY[yId];\n        ++yIdTotal;\n        ++yId;\n\n        if (yId === dashArrayY.length) {\n          yId = 0;\n        }\n      }\n\n      function brushSymbol(x, y, width, height, symbolType) {\n        var scale = isSVG ? 1 : dpr;\n        var symbol = createSymbol(symbolType, x * scale, y * scale, width * scale, height * scale, decalOpt.color, decalOpt.symbolKeepAspect);\n\n        if (isSVG) {\n          var symbolVNode = zr.painter.renderOneToVNode(symbol);\n\n          if (symbolVNode) {\n            svgRoot.children.push(symbolVNode);\n          }\n        } else {\n          // Paint to canvas for all other renderers.\n          brushSingle(ctx, symbol);\n        }\n      }\n    }\n  }\n}\n/**\n * Convert symbol array into normalized array\n *\n * @param {string | (string | string[])[]} symbol symbol input\n * @return {string[][]} normolized symbol array\n */\n\nfunction normalizeSymbolArray(symbol) {\n  if (!symbol || symbol.length === 0) {\n    return [['rect']];\n  }\n\n  if (isString(symbol)) {\n    return [[symbol]];\n  }\n\n  var isAllString = true;\n\n  for (var i = 0; i < symbol.length; ++i) {\n    if (!isString(symbol[i])) {\n      isAllString = false;\n      break;\n    }\n  }\n\n  if (isAllString) {\n    return normalizeSymbolArray([symbol]);\n  }\n\n  var result = [];\n\n  for (var i = 0; i < symbol.length; ++i) {\n    if (isString(symbol[i])) {\n      result.push([symbol[i]]);\n    } else {\n      result.push(symbol[i]);\n    }\n  }\n\n  return result;\n}\n/**\n * Convert dash input into dashArray\n *\n * @param {DecalDashArrayX} dash dash input\n * @return {number[][]} normolized dash array\n */\n\n\nfunction normalizeDashArrayX(dash) {\n  if (!dash || dash.length === 0) {\n    return [[0, 0]];\n  }\n\n  if (isNumber(dash)) {\n    var dashValue = Math.ceil(dash);\n    return [[dashValue, dashValue]];\n  }\n  /**\n   * [20, 5] should be normalized into [[20, 5]],\n   * while [20, [5, 10]] should be normalized into [[20, 20], [5, 10]]\n   */\n\n\n  var isAllNumber = true;\n\n  for (var i = 0; i < dash.length; ++i) {\n    if (!isNumber(dash[i])) {\n      isAllNumber = false;\n      break;\n    }\n  }\n\n  if (isAllNumber) {\n    return normalizeDashArrayX([dash]);\n  }\n\n  var result = [];\n\n  for (var i = 0; i < dash.length; ++i) {\n    if (isNumber(dash[i])) {\n      var dashValue = Math.ceil(dash[i]);\n      result.push([dashValue, dashValue]);\n    } else {\n      var dashValue = map(dash[i], function (n) {\n        return Math.ceil(n);\n      });\n\n      if (dashValue.length % 2 === 1) {\n        // [4, 2, 1] means |----  -    -- |----  -    -- |\n        // so normalize it to be [4, 2, 1, 4, 2, 1]\n        result.push(dashValue.concat(dashValue));\n      } else {\n        result.push(dashValue);\n      }\n    }\n  }\n\n  return result;\n}\n/**\n * Convert dash input into dashArray\n *\n * @param {DecalDashArrayY} dash dash input\n * @return {number[]} normolized dash array\n */\n\n\nfunction normalizeDashArrayY(dash) {\n  if (!dash || typeof dash === 'object' && dash.length === 0) {\n    return [0, 0];\n  }\n\n  if (isNumber(dash)) {\n    var dashValue_1 = Math.ceil(dash);\n    return [dashValue_1, dashValue_1];\n  }\n\n  var dashValue = map(dash, function (n) {\n    return Math.ceil(n);\n  });\n  return dash.length % 2 ? dashValue.concat(dashValue) : dashValue;\n}\n/**\n * Get block length of each line. A block is the length of dash line and space.\n * For example, a line with [4, 1] has a dash line of 4 and a space of 1 after\n * that, so the block length of this line is 5.\n *\n * @param {number[][]} dash dash arrary of X or Y\n * @return {number[]} block length of each line\n */\n\n\nfunction getLineBlockLengthX(dash) {\n  return map(dash, function (line) {\n    return getLineBlockLengthY(line);\n  });\n}\n\nfunction getLineBlockLengthY(dash) {\n  var blockLength = 0;\n\n  for (var i = 0; i < dash.length; ++i) {\n    blockLength += dash[i];\n  }\n\n  if (dash.length % 2 === 1) {\n    // [4, 2, 1] means |----  -    -- |----  -    -- |\n    // So total length is (4 + 2 + 1) * 2\n    return blockLength * 2;\n  }\n\n  return blockLength;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createOrUpdatePatternFromDecal } from '../util/decal.js';\nexport default function decalVisual(ecModel, api) {\n  ecModel.eachRawSeries(function (seriesModel) {\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n\n    if (data.hasItemVisual()) {\n      data.each(function (idx) {\n        var decal = data.getItemVisual(idx, 'decal');\n\n        if (decal) {\n          var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\n          itemStyle.decal = createOrUpdatePatternFromDecal(decal, api);\n        }\n      });\n    }\n\n    var decal = data.getVisual('decal');\n\n    if (decal) {\n      var style = data.getVisual('style');\n      style.decal = createOrUpdatePatternFromDecal(decal, api);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Eventful from 'zrender/lib/core/Eventful.js';\n;\nvar lifecycle = new Eventful();\nexport default lifecycle;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nimport * as zrender from 'zrender/lib/zrender.js';\nimport { assert, each, isFunction, isObject, indexOf, bind, clone, setAsPrimitive, extend, createHashMap, map, defaults, isDom, isArray, noop, isString, retrieve2 } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport timsort from 'zrender/lib/core/timsort.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport GlobalModel from '../model/Global.js';\nimport ExtensionAPI from './ExtensionAPI.js';\nimport CoordinateSystemManager from './CoordinateSystem.js';\nimport OptionManager from '../model/OptionManager.js';\nimport backwardCompat from '../preprocessor/backwardCompat.js';\nimport dataStack from '../processor/dataStack.js';\nimport SeriesModel from '../model/Series.js';\nimport ComponentView from '../view/Component.js';\nimport ChartView from '../view/Chart.js';\nimport * as graphic from '../util/graphic.js';\nimport { getECData } from '../util/innerStore.js';\nimport { isHighDownDispatcher, HOVER_STATE_EMPHASIS, HOVER_STATE_BLUR, blurSeriesFromHighlightPayload, toggleSelectionFromPayload, updateSeriesElementSelection, getAllSelectedIndices, isSelectChangePayload, isHighDownPayload, HIGHLIGHT_ACTION_TYPE, DOWNPLAY_ACTION_TYPE, SELECT_ACTION_TYPE, UNSELECT_ACTION_TYPE, TOGGLE_SELECT_ACTION_TYPE, savePathStates, enterEmphasis, leaveEmphasis, leaveBlur, enterSelect, leaveSelect, enterBlur, allLeaveBlur, findComponentHighDownDispatchers, blurComponent, handleGlobalMouseOverForHighDown, handleGlobalMouseOutForHighDown } from '../util/states.js';\nimport * as modelUtil from '../util/model.js';\nimport { throttle } from '../util/throttle.js';\nimport { seriesStyleTask, dataStyleTask, dataColorPaletteTask } from '../visual/style.js';\nimport loadingDefault from '../loading/default.js';\nimport Scheduler from './Scheduler.js';\nimport lightTheme from '../theme/light.js';\nimport darkTheme from '../theme/dark.js';\nimport { parseClassType } from '../util/clazz.js';\nimport { ECEventProcessor } from '../util/ECEventProcessor.js';\nimport { seriesSymbolTask, dataSymbolTask } from '../visual/symbol.js';\nimport { getVisualFromData, getItemVisualFromData } from '../visual/helper.js';\nimport { deprecateLog, deprecateReplaceLog, error } from '../util/log.js';\nimport { handleLegacySelectEvents } from '../legacy/dataSelectAction.js';\nimport { registerExternalTransform } from '../data/helper/transform.js';\nimport { createLocaleObject, SYSTEM_LANG } from './locale.js';\nimport { findEventDispatcher } from '../util/event.js';\nimport decal from '../visual/decal.js';\nimport lifecycle from './lifecycle.js';\nimport { platformApi, setPlatformAPI } from 'zrender/lib/core/platform.js';\nimport { getImpl } from './impl.js';\nvar hasWindow = typeof window !== 'undefined';\nexport var version = '5.4.0';\nexport var dependencies = {\n  zrender: '5.4.0'\n};\nvar TEST_FRAME_REMAIN_TIME = 1;\nvar PRIORITY_PROCESSOR_SERIES_FILTER = 800; // Some data processors depends on the stack result dimension (to calculate data extent).\n// So data stack stage should be in front of data processing stage.\n\nvar PRIORITY_PROCESSOR_DATASTACK = 900; // \"Data filter\" will block the stream, so it should be\n// put at the begining of data processing.\n\nvar PRIORITY_PROCESSOR_FILTER = 1000;\nvar PRIORITY_PROCESSOR_DEFAULT = 2000;\nvar PRIORITY_PROCESSOR_STATISTIC = 5000;\nvar PRIORITY_VISUAL_LAYOUT = 1000;\nvar PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\nvar PRIORITY_VISUAL_GLOBAL = 2000;\nvar PRIORITY_VISUAL_CHART = 3000;\nvar PRIORITY_VISUAL_COMPONENT = 4000; // Visual property in data. Greater than `PRIORITY_VISUAL_COMPONENT` to enable to\n// overwrite the viusal result of component (like `visualMap`)\n// using data item specific setting (like itemStyle.xxx on data item)\n\nvar PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500; // Greater than `PRIORITY_VISUAL_CHART_DATA_CUSTOM` to enable to layout based on\n// visual result like `symbolSize`.\n\nvar PRIORITY_VISUAL_POST_CHART_LAYOUT = 4600;\nvar PRIORITY_VISUAL_BRUSH = 5000;\nvar PRIORITY_VISUAL_ARIA = 6000;\nvar PRIORITY_VISUAL_DECAL = 7000;\nexport var PRIORITY = {\n  PROCESSOR: {\n    FILTER: PRIORITY_PROCESSOR_FILTER,\n    SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\n    STATISTIC: PRIORITY_PROCESSOR_STATISTIC\n  },\n  VISUAL: {\n    LAYOUT: PRIORITY_VISUAL_LAYOUT,\n    PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\n    GLOBAL: PRIORITY_VISUAL_GLOBAL,\n    CHART: PRIORITY_VISUAL_CHART,\n    POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\n    COMPONENT: PRIORITY_VISUAL_COMPONENT,\n    BRUSH: PRIORITY_VISUAL_BRUSH,\n    CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM,\n    ARIA: PRIORITY_VISUAL_ARIA,\n    DECAL: PRIORITY_VISUAL_DECAL\n  }\n}; // Main process have three entries: `setOption`, `dispatchAction` and `resize`,\n// where they must not be invoked nestedly, except the only case: invoke\n// dispatchAction with updateMethod \"none\" in main process.\n// This flag is used to carry out this rule.\n// All events will be triggered out side main process (i.e. when !this[IN_MAIN_PROCESS]).\n\nvar IN_MAIN_PROCESS_KEY = '__flagInMainProcess';\nvar PENDING_UPDATE = '__pendingUpdate';\nvar STATUS_NEEDS_UPDATE_KEY = '__needsUpdateStatus';\nvar ACTION_REG = /^[a-zA-Z0-9_]+$/;\nvar CONNECT_STATUS_KEY = '__connectUpdateStatus';\nvar CONNECT_STATUS_PENDING = 0;\nvar CONNECT_STATUS_UPDATING = 1;\nvar CONNECT_STATUS_UPDATED = 2;\n;\n;\n\nfunction createRegisterEventWithLowercaseECharts(method) {\n  return function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    if (this.isDisposed()) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\n\nfunction createRegisterEventWithLowercaseMessageCenter(method) {\n  return function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\n\nfunction toLowercaseNameAndCallEventful(host, method, args) {\n  // `args[0]` is event name. Event name is all lowercase.\n  args[0] = args[0] && args[0].toLowerCase();\n  return Eventful.prototype[method].apply(host, args);\n}\n\nvar MessageCenter =\n/** @class */\nfunction (_super) {\n  __extends(MessageCenter, _super);\n\n  function MessageCenter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return MessageCenter;\n}(Eventful);\n\nvar messageCenterProto = MessageCenter.prototype;\nmessageCenterProto.on = createRegisterEventWithLowercaseMessageCenter('on');\nmessageCenterProto.off = createRegisterEventWithLowercaseMessageCenter('off'); // ---------------------------------------\n// Internal method names for class ECharts\n// ---------------------------------------\n\nvar prepare;\nvar prepareView;\nvar updateDirectly;\nvar updateMethods;\nvar doConvertPixel;\nvar updateStreamModes;\nvar doDispatchAction;\nvar flushPendingActions;\nvar triggerUpdatedEvent;\nvar bindRenderedEvent;\nvar bindMouseEvent;\nvar render;\nvar renderComponents;\nvar renderSeries;\nvar createExtensionAPI;\nvar enableConnect;\nvar markStatusToUpdate;\nvar applyChangedStates;\n\nvar ECharts =\n/** @class */\nfunction (_super) {\n  __extends(ECharts, _super);\n\n  function ECharts(dom, // Theme name or themeOption.\n  theme, opts) {\n    var _this = _super.call(this, new ECEventProcessor()) || this;\n\n    _this._chartsViews = [];\n    _this._chartsMap = {};\n    _this._componentsViews = [];\n    _this._componentsMap = {}; // Can't dispatch action during rendering procedure\n\n    _this._pendingActions = [];\n    opts = opts || {}; // Get theme by name\n\n    if (isString(theme)) {\n      theme = themeStorage[theme];\n    }\n\n    _this._dom = dom;\n    var defaultRenderer = 'canvas';\n    var defaultCoarsePointer = 'auto';\n    var defaultUseDirtyRect = false;\n\n    if (process.env.NODE_ENV !== 'production') {\n      var root =\n      /* eslint-disable-next-line */\n      hasWindow ? window : global;\n      defaultRenderer = root.__ECHARTS__DEFAULT__RENDERER__ || defaultRenderer;\n      defaultCoarsePointer = retrieve2(root.__ECHARTS__DEFAULT__COARSE_POINTER, defaultCoarsePointer);\n      var devUseDirtyRect = root.__ECHARTS__DEFAULT__USE_DIRTY_RECT__;\n      defaultUseDirtyRect = devUseDirtyRect == null ? defaultUseDirtyRect : devUseDirtyRect;\n    }\n\n    var zr = _this._zr = zrender.init(dom, {\n      renderer: opts.renderer || defaultRenderer,\n      devicePixelRatio: opts.devicePixelRatio,\n      width: opts.width,\n      height: opts.height,\n      ssr: opts.ssr,\n      useDirtyRect: retrieve2(opts.useDirtyRect, defaultUseDirtyRect),\n      useCoarsePointer: retrieve2(opts.useCoarsePointer, defaultCoarsePointer),\n      pointerSize: opts.pointerSize\n    });\n    _this._ssr = opts.ssr; // Expect 60 fps.\n\n    _this._throttledZrFlush = throttle(bind(zr.flush, zr), 17);\n    theme = clone(theme);\n    theme && backwardCompat(theme, true);\n    _this._theme = theme;\n    _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);\n    _this._coordSysMgr = new CoordinateSystemManager();\n    var api = _this._api = createExtensionAPI(_this); // Sort on demand\n\n    function prioritySortFunc(a, b) {\n      return a.__prio - b.__prio;\n    }\n\n    timsort(visualFuncs, prioritySortFunc);\n    timsort(dataProcessorFuncs, prioritySortFunc);\n    _this._scheduler = new Scheduler(_this, api, dataProcessorFuncs, visualFuncs);\n    _this._messageCenter = new MessageCenter(); // Init mouse events\n\n    _this._initEvents(); // In case some people write `window.onresize = chart.resize`\n\n\n    _this.resize = bind(_this.resize, _this);\n    zr.animation.on('frame', _this._onframe, _this);\n    bindRenderedEvent(zr, _this);\n    bindMouseEvent(zr, _this); // ECharts instance can be used as value.\n\n    setAsPrimitive(_this);\n    return _this;\n  }\n\n  ECharts.prototype._onframe = function () {\n    if (this._disposed) {\n      return;\n    }\n\n    applyChangedStates(this);\n    var scheduler = this._scheduler; // Lazy update\n\n    if (this[PENDING_UPDATE]) {\n      var silent = this[PENDING_UPDATE].silent;\n      this[IN_MAIN_PROCESS_KEY] = true;\n\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, this[PENDING_UPDATE].updateParams);\n      } catch (e) {\n        this[IN_MAIN_PROCESS_KEY] = false;\n        this[PENDING_UPDATE] = null;\n        throw e;\n      } // At present, in each frame, zrender performs:\n      //   (1) animation step forward.\n      //   (2) trigger('frame') (where this `_onframe` is called)\n      //   (3) zrender flush (render).\n      // If we do nothing here, since we use `setToFinal: true`, the step (3) above\n      // will render the final state of the elements before the real animation started.\n\n\n      this._zr.flush();\n\n      this[IN_MAIN_PROCESS_KEY] = false;\n      this[PENDING_UPDATE] = null;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    } // Avoid do both lazy update and progress in one frame.\n    else if (scheduler.unfinished) {\n        // Stream progress.\n        var remainTime = TEST_FRAME_REMAIN_TIME;\n        var ecModel = this._model;\n        var api = this._api;\n        scheduler.unfinished = false;\n\n        do {\n          var startTime = +new Date();\n          scheduler.performSeriesTasks(ecModel); // Currently dataProcessorFuncs do not check threshold.\n\n          scheduler.performDataProcessorTasks(ecModel);\n          updateStreamModes(this, ecModel); // Do not update coordinate system here. Because that coord system update in\n          // each frame is not a good user experience. So we follow the rule that\n          // the extent of the coordinate system is determin in the first frame (the\n          // frame is executed immedietely after task reset.\n          // this._coordSysMgr.update(ecModel, api);\n          // console.log('--- ec frame visual ---', remainTime);\n\n          scheduler.performVisualTasks(ecModel);\n          renderSeries(this, this._model, api, 'remain', {});\n          remainTime -= +new Date() - startTime;\n        } while (remainTime > 0 && scheduler.unfinished); // Call flush explicitly for trigger finished event.\n\n\n        if (!scheduler.unfinished) {\n          this._zr.flush();\n        } // Else, zr flushing be ensue within the same frame,\n        // because zr flushing is after onframe event.\n\n      }\n  };\n\n  ECharts.prototype.getDom = function () {\n    return this._dom;\n  };\n\n  ECharts.prototype.getId = function () {\n    return this.id;\n  };\n\n  ECharts.prototype.getZr = function () {\n    return this._zr;\n  };\n\n  ECharts.prototype.isSSR = function () {\n    return this._ssr;\n  };\n  /* eslint-disable-next-line */\n\n\n  ECharts.prototype.setOption = function (option, notMerge, lazyUpdate) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`setOption` should not be called during main process.');\n      }\n\n      return;\n    }\n\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    var silent;\n    var replaceMerge;\n    var transitionOpt;\n\n    if (isObject(notMerge)) {\n      lazyUpdate = notMerge.lazyUpdate;\n      silent = notMerge.silent;\n      replaceMerge = notMerge.replaceMerge;\n      transitionOpt = notMerge.transition;\n      notMerge = notMerge.notMerge;\n    }\n\n    this[IN_MAIN_PROCESS_KEY] = true;\n\n    if (!this._model || notMerge) {\n      var optionManager = new OptionManager(this._api);\n      var theme = this._theme;\n      var ecModel = this._model = new GlobalModel();\n      ecModel.scheduler = this._scheduler;\n      ecModel.ssr = this._ssr;\n      ecModel.init(null, null, null, theme, this._locale, optionManager);\n    }\n\n    this._model.setOption(option, {\n      replaceMerge: replaceMerge\n    }, optionPreprocessorFuncs);\n\n    var updateParams = {\n      seriesTransition: transitionOpt,\n      optionChanged: true\n    };\n\n    if (lazyUpdate) {\n      this[PENDING_UPDATE] = {\n        silent: silent,\n        updateParams: updateParams\n      };\n      this[IN_MAIN_PROCESS_KEY] = false; // `setOption(option, {lazyMode: true})` may be called when zrender has been slept.\n      // It should wake it up to make sure zrender start to render at the next frame.\n\n      this.getZr().wakeUp();\n    } else {\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, updateParams);\n      } catch (e) {\n        this[PENDING_UPDATE] = null;\n        this[IN_MAIN_PROCESS_KEY] = false;\n        throw e;\n      } // Ensure zr refresh sychronously, and then pixel in canvas can be\n      // fetched after `setOption`.\n\n\n      if (!this._ssr) {\n        // not use flush when using ssr mode.\n        this._zr.flush();\n      }\n\n      this[PENDING_UPDATE] = null;\n      this[IN_MAIN_PROCESS_KEY] = false;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    }\n  };\n  /**\n   * @deprecated\n   */\n\n\n  ECharts.prototype.setTheme = function () {\n    deprecateLog('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\n  }; // We don't want developers to use getModel directly.\n\n\n  ECharts.prototype.getModel = function () {\n    return this._model;\n  };\n\n  ECharts.prototype.getOption = function () {\n    return this._model && this._model.getOption();\n  };\n\n  ECharts.prototype.getWidth = function () {\n    return this._zr.getWidth();\n  };\n\n  ECharts.prototype.getHeight = function () {\n    return this._zr.getHeight();\n  };\n\n  ECharts.prototype.getDevicePixelRatio = function () {\n    return this._zr.painter.dpr\n    /* eslint-disable-next-line */\n    || hasWindow && window.devicePixelRatio || 1;\n  };\n  /**\n   * Get canvas which has all thing rendered\n   * @deprecated Use renderToCanvas instead.\n   */\n\n\n  ECharts.prototype.getRenderedCanvas = function (opts) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('getRenderedCanvas', 'renderToCanvas');\n    }\n\n    return this.renderToCanvas(opts);\n  };\n\n  ECharts.prototype.renderToCanvas = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'canvas') {\n        throw new Error('renderToCanvas can only be used in the canvas renderer.');\n      }\n    }\n\n    return painter.getRenderedCanvas({\n      backgroundColor: opts.backgroundColor || this._model.get('backgroundColor'),\n      pixelRatio: opts.pixelRatio || this.getDevicePixelRatio()\n    });\n  };\n\n  ECharts.prototype.renderToSVGString = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'svg') {\n        throw new Error('renderToSVGString can only be used in the svg renderer.');\n      }\n    }\n\n    return painter.renderToString({\n      useViewBox: opts.useViewBox\n    });\n  };\n  /**\n   * Get svg data url\n   */\n\n\n  ECharts.prototype.getSvgDataURL = function () {\n    if (!env.svgSupported) {\n      return;\n    }\n\n    var zr = this._zr;\n    var list = zr.storage.getDisplayList(); // Stop animations\n\n    each(list, function (el) {\n      el.stopAnimation(null, true);\n    });\n    return zr.painter.toDataURL();\n  };\n\n  ECharts.prototype.getDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    opts = opts || {};\n    var excludeComponents = opts.excludeComponents;\n    var ecModel = this._model;\n    var excludesComponentViews = [];\n    var self = this;\n    each(excludeComponents, function (componentType) {\n      ecModel.eachComponent({\n        mainType: componentType\n      }, function (component) {\n        var view = self._componentsMap[component.__viewId];\n\n        if (!view.group.ignore) {\n          excludesComponentViews.push(view);\n          view.group.ignore = true;\n        }\n      });\n    });\n    var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataURL() : this.renderToCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\n    each(excludesComponentViews, function (view) {\n      view.group.ignore = false;\n    });\n    return url;\n  };\n\n  ECharts.prototype.getConnectedDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    var isSvg = opts.type === 'svg';\n    var groupId = this.group;\n    var mathMin = Math.min;\n    var mathMax = Math.max;\n    var MAX_NUMBER = Infinity;\n\n    if (connectedGroups[groupId]) {\n      var left_1 = MAX_NUMBER;\n      var top_1 = MAX_NUMBER;\n      var right_1 = -MAX_NUMBER;\n      var bottom_1 = -MAX_NUMBER;\n      var canvasList_1 = [];\n      var dpr_1 = opts && opts.pixelRatio || this.getDevicePixelRatio();\n      each(instances, function (chart, id) {\n        if (chart.group === groupId) {\n          var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.renderToCanvas(clone(opts));\n          var boundingRect = chart.getDom().getBoundingClientRect();\n          left_1 = mathMin(boundingRect.left, left_1);\n          top_1 = mathMin(boundingRect.top, top_1);\n          right_1 = mathMax(boundingRect.right, right_1);\n          bottom_1 = mathMax(boundingRect.bottom, bottom_1);\n          canvasList_1.push({\n            dom: canvas,\n            left: boundingRect.left,\n            top: boundingRect.top\n          });\n        }\n      });\n      left_1 *= dpr_1;\n      top_1 *= dpr_1;\n      right_1 *= dpr_1;\n      bottom_1 *= dpr_1;\n      var width = right_1 - left_1;\n      var height = bottom_1 - top_1;\n      var targetCanvas = platformApi.createCanvas();\n      var zr_1 = zrender.init(targetCanvas, {\n        renderer: isSvg ? 'svg' : 'canvas'\n      });\n      zr_1.resize({\n        width: width,\n        height: height\n      });\n\n      if (isSvg) {\n        var content_1 = '';\n        each(canvasList_1, function (item) {\n          var x = item.left - left_1;\n          var y = item.top - top_1;\n          content_1 += '<g transform=\"translate(' + x + ',' + y + ')\">' + item.dom + '</g>';\n        });\n        zr_1.painter.getSvgRoot().innerHTML = content_1;\n\n        if (opts.connectedBackgroundColor) {\n          zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);\n        }\n\n        zr_1.refreshImmediately();\n        return zr_1.painter.toDataURL();\n      } else {\n        // Background between the charts\n        if (opts.connectedBackgroundColor) {\n          zr_1.add(new graphic.Rect({\n            shape: {\n              x: 0,\n              y: 0,\n              width: width,\n              height: height\n            },\n            style: {\n              fill: opts.connectedBackgroundColor\n            }\n          }));\n        }\n\n        each(canvasList_1, function (item) {\n          var img = new graphic.Image({\n            style: {\n              x: item.left * dpr_1 - left_1,\n              y: item.top * dpr_1 - top_1,\n              image: item.dom\n            }\n          });\n          zr_1.add(img);\n        });\n        zr_1.refreshImmediately();\n        return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\n      }\n    } else {\n      return this.getDataURL(opts);\n    }\n  };\n\n  ECharts.prototype.convertToPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertToPixel', finder, value);\n  };\n\n  ECharts.prototype.convertFromPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertFromPixel', finder, value);\n  };\n  /**\n   * Is the specified coordinate systems or components contain the given pixel point.\n   * @param {Array|number} value\n   * @return {boolean} result\n   */\n\n\n  ECharts.prototype.containPixel = function (finder, value) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    var ecModel = this._model;\n    var result;\n    var findResult = modelUtil.parseFinder(ecModel, finder);\n    each(findResult, function (models, key) {\n      key.indexOf('Models') >= 0 && each(models, function (model) {\n        var coordSys = model.coordinateSystem;\n\n        if (coordSys && coordSys.containPoint) {\n          result = result || !!coordSys.containPoint(value);\n        } else if (key === 'seriesModels') {\n          var view = this._chartsMap[model.__viewId];\n\n          if (view && view.containPoint) {\n            result = result || view.containPoint(value, model);\n          } else {\n            if (process.env.NODE_ENV !== 'production') {\n              console.warn(key + ': ' + (view ? 'The found component do not support containPoint.' : 'No view mapping to the found component.'));\n            }\n          }\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            console.warn(key + ': containPoint is not supported');\n          }\n        }\n      }, this);\n    }, this);\n    return !!result;\n  };\n  /**\n   * Get visual from series or data.\n   * @param finder\n   *        If string, e.g., 'series', means {seriesIndex: 0}.\n   *        If Object, could contain some of these properties below:\n   *        {\n   *            seriesIndex / seriesId / seriesName,\n   *            dataIndex / dataIndexInside\n   *        }\n   *        If dataIndex is not specified, series visual will be fetched,\n   *        but not data item visual.\n   *        If all of seriesIndex, seriesId, seriesName are not specified,\n   *        visual will be fetched from first series.\n   * @param visualType 'color', 'symbol', 'symbolSize'\n   */\n\n\n  ECharts.prototype.getVisual = function (finder, visualType) {\n    var ecModel = this._model;\n    var parsedFinder = modelUtil.parseFinder(ecModel, finder, {\n      defaultMainType: 'series'\n    });\n    var seriesModel = parsedFinder.seriesModel;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!seriesModel) {\n        console.warn('There is no specified seires model');\n      }\n    }\n\n    var data = seriesModel.getData();\n    var dataIndexInside = parsedFinder.hasOwnProperty('dataIndexInside') ? parsedFinder.dataIndexInside : parsedFinder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(parsedFinder.dataIndex) : null;\n    return dataIndexInside != null ? getItemVisualFromData(data, dataIndexInside, visualType) : getVisualFromData(data, visualType);\n  };\n  /**\n   * Get view of corresponding component model\n   */\n\n\n  ECharts.prototype.getViewOfComponentModel = function (componentModel) {\n    return this._componentsMap[componentModel.__viewId];\n  };\n  /**\n   * Get view of corresponding series model\n   */\n\n\n  ECharts.prototype.getViewOfSeriesModel = function (seriesModel) {\n    return this._chartsMap[seriesModel.__viewId];\n  };\n\n  ECharts.prototype._initEvents = function () {\n    var _this = this;\n\n    each(MOUSE_EVENT_NAMES, function (eveName) {\n      var handler = function (e) {\n        var ecModel = _this.getModel();\n\n        var el = e.target;\n        var params;\n        var isGlobalOut = eveName === 'globalout'; // no e.target when 'globalout'.\n\n        if (isGlobalOut) {\n          params = {};\n        } else {\n          el && findEventDispatcher(el, function (parent) {\n            var ecData = getECData(parent);\n\n            if (ecData && ecData.dataIndex != null) {\n              var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);\n              params = dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType) || {};\n              return true;\n            } // If element has custom eventData of components\n            else if (ecData.eventData) {\n                params = extend({}, ecData.eventData);\n                return true;\n              }\n          }, true);\n        } // Contract: if params prepared in mouse event,\n        // these properties must be specified:\n        // {\n        //    componentType: string (component main type)\n        //    componentIndex: number\n        // }\n        // Otherwise event query can not work.\n\n\n        if (params) {\n          var componentType = params.componentType;\n          var componentIndex = params.componentIndex; // Special handling for historic reason: when trigger by\n          // markLine/markPoint/markArea, the componentType is\n          // 'markLine'/'markPoint'/'markArea', but we should better\n          // enable them to be queried by seriesIndex, since their\n          // option is set in each series.\n\n          if (componentType === 'markLine' || componentType === 'markPoint' || componentType === 'markArea') {\n            componentType = 'series';\n            componentIndex = params.seriesIndex;\n          }\n\n          var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);\n          var view = model && _this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\n\n          if (process.env.NODE_ENV !== 'production') {\n            // `event.componentType` and `event[componentTpype + 'Index']` must not\n            // be missed, otherwise there is no way to distinguish source component.\n            // See `dataFormat.getDataParams`.\n            if (!isGlobalOut && !(model && view)) {\n              console.warn('model or view can not be found by params');\n            }\n          }\n\n          params.event = e;\n          params.type = eveName;\n          _this._$eventProcessor.eventInfo = {\n            targetEl: el,\n            packedEvent: params,\n            model: model,\n            view: view\n          };\n\n          _this.trigger(eveName, params);\n        }\n      }; // Consider that some component (like tooltip, brush, ...)\n      // register zr event handler, but user event handler might\n      // do anything, such as call `setOption` or `dispatchAction`,\n      // which probably update any of the content and probably\n      // cause problem if it is called previous other inner handlers.\n\n\n      handler.zrEventfulCallAtLast = true;\n\n      _this._zr.on(eveName, handler, _this);\n    });\n    each(eventActionMap, function (actionType, eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    }); // Extra events\n    // TODO register?\n\n    each(['selectchanged'], function (eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    });\n    handleLegacySelectEvents(this._messageCenter, this, this._api);\n  };\n\n  ECharts.prototype.isDisposed = function () {\n    return this._disposed;\n  };\n\n  ECharts.prototype.clear = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this.setOption({\n      series: []\n    }, true);\n  };\n\n  ECharts.prototype.dispose = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this._disposed = true;\n    var dom = this.getDom();\n\n    if (dom) {\n      modelUtil.setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\n    }\n\n    var chart = this;\n    var api = chart._api;\n    var ecModel = chart._model;\n    each(chart._componentsViews, function (component) {\n      component.dispose(ecModel, api);\n    });\n    each(chart._chartsViews, function (chart) {\n      chart.dispose(ecModel, api);\n    }); // Dispose after all views disposed\n\n    chart._zr.dispose(); // Set properties to null.\n    // To reduce the memory cost in case the top code still holds this instance unexpectedly.\n\n\n    chart._dom = chart._model = chart._chartsMap = chart._componentsMap = chart._chartsViews = chart._componentsViews = chart._scheduler = chart._api = chart._zr = chart._throttledZrFlush = chart._theme = chart._coordSysMgr = chart._messageCenter = null;\n    delete instances[chart.id];\n  };\n  /**\n   * Resize the chart\n   */\n\n\n  ECharts.prototype.resize = function (opts) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`resize` should not be called during main process.');\n      }\n\n      return;\n    }\n\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this._zr.resize(opts);\n\n    var ecModel = this._model; // Resize loading effect\n\n    this._loadingFX && this._loadingFX.resize();\n\n    if (!ecModel) {\n      return;\n    }\n\n    var needPrepare = ecModel.resetOption('media');\n    var silent = opts && opts.silent; // There is some real cases that:\n    // chart.setOption(option, { lazyUpdate: true });\n    // chart.resize();\n\n    if (this[PENDING_UPDATE]) {\n      if (silent == null) {\n        silent = this[PENDING_UPDATE].silent;\n      }\n\n      needPrepare = true;\n      this[PENDING_UPDATE] = null;\n    }\n\n    this[IN_MAIN_PROCESS_KEY] = true;\n\n    try {\n      needPrepare && prepare(this);\n      updateMethods.update.call(this, {\n        type: 'resize',\n        animation: extend({\n          // Disable animation\n          duration: 0\n        }, opts && opts.animation)\n      });\n    } catch (e) {\n      this[IN_MAIN_PROCESS_KEY] = false;\n      throw e;\n    }\n\n    this[IN_MAIN_PROCESS_KEY] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n\n  ECharts.prototype.showLoading = function (name, cfg) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    if (isObject(name)) {\n      cfg = name;\n      name = '';\n    }\n\n    name = name || 'default';\n    this.hideLoading();\n\n    if (!loadingEffects[name]) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('Loading effects ' + name + ' not exists.');\n      }\n\n      return;\n    }\n\n    var el = loadingEffects[name](this._api, cfg);\n    var zr = this._zr;\n    this._loadingFX = el;\n    zr.add(el);\n  };\n  /**\n   * Hide loading effect\n   */\n\n\n  ECharts.prototype.hideLoading = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    this._loadingFX && this._zr.remove(this._loadingFX);\n    this._loadingFX = null;\n  };\n\n  ECharts.prototype.makeActionFromEvent = function (eventObj) {\n    var payload = extend({}, eventObj);\n    payload.type = eventActionMap[eventObj.type];\n    return payload;\n  };\n  /**\n   * @param opt If pass boolean, means opt.silent\n   * @param opt.silent Default `false`. Whether trigger events.\n   * @param opt.flush Default `undefined`.\n   *        true: Flush immediately, and then pixel in canvas can be fetched\n   *            immediately. Caution: it might affect performance.\n   *        false: Not flush.\n   *        undefined: Auto decide whether perform flush.\n   */\n\n\n  ECharts.prototype.dispatchAction = function (payload, opt) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    if (!isObject(opt)) {\n      opt = {\n        silent: !!opt\n      };\n    }\n\n    if (!actions[payload.type]) {\n      return;\n    } // Avoid dispatch action before setOption. Especially in `connect`.\n\n\n    if (!this._model) {\n      return;\n    } // May dispatchAction in rendering procedure\n\n\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      this._pendingActions.push(payload);\n\n      return;\n    }\n\n    var silent = opt.silent;\n    doDispatchAction.call(this, payload, silent);\n    var flush = opt.flush;\n\n    if (flush) {\n      this._zr.flush();\n    } else if (flush !== false && env.browser.weChat) {\n      // In WeChat embeded browser, `requestAnimationFrame` and `setInterval`\n      // hang when sliding page (on touch event), which cause that zr does not\n      // refresh util user interaction finished, which is not expected.\n      // But `dispatchAction` may be called too frequently when pan on touch\n      // screen, which impacts performance if do not throttle them.\n      this._throttledZrFlush();\n    }\n\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n\n  ECharts.prototype.updateLabelLayout = function () {\n    lifecycle.trigger('series:layoutlabels', this._model, this._api, {\n      // Not adding series labels.\n      // TODO\n      updatedSeries: []\n    });\n  };\n\n  ECharts.prototype.appendData = function (params) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n\n    var seriesIndex = params.seriesIndex;\n    var ecModel = this.getModel();\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(params.data && seriesModel);\n    }\n\n    seriesModel.appendData(params); // Note: `appendData` does not support that update extent of coordinate\n    // system, util some scenario require that. In the expected usage of\n    // `appendData`, the initial extent of coordinate system should better\n    // be fixed by axis `min`/`max` setting or initial data, otherwise if\n    // the extent changed while `appendData`, the location of the painted\n    // graphic elements have to be changed, which make the usage of\n    // `appendData` meaningless.\n\n    this._scheduler.unfinished = true;\n    this.getZr().wakeUp();\n  }; // A work around for no `internal` modifier in ts yet but\n  // need to strictly hide private methods to JS users.\n\n\n  ECharts.internalField = function () {\n    prepare = function (ecIns) {\n      var scheduler = ecIns._scheduler;\n      scheduler.restorePipelines(ecIns._model);\n      scheduler.prepareStageTasks();\n      prepareView(ecIns, true);\n      prepareView(ecIns, false);\n      scheduler.plan();\n    };\n    /**\n     * Prepare view instances of charts and components\n     */\n\n\n    prepareView = function (ecIns, isComponent) {\n      var ecModel = ecIns._model;\n      var scheduler = ecIns._scheduler;\n      var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\n      var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\n      var zr = ecIns._zr;\n      var api = ecIns._api;\n\n      for (var i = 0; i < viewList.length; i++) {\n        viewList[i].__alive = false;\n      }\n\n      isComponent ? ecModel.eachComponent(function (componentType, model) {\n        componentType !== 'series' && doPrepare(model);\n      }) : ecModel.eachSeries(doPrepare);\n\n      function doPrepare(model) {\n        // By defaut view will be reused if possible for the case that `setOption` with \"notMerge\"\n        // mode and need to enable transition animation. (Usually, when they have the same id, or\n        // especially no id but have the same type & name & index. See the `model.id` generation\n        // rule in `makeIdAndName` and `viewId` generation rule here).\n        // But in `replaceMerge` mode, this feature should be able to disabled when it is clear that\n        // the new model has nothing to do with the old model.\n        var requireNewView = model.__requireNewView; // This command should not work twice.\n\n        model.__requireNewView = false; // Consider: id same and type changed.\n\n        var viewId = '_ec_' + model.id + '_' + model.type;\n        var view = !requireNewView && viewMap[viewId];\n\n        if (!view) {\n          var classType = parseClassType(model.type);\n          var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) : // FIXME:TS\n          // (ChartView as ChartViewConstructor).getClass('series', classType.sub)\n          // For backward compat, still support a chart type declared as only subType\n          // like \"liquidfill\", but recommend \"series.liquidfill\"\n          // But need a base class to make a type series.\n          ChartView.getClass(classType.sub);\n\n          if (process.env.NODE_ENV !== 'production') {\n            assert(Clazz, classType.sub + ' does not exist.');\n          }\n\n          view = new Clazz();\n          view.init(ecModel, api);\n          viewMap[viewId] = view;\n          viewList.push(view);\n          zr.add(view.group);\n        }\n\n        model.__viewId = view.__id = viewId;\n        view.__alive = true;\n        view.__model = model;\n        view.group.__ecComponentInfo = {\n          mainType: model.mainType,\n          index: model.componentIndex\n        };\n        !isComponent && scheduler.prepareView(view, model, ecModel, api);\n      }\n\n      for (var i = 0; i < viewList.length;) {\n        var view = viewList[i];\n\n        if (!view.__alive) {\n          !isComponent && view.renderTask.dispose();\n          zr.remove(view.group);\n          view.dispose(ecModel, api);\n          viewList.splice(i, 1);\n\n          if (viewMap[view.__id] === view) {\n            delete viewMap[view.__id];\n          }\n\n          view.__id = view.group.__ecComponentInfo = null;\n        } else {\n          i++;\n        }\n      }\n    };\n\n    updateDirectly = function (ecIns, method, payload, mainType, subType) {\n      var ecModel = ecIns._model;\n      ecModel.setUpdatePayload(payload); // broadcast\n\n      if (!mainType) {\n        // FIXME\n        // Chart will not be update directly here, except set dirty.\n        // But there is no such scenario now.\n        each([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);\n        return;\n      }\n\n      var query = {};\n      query[mainType + 'Id'] = payload[mainType + 'Id'];\n      query[mainType + 'Index'] = payload[mainType + 'Index'];\n      query[mainType + 'Name'] = payload[mainType + 'Name'];\n      var condition = {\n        mainType: mainType,\n        query: query\n      };\n      subType && (condition.subType = subType); // subType may be '' by parseClassType;\n\n      var excludeSeriesId = payload.excludeSeriesId;\n      var excludeSeriesIdMap;\n\n      if (excludeSeriesId != null) {\n        excludeSeriesIdMap = createHashMap();\n        each(modelUtil.normalizeToArray(excludeSeriesId), function (id) {\n          var modelId = modelUtil.convertOptionIdName(id, null);\n\n          if (modelId != null) {\n            excludeSeriesIdMap.set(modelId, true);\n          }\n        });\n      } // If dispatchAction before setOption, do nothing.\n\n\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) !== null;\n\n        if (isExcluded) {\n          return;\n        }\n\n        ;\n\n        if (isHighDownPayload(payload)) {\n          if (model instanceof SeriesModel) {\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && !payload.notBlur && !model.get(['emphasis', 'disabled'])) {\n              blurSeriesFromHighlightPayload(model, payload, ecIns._api);\n            }\n          } else {\n            var _a = findComponentHighDownDispatchers(model.mainType, model.componentIndex, payload.name, ecIns._api),\n                focusSelf = _a.focusSelf,\n                dispatchers = _a.dispatchers;\n\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && focusSelf && !payload.notBlur) {\n              blurComponent(model.mainType, model.componentIndex, ecIns._api);\n            } // PENDING:\n            // Whether to put this \"enter emphasis\" code in `ComponentView`,\n            // which will be the same as `ChartView` but might be not necessary\n            // and will be far from this logic.\n\n\n            if (dispatchers) {\n              each(dispatchers, function (dispatcher) {\n                payload.type === HIGHLIGHT_ACTION_TYPE ? enterEmphasis(dispatcher) : leaveEmphasis(dispatcher);\n              });\n            }\n          }\n        } else if (isSelectChangePayload(payload)) {\n          // TODO geo\n          if (model instanceof SeriesModel) {\n            toggleSelectionFromPayload(model, payload, ecIns._api);\n            updateSeriesElementSelection(model);\n            markStatusToUpdate(ecIns);\n          }\n        }\n      }, ecIns);\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) !== null;\n\n        if (isExcluded) {\n          return;\n        }\n\n        ;\n        callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\n      }, ecIns);\n\n      function callView(view) {\n        view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\n      }\n    };\n\n    updateMethods = {\n      prepareAndUpdate: function (payload) {\n        prepare(this);\n        updateMethods.update.call(this, payload, {\n          // Needs to mark option changed if newOption is given.\n          // It's from MagicType.\n          // TODO If use a separate flag optionChanged in payload?\n          optionChanged: payload.newOption != null\n        });\n      },\n      update: function (payload, updateParams) {\n        var ecModel = this._model;\n        var api = this._api;\n        var zr = this._zr;\n        var coordSysMgr = this._coordSysMgr;\n        var scheduler = this._scheduler; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload);\n        scheduler.restoreData(ecModel, payload);\n        scheduler.performSeriesTasks(ecModel); // TODO\n        // Save total ecModel here for undo/redo (after restoring data and before processing data).\n        // Undo (restoration of total ecModel) can be carried out in 'action' or outside API call.\n        // Create new coordinate system each update\n        // In LineView may save the old coordinate system and use it to get the orignal point\n\n        coordSysMgr.create(ecModel, api);\n        scheduler.performDataProcessorTasks(ecModel, payload); // Current stream render is not supported in data process. So we can update\n        // stream modes after data processing, where the filtered data is used to\n        // deteming whether use progressive rendering.\n\n        updateStreamModes(this, ecModel); // We update stream modes before coordinate system updated, then the modes info\n        // can be fetched when coord sys updating (consider the barGrid extent fix). But\n        // the drawback is the full coord info can not be fetched. Fortunately this full\n        // coord is not requied in stream mode updater currently.\n\n        coordSysMgr.update(ecModel, api);\n        clearColorPalette(ecModel);\n        scheduler.performVisualTasks(ecModel, payload);\n        render(this, ecModel, api, payload, updateParams); // Set background\n\n        var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\n        var darkMode = ecModel.get('darkMode');\n        zr.setBackgroundColor(backgroundColor); // Force set dark mode.\n\n        if (darkMode != null && darkMode !== 'auto') {\n          zr.setDarkMode(darkMode);\n        }\n\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateTransform: function (payload) {\n        var _this = this;\n\n        var ecModel = this._model;\n        var api = this._api; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload); // ChartView.markUpdateMethod(payload, 'updateTransform');\n\n        var componentDirtyList = [];\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType === 'series') {\n            return;\n          }\n\n          var componentView = _this.getViewOfComponentModel(componentModel);\n\n          if (componentView && componentView.__alive) {\n            if (componentView.updateTransform) {\n              var result = componentView.updateTransform(componentModel, ecModel, api, payload);\n              result && result.update && componentDirtyList.push(componentView);\n            } else {\n              componentDirtyList.push(componentView);\n            }\n          }\n        });\n        var seriesDirtyMap = createHashMap();\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n\n          if (chartView.updateTransform) {\n            var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\n            result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\n          } else {\n            seriesDirtyMap.set(seriesModel.uid, 1);\n          }\n        });\n        clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        // this._scheduler.performVisualTasks(ecModel, payload, 'layout', true);\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true,\n          dirtyMap: seriesDirtyMap\n        }); // Currently, not call render of components. Geo render cost a lot.\n        // renderComponents(ecIns, ecModel, api, payload, componentDirtyList);\n\n\n        renderSeries(this, ecModel, api, payload, {}, seriesDirtyMap);\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateView: function (payload) {\n        var ecModel = this._model; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload);\n        ChartView.markUpdateMethod(payload, 'updateView');\n        clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true\n        });\n\n        render(this, ecModel, this._api, payload, {});\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateVisual: function (payload) {\n        // updateMethods.update.call(this, payload);\n        var _this = this;\n\n        var ecModel = this._model; // update before setOption\n\n        if (!ecModel) {\n          return;\n        }\n\n        ecModel.setUpdatePayload(payload); // clear all visual\n\n        ecModel.eachSeries(function (seriesModel) {\n          seriesModel.getData().clearAllVisual();\n        }); // Perform visual\n\n        ChartView.markUpdateMethod(payload, 'updateVisual');\n        clearColorPalette(ecModel); // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          visualType: 'visual',\n          setDirty: true\n        });\n\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType !== 'series') {\n            var componentView = _this.getViewOfComponentModel(componentModel);\n\n            componentView && componentView.__alive && componentView.updateVisual(componentModel, ecModel, _this._api, payload);\n          }\n        });\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          chartView.updateVisual(seriesModel, ecModel, _this._api, payload);\n        });\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateLayout: function (payload) {\n        updateMethods.update.call(this, payload);\n      }\n    };\n\n    doConvertPixel = function (ecIns, methodName, finder, value) {\n      if (ecIns._disposed) {\n        disposedWarning(ecIns.id);\n        return;\n      }\n\n      var ecModel = ecIns._model;\n\n      var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();\n\n      var result;\n      var parsedFinder = modelUtil.parseFinder(ecModel, finder);\n\n      for (var i = 0; i < coordSysList.length; i++) {\n        var coordSys = coordSysList[i];\n\n        if (coordSys[methodName] && (result = coordSys[methodName](ecModel, parsedFinder, value)) != null) {\n          return result;\n        }\n      }\n\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('No coordinate system that supports ' + methodName + ' found by the given finder.');\n      }\n    };\n\n    updateStreamModes = function (ecIns, ecModel) {\n      var chartsMap = ecIns._chartsMap;\n      var scheduler = ecIns._scheduler;\n      ecModel.eachSeries(function (seriesModel) {\n        scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\n      });\n    };\n\n    doDispatchAction = function (payload, silent) {\n      var _this = this;\n\n      var ecModel = this.getModel();\n      var payloadType = payload.type;\n      var escapeConnect = payload.escapeConnect;\n      var actionWrap = actions[payloadType];\n      var actionInfo = actionWrap.actionInfo;\n      var cptTypeTmp = (actionInfo.update || 'update').split(':');\n      var updateMethod = cptTypeTmp.pop();\n      var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);\n      this[IN_MAIN_PROCESS_KEY] = true;\n      var payloads = [payload];\n      var batched = false; // Batch action\n\n      if (payload.batch) {\n        batched = true;\n        payloads = map(payload.batch, function (item) {\n          item = defaults(extend({}, item), payload);\n          item.batch = null;\n          return item;\n        });\n      }\n\n      var eventObjBatch = [];\n      var eventObj;\n      var isSelectChange = isSelectChangePayload(payload);\n      var isHighDown = isHighDownPayload(payload); // Only leave blur once if there are multiple batches.\n\n      if (isHighDown) {\n        allLeaveBlur(this._api);\n      }\n\n      each(payloads, function (batchItem) {\n        // Action can specify the event by return it.\n        eventObj = actionWrap.action(batchItem, _this._model, _this._api); // Emit event outside\n\n        eventObj = eventObj || extend({}, batchItem); // Convert type to eventType\n\n        eventObj.type = actionInfo.event || eventObj.type;\n        eventObjBatch.push(eventObj); // light update does not perform data process, layout and visual.\n\n        if (isHighDown) {\n          var _a = modelUtil.preParseFinder(payload),\n              queryOptionMap = _a.queryOptionMap,\n              mainTypeSpecified = _a.mainTypeSpecified;\n\n          var componentMainType = mainTypeSpecified ? queryOptionMap.keys()[0] : 'series';\n          updateDirectly(_this, updateMethod, batchItem, componentMainType);\n          markStatusToUpdate(_this);\n        } else if (isSelectChange) {\n          // At present `dispatchAction({ type: 'select', ... })` is not supported on components.\n          // geo still use 'geoselect'.\n          updateDirectly(_this, updateMethod, batchItem, 'series');\n          markStatusToUpdate(_this);\n        } else if (cptType) {\n          updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);\n        }\n      });\n\n      if (updateMethod !== 'none' && !isHighDown && !isSelectChange && !cptType) {\n        try {\n          // Still dirty\n          if (this[PENDING_UPDATE]) {\n            prepare(this);\n            updateMethods.update.call(this, payload);\n            this[PENDING_UPDATE] = null;\n          } else {\n            updateMethods[updateMethod].call(this, payload);\n          }\n        } catch (e) {\n          this[IN_MAIN_PROCESS_KEY] = false;\n          throw e;\n        }\n      } // Follow the rule of action batch\n\n\n      if (batched) {\n        eventObj = {\n          type: actionInfo.event || payloadType,\n          escapeConnect: escapeConnect,\n          batch: eventObjBatch\n        };\n      } else {\n        eventObj = eventObjBatch[0];\n      }\n\n      this[IN_MAIN_PROCESS_KEY] = false;\n\n      if (!silent) {\n        var messageCenter = this._messageCenter;\n        messageCenter.trigger(eventObj.type, eventObj); // Extra triggered 'selectchanged' event\n\n        if (isSelectChange) {\n          var newObj = {\n            type: 'selectchanged',\n            escapeConnect: escapeConnect,\n            selected: getAllSelectedIndices(ecModel),\n            isFromClick: payload.isFromClick || false,\n            fromAction: payload.type,\n            fromActionPayload: payload\n          };\n          messageCenter.trigger(newObj.type, newObj);\n        }\n      }\n    };\n\n    flushPendingActions = function (silent) {\n      var pendingActions = this._pendingActions;\n\n      while (pendingActions.length) {\n        var payload = pendingActions.shift();\n        doDispatchAction.call(this, payload, silent);\n      }\n    };\n\n    triggerUpdatedEvent = function (silent) {\n      !silent && this.trigger('updated');\n    };\n    /**\n     * Event `rendered` is triggered when zr\n     * rendered. It is useful for realtime\n     * snapshot (reflect animation).\n     *\n     * Event `finished` is triggered when:\n     * (1) zrender rendering finished.\n     * (2) initial animation finished.\n     * (3) progressive rendering finished.\n     * (4) no pending action.\n     * (5) no delayed setOption needs to be processed.\n     */\n\n\n    bindRenderedEvent = function (zr, ecIns) {\n      zr.on('rendered', function (params) {\n        ecIns.trigger('rendered', params); // The `finished` event should not be triggered repeatly,\n        // so it should only be triggered when rendering indeed happend\n        // in zrender. (Consider the case that dipatchAction is keep\n        // triggering when mouse move).\n\n        if ( // Although zr is dirty if initial animation is not finished\n        // and this checking is called on frame, we also check\n        // animation finished for robustness.\n        zr.animation.isFinished() && !ecIns[PENDING_UPDATE] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {\n          ecIns.trigger('finished');\n        }\n      });\n    };\n\n    bindMouseEvent = function (zr, ecIns) {\n      zr.on('mouseover', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n\n        if (dispatcher) {\n          handleGlobalMouseOverForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('mouseout', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n\n        if (dispatcher) {\n          handleGlobalMouseOutForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('click', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, function (target) {\n          return getECData(target).dataIndex != null;\n        }, true);\n\n        if (dispatcher) {\n          var actionType = dispatcher.selected ? 'unselect' : 'select';\n          var ecData = getECData(dispatcher);\n\n          ecIns._api.dispatchAction({\n            type: actionType,\n            dataType: ecData.dataType,\n            dataIndexInside: ecData.dataIndex,\n            seriesIndex: ecData.seriesIndex,\n            isFromClick: true\n          });\n        }\n      });\n    };\n\n    function clearColorPalette(ecModel) {\n      ecModel.clearColorPalette();\n      ecModel.eachSeries(function (seriesModel) {\n        seriesModel.clearColorPalette();\n      });\n    }\n\n    ; // Allocate zlevels for series and components\n\n    function allocateZlevels(ecModel) {\n      ;\n      var componentZLevels = [];\n      var seriesZLevels = [];\n      var hasSeperateZLevel = false;\n      ecModel.eachComponent(function (componentType, componentModel) {\n        var zlevel = componentModel.get('zlevel') || 0;\n        var z = componentModel.get('z') || 0;\n        var zlevelKey = componentModel.getZLevelKey();\n        hasSeperateZLevel = hasSeperateZLevel || !!zlevelKey;\n        (componentType === 'series' ? seriesZLevels : componentZLevels).push({\n          zlevel: zlevel,\n          z: z,\n          idx: componentModel.componentIndex,\n          type: componentType,\n          key: zlevelKey\n        });\n      });\n\n      if (hasSeperateZLevel) {\n        // Series after component\n        var zLevels = componentZLevels.concat(seriesZLevels);\n        var lastSeriesZLevel_1;\n        var lastSeriesKey_1;\n        timsort(zLevels, function (a, b) {\n          if (a.zlevel === b.zlevel) {\n            return a.z - b.z;\n          }\n\n          return a.zlevel - b.zlevel;\n        });\n        each(zLevels, function (item) {\n          var componentModel = ecModel.getComponent(item.type, item.idx);\n          var zlevel = item.zlevel;\n          var key = item.key;\n\n          if (lastSeriesZLevel_1 != null) {\n            zlevel = Math.max(lastSeriesZLevel_1, zlevel);\n          }\n\n          if (key) {\n            if (zlevel === lastSeriesZLevel_1 && key !== lastSeriesKey_1) {\n              zlevel++;\n            }\n\n            lastSeriesKey_1 = key;\n          } else if (lastSeriesKey_1) {\n            if (zlevel === lastSeriesZLevel_1) {\n              zlevel++;\n            }\n\n            lastSeriesKey_1 = '';\n          }\n\n          lastSeriesZLevel_1 = zlevel;\n          componentModel.setZLevel(zlevel);\n        });\n      }\n    }\n\n    render = function (ecIns, ecModel, api, payload, updateParams) {\n      allocateZlevels(ecModel);\n      renderComponents(ecIns, ecModel, api, payload, updateParams);\n      each(ecIns._chartsViews, function (chart) {\n        chart.__alive = false;\n      });\n      renderSeries(ecIns, ecModel, api, payload, updateParams); // Remove groups of unrendered charts\n\n      each(ecIns._chartsViews, function (chart) {\n        if (!chart.__alive) {\n          chart.remove(ecModel, api);\n        }\n      });\n    };\n\n    renderComponents = function (ecIns, ecModel, api, payload, updateParams, dirtyList) {\n      each(dirtyList || ecIns._componentsViews, function (componentView) {\n        var componentModel = componentView.__model;\n        clearStates(componentModel, componentView);\n        componentView.render(componentModel, ecModel, api, payload);\n        updateZ(componentModel, componentView);\n        updateStates(componentModel, componentView);\n      });\n    };\n    /**\n     * Render each chart and component\n     */\n\n\n    renderSeries = function (ecIns, ecModel, api, payload, updateParams, dirtyMap) {\n      // Render all charts\n      var scheduler = ecIns._scheduler;\n      updateParams = extend(updateParams || {}, {\n        updatedSeries: ecModel.getSeries()\n      }); // TODO progressive?\n\n      lifecycle.trigger('series:beforeupdate', ecModel, api, updateParams);\n      var unfinished = false;\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        chartView.__alive = true;\n        var renderTask = chartView.renderTask;\n        scheduler.updatePayload(renderTask, payload); // TODO states on marker.\n\n        clearStates(seriesModel, chartView);\n\n        if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\n          renderTask.dirty();\n        }\n\n        if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {\n          unfinished = true;\n        }\n\n        chartView.group.silent = !!seriesModel.get('silent'); // Should not call markRedraw on group, because it will disable zrender\n        // increamental render (alway render from the __startIndex each frame)\n        // chartView.group.markRedraw();\n\n        updateBlend(seriesModel, chartView);\n        updateSeriesElementSelection(seriesModel);\n      });\n      scheduler.unfinished = unfinished || scheduler.unfinished;\n      lifecycle.trigger('series:layoutlabels', ecModel, api, updateParams); // transition after label is layouted.\n\n      lifecycle.trigger('series:transition', ecModel, api, updateParams);\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId]; // Update Z after labels updated. Before applying states.\n\n        updateZ(seriesModel, chartView); // NOTE: Update states after label is updated.\n        // label should be in normal status when layouting.\n\n        updateStates(seriesModel, chartView);\n      }); // If use hover layer\n\n      updateHoverLayerStatus(ecIns, ecModel);\n      lifecycle.trigger('series:afterupdate', ecModel, api, updateParams);\n    };\n\n    markStatusToUpdate = function (ecIns) {\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = true; // Wake up zrender if it's sleep. Let it update states in the next frame.\n\n      ecIns.getZr().wakeUp();\n    };\n\n    applyChangedStates = function (ecIns) {\n      if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {\n        return;\n      }\n\n      ecIns.getZr().storage.traverse(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n\n        applyElementStates(el);\n      });\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = false;\n    };\n\n    function applyElementStates(el) {\n      var newStates = [];\n      var oldStates = el.currentStates; // Keep other states.\n\n      for (var i = 0; i < oldStates.length; i++) {\n        var stateName = oldStates[i];\n\n        if (!(stateName === 'emphasis' || stateName === 'blur' || stateName === 'select')) {\n          newStates.push(stateName);\n        }\n      } // Only use states when it's exists.\n\n\n      if (el.selected && el.states.select) {\n        newStates.push('select');\n      }\n\n      if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {\n        newStates.push('emphasis');\n      } else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {\n        newStates.push('blur');\n      }\n\n      el.useStates(newStates);\n    }\n\n    function updateHoverLayerStatus(ecIns, ecModel) {\n      var zr = ecIns._zr;\n      var storage = zr.storage;\n      var elCount = 0;\n      storage.traverse(function (el) {\n        if (!el.isGroup) {\n          elCount++;\n        }\n      });\n\n      if (elCount > ecModel.get('hoverLayerThreshold') && !env.node && !env.worker) {\n        ecModel.eachSeries(function (seriesModel) {\n          if (seriesModel.preventUsingHoverLayer) {\n            return;\n          }\n\n          var chartView = ecIns._chartsMap[seriesModel.__viewId];\n\n          if (chartView.__alive) {\n            chartView.eachRendered(function (el) {\n              if (el.states.emphasis) {\n                el.states.emphasis.hoverLayer = true;\n              }\n            });\n          }\n        });\n      }\n    }\n\n    ;\n    /**\n     * Update chart and blend.\n     */\n\n    function updateBlend(seriesModel, chartView) {\n      var blendMode = seriesModel.get('blendMode') || null;\n      chartView.eachRendered(function (el) {\n        // FIXME marker and other components\n        if (!el.isGroup) {\n          // DONT mark the element dirty. In case element is incremental and don't wan't to rerender.\n          el.style.blend = blendMode;\n        }\n      });\n    }\n\n    ;\n\n    function updateZ(model, view) {\n      if (model.preventAutoZ) {\n        return;\n      }\n\n      var z = model.get('z') || 0;\n      var zlevel = model.get('zlevel') || 0; // Set z and zlevel\n\n      view.eachRendered(function (el) {\n        doUpdateZ(el, z, zlevel, -Infinity); // Don't traverse the children because it has been traversed in _updateZ.\n\n        return true;\n      });\n    }\n\n    ;\n\n    function doUpdateZ(el, z, zlevel, maxZ2) {\n      // Group may also have textContent\n      var label = el.getTextContent();\n      var labelLine = el.getTextGuideLine();\n      var isGroup = el.isGroup;\n\n      if (isGroup) {\n        // set z & zlevel of children elements of Group\n        var children = el.childrenRef();\n\n        for (var i = 0; i < children.length; i++) {\n          maxZ2 = Math.max(doUpdateZ(children[i], z, zlevel, maxZ2), maxZ2);\n        }\n      } else {\n        // not Group\n        el.z = z;\n        el.zlevel = zlevel;\n        maxZ2 = Math.max(el.z2, maxZ2);\n      } // always set z and zlevel if label/labelLine exists\n\n\n      if (label) {\n        label.z = z;\n        label.zlevel = zlevel; // lift z2 of text content\n        // TODO if el.emphasis.z2 is spcefied, what about textContent.\n\n        isFinite(maxZ2) && (label.z2 = maxZ2 + 2);\n      }\n\n      if (labelLine) {\n        var textGuideLineConfig = el.textGuideLineConfig;\n        labelLine.z = z;\n        labelLine.zlevel = zlevel;\n        isFinite(maxZ2) && (labelLine.z2 = maxZ2 + (textGuideLineConfig && textGuideLineConfig.showAbove ? 1 : -1));\n      }\n\n      return maxZ2;\n    } // Clear states without animation.\n    // TODO States on component.\n\n\n    function clearStates(model, view) {\n      view.eachRendered(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n\n        var textContent = el.getTextContent();\n        var textGuide = el.getTextGuideLine();\n\n        if (el.stateTransition) {\n          el.stateTransition = null;\n        }\n\n        if (textContent && textContent.stateTransition) {\n          textContent.stateTransition = null;\n        }\n\n        if (textGuide && textGuide.stateTransition) {\n          textGuide.stateTransition = null;\n        } // TODO If el is incremental.\n\n\n        if (el.hasState()) {\n          el.prevStates = el.currentStates;\n          el.clearStates();\n        } else if (el.prevStates) {\n          el.prevStates = null;\n        }\n      });\n    }\n\n    function updateStates(model, view) {\n      var stateAnimationModel = model.getModel('stateAnimation');\n      var enableAnimation = model.isAnimationEnabled();\n      var duration = stateAnimationModel.get('duration');\n      var stateTransition = duration > 0 ? {\n        duration: duration,\n        delay: stateAnimationModel.get('delay'),\n        easing: stateAnimationModel.get('easing') // additive: stateAnimationModel.get('additive')\n\n      } : null;\n      view.eachRendered(function (el) {\n        if (el.states && el.states.emphasis) {\n          // Not applied on removed elements, it may still in fading.\n          if (graphic.isElementRemoved(el)) {\n            return;\n          }\n\n          if (el instanceof graphic.Path) {\n            savePathStates(el);\n          } // Only updated on changed element. In case element is incremental and don't wan't to rerender.\n          // TODO, a more proper way?\n\n\n          if (el.__dirty) {\n            var prevStates = el.prevStates; // Restore states without animation\n\n            if (prevStates) {\n              el.useStates(prevStates);\n            }\n          } // Update state transition and enable animation again.\n\n\n          if (enableAnimation) {\n            el.stateTransition = stateTransition;\n            var textContent = el.getTextContent();\n            var textGuide = el.getTextGuideLine(); // TODO Is it necessary to animate label?\n\n            if (textContent) {\n              textContent.stateTransition = stateTransition;\n            }\n\n            if (textGuide) {\n              textGuide.stateTransition = stateTransition;\n            }\n          } // The use higlighted and selected flag to toggle states.\n\n\n          if (el.__dirty) {\n            applyElementStates(el);\n          }\n        }\n      });\n    }\n\n    ;\n\n    createExtensionAPI = function (ecIns) {\n      return new (\n      /** @class */\n      function (_super) {\n        __extends(class_1, _super);\n\n        function class_1() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n\n        class_1.prototype.getCoordinateSystems = function () {\n          return ecIns._coordSysMgr.getCoordinateSystems();\n        };\n\n        class_1.prototype.getComponentByElement = function (el) {\n          while (el) {\n            var modelInfo = el.__ecComponentInfo;\n\n            if (modelInfo != null) {\n              return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);\n            }\n\n            el = el.parent;\n          }\n        };\n\n        class_1.prototype.enterEmphasis = function (el, highlightDigit) {\n          enterEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.leaveEmphasis = function (el, highlightDigit) {\n          leaveEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.enterBlur = function (el) {\n          enterBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.leaveBlur = function (el) {\n          leaveBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.enterSelect = function (el) {\n          enterSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.leaveSelect = function (el) {\n          leaveSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n\n        class_1.prototype.getModel = function () {\n          return ecIns.getModel();\n        };\n\n        class_1.prototype.getViewOfComponentModel = function (componentModel) {\n          return ecIns.getViewOfComponentModel(componentModel);\n        };\n\n        class_1.prototype.getViewOfSeriesModel = function (seriesModel) {\n          return ecIns.getViewOfSeriesModel(seriesModel);\n        };\n\n        return class_1;\n      }(ExtensionAPI))(ecIns);\n    };\n\n    enableConnect = function (chart) {\n      function updateConnectedChartsStatus(charts, status) {\n        for (var i = 0; i < charts.length; i++) {\n          var otherChart = charts[i];\n          otherChart[CONNECT_STATUS_KEY] = status;\n        }\n      }\n\n      each(eventActionMap, function (actionType, eventType) {\n        chart._messageCenter.on(eventType, function (event) {\n          if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {\n            if (event && event.escapeConnect) {\n              return;\n            }\n\n            var action_1 = chart.makeActionFromEvent(event);\n            var otherCharts_1 = [];\n            each(instances, function (otherChart) {\n              if (otherChart !== chart && otherChart.group === chart.group) {\n                otherCharts_1.push(otherChart);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);\n            each(otherCharts_1, function (otherChart) {\n              if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {\n                otherChart.dispatchAction(action_1);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);\n          }\n        });\n      });\n    };\n  }();\n\n  return ECharts;\n}(Eventful);\n\nvar echartsProto = ECharts.prototype;\nechartsProto.on = createRegisterEventWithLowercaseECharts('on');\nechartsProto.off = createRegisterEventWithLowercaseECharts('off');\n/**\n * @deprecated\n */\n// @ts-ignore\n\nechartsProto.one = function (eventName, cb, ctx) {\n  var self = this;\n  deprecateLog('ECharts#one is deprecated.');\n\n  function wrapped() {\n    var args2 = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args2[_i] = arguments[_i];\n    }\n\n    cb && cb.apply && cb.apply(this, args2); // @ts-ignore\n\n    self.off(eventName, wrapped);\n  }\n\n  ; // @ts-ignore\n\n  this.on.call(this, eventName, wrapped, ctx);\n};\n\nvar MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\n\nfunction disposedWarning(id) {\n  if (process.env.NODE_ENV !== 'production') {\n    console.warn('Instance ' + id + ' has been disposed');\n  }\n}\n\nvar actions = {};\n/**\n * Map eventType to actionType\n */\n\nvar eventActionMap = {};\nvar dataProcessorFuncs = [];\nvar optionPreprocessorFuncs = [];\nvar visualFuncs = [];\nvar themeStorage = {};\nvar loadingEffects = {};\nvar instances = {};\nvar connectedGroups = {};\nvar idBase = +new Date() - 0;\nvar groupIdBase = +new Date() - 0;\nvar DOM_ATTRIBUTE_KEY = '_echarts_instance_';\n/**\n * @param opts.devicePixelRatio Use window.devicePixelRatio by default\n * @param opts.renderer Can choose 'canvas' or 'svg' to render the chart.\n * @param opts.width Use clientWidth of the input `dom` by default.\n *        Can be 'auto' (the same as null/undefined)\n * @param opts.height Use clientHeight of the input `dom` by default.\n *        Can be 'auto' (the same as null/undefined)\n * @param opts.locale Specify the locale.\n * @param opts.useDirtyRect Enable dirty rectangle rendering or not.\n */\n\nexport function init(dom, theme, opts) {\n  var isClient = !(opts && opts.ssr);\n\n  if (isClient) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!dom) {\n        throw new Error('Initialize failed: invalid dom.');\n      }\n    }\n\n    var existInstance = getInstanceByDom(dom);\n\n    if (existInstance) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('There is a chart instance already initialized on the dom.');\n      }\n\n      return existInstance;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (isDom(dom) && dom.nodeName.toUpperCase() !== 'CANVAS' && (!dom.clientWidth && (!opts || opts.width == null) || !dom.clientHeight && (!opts || opts.height == null))) {\n        console.warn('Can\\'t get DOM width or height. Please check ' + 'dom.clientWidth and dom.clientHeight. They should not be 0.' + 'For example, you may need to call this in the callback ' + 'of window.onload.');\n      }\n    }\n  }\n\n  var chart = new ECharts(dom, theme, opts);\n  chart.id = 'ec_' + idBase++;\n  instances[chart.id] = chart;\n  isClient && modelUtil.setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\n  enableConnect(chart);\n  lifecycle.trigger('afterinit', chart);\n  return chart;\n}\n/**\n * @usage\n * (A)\n * ```js\n * let chart1 = echarts.init(dom1);\n * let chart2 = echarts.init(dom2);\n * chart1.group = 'xxx';\n * chart2.group = 'xxx';\n * echarts.connect('xxx');\n * ```\n * (B)\n * ```js\n * let chart1 = echarts.init(dom1);\n * let chart2 = echarts.init(dom2);\n * echarts.connect('xxx', [chart1, chart2]);\n * ```\n */\n\nexport function connect(groupId) {\n  // Is array of charts\n  if (isArray(groupId)) {\n    var charts = groupId;\n    groupId = null; // If any chart has group\n\n    each(charts, function (chart) {\n      if (chart.group != null) {\n        groupId = chart.group;\n      }\n    });\n    groupId = groupId || 'g_' + groupIdBase++;\n    each(charts, function (chart) {\n      chart.group = groupId;\n    });\n  }\n\n  connectedGroups[groupId] = true;\n  return groupId;\n}\n/**\n * @deprecated\n */\n\nexport function disConnect(groupId) {\n  connectedGroups[groupId] = false;\n}\n/**\n * Alias and backword compat\n */\n\nexport var disconnect = disConnect;\n/**\n * Dispose a chart instance\n */\n\nexport function dispose(chart) {\n  if (isString(chart)) {\n    chart = instances[chart];\n  } else if (!(chart instanceof ECharts)) {\n    // Try to treat as dom\n    chart = getInstanceByDom(chart);\n  }\n\n  if (chart instanceof ECharts && !chart.isDisposed()) {\n    chart.dispose();\n  }\n}\nexport function getInstanceByDom(dom) {\n  return instances[modelUtil.getAttribute(dom, DOM_ATTRIBUTE_KEY)];\n}\nexport function getInstanceById(key) {\n  return instances[key];\n}\n/**\n * Register theme\n */\n\nexport function registerTheme(name, theme) {\n  themeStorage[name] = theme;\n}\n/**\n * Register option preprocessor\n */\n\nexport function registerPreprocessor(preprocessorFunc) {\n  if (indexOf(optionPreprocessorFuncs, preprocessorFunc) < 0) {\n    optionPreprocessorFuncs.push(preprocessorFunc);\n  }\n}\nexport function registerProcessor(priority, processor) {\n  normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);\n}\n/**\n * Register postIniter\n * @param {Function} postInitFunc\n */\n\nexport function registerPostInit(postInitFunc) {\n  registerUpdateLifecycle('afterinit', postInitFunc);\n}\n/**\n * Register postUpdater\n * @param {Function} postUpdateFunc\n */\n\nexport function registerPostUpdate(postUpdateFunc) {\n  registerUpdateLifecycle('afterupdate', postUpdateFunc);\n}\nexport function registerUpdateLifecycle(name, cb) {\n  lifecycle.on(name, cb);\n}\nexport function registerAction(actionInfo, eventName, action) {\n  if (isFunction(eventName)) {\n    action = eventName;\n    eventName = '';\n  }\n\n  var actionType = isObject(actionInfo) ? actionInfo.type : [actionInfo, actionInfo = {\n    event: eventName\n  }][0]; // Event name is all lowercase\n\n  actionInfo.event = (actionInfo.event || actionType).toLowerCase();\n  eventName = actionInfo.event;\n\n  if (eventActionMap[eventName]) {\n    // Already registered.\n    return;\n  } // Validate action type and event name.\n\n\n  assert(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\n\n  if (!actions[actionType]) {\n    actions[actionType] = {\n      action: action,\n      actionInfo: actionInfo\n    };\n  }\n\n  eventActionMap[eventName] = actionType;\n}\nexport function registerCoordinateSystem(type, coordSysCreator) {\n  CoordinateSystemManager.register(type, coordSysCreator);\n}\n/**\n * Get dimensions of specified coordinate system.\n * @param {string} type\n * @return {Array.<string|Object>}\n */\n\nexport function getCoordinateSystemDimensions(type) {\n  var coordSysCreator = CoordinateSystemManager.get(type);\n\n  if (coordSysCreator) {\n    return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\n  }\n}\nexport { registerLocale } from './locale.js';\n\nfunction registerLayout(priority, layoutTask) {\n  normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\n}\n\nfunction registerVisual(priority, visualTask) {\n  normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\n}\n\nexport { registerLayout, registerVisual };\nvar registeredTasks = [];\n\nfunction normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\n  if (isFunction(priority) || isObject(priority)) {\n    fn = priority;\n    priority = defaultPriority;\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (isNaN(priority) || priority == null) {\n      throw new Error('Illegal priority');\n    } // Check duplicate\n\n\n    each(targetList, function (wrap) {\n      assert(wrap.__raw !== fn);\n    });\n  } // Already registered\n\n\n  if (indexOf(registeredTasks, fn) >= 0) {\n    return;\n  }\n\n  registeredTasks.push(fn);\n  var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\n  stageHandler.__prio = priority;\n  stageHandler.__raw = fn;\n  targetList.push(stageHandler);\n}\n\nexport function registerLoading(name, loadingFx) {\n  loadingEffects[name] = loadingFx;\n}\n/**\n * ZRender need a canvas context to do measureText.\n * But in node environment canvas may be created by node-canvas.\n * So we need to specify how to create a canvas instead of using document.createElement('canvas')\n *\n *\n * @deprecated use setPlatformAPI({ createCanvas }) instead.\n *\n * @example\n *     let Canvas = require('canvas');\n *     let echarts = require('echarts');\n *     echarts.setCanvasCreator(function () {\n *         // Small size is enough.\n *         return new Canvas(32, 32);\n *     });\n */\n\nexport function setCanvasCreator(creator) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateLog('setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead.');\n  }\n\n  setPlatformAPI({\n    createCanvas: creator\n  });\n}\n/**\n * The parameters and usage: see `geoSourceManager.registerMap`.\n * Compatible with previous `echarts.registerMap`.\n */\n\nexport function registerMap(mapName, geoJson, specialAreas) {\n  var registerMap = getImpl('registerMap');\n  registerMap && registerMap(mapName, geoJson, specialAreas);\n}\nexport function getMap(mapName) {\n  var getMap = getImpl('getMap');\n  return getMap && getMap(mapName);\n}\nexport var registerTransform = registerExternalTransform;\n/**\n * Globa dispatchAction to a specified chart instance.\n */\n// export function dispatchAction(payload: { chartId: string } & Payload, opt?: Parameters<ECharts['dispatchAction']>[1]) {\n//     if (!payload || !payload.chartId) {\n//         // Must have chartId to find chart\n//         return;\n//     }\n//     const chart = instances[payload.chartId];\n//     if (chart) {\n//         chart.dispatchAction(payload, opt);\n//     }\n// }\n// Buitlin global visual\n\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);\nregisterVisual(PRIORITY_VISUAL_DECAL, decal);\nregisterPreprocessor(backwardCompat);\nregisterProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\nregisterLoading('default', loadingDefault); // Default actions\n\nregisterAction({\n  type: HIGHLIGHT_ACTION_TYPE,\n  event: HIGHLIGHT_ACTION_TYPE,\n  update: HIGHLIGHT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: DOWNPLAY_ACTION_TYPE,\n  event: DOWNPLAY_ACTION_TYPE,\n  update: DOWNPLAY_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: SELECT_ACTION_TYPE,\n  event: SELECT_ACTION_TYPE,\n  update: SELECT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: UNSELECT_ACTION_TYPE,\n  event: UNSELECT_ACTION_TYPE,\n  update: UNSELECT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: TOGGLE_SELECT_ACTION_TYPE,\n  event: TOGGLE_SELECT_ACTION_TYPE,\n  update: TOGGLE_SELECT_ACTION_TYPE\n}, noop); // Default theme\n\nregisterTheme('light', lightTheme);\nregisterTheme('dark', darkTheme); // For backward compatibility, where the namespace `dataTool` will\n// be mounted on `echarts` is the extension `dataTool` is imported.\n\nexport var dataTool = {};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { error } from '../util/log.js'; // Implementation of exported APIs. For example registerMap, getMap.\n// The implentations will be registered when installing the component.\n// Avoid these code being bundled to the core module.\n\nvar implsStore = {}; // TODO Type\n\nexport function registerImpl(name, impl) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (implsStore[name]) {\n      error(\"Already has an implementation of \" + name + \".\");\n    }\n  }\n\n  implsStore[name] = impl;\n}\nexport function getImpl(name) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!implsStore[name]) {\n      error(\"Implementation of \" + name + \" doesn't exists.\");\n    }\n  }\n\n  return implsStore[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Language: English.\n */\nexport default {\n  time: {\n    month: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n    monthAbbr: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n    dayOfWeek: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n    dayOfWeekAbbr: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n  },\n  legend: {\n    selector: {\n      all: 'All',\n      inverse: 'Inv'\n    }\n  },\n  toolbox: {\n    brush: {\n      title: {\n        rect: 'Box Select',\n        polygon: 'Lasso Select',\n        lineX: 'Horizontally Select',\n        lineY: 'Vertically Select',\n        keep: 'Keep Selections',\n        clear: 'Clear Selections'\n      }\n    },\n    dataView: {\n      title: 'Data View',\n      lang: ['Data View', 'Close', 'Refresh']\n    },\n    dataZoom: {\n      title: {\n        zoom: 'Zoom',\n        back: 'Zoom Reset'\n      }\n    },\n    magicType: {\n      title: {\n        line: 'Switch to Line Chart',\n        bar: 'Switch to Bar Chart',\n        stack: 'Stack',\n        tiled: 'Tile'\n      }\n    },\n    restore: {\n      title: 'Restore'\n    },\n    saveAsImage: {\n      title: 'Save as Image',\n      lang: ['Right Click to Save Image']\n    }\n  },\n  series: {\n    typeNames: {\n      pie: 'Pie chart',\n      bar: 'Bar chart',\n      line: 'Line chart',\n      scatter: 'Scatter plot',\n      effectScatter: 'Ripple scatter plot',\n      radar: 'Radar chart',\n      tree: 'Tree',\n      treemap: 'Treemap',\n      boxplot: 'Boxplot',\n      candlestick: 'Candlestick',\n      k: 'K line chart',\n      heatmap: 'Heat map',\n      map: 'Map',\n      parallel: 'Parallel coordinate map',\n      lines: 'Line graph',\n      graph: 'Relationship graph',\n      sankey: 'Sankey diagram',\n      funnel: 'Funnel chart',\n      gauge: 'Gauge',\n      pictorialBar: 'Pictorial bar',\n      themeRiver: 'Theme River Map',\n      sunburst: 'Sunburst'\n    }\n  },\n  aria: {\n    general: {\n      withTitle: 'This is a chart about \"{title}\"',\n      withoutTitle: 'This is a chart'\n    },\n    series: {\n      single: {\n        prefix: '',\n        withName: ' with type {seriesType} named {seriesName}.',\n        withoutName: ' with type {seriesType}.'\n      },\n      multiple: {\n        prefix: '. It consists of {seriesCount} series count.',\n        withName: ' The {seriesId} series is a {seriesType} representing {seriesName}.',\n        withoutName: ' The {seriesId} series is a {seriesType}.',\n        separator: {\n          middle: '',\n          end: ''\n        }\n      }\n    },\n    data: {\n      allData: 'The data is as follows: ',\n      partialData: 'The first {displayCnt} items are: ',\n      withName: 'the data for {name} is {value}',\n      withoutName: '{value}',\n      separator: {\n        middle: ', ',\n        end: '. '\n      }\n    }\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport default {\n  time: {\n    month: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],\n    monthAbbr: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\n    dayOfWeek: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],\n    dayOfWeekAbbr: ['日', '一', '二', '三', '四', '五', '六']\n  },\n  legend: {\n    selector: {\n      all: '全选',\n      inverse: '反选'\n    }\n  },\n  toolbox: {\n    brush: {\n      title: {\n        rect: '矩形选择',\n        polygon: '圈选',\n        lineX: '横向选择',\n        lineY: '纵向选择',\n        keep: '保持选择',\n        clear: '清除选择'\n      }\n    },\n    dataView: {\n      title: '数据视图',\n      lang: ['数据视图', '关闭', '刷新']\n    },\n    dataZoom: {\n      title: {\n        zoom: '区域缩放',\n        back: '区域缩放还原'\n      }\n    },\n    magicType: {\n      title: {\n        line: '切换为折线图',\n        bar: '切换为柱状图',\n        stack: '切换为堆叠',\n        tiled: '切换为平铺'\n      }\n    },\n    restore: {\n      title: '还原'\n    },\n    saveAsImage: {\n      title: '保存为图片',\n      lang: ['右键另存为图片']\n    }\n  },\n  series: {\n    typeNames: {\n      pie: '饼图',\n      bar: '柱状图',\n      line: '折线图',\n      scatter: '散点图',\n      effectScatter: '涟漪散点图',\n      radar: '雷达图',\n      tree: '树图',\n      treemap: '矩形树图',\n      boxplot: '箱型图',\n      candlestick: 'K线图',\n      k: 'K线图',\n      heatmap: '热力图',\n      map: '地图',\n      parallel: '平行坐标图',\n      lines: '线图',\n      graph: '关系图',\n      sankey: '桑基图',\n      funnel: '漏斗图',\n      gauge: '仪表盘图',\n      pictorialBar: '象形柱图',\n      themeRiver: '主题河流图',\n      sunburst: '旭日图'\n    }\n  },\n  aria: {\n    general: {\n      withTitle: '这是一个关于“{title}”的图表。',\n      withoutTitle: '这是一个图表，'\n    },\n    series: {\n      single: {\n        prefix: '',\n        withName: '图表类型是{seriesType}，表示{seriesName}。',\n        withoutName: '图表类型是{seriesType}。'\n      },\n      multiple: {\n        prefix: '它由{seriesCount}个图表系列组成。',\n        withName: '第{seriesId}个系列是一个表示{seriesName}的{seriesType}，',\n        withoutName: '第{seriesId}个系列是一个{seriesType}，',\n        separator: {\n          middle: '；',\n          end: '。'\n        }\n      }\n    },\n    data: {\n      allData: '其数据是——',\n      partialData: '其中，前{displayCnt}项是——',\n      withName: '{name}的数据是{value}',\n      withoutName: '{value}',\n      separator: {\n        middle: '，',\n        end: ''\n      }\n    }\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Model from '../model/Model.js';\nimport env from 'zrender/lib/core/env.js'; // default import ZH and EN lang\n\nimport langEN from '../i18n/langEN.js';\nimport langZH from '../i18n/langZH.js';\nimport { isString, clone, merge } from 'zrender/lib/core/util.js';\nvar LOCALE_ZH = 'ZH';\nvar LOCALE_EN = 'EN';\nvar DEFAULT_LOCALE = LOCALE_EN;\nvar localeStorage = {};\nvar localeModels = {};\nexport var SYSTEM_LANG = !env.domSupported ? DEFAULT_LOCALE : function () {\n  var langStr = (\n  /* eslint-disable-next-line */\n  document.documentElement.lang || navigator.language || navigator.browserLanguage).toUpperCase();\n  return langStr.indexOf(LOCALE_ZH) > -1 ? LOCALE_ZH : DEFAULT_LOCALE;\n}();\nexport function registerLocale(locale, localeObj) {\n  locale = locale.toUpperCase();\n  localeModels[locale] = new Model(localeObj);\n  localeStorage[locale] = localeObj;\n} // export function getLocale(locale: string) {\n//     return localeStorage[locale];\n// }\n\nexport function createLocaleObject(locale) {\n  if (isString(locale)) {\n    var localeObj = localeStorage[locale.toUpperCase()] || {};\n\n    if (locale === LOCALE_ZH || locale === LOCALE_EN) {\n      return clone(localeObj);\n    } else {\n      return merge(clone(localeObj), clone(localeStorage[DEFAULT_LOCALE]), false);\n    }\n  } else {\n    return merge(clone(locale), clone(localeStorage[DEFAULT_LOCALE]), false);\n  }\n}\nexport function getLocaleModel(lang) {\n  return localeModels[lang];\n}\nexport function getDefaultLocaleModel() {\n  return localeModels[DEFAULT_LOCALE];\n} // Default locale\n\nregisterLocale(LOCALE_EN, langEN);\nregisterLocale(LOCALE_ZH, langZH);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { assert, isArray } from 'zrender/lib/core/util.js';\n;\n/**\n * @param {Object} define\n * @return See the return of `createTask`.\n */\n\nexport function createTask(define) {\n  return new Task(define);\n}\n\nvar Task =\n/** @class */\nfunction () {\n  function Task(define) {\n    define = define || {};\n    this._reset = define.reset;\n    this._plan = define.plan;\n    this._count = define.count;\n    this._onDirty = define.onDirty;\n    this._dirty = true;\n  }\n  /**\n   * @param step Specified step.\n   * @param skip Skip customer perform call.\n   * @param modBy Sampling window size.\n   * @param modDataCount Sampling count.\n   * @return whether unfinished.\n   */\n\n\n  Task.prototype.perform = function (performArgs) {\n    var upTask = this._upstream;\n    var skip = performArgs && performArgs.skip; // TODO some refactor.\n    // Pull data. Must pull data each time, because context.data\n    // may be updated by Series.setData.\n\n    if (this._dirty && upTask) {\n      var context = this.context;\n      context.data = context.outputData = upTask.context.outputData;\n    }\n\n    if (this.__pipeline) {\n      this.__pipeline.currentTask = this;\n    }\n\n    var planResult;\n\n    if (this._plan && !skip) {\n      planResult = this._plan(this.context);\n    } // Support sharding by mod, which changes the render sequence and makes the rendered graphic\n    // elements uniformed distributed when progress, especially when moving or zooming.\n\n\n    var lastModBy = normalizeModBy(this._modBy);\n    var lastModDataCount = this._modDataCount || 0;\n    var modBy = normalizeModBy(performArgs && performArgs.modBy);\n    var modDataCount = performArgs && performArgs.modDataCount || 0;\n\n    if (lastModBy !== modBy || lastModDataCount !== modDataCount) {\n      planResult = 'reset';\n    }\n\n    function normalizeModBy(val) {\n      !(val >= 1) && (val = 1); // jshint ignore:line\n\n      return val;\n    }\n\n    var forceFirstProgress;\n\n    if (this._dirty || planResult === 'reset') {\n      this._dirty = false;\n      forceFirstProgress = this._doReset(skip);\n    }\n\n    this._modBy = modBy;\n    this._modDataCount = modDataCount;\n    var step = performArgs && performArgs.step;\n\n    if (upTask) {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(upTask._outputDueEnd != null);\n      }\n\n      this._dueEnd = upTask._outputDueEnd;\n    } // DataTask or overallTask\n    else {\n        if (process.env.NODE_ENV !== 'production') {\n          assert(!this._progress || this._count);\n        }\n\n        this._dueEnd = this._count ? this._count(this.context) : Infinity;\n      } // Note: Stubs, that its host overall task let it has progress, has progress.\n    // If no progress, pass index from upstream to downstream each time plan called.\n\n\n    if (this._progress) {\n      var start = this._dueIndex;\n      var end = Math.min(step != null ? this._dueIndex + step : Infinity, this._dueEnd);\n\n      if (!skip && (forceFirstProgress || start < end)) {\n        var progress = this._progress;\n\n        if (isArray(progress)) {\n          for (var i = 0; i < progress.length; i++) {\n            this._doProgress(progress[i], start, end, modBy, modDataCount);\n          }\n        } else {\n          this._doProgress(progress, start, end, modBy, modDataCount);\n        }\n      }\n\n      this._dueIndex = end; // If no `outputDueEnd`, assume that output data and\n      // input data is the same, so use `dueIndex` as `outputDueEnd`.\n\n      var outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : end;\n\n      if (process.env.NODE_ENV !== 'production') {\n        // ??? Can not rollback.\n        assert(outputDueEnd >= this._outputDueEnd);\n      }\n\n      this._outputDueEnd = outputDueEnd;\n    } else {\n      // (1) Some overall task has no progress.\n      // (2) Stubs, that its host overall task do not let it has progress, has no progress.\n      // This should always be performed so it can be passed to downstream.\n      this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : this._dueEnd;\n    }\n\n    return this.unfinished();\n  };\n\n  Task.prototype.dirty = function () {\n    this._dirty = true;\n    this._onDirty && this._onDirty(this.context);\n  };\n\n  Task.prototype._doProgress = function (progress, start, end, modBy, modDataCount) {\n    iterator.reset(start, end, modBy, modDataCount);\n    this._callingProgress = progress;\n\n    this._callingProgress({\n      start: start,\n      end: end,\n      count: end - start,\n      next: iterator.next\n    }, this.context);\n  };\n\n  Task.prototype._doReset = function (skip) {\n    this._dueIndex = this._outputDueEnd = this._dueEnd = 0;\n    this._settedOutputEnd = null;\n    var progress;\n    var forceFirstProgress;\n\n    if (!skip && this._reset) {\n      progress = this._reset(this.context);\n\n      if (progress && progress.progress) {\n        forceFirstProgress = progress.forceFirstProgress;\n        progress = progress.progress;\n      } // To simplify no progress checking, array must has item.\n\n\n      if (isArray(progress) && !progress.length) {\n        progress = null;\n      }\n    }\n\n    this._progress = progress;\n    this._modBy = this._modDataCount = null;\n    var downstream = this._downstream;\n    downstream && downstream.dirty();\n    return forceFirstProgress;\n  };\n\n  Task.prototype.unfinished = function () {\n    return this._progress && this._dueIndex < this._dueEnd;\n  };\n  /**\n   * @param downTask The downstream task.\n   * @return The downstream task.\n   */\n\n\n  Task.prototype.pipe = function (downTask) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(downTask && !downTask._disposed && downTask !== this);\n    } // If already downstream, do not dirty downTask.\n\n\n    if (this._downstream !== downTask || this._dirty) {\n      this._downstream = downTask;\n      downTask._upstream = this;\n      downTask.dirty();\n    }\n  };\n\n  Task.prototype.dispose = function () {\n    if (this._disposed) {\n      return;\n    }\n\n    this._upstream && (this._upstream._downstream = null);\n    this._downstream && (this._downstream._upstream = null);\n    this._dirty = false;\n    this._disposed = true;\n  };\n\n  Task.prototype.getUpstream = function () {\n    return this._upstream;\n  };\n\n  Task.prototype.getDownstream = function () {\n    return this._downstream;\n  };\n\n  Task.prototype.setOutputEnd = function (end) {\n    // This only happend in dataTask, dataZoom, map, currently.\n    // where dataZoom do not set end each time, but only set\n    // when reset. So we should record the setted end, in case\n    // that the stub of dataZoom perform again and earse the\n    // setted end by upstream.\n    this._outputDueEnd = this._settedOutputEnd = end;\n  };\n\n  return Task;\n}();\n\nexport { Task };\n\nvar iterator = function () {\n  var end;\n  var current;\n  var modBy;\n  var modDataCount;\n  var winCount;\n  var it = {\n    reset: function (s, e, sStep, sCount) {\n      current = s;\n      end = e;\n      modBy = sStep;\n      modDataCount = sCount;\n      winCount = Math.ceil(modDataCount / modBy);\n      it.next = modBy > 1 && modDataCount > 0 ? modNext : sequentialNext;\n    }\n  };\n  return it;\n\n  function sequentialNext() {\n    return current < end ? current++ : null;\n  }\n\n  function modNext() {\n    var dataIndex = current % winCount * modBy + Math.ceil(current / winCount);\n    var result = current >= end ? null : dataIndex < modDataCount ? dataIndex // If modDataCount is smaller than data.count() (consider `appendData` case),\n    // Use normal linear rendering mode.\n    : current;\n    current++;\n    return result;\n  }\n}(); ///////////////////////////////////////////////////////////\n// For stream debug (Should be commented out after used!)\n// @usage: printTask(this, 'begin');\n// @usage: printTask(this, null, {someExtraProp});\n// @usage: Use `__idxInPipeline` as conditional breakpiont.\n//\n// window.printTask = function (task: any, prefix: string, extra: { [key: string]: unknown }): void {\n//     window.ecTaskUID == null && (window.ecTaskUID = 0);\n//     task.uidDebug == null && (task.uidDebug = `task_${window.ecTaskUID++}`);\n//     task.agent && task.agent.uidDebug == null && (task.agent.uidDebug = `task_${window.ecTaskUID++}`);\n//     let props = [];\n//     if (task.__pipeline) {\n//         let val = `${task.__idxInPipeline}/${task.__pipeline.tail.__idxInPipeline} ${task.agent ? '(stub)' : ''}`;\n//         props.push({text: '__idxInPipeline/total', value: val});\n//     } else {\n//         let stubCount = 0;\n//         task.agentStubMap.each(() => stubCount++);\n//         props.push({text: 'idx', value: `overall (stubs: ${stubCount})`});\n//     }\n//     props.push({text: 'uid', value: task.uidDebug});\n//     if (task.__pipeline) {\n//         props.push({text: 'pipelineId', value: task.__pipeline.id});\n//         task.agent && props.push(\n//             {text: 'stubFor', value: task.agent.uidDebug}\n//         );\n//     }\n//     props.push(\n//         {text: 'dirty', value: task._dirty},\n//         {text: 'dueIndex', value: task._dueIndex},\n//         {text: 'dueEnd', value: task._dueEnd},\n//         {text: 'outputDueEnd', value: task._outputDueEnd}\n//     );\n//     if (extra) {\n//         Object.keys(extra).forEach(key => {\n//             props.push({text: key, value: extra[key]});\n//         });\n//     }\n//     let args = ['color: blue'];\n//     let msg = `%c[${prefix || 'T'}] %c` + props.map(item => (\n//         args.push('color: green', 'color: red'),\n//         `${item.text}: %c${item.value}`\n//     )).join('%c, ');\n//     console.log.apply(console, [msg].concat(args));\n//     // console.log(this);\n// };\n// window.printPipeline = function (task: any, prefix: string) {\n//     const pipeline = task.__pipeline;\n//     let currTask = pipeline.head;\n//     while (currTask) {\n//         window.printTask(currTask, prefix);\n//         currTask = currTask._downstream;\n//     }\n// };\n// window.showChain = function (chainHeadTask) {\n//     var chain = [];\n//     var task = chainHeadTask;\n//     while (task) {\n//         chain.push({\n//             task: task,\n//             up: task._upstream,\n//             down: task._downstream,\n//             idxInPipeline: task.__idxInPipeline\n//         });\n//         task = task._downstream;\n//     }\n//     return chain;\n// };\n// window.findTaskInChain = function (task, chainHeadTask) {\n//     let chain = window.showChain(chainHeadTask);\n//     let result = [];\n//     for (let i = 0; i < chain.length; i++) {\n//         let chainItem = chain[i];\n//         if (chainItem.task === task) {\n//             result.push(i);\n//         }\n//     }\n//     return result;\n// };\n// window.printChainAEachInChainB = function (chainHeadTaskA, chainHeadTaskB) {\n//     let chainA = window.showChain(chainHeadTaskA);\n//     for (let i = 0; i < chainA.length; i++) {\n//         console.log('chainAIdx:', i, 'inChainB:', window.findTaskInChain(chainA[i].task, chainHeadTaskB));\n//     }\n// };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { assert, clone, createHashMap, isFunction, keys, map, reduce } from 'zrender/lib/core/util.js';\nimport { parseDataValue } from './helper/dataValueHelper.js';\nimport { shouldRetrieveDataByName } from './Source.js';\nvar UNDEFINED = 'undefined';\n/* global Float64Array, Int32Array, Uint32Array, Uint16Array */\n// Caution: MUST not use `new CtorUint32Array(arr, 0, len)`, because the Ctor of array is\n// different from the Ctor of typed array.\n\nexport var CtorUint32Array = typeof Uint32Array === UNDEFINED ? Array : Uint32Array;\nexport var CtorUint16Array = typeof Uint16Array === UNDEFINED ? Array : Uint16Array;\nexport var CtorInt32Array = typeof Int32Array === UNDEFINED ? Array : Int32Array;\nexport var CtorFloat64Array = typeof Float64Array === UNDEFINED ? Array : Float64Array;\n/**\n * Multi dimensional data store\n */\n\nvar dataCtors = {\n  'float': CtorFloat64Array,\n  'int': CtorInt32Array,\n  // Ordinal data type can be string or int\n  'ordinal': Array,\n  'number': Array,\n  'time': CtorFloat64Array\n};\nvar defaultDimValueGetters;\n\nfunction getIndicesCtor(rawCount) {\n  // The possible max value in this._indicies is always this._rawCount despite of filtering.\n  return rawCount > 65535 ? CtorUint32Array : CtorUint16Array;\n}\n\n;\n\nfunction getInitialExtent() {\n  return [Infinity, -Infinity];\n}\n\n;\n\nfunction cloneChunk(originalChunk) {\n  var Ctor = originalChunk.constructor; // Only shallow clone is enough when Array.\n\n  return Ctor === Array ? originalChunk.slice() : new Ctor(originalChunk);\n}\n\nfunction prepareStore(store, dimIdx, dimType, end, append) {\n  var DataCtor = dataCtors[dimType || 'float'];\n\n  if (append) {\n    var oldStore = store[dimIdx];\n    var oldLen = oldStore && oldStore.length;\n\n    if (!(oldLen === end)) {\n      var newStore = new DataCtor(end); // The cost of the copy is probably inconsiderable\n      // within the initial chunkSize.\n\n      for (var j = 0; j < oldLen; j++) {\n        newStore[j] = oldStore[j];\n      }\n\n      store[dimIdx] = newStore;\n    }\n  } else {\n    store[dimIdx] = new DataCtor(end);\n  }\n}\n\n;\n/**\n * Basically, DataStore API keep immutable.\n */\n\nvar DataStore =\n/** @class */\nfunction () {\n  function DataStore() {\n    this._chunks = []; // It will not be calculated util needed.\n\n    this._rawExtent = [];\n    this._extent = [];\n    this._count = 0;\n    this._rawCount = 0;\n    this._calcDimNameToIdx = createHashMap();\n  }\n  /**\n   * Initialize from data\n   */\n\n\n  DataStore.prototype.initData = function (provider, inputDimensions, dimValueGetter) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(isFunction(provider.getItem) && isFunction(provider.count), 'Invalid data provider.');\n    }\n\n    this._provider = provider; // Clear\n\n    this._chunks = [];\n    this._indices = null;\n    this.getRawIndex = this._getRawIdxIdentity;\n    var source = provider.getSource();\n    var defaultGetter = this.defaultDimValueGetter = defaultDimValueGetters[source.sourceFormat]; // Default dim value getter\n\n    this._dimValueGetter = dimValueGetter || defaultGetter; // Reset raw extent.\n\n    this._rawExtent = [];\n    var willRetrieveDataByName = shouldRetrieveDataByName(source);\n    this._dimensions = map(inputDimensions, function (dim) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (willRetrieveDataByName) {\n          assert(dim.property != null);\n        }\n      }\n\n      return {\n        // Only pick these two props. Not leak other properties like orderMeta.\n        type: dim.type,\n        property: dim.property\n      };\n    });\n\n    this._initDataFromProvider(0, provider.count());\n  };\n\n  DataStore.prototype.getProvider = function () {\n    return this._provider;\n  };\n  /**\n   * Caution: even when a `source` instance owned by a series, the created data store\n   * may still be shared by different sereis (the source hash does not use all `source`\n   * props, see `sourceManager`). In this case, the `source` props that are not used in\n   * hash (like `source.dimensionDefine`) probably only belongs to a certain series and\n   * thus should not be fetch here.\n   */\n\n\n  DataStore.prototype.getSource = function () {\n    return this._provider.getSource();\n  };\n  /**\n   * @caution Only used in dataStack.\n   */\n\n\n  DataStore.prototype.ensureCalculationDimension = function (dimName, type) {\n    var calcDimNameToIdx = this._calcDimNameToIdx;\n    var dimensions = this._dimensions;\n    var calcDimIdx = calcDimNameToIdx.get(dimName);\n\n    if (calcDimIdx != null) {\n      if (dimensions[calcDimIdx].type === type) {\n        return calcDimIdx;\n      }\n    } else {\n      calcDimIdx = dimensions.length;\n    }\n\n    dimensions[calcDimIdx] = {\n      type: type\n    };\n    calcDimNameToIdx.set(dimName, calcDimIdx);\n    this._chunks[calcDimIdx] = new dataCtors[type || 'float'](this._rawCount);\n    this._rawExtent[calcDimIdx] = getInitialExtent();\n    return calcDimIdx;\n  };\n\n  DataStore.prototype.collectOrdinalMeta = function (dimIdx, ordinalMeta) {\n    var chunk = this._chunks[dimIdx];\n    var dim = this._dimensions[dimIdx];\n    var rawExtents = this._rawExtent;\n    var offset = dim.ordinalOffset || 0;\n    var len = chunk.length;\n\n    if (offset === 0) {\n      // We need to reset the rawExtent if collect is from start.\n      // Because this dimension may be guessed as number and calcuating a wrong extent.\n      rawExtents[dimIdx] = getInitialExtent();\n    }\n\n    var dimRawExtent = rawExtents[dimIdx]; // Parse from previous data offset. len may be changed after appendData\n\n    for (var i = offset; i < len; i++) {\n      var val = chunk[i] = ordinalMeta.parseAndCollect(chunk[i]);\n\n      if (!isNaN(val)) {\n        dimRawExtent[0] = Math.min(val, dimRawExtent[0]);\n        dimRawExtent[1] = Math.max(val, dimRawExtent[1]);\n      }\n    }\n\n    dim.ordinalMeta = ordinalMeta;\n    dim.ordinalOffset = len;\n    dim.type = 'ordinal'; // Force to be ordinal\n  };\n\n  DataStore.prototype.getOrdinalMeta = function (dimIdx) {\n    var dimInfo = this._dimensions[dimIdx];\n    var ordinalMeta = dimInfo.ordinalMeta;\n    return ordinalMeta;\n  };\n\n  DataStore.prototype.getDimensionProperty = function (dimIndex) {\n    var item = this._dimensions[dimIndex];\n    return item && item.property;\n  };\n  /**\n   * Caution: Can be only called on raw data (before `this._indices` created).\n   */\n\n\n  DataStore.prototype.appendData = function (data) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this._indices, 'appendData can only be called on raw data.');\n    }\n\n    var provider = this._provider;\n    var start = this.count();\n    provider.appendData(data);\n    var end = provider.count();\n\n    if (!provider.persistent) {\n      end += start;\n    }\n\n    if (start < end) {\n      this._initDataFromProvider(start, end, true);\n    }\n\n    return [start, end];\n  };\n\n  DataStore.prototype.appendValues = function (values, minFillLen) {\n    var chunks = this._chunks;\n    var dimensions = this._dimensions;\n    var dimLen = dimensions.length;\n    var rawExtent = this._rawExtent;\n    var start = this.count();\n    var end = start + Math.max(values.length, minFillLen || 0);\n\n    for (var i = 0; i < dimLen; i++) {\n      var dim = dimensions[i];\n      prepareStore(chunks, i, dim.type, end, true);\n    }\n\n    var emptyDataItem = [];\n\n    for (var idx = start; idx < end; idx++) {\n      var sourceIdx = idx - start; // Store the data by dimensions\n\n      for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n        var dim = dimensions[dimIdx];\n        var val = defaultDimValueGetters.arrayRows.call(this, values[sourceIdx] || emptyDataItem, dim.property, sourceIdx, dimIdx);\n        chunks[dimIdx][idx] = val;\n        var dimRawExtent = rawExtent[dimIdx];\n        val < dimRawExtent[0] && (dimRawExtent[0] = val);\n        val > dimRawExtent[1] && (dimRawExtent[1] = val);\n      }\n    }\n\n    this._rawCount = this._count = end;\n    return {\n      start: start,\n      end: end\n    };\n  };\n\n  DataStore.prototype._initDataFromProvider = function (start, end, append) {\n    var provider = this._provider;\n    var chunks = this._chunks;\n    var dimensions = this._dimensions;\n    var dimLen = dimensions.length;\n    var rawExtent = this._rawExtent;\n    var dimNames = map(dimensions, function (dim) {\n      return dim.property;\n    });\n\n    for (var i = 0; i < dimLen; i++) {\n      var dim = dimensions[i];\n\n      if (!rawExtent[i]) {\n        rawExtent[i] = getInitialExtent();\n      }\n\n      prepareStore(chunks, i, dim.type, end, append);\n    }\n\n    if (provider.fillStorage) {\n      provider.fillStorage(start, end, chunks, rawExtent);\n    } else {\n      var dataItem = [];\n\n      for (var idx = start; idx < end; idx++) {\n        // NOTICE: Try not to write things into dataItem\n        dataItem = provider.getItem(idx, dataItem); // Each data item is value\n        // [1, 2]\n        // 2\n        // Bar chart, line chart which uses category axis\n        // only gives the 'y' value. 'x' value is the indices of category\n        // Use a tempValue to normalize the value to be a (x, y) value\n        // Store the data by dimensions\n\n        for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n          var dimStorage = chunks[dimIdx]; // PENDING NULL is empty or zero\n\n          var val = this._dimValueGetter(dataItem, dimNames[dimIdx], idx, dimIdx);\n\n          dimStorage[idx] = val;\n          var dimRawExtent = rawExtent[dimIdx];\n          val < dimRawExtent[0] && (dimRawExtent[0] = val);\n          val > dimRawExtent[1] && (dimRawExtent[1] = val);\n        }\n      }\n    }\n\n    if (!provider.persistent && provider.clean) {\n      // Clean unused data if data source is typed array.\n      provider.clean();\n    }\n\n    this._rawCount = this._count = end; // Reset data extent\n\n    this._extent = [];\n  };\n\n  DataStore.prototype.count = function () {\n    return this._count;\n  };\n  /**\n   * Get value. Return NaN if idx is out of range.\n   */\n\n\n  DataStore.prototype.get = function (dim, idx) {\n    if (!(idx >= 0 && idx < this._count)) {\n      return NaN;\n    }\n\n    var dimStore = this._chunks[dim];\n    return dimStore ? dimStore[this.getRawIndex(idx)] : NaN;\n  };\n\n  DataStore.prototype.getValues = function (dimensions, idx) {\n    var values = [];\n    var dimArr = [];\n\n    if (idx == null) {\n      idx = dimensions; // TODO get all from store?\n\n      dimensions = []; // All dimensions\n\n      for (var i = 0; i < this._dimensions.length; i++) {\n        dimArr.push(i);\n      }\n    } else {\n      dimArr = dimensions;\n    }\n\n    for (var i = 0, len = dimArr.length; i < len; i++) {\n      values.push(this.get(dimArr[i], idx));\n    }\n\n    return values;\n  };\n  /**\n   * @param dim concrete dim\n   */\n\n\n  DataStore.prototype.getByRawIndex = function (dim, rawIdx) {\n    if (!(rawIdx >= 0 && rawIdx < this._rawCount)) {\n      return NaN;\n    }\n\n    var dimStore = this._chunks[dim];\n    return dimStore ? dimStore[rawIdx] : NaN;\n  };\n  /**\n   * Get sum of data in one dimension\n   */\n\n\n  DataStore.prototype.getSum = function (dim) {\n    var dimData = this._chunks[dim];\n    var sum = 0;\n\n    if (dimData) {\n      for (var i = 0, len = this.count(); i < len; i++) {\n        var value = this.get(dim, i);\n\n        if (!isNaN(value)) {\n          sum += value;\n        }\n      }\n    }\n\n    return sum;\n  };\n  /**\n   * Get median of data in one dimension\n   */\n\n\n  DataStore.prototype.getMedian = function (dim) {\n    var dimDataArray = []; // map all data of one dimension\n\n    this.each([dim], function (val) {\n      if (!isNaN(val)) {\n        dimDataArray.push(val);\n      }\n    }); // TODO\n    // Use quick select?\n\n    var sortedDimDataArray = dimDataArray.sort(function (a, b) {\n      return a - b;\n    });\n    var len = this.count(); // calculate median\n\n    return len === 0 ? 0 : len % 2 === 1 ? sortedDimDataArray[(len - 1) / 2] : (sortedDimDataArray[len / 2] + sortedDimDataArray[len / 2 - 1]) / 2;\n  };\n  /**\n   * Retreive the index with given raw data index\n   */\n\n\n  DataStore.prototype.indexOfRawIndex = function (rawIndex) {\n    if (rawIndex >= this._rawCount || rawIndex < 0) {\n      return -1;\n    }\n\n    if (!this._indices) {\n      return rawIndex;\n    } // Indices are ascending\n\n\n    var indices = this._indices; // If rawIndex === dataIndex\n\n    var rawDataIndex = indices[rawIndex];\n\n    if (rawDataIndex != null && rawDataIndex < this._count && rawDataIndex === rawIndex) {\n      return rawIndex;\n    }\n\n    var left = 0;\n    var right = this._count - 1;\n\n    while (left <= right) {\n      var mid = (left + right) / 2 | 0;\n\n      if (indices[mid] < rawIndex) {\n        left = mid + 1;\n      } else if (indices[mid] > rawIndex) {\n        right = mid - 1;\n      } else {\n        return mid;\n      }\n    }\n\n    return -1;\n  };\n  /**\n   * Retreive the index of nearest value\n   * @param dim\n   * @param value\n   * @param [maxDistance=Infinity]\n   * @return If and only if multiple indices has\n   *         the same value, they are put to the result.\n   */\n\n\n  DataStore.prototype.indicesOfNearest = function (dim, value, maxDistance) {\n    var chunks = this._chunks;\n    var dimData = chunks[dim];\n    var nearestIndices = [];\n\n    if (!dimData) {\n      return nearestIndices;\n    }\n\n    if (maxDistance == null) {\n      maxDistance = Infinity;\n    }\n\n    var minDist = Infinity;\n    var minDiff = -1;\n    var nearestIndicesLen = 0; // Check the test case of `test/ut/spec/data/SeriesData.js`.\n\n    for (var i = 0, len = this.count(); i < len; i++) {\n      var dataIndex = this.getRawIndex(i);\n      var diff = value - dimData[dataIndex];\n      var dist = Math.abs(diff);\n\n      if (dist <= maxDistance) {\n        // When the `value` is at the middle of `this.get(dim, i)` and `this.get(dim, i+1)`,\n        // we'd better not push both of them to `nearestIndices`, otherwise it is easy to\n        // get more than one item in `nearestIndices` (more specifically, in `tooltip`).\n        // So we chose the one that `diff >= 0` in this csae.\n        // But if `this.get(dim, i)` and `this.get(dim, j)` get the same value, both of them\n        // should be push to `nearestIndices`.\n        if (dist < minDist || dist === minDist && diff >= 0 && minDiff < 0) {\n          minDist = dist;\n          minDiff = diff;\n          nearestIndicesLen = 0;\n        }\n\n        if (diff === minDiff) {\n          nearestIndices[nearestIndicesLen++] = i;\n        }\n      }\n    }\n\n    nearestIndices.length = nearestIndicesLen;\n    return nearestIndices;\n  };\n\n  DataStore.prototype.getIndices = function () {\n    var newIndices;\n    var indices = this._indices;\n\n    if (indices) {\n      var Ctor = indices.constructor;\n      var thisCount = this._count; // `new Array(a, b, c)` is different from `new Uint32Array(a, b, c)`.\n\n      if (Ctor === Array) {\n        newIndices = new Ctor(thisCount);\n\n        for (var i = 0; i < thisCount; i++) {\n          newIndices[i] = indices[i];\n        }\n      } else {\n        newIndices = new Ctor(indices.buffer, 0, thisCount);\n      }\n    } else {\n      var Ctor = getIndicesCtor(this._rawCount);\n      newIndices = new Ctor(this.count());\n\n      for (var i = 0; i < newIndices.length; i++) {\n        newIndices[i] = i;\n      }\n    }\n\n    return newIndices;\n  };\n  /**\n   * Data filter.\n   */\n\n\n  DataStore.prototype.filter = function (dims, cb) {\n    if (!this._count) {\n      return this;\n    }\n\n    var newStore = this.clone();\n    var count = newStore.count();\n    var Ctor = getIndicesCtor(newStore._rawCount);\n    var newIndices = new Ctor(count);\n    var value = [];\n    var dimSize = dims.length;\n    var offset = 0;\n    var dim0 = dims[0];\n    var chunks = newStore._chunks;\n\n    for (var i = 0; i < count; i++) {\n      var keep = void 0;\n      var rawIdx = newStore.getRawIndex(i); // Simple optimization\n\n      if (dimSize === 0) {\n        keep = cb(i);\n      } else if (dimSize === 1) {\n        var val = chunks[dim0][rawIdx];\n        keep = cb(val, i);\n      } else {\n        var k = 0;\n\n        for (; k < dimSize; k++) {\n          value[k] = chunks[dims[k]][rawIdx];\n        }\n\n        value[k] = i;\n        keep = cb.apply(null, value);\n      }\n\n      if (keep) {\n        newIndices[offset++] = rawIdx;\n      }\n    } // Set indices after filtered.\n\n\n    if (offset < count) {\n      newStore._indices = newIndices;\n    }\n\n    newStore._count = offset; // Reset data extent\n\n    newStore._extent = [];\n\n    newStore._updateGetRawIdx();\n\n    return newStore;\n  };\n  /**\n   * Select data in range. (For optimization of filter)\n   * (Manually inline code, support 5 million data filtering in data zoom.)\n   */\n\n\n  DataStore.prototype.selectRange = function (range) {\n    var newStore = this.clone();\n    var len = newStore._count;\n\n    if (!len) {\n      return this;\n    }\n\n    var dims = keys(range);\n    var dimSize = dims.length;\n\n    if (!dimSize) {\n      return this;\n    }\n\n    var originalCount = newStore.count();\n    var Ctor = getIndicesCtor(newStore._rawCount);\n    var newIndices = new Ctor(originalCount);\n    var offset = 0;\n    var dim0 = dims[0];\n    var min = range[dim0][0];\n    var max = range[dim0][1];\n    var storeArr = newStore._chunks;\n    var quickFinished = false;\n\n    if (!newStore._indices) {\n      // Extreme optimization for common case. About 2x faster in chrome.\n      var idx = 0;\n\n      if (dimSize === 1) {\n        var dimStorage = storeArr[dims[0]];\n\n        for (var i = 0; i < len; i++) {\n          var val = dimStorage[i]; // NaN will not be filtered. Consider the case, in line chart, empty\n          // value indicates the line should be broken. But for the case like\n          // scatter plot, a data item with empty value will not be rendered,\n          // but the axis extent may be effected if some other dim of the data\n          // item has value. Fortunately it is not a significant negative effect.\n\n          if (val >= min && val <= max || isNaN(val)) {\n            newIndices[offset++] = idx;\n          }\n\n          idx++;\n        }\n\n        quickFinished = true;\n      } else if (dimSize === 2) {\n        var dimStorage = storeArr[dims[0]];\n        var dimStorage2 = storeArr[dims[1]];\n        var min2 = range[dims[1]][0];\n        var max2 = range[dims[1]][1];\n\n        for (var i = 0; i < len; i++) {\n          var val = dimStorage[i];\n          var val2 = dimStorage2[i]; // Do not filter NaN, see comment above.\n\n          if ((val >= min && val <= max || isNaN(val)) && (val2 >= min2 && val2 <= max2 || isNaN(val2))) {\n            newIndices[offset++] = idx;\n          }\n\n          idx++;\n        }\n\n        quickFinished = true;\n      }\n    }\n\n    if (!quickFinished) {\n      if (dimSize === 1) {\n        for (var i = 0; i < originalCount; i++) {\n          var rawIndex = newStore.getRawIndex(i);\n          var val = storeArr[dims[0]][rawIndex]; // Do not filter NaN, see comment above.\n\n          if (val >= min && val <= max || isNaN(val)) {\n            newIndices[offset++] = rawIndex;\n          }\n        }\n      } else {\n        for (var i = 0; i < originalCount; i++) {\n          var keep = true;\n          var rawIndex = newStore.getRawIndex(i);\n\n          for (var k = 0; k < dimSize; k++) {\n            var dimk = dims[k];\n            var val = storeArr[dimk][rawIndex]; // Do not filter NaN, see comment above.\n\n            if (val < range[dimk][0] || val > range[dimk][1]) {\n              keep = false;\n            }\n          }\n\n          if (keep) {\n            newIndices[offset++] = newStore.getRawIndex(i);\n          }\n        }\n      }\n    } // Set indices after filtered.\n\n\n    if (offset < originalCount) {\n      newStore._indices = newIndices;\n    }\n\n    newStore._count = offset; // Reset data extent\n\n    newStore._extent = [];\n\n    newStore._updateGetRawIdx();\n\n    return newStore;\n  }; // /**\n  //  * Data mapping to a plain array\n  //  */\n  // mapArray(dims: DimensionIndex[], cb: MapArrayCb): any[] {\n  //     const result: any[] = [];\n  //     this.each(dims, function () {\n  //         result.push(cb && (cb as MapArrayCb).apply(null, arguments));\n  //     });\n  //     return result;\n  // }\n\n  /**\n   * Data mapping to a new List with given dimensions\n   */\n\n\n  DataStore.prototype.map = function (dims, cb) {\n    // TODO only clone picked chunks.\n    var target = this.clone(dims);\n\n    this._updateDims(target, dims, cb);\n\n    return target;\n  };\n  /**\n   * @caution Danger!! Only used in dataStack.\n   */\n\n\n  DataStore.prototype.modify = function (dims, cb) {\n    this._updateDims(this, dims, cb);\n  };\n\n  DataStore.prototype._updateDims = function (target, dims, cb) {\n    var targetChunks = target._chunks;\n    var tmpRetValue = [];\n    var dimSize = dims.length;\n    var dataCount = target.count();\n    var values = [];\n    var rawExtent = target._rawExtent;\n\n    for (var i = 0; i < dims.length; i++) {\n      rawExtent[dims[i]] = getInitialExtent();\n    }\n\n    for (var dataIndex = 0; dataIndex < dataCount; dataIndex++) {\n      var rawIndex = target.getRawIndex(dataIndex);\n\n      for (var k = 0; k < dimSize; k++) {\n        values[k] = targetChunks[dims[k]][rawIndex];\n      }\n\n      values[dimSize] = dataIndex;\n      var retValue = cb && cb.apply(null, values);\n\n      if (retValue != null) {\n        // a number or string (in oridinal dimension)?\n        if (typeof retValue !== 'object') {\n          tmpRetValue[0] = retValue;\n          retValue = tmpRetValue;\n        }\n\n        for (var i = 0; i < retValue.length; i++) {\n          var dim = dims[i];\n          var val = retValue[i];\n          var rawExtentOnDim = rawExtent[dim];\n          var dimStore = targetChunks[dim];\n\n          if (dimStore) {\n            dimStore[rawIndex] = val;\n          }\n\n          if (val < rawExtentOnDim[0]) {\n            rawExtentOnDim[0] = val;\n          }\n\n          if (val > rawExtentOnDim[1]) {\n            rawExtentOnDim[1] = val;\n          }\n        }\n      }\n    }\n  };\n  /**\n   * Large data down sampling using largest-triangle-three-buckets\n   * @param {string} valueDimension\n   * @param {number} targetCount\n   */\n\n\n  DataStore.prototype.lttbDownSample = function (valueDimension, rate) {\n    var target = this.clone([valueDimension], true);\n    var targetStorage = target._chunks;\n    var dimStore = targetStorage[valueDimension];\n    var len = this.count();\n    var sampledIndex = 0;\n    var frameSize = Math.floor(1 / rate);\n    var currentRawIndex = this.getRawIndex(0);\n    var maxArea;\n    var area;\n    var nextRawIndex;\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.min((Math.ceil(len / frameSize) + 2) * 2, len)); // First frame use the first data.\n\n    newIndices[sampledIndex++] = currentRawIndex;\n\n    for (var i = 1; i < len - 1; i += frameSize) {\n      var nextFrameStart = Math.min(i + frameSize, len - 1);\n      var nextFrameEnd = Math.min(i + frameSize * 2, len);\n      var avgX = (nextFrameEnd + nextFrameStart) / 2;\n      var avgY = 0;\n\n      for (var idx = nextFrameStart; idx < nextFrameEnd; idx++) {\n        var rawIndex = this.getRawIndex(idx);\n        var y = dimStore[rawIndex];\n\n        if (isNaN(y)) {\n          continue;\n        }\n\n        avgY += y;\n      }\n\n      avgY /= nextFrameEnd - nextFrameStart;\n      var frameStart = i;\n      var frameEnd = Math.min(i + frameSize, len);\n      var pointAX = i - 1;\n      var pointAY = dimStore[currentRawIndex];\n      maxArea = -1;\n      nextRawIndex = frameStart;\n      var firstNaNIndex = -1;\n      var countNaN = 0; // Find a point from current frame that construct a triangel with largest area with previous selected point\n      // And the average of next frame.\n\n      for (var idx = frameStart; idx < frameEnd; idx++) {\n        var rawIndex = this.getRawIndex(idx);\n        var y = dimStore[rawIndex];\n\n        if (isNaN(y)) {\n          countNaN++;\n\n          if (firstNaNIndex < 0) {\n            firstNaNIndex = rawIndex;\n          }\n\n          continue;\n        } // Calculate triangle area over three buckets\n\n\n        area = Math.abs((pointAX - avgX) * (y - pointAY) - (pointAX - idx) * (avgY - pointAY));\n\n        if (area > maxArea) {\n          maxArea = area;\n          nextRawIndex = rawIndex; // Next a is this b\n        }\n      }\n\n      if (countNaN > 0 && countNaN < frameEnd - frameStart) {\n        // Append first NaN point in every bucket.\n        // It is necessary to ensure the correct order of indices.\n        newIndices[sampledIndex++] = Math.min(firstNaNIndex, nextRawIndex);\n        nextRawIndex = Math.max(firstNaNIndex, nextRawIndex);\n      }\n\n      newIndices[sampledIndex++] = nextRawIndex;\n      currentRawIndex = nextRawIndex; // This a is the next a (chosen b)\n    } // First frame use the last data.\n\n\n    newIndices[sampledIndex++] = this.getRawIndex(len - 1);\n    target._count = sampledIndex;\n    target._indices = newIndices;\n    target.getRawIndex = this._getRawIdx;\n    return target;\n  };\n  /**\n   * Large data down sampling on given dimension\n   * @param sampleIndex Sample index for name and id\n   */\n\n\n  DataStore.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n    var target = this.clone([dimension], true);\n    var targetStorage = target._chunks;\n    var frameValues = [];\n    var frameSize = Math.floor(1 / rate);\n    var dimStore = targetStorage[dimension];\n    var len = this.count();\n    var rawExtentOnDim = target._rawExtent[dimension] = getInitialExtent();\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.ceil(len / frameSize));\n    var offset = 0;\n\n    for (var i = 0; i < len; i += frameSize) {\n      // Last frame\n      if (frameSize > len - i) {\n        frameSize = len - i;\n        frameValues.length = frameSize;\n      }\n\n      for (var k = 0; k < frameSize; k++) {\n        var dataIdx = this.getRawIndex(i + k);\n        frameValues[k] = dimStore[dataIdx];\n      }\n\n      var value = sampleValue(frameValues);\n      var sampleFrameIdx = this.getRawIndex(Math.min(i + sampleIndex(frameValues, value) || 0, len - 1)); // Only write value on the filtered data\n\n      dimStore[sampleFrameIdx] = value;\n\n      if (value < rawExtentOnDim[0]) {\n        rawExtentOnDim[0] = value;\n      }\n\n      if (value > rawExtentOnDim[1]) {\n        rawExtentOnDim[1] = value;\n      }\n\n      newIndices[offset++] = sampleFrameIdx;\n    }\n\n    target._count = offset;\n    target._indices = newIndices;\n\n    target._updateGetRawIdx();\n\n    return target;\n  };\n  /**\n   * Data iteration\n   * @param ctx default this\n   * @example\n   *  list.each('x', function (x, idx) {});\n   *  list.each(['x', 'y'], function (x, y, idx) {});\n   *  list.each(function (idx) {})\n   */\n\n\n  DataStore.prototype.each = function (dims, cb) {\n    if (!this._count) {\n      return;\n    }\n\n    var dimSize = dims.length;\n    var chunks = this._chunks;\n\n    for (var i = 0, len = this.count(); i < len; i++) {\n      var rawIdx = this.getRawIndex(i); // Simple optimization\n\n      switch (dimSize) {\n        case 0:\n          cb(i);\n          break;\n\n        case 1:\n          cb(chunks[dims[0]][rawIdx], i);\n          break;\n\n        case 2:\n          cb(chunks[dims[0]][rawIdx], chunks[dims[1]][rawIdx], i);\n          break;\n\n        default:\n          var k = 0;\n          var value = [];\n\n          for (; k < dimSize; k++) {\n            value[k] = chunks[dims[k]][rawIdx];\n          } // Index\n\n\n          value[k] = i;\n          cb.apply(null, value);\n      }\n    }\n  };\n  /**\n   * Get extent of data in one dimension\n   */\n\n\n  DataStore.prototype.getDataExtent = function (dim) {\n    // Make sure use concrete dim as cache name.\n    var dimData = this._chunks[dim];\n    var initialExtent = getInitialExtent();\n\n    if (!dimData) {\n      return initialExtent;\n    } // Make more strict checkings to ensure hitting cache.\n\n\n    var currEnd = this.count(); // Consider the most cases when using data zoom, `getDataExtent`\n    // happened before filtering. We cache raw extent, which is not\n    // necessary to be cleared and recalculated when restore data.\n\n    var useRaw = !this._indices;\n    var dimExtent;\n\n    if (useRaw) {\n      return this._rawExtent[dim].slice();\n    }\n\n    dimExtent = this._extent[dim];\n\n    if (dimExtent) {\n      return dimExtent.slice();\n    }\n\n    dimExtent = initialExtent;\n    var min = dimExtent[0];\n    var max = dimExtent[1];\n\n    for (var i = 0; i < currEnd; i++) {\n      var rawIdx = this.getRawIndex(i);\n      var value = dimData[rawIdx];\n      value < min && (min = value);\n      value > max && (max = value);\n    }\n\n    dimExtent = [min, max];\n    this._extent[dim] = dimExtent;\n    return dimExtent;\n  };\n  /**\n   * Get raw data item\n   */\n\n\n  DataStore.prototype.getRawDataItem = function (idx) {\n    var rawIdx = this.getRawIndex(idx);\n\n    if (!this._provider.persistent) {\n      var val = [];\n      var chunks = this._chunks;\n\n      for (var i = 0; i < chunks.length; i++) {\n        val.push(chunks[i][rawIdx]);\n      }\n\n      return val;\n    } else {\n      return this._provider.getItem(rawIdx);\n    }\n  };\n  /**\n   * Clone shallow.\n   *\n   * @param clonedDims Determine which dims to clone. Will share the data if not specified.\n   */\n\n\n  DataStore.prototype.clone = function (clonedDims, ignoreIndices) {\n    var target = new DataStore();\n    var chunks = this._chunks;\n    var clonedDimsMap = clonedDims && reduce(clonedDims, function (obj, dimIdx) {\n      obj[dimIdx] = true;\n      return obj;\n    }, {});\n\n    if (clonedDimsMap) {\n      for (var i = 0; i < chunks.length; i++) {\n        // Not clone if dim is not picked.\n        target._chunks[i] = !clonedDimsMap[i] ? chunks[i] : cloneChunk(chunks[i]);\n      }\n    } else {\n      target._chunks = chunks;\n    }\n\n    this._copyCommonProps(target);\n\n    if (!ignoreIndices) {\n      target._indices = this._cloneIndices();\n    }\n\n    target._updateGetRawIdx();\n\n    return target;\n  };\n\n  DataStore.prototype._copyCommonProps = function (target) {\n    target._count = this._count;\n    target._rawCount = this._rawCount;\n    target._provider = this._provider;\n    target._dimensions = this._dimensions;\n    target._extent = clone(this._extent);\n    target._rawExtent = clone(this._rawExtent);\n  };\n\n  DataStore.prototype._cloneIndices = function () {\n    if (this._indices) {\n      var Ctor = this._indices.constructor;\n      var indices = void 0;\n\n      if (Ctor === Array) {\n        var thisCount = this._indices.length;\n        indices = new Ctor(thisCount);\n\n        for (var i = 0; i < thisCount; i++) {\n          indices[i] = this._indices[i];\n        }\n      } else {\n        indices = new Ctor(this._indices);\n      }\n\n      return indices;\n    }\n\n    return null;\n  };\n\n  DataStore.prototype._getRawIdxIdentity = function (idx) {\n    return idx;\n  };\n\n  DataStore.prototype._getRawIdx = function (idx) {\n    if (idx < this._count && idx >= 0) {\n      return this._indices[idx];\n    }\n\n    return -1;\n  };\n\n  DataStore.prototype._updateGetRawIdx = function () {\n    this.getRawIndex = this._indices ? this._getRawIdx : this._getRawIdxIdentity;\n  };\n\n  DataStore.internalField = function () {\n    function getDimValueSimply(dataItem, property, dataIndex, dimIndex) {\n      return parseDataValue(dataItem[dimIndex], this._dimensions[dimIndex]);\n    }\n\n    defaultDimValueGetters = {\n      arrayRows: getDimValueSimply,\n      objectRows: function (dataItem, property, dataIndex, dimIndex) {\n        return parseDataValue(dataItem[property], this._dimensions[dimIndex]);\n      },\n      keyedColumns: getDimValueSimply,\n      original: function (dataItem, property, dataIndex, dimIndex) {\n        // Performance sensitive, do not use modelUtil.getDataItemValue.\n        // If dataItem is an plain object with no value field, the let `value`\n        // will be assigned with the object, but it will be tread correctly\n        // in the `convertValue`.\n        var value = dataItem && (dataItem.value == null ? dataItem : dataItem.value);\n        return parseDataValue(value instanceof Array ? value[dimIndex] // If value is a single number or something else not array.\n        : value, this._dimensions[dimIndex]);\n      },\n      typedArray: function (dataItem, property, dataIndex, dimIndex) {\n        return dataItem[dimIndex];\n      }\n    };\n  }();\n\n  return DataStore;\n}();\n\nexport default DataStore;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, isObject, map, isString } from 'zrender/lib/core/util.js';\nvar uidBase = 0;\n\nvar OrdinalMeta =\n/** @class */\nfunction () {\n  function OrdinalMeta(opt) {\n    this.categories = opt.categories || [];\n    this._needCollect = opt.needCollect;\n    this._deduplication = opt.deduplication;\n    this.uid = ++uidBase;\n  }\n\n  OrdinalMeta.createByAxisModel = function (axisModel) {\n    var option = axisModel.option;\n    var data = option.data;\n    var categories = data && map(data, getName);\n    return new OrdinalMeta({\n      categories: categories,\n      needCollect: !categories,\n      // deduplication is default in axis.\n      deduplication: option.dedplication !== false\n    });\n  };\n\n  ;\n\n  OrdinalMeta.prototype.getOrdinal = function (category) {\n    // @ts-ignore\n    return this._getOrCreateMap().get(category);\n  };\n  /**\n   * @return The ordinal. If not found, return NaN.\n   */\n\n\n  OrdinalMeta.prototype.parseAndCollect = function (category) {\n    var index;\n    var needCollect = this._needCollect; // The value of category dim can be the index of the given category set.\n    // This feature is only supported when !needCollect, because we should\n    // consider a common case: a value is 2017, which is a number but is\n    // expected to be tread as a category. This case usually happen in dataset,\n    // where it happent to be no need of the index feature.\n\n    if (!isString(category) && !needCollect) {\n      return category;\n    } // Optimize for the scenario:\n    // category is ['2012-01-01', '2012-01-02', ...], where the input\n    // data has been ensured not duplicate and is large data.\n    // Notice, if a dataset dimension provide categroies, usually echarts\n    // should remove duplication except user tell echarts dont do that\n    // (set axis.deduplication = false), because echarts do not know whether\n    // the values in the category dimension has duplication (consider the\n    // parallel-aqi example)\n\n\n    if (needCollect && !this._deduplication) {\n      index = this.categories.length;\n      this.categories[index] = category;\n      return index;\n    }\n\n    var map = this._getOrCreateMap(); // @ts-ignore\n\n\n    index = map.get(category);\n\n    if (index == null) {\n      if (needCollect) {\n        index = this.categories.length;\n        this.categories[index] = category; // @ts-ignore\n\n        map.set(category, index);\n      } else {\n        index = NaN;\n      }\n    }\n\n    return index;\n  }; // Consider big data, do not create map until needed.\n\n\n  OrdinalMeta.prototype._getOrCreateMap = function () {\n    return this._map || (this._map = createHashMap(this.categories));\n  };\n\n  return OrdinalMeta;\n}();\n\nfunction getName(obj) {\n  if (isObject(obj) && obj.value != null) {\n    return obj.value;\n  } else {\n    return obj + '';\n  }\n}\n\nexport default OrdinalMeta;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isTypedArray, clone, createHashMap, isArray, isObject, isArrayLike, hasOwn, assert, each, map, isNumber, isString } from 'zrender/lib/core/util.js';\nimport { SOURCE_FORMAT_ORIGINAL, SERIES_LAYOUT_BY_COLUMN, SOURCE_FORMAT_UNKNOWN, SOURCE_FORMAT_KEYED_COLUMNS, SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS, SERIES_LAYOUT_BY_ROW } from '../util/types.js';\nimport { getDataItemValue } from '../util/model.js';\nimport { BE_ORDINAL, guessOrdinal } from './helper/sourceHelper.js';\n; // @inner\n\nvar SourceImpl =\n/** @class */\nfunction () {\n  function SourceImpl(fields) {\n    this.data = fields.data || (fields.sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS ? {} : []);\n    this.sourceFormat = fields.sourceFormat || SOURCE_FORMAT_UNKNOWN; // Visit config\n\n    this.seriesLayoutBy = fields.seriesLayoutBy || SERIES_LAYOUT_BY_COLUMN;\n    this.startIndex = fields.startIndex || 0;\n    this.dimensionsDetectedCount = fields.dimensionsDetectedCount;\n    this.metaRawOption = fields.metaRawOption;\n    var dimensionsDefine = this.dimensionsDefine = fields.dimensionsDefine;\n\n    if (dimensionsDefine) {\n      for (var i = 0; i < dimensionsDefine.length; i++) {\n        var dim = dimensionsDefine[i];\n\n        if (dim.type == null) {\n          if (guessOrdinal(this, i) === BE_ORDINAL.Must) {\n            dim.type = 'ordinal';\n          }\n        }\n      }\n    }\n  }\n\n  return SourceImpl;\n}();\n\nexport function isSourceInstance(val) {\n  return val instanceof SourceImpl;\n}\n/**\n * Create a source from option.\n * NOTE: Created source is immutable. Don't change any properties in it.\n */\n\nexport function createSource(sourceData, thisMetaRawOption, // can be null. If not provided, auto detect it from `sourceData`.\nsourceFormat) {\n  sourceFormat = sourceFormat || detectSourceFormat(sourceData);\n  var seriesLayoutBy = thisMetaRawOption.seriesLayoutBy;\n  var determined = determineSourceDimensions(sourceData, sourceFormat, seriesLayoutBy, thisMetaRawOption.sourceHeader, thisMetaRawOption.dimensions);\n  var source = new SourceImpl({\n    data: sourceData,\n    sourceFormat: sourceFormat,\n    seriesLayoutBy: seriesLayoutBy,\n    dimensionsDefine: determined.dimensionsDefine,\n    startIndex: determined.startIndex,\n    dimensionsDetectedCount: determined.dimensionsDetectedCount,\n    metaRawOption: clone(thisMetaRawOption)\n  });\n  return source;\n}\n/**\n * Wrap original series data for some compatibility cases.\n */\n\nexport function createSourceFromSeriesDataOption(data) {\n  return new SourceImpl({\n    data: data,\n    sourceFormat: isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL\n  });\n}\n/**\n * Clone source but excludes source data.\n */\n\nexport function cloneSourceShallow(source) {\n  return new SourceImpl({\n    data: source.data,\n    sourceFormat: source.sourceFormat,\n    seriesLayoutBy: source.seriesLayoutBy,\n    dimensionsDefine: clone(source.dimensionsDefine),\n    startIndex: source.startIndex,\n    dimensionsDetectedCount: source.dimensionsDetectedCount\n  });\n}\n/**\n * Note: An empty array will be detected as `SOURCE_FORMAT_ARRAY_ROWS`.\n */\n\nexport function detectSourceFormat(data) {\n  var sourceFormat = SOURCE_FORMAT_UNKNOWN;\n\n  if (isTypedArray(data)) {\n    sourceFormat = SOURCE_FORMAT_TYPED_ARRAY;\n  } else if (isArray(data)) {\n    // FIXME Whether tolerate null in top level array?\n    if (data.length === 0) {\n      sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n    }\n\n    for (var i = 0, len = data.length; i < len; i++) {\n      var item = data[i];\n\n      if (item == null) {\n        continue;\n      } else if (isArray(item)) {\n        sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n        break;\n      } else if (isObject(item)) {\n        sourceFormat = SOURCE_FORMAT_OBJECT_ROWS;\n        break;\n      }\n    }\n  } else if (isObject(data)) {\n    for (var key in data) {\n      if (hasOwn(data, key) && isArrayLike(data[key])) {\n        sourceFormat = SOURCE_FORMAT_KEYED_COLUMNS;\n        break;\n      }\n    }\n  }\n\n  return sourceFormat;\n}\n/**\n * Determine the source definitions from data standalone dimensions definitions\n * are not specified.\n */\n\nfunction determineSourceDimensions(data, sourceFormat, seriesLayoutBy, sourceHeader, // standalone raw dimensions definition, like:\n// {\n//     dimensions: ['aa', 'bb', { name: 'cc', type: 'time' }]\n// }\n// in `dataset` or `series`\ndimensionsDefine) {\n  var dimensionsDetectedCount;\n  var startIndex; // PEDING: could data be null/undefined here?\n  // currently, if `dataset.source` not specified, error thrown.\n  // if `series.data` not specified, nothing rendered without error thrown.\n  // Should test these cases.\n\n  if (!data) {\n    return {\n      dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\n      startIndex: startIndex,\n      dimensionsDetectedCount: dimensionsDetectedCount\n    };\n  }\n\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var dataArrayRows = data; // Rule: Most of the first line are string: it is header.\n    // Caution: consider a line with 5 string and 1 number,\n    // it still can not be sure it is a head, because the\n    // 5 string may be 5 values of category columns.\n\n    if (sourceHeader === 'auto' || sourceHeader == null) {\n      arrayRowsTravelFirst(function (val) {\n        // '-' is regarded as null/undefined.\n        if (val != null && val !== '-') {\n          if (isString(val)) {\n            startIndex == null && (startIndex = 1);\n          } else {\n            startIndex = 0;\n          }\n        } // 10 is an experience number, avoid long loop.\n\n      }, seriesLayoutBy, dataArrayRows, 10);\n    } else {\n      startIndex = isNumber(sourceHeader) ? sourceHeader : sourceHeader ? 1 : 0;\n    }\n\n    if (!dimensionsDefine && startIndex === 1) {\n      dimensionsDefine = [];\n      arrayRowsTravelFirst(function (val, index) {\n        dimensionsDefine[index] = val != null ? val + '' : '';\n      }, seriesLayoutBy, dataArrayRows, Infinity);\n    }\n\n    dimensionsDetectedCount = dimensionsDefine ? dimensionsDefine.length : seriesLayoutBy === SERIES_LAYOUT_BY_ROW ? dataArrayRows.length : dataArrayRows[0] ? dataArrayRows[0].length : null;\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    if (!dimensionsDefine) {\n      dimensionsDefine = objectRowsCollectDimensions(data);\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    if (!dimensionsDefine) {\n      dimensionsDefine = [];\n      each(data, function (colArr, key) {\n        dimensionsDefine.push(key);\n      });\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var value0 = getDataItemValue(data[0]);\n    dimensionsDetectedCount = isArray(value0) && value0.length || 1;\n  } else if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!!dimensionsDefine, 'dimensions must be given if data is TypedArray.');\n    }\n  }\n\n  return {\n    startIndex: startIndex,\n    dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\n    dimensionsDetectedCount: dimensionsDetectedCount\n  };\n}\n\nfunction objectRowsCollectDimensions(data) {\n  var firstIndex = 0;\n  var obj;\n\n  while (firstIndex < data.length && !(obj = data[firstIndex++])) {} // jshint ignore: line\n\n\n  if (obj) {\n    var dimensions_1 = [];\n    each(obj, function (value, key) {\n      dimensions_1.push(key);\n    });\n    return dimensions_1;\n  }\n} // Consider dimensions defined like ['A', 'price', 'B', 'price', 'C', 'price'],\n// which is reasonable. But dimension name is duplicated.\n// Returns undefined or an array contains only object without null/undefiend or string.\n\n\nfunction normalizeDimensionsOption(dimensionsDefine) {\n  if (!dimensionsDefine) {\n    // The meaning of null/undefined is different from empty array.\n    return;\n  }\n\n  var nameMap = createHashMap();\n  return map(dimensionsDefine, function (rawItem, index) {\n    rawItem = isObject(rawItem) ? rawItem : {\n      name: rawItem\n    }; // Other fields will be discarded.\n\n    var item = {\n      name: rawItem.name,\n      displayName: rawItem.displayName,\n      type: rawItem.type\n    }; // User can set null in dimensions.\n    // We dont auto specify name, othewise a given name may\n    // cause it be refered unexpectedly.\n\n    if (item.name == null) {\n      return item;\n    } // Also consider number form like 2012.\n\n\n    item.name += ''; // User may also specify displayName.\n    // displayName will always exists except user not\n    // specified or dim name is not specified or detected.\n    // (A auto generated dim name will not be used as\n    // displayName).\n\n    if (item.displayName == null) {\n      item.displayName = item.name;\n    }\n\n    var exist = nameMap.get(item.name);\n\n    if (!exist) {\n      nameMap.set(item.name, {\n        count: 1\n      });\n    } else {\n      item.name += '-' + exist.count++;\n    }\n\n    return item;\n  });\n}\n\nfunction arrayRowsTravelFirst(cb, seriesLayoutBy, data, maxLoop) {\n  if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n    for (var i = 0; i < data.length && i < maxLoop; i++) {\n      cb(data[i] ? data[i][0] : null, i);\n    }\n  } else {\n    var value0 = data[0] || [];\n\n    for (var i = 0; i < value0.length && i < maxLoop; i++) {\n      cb(value0[i], i);\n    }\n  }\n}\n\nexport function shouldRetrieveDataByName(source) {\n  var sourceFormat = source.sourceFormat;\n  return sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, isObject, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nimport { shouldRetrieveDataByName } from '../Source.js';\nvar inner = makeInner();\nvar dimTypeShort = {\n  float: 'f',\n  int: 'i',\n  ordinal: 'o',\n  number: 'n',\n  time: 't'\n};\n/**\n * Represents the dimension requirement of a series.\n *\n * NOTICE:\n * When there are too many dimensions in dataset and many series, only the used dimensions\n * (i.e., used by coord sys and declared in `series.encode`) are add to `dimensionDefineList`.\n * But users may query data by other unused dimension names.\n * In this case, users can only query data if and only if they have defined dimension names\n * via ec option, so we provide `getDimensionIndexFromSource`, which only query them from\n * `source` dimensions.\n */\n\nvar SeriesDataSchema =\n/** @class */\nfunction () {\n  function SeriesDataSchema(opt) {\n    this.dimensions = opt.dimensions;\n    this._dimOmitted = opt.dimensionOmitted;\n    this.source = opt.source;\n    this._fullDimCount = opt.fullDimensionCount;\n\n    this._updateDimOmitted(opt.dimensionOmitted);\n  }\n\n  SeriesDataSchema.prototype.isDimensionOmitted = function () {\n    return this._dimOmitted;\n  };\n\n  SeriesDataSchema.prototype._updateDimOmitted = function (dimensionOmitted) {\n    this._dimOmitted = dimensionOmitted;\n\n    if (!dimensionOmitted) {\n      return;\n    }\n\n    if (!this._dimNameMap) {\n      this._dimNameMap = ensureSourceDimNameMap(this.source);\n    }\n  };\n  /**\n   * @caution Can only be used when `dimensionOmitted: true`.\n   *\n   * Get index by user defined dimension name (i.e., not internal generate name).\n   * That is, get index from `dimensionsDefine`.\n   * If no `dimensionsDefine`, or no name get, return -1.\n   */\n\n\n  SeriesDataSchema.prototype.getSourceDimensionIndex = function (dimName) {\n    return retrieve2(this._dimNameMap.get(dimName), -1);\n  };\n  /**\n   * @caution Can only be used when `dimensionOmitted: true`.\n   *\n   * Notice: may return `null`/`undefined` if user not specify dimension names.\n   */\n\n\n  SeriesDataSchema.prototype.getSourceDimension = function (dimIndex) {\n    var dimensionsDefine = this.source.dimensionsDefine;\n\n    if (dimensionsDefine) {\n      return dimensionsDefine[dimIndex];\n    }\n  };\n\n  SeriesDataSchema.prototype.makeStoreSchema = function () {\n    var dimCount = this._fullDimCount;\n    var willRetrieveDataByName = shouldRetrieveDataByName(this.source);\n    var makeHashStrict = !shouldOmitUnusedDimensions(dimCount); // If source don't have dimensions or series don't omit unsed dimensions.\n    // Generate from seriesDimList directly\n\n    var dimHash = '';\n    var dims = [];\n\n    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < dimCount; fullDimIdx++) {\n      var property = void 0;\n      var type = void 0;\n      var ordinalMeta = void 0;\n      var seriesDimDef = this.dimensions[seriesDimIdx]; // The list has been sorted by `storeDimIndex` asc.\n\n      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n        property = willRetrieveDataByName ? seriesDimDef.name : null;\n        type = seriesDimDef.type;\n        ordinalMeta = seriesDimDef.ordinalMeta;\n        seriesDimIdx++;\n      } else {\n        var sourceDimDef = this.getSourceDimension(fullDimIdx);\n\n        if (sourceDimDef) {\n          property = willRetrieveDataByName ? sourceDimDef.name : null;\n          type = sourceDimDef.type;\n        }\n      }\n\n      dims.push({\n        property: property,\n        type: type,\n        ordinalMeta: ordinalMeta\n      }); // If retrieving data by index,\n      //   use <index, type, ordinalMeta> to determine whether data can be shared.\n      //   (Becuase in this case there might be no dimension name defined in dataset, but indices always exists).\n      //   (indices are always 0, 1, 2, ..., so we can ignore them to shorten the hash).\n      // Otherwise if retrieving data by property name (like `data: [{aa: 123, bb: 765}, ...]`),\n      //   use <property, type, ordinalMeta> in hash.\n\n      if (willRetrieveDataByName && property != null // For data stack, we have make sure each series has its own dim on this store.\n      // So we do not add property to hash to make sure they can share this store.\n      && (!seriesDimDef || !seriesDimDef.isCalculationCoord)) {\n        dimHash += makeHashStrict // Use escape character '`' in case that property name contains '$'.\n        ? property.replace(/\\`/g, '`1').replace(/\\$/g, '`2') // For better performance, when there are large dimensions, tolerant this defects that hardly meet.\n        : property;\n      }\n\n      dimHash += '$';\n      dimHash += dimTypeShort[type] || 'f';\n\n      if (ordinalMeta) {\n        dimHash += ordinalMeta.uid;\n      }\n\n      dimHash += '$';\n    } // Source from endpoint(usually series) will be read differently\n    // when seriesLayoutBy or startIndex(which is affected by sourceHeader) are different.\n    // So we use this three props as key.\n\n\n    var source = this.source;\n    var hash = [source.seriesLayoutBy, source.startIndex, dimHash].join('$$');\n    return {\n      dimensions: dims,\n      hash: hash\n    };\n  };\n\n  SeriesDataSchema.prototype.makeOutputDimensionNames = function () {\n    var result = [];\n\n    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < this._fullDimCount; fullDimIdx++) {\n      var name_1 = void 0;\n      var seriesDimDef = this.dimensions[seriesDimIdx]; // The list has been sorted by `storeDimIndex` asc.\n\n      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n        if (!seriesDimDef.isCalculationCoord) {\n          name_1 = seriesDimDef.name;\n        }\n\n        seriesDimIdx++;\n      } else {\n        var sourceDimDef = this.getSourceDimension(fullDimIdx);\n\n        if (sourceDimDef) {\n          name_1 = sourceDimDef.name;\n        }\n      }\n\n      result.push(name_1);\n    }\n\n    return result;\n  };\n\n  SeriesDataSchema.prototype.appendCalculationDimension = function (dimDef) {\n    this.dimensions.push(dimDef);\n    dimDef.isCalculationCoord = true;\n    this._fullDimCount++; // If append dimension on a data store, consider the store\n    // might be shared by different series, series dimensions not\n    // really map to store dimensions.\n\n    this._updateDimOmitted(true);\n  };\n\n  return SeriesDataSchema;\n}();\n\nexport { SeriesDataSchema };\nexport function isSeriesDataSchema(schema) {\n  return schema instanceof SeriesDataSchema;\n}\nexport function createDimNameMap(dimsDef) {\n  var dataDimNameMap = createHashMap();\n\n  for (var i = 0; i < (dimsDef || []).length; i++) {\n    var dimDefItemRaw = dimsDef[i];\n    var userDimName = isObject(dimDefItemRaw) ? dimDefItemRaw.name : dimDefItemRaw;\n\n    if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\n      dataDimNameMap.set(userDimName, i);\n    }\n  }\n\n  return dataDimNameMap;\n}\nexport function ensureSourceDimNameMap(source) {\n  var innerSource = inner(source);\n  return innerSource.dimNameMap || (innerSource.dimNameMap = createDimNameMap(source.dimensionsDefine));\n}\nexport function shouldOmitUnusedDimensions(dimCount) {\n  return dimCount > 30;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _a, _b, _c; // TODO\n// ??? refactor? check the outer usage of data provider.\n// merge with defaultDimValueGetter?\n\n\nimport { isTypedArray, extend, assert, each, isObject, bind } from 'zrender/lib/core/util.js';\nimport { getDataItemValue } from '../../util/model.js';\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../Source.js';\nimport { SOURCE_FORMAT_ORIGINAL, SOURCE_FORMAT_OBJECT_ROWS, SOURCE_FORMAT_KEYED_COLUMNS, SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ARRAY_ROWS, SERIES_LAYOUT_BY_COLUMN, SERIES_LAYOUT_BY_ROW } from '../../util/types.js';\nvar providerMethods;\nvar mountMethods;\n/**\n * If normal array used, mutable chunk size is supported.\n * If typed array used, chunk size must be fixed.\n */\n\nvar DefaultDataProvider =\n/** @class */\nfunction () {\n  function DefaultDataProvider(sourceParam, dimSize) {\n    // let source: Source;\n    var source = !isSourceInstance(sourceParam) ? createSourceFromSeriesDataOption(sourceParam) : sourceParam; // declare source is Source;\n\n    this._source = source;\n    var data = this._data = source.data; // Typed array. TODO IE10+?\n\n    if (source.sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (dimSize == null) {\n          throw new Error('Typed array data must specify dimension size');\n        }\n      }\n\n      this._offset = 0;\n      this._dimSize = dimSize;\n      this._data = data;\n    }\n\n    mountMethods(this, data, source);\n  }\n\n  DefaultDataProvider.prototype.getSource = function () {\n    return this._source;\n  };\n\n  DefaultDataProvider.prototype.count = function () {\n    return 0;\n  };\n\n  DefaultDataProvider.prototype.getItem = function (idx, out) {\n    return;\n  };\n\n  DefaultDataProvider.prototype.appendData = function (newData) {};\n\n  DefaultDataProvider.prototype.clean = function () {};\n\n  DefaultDataProvider.protoInitialize = function () {\n    // PENDING: To avoid potential incompat (e.g., prototype\n    // is visited somewhere), still init them on prototype.\n    var proto = DefaultDataProvider.prototype;\n    proto.pure = false;\n    proto.persistent = true;\n  }();\n\n  DefaultDataProvider.internalField = function () {\n    var _a;\n\n    mountMethods = function (provider, data, source) {\n      var sourceFormat = source.sourceFormat;\n      var seriesLayoutBy = source.seriesLayoutBy;\n      var startIndex = source.startIndex;\n      var dimsDef = source.dimensionsDefine;\n      var methods = providerMethods[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n\n      if (process.env.NODE_ENV !== 'production') {\n        assert(methods, 'Invalide sourceFormat: ' + sourceFormat);\n      }\n\n      extend(provider, methods);\n\n      if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n        provider.getItem = getItemForTypedArray;\n        provider.count = countForTypedArray;\n        provider.fillStorage = fillStorageForTypedArray;\n      } else {\n        var rawItemGetter = getRawSourceItemGetter(sourceFormat, seriesLayoutBy);\n        provider.getItem = bind(rawItemGetter, null, data, startIndex, dimsDef);\n        var rawCounter = getRawSourceDataCounter(sourceFormat, seriesLayoutBy);\n        provider.count = bind(rawCounter, null, data, startIndex, dimsDef);\n      }\n    };\n\n    var getItemForTypedArray = function (idx, out) {\n      idx = idx - this._offset;\n      out = out || [];\n      var data = this._data;\n      var dimSize = this._dimSize;\n      var offset = dimSize * idx;\n\n      for (var i = 0; i < dimSize; i++) {\n        out[i] = data[offset + i];\n      }\n\n      return out;\n    };\n\n    var fillStorageForTypedArray = function (start, end, storage, extent) {\n      var data = this._data;\n      var dimSize = this._dimSize;\n\n      for (var dim = 0; dim < dimSize; dim++) {\n        var dimExtent = extent[dim];\n        var min = dimExtent[0] == null ? Infinity : dimExtent[0];\n        var max = dimExtent[1] == null ? -Infinity : dimExtent[1];\n        var count = end - start;\n        var arr = storage[dim];\n\n        for (var i = 0; i < count; i++) {\n          // appendData with TypedArray will always do replace in provider.\n          var val = data[i * dimSize + dim];\n          arr[start + i] = val;\n          val < min && (min = val);\n          val > max && (max = val);\n        }\n\n        dimExtent[0] = min;\n        dimExtent[1] = max;\n      }\n    };\n\n    var countForTypedArray = function () {\n      return this._data ? this._data.length / this._dimSize : 0;\n    };\n\n    providerMethods = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = {\n      pure: true,\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = {\n      pure: true,\n      appendData: function () {\n        throw new Error('Do not support appendData when set seriesLayoutBy: \"row\".');\n      }\n    }, _a[SOURCE_FORMAT_OBJECT_ROWS] = {\n      pure: true,\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_KEYED_COLUMNS] = {\n      pure: true,\n      appendData: function (newData) {\n        var data = this._data;\n        each(newData, function (newCol, key) {\n          var oldCol = data[key] || (data[key] = []);\n\n          for (var i = 0; i < (newCol || []).length; i++) {\n            oldCol.push(newCol[i]);\n          }\n        });\n      }\n    }, _a[SOURCE_FORMAT_ORIGINAL] = {\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_TYPED_ARRAY] = {\n      persistent: false,\n      pure: true,\n      appendData: function (newData) {\n        if (process.env.NODE_ENV !== 'production') {\n          assert(isTypedArray(newData), 'Added data must be TypedArray if data in initialization is TypedArray');\n        }\n\n        this._data = newData;\n      },\n      // Clean self if data is already used.\n      clean: function () {\n        // PENDING\n        this._offset += this.count();\n        this._data = null;\n      }\n    }, _a);\n\n    function appendDataSimply(newData) {\n      for (var i = 0; i < newData.length; i++) {\n        this._data.push(newData[i]);\n      }\n    }\n  }();\n\n  return DefaultDataProvider;\n}();\n\nexport { DefaultDataProvider };\n\nvar getItemSimply = function (rawData, startIndex, dimsDef, idx) {\n  return rawData[idx];\n};\n\nvar rawSourceItemGetterMap = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef, idx) {\n  return rawData[idx + startIndex];\n}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef, idx, out) {\n  idx += startIndex;\n  var item = out || [];\n  var data = rawData;\n\n  for (var i = 0; i < data.length; i++) {\n    var row = data[i];\n    item[i] = row ? row[idx] : null;\n  }\n\n  return item;\n}, _a[SOURCE_FORMAT_OBJECT_ROWS] = getItemSimply, _a[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef, idx, out) {\n  var item = out || [];\n\n  for (var i = 0; i < dimsDef.length; i++) {\n    var dimName = dimsDef[i].name;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (dimName == null) {\n        throw new Error();\n      }\n    }\n\n    var col = rawData[dimName];\n    item[i] = col ? col[idx] : null;\n  }\n\n  return item;\n}, _a[SOURCE_FORMAT_ORIGINAL] = getItemSimply, _a);\nexport function getRawSourceItemGetter(sourceFormat, seriesLayoutBy) {\n  var method = rawSourceItemGetterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support get item on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n  }\n\n  return method;\n}\n\nvar countSimply = function (rawData, startIndex, dimsDef) {\n  return rawData.length;\n};\n\nvar rawSourceDataCounterMap = (_b = {}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef) {\n  return Math.max(0, rawData.length - startIndex);\n}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef) {\n  var row = rawData[0];\n  return row ? Math.max(0, row.length - startIndex) : 0;\n}, _b[SOURCE_FORMAT_OBJECT_ROWS] = countSimply, _b[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef) {\n  var dimName = dimsDef[0].name;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (dimName == null) {\n      throw new Error();\n    }\n  }\n\n  var col = rawData[dimName];\n  return col ? col.length : 0;\n}, _b[SOURCE_FORMAT_ORIGINAL] = countSimply, _b);\nexport function getRawSourceDataCounter(sourceFormat, seriesLayoutBy) {\n  var method = rawSourceDataCounterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not suppport count on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n  }\n\n  return method;\n}\n\nvar getRawValueSimply = function (dataItem, dimIndex, property) {\n  return dataItem[dimIndex];\n};\n\nvar rawSourceValueGetterMap = (_c = {}, _c[SOURCE_FORMAT_ARRAY_ROWS] = getRawValueSimply, _c[SOURCE_FORMAT_OBJECT_ROWS] = function (dataItem, dimIndex, property) {\n  return dataItem[property];\n}, _c[SOURCE_FORMAT_KEYED_COLUMNS] = getRawValueSimply, _c[SOURCE_FORMAT_ORIGINAL] = function (dataItem, dimIndex, property) {\n  // FIXME: In some case (markpoint in geo (geo-map.html)),\n  // dataItem is {coord: [...]}\n  var value = getDataItemValue(dataItem);\n  return !(value instanceof Array) ? value : value[dimIndex];\n}, _c[SOURCE_FORMAT_TYPED_ARRAY] = getRawValueSimply, _c);\nexport function getRawSourceValueGetter(sourceFormat) {\n  var method = rawSourceValueGetterMap[sourceFormat];\n\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not suppport get value on \"' + sourceFormat + '\".');\n  }\n\n  return method;\n}\n\nfunction getMethodMapKey(sourceFormat, seriesLayoutBy) {\n  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS ? sourceFormat + '_' + seriesLayoutBy : sourceFormat;\n} // ??? FIXME can these logic be more neat: getRawValue, getRawDataItem,\n// Consider persistent.\n// Caution: why use raw value to display on label or tooltip?\n// A reason is to avoid format. For example time value we do not know\n// how to format is expected. More over, if stack is used, calculated\n// value may be 0.91000000001, which have brings trouble to display.\n// TODO: consider how to treat null/undefined/NaN when display?\n\n\nexport function retrieveRawValue(data, dataIndex, // If dimIndex is null/undefined, return OptionDataItem.\n// Otherwise, return OptionDataValue.\ndim) {\n  if (!data) {\n    return;\n  } // Consider data may be not persistent.\n\n\n  var dataItem = data.getRawDataItem(dataIndex);\n\n  if (dataItem == null) {\n    return;\n  }\n\n  var store = data.getStore();\n  var sourceFormat = store.getSource().sourceFormat;\n\n  if (dim != null) {\n    var dimIndex = data.getDimensionIndex(dim);\n    var property = store.getDimensionProperty(dimIndex);\n    return getRawSourceValueGetter(sourceFormat)(dataItem, dimIndex, property);\n  } else {\n    var result = dataItem;\n\n    if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n      result = getDataItemValue(dataItem);\n    }\n\n    return result;\n  }\n}\n/**\n * Compatible with some cases (in pie, map) like:\n * data: [{name: 'xx', value: 5, selected: true}, ...]\n * where only sourceFormat is 'original' and 'objectRows' supported.\n *\n * // TODO\n * Supported detail options in data item when using 'arrayRows'.\n *\n * @param data\n * @param dataIndex\n * @param attr like 'selected'\n */\n\nexport function retrieveRawAttr(data, dataIndex, attr) {\n  if (!data) {\n    return;\n  }\n\n  var sourceFormat = data.getStore().getSource().sourceFormat;\n\n  if (sourceFormat !== SOURCE_FORMAT_ORIGINAL && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n    return;\n  }\n\n  var dataItem = data.getRawDataItem(dataIndex);\n\n  if (sourceFormat === SOURCE_FORMAT_ORIGINAL && !isObject(dataItem)) {\n    dataItem = null;\n  }\n\n  if (dataItem) {\n    return dataItem[attr];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, isString } from 'zrender/lib/core/util.js';\nimport { isSeriesDataSchema } from './SeriesDataSchema.js';\n/**\n * Note that it is too complicated to support 3d stack by value\n * (have to create two-dimension inverted index), so in 3d case\n * we just support that stacked by index.\n *\n * @param seriesModel\n * @param dimensionsInput The same as the input of <module:echarts/data/SeriesData>.\n *        The input will be modified.\n * @param opt\n * @param opt.stackedCoordDimension Specify a coord dimension if needed.\n * @param opt.byIndex=false\n * @return calculationInfo\n * {\n *     stackedDimension: string\n *     stackedByDimension: string\n *     isStackedByIndex: boolean\n *     stackedOverDimension: string\n *     stackResultDimension: string\n * }\n */\n\nexport function enableDataStack(seriesModel, dimensionsInput, opt) {\n  opt = opt || {};\n  var byIndex = opt.byIndex;\n  var stackedCoordDimension = opt.stackedCoordDimension;\n  var dimensionDefineList;\n  var schema;\n  var store;\n\n  if (isLegacyDimensionsInput(dimensionsInput)) {\n    dimensionDefineList = dimensionsInput;\n  } else {\n    schema = dimensionsInput.schema;\n    dimensionDefineList = schema.dimensions;\n    store = dimensionsInput.store;\n  } // Compatibal: when `stack` is set as '', do not stack.\n\n\n  var mayStack = !!(seriesModel && seriesModel.get('stack'));\n  var stackedByDimInfo;\n  var stackedDimInfo;\n  var stackResultDimension;\n  var stackedOverDimension;\n  each(dimensionDefineList, function (dimensionInfo, index) {\n    if (isString(dimensionInfo)) {\n      dimensionDefineList[index] = dimensionInfo = {\n        name: dimensionInfo\n      };\n    }\n\n    if (mayStack && !dimensionInfo.isExtraCoord) {\n      // Find the first ordinal dimension as the stackedByDimInfo.\n      if (!byIndex && !stackedByDimInfo && dimensionInfo.ordinalMeta) {\n        stackedByDimInfo = dimensionInfo;\n      } // Find the first stackable dimension as the stackedDimInfo.\n\n\n      if (!stackedDimInfo && dimensionInfo.type !== 'ordinal' && dimensionInfo.type !== 'time' && (!stackedCoordDimension || stackedCoordDimension === dimensionInfo.coordDim)) {\n        stackedDimInfo = dimensionInfo;\n      }\n    }\n  });\n\n  if (stackedDimInfo && !byIndex && !stackedByDimInfo) {\n    // Compatible with previous design, value axis (time axis) only stack by index.\n    // It may make sense if the user provides elaborately constructed data.\n    byIndex = true;\n  } // Add stack dimension, they can be both calculated by coordinate system in `unionExtent`.\n  // That put stack logic in List is for using conveniently in echarts extensions, but it\n  // might not be a good way.\n\n\n  if (stackedDimInfo) {\n    // Use a weird name that not duplicated with other names.\n    // Also need to use seriesModel.id as postfix because different\n    // series may share same data store. The stack dimension needs to be distinguished.\n    stackResultDimension = '__\\0ecstackresult_' + seriesModel.id;\n    stackedOverDimension = '__\\0ecstackedover_' + seriesModel.id; // Create inverted index to fast query index by value.\n\n    if (stackedByDimInfo) {\n      stackedByDimInfo.createInvertedIndices = true;\n    }\n\n    var stackedDimCoordDim_1 = stackedDimInfo.coordDim;\n    var stackedDimType = stackedDimInfo.type;\n    var stackedDimCoordIndex_1 = 0;\n    each(dimensionDefineList, function (dimensionInfo) {\n      if (dimensionInfo.coordDim === stackedDimCoordDim_1) {\n        stackedDimCoordIndex_1++;\n      }\n    });\n    var stackedOverDimensionDefine = {\n      name: stackResultDimension,\n      coordDim: stackedDimCoordDim_1,\n      coordDimIndex: stackedDimCoordIndex_1,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true,\n      storeDimIndex: dimensionDefineList.length\n    };\n    var stackResultDimensionDefine = {\n      name: stackedOverDimension,\n      // This dimension contains stack base (generally, 0), so do not set it as\n      // `stackedDimCoordDim` to avoid extent calculation, consider log scale.\n      coordDim: stackedOverDimension,\n      coordDimIndex: stackedDimCoordIndex_1 + 1,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true,\n      storeDimIndex: dimensionDefineList.length + 1\n    };\n\n    if (schema) {\n      if (store) {\n        stackedOverDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackedOverDimension, stackedDimType);\n        stackResultDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackResultDimension, stackedDimType);\n      }\n\n      schema.appendCalculationDimension(stackedOverDimensionDefine);\n      schema.appendCalculationDimension(stackResultDimensionDefine);\n    } else {\n      dimensionDefineList.push(stackedOverDimensionDefine);\n      dimensionDefineList.push(stackResultDimensionDefine);\n    }\n  }\n\n  return {\n    stackedDimension: stackedDimInfo && stackedDimInfo.name,\n    stackedByDimension: stackedByDimInfo && stackedByDimInfo.name,\n    isStackedByIndex: byIndex,\n    stackedOverDimension: stackedOverDimension,\n    stackResultDimension: stackResultDimension\n  };\n}\n\nfunction isLegacyDimensionsInput(dimensionsInput) {\n  return !isSeriesDataSchema(dimensionsInput.schema);\n}\n\nexport function isDimensionStacked(data, stackedDim) {\n  // Each single series only maps to one pair of axis. So we do not need to\n  // check stackByDim, whatever stacked by a dimension or stacked by index.\n  return !!stackedDim && stackedDim === data.getCalculationInfo('stackedDimension');\n}\nexport function getStackedDimension(data, targetDim) {\n  return isDimensionStacked(data, targetDim) ? data.getCalculationInfo('stackResultDimension') : targetDim;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parseDate, numericToNumber } from '../../util/number.js';\nimport { createHashMap, trim, hasOwn, isString, isNumber } from 'zrender/lib/core/util.js';\nimport { throwError } from '../../util/log.js';\n/**\n * Convert raw the value in to inner value in List.\n *\n * [Performance sensitive]\n *\n * [Caution]: this is the key logic of user value parser.\n * For backward compatibiliy, do not modify it until have to!\n */\n\nexport function parseDataValue(value, // For high performance, do not omit the second param.\nopt) {\n  // Performance sensitive.\n  var dimType = opt && opt.type;\n\n  if (dimType === 'ordinal') {\n    // If given value is a category string\n    return value;\n  }\n\n  if (dimType === 'time' // spead up when using timestamp\n  && !isNumber(value) && value != null && value !== '-') {\n    value = +parseDate(value);\n  } // dimType defaults 'number'.\n  // If dimType is not ordinal and value is null or undefined or NaN or '-',\n  // parse to NaN.\n  // number-like string (like ' 123 ') can be converted to a number.\n  // where null/undefined or other string will be converted to NaN.\n\n\n  return value == null || value === '' ? NaN // If string (like '-'), using '+' parse to NaN\n  // If object, also parse to NaN\n  : +value;\n}\n;\nvar valueParserMap = createHashMap({\n  'number': function (val) {\n    // Do not use `numericToNumber` here. We have by defualt `numericToNumber`.\n    // Here the number parser can have loose rule:\n    // enable to cut suffix: \"120px\" => 120, \"14%\" => 14.\n    return parseFloat(val);\n  },\n  'time': function (val) {\n    // return timestamp.\n    return +parseDate(val);\n  },\n  'trim': function (val) {\n    return isString(val) ? trim(val) : val;\n  }\n});\nexport function getRawValueParser(type) {\n  return valueParserMap.get(type);\n}\nvar ORDER_COMPARISON_OP_MAP = {\n  lt: function (lval, rval) {\n    return lval < rval;\n  },\n  lte: function (lval, rval) {\n    return lval <= rval;\n  },\n  gt: function (lval, rval) {\n    return lval > rval;\n  },\n  gte: function (lval, rval) {\n    return lval >= rval;\n  }\n};\n\nvar FilterOrderComparator =\n/** @class */\nfunction () {\n  function FilterOrderComparator(op, rval) {\n    if (!isNumber(rval)) {\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'rvalue of \"<\", \">\", \"<=\", \">=\" can only be number in filter.';\n      }\n\n      throwError(errMsg);\n    }\n\n    this._opFn = ORDER_COMPARISON_OP_MAP[op];\n    this._rvalFloat = numericToNumber(rval);\n  } // Performance sensitive.\n\n\n  FilterOrderComparator.prototype.evaluate = function (lval) {\n    // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n    return isNumber(lval) ? this._opFn(lval, this._rvalFloat) : this._opFn(numericToNumber(lval), this._rvalFloat);\n  };\n\n  return FilterOrderComparator;\n}();\n\nvar SortOrderComparator =\n/** @class */\nfunction () {\n  /**\n   * @param order by defualt: 'asc'\n   * @param incomparable by defualt: Always on the tail.\n   *        That is, if 'asc' => 'max', if 'desc' => 'min'\n   *        See the definition of \"incomparable\" in [SORT_COMPARISON_RULE]\n   */\n  function SortOrderComparator(order, incomparable) {\n    var isDesc = order === 'desc';\n    this._resultLT = isDesc ? 1 : -1;\n\n    if (incomparable == null) {\n      incomparable = isDesc ? 'min' : 'max';\n    }\n\n    this._incomparable = incomparable === 'min' ? -Infinity : Infinity;\n  } // See [SORT_COMPARISON_RULE].\n  // Performance sensitive.\n\n\n  SortOrderComparator.prototype.evaluate = function (lval, rval) {\n    // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n    var lvalFloat = isNumber(lval) ? lval : numericToNumber(lval);\n    var rvalFloat = isNumber(rval) ? rval : numericToNumber(rval);\n    var lvalNotNumeric = isNaN(lvalFloat);\n    var rvalNotNumeric = isNaN(rvalFloat);\n\n    if (lvalNotNumeric) {\n      lvalFloat = this._incomparable;\n    }\n\n    if (rvalNotNumeric) {\n      rvalFloat = this._incomparable;\n    }\n\n    if (lvalNotNumeric && rvalNotNumeric) {\n      var lvalIsStr = isString(lval);\n      var rvalIsStr = isString(rval);\n\n      if (lvalIsStr) {\n        lvalFloat = rvalIsStr ? lval : 0;\n      }\n\n      if (rvalIsStr) {\n        rvalFloat = lvalIsStr ? rval : 0;\n      }\n    }\n\n    return lvalFloat < rvalFloat ? this._resultLT : lvalFloat > rvalFloat ? -this._resultLT : 0;\n  };\n\n  return SortOrderComparator;\n}();\n\nexport { SortOrderComparator };\n\nvar FilterEqualityComparator =\n/** @class */\nfunction () {\n  function FilterEqualityComparator(isEq, rval) {\n    this._rval = rval;\n    this._isEQ = isEq;\n    this._rvalTypeof = typeof rval;\n    this._rvalFloat = numericToNumber(rval);\n  } // Performance sensitive.\n\n\n  FilterEqualityComparator.prototype.evaluate = function (lval) {\n    var eqResult = lval === this._rval;\n\n    if (!eqResult) {\n      var lvalTypeof = typeof lval;\n\n      if (lvalTypeof !== this._rvalTypeof && (lvalTypeof === 'number' || this._rvalTypeof === 'number')) {\n        eqResult = numericToNumber(lval) === this._rvalFloat;\n      }\n    }\n\n    return this._isEQ ? eqResult : !eqResult;\n  };\n\n  return FilterEqualityComparator;\n}();\n/**\n * [FILTER_COMPARISON_RULE]\n * `lt`|`lte`|`gt`|`gte`:\n * + rval must be a number. And lval will be converted to number (`numericToNumber`) to compare.\n * `eq`:\n * + If same type, compare with `===`.\n * + If there is one number, convert to number (`numericToNumber`) to compare.\n * + Else return `false`.\n * `ne`:\n * + Not `eq`.\n *\n *\n * [SORT_COMPARISON_RULE]\n * All the values are grouped into three categories:\n * + \"numeric\" (number and numeric string)\n * + \"non-numeric-string\" (string that excluding numeric string)\n * + \"others\"\n * \"numeric\" vs \"numeric\": values are ordered by number order.\n * \"non-numeric-string\" vs \"non-numeric-string\": values are ordered by ES spec (#sec-abstract-relational-comparison).\n * \"others\" vs \"others\": do not change order (always return 0).\n * \"numeric\" vs \"non-numeric-string\": \"non-numeric-string\" is treated as \"incomparable\".\n * \"number\" vs \"others\": \"others\" is treated as \"incomparable\".\n * \"non-numeric-string\" vs \"others\": \"others\" is treated as \"incomparable\".\n * \"incomparable\" will be seen as -Infinity or Infinity (depends on the settings).\n * MEMO:\n *   non-numeric string sort make sence when need to put the items with the same tag together.\n *   But if we support string sort, we still need to avoid the misleading like `'2' > '12'`,\n *   So we treat \"numeric-string\" sorted by number order rather than string comparison.\n *\n *\n * [CHECK_LIST_OF_THE_RULE_DESIGN]\n * + Do not support string comparison until required. And also need to\n *   void the misleading of \"2\" > \"12\".\n * + Should avoid the misleading case:\n *   `\" 22 \" gte \"22\"` is `true` but `\" 22 \" eq \"22\"` is `false`.\n * + JS bad case should be avoided: null <= 0, [] <= 0, ' ' <= 0, ...\n * + Only \"numeric\" can be converted to comparable number, otherwise converted to NaN.\n *   See `util/number.ts#numericToNumber`.\n *\n * @return If `op` is not `RelationalOperator`, return null;\n */\n\n\nexport function createFilterComparator(op, rval) {\n  return op === 'eq' || op === 'ne' ? new FilterEqualityComparator(op === 'eq', rval) : hasOwn(ORDER_COMPARISON_OP_MAP, op) ? new FilterOrderComparator(op, rval) : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner, getDataItemValue, queryReferringComponents, SINGLE_REFERRING } from '../../util/model.js';\nimport { createHashMap, each, isArray, isString, isObject, isTypedArray } from 'zrender/lib/core/util.js';\nimport { SOURCE_FORMAT_ORIGINAL, SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS, SERIES_LAYOUT_BY_ROW, SOURCE_FORMAT_KEYED_COLUMNS } from '../../util/types.js'; // The result of `guessOrdinal`.\n\nexport var BE_ORDINAL = {\n  Must: 1,\n  Might: 2,\n  Not: 3 // Other cases\n\n};\nvar innerGlobalModel = makeInner();\n/**\n * MUST be called before mergeOption of all series.\n */\n\nexport function resetSourceDefaulter(ecModel) {\n  // `datasetMap` is used to make default encode.\n  innerGlobalModel(ecModel).datasetMap = createHashMap();\n}\n/**\n * [The strategy of the arrengment of data dimensions for dataset]:\n * \"value way\": all axes are non-category axes. So series one by one take\n *     several (the number is coordSysDims.length) dimensions from dataset.\n *     The result of data arrengment of data dimensions like:\n *     | ser0_x | ser0_y | ser1_x | ser1_y | ser2_x | ser2_y |\n * \"category way\": at least one axis is category axis. So the the first data\n *     dimension is always mapped to the first category axis and shared by\n *     all of the series. The other data dimensions are taken by series like\n *     \"value way\" does.\n *     The result of data arrengment of data dimensions like:\n *     | ser_shared_x | ser0_y | ser1_y | ser2_y |\n *\n * @return encode Never be `null/undefined`.\n */\n\nexport function makeSeriesEncodeForAxisCoordSys(coordDimensions, seriesModel, source) {\n  var encode = {};\n  var datasetModel = querySeriesUpstreamDatasetModel(seriesModel); // Currently only make default when using dataset, util more reqirements occur.\n\n  if (!datasetModel || !coordDimensions) {\n    return encode;\n  }\n\n  var encodeItemName = [];\n  var encodeSeriesName = [];\n  var ecModel = seriesModel.ecModel;\n  var datasetMap = innerGlobalModel(ecModel).datasetMap;\n  var key = datasetModel.uid + '_' + source.seriesLayoutBy;\n  var baseCategoryDimIndex;\n  var categoryWayValueDimStart;\n  coordDimensions = coordDimensions.slice();\n  each(coordDimensions, function (coordDimInfoLoose, coordDimIdx) {\n    var coordDimInfo = isObject(coordDimInfoLoose) ? coordDimInfoLoose : coordDimensions[coordDimIdx] = {\n      name: coordDimInfoLoose\n    };\n\n    if (coordDimInfo.type === 'ordinal' && baseCategoryDimIndex == null) {\n      baseCategoryDimIndex = coordDimIdx;\n      categoryWayValueDimStart = getDataDimCountOnCoordDim(coordDimInfo);\n    }\n\n    encode[coordDimInfo.name] = [];\n  });\n  var datasetRecord = datasetMap.get(key) || datasetMap.set(key, {\n    categoryWayDim: categoryWayValueDimStart,\n    valueWayDim: 0\n  }); // TODO\n  // Auto detect first time axis and do arrangement.\n\n  each(coordDimensions, function (coordDimInfo, coordDimIdx) {\n    var coordDimName = coordDimInfo.name;\n    var count = getDataDimCountOnCoordDim(coordDimInfo); // In value way.\n\n    if (baseCategoryDimIndex == null) {\n      var start = datasetRecord.valueWayDim;\n      pushDim(encode[coordDimName], start, count);\n      pushDim(encodeSeriesName, start, count);\n      datasetRecord.valueWayDim += count; // ??? TODO give a better default series name rule?\n      // especially when encode x y specified.\n      // consider: when mutiple series share one dimension\n      // category axis, series name should better use\n      // the other dimsion name. On the other hand, use\n      // both dimensions name.\n    } // In category way, the first category axis.\n    else if (baseCategoryDimIndex === coordDimIdx) {\n        pushDim(encode[coordDimName], 0, count);\n        pushDim(encodeItemName, 0, count);\n      } // In category way, the other axis.\n      else {\n          var start = datasetRecord.categoryWayDim;\n          pushDim(encode[coordDimName], start, count);\n          pushDim(encodeSeriesName, start, count);\n          datasetRecord.categoryWayDim += count;\n        }\n  });\n\n  function pushDim(dimIdxArr, idxFrom, idxCount) {\n    for (var i = 0; i < idxCount; i++) {\n      dimIdxArr.push(idxFrom + i);\n    }\n  }\n\n  function getDataDimCountOnCoordDim(coordDimInfo) {\n    var dimsDef = coordDimInfo.dimsDef;\n    return dimsDef ? dimsDef.length : 1;\n  }\n\n  encodeItemName.length && (encode.itemName = encodeItemName);\n  encodeSeriesName.length && (encode.seriesName = encodeSeriesName);\n  return encode;\n}\n/**\n * Work for data like [{name: ..., value: ...}, ...].\n *\n * @return encode Never be `null/undefined`.\n */\n\nexport function makeSeriesEncodeForNameBased(seriesModel, source, dimCount) {\n  var encode = {};\n  var datasetModel = querySeriesUpstreamDatasetModel(seriesModel); // Currently only make default when using dataset, util more reqirements occur.\n\n  if (!datasetModel) {\n    return encode;\n  }\n\n  var sourceFormat = source.sourceFormat;\n  var dimensionsDefine = source.dimensionsDefine;\n  var potentialNameDimIndex;\n\n  if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    each(dimensionsDefine, function (dim, idx) {\n      if ((isObject(dim) ? dim.name : dim) === 'name') {\n        potentialNameDimIndex = idx;\n      }\n    });\n  }\n\n  var idxResult = function () {\n    var idxRes0 = {};\n    var idxRes1 = {};\n    var guessRecords = []; // 5 is an experience value.\n\n    for (var i = 0, len = Math.min(5, dimCount); i < len; i++) {\n      var guessResult = doGuessOrdinal(source.data, sourceFormat, source.seriesLayoutBy, dimensionsDefine, source.startIndex, i);\n      guessRecords.push(guessResult);\n      var isPureNumber = guessResult === BE_ORDINAL.Not; // [Strategy of idxRes0]: find the first BE_ORDINAL.Not as the value dim,\n      // and then find a name dim with the priority:\n      // \"BE_ORDINAL.Might|BE_ORDINAL.Must\" > \"other dim\" > \"the value dim itself\".\n\n      if (isPureNumber && idxRes0.v == null && i !== potentialNameDimIndex) {\n        idxRes0.v = i;\n      }\n\n      if (idxRes0.n == null || idxRes0.n === idxRes0.v || !isPureNumber && guessRecords[idxRes0.n] === BE_ORDINAL.Not) {\n        idxRes0.n = i;\n      }\n\n      if (fulfilled(idxRes0) && guessRecords[idxRes0.n] !== BE_ORDINAL.Not) {\n        return idxRes0;\n      } // [Strategy of idxRes1]: if idxRes0 not satisfied (that is, no BE_ORDINAL.Not),\n      // find the first BE_ORDINAL.Might as the value dim,\n      // and then find a name dim with the priority:\n      // \"other dim\" > \"the value dim itself\".\n      // That is for backward compat: number-like (e.g., `'3'`, `'55'`) can be\n      // treated as number.\n\n\n      if (!isPureNumber) {\n        if (guessResult === BE_ORDINAL.Might && idxRes1.v == null && i !== potentialNameDimIndex) {\n          idxRes1.v = i;\n        }\n\n        if (idxRes1.n == null || idxRes1.n === idxRes1.v) {\n          idxRes1.n = i;\n        }\n      }\n    }\n\n    function fulfilled(idxResult) {\n      return idxResult.v != null && idxResult.n != null;\n    }\n\n    return fulfilled(idxRes0) ? idxRes0 : fulfilled(idxRes1) ? idxRes1 : null;\n  }();\n\n  if (idxResult) {\n    encode.value = [idxResult.v]; // `potentialNameDimIndex` has highest priority.\n\n    var nameDimIndex = potentialNameDimIndex != null ? potentialNameDimIndex : idxResult.n; // By default, label use itemName in charts.\n    // So we dont set encodeLabel here.\n\n    encode.itemName = [nameDimIndex];\n    encode.seriesName = [nameDimIndex];\n  }\n\n  return encode;\n}\n/**\n * @return If return null/undefined, indicate that should not use datasetModel.\n */\n\nexport function querySeriesUpstreamDatasetModel(seriesModel) {\n  // Caution: consider the scenario:\n  // A dataset is declared and a series is not expected to use the dataset,\n  // and at the beginning `setOption({series: { noData })` (just prepare other\n  // option but no data), then `setOption({series: {data: [...]}); In this case,\n  // the user should set an empty array to avoid that dataset is used by default.\n  var thisData = seriesModel.get('data', true);\n\n  if (!thisData) {\n    return queryReferringComponents(seriesModel.ecModel, 'dataset', {\n      index: seriesModel.get('datasetIndex', true),\n      id: seriesModel.get('datasetId', true)\n    }, SINGLE_REFERRING).models[0];\n  }\n}\n/**\n * @return Always return an array event empty.\n */\n\nexport function queryDatasetUpstreamDatasetModels(datasetModel) {\n  // Only these attributes declared, we by defualt reference to `datasetIndex: 0`.\n  // Otherwise, no reference.\n  if (!datasetModel.get('transform', true) && !datasetModel.get('fromTransformResult', true)) {\n    return [];\n  }\n\n  return queryReferringComponents(datasetModel.ecModel, 'dataset', {\n    index: datasetModel.get('fromDatasetIndex', true),\n    id: datasetModel.get('fromDatasetId', true)\n  }, SINGLE_REFERRING).models;\n}\n/**\n * The rule should not be complex, otherwise user might not\n * be able to known where the data is wrong.\n * The code is ugly, but how to make it neat?\n */\n\nexport function guessOrdinal(source, dimIndex) {\n  return doGuessOrdinal(source.data, source.sourceFormat, source.seriesLayoutBy, source.dimensionsDefine, source.startIndex, dimIndex);\n} // dimIndex may be overflow source data.\n// return {BE_ORDINAL}\n\nfunction doGuessOrdinal(data, sourceFormat, seriesLayoutBy, dimensionsDefine, startIndex, dimIndex) {\n  var result; // Experience value.\n\n  var maxLoop = 5;\n\n  if (isTypedArray(data)) {\n    return BE_ORDINAL.Not;\n  } // When sourceType is 'objectRows' or 'keyedColumns', dimensionsDefine\n  // always exists in source.\n\n\n  var dimName;\n  var dimType;\n\n  if (dimensionsDefine) {\n    var dimDefItem = dimensionsDefine[dimIndex];\n\n    if (isObject(dimDefItem)) {\n      dimName = dimDefItem.name;\n      dimType = dimDefItem.type;\n    } else if (isString(dimDefItem)) {\n      dimName = dimDefItem;\n    }\n  }\n\n  if (dimType != null) {\n    return dimType === 'ordinal' ? BE_ORDINAL.Must : BE_ORDINAL.Not;\n  }\n\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var dataArrayRows = data;\n\n    if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n      var sample = dataArrayRows[dimIndex];\n\n      for (var i = 0; i < (sample || []).length && i < maxLoop; i++) {\n        if ((result = detectValue(sample[startIndex + i])) != null) {\n          return result;\n        }\n      }\n    } else {\n      for (var i = 0; i < dataArrayRows.length && i < maxLoop; i++) {\n        var row = dataArrayRows[startIndex + i];\n\n        if (row && (result = detectValue(row[dimIndex])) != null) {\n          return result;\n        }\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    var dataObjectRows = data;\n\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n\n    for (var i = 0; i < dataObjectRows.length && i < maxLoop; i++) {\n      var item = dataObjectRows[i];\n\n      if (item && (result = detectValue(item[dimName])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    var dataKeyedColumns = data;\n\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n\n    var sample = dataKeyedColumns[dimName];\n\n    if (!sample || isTypedArray(sample)) {\n      return BE_ORDINAL.Not;\n    }\n\n    for (var i = 0; i < sample.length && i < maxLoop; i++) {\n      if ((result = detectValue(sample[i])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var dataOriginal = data;\n\n    for (var i = 0; i < dataOriginal.length && i < maxLoop; i++) {\n      var item = dataOriginal[i];\n      var val = getDataItemValue(item);\n\n      if (!isArray(val)) {\n        return BE_ORDINAL.Not;\n      }\n\n      if ((result = detectValue(val[dimIndex])) != null) {\n        return result;\n      }\n    }\n  }\n\n  function detectValue(val) {\n    var beStr = isString(val); // Consider usage convenience, '1', '2' will be treated as \"number\".\n    // `isFinit('')` get `true`.\n\n    if (val != null && isFinite(val) && val !== '') {\n      return beStr ? BE_ORDINAL.Might : BE_ORDINAL.Not;\n    } else if (beStr && val !== '-') {\n      return BE_ORDINAL.Must;\n    }\n  }\n\n  return BE_ORDINAL.Not;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { SERIES_LAYOUT_BY_COLUMN, SOURCE_FORMAT_OBJECT_ROWS, SOURCE_FORMAT_ARRAY_ROWS } from '../../util/types.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { createHashMap, bind, each, hasOwn, map, clone, isObject, extend, isNumber } from 'zrender/lib/core/util.js';\nimport { getRawSourceItemGetter, getRawSourceDataCounter, getRawSourceValueGetter } from './dataProvider.js';\nimport { parseDataValue } from './dataValueHelper.js';\nimport { log, makePrintable, throwError } from '../../util/log.js';\nimport { createSource, detectSourceFormat } from '../Source.js';\n/**\n * TODO: disable writable.\n * This structure will be exposed to users.\n */\n\nvar ExternalSource =\n/** @class */\nfunction () {\n  function ExternalSource() {}\n\n  ExternalSource.prototype.getRawData = function () {\n    // Only built-in transform available.\n    throw new Error('not supported');\n  };\n\n  ExternalSource.prototype.getRawDataItem = function (dataIndex) {\n    // Only built-in transform available.\n    throw new Error('not supported');\n  };\n\n  ExternalSource.prototype.cloneRawData = function () {\n    return;\n  };\n  /**\n   * @return If dimension not found, return null/undefined.\n   */\n\n\n  ExternalSource.prototype.getDimensionInfo = function (dim) {\n    return;\n  };\n  /**\n   * dimensions defined if and only if either:\n   * (a) dataset.dimensions are declared.\n   * (b) dataset data include dimensions definitions in data (detected or via specified `sourceHeader`).\n   * If dimensions are defined, `dimensionInfoAll` is corresponding to\n   * the defined dimensions.\n   * Otherwise, `dimensionInfoAll` is determined by data columns.\n   * @return Always return an array (even empty array).\n   */\n\n\n  ExternalSource.prototype.cloneAllDimensionInfo = function () {\n    return;\n  };\n\n  ExternalSource.prototype.count = function () {\n    return;\n  };\n  /**\n   * Only support by dimension index.\n   * No need to support by dimension name in transform function,\n   * becuase transform function is not case-specific, no need to use name literally.\n   */\n\n\n  ExternalSource.prototype.retrieveValue = function (dataIndex, dimIndex) {\n    return;\n  };\n\n  ExternalSource.prototype.retrieveValueFromItem = function (dataItem, dimIndex) {\n    return;\n  };\n\n  ExternalSource.prototype.convertValue = function (rawVal, dimInfo) {\n    return parseDataValue(rawVal, dimInfo);\n  };\n\n  return ExternalSource;\n}();\n\nexport { ExternalSource };\n\nfunction createExternalSource(internalSource, externalTransform) {\n  var extSource = new ExternalSource();\n  var data = internalSource.data;\n  var sourceFormat = extSource.sourceFormat = internalSource.sourceFormat;\n  var sourceHeaderCount = internalSource.startIndex;\n  var errMsg = '';\n\n  if (internalSource.seriesLayoutBy !== SERIES_LAYOUT_BY_COLUMN) {\n    // For the logic simplicity in transformer, only 'culumn' is\n    // supported in data transform. Otherwise, the `dimensionsDefine`\n    // might be detected by 'row', which probably confuses users.\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`seriesLayoutBy` of upstream dataset can only be \"column\" in data transform.';\n    }\n\n    throwError(errMsg);\n  } // [MEMO]\n  // Create a new dimensions structure for exposing.\n  // Do not expose all dimension info to users directly.\n  // Becuase the dimension is probably auto detected from data and not might reliable.\n  // Should not lead the transformers to think that is relialbe and return it.\n  // See [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\n\n\n  var dimensions = [];\n  var dimsByName = {};\n  var dimsDef = internalSource.dimensionsDefine;\n\n  if (dimsDef) {\n    each(dimsDef, function (dimDef, idx) {\n      var name = dimDef.name;\n      var dimDefExt = {\n        index: idx,\n        name: name,\n        displayName: dimDef.displayName\n      };\n      dimensions.push(dimDefExt); // Users probably not sepcify dimension name. For simplicity, data transform\n      // do not generate dimension name.\n\n      if (name != null) {\n        // Dimension name should not be duplicated.\n        // For simplicity, data transform forbid name duplication, do not generate\n        // new name like module `completeDimensions.ts` did, but just tell users.\n        var errMsg_1 = '';\n\n        if (hasOwn(dimsByName, name)) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg_1 = 'dimension name \"' + name + '\" duplicated.';\n          }\n\n          throwError(errMsg_1);\n        }\n\n        dimsByName[name] = dimDefExt;\n      }\n    });\n  } // If dimension definitions are not defined and can not be detected.\n  // e.g., pure data `[[11, 22], ...]`.\n  else {\n      for (var i = 0; i < internalSource.dimensionsDetectedCount || 0; i++) {\n        // Do not generete name or anything others. The consequence process in\n        // `transform` or `series` probably have there own name generation strategry.\n        dimensions.push({\n          index: i\n        });\n      }\n    } // Implement public methods:\n\n\n  var rawItemGetter = getRawSourceItemGetter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n\n  if (externalTransform.__isBuiltIn) {\n    extSource.getRawDataItem = function (dataIndex) {\n      return rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n    };\n\n    extSource.getRawData = bind(getRawData, null, internalSource);\n  }\n\n  extSource.cloneRawData = bind(cloneRawData, null, internalSource);\n  var rawCounter = getRawSourceDataCounter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n  extSource.count = bind(rawCounter, null, data, sourceHeaderCount, dimensions);\n  var rawValueGetter = getRawSourceValueGetter(sourceFormat);\n\n  extSource.retrieveValue = function (dataIndex, dimIndex) {\n    var rawItem = rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n    return retrieveValueFromItem(rawItem, dimIndex);\n  };\n\n  var retrieveValueFromItem = extSource.retrieveValueFromItem = function (dataItem, dimIndex) {\n    if (dataItem == null) {\n      return;\n    }\n\n    var dimDef = dimensions[dimIndex]; // When `dimIndex` is `null`, `rawValueGetter` return the whole item.\n\n    if (dimDef) {\n      return rawValueGetter(dataItem, dimIndex, dimDef.name);\n    }\n  };\n\n  extSource.getDimensionInfo = bind(getDimensionInfo, null, dimensions, dimsByName);\n  extSource.cloneAllDimensionInfo = bind(cloneAllDimensionInfo, null, dimensions);\n  return extSource;\n}\n\nfunction getRawData(upstream) {\n  var sourceFormat = upstream.sourceFormat;\n\n  if (!isSupportedSourceFormat(sourceFormat)) {\n    var errMsg = '';\n\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`getRawData` is not supported in source format ' + sourceFormat;\n    }\n\n    throwError(errMsg);\n  }\n\n  return upstream.data;\n}\n\nfunction cloneRawData(upstream) {\n  var sourceFormat = upstream.sourceFormat;\n  var data = upstream.data;\n\n  if (!isSupportedSourceFormat(sourceFormat)) {\n    var errMsg = '';\n\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`cloneRawData` is not supported in source format ' + sourceFormat;\n    }\n\n    throwError(errMsg);\n  }\n\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var result = [];\n\n    for (var i = 0, len = data.length; i < len; i++) {\n      // Not strictly clone for performance\n      result.push(data[i].slice());\n    }\n\n    return result;\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    var result = [];\n\n    for (var i = 0, len = data.length; i < len; i++) {\n      // Not strictly clone for performance\n      result.push(extend({}, data[i]));\n    }\n\n    return result;\n  }\n}\n\nfunction getDimensionInfo(dimensions, dimsByName, dim) {\n  if (dim == null) {\n    return;\n  } // Keep the same logic as `List::getDimension` did.\n\n\n  if (isNumber(dim) // If being a number-like string but not being defined a dimension name.\n  || !isNaN(dim) && !hasOwn(dimsByName, dim)) {\n    return dimensions[dim];\n  } else if (hasOwn(dimsByName, dim)) {\n    return dimsByName[dim];\n  }\n}\n\nfunction cloneAllDimensionInfo(dimensions) {\n  return clone(dimensions);\n}\n\nvar externalTransformMap = createHashMap();\nexport function registerExternalTransform(externalTransform) {\n  externalTransform = clone(externalTransform);\n  var type = externalTransform.type;\n  var errMsg = '';\n\n  if (!type) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Must have a `type` when `registerTransform`.';\n    }\n\n    throwError(errMsg);\n  }\n\n  var typeParsed = type.split(':');\n\n  if (typeParsed.length !== 2) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Name must include namespace like \"ns:regression\".';\n    }\n\n    throwError(errMsg);\n  } // Namespace 'echarts:xxx' is official namespace, where the transforms should\n  // be called directly via 'xxx' rather than 'echarts:xxx'.\n\n\n  var isBuiltIn = false;\n\n  if (typeParsed[0] === 'echarts') {\n    type = typeParsed[1];\n    isBuiltIn = true;\n  }\n\n  externalTransform.__isBuiltIn = isBuiltIn;\n  externalTransformMap.set(type, externalTransform);\n}\nexport function applyDataTransform(rawTransOption, sourceList, infoForPrint) {\n  var pipedTransOption = normalizeToArray(rawTransOption);\n  var pipeLen = pipedTransOption.length;\n  var errMsg = '';\n\n  if (!pipeLen) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'If `transform` declared, it should at least contain one transform.';\n    }\n\n    throwError(errMsg);\n  }\n\n  for (var i = 0, len = pipeLen; i < len; i++) {\n    var transOption = pipedTransOption[i];\n    sourceList = applySingleDataTransform(transOption, sourceList, infoForPrint, pipeLen === 1 ? null : i); // piped transform only support single input, except the fist one.\n    // piped transform only support single output, except the last one.\n\n    if (i !== len - 1) {\n      sourceList.length = Math.max(sourceList.length, 1);\n    }\n  }\n\n  return sourceList;\n}\n\nfunction applySingleDataTransform(transOption, upSourceList, infoForPrint, // If `pipeIndex` is null/undefined, no piped transform.\npipeIndex) {\n  var errMsg = '';\n\n  if (!upSourceList.length) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Must have at least one upstream dataset.';\n    }\n\n    throwError(errMsg);\n  }\n\n  if (!isObject(transOption)) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'transform declaration must be an object rather than ' + typeof transOption + '.';\n    }\n\n    throwError(errMsg);\n  }\n\n  var transType = transOption.type;\n  var externalTransform = externalTransformMap.get(transType);\n\n  if (!externalTransform) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Can not find transform on type \"' + transType + '\".';\n    }\n\n    throwError(errMsg);\n  } // Prepare source\n\n\n  var extUpSourceList = map(upSourceList, function (upSource) {\n    return createExternalSource(upSource, externalTransform);\n  });\n  var resultList = normalizeToArray(externalTransform.transform({\n    upstream: extUpSourceList[0],\n    upstreamList: extUpSourceList,\n    config: clone(transOption.config)\n  }));\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (transOption.print) {\n      var printStrArr = map(resultList, function (extSource) {\n        var pipeIndexStr = pipeIndex != null ? ' === pipe index: ' + pipeIndex : '';\n        return ['=== dataset index: ' + infoForPrint.datasetIndex + pipeIndexStr + ' ===', '- transform result data:', makePrintable(extSource.data), '- transform result dimensions:', makePrintable(extSource.dimensions)].join('\\n');\n      }).join('\\n');\n      log(printStrArr);\n    }\n  }\n\n  return map(resultList, function (result, resultIndex) {\n    var errMsg = '';\n\n    if (!isObject(result)) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'A transform should not return some empty results.';\n      }\n\n      throwError(errMsg);\n    }\n\n    if (!result.data) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Transform result data should be not be null or undefined';\n      }\n\n      throwError(errMsg);\n    }\n\n    var sourceFormat = detectSourceFormat(result.data);\n\n    if (!isSupportedSourceFormat(sourceFormat)) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Transform result data should be array rows or object rows.';\n      }\n\n      throwError(errMsg);\n    }\n\n    var resultMetaRawOption;\n    var firstUpSource = upSourceList[0];\n    /**\n     * Intuitively, the end users known the content of the original `dataset.source`,\n     * calucating the transform result in mind.\n     * Suppose the original `dataset.source` is:\n     * ```js\n     * [\n     *     ['product', '2012', '2013', '2014', '2015'],\n     *     ['AAA', 41.1, 30.4, 65.1, 53.3],\n     *     ['BBB', 86.5, 92.1, 85.7, 83.1],\n     *     ['CCC', 24.1, 67.2, 79.5, 86.4]\n     * ]\n     * ```\n     * The dimension info have to be detected from the source data.\n     * Some of the transformers (like filter, sort) will follow the dimension info\n     * of upstream, while others use new dimensions (like aggregate).\n     * Transformer can output a field `dimensions` to define the its own output dimensions.\n     * We also allow transformers to ignore the output `dimensions` field, and\n     * inherit the upstream dimensions definition. It can reduce the burden of handling\n     * dimensions in transformers.\n     *\n     * See also [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\n     */\n\n    if (firstUpSource && resultIndex === 0 // If transformer returns `dimensions`, it means that the transformer has different\n    // dimensions definitions. We do not inherit anything from upstream.\n    && !result.dimensions) {\n      var startIndex = firstUpSource.startIndex; // We copy the header of upstream to the result becuase:\n      // (1) The returned data always does not contain header line and can not be used\n      // as dimension-detection. In this case we can not use \"detected dimensions\" of\n      // upstream directly, because it might be detected based on different `seriesLayoutBy`.\n      // (2) We should support that the series read the upstream source in `seriesLayoutBy: 'row'`.\n      // So the original detected header should be add to the result, otherwise they can not be read.\n\n      if (startIndex) {\n        result.data = firstUpSource.data.slice(0, startIndex).concat(result.data);\n      }\n\n      resultMetaRawOption = {\n        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n        sourceHeader: startIndex,\n        dimensions: firstUpSource.metaRawOption.dimensions\n      };\n    } else {\n      resultMetaRawOption = {\n        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n        sourceHeader: 0,\n        dimensions: result.dimensions\n      };\n    }\n\n    return createSource(result.data, resultMetaRawOption, null);\n  });\n}\n\nfunction isSupportedSourceFormat(sourceFormat) {\n  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS || sourceFormat === SOURCE_FORMAT_OBJECT_ROWS;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { registerPreprocessor, registerProcessor, registerPostInit, registerPostUpdate, registerAction, registerCoordinateSystem, registerLayout, registerVisual, registerTransform, registerLoading, registerMap, registerUpdateLifecycle, PRIORITY } from './core/echarts.js';\nimport ComponentView from './view/Component.js';\nimport ChartView from './view/Chart.js';\nimport ComponentModel from './model/Component.js';\nimport SeriesModel from './model/Series.js';\nimport { isFunction, indexOf, isArray, each } from 'zrender/lib/core/util.js';\nimport { registerImpl } from './core/impl.js';\nimport { registerPainter } from 'zrender/lib/zrender.js';\nvar extensions = [];\nvar extensionRegisters = {\n  registerPreprocessor: registerPreprocessor,\n  registerProcessor: registerProcessor,\n  registerPostInit: registerPostInit,\n  registerPostUpdate: registerPostUpdate,\n  registerUpdateLifecycle: registerUpdateLifecycle,\n  registerAction: registerAction,\n  registerCoordinateSystem: registerCoordinateSystem,\n  registerLayout: registerLayout,\n  registerVisual: registerVisual,\n  registerTransform: registerTransform,\n  registerLoading: registerLoading,\n  registerMap: registerMap,\n  registerImpl: registerImpl,\n  PRIORITY: PRIORITY,\n  ComponentModel: ComponentModel,\n  ComponentView: ComponentView,\n  SeriesModel: SeriesModel,\n  ChartView: ChartView,\n  // TODO Use ComponentModel and SeriesModel instead of Constructor\n  registerComponentModel: function (ComponentModelClass) {\n    ComponentModel.registerClass(ComponentModelClass);\n  },\n  registerComponentView: function (ComponentViewClass) {\n    ComponentView.registerClass(ComponentViewClass);\n  },\n  registerSeriesModel: function (SeriesModelClass) {\n    SeriesModel.registerClass(SeriesModelClass);\n  },\n  registerChartView: function (ChartViewClass) {\n    ChartView.registerClass(ChartViewClass);\n  },\n  registerSubTypeDefaulter: function (componentType, defaulter) {\n    ComponentModel.registerSubTypeDefaulter(componentType, defaulter);\n  },\n  registerPainter: function (painterType, PainterCtor) {\n    registerPainter(painterType, PainterCtor);\n  }\n};\nexport function use(ext) {\n  if (isArray(ext)) {\n    // use([ChartLine, ChartBar]);\n    each(ext, function (singleExt) {\n      use(singleExt);\n    });\n    return;\n  }\n\n  if (indexOf(extensions, ext) >= 0) {\n    return;\n  }\n\n  extensions.push(ext);\n\n  if (isFunction(ext)) {\n    ext = {\n      install: ext\n    };\n  }\n\n  ext.install(extensionRegisters);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { isFunction, retrieve2, extend, keys, trim } from 'zrender/lib/core/util.js';\nimport { SPECIAL_STATES, DISPLAY_STATES } from '../util/states.js';\nimport { deprecateReplaceLog } from '../util/log.js';\nimport { makeInner, interpolateRawValues } from '../util/model.js';\nimport { initProps, updateProps } from '../util/graphic.js';\nvar EMPTY_OBJ = {};\nexport function setLabelText(label, labelTexts) {\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var text = labelTexts[stateName];\n    var state = label.ensureState(stateName);\n    state.style = state.style || {};\n    state.style.text = text;\n  }\n\n  var oldStates = label.currentStates.slice();\n  label.clearStates(true);\n  label.setStyle({\n    text: labelTexts.normal\n  });\n  label.useStates(oldStates, true);\n}\n\nfunction getLabelText(opt, stateModels, interpolatedValue) {\n  var labelFetcher = opt.labelFetcher;\n  var labelDataIndex = opt.labelDataIndex;\n  var labelDimIndex = opt.labelDimIndex;\n  var normalModel = stateModels.normal;\n  var baseText;\n\n  if (labelFetcher) {\n    baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, normalModel && normalModel.get('formatter'), interpolatedValue != null ? {\n      interpolatedValue: interpolatedValue\n    } : null);\n  }\n\n  if (baseText == null) {\n    baseText = isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt, interpolatedValue) : opt.defaultText;\n  }\n\n  var statesText = {\n    normal: baseText\n  };\n\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var stateModel = stateModels[stateName];\n    statesText[stateName] = retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get('formatter')) : null, baseText);\n  }\n\n  return statesText;\n}\n\nfunction setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified // TODO specified position?\n) {\n  opt = opt || EMPTY_OBJ;\n  var isSetOnText = targetEl instanceof ZRText;\n  var needsCreateText = false;\n\n  for (var i = 0; i < DISPLAY_STATES.length; i++) {\n    var stateModel = labelStatesModels[DISPLAY_STATES[i]];\n\n    if (stateModel && stateModel.getShallow('show')) {\n      needsCreateText = true;\n      break;\n    }\n  }\n\n  var textContent = isSetOnText ? targetEl : targetEl.getTextContent();\n\n  if (needsCreateText) {\n    if (!isSetOnText) {\n      // Reuse the previous\n      if (!textContent) {\n        textContent = new ZRText();\n        targetEl.setTextContent(textContent);\n      } // Use same state proxy\n\n\n      if (targetEl.stateProxy) {\n        textContent.stateProxy = targetEl.stateProxy;\n      }\n    }\n\n    var labelStatesTexts = getLabelText(opt, labelStatesModels);\n    var normalModel = labelStatesModels.normal;\n    var showNormal = !!normalModel.getShallow('show');\n    var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);\n    normalStyle.text = labelStatesTexts.normal;\n\n    if (!isSetOnText) {\n      // Always create new\n      targetEl.setTextConfig(createTextConfig(normalModel, opt, false));\n    }\n\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      var stateModel = labelStatesModels[stateName];\n\n      if (stateModel) {\n        var stateObj = textContent.ensureState(stateName);\n        var stateShow = !!retrieve2(stateModel.getShallow('show'), showNormal);\n\n        if (stateShow !== showNormal) {\n          stateObj.ignore = !stateShow;\n        }\n\n        stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);\n        stateObj.style.text = labelStatesTexts[stateName];\n\n        if (!isSetOnText) {\n          var targetElEmphasisState = targetEl.ensureState(stateName);\n          targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);\n        }\n      }\n    } // PENDING: if there is many requirements that emphasis position\n    // need to be different from normal position, we might consider\n    // auto slient is those cases.\n\n\n    textContent.silent = !!normalModel.getShallow('silent'); // Keep x and y\n\n    if (textContent.style.x != null) {\n      normalStyle.x = textContent.style.x;\n    }\n\n    if (textContent.style.y != null) {\n      normalStyle.y = textContent.style.y;\n    }\n\n    textContent.ignore = !showNormal; // Always create new style.\n\n    textContent.useStyle(normalStyle);\n    textContent.dirty();\n\n    if (opt.enableTextSetter) {\n      labelInner(textContent).setLabelText = function (interpolatedValue) {\n        var labelStatesTexts = getLabelText(opt, labelStatesModels, interpolatedValue);\n        setLabelText(textContent, labelStatesTexts);\n      };\n    }\n  } else if (textContent) {\n    // Not display rich text.\n    textContent.ignore = true;\n  }\n\n  targetEl.dirty();\n}\n\nexport { setLabelStyle };\nexport function getLabelStatesModels(itemModel, labelName) {\n  labelName = labelName || 'label';\n  var statesModels = {\n    normal: itemModel.getModel(labelName)\n  };\n\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    statesModels[stateName] = itemModel.getModel([stateName, labelName]);\n  }\n\n  return statesModels;\n}\n/**\n * Set basic textStyle properties.\n */\n\nexport function createTextStyle(textStyleModel, specifiedTextStyle, // Fixed style in the code. Can't be set by model.\nopt, isNotNormal, isAttached // If text is attached on an element. If so, auto color will handling in zrender.\n) {\n  var textStyle = {};\n  setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);\n  specifiedTextStyle && extend(textStyle, specifiedTextStyle); // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n\n  return textStyle;\n}\nexport function createTextConfig(textStyleModel, opt, isNotNormal) {\n  opt = opt || {};\n  var textConfig = {};\n  var labelPosition;\n  var labelRotate = textStyleModel.getShallow('rotate');\n  var labelDistance = retrieve2(textStyleModel.getShallow('distance'), isNotNormal ? null : 5);\n  var labelOffset = textStyleModel.getShallow('offset');\n  labelPosition = textStyleModel.getShallow('position') || (isNotNormal ? null : 'inside'); // 'outside' is not a valid zr textPostion value, but used\n  // in bar series, and magric type should be considered.\n\n  labelPosition === 'outside' && (labelPosition = opt.defaultOutsidePosition || 'top');\n\n  if (labelPosition != null) {\n    textConfig.position = labelPosition;\n  }\n\n  if (labelOffset != null) {\n    textConfig.offset = labelOffset;\n  }\n\n  if (labelRotate != null) {\n    labelRotate *= Math.PI / 180;\n    textConfig.rotation = labelRotate;\n  }\n\n  if (labelDistance != null) {\n    textConfig.distance = labelDistance;\n  } // fill and auto is determined by the color of path fill if it's not specified by developers.\n\n\n  textConfig.outsideFill = textStyleModel.get('color') === 'inherit' ? opt.inheritColor || null : 'auto';\n  return textConfig;\n}\n/**\n * The uniform entry of set text style, that is, retrieve style definitions\n * from `model` and set to `textStyle` object.\n *\n * Never in merge mode, but in overwrite mode, that is, all of the text style\n * properties will be set. (Consider the states of normal and emphasis and\n * default value can be adopted, merge would make the logic too complicated\n * to manage.)\n */\n\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\n  opt = opt || EMPTY_OBJ;\n  var ecModel = textStyleModel.ecModel;\n  var globalTextStyle = ecModel && ecModel.option.textStyle; // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n\n  var richItemNames = getRichItemNames(textStyleModel);\n  var richResult;\n\n  if (richItemNames) {\n    richResult = {};\n\n    for (var name_1 in richItemNames) {\n      if (richItemNames.hasOwnProperty(name_1)) {\n        // Cascade is supported in rich.\n        var richTextStyle = textStyleModel.getModel(['rich', name_1]); // In rich, never `disableBox`.\n        // FIXME: consider `label: {formatter: '{a|xx}', color: 'blue', rich: {a: {}}}`,\n        // the default color `'blue'` will not be adopted if no color declared in `rich`.\n        // That might confuses users. So probably we should put `textStyleModel` as the\n        // root ancestor of the `richTextStyle`. But that would be a break change.\n\n        setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, opt, isNotNormal, isAttached, false, true);\n      }\n    }\n  }\n\n  if (richResult) {\n    textStyle.rich = richResult;\n  }\n\n  var overflow = textStyleModel.get('overflow');\n\n  if (overflow) {\n    textStyle.overflow = overflow;\n  }\n\n  var margin = textStyleModel.get('minMargin');\n\n  if (margin != null) {\n    textStyle.margin = margin;\n  }\n\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, true, false);\n} // Consider case:\n// {\n//     data: [{\n//         value: 12,\n//         label: {\n//             rich: {\n//                 // no 'a' here but using parent 'a'.\n//             }\n//         }\n//     }],\n//     rich: {\n//         a: { ... }\n//     }\n// }\n// TODO TextStyleModel\n\n\nfunction getRichItemNames(textStyleModel) {\n  // Use object to remove duplicated names.\n  var richItemNameMap;\n\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n\n    if (rich) {\n      richItemNameMap = richItemNameMap || {};\n      var richKeys = keys(rich);\n\n      for (var i = 0; i < richKeys.length; i++) {\n        var richKey = richKeys[i];\n        richItemNameMap[richKey] = 1;\n      }\n    }\n\n    textStyleModel = textStyleModel.parentModel;\n  }\n\n  return richItemNameMap;\n}\n\nvar TEXT_PROPS_WITH_GLOBAL = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'];\nvar TEXT_PROPS_SELF = ['align', 'lineHeight', 'width', 'height', 'tag', 'verticalAlign'];\nvar TEXT_PROPS_BOX = ['padding', 'borderWidth', 'borderRadius', 'borderDashOffset', 'backgroundColor', 'borderColor', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n\nfunction setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, isBlock, inRich) {\n  // In merge mode, default value should not be given.\n  globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;\n  var inheritColor = opt && opt.inheritColor;\n  var fillColor = textStyleModel.getShallow('color');\n  var strokeColor = textStyleModel.getShallow('textBorderColor');\n  var opacity = retrieve2(textStyleModel.getShallow('opacity'), globalTextStyle.opacity);\n\n  if (fillColor === 'inherit' || fillColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (fillColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n\n    if (inheritColor) {\n      fillColor = inheritColor;\n    } else {\n      fillColor = null;\n    }\n  }\n\n  if (strokeColor === 'inherit' || strokeColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (strokeColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n\n    if (inheritColor) {\n      strokeColor = inheritColor;\n    } else {\n      strokeColor = null;\n    }\n  }\n\n  if (!isAttached) {\n    // Only use default global textStyle.color if text is individual.\n    // Otherwise it will use the strategy of attached text color because text may be on a path.\n    fillColor = fillColor || globalTextStyle.color;\n    strokeColor = strokeColor || globalTextStyle.textBorderColor;\n  }\n\n  if (fillColor != null) {\n    textStyle.fill = fillColor;\n  }\n\n  if (strokeColor != null) {\n    textStyle.stroke = strokeColor;\n  }\n\n  var textBorderWidth = retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n\n  if (textBorderWidth != null) {\n    textStyle.lineWidth = textBorderWidth;\n  }\n\n  var textBorderType = retrieve2(textStyleModel.getShallow('textBorderType'), globalTextStyle.textBorderType);\n\n  if (textBorderType != null) {\n    textStyle.lineDash = textBorderType;\n  }\n\n  var textBorderDashOffset = retrieve2(textStyleModel.getShallow('textBorderDashOffset'), globalTextStyle.textBorderDashOffset);\n\n  if (textBorderDashOffset != null) {\n    textStyle.lineDashOffset = textBorderDashOffset;\n  }\n\n  if (!isNotNormal && opacity == null && !inRich) {\n    opacity = opt && opt.defaultOpacity;\n  }\n\n  if (opacity != null) {\n    textStyle.opacity = opacity;\n  } // TODO\n\n\n  if (!isNotNormal && !isAttached) {\n    // Set default finally.\n    if (textStyle.fill == null && opt.inheritColor) {\n      textStyle.fill = opt.inheritColor;\n    }\n  } // Do not use `getFont` here, because merge should be supported, where\n  // part of these properties may be changed in emphasis style, and the\n  // others should remain their original value got from normal style.\n\n\n  for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {\n    var key = TEXT_PROPS_WITH_GLOBAL[i];\n    var val = retrieve2(textStyleModel.getShallow(key), globalTextStyle[key]);\n\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n\n  for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {\n    var key = TEXT_PROPS_SELF[i];\n    var val = textStyleModel.getShallow(key);\n\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n\n  if (textStyle.verticalAlign == null) {\n    var baseline = textStyleModel.getShallow('baseline');\n\n    if (baseline != null) {\n      textStyle.verticalAlign = baseline;\n    }\n  }\n\n  if (!isBlock || !opt.disableBox) {\n    for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {\n      var key = TEXT_PROPS_BOX[i];\n      var val = textStyleModel.getShallow(key);\n\n      if (val != null) {\n        textStyle[key] = val;\n      }\n    }\n\n    var borderType = textStyleModel.getShallow('borderType');\n\n    if (borderType != null) {\n      textStyle.borderDash = borderType;\n    }\n\n    if ((textStyle.backgroundColor === 'auto' || textStyle.backgroundColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.backgroundColor === 'auto') {\n          deprecateReplaceLog('backgroundColor: \\'auto\\'', 'backgroundColor: \\'inherit\\'');\n        }\n      }\n\n      textStyle.backgroundColor = inheritColor;\n    }\n\n    if ((textStyle.borderColor === 'auto' || textStyle.borderColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.borderColor === 'auto') {\n          deprecateReplaceLog('borderColor: \\'auto\\'', 'borderColor: \\'inherit\\'');\n        }\n      }\n\n      textStyle.borderColor = inheritColor;\n    }\n  }\n}\n\nexport function getFont(opt, ecModel) {\n  var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\n  return trim([// FIXME in node-canvas fontWeight is before fontStyle\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n}\nexport var labelInner = makeInner();\nexport function setLabelValueAnimation(label, labelStatesModels, value, getDefaultText) {\n  if (!label) {\n    return;\n  }\n\n  var obj = labelInner(label);\n  obj.prevValue = obj.value;\n  obj.value = value;\n  var normalLabelModel = labelStatesModels.normal;\n  obj.valueAnimation = normalLabelModel.get('valueAnimation');\n\n  if (obj.valueAnimation) {\n    obj.precision = normalLabelModel.get('precision');\n    obj.defaultInterpolatedText = getDefaultText;\n    obj.statesModels = labelStatesModels;\n  }\n}\nexport function animateLabelValue(textEl, dataIndex, data, animatableModel, labelFetcher) {\n  var labelInnerStore = labelInner(textEl);\n\n  if (!labelInnerStore.valueAnimation || labelInnerStore.prevValue === labelInnerStore.value) {\n    // Value not changed, no new label animation\n    return;\n  }\n\n  var defaultInterpolatedText = labelInnerStore.defaultInterpolatedText; // Consider the case that being animating, do not use the `obj.value`,\n  // Otherwise it will jump to the `obj.value` when this new animation started.\n\n  var currValue = retrieve2(labelInnerStore.interpolatedValue, labelInnerStore.prevValue);\n  var targetValue = labelInnerStore.value;\n\n  function during(percent) {\n    var interpolated = interpolateRawValues(data, labelInnerStore.precision, currValue, targetValue, percent);\n    labelInnerStore.interpolatedValue = percent === 1 ? null : interpolated;\n    var labelText = getLabelText({\n      labelDataIndex: dataIndex,\n      labelFetcher: labelFetcher,\n      defaultText: defaultInterpolatedText ? defaultInterpolatedText(interpolated) : interpolated + ''\n    }, labelInnerStore.statesModels, interpolated);\n    setLabelText(textEl, labelText);\n  }\n\n  textEl.percent = 0;\n  (labelInnerStore.prevValue == null ? initProps : updateProps)(textEl, {\n    // percent is used to prevent animation from being aborted #15916\n    percent: 1\n  }, animatableModel, dataIndex, null, during);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray } from 'zrender/lib/core/util.js';\n/* global Float32Array */\n\nvar supportFloat32Array = typeof Float32Array !== 'undefined';\nvar Float32ArrayCtor = !supportFloat32Array ? Array : Float32Array;\nexport function createFloat32Array(arg) {\n  if (isArray(arg)) {\n    // Return self directly if don't support TypedArray.\n    return supportFloat32Array ? new Float32Array(arg) : arg;\n  } // Else is number\n\n\n  return new Float32ArrayCtor(arg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, defaults, keys } from 'zrender/lib/core/util.js';\nimport { parsePercent } from '../util/number.js';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { createFloat32Array } from '../util/vendor.js';\nvar STACK_PREFIX = '__ec_stack_';\n\nfunction getSeriesStackId(seriesModel) {\n  return seriesModel.get('stack') || STACK_PREFIX + seriesModel.seriesIndex;\n}\n\nfunction getAxisKey(axis) {\n  return axis.dim + axis.index;\n}\n/**\n * @return {Object} {width, offset, offsetCenter} If axis.type is not 'category', return undefined.\n */\n\n\nexport function getLayoutOnAxis(opt) {\n  var params = [];\n  var baseAxis = opt.axis;\n  var axisKey = 'axis0';\n\n  if (baseAxis.type !== 'category') {\n    return;\n  }\n\n  var bandWidth = baseAxis.getBandWidth();\n\n  for (var i = 0; i < opt.count || 0; i++) {\n    params.push(defaults({\n      bandWidth: bandWidth,\n      axisKey: axisKey,\n      stackId: STACK_PREFIX + i\n    }, opt));\n  }\n\n  var widthAndOffsets = doCalBarWidthAndOffset(params);\n  var result = [];\n\n  for (var i = 0; i < opt.count; i++) {\n    var item = widthAndOffsets[axisKey][STACK_PREFIX + i];\n    item.offsetCenter = item.offset + item.width / 2;\n    result.push(item);\n  }\n\n  return result;\n}\nexport function prepareLayoutBarSeries(seriesType, ecModel) {\n  var seriesModels = [];\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    // Check series coordinate, do layout for cartesian2d only\n    if (isOnCartesian(seriesModel)) {\n      seriesModels.push(seriesModel);\n    }\n  });\n  return seriesModels;\n}\n/**\n * Map from (baseAxis.dim + '_' + baseAxis.index) to min gap of two adjacent\n * values.\n * This works for time axes, value axes, and log axes.\n * For a single time axis, return value is in the form like\n * {'x_0': [1000000]}.\n * The value of 1000000 is in milliseconds.\n */\n\nfunction getValueAxesMinGaps(barSeries) {\n  /**\n   * Map from axis.index to values.\n   * For a single time axis, axisValues is in the form like\n   * {'x_0': [1495555200000, 1495641600000, 1495728000000]}.\n   * Items in axisValues[x], e.g. 1495555200000, are time values of all\n   * series.\n   */\n  var axisValues = {};\n  each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n\n    if (baseAxis.type !== 'time' && baseAxis.type !== 'value') {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var key = baseAxis.dim + '_' + baseAxis.index;\n    var dimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n    var store = data.getStore();\n\n    for (var i = 0, cnt = store.count(); i < cnt; ++i) {\n      var value = store.get(dimIdx, i);\n\n      if (!axisValues[key]) {\n        // No previous data for the axis\n        axisValues[key] = [value];\n      } else {\n        // No value in previous series\n        axisValues[key].push(value);\n      } // Ignore duplicated time values in the same axis\n\n    }\n  });\n  var axisMinGaps = {};\n\n  for (var key in axisValues) {\n    if (axisValues.hasOwnProperty(key)) {\n      var valuesInAxis = axisValues[key];\n\n      if (valuesInAxis) {\n        // Sort axis values into ascending order to calculate gaps\n        valuesInAxis.sort(function (a, b) {\n          return a - b;\n        });\n        var min = null;\n\n        for (var j = 1; j < valuesInAxis.length; ++j) {\n          var delta = valuesInAxis[j] - valuesInAxis[j - 1];\n\n          if (delta > 0) {\n            // Ignore 0 delta because they are of the same axis value\n            min = min === null ? delta : Math.min(min, delta);\n          }\n        } // Set to null if only have one data\n\n\n        axisMinGaps[key] = min;\n      }\n    }\n  }\n\n  return axisMinGaps;\n}\n\nexport function makeColumnLayout(barSeries) {\n  var axisMinGaps = getValueAxesMinGaps(barSeries);\n  var seriesInfoList = [];\n  each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var axisExtent = baseAxis.getExtent();\n    var bandWidth;\n\n    if (baseAxis.type === 'category') {\n      bandWidth = baseAxis.getBandWidth();\n    } else if (baseAxis.type === 'value' || baseAxis.type === 'time') {\n      var key = baseAxis.dim + '_' + baseAxis.index;\n      var minGap = axisMinGaps[key];\n      var extentSpan = Math.abs(axisExtent[1] - axisExtent[0]);\n      var scale = baseAxis.scale.getExtent();\n      var scaleSpan = Math.abs(scale[1] - scale[0]);\n      bandWidth = minGap ? extentSpan / scaleSpan * minGap : extentSpan; // When there is only one data value\n    } else {\n      var data = seriesModel.getData();\n      bandWidth = Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n    }\n\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\n    var barMinWidth = parsePercent( // barMinWidth by default is 0.5 / 1 in cartesian. Because in value axis,\n    // the auto-calculated bar width might be less than 0.5 / 1.\n    seriesModel.get('barMinWidth') || (isInLargeMode(seriesModel) ? 0.5 : 1), bandWidth);\n    var barGap = seriesModel.get('barGap');\n    var barCategoryGap = seriesModel.get('barCategoryGap');\n    seriesInfoList.push({\n      bandWidth: bandWidth,\n      barWidth: barWidth,\n      barMaxWidth: barMaxWidth,\n      barMinWidth: barMinWidth,\n      barGap: barGap,\n      barCategoryGap: barCategoryGap,\n      axisKey: getAxisKey(baseAxis),\n      stackId: getSeriesStackId(seriesModel)\n    });\n  });\n  return doCalBarWidthAndOffset(seriesInfoList);\n}\n\nfunction doCalBarWidthAndOffset(seriesInfoList) {\n  // Columns info on each category axis. Key is cartesian name\n  var columnsMap = {};\n  each(seriesInfoList, function (seriesInfo, idx) {\n    var axisKey = seriesInfo.axisKey;\n    var bandWidth = seriesInfo.bandWidth;\n    var columnsOnAxis = columnsMap[axisKey] || {\n      bandWidth: bandWidth,\n      remainedWidth: bandWidth,\n      autoWidthCount: 0,\n      categoryGap: null,\n      gap: '20%',\n      stacks: {}\n    };\n    var stacks = columnsOnAxis.stacks;\n    columnsMap[axisKey] = columnsOnAxis;\n    var stackId = seriesInfo.stackId;\n\n    if (!stacks[stackId]) {\n      columnsOnAxis.autoWidthCount++;\n    }\n\n    stacks[stackId] = stacks[stackId] || {\n      width: 0,\n      maxWidth: 0\n    }; // Caution: In a single coordinate system, these barGrid attributes\n    // will be shared by series. Consider that they have default values,\n    // only the attributes set on the last series will work.\n    // Do not change this fact unless there will be a break change.\n\n    var barWidth = seriesInfo.barWidth;\n\n    if (barWidth && !stacks[stackId].width) {\n      // See #6312, do not restrict width.\n      stacks[stackId].width = barWidth;\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n      columnsOnAxis.remainedWidth -= barWidth;\n    }\n\n    var barMaxWidth = seriesInfo.barMaxWidth;\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n    var barMinWidth = seriesInfo.barMinWidth;\n    barMinWidth && (stacks[stackId].minWidth = barMinWidth);\n    var barGap = seriesInfo.barGap;\n    barGap != null && (columnsOnAxis.gap = barGap);\n    var barCategoryGap = seriesInfo.barCategoryGap;\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n  });\n  var result = {};\n  each(columnsMap, function (columnsOnAxis, coordSysName) {\n    result[coordSysName] = {};\n    var stacks = columnsOnAxis.stacks;\n    var bandWidth = columnsOnAxis.bandWidth;\n    var categoryGapPercent = columnsOnAxis.categoryGap;\n\n    if (categoryGapPercent == null) {\n      var columnCount = keys(stacks).length; // More columns in one group\n      // the spaces between group is smaller. Or the column will be too thin.\n\n      categoryGapPercent = Math.max(35 - columnCount * 4, 15) + '%';\n    }\n\n    var categoryGap = parsePercent(categoryGapPercent, bandWidth);\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\n    var remainedWidth = columnsOnAxis.remainedWidth;\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0); // Find if any auto calculated bar exceeded maxBarWidth\n\n    each(stacks, function (column) {\n      var maxWidth = column.maxWidth;\n      var minWidth = column.minWidth;\n\n      if (!column.width) {\n        var finalWidth = autoWidth;\n\n        if (maxWidth && maxWidth < finalWidth) {\n          finalWidth = Math.min(maxWidth, remainedWidth);\n        } // `minWidth` has higher priority. `minWidth` decide that wheter the\n        // bar is able to be visible. So `minWidth` should not be restricted\n        // by `maxWidth` or `remainedWidth` (which is from `bandWidth`). In\n        // the extreme cases for `value` axis, bars are allowed to overlap\n        // with each other if `minWidth` specified.\n\n\n        if (minWidth && minWidth > finalWidth) {\n          finalWidth = minWidth;\n        }\n\n        if (finalWidth !== autoWidth) {\n          column.width = finalWidth;\n          remainedWidth -= finalWidth + barGapPercent * finalWidth;\n          autoWidthCount--;\n        }\n      } else {\n        // `barMinWidth/barMaxWidth` has higher priority than `barWidth`, as\n        // CSS does. Becuase barWidth can be a percent value, where\n        // `barMaxWidth` can be used to restrict the final width.\n        var finalWidth = column.width;\n\n        if (maxWidth) {\n          finalWidth = Math.min(finalWidth, maxWidth);\n        } // `minWidth` has higher priority, as described above\n\n\n        if (minWidth) {\n          finalWidth = Math.max(finalWidth, minWidth);\n        }\n\n        column.width = finalWidth;\n        remainedWidth -= finalWidth + barGapPercent * finalWidth;\n        autoWidthCount--;\n      }\n    }); // Recalculate width again\n\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    var widthSum = 0;\n    var lastColumn;\n    each(stacks, function (column, idx) {\n      if (!column.width) {\n        column.width = autoWidth;\n      }\n\n      lastColumn = column;\n      widthSum += column.width * (1 + barGapPercent);\n    });\n\n    if (lastColumn) {\n      widthSum -= lastColumn.width * barGapPercent;\n    }\n\n    var offset = -widthSum / 2;\n    each(stacks, function (column, stackId) {\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\n        bandWidth: bandWidth,\n        offset: offset,\n        width: column.width\n      };\n      offset += column.width * (1 + barGapPercent);\n    });\n  });\n  return result;\n}\n\nfunction retrieveColumnLayout(barWidthAndOffset, axis, seriesModel) {\n  if (barWidthAndOffset && axis) {\n    var result = barWidthAndOffset[getAxisKey(axis)];\n\n    if (result != null && seriesModel != null) {\n      return result[getSeriesStackId(seriesModel)];\n    }\n\n    return result;\n  }\n}\n\nexport { retrieveColumnLayout };\nexport function layout(seriesType, ecModel) {\n  var seriesModels = prepareLayoutBarSeries(seriesType, ecModel);\n  var barWidthAndOffset = makeColumnLayout(seriesModels);\n  each(seriesModels, function (seriesModel) {\n    var data = seriesModel.getData();\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var stackId = getSeriesStackId(seriesModel);\n    var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\n    var columnOffset = columnLayoutInfo.offset;\n    var columnWidth = columnLayoutInfo.width;\n    data.setLayout({\n      bandWidth: columnLayoutInfo.bandWidth,\n      offset: columnOffset,\n      size: columnWidth\n    });\n  });\n} // TODO: Do not support stack in large mode yet.\n\nexport function createProgressiveLayout(seriesType) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      if (!isOnCartesian(seriesModel)) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      var cartesian = seriesModel.coordinateSystem;\n      var baseAxis = cartesian.getBaseAxis();\n      var valueAxis = cartesian.getOtherAxis(baseAxis);\n      var valueDimIdx = data.getDimensionIndex(data.mapDimension(valueAxis.dim));\n      var baseDimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n      var drawBackground = seriesModel.get('showBackground', true);\n      var valueDim = data.mapDimension(valueAxis.dim);\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n      var stacked = isDimensionStacked(data, valueDim) && !!data.getCalculationInfo('stackedOnSeries');\n      var isValueAxisH = valueAxis.isHorizontal();\n      var valueAxisStart = getValueAxisStart(baseAxis, valueAxis);\n      var isLarge = isInLargeMode(seriesModel);\n      var barMinHeight = seriesModel.get('barMinHeight') || 0;\n      var stackedDimIdx = stackResultDim && data.getDimensionIndex(stackResultDim); // Layout info.\n\n      var columnWidth = data.getLayout('size');\n      var columnOffset = data.getLayout('offset');\n      return {\n        progress: function (params, data) {\n          var count = params.count;\n          var largePoints = isLarge && createFloat32Array(count * 3);\n          var largeBackgroundPoints = isLarge && drawBackground && createFloat32Array(count * 3);\n          var largeDataIndices = isLarge && createFloat32Array(count);\n          var coordLayout = cartesian.master.getRect();\n          var bgSize = isValueAxisH ? coordLayout.width : coordLayout.height;\n          var dataIndex;\n          var store = data.getStore();\n          var idxOffset = 0;\n\n          while ((dataIndex = params.next()) != null) {\n            var value = store.get(stacked ? stackedDimIdx : valueDimIdx, dataIndex);\n            var baseValue = store.get(baseDimIdx, dataIndex);\n            var baseCoord = valueAxisStart;\n            var startValue = void 0; // Because of the barMinHeight, we can not use the value in\n            // stackResultDimension directly.\n\n            if (stacked) {\n              startValue = +value - store.get(valueDimIdx, dataIndex);\n            }\n\n            var x = void 0;\n            var y = void 0;\n            var width = void 0;\n            var height = void 0;\n\n            if (isValueAxisH) {\n              var coord = cartesian.dataToPoint([value, baseValue]);\n\n              if (stacked) {\n                var startCoord = cartesian.dataToPoint([startValue, baseValue]);\n                baseCoord = startCoord[0];\n              }\n\n              x = baseCoord;\n              y = coord[1] + columnOffset;\n              width = coord[0] - baseCoord;\n              height = columnWidth;\n\n              if (Math.abs(width) < barMinHeight) {\n                width = (width < 0 ? -1 : 1) * barMinHeight;\n              }\n            } else {\n              var coord = cartesian.dataToPoint([baseValue, value]);\n\n              if (stacked) {\n                var startCoord = cartesian.dataToPoint([baseValue, startValue]);\n                baseCoord = startCoord[1];\n              }\n\n              x = coord[0] + columnOffset;\n              y = baseCoord;\n              width = columnWidth;\n              height = coord[1] - baseCoord;\n\n              if (Math.abs(height) < barMinHeight) {\n                // Include zero to has a positive bar\n                height = (height <= 0 ? -1 : 1) * barMinHeight;\n              }\n            }\n\n            if (!isLarge) {\n              data.setItemLayout(dataIndex, {\n                x: x,\n                y: y,\n                width: width,\n                height: height\n              });\n            } else {\n              largePoints[idxOffset] = x;\n              largePoints[idxOffset + 1] = y;\n              largePoints[idxOffset + 2] = isValueAxisH ? width : height;\n\n              if (largeBackgroundPoints) {\n                largeBackgroundPoints[idxOffset] = isValueAxisH ? coordLayout.x : x;\n                largeBackgroundPoints[idxOffset + 1] = isValueAxisH ? y : coordLayout.y;\n                largeBackgroundPoints[idxOffset + 2] = bgSize;\n              }\n\n              largeDataIndices[dataIndex] = dataIndex;\n            }\n\n            idxOffset += 3;\n          }\n\n          if (isLarge) {\n            data.setLayout({\n              largePoints: largePoints,\n              largeDataIndices: largeDataIndices,\n              largeBackgroundPoints: largeBackgroundPoints,\n              valueAxisHorizontal: isValueAxisH\n            });\n          }\n        }\n      };\n    }\n  };\n}\n\nfunction isOnCartesian(seriesModel) {\n  return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\n}\n\nfunction isInLargeMode(seriesModel) {\n  return seriesModel.pipelineContext && seriesModel.pipelineContext.large;\n} // See cases in `test/bar-start.html` and `#7412`, `#8747`.\n\n\nfunction getValueAxisStart(baseAxis, valueAxis) {\n  return valueAxis.toGlobalCoord(valueAxis.dataToCoord(valueAxis.type === 'log' ? 1 : 0));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from './Model.js';\nimport * as componentUtil from '../util/component.js';\nimport { enableClassManagement, parseClassType, isExtendedClass, mountExtend } from '../util/clazz.js';\nimport { makeInner, queryReferringComponents } from '../util/model.js';\nimport * as layout from '../util/layout.js';\nvar inner = makeInner();\n\nvar ComponentModel =\n/** @class */\nfunction (_super) {\n  __extends(ComponentModel, _super);\n\n  function ComponentModel(option, parentModel, ecModel) {\n    var _this = _super.call(this, option, parentModel, ecModel) || this;\n\n    _this.uid = componentUtil.getUID('ec_cpt_model');\n    return _this;\n  }\n\n  ComponentModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  };\n\n  ComponentModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n    var layoutMode = layout.fetchLayoutMode(this);\n    var inputPositionParams = layoutMode ? layout.getLayoutParams(option) : {};\n    var themeModel = ecModel.getTheme();\n    zrUtil.merge(option, themeModel.get(this.mainType));\n    zrUtil.merge(option, this.getDefaultOption());\n\n    if (layoutMode) {\n      layout.mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  };\n\n  ComponentModel.prototype.mergeOption = function (option, ecModel) {\n    zrUtil.merge(this.option, option, true);\n    var layoutMode = layout.fetchLayoutMode(this);\n\n    if (layoutMode) {\n      layout.mergeLayoutParam(this.option, option, layoutMode);\n    }\n  };\n  /**\n   * Called immediately after `init` or `mergeOption` of this instance called.\n   */\n\n\n  ComponentModel.prototype.optionUpdated = function (newCptOption, isInit) {};\n  /**\n   * [How to declare defaultOption]:\n   *\n   * (A) If using class declaration in typescript (since echarts 5):\n   * ```ts\n   * import {ComponentOption} from '../model/option.js';\n   * export interface XxxOption extends ComponentOption {\n   *     aaa: number\n   * }\n   * export class XxxModel extends Component {\n   *     static type = 'xxx';\n   *     static defaultOption: XxxOption = {\n   *         aaa: 123\n   *     }\n   * }\n   * Component.registerClass(XxxModel);\n   * ```\n   * ```ts\n   * import {inheritDefaultOption} from '../util/component.js';\n   * import {XxxModel, XxxOption} from './XxxModel.js';\n   * export interface XxxSubOption extends XxxOption {\n   *     bbb: number\n   * }\n   * class XxxSubModel extends XxxModel {\n   *     static defaultOption: XxxSubOption = inheritDefaultOption(XxxModel.defaultOption, {\n   *         bbb: 456\n   *     })\n   *     fn() {\n   *         let opt = this.getDefaultOption();\n   *         // opt is {aaa: 123, bbb: 456}\n   *     }\n   * }\n   * ```\n   *\n   * (B) If using class extend (previous approach in echarts 3 & 4):\n   * ```js\n   * let XxxComponent = Component.extend({\n   *     defaultOption: {\n   *         xx: 123\n   *     }\n   * })\n   * ```\n   * ```js\n   * let XxxSubComponent = XxxComponent.extend({\n   *     defaultOption: {\n   *         yy: 456\n   *     },\n   *     fn: function () {\n   *         let opt = this.getDefaultOption();\n   *         // opt is {xx: 123, yy: 456}\n   *     }\n   * })\n   * ```\n   */\n\n\n  ComponentModel.prototype.getDefaultOption = function () {\n    var ctor = this.constructor; // If using class declaration, it is different to travel super class\n    // in legacy env and auto merge defaultOption. So if using class\n    // declaration, defaultOption should be merged manually.\n\n    if (!isExtendedClass(ctor)) {\n      // When using ts class, defaultOption must be declared as static.\n      return ctor.defaultOption;\n    } // FIXME: remove this approach?\n\n\n    var fields = inner(this);\n\n    if (!fields.defaultOption) {\n      var optList = [];\n      var clz = ctor;\n\n      while (clz) {\n        var opt = clz.prototype.defaultOption;\n        opt && optList.push(opt);\n        clz = clz.superClass;\n      }\n\n      var defaultOption = {};\n\n      for (var i = optList.length - 1; i >= 0; i--) {\n        defaultOption = zrUtil.merge(defaultOption, optList[i], true);\n      }\n\n      fields.defaultOption = defaultOption;\n    }\n\n    return fields.defaultOption;\n  };\n  /**\n   * Notice: always force to input param `useDefault` in case that forget to consider it.\n   * The same behavior as `modelUtil.parseFinder`.\n   *\n   * @param useDefault In many cases like series refer axis and axis refer grid,\n   *        If axis index / axis id not specified, use the first target as default.\n   *        In other cases like dataZoom refer axis, if not specified, measn no refer.\n   */\n\n\n  ComponentModel.prototype.getReferringComponents = function (mainType, opt) {\n    var indexKey = mainType + 'Index';\n    var idKey = mainType + 'Id';\n    return queryReferringComponents(this.ecModel, mainType, {\n      index: this.get(indexKey, true),\n      id: this.get(idKey, true)\n    }, opt);\n  };\n\n  ComponentModel.prototype.getBoxLayoutParams = function () {\n    // Consider itself having box layout configs.\n    var boxLayoutModel = this;\n    return {\n      left: boxLayoutModel.get('left'),\n      top: boxLayoutModel.get('top'),\n      right: boxLayoutModel.get('right'),\n      bottom: boxLayoutModel.get('bottom'),\n      width: boxLayoutModel.get('width'),\n      height: boxLayoutModel.get('height')\n    };\n  };\n  /**\n   * Get key for zlevel.\n   * If developers don't configure zlevel. We will assign zlevel to series based on the key.\n   * For example, lines with trail effect and progressive series will in an individual zlevel.\n   */\n\n\n  ComponentModel.prototype.getZLevelKey = function () {\n    return '';\n  };\n\n  ComponentModel.prototype.setZLevel = function (zlevel) {\n    this.option.zlevel = zlevel;\n  };\n\n  ComponentModel.protoInitialize = function () {\n    var proto = ComponentModel.prototype;\n    proto.type = 'component';\n    proto.id = '';\n    proto.name = '';\n    proto.mainType = '';\n    proto.subType = '';\n    proto.componentIndex = 0;\n  }();\n\n  return ComponentModel;\n}(Model);\n\nmountExtend(ComponentModel, Model);\nenableClassManagement(ComponentModel);\ncomponentUtil.enableSubTypeDefaulter(ComponentModel);\ncomponentUtil.enableTopologicalTravel(ComponentModel, getDependencies);\n\nfunction getDependencies(componentType) {\n  var deps = [];\n  zrUtil.each(ComponentModel.getClassesByMainType(componentType), function (clz) {\n    deps = deps.concat(clz.dependencies || clz.prototype.dependencies || []);\n  }); // Ensure main type.\n\n  deps = zrUtil.map(deps, function (type) {\n    return parseClassType(type).main;\n  }); // Hack dataset for convenience.\n\n  if (componentType !== 'dataset' && zrUtil.indexOf(deps, 'dataset') <= 0) {\n    deps.unshift('dataset');\n  }\n\n  return deps;\n}\n\nexport default ComponentModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport makeStyleMapper from './makeStyleMapper.js';\nexport var AREA_STYLE_KEY_MAP = [['fill', 'color'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['opacity'], ['shadowColor'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n];\nvar getAreaStyle = makeStyleMapper(AREA_STYLE_KEY_MAP);\n\nvar AreaStyleMixin =\n/** @class */\nfunction () {\n  function AreaStyleMixin() {}\n\n  AreaStyleMixin.prototype.getAreaStyle = function (excludes, includes) {\n    return getAreaStyle(this, excludes, includes);\n  };\n\n  return AreaStyleMixin;\n}();\n\n;\nexport { AreaStyleMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getFont } from '../../label/labelStyle.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nvar PATH_COLOR = ['textStyle', 'color'];\nvar textStyleParams = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'padding', 'lineHeight', 'rich', 'width', 'height', 'overflow']; // TODO Performance improvement?\n\nvar tmpText = new ZRText();\n\nvar TextStyleMixin =\n/** @class */\nfunction () {\n  function TextStyleMixin() {}\n  /**\n   * Get color property or get color from option.textStyle.color\n   */\n  // TODO Callback\n\n\n  TextStyleMixin.prototype.getTextColor = function (isEmphasis) {\n    var ecModel = this.ecModel;\n    return this.getShallow('color') || (!isEmphasis && ecModel ? ecModel.get(PATH_COLOR) : null);\n  };\n  /**\n   * Create font string from fontStyle, fontWeight, fontSize, fontFamily\n   * @return {string}\n   */\n\n\n  TextStyleMixin.prototype.getFont = function () {\n    return getFont({\n      fontStyle: this.getShallow('fontStyle'),\n      fontWeight: this.getShallow('fontWeight'),\n      fontSize: this.getShallow('fontSize'),\n      fontFamily: this.getShallow('fontFamily')\n    }, this.ecModel);\n  };\n\n  TextStyleMixin.prototype.getTextRect = function (text) {\n    var style = {\n      text: text,\n      verticalAlign: this.getShallow('verticalAlign') || this.getShallow('baseline')\n    };\n\n    for (var i = 0; i < textStyleParams.length; i++) {\n      style[textStyleParams[i]] = this.getShallow(textStyleParams[i]);\n    }\n\n    tmpText.useStyle(style);\n    tmpText.update();\n    return tmpText.getBoundingRect();\n  };\n\n  return TextStyleMixin;\n}();\n\n;\nexport default TextStyleMixin;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport env from 'zrender/lib/core/env.js';\nimport { enableClassExtend, enableClassCheck } from '../util/clazz.js';\nimport { AreaStyleMixin } from './mixin/areaStyle.js';\nimport TextStyleMixin from './mixin/textStyle.js';\nimport { LineStyleMixin } from './mixin/lineStyle.js';\nimport { ItemStyleMixin } from './mixin/itemStyle.js';\nimport { mixin, clone, merge } from 'zrender/lib/core/util.js';\n\nvar Model =\n/** @class */\nfunction () {\n  function Model(option, parentModel, ecModel) {\n    this.parentModel = parentModel;\n    this.ecModel = ecModel;\n    this.option = option; // Simple optimization\n    // if (this.init) {\n    //     if (arguments.length <= 4) {\n    //         this.init(option, parentModel, ecModel, extraOpt);\n    //     }\n    //     else {\n    //         this.init.apply(this, arguments);\n    //     }\n    // }\n  }\n\n  Model.prototype.init = function (option, parentModel, ecModel) {\n    var rest = [];\n\n    for (var _i = 3; _i < arguments.length; _i++) {\n      rest[_i - 3] = arguments[_i];\n    }\n  };\n  /**\n   * Merge the input option to me.\n   */\n\n\n  Model.prototype.mergeOption = function (option, ecModel) {\n    merge(this.option, option, true);\n  }; // `path` can be 'a.b.c', so the return value type have to be `ModelOption`\n  // TODO: TYPE strict key check?\n  // get(path: string | string[], ignoreParent?: boolean): ModelOption;\n\n\n  Model.prototype.get = function (path, ignoreParent) {\n    if (path == null) {\n      return this.option;\n    }\n\n    return this._doGet(this.parsePath(path), !ignoreParent && this.parentModel);\n  };\n\n  Model.prototype.getShallow = function (key, ignoreParent) {\n    var option = this.option;\n    var val = option == null ? option : option[key];\n\n    if (val == null && !ignoreParent) {\n      var parentModel = this.parentModel;\n\n      if (parentModel) {\n        // FIXME:TS do not know how to make it works\n        val = parentModel.getShallow(key);\n      }\n    }\n\n    return val;\n  }; // `path` can be 'a.b.c', so the return value type have to be `Model<ModelOption>`\n  // getModel(path: string | string[], parentModel?: Model): Model;\n  // TODO 'a.b.c' is deprecated\n\n\n  Model.prototype.getModel = function (path, parentModel) {\n    var hasPath = path != null;\n    var pathFinal = hasPath ? this.parsePath(path) : null;\n    var obj = hasPath ? this._doGet(pathFinal) : this.option;\n    parentModel = parentModel || this.parentModel && this.parentModel.getModel(this.resolveParentPath(pathFinal));\n    return new Model(obj, parentModel, this.ecModel);\n  };\n  /**\n   * If model has option\n   */\n\n\n  Model.prototype.isEmpty = function () {\n    return this.option == null;\n  };\n\n  Model.prototype.restoreData = function () {}; // Pending\n\n\n  Model.prototype.clone = function () {\n    var Ctor = this.constructor;\n    return new Ctor(clone(this.option));\n  }; // setReadOnly(properties): void {\n  // clazzUtil.setReadOnly(this, properties);\n  // }\n  // If path is null/undefined, return null/undefined.\n\n\n  Model.prototype.parsePath = function (path) {\n    if (typeof path === 'string') {\n      return path.split('.');\n    }\n\n    return path;\n  }; // Resolve path for parent. Perhaps useful when parent use a different property.\n  // Default to be a identity resolver.\n  // Can be modified to a different resolver.\n\n\n  Model.prototype.resolveParentPath = function (path) {\n    return path;\n  }; // FIXME:TS check whether put this method here\n\n\n  Model.prototype.isAnimationEnabled = function () {\n    if (!env.node && this.option) {\n      if (this.option.animation != null) {\n        return !!this.option.animation;\n      } else if (this.parentModel) {\n        return this.parentModel.isAnimationEnabled();\n      }\n    }\n  };\n\n  Model.prototype._doGet = function (pathArr, parentModel) {\n    var obj = this.option;\n\n    if (!pathArr) {\n      return obj;\n    }\n\n    for (var i = 0; i < pathArr.length; i++) {\n      // Ignore empty\n      if (!pathArr[i]) {\n        continue;\n      } // obj could be number/string/... (like 0)\n\n\n      obj = obj && typeof obj === 'object' ? obj[pathArr[i]] : null;\n\n      if (obj == null) {\n        break;\n      }\n    }\n\n    if (obj == null && parentModel) {\n      obj = parentModel._doGet(this.resolveParentPath(pathArr), parentModel.parentModel);\n    }\n\n    return obj;\n  };\n\n  return Model;\n}();\n\n; // Enable Model.extend.\n\nenableClassExtend(Model);\nenableClassCheck(Model);\nmixin(Model, LineStyleMixin);\nmixin(Model, ItemStyleMixin);\nmixin(Model, AreaStyleMixin);\nmixin(Model, TextStyleMixin);\nexport default Model;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { setAsPrimitive, map, isTypedArray, assert, each, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createSource, cloneSourceShallow } from '../Source.js';\nimport { SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ORIGINAL } from '../../util/types.js';\nimport { querySeriesUpstreamDatasetModel, queryDatasetUpstreamDatasetModels } from './sourceHelper.js';\nimport { applyDataTransform } from './transform.js';\nimport DataStore from '../DataStore.js';\nimport { DefaultDataProvider } from './dataProvider.js';\n/**\n * [REQUIREMENT_MEMO]:\n * (0) `metaRawOption` means `dimensions`/`sourceHeader`/`seriesLayoutBy` in raw option.\n * (1) Keep support the feature: `metaRawOption` can be specified both on `series` and\n * `root-dataset`. Them on `series` has higher priority.\n * (2) Do not support to set `metaRawOption` on a `non-root-dataset`, because it might\n * confuse users: whether those props indicate how to visit the upstream source or visit\n * the transform result source, and some transforms has nothing to do with these props,\n * and some transforms might have multiple upstream.\n * (3) Transforms should specify `metaRawOption` in each output, just like they can be\n * declared in `root-dataset`.\n * (4) At present only support visit source in `SERIES_LAYOUT_BY_COLUMN` in transforms.\n * That is for reducing complexity in transfroms.\n * PENDING: Whether to provide transposition transform?\n *\n * [IMPLEMENTAION_MEMO]:\n * \"sourceVisitConfig\" are calculated from `metaRawOption` and `data`.\n * They will not be calculated until `source` is about to be visited (to prevent from\n * duplicate calcuation). `source` is visited only in series and input to transforms.\n *\n * [DIMENSION_INHERIT_RULE]:\n * By default the dimensions are inherited from ancestors, unless a transform return\n * a new dimensions definition.\n * Consider the case:\n * ```js\n * dataset: [{\n *     source: [ ['Product', 'Sales', 'Prise'], ['Cookies', 321, 44.21], ...]\n * }, {\n *     transform: { type: 'filter', ... }\n * }]\n * dataset: [{\n *     dimension: ['Product', 'Sales', 'Prise'],\n *     source: [ ['Cookies', 321, 44.21], ...]\n * }, {\n *     transform: { type: 'filter', ... }\n * }]\n * ```\n * The two types of option should have the same behavior after transform.\n *\n *\n * [SCENARIO]:\n * (1) Provide source data directly:\n * ```js\n * series: {\n *     encode: {...},\n *     dimensions: [...]\n *     seriesLayoutBy: 'row',\n *     data: [[...]]\n * }\n * ```\n * (2) Series refer to dataset.\n * ```js\n * series: [{\n *     encode: {...}\n *     // Ignore datasetIndex means `datasetIndex: 0`\n *     // and the dimensions defination in dataset is used\n * }, {\n *     encode: {...},\n *     seriesLayoutBy: 'column',\n *     datasetIndex: 1\n * }]\n * ```\n * (3) dataset transform\n * ```js\n * dataset: [{\n *     source: [...]\n * }, {\n *     source: [...]\n * }, {\n *     // By default from 0.\n *     transform: { type: 'filter', config: {...} }\n * }, {\n *     // Piped.\n *     transform: [\n *         { type: 'filter', config: {...} },\n *         { type: 'sort', config: {...} }\n *     ]\n * }, {\n *     id: 'regressionData',\n *     fromDatasetIndex: 1,\n *     // Third-party transform\n *     transform: { type: 'ecStat:regression', config: {...} }\n * }, {\n *     // retrieve the extra result.\n *     id: 'regressionFormula',\n *     fromDatasetId: 'regressionData',\n *     fromTransformResult: 1\n * }]\n * ```\n */\n\nvar SourceManager =\n/** @class */\nfunction () {\n  function SourceManager(sourceHost) {\n    // Cached source. Do not repeat calculating if not dirty.\n    this._sourceList = [];\n    this._storeList = []; // version sign of each upstream source manager.\n\n    this._upstreamSignList = [];\n    this._versionSignBase = 0;\n    this._dirty = true;\n    this._sourceHost = sourceHost;\n  }\n  /**\n   * Mark dirty.\n   */\n\n\n  SourceManager.prototype.dirty = function () {\n    this._setLocalSource([], []);\n\n    this._storeList = [];\n    this._dirty = true;\n  };\n\n  SourceManager.prototype._setLocalSource = function (sourceList, upstreamSignList) {\n    this._sourceList = sourceList;\n    this._upstreamSignList = upstreamSignList;\n    this._versionSignBase++;\n\n    if (this._versionSignBase > 9e10) {\n      this._versionSignBase = 0;\n    }\n  };\n  /**\n   * For detecting whether the upstream source is dirty, so that\n   * the local cached source (in `_sourceList`) should be discarded.\n   */\n\n\n  SourceManager.prototype._getVersionSign = function () {\n    return this._sourceHost.uid + '_' + this._versionSignBase;\n  };\n  /**\n   * Always return a source instance. Otherwise throw error.\n   */\n\n\n  SourceManager.prototype.prepareSource = function () {\n    // For the case that call `setOption` multiple time but no data changed,\n    // cache the result source to prevent from repeating transform.\n    if (this._isDirty()) {\n      this._createSource();\n\n      this._dirty = false;\n    }\n  };\n\n  SourceManager.prototype._createSource = function () {\n    this._setLocalSource([], []);\n\n    var sourceHost = this._sourceHost;\n\n    var upSourceMgrList = this._getUpstreamSourceManagers();\n\n    var hasUpstream = !!upSourceMgrList.length;\n    var resultSourceList;\n    var upstreamSignList;\n\n    if (isSeries(sourceHost)) {\n      var seriesModel = sourceHost;\n      var data = void 0;\n      var sourceFormat = void 0;\n      var upSource = void 0; // Has upstream dataset\n\n      if (hasUpstream) {\n        var upSourceMgr = upSourceMgrList[0];\n        upSourceMgr.prepareSource();\n        upSource = upSourceMgr.getSource();\n        data = upSource.data;\n        sourceFormat = upSource.sourceFormat;\n        upstreamSignList = [upSourceMgr._getVersionSign()];\n      } // Series data is from own.\n      else {\n          data = seriesModel.get('data', true);\n          sourceFormat = isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL;\n          upstreamSignList = [];\n        } // See [REQUIREMENT_MEMO], merge settings on series and parent dataset if it is root.\n\n\n      var newMetaRawOption = this._getSourceMetaRawOption() || {};\n      var upMetaRawOption = upSource && upSource.metaRawOption || {};\n      var seriesLayoutBy = retrieve2(newMetaRawOption.seriesLayoutBy, upMetaRawOption.seriesLayoutBy) || null;\n      var sourceHeader = retrieve2(newMetaRawOption.sourceHeader, upMetaRawOption.sourceHeader); // Note here we should not use `upSource.dimensionsDefine`. Consider the case:\n      // `upSource.dimensionsDefine` is detected by `seriesLayoutBy: 'column'`,\n      // but series need `seriesLayoutBy: 'row'`.\n\n      var dimensions = retrieve2(newMetaRawOption.dimensions, upMetaRawOption.dimensions); // We share source with dataset as much as possible\n      // to avoid extra memroy cost of high dimensional data.\n\n      var needsCreateSource = seriesLayoutBy !== upMetaRawOption.seriesLayoutBy || !!sourceHeader !== !!upMetaRawOption.sourceHeader || dimensions;\n      resultSourceList = needsCreateSource ? [createSource(data, {\n        seriesLayoutBy: seriesLayoutBy,\n        sourceHeader: sourceHeader,\n        dimensions: dimensions\n      }, sourceFormat)] : [];\n    } else {\n      var datasetModel = sourceHost; // Has upstream dataset.\n\n      if (hasUpstream) {\n        var result = this._applyTransform(upSourceMgrList);\n\n        resultSourceList = result.sourceList;\n        upstreamSignList = result.upstreamSignList;\n      } // Is root dataset.\n      else {\n          var sourceData = datasetModel.get('source', true);\n          resultSourceList = [createSource(sourceData, this._getSourceMetaRawOption(), null)];\n          upstreamSignList = [];\n        }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(resultSourceList && upstreamSignList);\n    }\n\n    this._setLocalSource(resultSourceList, upstreamSignList);\n  };\n\n  SourceManager.prototype._applyTransform = function (upMgrList) {\n    var datasetModel = this._sourceHost;\n    var transformOption = datasetModel.get('transform', true);\n    var fromTransformResult = datasetModel.get('fromTransformResult', true);\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(fromTransformResult != null || transformOption != null);\n    }\n\n    if (fromTransformResult != null) {\n      var errMsg = '';\n\n      if (upMgrList.length !== 1) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'When using `fromTransformResult`, there should be only one upstream dataset';\n        }\n\n        doThrow(errMsg);\n      }\n    }\n\n    var sourceList;\n    var upSourceList = [];\n    var upstreamSignList = [];\n    each(upMgrList, function (upMgr) {\n      upMgr.prepareSource();\n      var upSource = upMgr.getSource(fromTransformResult || 0);\n      var errMsg = '';\n\n      if (fromTransformResult != null && !upSource) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Can not retrieve result by `fromTransformResult`: ' + fromTransformResult;\n        }\n\n        doThrow(errMsg);\n      }\n\n      upSourceList.push(upSource);\n      upstreamSignList.push(upMgr._getVersionSign());\n    });\n\n    if (transformOption) {\n      sourceList = applyDataTransform(transformOption, upSourceList, {\n        datasetIndex: datasetModel.componentIndex\n      });\n    } else if (fromTransformResult != null) {\n      sourceList = [cloneSourceShallow(upSourceList[0])];\n    }\n\n    return {\n      sourceList: sourceList,\n      upstreamSignList: upstreamSignList\n    };\n  };\n\n  SourceManager.prototype._isDirty = function () {\n    if (this._dirty) {\n      return true;\n    } // All sourceList is from the some upsteam.\n\n\n    var upSourceMgrList = this._getUpstreamSourceManagers();\n\n    for (var i = 0; i < upSourceMgrList.length; i++) {\n      var upSrcMgr = upSourceMgrList[i];\n\n      if ( // Consider the case that there is ancestor diry, call it recursively.\n      // The performance is probably not an issue because usually the chain is not long.\n      upSrcMgr._isDirty() || this._upstreamSignList[i] !== upSrcMgr._getVersionSign()) {\n        return true;\n      }\n    }\n  };\n  /**\n   * @param sourceIndex By defualt 0, means \"main source\".\n   *                    Most cases there is only one source.\n   */\n\n\n  SourceManager.prototype.getSource = function (sourceIndex) {\n    sourceIndex = sourceIndex || 0;\n    var source = this._sourceList[sourceIndex];\n\n    if (!source) {\n      // Series may share source instance with dataset.\n      var upSourceMgrList = this._getUpstreamSourceManagers();\n\n      return upSourceMgrList[0] && upSourceMgrList[0].getSource(sourceIndex);\n    }\n\n    return source;\n  };\n  /**\n   *\n   * Get a data store which can be shared across series.\n   * Only available for series.\n   *\n   * @param seriesDimRequest Dimensions that are generated in series.\n   *        Should have been sorted by `storeDimIndex` asc.\n   */\n\n\n  SourceManager.prototype.getSharedDataStore = function (seriesDimRequest) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(isSeries(this._sourceHost), 'Can only call getDataStore on series source manager.');\n    }\n\n    var schema = seriesDimRequest.makeStoreSchema();\n    return this._innerGetDataStore(schema.dimensions, seriesDimRequest.source, schema.hash);\n  };\n\n  SourceManager.prototype._innerGetDataStore = function (storeDims, seriesSource, sourceReadKey) {\n    // TODO Can use other sourceIndex?\n    var sourceIndex = 0;\n    var storeList = this._storeList;\n    var cachedStoreMap = storeList[sourceIndex];\n\n    if (!cachedStoreMap) {\n      cachedStoreMap = storeList[sourceIndex] = {};\n    }\n\n    var cachedStore = cachedStoreMap[sourceReadKey];\n\n    if (!cachedStore) {\n      var upSourceMgr = this._getUpstreamSourceManagers()[0];\n\n      if (isSeries(this._sourceHost) && upSourceMgr) {\n        cachedStore = upSourceMgr._innerGetDataStore(storeDims, seriesSource, sourceReadKey);\n      } else {\n        cachedStore = new DataStore(); // Always create store from source of series.\n\n        cachedStore.initData(new DefaultDataProvider(seriesSource, storeDims.length), storeDims);\n      }\n\n      cachedStoreMap[sourceReadKey] = cachedStore;\n    }\n\n    return cachedStore;\n  };\n  /**\n   * PEDING: Is it fast enough?\n   * If no upstream, return empty array.\n   */\n\n\n  SourceManager.prototype._getUpstreamSourceManagers = function () {\n    // Always get the relationship from the raw option.\n    // Do not cache the link of the dependency graph, so that\n    // no need to update them when change happen.\n    var sourceHost = this._sourceHost;\n\n    if (isSeries(sourceHost)) {\n      var datasetModel = querySeriesUpstreamDatasetModel(sourceHost);\n      return !datasetModel ? [] : [datasetModel.getSourceManager()];\n    } else {\n      return map(queryDatasetUpstreamDatasetModels(sourceHost), function (datasetModel) {\n        return datasetModel.getSourceManager();\n      });\n    }\n  };\n\n  SourceManager.prototype._getSourceMetaRawOption = function () {\n    var sourceHost = this._sourceHost;\n    var seriesLayoutBy;\n    var sourceHeader;\n    var dimensions;\n\n    if (isSeries(sourceHost)) {\n      seriesLayoutBy = sourceHost.get('seriesLayoutBy', true);\n      sourceHeader = sourceHost.get('sourceHeader', true);\n      dimensions = sourceHost.get('dimensions', true);\n    } // See [REQUIREMENT_MEMO], `non-root-dataset` do not support them.\n    else if (!this._getUpstreamSourceManagers().length) {\n        var model = sourceHost;\n        seriesLayoutBy = model.get('seriesLayoutBy', true);\n        sourceHeader = model.get('sourceHeader', true);\n        dimensions = model.get('dimensions', true);\n      }\n\n    return {\n      seriesLayoutBy: seriesLayoutBy,\n      sourceHeader: sourceHeader,\n      dimensions: dimensions\n    };\n  };\n\n  return SourceManager;\n}();\n\nexport { SourceManager }; // Call this method after `super.init` and `super.mergeOption` to\n// disable the transform merge, but do not disable transfrom clone from rawOption.\n\nexport function disableTransformOptionMerge(datasetModel) {\n  var transformOption = datasetModel.option.transform;\n  transformOption && setAsPrimitive(datasetModel.option.transform);\n}\n\nfunction isSeries(sourceHost) {\n  // Avoid circular dependency with Series.ts\n  return sourceHost.mainType === 'series';\n}\n\nfunction doThrow(errMsg) {\n  throw new Error(errMsg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { trim, isArray, each, reduce } from 'zrender/lib/core/util.js';\nimport { retrieveVisualColorForTooltipMarker, createTooltipMarkup } from './tooltipMarkup.js';\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isNameSpecified } from '../../util/model.js';\nexport function defaultSeriesFormatTooltip(opt) {\n  var series = opt.series;\n  var dataIndex = opt.dataIndex;\n  var multipleSeries = opt.multipleSeries;\n  var data = series.getData();\n  var tooltipDims = data.mapDimensionsAll('defaultedTooltip');\n  var tooltipDimLen = tooltipDims.length;\n  var value = series.getRawValue(dataIndex);\n  var isValueArr = isArray(value);\n  var markerColor = retrieveVisualColorForTooltipMarker(series, dataIndex); // Complicated rule for pretty tooltip.\n\n  var inlineValue;\n  var inlineValueType;\n  var subBlocks;\n  var sortParam;\n\n  if (tooltipDimLen > 1 || isValueArr && !tooltipDimLen) {\n    var formatArrResult = formatTooltipArrayValue(value, series, dataIndex, tooltipDims, markerColor);\n    inlineValue = formatArrResult.inlineValues;\n    inlineValueType = formatArrResult.inlineValueTypes;\n    subBlocks = formatArrResult.blocks; // Only support tooltip sort by the first inline value. It's enough in most cases.\n\n    sortParam = formatArrResult.inlineValues[0];\n  } else if (tooltipDimLen) {\n    var dimInfo = data.getDimensionInfo(tooltipDims[0]);\n    sortParam = inlineValue = retrieveRawValue(data, dataIndex, tooltipDims[0]);\n    inlineValueType = dimInfo.type;\n  } else {\n    sortParam = inlineValue = isValueArr ? value[0] : value;\n  } // Do not show generated series name. It might not be readable.\n\n\n  var seriesNameSpecified = isNameSpecified(series);\n  var seriesName = seriesNameSpecified && series.name || '';\n  var itemName = data.getName(dataIndex);\n  var inlineName = multipleSeries ? seriesName : itemName;\n  return createTooltipMarkup('section', {\n    header: seriesName,\n    // When series name not specified, do not show a header line with only '-'.\n    // This case alway happen in tooltip.trigger: 'item'.\n    noHeader: multipleSeries || !seriesNameSpecified,\n    sortParam: sortParam,\n    blocks: [createTooltipMarkup('nameValue', {\n      markerType: 'item',\n      markerColor: markerColor,\n      // Do not mix display seriesName and itemName in one tooltip,\n      // which might confuses users.\n      name: inlineName,\n      // name dimension might be auto assigned, where the name might\n      // be not readable. So we check trim here.\n      noName: !trim(inlineName),\n      value: inlineValue,\n      valueType: inlineValueType\n    })].concat(subBlocks || [])\n  });\n}\n\nfunction formatTooltipArrayValue(value, series, dataIndex, tooltipDims, colorStr) {\n  // check: category-no-encode-has-axis-data in dataset.html\n  var data = series.getData();\n  var isValueMultipleLine = reduce(value, function (isValueMultipleLine, val, idx) {\n    var dimItem = data.getDimensionInfo(idx);\n    return isValueMultipleLine = isValueMultipleLine || dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\n  }, false);\n  var inlineValues = [];\n  var inlineValueTypes = [];\n  var blocks = [];\n  tooltipDims.length ? each(tooltipDims, function (dim) {\n    setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\n  }) // By default, all dims is used on tooltip.\n  : each(value, setEachItem);\n\n  function setEachItem(val, dim) {\n    var dimInfo = data.getDimensionInfo(dim); // If `dimInfo.tooltip` is not set, show tooltip.\n\n    if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n      return;\n    }\n\n    if (isValueMultipleLine) {\n      blocks.push(createTooltipMarkup('nameValue', {\n        markerType: 'subItem',\n        markerColor: colorStr,\n        name: dimInfo.displayName,\n        value: val,\n        valueType: dimInfo.type\n      }));\n    } else {\n      inlineValues.push(val);\n      inlineValueTypes.push(dimInfo.type);\n    }\n  }\n\n  return {\n    inlineValues: inlineValues,\n    inlineValueTypes: inlineValueTypes,\n    blocks: blocks\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport * as modelUtil from '../util/model.js';\nimport ComponentModel from './Component.js';\nimport { PaletteMixin } from './mixin/palette.js';\nimport { DataFormatMixin } from '../model/mixin/dataFormat.js';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout.js';\nimport { createTask } from '../core/task.js';\nimport { mountExtend } from '../util/clazz.js';\nimport { SourceManager } from '../data/helper/sourceManager.js';\nimport { defaultSeriesFormatTooltip } from '../component/tooltip/seriesFormatTooltip.js';\nvar inner = modelUtil.makeInner();\n\nfunction getSelectionKey(data, dataIndex) {\n  return data.getName(dataIndex) || data.getId(dataIndex);\n}\n\nexport var SERIES_UNIVERSAL_TRANSITION_PROP = '__universalTransitionEnabled';\n\nvar SeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(SeriesModel, _super);\n\n  function SeriesModel() {\n    // [Caution]: Becuase this class or desecendants can be used as `XXX.extend(subProto)`,\n    // the class members must not be initialized in constructor or declaration place.\n    // Otherwise there is bad case:\n    //   class A {xxx = 1;}\n    //   enableClassExtend(A);\n    //   class B extends A {}\n    //   var C = B.extend({xxx: 5});\n    //   var c = new C();\n    //   console.log(c.xxx); // expect 5 but always 1.\n    var _this = _super !== null && _super.apply(this, arguments) || this; // ---------------------------------------\n    // Props about data selection\n    // ---------------------------------------\n\n\n    _this._selectedDataIndicesMap = {};\n    return _this;\n  }\n\n  SeriesModel.prototype.init = function (option, parentModel, ecModel) {\n    this.seriesIndex = this.componentIndex;\n    this.dataTask = createTask({\n      count: dataTaskCount,\n      reset: dataTaskReset\n    });\n    this.dataTask.context = {\n      model: this\n    };\n    this.mergeDefaultAndTheme(option, ecModel);\n    var sourceManager = inner(this).sourceManager = new SourceManager(this);\n    sourceManager.prepareSource();\n    var data = this.getInitialData(option, ecModel);\n    wrapData(data, this);\n    this.dataTask.context.data = data;\n\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.assert(data, 'getInitialData returned invalid data.');\n    }\n\n    inner(this).dataBeforeProcessed = data; // If we reverse the order (make data firstly, and then make\n    // dataBeforeProcessed by cloneShallow), cloneShallow will\n    // cause data.graph.data !== data when using\n    // module:echarts/data/Graph or module:echarts/data/Tree.\n    // See module:echarts/data/helper/linkSeriesData\n    // Theoretically, it is unreasonable to call `seriesModel.getData()` in the model\n    // init or merge stage, because the data can be restored. So we do not `restoreData`\n    // and `setData` here, which forbids calling `seriesModel.getData()` in this stage.\n    // Call `seriesModel.getRawData()` instead.\n    // this.restoreData();\n\n    autoSeriesName(this);\n\n    this._initSelectedMapFromData(data);\n  };\n  /**\n   * Util for merge default and theme to option\n   */\n\n\n  SeriesModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n    var layoutMode = fetchLayoutMode(this);\n    var inputPositionParams = layoutMode ? getLayoutParams(option) : {}; // Backward compat: using subType on theme.\n    // But if name duplicate between series subType\n    // (for example: parallel) add component mainType,\n    // add suffix 'Series'.\n\n    var themeSubType = this.subType;\n\n    if (ComponentModel.hasClass(themeSubType)) {\n      themeSubType += 'Series';\n    }\n\n    zrUtil.merge(option, ecModel.getTheme().get(this.subType));\n    zrUtil.merge(option, this.getDefaultOption()); // Default label emphasis `show`\n\n    modelUtil.defaultEmphasis(option, 'label', ['show']);\n    this.fillDataTextStyle(option.data);\n\n    if (layoutMode) {\n      mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  };\n\n  SeriesModel.prototype.mergeOption = function (newSeriesOption, ecModel) {\n    // this.settingTask.dirty();\n    newSeriesOption = zrUtil.merge(this.option, newSeriesOption, true);\n    this.fillDataTextStyle(newSeriesOption.data);\n    var layoutMode = fetchLayoutMode(this);\n\n    if (layoutMode) {\n      mergeLayoutParam(this.option, newSeriesOption, layoutMode);\n    }\n\n    var sourceManager = inner(this).sourceManager;\n    sourceManager.dirty();\n    sourceManager.prepareSource();\n    var data = this.getInitialData(newSeriesOption, ecModel);\n    wrapData(data, this);\n    this.dataTask.dirty();\n    this.dataTask.context.data = data;\n    inner(this).dataBeforeProcessed = data;\n    autoSeriesName(this);\n\n    this._initSelectedMapFromData(data);\n  };\n\n  SeriesModel.prototype.fillDataTextStyle = function (data) {\n    // Default data label emphasis `show`\n    // FIXME Tree structure data ?\n    // FIXME Performance ?\n    if (data && !zrUtil.isTypedArray(data)) {\n      var props = ['show'];\n\n      for (var i = 0; i < data.length; i++) {\n        if (data[i] && data[i].label) {\n          modelUtil.defaultEmphasis(data[i], 'label', props);\n        }\n      }\n    }\n  };\n  /**\n   * Init a data structure from data related option in series\n   * Must be overriden.\n   */\n\n\n  SeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return;\n  };\n  /**\n   * Append data to list\n   */\n\n\n  SeriesModel.prototype.appendData = function (params) {\n    // FIXME ???\n    // (1) If data from dataset, forbidden append.\n    // (2) support append data of dataset.\n    var data = this.getRawData();\n    data.appendData(params.data);\n  };\n  /**\n   * Consider some method like `filter`, `map` need make new data,\n   * We should make sure that `seriesModel.getData()` get correct\n   * data in the stream procedure. So we fetch data from upstream\n   * each time `task.perform` called.\n   */\n\n\n  SeriesModel.prototype.getData = function (dataType) {\n    var task = getCurrentTask(this);\n\n    if (task) {\n      var data = task.context.data;\n      return dataType == null ? data : data.getLinkedData(dataType);\n    } else {\n      // When series is not alive (that may happen when click toolbox\n      // restore or setOption with not merge mode), series data may\n      // be still need to judge animation or something when graphic\n      // elements want to know whether fade out.\n      return inner(this).data;\n    }\n  };\n\n  SeriesModel.prototype.getAllData = function () {\n    var mainData = this.getData();\n    return mainData && mainData.getLinkedDataAll ? mainData.getLinkedDataAll() : [{\n      data: mainData\n    }];\n  };\n\n  SeriesModel.prototype.setData = function (data) {\n    var task = getCurrentTask(this);\n\n    if (task) {\n      var context = task.context; // Consider case: filter, data sample.\n      // FIXME:TS never used, so comment it\n      // if (context.data !== data && task.modifyOutputEnd) {\n      //     task.setOutputEnd(data.count());\n      // }\n\n      context.outputData = data; // Caution: setData should update context.data,\n      // Because getData may be called multiply in a\n      // single stage and expect to get the data just\n      // set. (For example, AxisProxy, x y both call\n      // getData and setDate sequentially).\n      // So the context.data should be fetched from\n      // upstream each time when a stage starts to be\n      // performed.\n\n      if (task !== this.dataTask) {\n        context.data = data;\n      }\n    }\n\n    inner(this).data = data;\n  };\n\n  SeriesModel.prototype.getEncode = function () {\n    var encode = this.get('encode', true);\n\n    if (encode) {\n      return zrUtil.createHashMap(encode);\n    }\n  };\n\n  SeriesModel.prototype.getSourceManager = function () {\n    return inner(this).sourceManager;\n  };\n\n  SeriesModel.prototype.getSource = function () {\n    return this.getSourceManager().getSource();\n  };\n  /**\n   * Get data before processed\n   */\n\n\n  SeriesModel.prototype.getRawData = function () {\n    return inner(this).dataBeforeProcessed;\n  };\n\n  SeriesModel.prototype.getColorBy = function () {\n    var colorBy = this.get('colorBy');\n    return colorBy || 'series';\n  };\n\n  SeriesModel.prototype.isColorBySeries = function () {\n    return this.getColorBy() === 'series';\n  };\n  /**\n   * Get base axis if has coordinate system and has axis.\n   * By default use coordSys.getBaseAxis();\n   * Can be overrided for some chart.\n   * @return {type} description\n   */\n\n\n  SeriesModel.prototype.getBaseAxis = function () {\n    var coordSys = this.coordinateSystem; // @ts-ignore\n\n    return coordSys && coordSys.getBaseAxis && coordSys.getBaseAxis();\n  };\n  /**\n   * Default tooltip formatter\n   *\n   * @param dataIndex\n   * @param multipleSeries\n   * @param dataType\n   * @param renderMode valid values: 'html'(by default) and 'richText'.\n   *        'html' is used for rendering tooltip in extra DOM form, and the result\n   *        string is used as DOM HTML content.\n   *        'richText' is used for rendering tooltip in rich text form, for those where\n   *        DOM operation is not supported.\n   * @return formatted tooltip with `html` and `markers`\n   *        Notice: The override method can also return string\n   */\n\n\n  SeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    return defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n  };\n\n  SeriesModel.prototype.isAnimationEnabled = function () {\n    var ecModel = this.ecModel; // Disable animation if using echarts in node but not give ssr flag.\n    // In ssr mode, renderToString will generate svg with css animation.\n\n    if (env.node && !(ecModel && ecModel.ssr)) {\n      return false;\n    }\n\n    var animationEnabled = this.getShallow('animation');\n\n    if (animationEnabled) {\n      if (this.getData().count() > this.getShallow('animationThreshold')) {\n        animationEnabled = false;\n      }\n    }\n\n    return !!animationEnabled;\n  };\n\n  SeriesModel.prototype.restoreData = function () {\n    this.dataTask.dirty();\n  };\n\n  SeriesModel.prototype.getColorFromPalette = function (name, scope, requestColorNum) {\n    var ecModel = this.ecModel; // PENDING\n\n    var color = PaletteMixin.prototype.getColorFromPalette.call(this, name, scope, requestColorNum);\n\n    if (!color) {\n      color = ecModel.getColorFromPalette(name, scope, requestColorNum);\n    }\n\n    return color;\n  };\n  /**\n   * Use `data.mapDimensionsAll(coordDim)` instead.\n   * @deprecated\n   */\n\n\n  SeriesModel.prototype.coordDimToDataDim = function (coordDim) {\n    return this.getRawData().mapDimensionsAll(coordDim);\n  };\n  /**\n   * Get progressive rendering count each step\n   */\n\n\n  SeriesModel.prototype.getProgressive = function () {\n    return this.get('progressive');\n  };\n  /**\n   * Get progressive rendering count each step\n   */\n\n\n  SeriesModel.prototype.getProgressiveThreshold = function () {\n    return this.get('progressiveThreshold');\n  }; // PENGING If selectedMode is null ?\n\n\n  SeriesModel.prototype.select = function (innerDataIndices, dataType) {\n    this._innerSelect(this.getData(dataType), innerDataIndices);\n  };\n\n  SeriesModel.prototype.unselect = function (innerDataIndices, dataType) {\n    var selectedMap = this.option.selectedMap;\n\n    if (!selectedMap) {\n      return;\n    }\n\n    var selectedMode = this.option.selectedMode;\n    var data = this.getData(dataType);\n\n    if (selectedMode === 'series' || selectedMap === 'all') {\n      this.option.selectedMap = {};\n      this._selectedDataIndicesMap = {};\n      return;\n    }\n\n    for (var i = 0; i < innerDataIndices.length; i++) {\n      var dataIndex = innerDataIndices[i];\n      var nameOrId = getSelectionKey(data, dataIndex);\n      selectedMap[nameOrId] = false;\n      this._selectedDataIndicesMap[nameOrId] = -1;\n    }\n  };\n\n  SeriesModel.prototype.toggleSelect = function (innerDataIndices, dataType) {\n    var tmpArr = [];\n\n    for (var i = 0; i < innerDataIndices.length; i++) {\n      tmpArr[0] = innerDataIndices[i];\n      this.isSelected(innerDataIndices[i], dataType) ? this.unselect(tmpArr, dataType) : this.select(tmpArr, dataType);\n    }\n  };\n\n  SeriesModel.prototype.getSelectedDataIndices = function () {\n    if (this.option.selectedMap === 'all') {\n      return [].slice.call(this.getData().getIndices());\n    }\n\n    var selectedDataIndicesMap = this._selectedDataIndicesMap;\n    var nameOrIds = zrUtil.keys(selectedDataIndicesMap);\n    var dataIndices = [];\n\n    for (var i = 0; i < nameOrIds.length; i++) {\n      var dataIndex = selectedDataIndicesMap[nameOrIds[i]];\n\n      if (dataIndex >= 0) {\n        dataIndices.push(dataIndex);\n      }\n    }\n\n    return dataIndices;\n  };\n\n  SeriesModel.prototype.isSelected = function (dataIndex, dataType) {\n    var selectedMap = this.option.selectedMap;\n\n    if (!selectedMap) {\n      return false;\n    }\n\n    var data = this.getData(dataType);\n    return (selectedMap === 'all' || selectedMap[getSelectionKey(data, dataIndex)]) && !data.getItemModel(dataIndex).get(['select', 'disabled']);\n  };\n\n  SeriesModel.prototype.isUniversalTransitionEnabled = function () {\n    if (this[SERIES_UNIVERSAL_TRANSITION_PROP]) {\n      return true;\n    }\n\n    var universalTransitionOpt = this.option.universalTransition; // Quick reject\n\n    if (!universalTransitionOpt) {\n      return false;\n    }\n\n    if (universalTransitionOpt === true) {\n      return true;\n    } // Can be simply 'universalTransition: true'\n\n\n    return universalTransitionOpt && universalTransitionOpt.enabled;\n  };\n\n  SeriesModel.prototype._innerSelect = function (data, innerDataIndices) {\n    var _a, _b;\n\n    var option = this.option;\n    var selectedMode = option.selectedMode;\n    var len = innerDataIndices.length;\n\n    if (!selectedMode || !len) {\n      return;\n    }\n\n    if (selectedMode === 'series') {\n      option.selectedMap = 'all';\n    } else if (selectedMode === 'multiple') {\n      if (!zrUtil.isObject(option.selectedMap)) {\n        option.selectedMap = {};\n      }\n\n      var selectedMap = option.selectedMap;\n\n      for (var i = 0; i < len; i++) {\n        var dataIndex = innerDataIndices[i]; // TODO diffrent types of data share same object.\n\n        var nameOrId = getSelectionKey(data, dataIndex);\n        selectedMap[nameOrId] = true;\n        this._selectedDataIndicesMap[nameOrId] = data.getRawIndex(dataIndex);\n      }\n    } else if (selectedMode === 'single' || selectedMode === true) {\n      var lastDataIndex = innerDataIndices[len - 1];\n      var nameOrId = getSelectionKey(data, lastDataIndex);\n      option.selectedMap = (_a = {}, _a[nameOrId] = true, _a);\n      this._selectedDataIndicesMap = (_b = {}, _b[nameOrId] = data.getRawIndex(lastDataIndex), _b);\n    }\n  };\n\n  SeriesModel.prototype._initSelectedMapFromData = function (data) {\n    // Ignore select info in data if selectedMap exists.\n    // NOTE It's only for legacy usage. edge data is not supported.\n    if (this.option.selectedMap) {\n      return;\n    }\n\n    var dataIndices = [];\n\n    if (data.hasItemOption) {\n      data.each(function (idx) {\n        var rawItem = data.getRawDataItem(idx);\n\n        if (rawItem && rawItem.selected) {\n          dataIndices.push(idx);\n        }\n      });\n    }\n\n    if (dataIndices.length > 0) {\n      this._innerSelect(data, dataIndices);\n    }\n  }; // /**\n  //  * @see {module:echarts/stream/Scheduler}\n  //  */\n  // abstract pipeTask: null\n\n\n  SeriesModel.registerClass = function (clz) {\n    return ComponentModel.registerClass(clz);\n  };\n\n  SeriesModel.protoInitialize = function () {\n    var proto = SeriesModel.prototype;\n    proto.type = 'series.__base__';\n    proto.seriesIndex = 0;\n    proto.ignoreStyleOnData = false;\n    proto.hasSymbolVisual = false;\n    proto.defaultSymbol = 'circle'; // Make sure the values can be accessed!\n\n    proto.visualStyleAccessPath = 'itemStyle';\n    proto.visualDrawType = 'fill';\n  }();\n\n  return SeriesModel;\n}(ComponentModel);\n\nzrUtil.mixin(SeriesModel, DataFormatMixin);\nzrUtil.mixin(SeriesModel, PaletteMixin);\nmountExtend(SeriesModel, ComponentModel);\n/**\n * MUST be called after `prepareSource` called\n * Here we need to make auto series, especially for auto legend. But we\n * do not modify series.name in option to avoid side effects.\n */\n\nfunction autoSeriesName(seriesModel) {\n  // User specified name has higher priority, otherwise it may cause\n  // series can not be queried unexpectedly.\n  var name = seriesModel.name;\n\n  if (!modelUtil.isNameSpecified(seriesModel)) {\n    seriesModel.name = getSeriesAutoName(seriesModel) || name;\n  }\n}\n\nfunction getSeriesAutoName(seriesModel) {\n  var data = seriesModel.getRawData();\n  var dataDims = data.mapDimensionsAll('seriesName');\n  var nameArr = [];\n  zrUtil.each(dataDims, function (dataDim) {\n    var dimInfo = data.getDimensionInfo(dataDim);\n    dimInfo.displayName && nameArr.push(dimInfo.displayName);\n  });\n  return nameArr.join(' ');\n}\n\nfunction dataTaskCount(context) {\n  return context.model.getRawData().count();\n}\n\nfunction dataTaskReset(context) {\n  var seriesModel = context.model;\n  seriesModel.setData(seriesModel.getRawData().cloneShallow());\n  return dataTaskProgress;\n}\n\nfunction dataTaskProgress(param, context) {\n  // Avoid repead cloneShallow when data just created in reset.\n  if (context.outputData && param.end > context.outputData.count()) {\n    context.model.getRawData().cloneShallow(context.outputData);\n  }\n} // TODO refactor\n\n\nfunction wrapData(data, seriesModel) {\n  zrUtil.each(zrUtil.concatArray(data.CHANGABLE_METHODS, data.DOWNSAMPLE_METHODS), function (methodName) {\n    data.wrapMethod(methodName, zrUtil.curry(onDataChange, seriesModel));\n  });\n}\n\nfunction onDataChange(seriesModel, newList) {\n  var task = getCurrentTask(seriesModel);\n\n  if (task) {\n    // Consider case: filter, selectRange\n    task.setOutputEnd((newList || this).count());\n  }\n\n  return newList;\n}\n\nfunction getCurrentTask(seriesModel) {\n  var scheduler = (seriesModel.ecModel || {}).scheduler;\n  var pipeline = scheduler && scheduler.getPipeline(seriesModel.uid);\n\n  if (pipeline) {\n    // When pipline finished, the currrentTask keep the last\n    // task (renderTask).\n    var task = pipeline.currentTask;\n\n    if (task) {\n      var agentStubMap = task.agentStubMap;\n\n      if (agentStubMap) {\n        task = agentStubMap.get(seriesModel.uid);\n      }\n    }\n\n    return task;\n  }\n}\n\nexport default SeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { formatTpl } from '../../util/format.js';\nimport { error, makePrintable } from '../../util/log.js';\nvar DIMENSION_LABEL_REG = /\\{@(.+?)\\}/g;\n\nvar DataFormatMixin =\n/** @class */\nfunction () {\n  function DataFormatMixin() {}\n  /**\n   * Get params for formatter\n   */\n\n\n  DataFormatMixin.prototype.getDataParams = function (dataIndex, dataType) {\n    var data = this.getData(dataType);\n    var rawValue = this.getRawValue(dataIndex, dataType);\n    var rawDataIndex = data.getRawIndex(dataIndex);\n    var name = data.getName(dataIndex);\n    var itemOpt = data.getRawDataItem(dataIndex);\n    var style = data.getItemVisual(dataIndex, 'style');\n    var color = style && style[data.getItemVisual(dataIndex, 'drawType') || 'fill'];\n    var borderColor = style && style.stroke;\n    var mainType = this.mainType;\n    var isSeries = mainType === 'series';\n    var userOutput = data.userOutput && data.userOutput.get();\n    return {\n      componentType: mainType,\n      componentSubType: this.subType,\n      componentIndex: this.componentIndex,\n      seriesType: isSeries ? this.subType : null,\n      seriesIndex: this.seriesIndex,\n      seriesId: isSeries ? this.id : null,\n      seriesName: isSeries ? this.name : null,\n      name: name,\n      dataIndex: rawDataIndex,\n      data: itemOpt,\n      dataType: dataType,\n      value: rawValue,\n      color: color,\n      borderColor: borderColor,\n      dimensionNames: userOutput ? userOutput.fullDimensions : null,\n      encode: userOutput ? userOutput.encode : null,\n      // Param name list for mapping `a`, `b`, `c`, `d`, `e`\n      $vars: ['seriesName', 'name', 'value']\n    };\n  };\n  /**\n   * Format label\n   * @param dataIndex\n   * @param status 'normal' by default\n   * @param dataType\n   * @param labelDimIndex Only used in some chart that\n   *        use formatter in different dimensions, like radar.\n   * @param formatter Formatter given outside.\n   * @return return null/undefined if no formatter\n   */\n\n\n  DataFormatMixin.prototype.getFormattedLabel = function (dataIndex, status, dataType, labelDimIndex, formatter, extendParams) {\n    status = status || 'normal';\n    var data = this.getData(dataType);\n    var params = this.getDataParams(dataIndex, dataType);\n\n    if (extendParams) {\n      params.value = extendParams.interpolatedValue;\n    }\n\n    if (labelDimIndex != null && zrUtil.isArray(params.value)) {\n      params.value = params.value[labelDimIndex];\n    }\n\n    if (!formatter) {\n      var itemModel = data.getItemModel(dataIndex); // @ts-ignore\n\n      formatter = itemModel.get(status === 'normal' ? ['label', 'formatter'] : [status, 'label', 'formatter']);\n    }\n\n    if (zrUtil.isFunction(formatter)) {\n      params.status = status;\n      params.dimensionIndex = labelDimIndex;\n      return formatter(params);\n    } else if (zrUtil.isString(formatter)) {\n      var str = formatTpl(formatter, params); // Support 'aaa{@[3]}bbb{@product}ccc'.\n      // Do not support '}' in dim name util have to.\n\n      return str.replace(DIMENSION_LABEL_REG, function (origin, dimStr) {\n        var len = dimStr.length;\n        var dimLoose = dimStr;\n\n        if (dimLoose.charAt(0) === '[' && dimLoose.charAt(len - 1) === ']') {\n          dimLoose = +dimLoose.slice(1, len - 1); // Also support: '[]' => 0\n\n          if (process.env.NODE_ENV !== 'production') {\n            if (isNaN(dimLoose)) {\n              error(\"Invalide label formatter: @\" + dimStr + \", only support @[0], @[1], @[2], ...\");\n            }\n          }\n        }\n\n        var val = retrieveRawValue(data, dataIndex, dimLoose);\n\n        if (extendParams && zrUtil.isArray(extendParams.interpolatedValue)) {\n          var dimIndex = data.getDimensionIndex(dimLoose);\n\n          if (dimIndex >= 0) {\n            val = extendParams.interpolatedValue[dimIndex];\n          }\n        }\n\n        return val != null ? val + '' : '';\n      });\n    }\n  };\n  /**\n   * Get raw value in option\n   */\n\n\n  DataFormatMixin.prototype.getRawValue = function (idx, dataType) {\n    return retrieveRawValue(this.getData(dataType), idx);\n  };\n  /**\n   * Should be implemented.\n   * @param {number} dataIndex\n   * @param {boolean} [multipleSeries=false]\n   * @param {string} [dataType]\n   */\n\n\n  DataFormatMixin.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    // Empty function\n    return;\n  };\n\n  return DataFormatMixin;\n}();\n\nexport { DataFormatMixin };\n; // PENDING: previously we accept this type when calling `formatTooltip`,\n// but guess little chance has been used outside. Do we need to backward\n// compat it?\n// type TooltipFormatResultLegacyObject = {\n//     // `html` means the markup language text, either in 'html' or 'richText'.\n//     // The name `html` is not appropriate becuase in 'richText' it is not a HTML\n//     // string. But still support it for backward compat.\n//     html: string;\n//     markers: Dictionary<ColorString>;\n// };\n\n/**\n * For backward compat, normalize the return from `formatTooltip`.\n */\n\nexport function normalizeTooltipFormatResult(result) {\n  var markupText; // let markers: Dictionary<ColorString>;\n\n  var markupFragment;\n\n  if (zrUtil.isObject(result)) {\n    if (result.type) {\n      markupFragment = result;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('The return type of `formatTooltip` is not supported: ' + makePrintable(result));\n      }\n    } // else {\n    //     markupText = (result as TooltipFormatResultLegacyObject).html;\n    //     markers = (result as TooltipFormatResultLegacyObject).markers;\n    //     if (markersExisting) {\n    //         markers = zrUtil.merge(markersExisting, markers);\n    //     }\n    // }\n\n  } else {\n    markupText = result;\n  }\n\n  return {\n    text: markupText,\n    // markers: markers || markersExisting,\n    frag: markupFragment\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport makeStyleMapper from './makeStyleMapper.js';\nexport var ITEM_STYLE_KEY_MAP = [['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'borderType'], ['lineDashOffset', 'borderDashOffset'], ['lineCap', 'borderCap'], ['lineJoin', 'borderJoin'], ['miterLimit', 'borderMiterLimit'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n];\nvar getItemStyle = makeStyleMapper(ITEM_STYLE_KEY_MAP);\n\nvar ItemStyleMixin =\n/** @class */\nfunction () {\n  function ItemStyleMixin() {}\n\n  ItemStyleMixin.prototype.getItemStyle = function (excludes, includes) {\n    return getItemStyle(this, excludes, includes);\n  };\n\n  return ItemStyleMixin;\n}();\n\nexport { ItemStyleMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport makeStyleMapper from './makeStyleMapper.js';\nexport var LINE_STYLE_KEY_MAP = [['lineWidth', 'width'], ['stroke', 'color'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'type'], ['lineDashOffset', 'dashOffset'], ['lineCap', 'cap'], ['lineJoin', 'join'], ['miterLimit'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n];\nvar getLineStyle = makeStyleMapper(LINE_STYLE_KEY_MAP);\n\nvar LineStyleMixin =\n/** @class */\nfunction () {\n  function LineStyleMixin() {}\n\n  LineStyleMixin.prototype.getLineStyle = function (excludes) {\n    return getLineStyle(this, excludes);\n  };\n\n  return LineStyleMixin;\n}();\n\n;\nexport { LineStyleMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO Parse shadow style\n// TODO Only shallow path support\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function makeStyleMapper(properties, ignoreParent) {\n  // Normalize\n  for (var i = 0; i < properties.length; i++) {\n    if (!properties[i][1]) {\n      properties[i][1] = properties[i][0];\n    }\n  }\n\n  ignoreParent = ignoreParent || false;\n  return function (model, excludes, includes) {\n    var style = {};\n\n    for (var i = 0; i < properties.length; i++) {\n      var propName = properties[i][1];\n\n      if (excludes && zrUtil.indexOf(excludes, propName) >= 0 || includes && zrUtil.indexOf(includes, propName) < 0) {\n        continue;\n      }\n\n      var val = model.getShallow(propName, ignoreParent);\n\n      if (val != null) {\n        style[properties[i][0]] = val;\n      }\n    } // TODO Text or image?\n\n\n    return style;\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner, normalizeToArray } from '../../util/model.js';\nvar innerColor = makeInner();\nvar innerDecal = makeInner();\n\nvar PaletteMixin =\n/** @class */\nfunction () {\n  function PaletteMixin() {}\n\n  PaletteMixin.prototype.getColorFromPalette = function (name, scope, requestNum) {\n    var defaultPalette = normalizeToArray(this.get('color', true));\n    var layeredPalette = this.get('colorLayer', true);\n    return getFromPalette(this, innerColor, defaultPalette, layeredPalette, name, scope, requestNum);\n  };\n\n  PaletteMixin.prototype.clearColorPalette = function () {\n    clearPalette(this, innerColor);\n  };\n\n  return PaletteMixin;\n}();\n\nexport function getDecalFromPalette(ecModel, name, scope, requestNum) {\n  var defaultDecals = normalizeToArray(ecModel.get(['aria', 'decal', 'decals']));\n  return getFromPalette(ecModel, innerDecal, defaultDecals, null, name, scope, requestNum);\n}\n\nfunction getNearestPalette(palettes, requestColorNum) {\n  var paletteNum = palettes.length; // TODO palettes must be in order\n\n  for (var i = 0; i < paletteNum; i++) {\n    if (palettes[i].length > requestColorNum) {\n      return palettes[i];\n    }\n  }\n\n  return palettes[paletteNum - 1];\n}\n/**\n * @param name MUST NOT be null/undefined. Otherwise call this function\n *             twise with the same parameters will get different result.\n * @param scope default this.\n * @return Can be null/undefined\n */\n\n\nfunction getFromPalette(that, inner, defaultPalette, layeredPalette, name, scope, requestNum) {\n  scope = scope || that;\n  var scopeFields = inner(scope);\n  var paletteIdx = scopeFields.paletteIdx || 0;\n  var paletteNameMap = scopeFields.paletteNameMap = scopeFields.paletteNameMap || {}; // Use `hasOwnProperty` to avoid conflict with Object.prototype.\n\n  if (paletteNameMap.hasOwnProperty(name)) {\n    return paletteNameMap[name];\n  }\n\n  var palette = requestNum == null || !layeredPalette ? defaultPalette : getNearestPalette(layeredPalette, requestNum); // In case can't find in layered color palette.\n\n  palette = palette || defaultPalette;\n\n  if (!palette || !palette.length) {\n    return;\n  }\n\n  var pickedPaletteItem = palette[paletteIdx];\n\n  if (name) {\n    paletteNameMap[name] = pickedPaletteItem;\n  }\n\n  scopeFields.paletteIdx = (paletteIdx + 1) % palette.length;\n  return pickedPaletteItem;\n}\n\nfunction clearPalette(that, inner) {\n  inner(that).paletteIdx = 0;\n  inner(that).paletteNameMap = {};\n}\n\nexport { PaletteMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SVGPainter from 'zrender/lib/svg/Painter.js';\nexport function install(registers) {\n  registers.registerPainter('svg', SVGPainter);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as numberUtil from '../util/number.js';\nimport * as formatUtil from '../util/format.js';\nimport Scale from './Scale.js';\nimport * as helper from './helper.js';\nvar roundNumber = numberUtil.round;\n\nvar IntervalScale =\n/** @class */\nfunction (_super) {\n  __extends(IntervalScale, _super);\n\n  function IntervalScale() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'interval'; // Step is calculated in adjustExtent.\n\n    _this._interval = 0;\n    _this._intervalPrecision = 2;\n    return _this;\n  }\n\n  IntervalScale.prototype.parse = function (val) {\n    return val;\n  };\n\n  IntervalScale.prototype.contain = function (val) {\n    return helper.contain(val, this._extent);\n  };\n\n  IntervalScale.prototype.normalize = function (val) {\n    return helper.normalize(val, this._extent);\n  };\n\n  IntervalScale.prototype.scale = function (val) {\n    return helper.scale(val, this._extent);\n  };\n\n  IntervalScale.prototype.setExtent = function (start, end) {\n    var thisExtent = this._extent; // start,end may be a Number like '25',so...\n\n    if (!isNaN(start)) {\n      thisExtent[0] = parseFloat(start);\n    }\n\n    if (!isNaN(end)) {\n      thisExtent[1] = parseFloat(end);\n    }\n  };\n\n  IntervalScale.prototype.unionExtent = function (other) {\n    var extent = this._extent;\n    other[0] < extent[0] && (extent[0] = other[0]);\n    other[1] > extent[1] && (extent[1] = other[1]); // unionExtent may called by it's sub classes\n\n    this.setExtent(extent[0], extent[1]);\n  };\n\n  IntervalScale.prototype.getInterval = function () {\n    return this._interval;\n  };\n\n  IntervalScale.prototype.setInterval = function (interval) {\n    this._interval = interval; // Dropped auto calculated niceExtent and use user setted extent\n    // We assume user wan't to set both interval, min, max to get a better result\n\n    this._niceExtent = this._extent.slice();\n    this._intervalPrecision = helper.getIntervalPrecision(interval);\n  };\n  /**\n   * @param expandToNicedExtent Whether expand the ticks to niced extent.\n   */\n\n\n  IntervalScale.prototype.getTicks = function (expandToNicedExtent) {\n    var interval = this._interval;\n    var extent = this._extent;\n    var niceTickExtent = this._niceExtent;\n    var intervalPrecision = this._intervalPrecision;\n    var ticks = []; // If interval is 0, return [];\n\n    if (!interval) {\n      return ticks;\n    } // Consider this case: using dataZoom toolbox, zoom and zoom.\n\n\n    var safeLimit = 10000;\n\n    if (extent[0] < niceTickExtent[0]) {\n      if (expandToNicedExtent) {\n        ticks.push({\n          value: roundNumber(niceTickExtent[0] - interval, intervalPrecision)\n        });\n      } else {\n        ticks.push({\n          value: extent[0]\n        });\n      }\n    }\n\n    var tick = niceTickExtent[0];\n\n    while (tick <= niceTickExtent[1]) {\n      ticks.push({\n        value: tick\n      }); // Avoid rounding error\n\n      tick = roundNumber(tick + interval, intervalPrecision);\n\n      if (tick === ticks[ticks.length - 1].value) {\n        // Consider out of safe float point, e.g.,\n        // -3711126.9907707 + 2e-10 === -3711126.9907707\n        break;\n      }\n\n      if (ticks.length > safeLimit) {\n        return [];\n      }\n    } // Consider this case: the last item of ticks is smaller\n    // than niceTickExtent[1] and niceTickExtent[1] === extent[1].\n\n\n    var lastNiceTick = ticks.length ? ticks[ticks.length - 1].value : niceTickExtent[1];\n\n    if (extent[1] > lastNiceTick) {\n      if (expandToNicedExtent) {\n        ticks.push({\n          value: roundNumber(lastNiceTick + interval, intervalPrecision)\n        });\n      } else {\n        ticks.push({\n          value: extent[1]\n        });\n      }\n    }\n\n    return ticks;\n  };\n\n  IntervalScale.prototype.getMinorTicks = function (splitNumber) {\n    var ticks = this.getTicks(true);\n    var minorTicks = [];\n    var extent = this.getExtent();\n\n    for (var i = 1; i < ticks.length; i++) {\n      var nextTick = ticks[i];\n      var prevTick = ticks[i - 1];\n      var count = 0;\n      var minorTicksGroup = [];\n      var interval = nextTick.value - prevTick.value;\n      var minorInterval = interval / splitNumber;\n\n      while (count < splitNumber - 1) {\n        var minorTick = roundNumber(prevTick.value + (count + 1) * minorInterval); // For the first and last interval. The count may be less than splitNumber.\n\n        if (minorTick > extent[0] && minorTick < extent[1]) {\n          minorTicksGroup.push(minorTick);\n        }\n\n        count++;\n      }\n\n      minorTicks.push(minorTicksGroup);\n    }\n\n    return minorTicks;\n  };\n  /**\n   * @param opt.precision If 'auto', use nice presision.\n   * @param opt.pad returns 1.50 but not 1.5 if precision is 2.\n   */\n\n\n  IntervalScale.prototype.getLabel = function (data, opt) {\n    if (data == null) {\n      return '';\n    }\n\n    var precision = opt && opt.precision;\n\n    if (precision == null) {\n      precision = numberUtil.getPrecision(data.value) || 0;\n    } else if (precision === 'auto') {\n      // Should be more precise then tick.\n      precision = this._intervalPrecision;\n    } // (1) If `precision` is set, 12.005 should be display as '12.00500'.\n    // (2) Use roundNumber (toFixed) to avoid scientific notation like '3.5e-7'.\n\n\n    var dataNum = roundNumber(data.value, precision, true);\n    return formatUtil.addCommas(dataNum);\n  };\n  /**\n   * @param splitNumber By default `5`.\n   */\n\n\n  IntervalScale.prototype.calcNiceTicks = function (splitNumber, minInterval, maxInterval) {\n    splitNumber = splitNumber || 5;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n\n    if (!isFinite(span)) {\n      return;\n    } // User may set axis min 0 and data are all negative\n    // FIXME If it needs to reverse ?\n\n\n    if (span < 0) {\n      span = -span;\n      extent.reverse();\n    }\n\n    var result = helper.intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval);\n    this._intervalPrecision = result.intervalPrecision;\n    this._interval = result.interval;\n    this._niceExtent = result.niceTickExtent;\n  };\n\n  IntervalScale.prototype.calcNiceExtent = function (opt) {\n    var extent = this._extent; // If extent start and end are same, expand them\n\n    if (extent[0] === extent[1]) {\n      if (extent[0] !== 0) {\n        // Expand extent\n        // Note that extents can be both negative. See #13154\n        var expandSize = Math.abs(extent[0]); // In the fowllowing case\n        //      Axis has been fixed max 100\n        //      Plus data are all 100 and axis extent are [100, 100].\n        // Extend to the both side will cause expanded max is larger than fixed max.\n        // So only expand to the smaller side.\n\n        if (!opt.fixMax) {\n          extent[1] += expandSize / 2;\n          extent[0] -= expandSize / 2;\n        } else {\n          extent[0] -= expandSize / 2;\n        }\n      } else {\n        extent[1] = 1;\n      }\n    }\n\n    var span = extent[1] - extent[0]; // If there are no data and extent are [Infinity, -Infinity]\n\n    if (!isFinite(span)) {\n      extent[0] = 0;\n      extent[1] = 1;\n    }\n\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval); // let extent = this._extent;\n\n    var interval = this._interval;\n\n    if (!opt.fixMin) {\n      extent[0] = roundNumber(Math.floor(extent[0] / interval) * interval);\n    }\n\n    if (!opt.fixMax) {\n      extent[1] = roundNumber(Math.ceil(extent[1] / interval) * interval);\n    }\n  };\n\n  IntervalScale.prototype.setNiceExtent = function (min, max) {\n    this._niceExtent = [min, max];\n  };\n\n  IntervalScale.type = 'interval';\n  return IntervalScale;\n}(Scale);\n\nScale.registerClass(IntervalScale);\nexport default IntervalScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as clazzUtil from '../util/clazz.js';\n\nvar Scale =\n/** @class */\nfunction () {\n  function Scale(setting) {\n    this._setting = setting || {};\n    this._extent = [Infinity, -Infinity];\n  }\n\n  Scale.prototype.getSetting = function (name) {\n    return this._setting[name];\n  };\n  /**\n   * Set extent from data\n   */\n\n\n  Scale.prototype.unionExtent = function (other) {\n    var extent = this._extent;\n    other[0] < extent[0] && (extent[0] = other[0]);\n    other[1] > extent[1] && (extent[1] = other[1]); // not setExtent because in log axis it may transformed to power\n    // this.setExtent(extent[0], extent[1]);\n  };\n  /**\n   * Set extent from data\n   */\n\n\n  Scale.prototype.unionExtentFromData = function (data, dim) {\n    this.unionExtent(data.getApproximateExtent(dim));\n  };\n  /**\n   * Get extent\n   *\n   * Extent is always in increase order.\n   */\n\n\n  Scale.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  /**\n   * Set extent\n   */\n\n\n  Scale.prototype.setExtent = function (start, end) {\n    var thisExtent = this._extent;\n\n    if (!isNaN(start)) {\n      thisExtent[0] = start;\n    }\n\n    if (!isNaN(end)) {\n      thisExtent[1] = end;\n    }\n  };\n  /**\n   * If value is in extent range\n   */\n\n\n  Scale.prototype.isInExtentRange = function (value) {\n    return this._extent[0] <= value && this._extent[1] >= value;\n  };\n  /**\n   * When axis extent depends on data and no data exists,\n   * axis ticks should not be drawn, which is named 'blank'.\n   */\n\n\n  Scale.prototype.isBlank = function () {\n    return this._isBlank;\n  };\n  /**\n   * When axis extent depends on data and no data exists,\n   * axis ticks should not be drawn, which is named 'blank'.\n   */\n\n\n  Scale.prototype.setBlank = function (isBlank) {\n    this._isBlank = isBlank;\n  };\n\n  return Scale;\n}();\n\nclazzUtil.enableClassManagement(Scale);\nexport default Scale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getPrecision, round, nice, quantityExponent } from '../util/number.js';\nexport function isValueNice(val) {\n  var exp10 = Math.pow(10, quantityExponent(Math.abs(val)));\n  var f = Math.abs(val / exp10);\n  return f === 0 || f === 1 || f === 2 || f === 3 || f === 5;\n}\nexport function isIntervalOrLogScale(scale) {\n  return scale.type === 'interval' || scale.type === 'log';\n}\n/**\n * @param extent Both extent[0] and extent[1] should be valid number.\n *               Should be extent[0] < extent[1].\n * @param splitNumber splitNumber should be >= 1.\n */\n\nexport function intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval) {\n  var result = {};\n  var span = extent[1] - extent[0];\n  var interval = result.interval = nice(span / splitNumber, true);\n\n  if (minInterval != null && interval < minInterval) {\n    interval = result.interval = minInterval;\n  }\n\n  if (maxInterval != null && interval > maxInterval) {\n    interval = result.interval = maxInterval;\n  } // Tow more digital for tick.\n\n\n  var precision = result.intervalPrecision = getIntervalPrecision(interval); // Niced extent inside original extent\n\n  var niceTickExtent = result.niceTickExtent = [round(Math.ceil(extent[0] / interval) * interval, precision), round(Math.floor(extent[1] / interval) * interval, precision)];\n  fixExtent(niceTickExtent, extent);\n  return result;\n}\nexport function increaseInterval(interval) {\n  var exp10 = Math.pow(10, quantityExponent(interval)); // Increase interval\n\n  var f = interval / exp10;\n\n  if (!f) {\n    f = 1;\n  } else if (f === 2) {\n    f = 3;\n  } else if (f === 3) {\n    f = 5;\n  } else {\n    // f is 1 or 5\n    f *= 2;\n  }\n\n  return round(f * exp10);\n}\n/**\n * @return interval precision\n */\n\nexport function getIntervalPrecision(interval) {\n  // Tow more digital for tick.\n  return getPrecision(interval) + 2;\n}\n\nfunction clamp(niceTickExtent, idx, extent) {\n  niceTickExtent[idx] = Math.max(Math.min(niceTickExtent[idx], extent[1]), extent[0]);\n} // In some cases (e.g., splitNumber is 1), niceTickExtent may be out of extent.\n\n\nexport function fixExtent(niceTickExtent, extent) {\n  !isFinite(niceTickExtent[0]) && (niceTickExtent[0] = extent[0]);\n  !isFinite(niceTickExtent[1]) && (niceTickExtent[1] = extent[1]);\n  clamp(niceTickExtent, 0, extent);\n  clamp(niceTickExtent, 1, extent);\n\n  if (niceTickExtent[0] > niceTickExtent[1]) {\n    niceTickExtent[0] = niceTickExtent[1];\n  }\n}\nexport function contain(val, extent) {\n  return val >= extent[0] && val <= extent[1];\n}\nexport function normalize(val, extent) {\n  if (extent[1] === extent[0]) {\n    return 0.5;\n  }\n\n  return (val - extent[0]) / (extent[1] - extent[0]);\n}\nexport function scale(val, extent) {\n  return val * (extent[1] - extent[0]) + extent[0];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar TYPE_DELIMITER = '.';\nvar IS_CONTAINER = '___EC__COMPONENT__CONTAINER___';\nvar IS_EXTENDED_CLASS = '___EC__EXTENDED_CLASS___';\n/**\n * Notice, parseClassType('') should returns {main: '', sub: ''}\n * @public\n */\n\nexport function parseClassType(componentType) {\n  var ret = {\n    main: '',\n    sub: ''\n  };\n\n  if (componentType) {\n    var typeArr = componentType.split(TYPE_DELIMITER);\n    ret.main = typeArr[0] || '';\n    ret.sub = typeArr[1] || '';\n  }\n\n  return ret;\n}\n/**\n * @public\n */\n\nfunction checkClassType(componentType) {\n  zrUtil.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType), 'componentType \"' + componentType + '\" illegal');\n}\n\nexport function isExtendedClass(clz) {\n  return !!(clz && clz[IS_EXTENDED_CLASS]);\n}\n/**\n * Implements `ExtendableConstructor` for `rootClz`.\n *\n * @usage\n * ```ts\n * class Xxx {}\n * type XxxConstructor = typeof Xxx & ExtendableConstructor\n * enableClassExtend(Xxx as XxxConstructor);\n * ```\n */\n\nexport function enableClassExtend(rootClz, mandatoryMethods) {\n  rootClz.$constructor = rootClz; // FIXME: not necessary?\n\n  rootClz.extend = function (proto) {\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.each(mandatoryMethods, function (method) {\n        if (!proto[method]) {\n          console.warn('Method `' + method + '` should be implemented' + (proto.type ? ' in ' + proto.type : '') + '.');\n        }\n      });\n    }\n\n    var superClass = this;\n    var ExtendedClass;\n\n    if (isESClass(superClass)) {\n      ExtendedClass =\n      /** @class */\n      function (_super) {\n        __extends(class_1, _super);\n\n        function class_1() {\n          return _super.apply(this, arguments) || this;\n        }\n\n        return class_1;\n      }(superClass);\n    } else {\n      // For backward compat, we both support ts class inheritance and this\n      // \"extend\" approach.\n      // The constructor should keep the same behavior as ts class inheritance:\n      // If this constructor/$constructor is not declared, auto invoke the super\n      // constructor.\n      // If this constructor/$constructor is declared, it is responsible for\n      // calling the super constructor.\n      ExtendedClass = function () {\n        (proto.$constructor || superClass).apply(this, arguments);\n      };\n\n      zrUtil.inherits(ExtendedClass, this);\n    }\n\n    zrUtil.extend(ExtendedClass.prototype, proto);\n    ExtendedClass[IS_EXTENDED_CLASS] = true;\n    ExtendedClass.extend = this.extend;\n    ExtendedClass.superCall = superCall;\n    ExtendedClass.superApply = superApply;\n    ExtendedClass.superClass = superClass;\n    return ExtendedClass;\n  };\n}\n\nfunction isESClass(fn) {\n  return zrUtil.isFunction(fn) && /^class\\s/.test(Function.prototype.toString.call(fn));\n}\n/**\n * A work around to both support ts extend and this extend mechanism.\n * on sub-class.\n * @usage\n * ```ts\n * class Component { ... }\n * classUtil.enableClassExtend(Component);\n * classUtil.enableClassManagement(Component, {registerWhenExtend: true});\n *\n * class Series extends Component { ... }\n * // Without calling `markExtend`, `registerWhenExtend` will not work.\n * Component.markExtend(Series);\n * ```\n */\n\n\nexport function mountExtend(SubClz, SupperClz) {\n  SubClz.extend = SupperClz.extend;\n} // A random offset.\n\nvar classBase = Math.round(Math.random() * 10);\n/**\n * Implements `CheckableConstructor` for `target`.\n * Can not use instanceof, consider different scope by\n * cross domain or es module import in ec extensions.\n * Mount a method \"isInstance()\" to Clz.\n *\n * @usage\n * ```ts\n * class Xxx {}\n * type XxxConstructor = typeof Xxx & CheckableConstructor;\n * enableClassCheck(Xxx as XxxConstructor)\n * ```\n */\n\nexport function enableClassCheck(target) {\n  var classAttr = ['__\\0is_clz', classBase++].join('_');\n  target.prototype[classAttr] = true;\n\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(!target.isInstance, 'The method \"is\" can not be defined.');\n  }\n\n  target.isInstance = function (obj) {\n    return !!(obj && obj[classAttr]);\n  };\n} // superCall should have class info, which can not be fetch from 'this'.\n// Consider this case:\n// class A has method f,\n// class B inherits class A, overrides method f, f call superApply('f'),\n// class C inherits class B, do not overrides method f,\n// then when method of class C is called, dead loop occured.\n\nfunction superCall(context, methodName) {\n  var args = [];\n\n  for (var _i = 2; _i < arguments.length; _i++) {\n    args[_i - 2] = arguments[_i];\n  }\n\n  return this.superClass.prototype[methodName].apply(context, args);\n}\n\nfunction superApply(context, methodName, args) {\n  return this.superClass.prototype[methodName].apply(context, args);\n}\n/**\n * Implements `ClassManager` for `target`\n *\n * @usage\n * ```ts\n * class Xxx {}\n * type XxxConstructor = typeof Xxx & ClassManager\n * enableClassManagement(Xxx as XxxConstructor);\n * ```\n */\n\n\nexport function enableClassManagement(target) {\n  /**\n   * Component model classes\n   * key: componentType,\n   * value:\n   *     componentClass, when componentType is 'a'\n   *     or Object.<subKey, componentClass>, when componentType is 'a.b'\n   */\n  var storage = {};\n\n  target.registerClass = function (clz) {\n    // `type` should not be a \"instance memeber\".\n    // If using TS class, should better declared as `static type = 'series.pie'`.\n    // otherwise users have to mount `type` on prototype manually.\n    // For backward compat and enable instance visit type via `this.type`,\n    // we stil support fetch `type` from prototype.\n    var componentFullType = clz.type || clz.prototype.type;\n\n    if (componentFullType) {\n      checkClassType(componentFullType); // If only static type declared, we assign it to prototype mandatorily.\n\n      clz.prototype.type = componentFullType;\n      var componentTypeInfo = parseClassType(componentFullType);\n\n      if (!componentTypeInfo.sub) {\n        if (process.env.NODE_ENV !== 'production') {\n          if (storage[componentTypeInfo.main]) {\n            console.warn(componentTypeInfo.main + ' exists.');\n          }\n        }\n\n        storage[componentTypeInfo.main] = clz;\n      } else if (componentTypeInfo.sub !== IS_CONTAINER) {\n        var container = makeContainer(componentTypeInfo);\n        container[componentTypeInfo.sub] = clz;\n      }\n    }\n\n    return clz;\n  };\n\n  target.getClass = function (mainType, subType, throwWhenNotFound) {\n    var clz = storage[mainType];\n\n    if (clz && clz[IS_CONTAINER]) {\n      clz = subType ? clz[subType] : null;\n    }\n\n    if (throwWhenNotFound && !clz) {\n      throw new Error(!subType ? mainType + '.' + 'type should be specified.' : 'Component ' + mainType + '.' + (subType || '') + ' is used but not imported.');\n    }\n\n    return clz;\n  };\n\n  target.getClassesByMainType = function (componentType) {\n    var componentTypeInfo = parseClassType(componentType);\n    var result = [];\n    var obj = storage[componentTypeInfo.main];\n\n    if (obj && obj[IS_CONTAINER]) {\n      zrUtil.each(obj, function (o, type) {\n        type !== IS_CONTAINER && result.push(o);\n      });\n    } else {\n      result.push(obj);\n    }\n\n    return result;\n  };\n\n  target.hasClass = function (componentType) {\n    // Just consider componentType.main.\n    var componentTypeInfo = parseClassType(componentType);\n    return !!storage[componentTypeInfo.main];\n  };\n  /**\n   * @return Like ['aa', 'bb'], but can not be ['aa.xx']\n   */\n\n\n  target.getAllClassMainTypes = function () {\n    var types = [];\n    zrUtil.each(storage, function (obj, type) {\n      types.push(type);\n    });\n    return types;\n  };\n  /**\n   * If a main type is container and has sub types\n   */\n\n\n  target.hasSubTypes = function (componentType) {\n    var componentTypeInfo = parseClassType(componentType);\n    var obj = storage[componentTypeInfo.main];\n    return obj && obj[IS_CONTAINER];\n  };\n\n  function makeContainer(componentTypeInfo) {\n    var container = storage[componentTypeInfo.main];\n\n    if (!container || !container[IS_CONTAINER]) {\n      container = storage[componentTypeInfo.main] = {};\n      container[IS_CONTAINER] = true;\n    }\n\n    return container;\n  }\n} // /**\n//  * @param {string|Array.<string>} properties\n//  */\n// export function setReadOnly(obj, properties) {\n// FIXME It seems broken in IE8 simulation of IE11\n// if (!zrUtil.isArray(properties)) {\n//     properties = properties != null ? [properties] : [];\n// }\n// zrUtil.each(properties, function (prop) {\n//     let value = obj[prop];\n//     Object.defineProperty\n//         && Object.defineProperty(obj, prop, {\n//             value: value, writable: false\n//         });\n//     zrUtil.isArray(obj[prop])\n//         && Object.freeze\n//         && Object.freeze(obj[prop]);\n// });\n// }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parseClassType } from './clazz.js';\nimport { makePrintable } from './log.js'; // A random offset\n\nvar base = Math.round(Math.random() * 10);\n/**\n * @public\n * @param {string} type\n * @return {string}\n */\n\nexport function getUID(type) {\n  // Considering the case of crossing js context,\n  // use Math.random to make id as unique as possible.\n  return [type || '', base++].join('_');\n}\n/**\n * Implements `SubTypeDefaulterManager` for `target`.\n */\n\nexport function enableSubTypeDefaulter(target) {\n  var subTypeDefaulters = {};\n\n  target.registerSubTypeDefaulter = function (componentType, defaulter) {\n    var componentTypeInfo = parseClassType(componentType);\n    subTypeDefaulters[componentTypeInfo.main] = defaulter;\n  };\n\n  target.determineSubType = function (componentType, option) {\n    var type = option.type;\n\n    if (!type) {\n      var componentTypeMain = parseClassType(componentType).main;\n\n      if (target.hasSubTypes(componentType) && subTypeDefaulters[componentTypeMain]) {\n        type = subTypeDefaulters[componentTypeMain](option);\n      }\n    }\n\n    return type;\n  };\n}\n/**\n * Implements `TopologicalTravelable<any>` for `entity`.\n *\n * Topological travel on Activity Network (Activity On Vertices).\n * Dependencies is defined in Model.prototype.dependencies, like ['xAxis', 'yAxis'].\n * If 'xAxis' or 'yAxis' is absent in componentTypeList, just ignore it in topology.\n * If there is circular dependencey, Error will be thrown.\n */\n\nexport function enableTopologicalTravel(entity, dependencyGetter) {\n  /**\n   * @param targetNameList Target Component type list.\n   *                       Can be ['aa', 'bb', 'aa.xx']\n   * @param fullNameList By which we can build dependency graph.\n   * @param callback Params: componentType, dependencies.\n   * @param context Scope of callback.\n   */\n  entity.topologicalTravel = function (targetNameList, fullNameList, callback, context) {\n    if (!targetNameList.length) {\n      return;\n    }\n\n    var result = makeDepndencyGraph(fullNameList);\n    var graph = result.graph;\n    var noEntryList = result.noEntryList;\n    var targetNameSet = {};\n    zrUtil.each(targetNameList, function (name) {\n      targetNameSet[name] = true;\n    });\n\n    while (noEntryList.length) {\n      var currComponentType = noEntryList.pop();\n      var currVertex = graph[currComponentType];\n      var isInTargetNameSet = !!targetNameSet[currComponentType];\n\n      if (isInTargetNameSet) {\n        callback.call(context, currComponentType, currVertex.originalDeps.slice());\n        delete targetNameSet[currComponentType];\n      }\n\n      zrUtil.each(currVertex.successor, isInTargetNameSet ? removeEdgeAndAdd : removeEdge);\n    }\n\n    zrUtil.each(targetNameSet, function () {\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('Circular dependency may exists: ', targetNameSet, targetNameList, fullNameList);\n      }\n\n      throw new Error(errMsg);\n    });\n\n    function removeEdge(succComponentType) {\n      graph[succComponentType].entryCount--;\n\n      if (graph[succComponentType].entryCount === 0) {\n        noEntryList.push(succComponentType);\n      }\n    } // Consider this case: legend depends on series, and we call\n    // chart.setOption({series: [...]}), where only series is in option.\n    // If we do not have 'removeEdgeAndAdd', legendModel.mergeOption will\n    // not be called, but only sereis.mergeOption is called. Thus legend\n    // have no chance to update its local record about series (like which\n    // name of series is available in legend).\n\n\n    function removeEdgeAndAdd(succComponentType) {\n      targetNameSet[succComponentType] = true;\n      removeEdge(succComponentType);\n    }\n  };\n\n  function makeDepndencyGraph(fullNameList) {\n    var graph = {};\n    var noEntryList = [];\n    zrUtil.each(fullNameList, function (name) {\n      var thisItem = createDependencyGraphItem(graph, name);\n      var originalDeps = thisItem.originalDeps = dependencyGetter(name);\n      var availableDeps = getAvailableDependencies(originalDeps, fullNameList);\n      thisItem.entryCount = availableDeps.length;\n\n      if (thisItem.entryCount === 0) {\n        noEntryList.push(name);\n      }\n\n      zrUtil.each(availableDeps, function (dependentName) {\n        if (zrUtil.indexOf(thisItem.predecessor, dependentName) < 0) {\n          thisItem.predecessor.push(dependentName);\n        }\n\n        var thatItem = createDependencyGraphItem(graph, dependentName);\n\n        if (zrUtil.indexOf(thatItem.successor, dependentName) < 0) {\n          thatItem.successor.push(name);\n        }\n      });\n    });\n    return {\n      graph: graph,\n      noEntryList: noEntryList\n    };\n  }\n\n  function createDependencyGraphItem(graph, name) {\n    if (!graph[name]) {\n      graph[name] = {\n        predecessor: [],\n        successor: []\n      };\n    }\n\n    return graph[name];\n  }\n\n  function getAvailableDependencies(originalDeps, fullNameList) {\n    var availableDeps = [];\n    zrUtil.each(originalDeps, function (dep) {\n      zrUtil.indexOf(fullNameList, dep) >= 0 && availableDeps.push(dep);\n    });\n    return availableDeps;\n  }\n}\nexport function inheritDefaultOption(superOption, subOption) {\n  // See also `model/Component.ts#getDefaultOption`\n  return zrUtil.merge(zrUtil.merge({}, superOption, true), subOption, true);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function findEventDispatcher(target, det, returnFirstMatch) {\n  var found;\n\n  while (target) {\n    if (det(target)) {\n      found = target;\n\n      if (returnFirstMatch) {\n        break;\n      }\n    }\n\n    target = target.__hostTarget || target.parent;\n  }\n\n  return found;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { encodeHTML } from 'zrender/lib/core/dom.js';\nimport { parseDate, isNumeric, numericToNumber } from './number.js';\nimport { format as timeFormat, pad } from './time.js';\nimport { deprecateReplaceLog } from './log.js';\n/**\n * Add a comma each three digit.\n */\n\nexport function addCommas(x) {\n  if (!isNumeric(x)) {\n    return zrUtil.isString(x) ? x : '-';\n  }\n\n  var parts = (x + '').split('.');\n  return parts[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,') + (parts.length > 1 ? '.' + parts[1] : '');\n}\nexport function toCamelCase(str, upperCaseFirst) {\n  str = (str || '').toLowerCase().replace(/-(.)/g, function (match, group1) {\n    return group1.toUpperCase();\n  });\n\n  if (upperCaseFirst && str) {\n    str = str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  return str;\n}\nexport var normalizeCssArray = zrUtil.normalizeCssArray;\nexport { encodeHTML };\n/**\n * Make value user readable for tooltip and label.\n * \"User readable\":\n *     Try to not print programmer-specific text like NaN, Infinity, null, undefined.\n *     Avoid to display an empty string, which users can not recognize there is\n *     a value and it might look like a bug.\n */\n\nexport function makeValueReadable(value, valueType, useUTC) {\n  var USER_READABLE_DEFUALT_TIME_PATTERN = '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}';\n\n  function stringToUserReadable(str) {\n    return str && zrUtil.trim(str) ? str : '-';\n  }\n\n  function isNumberUserReadable(num) {\n    return !!(num != null && !isNaN(num) && isFinite(num));\n  }\n\n  var isTypeTime = valueType === 'time';\n  var isValueDate = value instanceof Date;\n\n  if (isTypeTime || isValueDate) {\n    var date = isTypeTime ? parseDate(value) : value;\n\n    if (!isNaN(+date)) {\n      return timeFormat(date, USER_READABLE_DEFUALT_TIME_PATTERN, useUTC);\n    } else if (isValueDate) {\n      return '-';\n    } // In other cases, continue to try to display the value in the following code.\n\n  }\n\n  if (valueType === 'ordinal') {\n    return zrUtil.isStringSafe(value) ? stringToUserReadable(value) : zrUtil.isNumber(value) ? isNumberUserReadable(value) ? value + '' : '-' : '-';\n  } // By default.\n\n\n  var numericResult = numericToNumber(value);\n  return isNumberUserReadable(numericResult) ? addCommas(numericResult) : zrUtil.isStringSafe(value) ? stringToUserReadable(value) : typeof value === 'boolean' ? value + '' : '-';\n}\nvar TPL_VAR_ALIAS = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];\n\nvar wrapVar = function (varName, seriesIdx) {\n  return '{' + varName + (seriesIdx == null ? '' : seriesIdx) + '}';\n};\n/**\n * Template formatter\n * @param {Array.<Object>|Object} paramsList\n */\n\n\nexport function formatTpl(tpl, paramsList, encode) {\n  if (!zrUtil.isArray(paramsList)) {\n    paramsList = [paramsList];\n  }\n\n  var seriesLen = paramsList.length;\n\n  if (!seriesLen) {\n    return '';\n  }\n\n  var $vars = paramsList[0].$vars || [];\n\n  for (var i = 0; i < $vars.length; i++) {\n    var alias = TPL_VAR_ALIAS[i];\n    tpl = tpl.replace(wrapVar(alias), wrapVar(alias, 0));\n  }\n\n  for (var seriesIdx = 0; seriesIdx < seriesLen; seriesIdx++) {\n    for (var k = 0; k < $vars.length; k++) {\n      var val = paramsList[seriesIdx][$vars[k]];\n      tpl = tpl.replace(wrapVar(TPL_VAR_ALIAS[k], seriesIdx), encode ? encodeHTML(val) : val);\n    }\n  }\n\n  return tpl;\n}\n/**\n * simple Template formatter\n */\n\nexport function formatTplSimple(tpl, param, encode) {\n  zrUtil.each(param, function (value, key) {\n    tpl = tpl.replace('{' + key + '}', encode ? encodeHTML(value) : value);\n  });\n  return tpl;\n}\nexport function getTooltipMarker(inOpt, extraCssText) {\n  var opt = zrUtil.isString(inOpt) ? {\n    color: inOpt,\n    extraCssText: extraCssText\n  } : inOpt || {};\n  var color = opt.color;\n  var type = opt.type;\n  extraCssText = opt.extraCssText;\n  var renderMode = opt.renderMode || 'html';\n\n  if (!color) {\n    return '';\n  }\n\n  if (renderMode === 'html') {\n    return type === 'subItem' ? '<span style=\"display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;' + 'border-radius:4px;width:4px;height:4px;background-color:' // Only support string\n    + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>' : '<span style=\"display:inline-block;margin-right:4px;' + 'border-radius:10px;width:10px;height:10px;background-color:' + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>';\n  } else {\n    // Should better not to auto generate style name by auto-increment number here.\n    // Because this util is usually called in tooltip formatter, which is probably\n    // called repeatly when mouse move and the auto-increment number increases fast.\n    // Users can make their own style name by theirselves, make it unique and readable.\n    var markerId = opt.markerId || 'markerX';\n    return {\n      renderMode: renderMode,\n      content: '{' + markerId + '|}  ',\n      style: type === 'subItem' ? {\n        width: 4,\n        height: 4,\n        borderRadius: 2,\n        backgroundColor: color\n      } : {\n        width: 10,\n        height: 10,\n        borderRadius: 5,\n        backgroundColor: color\n      }\n    };\n  }\n}\n/**\n * @deprecated Use `time/format` instead.\n * ISO Date format\n * @param {string} tpl\n * @param {number} value\n * @param {boolean} [isUTC=false] Default in local time.\n *           see `module:echarts/scale/Time`\n *           and `module:echarts/util/number#parseDate`.\n * @inner\n */\n\nexport function formatTime(tpl, value, isUTC) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateReplaceLog('echarts.format.formatTime', 'echarts.time.format');\n  }\n\n  if (tpl === 'week' || tpl === 'month' || tpl === 'quarter' || tpl === 'half-year' || tpl === 'year') {\n    tpl = 'MM-dd\\nyyyy';\n  }\n\n  var date = parseDate(value);\n  var getUTC = isUTC ? 'getUTC' : 'get';\n  var y = date[getUTC + 'FullYear']();\n  var M = date[getUTC + 'Month']() + 1;\n  var d = date[getUTC + 'Date']();\n  var h = date[getUTC + 'Hours']();\n  var m = date[getUTC + 'Minutes']();\n  var s = date[getUTC + 'Seconds']();\n  var S = date[getUTC + 'Milliseconds']();\n  tpl = tpl.replace('MM', pad(M, 2)).replace('M', M).replace('yyyy', y).replace('yy', pad(y % 100 + '', 2)).replace('dd', pad(d, 2)).replace('d', d).replace('hh', pad(h, 2)).replace('h', h).replace('mm', pad(m, 2)).replace('m', m).replace('ss', pad(s, 2)).replace('s', s).replace('SSS', pad(S, 3));\n  return tpl;\n}\n/**\n * Capital first\n * @param {string} str\n * @return {string}\n */\n\nexport function capitalFirst(str) {\n  return str ? str.charAt(0).toUpperCase() + str.substr(1) : str;\n}\n/**\n * @return Never be null/undefined.\n */\n\nexport function convertToColorString(color, defaultColor) {\n  defaultColor = defaultColor || 'transparent';\n  return zrUtil.isString(color) ? color : zrUtil.isObject(color) ? color.colorStops && (color.colorStops[0] || {}).color || defaultColor : defaultColor;\n}\nexport { truncateText } from 'zrender/lib/graphic/helper/parseText.js';\n/**\n * open new tab\n * @param link url\n * @param target blank or self\n */\n\nexport function windowOpen(link, target) {\n  /* global window */\n  if (target === '_blank' || target === 'blank') {\n    var blank = window.open();\n    blank.opener = null;\n    blank.location.href = link;\n  } else {\n    window.open(link, target);\n  }\n}\nexport { getTextRect } from '../legacy/getTextRect.js';","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as pathTool from 'zrender/lib/tool/path.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport Transformable from 'zrender/lib/core/Transformable.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport Circle from 'zrender/lib/graphic/shape/Circle.js';\nimport Ellipse from 'zrender/lib/graphic/shape/Ellipse.js';\nimport Sector from 'zrender/lib/graphic/shape/Sector.js';\nimport Ring from 'zrender/lib/graphic/shape/Ring.js';\nimport Polygon from 'zrender/lib/graphic/shape/Polygon.js';\nimport Polyline from 'zrender/lib/graphic/shape/Polyline.js';\nimport Rect from 'zrender/lib/graphic/shape/Rect.js';\nimport Line from 'zrender/lib/graphic/shape/Line.js';\nimport BezierCurve from 'zrender/lib/graphic/shape/BezierCurve.js';\nimport Arc from 'zrender/lib/graphic/shape/Arc.js';\nimport CompoundPath from 'zrender/lib/graphic/CompoundPath.js';\nimport LinearGradient from 'zrender/lib/graphic/LinearGradient.js';\nimport RadialGradient from 'zrender/lib/graphic/RadialGradient.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport OrientedBoundingRect from 'zrender/lib/core/OrientedBoundingRect.js';\nimport Point from 'zrender/lib/core/Point.js';\nimport IncrementalDisplayable from 'zrender/lib/graphic/IncrementalDisplayable.js';\nimport * as subPixelOptimizeUtil from 'zrender/lib/graphic/helper/subPixelOptimize.js';\nimport { extend, isArrayLike, map, defaults, isString, keys, each, hasOwn, isArray } from 'zrender/lib/core/util.js';\nimport { getECData } from './innerStore.js';\nimport { updateProps, initProps, removeElement, removeElementWithFadeOut, isElementRemoved } from '../animation/basicTransition.js';\n/**\n * @deprecated export for compatitable reason\n */\n\nexport { updateProps, initProps, removeElement, removeElementWithFadeOut, isElementRemoved };\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar _customShapeMap = {};\n/**\n * Extend shape with parameters\n */\n\nexport function extendShape(opts) {\n  return Path.extend(opts);\n}\nvar extendPathFromString = pathTool.extendFromString;\n/**\n * Extend path\n */\n\nexport function extendPath(pathData, opts) {\n  return extendPathFromString(pathData, opts);\n}\n/**\n * Register a user defined shape.\n * The shape class can be fetched by `getShapeClass`\n * This method will overwrite the registered shapes, including\n * the registered built-in shapes, if using the same `name`.\n * The shape can be used in `custom series` and\n * `graphic component` by declaring `{type: name}`.\n *\n * @param name\n * @param ShapeClass Can be generated by `extendShape`.\n */\n\nexport function registerShape(name, ShapeClass) {\n  _customShapeMap[name] = ShapeClass;\n}\n/**\n * Find shape class registered by `registerShape`. Usually used in\n * fetching user defined shape.\n *\n * [Caution]:\n * (1) This method **MUST NOT be used inside echarts !!!**, unless it is prepared\n * to use user registered shapes.\n * Because the built-in shape (see `getBuiltInShape`) will be registered by\n * `registerShape` by default. That enables users to get both built-in\n * shapes as well as the shapes belonging to themsleves. But users can overwrite\n * the built-in shapes by using names like 'circle', 'rect' via calling\n * `registerShape`. So the echarts inner featrues should not fetch shapes from here\n * in case that it is overwritten by users, except that some features, like\n * `custom series`, `graphic component`, do it deliberately.\n *\n * (2) In the features like `custom series`, `graphic component`, the user input\n * `{tpye: 'xxx'}` does not only specify shapes but also specify other graphic\n * elements like `'group'`, `'text'`, `'image'` or event `'path'`. Those names\n * are reserved names, that is, if some user register a shape named `'image'`,\n * the shape will not be used. If we intending to add some more reserved names\n * in feature, that might bring break changes (disable some existing user shape\n * names). But that case probably rearly happen. So we dont make more mechanism\n * to resolve this issue here.\n *\n * @param name\n * @return The shape class. If not found, return nothing.\n */\n\nexport function getShapeClass(name) {\n  if (_customShapeMap.hasOwnProperty(name)) {\n    return _customShapeMap[name];\n  }\n}\n/**\n * Create a path element from path data string\n * @param pathData\n * @param opts\n * @param rect\n * @param layout 'center' or 'cover' default to be cover\n */\n\nexport function makePath(pathData, opts, rect, layout) {\n  var path = pathTool.createFromString(pathData, opts);\n\n  if (rect) {\n    if (layout === 'center') {\n      rect = centerGraphic(rect, path.getBoundingRect());\n    }\n\n    resizePath(path, rect);\n  }\n\n  return path;\n}\n/**\n * Create a image element from image url\n * @param imageUrl image url\n * @param opts options\n * @param rect constrain rect\n * @param layout 'center' or 'cover'. Default to be 'cover'\n */\n\nexport function makeImage(imageUrl, rect, layout) {\n  var zrImg = new ZRImage({\n    style: {\n      image: imageUrl,\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    onload: function (img) {\n      if (layout === 'center') {\n        var boundingRect = {\n          width: img.width,\n          height: img.height\n        };\n        zrImg.setStyle(centerGraphic(rect, boundingRect));\n      }\n    }\n  });\n  return zrImg;\n}\n/**\n * Get position of centered element in bounding box.\n *\n * @param  rect         element local bounding box\n * @param  boundingRect constraint bounding box\n * @return element position containing x, y, width, and height\n */\n\nfunction centerGraphic(rect, boundingRect) {\n  // Set rect to center, keep width / height ratio.\n  var aspect = boundingRect.width / boundingRect.height;\n  var width = rect.height * aspect;\n  var height;\n\n  if (width <= rect.width) {\n    height = rect.height;\n  } else {\n    width = rect.width;\n    height = width / aspect;\n  }\n\n  var cx = rect.x + rect.width / 2;\n  var cy = rect.y + rect.height / 2;\n  return {\n    x: cx - width / 2,\n    y: cy - height / 2,\n    width: width,\n    height: height\n  };\n}\n\nexport var mergePath = pathTool.mergePath;\n/**\n * Resize a path to fit the rect\n * @param path\n * @param rect\n */\n\nexport function resizePath(path, rect) {\n  if (!path.applyTransform) {\n    return;\n  }\n\n  var pathRect = path.getBoundingRect();\n  var m = pathRect.calculateTransform(rect);\n  path.applyTransform(m);\n}\n/**\n * Sub pixel optimize line for canvas\n */\n\nexport function subPixelOptimizeLine(shape, lineWidth) {\n  subPixelOptimizeUtil.subPixelOptimizeLine(shape, shape, {\n    lineWidth: lineWidth\n  });\n  return shape;\n}\n/**\n * Sub pixel optimize rect for canvas\n */\n\nexport function subPixelOptimizeRect(param) {\n  subPixelOptimizeUtil.subPixelOptimizeRect(param.shape, param.shape, param.style);\n  return param;\n}\n/**\n * Sub pixel optimize for canvas\n *\n * @param position Coordinate, such as x, y\n * @param lineWidth Should be nonnegative integer.\n * @param positiveOrNegative Default false (negative).\n * @return Optimized position.\n */\n\nexport var subPixelOptimize = subPixelOptimizeUtil.subPixelOptimize;\n/**\n * Get transform matrix of target (param target),\n * in coordinate of its ancestor (param ancestor)\n *\n * @param target\n * @param [ancestor]\n */\n\nexport function getTransform(target, ancestor) {\n  var mat = matrix.identity([]);\n\n  while (target && target !== ancestor) {\n    matrix.mul(mat, target.getLocalTransform(), mat);\n    target = target.parent;\n  }\n\n  return mat;\n}\n/**\n * Apply transform to an vertex.\n * @param target [x, y]\n * @param transform Can be:\n *      + Transform matrix: like [1, 0, 0, 1, 0, 0]\n *      + {position, rotation, scale}, the same as `zrender/Transformable`.\n * @param invert Whether use invert matrix.\n * @return [x, y]\n */\n\nexport function applyTransform(target, transform, invert) {\n  if (transform && !isArrayLike(transform)) {\n    transform = Transformable.getLocalTransform(transform);\n  }\n\n  if (invert) {\n    transform = matrix.invert([], transform);\n  }\n\n  return vector.applyTransform([], target, transform);\n}\n/**\n * @param direction 'left' 'right' 'top' 'bottom'\n * @param transform Transform matrix: like [1, 0, 0, 1, 0, 0]\n * @param invert Whether use invert matrix.\n * @return Transformed direction. 'left' 'right' 'top' 'bottom'\n */\n\nexport function transformDirection(direction, transform, invert) {\n  // Pick a base, ensure that transform result will not be (0, 0).\n  var hBase = transform[4] === 0 || transform[5] === 0 || transform[0] === 0 ? 1 : Math.abs(2 * transform[4] / transform[0]);\n  var vBase = transform[4] === 0 || transform[5] === 0 || transform[2] === 0 ? 1 : Math.abs(2 * transform[4] / transform[2]);\n  var vertex = [direction === 'left' ? -hBase : direction === 'right' ? hBase : 0, direction === 'top' ? -vBase : direction === 'bottom' ? vBase : 0];\n  vertex = applyTransform(vertex, transform, invert);\n  return Math.abs(vertex[0]) > Math.abs(vertex[1]) ? vertex[0] > 0 ? 'right' : 'left' : vertex[1] > 0 ? 'bottom' : 'top';\n}\n\nfunction isNotGroup(el) {\n  return !el.isGroup;\n}\n\nfunction isPath(el) {\n  return el.shape != null;\n}\n/**\n * Apply group transition animation from g1 to g2.\n * If no animatableModel, no animation.\n */\n\n\nexport function groupTransition(g1, g2, animatableModel) {\n  if (!g1 || !g2) {\n    return;\n  }\n\n  function getElMap(g) {\n    var elMap = {};\n    g.traverse(function (el) {\n      if (isNotGroup(el) && el.anid) {\n        elMap[el.anid] = el;\n      }\n    });\n    return elMap;\n  }\n\n  function getAnimatableProps(el) {\n    var obj = {\n      x: el.x,\n      y: el.y,\n      rotation: el.rotation\n    };\n\n    if (isPath(el)) {\n      obj.shape = extend({}, el.shape);\n    }\n\n    return obj;\n  }\n\n  var elMap1 = getElMap(g1);\n  g2.traverse(function (el) {\n    if (isNotGroup(el) && el.anid) {\n      var oldEl = elMap1[el.anid];\n\n      if (oldEl) {\n        var newProp = getAnimatableProps(el);\n        el.attr(getAnimatableProps(oldEl));\n        updateProps(el, newProp, animatableModel, getECData(el).dataIndex);\n      }\n    }\n  });\n}\nexport function clipPointsByRect(points, rect) {\n  // FIXME: this way migth be incorrect when grpahic clipped by a corner.\n  // and when element have border.\n  return map(points, function (point) {\n    var x = point[0];\n    x = mathMax(x, rect.x);\n    x = mathMin(x, rect.x + rect.width);\n    var y = point[1];\n    y = mathMax(y, rect.y);\n    y = mathMin(y, rect.y + rect.height);\n    return [x, y];\n  });\n}\n/**\n * Return a new clipped rect. If rect size are negative, return undefined.\n */\n\nexport function clipRectByRect(targetRect, rect) {\n  var x = mathMax(targetRect.x, rect.x);\n  var x2 = mathMin(targetRect.x + targetRect.width, rect.x + rect.width);\n  var y = mathMax(targetRect.y, rect.y);\n  var y2 = mathMin(targetRect.y + targetRect.height, rect.y + rect.height); // If the total rect is cliped, nothing, including the border,\n  // should be painted. So return undefined.\n\n  if (x2 >= x && y2 >= y) {\n    return {\n      x: x,\n      y: y,\n      width: x2 - x,\n      height: y2 - y\n    };\n  }\n}\nexport function createIcon(iconStr, // Support 'image://' or 'path://' or direct svg path.\nopt, rect) {\n  var innerOpts = extend({\n    rectHover: true\n  }, opt);\n  var style = innerOpts.style = {\n    strokeNoScale: true\n  };\n  rect = rect || {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  };\n\n  if (iconStr) {\n    return iconStr.indexOf('image://') === 0 ? (style.image = iconStr.slice(8), defaults(style, rect), new ZRImage(innerOpts)) : makePath(iconStr.replace('path://', ''), innerOpts, rect, 'center');\n  }\n}\n/**\n * Return `true` if the given line (line `a`) and the given polygon\n * are intersect.\n * Note that we do not count colinear as intersect here because no\n * requirement for that. We could do that if required in future.\n */\n\nexport function linePolygonIntersect(a1x, a1y, a2x, a2y, points) {\n  for (var i = 0, p2 = points[points.length - 1]; i < points.length; i++) {\n    var p = points[i];\n\n    if (lineLineIntersect(a1x, a1y, a2x, a2y, p[0], p[1], p2[0], p2[1])) {\n      return true;\n    }\n\n    p2 = p;\n  }\n}\n/**\n * Return `true` if the given two lines (line `a` and line `b`)\n * are intersect.\n * Note that we do not count colinear as intersect here because no\n * requirement for that. We could do that if required in future.\n */\n\nexport function lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n  // let `vec_m` to be `vec_a2 - vec_a1` and `vec_n` to be `vec_b2 - vec_b1`.\n  var mx = a2x - a1x;\n  var my = a2y - a1y;\n  var nx = b2x - b1x;\n  var ny = b2y - b1y; // `vec_m` and `vec_n` are parallel iff\n  //     exising `k` such that `vec_m = k · vec_n`, equivalent to `vec_m X vec_n = 0`.\n\n  var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n\n  if (nearZero(nmCrossProduct)) {\n    return false;\n  } // `vec_m` and `vec_n` are intersect iff\n  //     existing `p` and `q` in [0, 1] such that `vec_a1 + p * vec_m = vec_b1 + q * vec_n`,\n  //     such that `q = ((vec_a1 - vec_b1) X vec_m) / (vec_n X vec_m)`\n  //           and `p = ((vec_a1 - vec_b1) X vec_n) / (vec_n X vec_m)`.\n\n\n  var b1a1x = a1x - b1x;\n  var b1a1y = a1y - b1y;\n  var q = crossProduct2d(b1a1x, b1a1y, mx, my) / nmCrossProduct;\n\n  if (q < 0 || q > 1) {\n    return false;\n  }\n\n  var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n\n  if (p < 0 || p > 1) {\n    return false;\n  }\n\n  return true;\n}\n/**\n * Cross product of 2-dimension vector.\n */\n\nfunction crossProduct2d(x1, y1, x2, y2) {\n  return x1 * y2 - x2 * y1;\n}\n\nfunction nearZero(val) {\n  return val <= 1e-6 && val >= -1e-6;\n}\n\nexport function setTooltipConfig(opt) {\n  var itemTooltipOption = opt.itemTooltipOption;\n  var componentModel = opt.componentModel;\n  var itemName = opt.itemName;\n  var itemTooltipOptionObj = isString(itemTooltipOption) ? {\n    formatter: itemTooltipOption\n  } : itemTooltipOption;\n  var mainType = componentModel.mainType;\n  var componentIndex = componentModel.componentIndex;\n  var formatterParams = {\n    componentType: mainType,\n    name: itemName,\n    $vars: ['name']\n  };\n  formatterParams[mainType + 'Index'] = componentIndex;\n  var formatterParamsExtra = opt.formatterParamsExtra;\n\n  if (formatterParamsExtra) {\n    each(keys(formatterParamsExtra), function (key) {\n      if (!hasOwn(formatterParams, key)) {\n        formatterParams[key] = formatterParamsExtra[key];\n        formatterParams.$vars.push(key);\n      }\n    });\n  }\n\n  var ecData = getECData(opt.el);\n  ecData.componentMainType = mainType;\n  ecData.componentIndex = componentIndex;\n  ecData.tooltipConfig = {\n    name: itemName,\n    option: defaults({\n      content: itemName,\n      formatterParams: formatterParams\n    }, itemTooltipOptionObj)\n  };\n}\n\nfunction traverseElement(el, cb) {\n  var stopped; // TODO\n  // Polyfill for fixing zrender group traverse don't visit it's root issue.\n\n  if (el.isGroup) {\n    stopped = cb(el);\n  }\n\n  if (!stopped) {\n    el.traverse(cb);\n  }\n}\n\nexport function traverseElements(els, cb) {\n  if (els) {\n    if (isArray(els)) {\n      for (var i = 0; i < els.length; i++) {\n        traverseElement(els[i], cb);\n      }\n    } else {\n      traverseElement(els, cb);\n    }\n  }\n} // Register built-in shapes. These shapes might be overwirtten\n// by users, although we do not recommend that.\n\nregisterShape('circle', Circle);\nregisterShape('ellipse', Ellipse);\nregisterShape('sector', Sector);\nregisterShape('ring', Ring);\nregisterShape('polygon', Polygon);\nregisterShape('polyline', Polyline);\nregisterShape('rect', Rect);\nregisterShape('line', Line);\nregisterShape('bezierCurve', BezierCurve);\nregisterShape('arc', Arc);\nexport { Group, ZRImage as Image, ZRText as Text, Circle, Ellipse, Sector, Ring, Polygon, Polyline, Rect, Line, BezierCurve, Arc, IncrementalDisplayable, CompoundPath, LinearGradient, RadialGradient, BoundingRect, OrientedBoundingRect, Point, Path };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from './model.js';\nexport var getECData = makeInner();\nexport var setCommonECData = function (seriesIndex, dataType, dataIdx, el) {\n  if (el) {\n    var ecData = getECData(el); // Add data index and series index for indexing the data by element\n    // Useful in tooltip\n\n    ecData.dataIndex = dataIdx;\n    ecData.dataType = dataType;\n    ecData.seriesIndex = seriesIndex; // TODO: not store dataIndex on children.\n\n    if (el.type === 'group') {\n      el.traverse(function (child) {\n        var childECData = getECData(child);\n        childECData.seriesIndex = seriesIndex;\n        childECData.dataIndex = dataIdx;\n        childECData.dataType = dataType;\n      });\n    }\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Layout helpers for each component positioning\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { parsePercent } from './number.js';\nimport * as formatUtil from './format.js';\nvar each = zrUtil.each;\n/**\n * @public\n */\n\nexport var LOCATION_PARAMS = ['left', 'right', 'top', 'bottom', 'width', 'height'];\n/**\n * @public\n */\n\nexport var HV_NAMES = [['width', 'left', 'right'], ['height', 'top', 'bottom']];\n\nfunction boxLayout(orient, group, gap, maxWidth, maxHeight) {\n  var x = 0;\n  var y = 0;\n\n  if (maxWidth == null) {\n    maxWidth = Infinity;\n  }\n\n  if (maxHeight == null) {\n    maxHeight = Infinity;\n  }\n\n  var currentLineMaxSize = 0;\n  group.eachChild(function (child, idx) {\n    var rect = child.getBoundingRect();\n    var nextChild = group.childAt(idx + 1);\n    var nextChildRect = nextChild && nextChild.getBoundingRect();\n    var nextX;\n    var nextY;\n\n    if (orient === 'horizontal') {\n      var moveX = rect.width + (nextChildRect ? -nextChildRect.x + rect.x : 0);\n      nextX = x + moveX; // Wrap when width exceeds maxWidth or meet a `newline` group\n      // FIXME compare before adding gap?\n\n      if (nextX > maxWidth || child.newline) {\n        x = 0;\n        nextX = moveX;\n        y += currentLineMaxSize + gap;\n        currentLineMaxSize = rect.height;\n      } else {\n        // FIXME: consider rect.y is not `0`?\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.height);\n      }\n    } else {\n      var moveY = rect.height + (nextChildRect ? -nextChildRect.y + rect.y : 0);\n      nextY = y + moveY; // Wrap when width exceeds maxHeight or meet a `newline` group\n\n      if (nextY > maxHeight || child.newline) {\n        x += currentLineMaxSize + gap;\n        y = 0;\n        nextY = moveY;\n        currentLineMaxSize = rect.width;\n      } else {\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.width);\n      }\n    }\n\n    if (child.newline) {\n      return;\n    }\n\n    child.x = x;\n    child.y = y;\n    child.markRedraw();\n    orient === 'horizontal' ? x = nextX + gap : y = nextY + gap;\n  });\n}\n/**\n * VBox or HBox layouting\n * @param {string} orient\n * @param {module:zrender/graphic/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\n\n\nexport var box = boxLayout;\n/**\n * VBox layouting\n * @param {module:zrender/graphic/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\n\nexport var vbox = zrUtil.curry(boxLayout, 'vertical');\n/**\n * HBox layouting\n * @param {module:zrender/graphic/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\n\nexport var hbox = zrUtil.curry(boxLayout, 'horizontal');\n/**\n * If x or x2 is not specified or 'center' 'left' 'right',\n * the width would be as long as possible.\n * If y or y2 is not specified or 'middle' 'top' 'bottom',\n * the height would be as long as possible.\n */\n\nexport function getAvailableSize(positionInfo, containerRect, margin) {\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var x = parsePercent(positionInfo.left, containerWidth);\n  var y = parsePercent(positionInfo.top, containerHeight);\n  var x2 = parsePercent(positionInfo.right, containerWidth);\n  var y2 = parsePercent(positionInfo.bottom, containerHeight);\n  (isNaN(x) || isNaN(parseFloat(positionInfo.left))) && (x = 0);\n  (isNaN(x2) || isNaN(parseFloat(positionInfo.right))) && (x2 = containerWidth);\n  (isNaN(y) || isNaN(parseFloat(positionInfo.top))) && (y = 0);\n  (isNaN(y2) || isNaN(parseFloat(positionInfo.bottom))) && (y2 = containerHeight);\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  return {\n    width: Math.max(x2 - x - margin[1] - margin[3], 0),\n    height: Math.max(y2 - y - margin[0] - margin[2], 0)\n  };\n}\n/**\n * Parse position info.\n */\n\nexport function getLayoutRect(positionInfo, containerRect, margin) {\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var left = parsePercent(positionInfo.left, containerWidth);\n  var top = parsePercent(positionInfo.top, containerHeight);\n  var right = parsePercent(positionInfo.right, containerWidth);\n  var bottom = parsePercent(positionInfo.bottom, containerHeight);\n  var width = parsePercent(positionInfo.width, containerWidth);\n  var height = parsePercent(positionInfo.height, containerHeight);\n  var verticalMargin = margin[2] + margin[0];\n  var horizontalMargin = margin[1] + margin[3];\n  var aspect = positionInfo.aspect; // If width is not specified, calculate width from left and right\n\n  if (isNaN(width)) {\n    width = containerWidth - right - horizontalMargin - left;\n  }\n\n  if (isNaN(height)) {\n    height = containerHeight - bottom - verticalMargin - top;\n  }\n\n  if (aspect != null) {\n    // If width and height are not given\n    // 1. Graph should not exceeds the container\n    // 2. Aspect must be keeped\n    // 3. Graph should take the space as more as possible\n    // FIXME\n    // Margin is not considered, because there is no case that both\n    // using margin and aspect so far.\n    if (isNaN(width) && isNaN(height)) {\n      if (aspect > containerWidth / containerHeight) {\n        width = containerWidth * 0.8;\n      } else {\n        height = containerHeight * 0.8;\n      }\n    } // Calculate width or height with given aspect\n\n\n    if (isNaN(width)) {\n      width = aspect * height;\n    }\n\n    if (isNaN(height)) {\n      height = width / aspect;\n    }\n  } // If left is not specified, calculate left from right and width\n\n\n  if (isNaN(left)) {\n    left = containerWidth - right - width - horizontalMargin;\n  }\n\n  if (isNaN(top)) {\n    top = containerHeight - bottom - height - verticalMargin;\n  } // Align left and top\n\n\n  switch (positionInfo.left || positionInfo.right) {\n    case 'center':\n      left = containerWidth / 2 - width / 2 - margin[3];\n      break;\n\n    case 'right':\n      left = containerWidth - width - horizontalMargin;\n      break;\n  }\n\n  switch (positionInfo.top || positionInfo.bottom) {\n    case 'middle':\n    case 'center':\n      top = containerHeight / 2 - height / 2 - margin[0];\n      break;\n\n    case 'bottom':\n      top = containerHeight - height - verticalMargin;\n      break;\n  } // If something is wrong and left, top, width, height are calculated as NaN\n\n\n  left = left || 0;\n  top = top || 0;\n\n  if (isNaN(width)) {\n    // Width may be NaN if only one value is given except width\n    width = containerWidth - horizontalMargin - left - (right || 0);\n  }\n\n  if (isNaN(height)) {\n    // Height may be NaN if only one value is given except height\n    height = containerHeight - verticalMargin - top - (bottom || 0);\n  }\n\n  var rect = new BoundingRect(left + margin[3], top + margin[0], width, height);\n  rect.margin = margin;\n  return rect;\n}\n/**\n * Position a zr element in viewport\n *  Group position is specified by either\n *  {left, top}, {right, bottom}\n *  If all properties exists, right and bottom will be igonred.\n *\n * Logic:\n *     1. Scale (against origin point in parent coord)\n *     2. Rotate (against origin point in parent coord)\n *     3. Traslate (with el.position by this method)\n * So this method only fixes the last step 'Traslate', which does not affect\n * scaling and rotating.\n *\n * If be called repeatly with the same input el, the same result will be gotten.\n *\n * Return true if the layout happend.\n *\n * @param el Should have `getBoundingRect` method.\n * @param positionInfo\n * @param positionInfo.left\n * @param positionInfo.top\n * @param positionInfo.right\n * @param positionInfo.bottom\n * @param positionInfo.width Only for opt.boundingModel: 'raw'\n * @param positionInfo.height Only for opt.boundingModel: 'raw'\n * @param containerRect\n * @param margin\n * @param opt\n * @param opt.hv Only horizontal or only vertical. Default to be [1, 1]\n * @param opt.boundingMode\n *        Specify how to calculate boundingRect when locating.\n *        'all': Position the boundingRect that is transformed and uioned\n *               both itself and its descendants.\n *               This mode simplies confine the elements in the bounding\n *               of their container (e.g., using 'right: 0').\n *        'raw': Position the boundingRect that is not transformed and only itself.\n *               This mode is useful when you want a element can overflow its\n *               container. (Consider a rotated circle needs to be located in a corner.)\n *               In this mode positionInfo.width/height can only be number.\n */\n\nexport function positionElement(el, positionInfo, containerRect, margin, opt, out) {\n  var h = !opt || !opt.hv || opt.hv[0];\n  var v = !opt || !opt.hv || opt.hv[1];\n  var boundingMode = opt && opt.boundingMode || 'all';\n  out = out || el;\n  out.x = el.x;\n  out.y = el.y;\n\n  if (!h && !v) {\n    return false;\n  }\n\n  var rect;\n\n  if (boundingMode === 'raw') {\n    rect = el.type === 'group' ? new BoundingRect(0, 0, +positionInfo.width || 0, +positionInfo.height || 0) : el.getBoundingRect();\n  } else {\n    rect = el.getBoundingRect();\n\n    if (el.needLocalTransform()) {\n      var transform = el.getLocalTransform(); // Notice: raw rect may be inner object of el,\n      // which should not be modified.\n\n      rect = rect.clone();\n      rect.applyTransform(transform);\n    }\n  } // The real width and height can not be specified but calculated by the given el.\n\n\n  var layoutRect = getLayoutRect(zrUtil.defaults({\n    width: rect.width,\n    height: rect.height\n  }, positionInfo), containerRect, margin); // Because 'tranlate' is the last step in transform\n  // (see zrender/core/Transformable#getLocalTransform),\n  // we can just only modify el.position to get final result.\n\n  var dx = h ? layoutRect.x - rect.x : 0;\n  var dy = v ? layoutRect.y - rect.y : 0;\n\n  if (boundingMode === 'raw') {\n    out.x = dx;\n    out.y = dy;\n  } else {\n    out.x += dx;\n    out.y += dy;\n  }\n\n  if (out === el) {\n    el.markRedraw();\n  }\n\n  return true;\n}\n/**\n * @param option Contains some of the properties in HV_NAMES.\n * @param hvIdx 0: horizontal; 1: vertical.\n */\n\nexport function sizeCalculable(option, hvIdx) {\n  return option[HV_NAMES[hvIdx][0]] != null || option[HV_NAMES[hvIdx][1]] != null && option[HV_NAMES[hvIdx][2]] != null;\n}\nexport function fetchLayoutMode(ins) {\n  var layoutMode = ins.layoutMode || ins.constructor.layoutMode;\n  return zrUtil.isObject(layoutMode) ? layoutMode : layoutMode ? {\n    type: layoutMode\n  } : null;\n}\n/**\n * Consider Case:\n * When default option has {left: 0, width: 100}, and we set {right: 0}\n * through setOption or media query, using normal zrUtil.merge will cause\n * {right: 0} does not take effect.\n *\n * @example\n * ComponentModel.extend({\n *     init: function () {\n *         ...\n *         let inputPositionParams = layout.getLayoutParams(option);\n *         this.mergeOption(inputPositionParams);\n *     },\n *     mergeOption: function (newOption) {\n *         newOption && zrUtil.merge(thisOption, newOption, true);\n *         layout.mergeLayoutParam(thisOption, newOption);\n *     }\n * });\n *\n * @param targetOption\n * @param newOption\n * @param opt\n */\n\nexport function mergeLayoutParam(targetOption, newOption, opt) {\n  var ignoreSize = opt && opt.ignoreSize;\n  !zrUtil.isArray(ignoreSize) && (ignoreSize = [ignoreSize, ignoreSize]);\n  var hResult = merge(HV_NAMES[0], 0);\n  var vResult = merge(HV_NAMES[1], 1);\n  copy(HV_NAMES[0], targetOption, hResult);\n  copy(HV_NAMES[1], targetOption, vResult);\n\n  function merge(names, hvIdx) {\n    var newParams = {};\n    var newValueCount = 0;\n    var merged = {};\n    var mergedValueCount = 0;\n    var enoughParamNumber = 2;\n    each(names, function (name) {\n      merged[name] = targetOption[name];\n    });\n    each(names, function (name) {\n      // Consider case: newOption.width is null, which is\n      // set by user for removing width setting.\n      hasProp(newOption, name) && (newParams[name] = merged[name] = newOption[name]);\n      hasValue(newParams, name) && newValueCount++;\n      hasValue(merged, name) && mergedValueCount++;\n    });\n\n    if (ignoreSize[hvIdx]) {\n      // Only one of left/right is premitted to exist.\n      if (hasValue(newOption, names[1])) {\n        merged[names[2]] = null;\n      } else if (hasValue(newOption, names[2])) {\n        merged[names[1]] = null;\n      }\n\n      return merged;\n    } // Case: newOption: {width: ..., right: ...},\n    // or targetOption: {right: ...} and newOption: {width: ...},\n    // There is no conflict when merged only has params count\n    // little than enoughParamNumber.\n\n\n    if (mergedValueCount === enoughParamNumber || !newValueCount) {\n      return merged;\n    } // Case: newOption: {width: ..., right: ...},\n    // Than we can make sure user only want those two, and ignore\n    // all origin params in targetOption.\n    else if (newValueCount >= enoughParamNumber) {\n        return newParams;\n      } else {\n        // Chose another param from targetOption by priority.\n        for (var i = 0; i < names.length; i++) {\n          var name_1 = names[i];\n\n          if (!hasProp(newParams, name_1) && hasProp(targetOption, name_1)) {\n            newParams[name_1] = targetOption[name_1];\n            break;\n          }\n        }\n\n        return newParams;\n      }\n  }\n\n  function hasProp(obj, name) {\n    return obj.hasOwnProperty(name);\n  }\n\n  function hasValue(obj, name) {\n    return obj[name] != null && obj[name] !== 'auto';\n  }\n\n  function copy(names, target, source) {\n    each(names, function (name) {\n      target[name] = source[name];\n    });\n  }\n}\n/**\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n */\n\nexport function getLayoutParams(source) {\n  return copyLayoutParams({}, source);\n}\n/**\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n * @param {Object} source\n * @return {Object} Result contains those props.\n */\n\nexport function copyLayoutParams(target, source) {\n  source && target && each(LOCATION_PARAMS, function (name) {\n    source.hasOwnProperty(name) && (target[name] = source[name]);\n  });\n  return target;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { map, isString, isFunction, eqNaN, isRegExp } from 'zrender/lib/core/util.js';\nvar ECHARTS_PREFIX = '[ECharts] ';\nvar storedLogs = {};\nvar hasConsole = typeof console !== 'undefined' // eslint-disable-next-line\n&& console.warn && console.log;\n\nfunction outputLog(type, str, onlyOnce) {\n  if (hasConsole) {\n    if (onlyOnce) {\n      if (storedLogs[str]) {\n        return;\n      }\n\n      storedLogs[str] = true;\n    } // eslint-disable-next-line\n\n\n    console[type](ECHARTS_PREFIX + str);\n  }\n}\n\nexport function log(str, onlyOnce) {\n  outputLog('log', str, onlyOnce);\n}\nexport function warn(str, onlyOnce) {\n  outputLog('warn', str, onlyOnce);\n}\nexport function error(str, onlyOnce) {\n  outputLog('error', str, onlyOnce);\n}\nexport function deprecateLog(str) {\n  if (process.env.NODE_ENV !== 'production') {\n    // Not display duplicate message.\n    outputLog('warn', 'DEPRECATED: ' + str, true);\n  }\n}\nexport function deprecateReplaceLog(oldOpt, newOpt, scope) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateLog((scope ? \"[\" + scope + \"]\" : '') + (oldOpt + \" is deprecated, use \" + newOpt + \" instead.\"));\n  }\n}\n/**\n * If in __DEV__ environment, get console printable message for users hint.\n * Parameters are separated by ' '.\n * @usage\n * makePrintable('This is an error on', someVar, someObj);\n *\n * @param hintInfo anything about the current execution context to hint users.\n * @throws Error\n */\n\nexport function makePrintable() {\n  var hintInfo = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    hintInfo[_i] = arguments[_i];\n  }\n\n  var msg = '';\n\n  if (process.env.NODE_ENV !== 'production') {\n    // Fuzzy stringify for print.\n    // This code only exist in dev environment.\n    var makePrintableStringIfPossible_1 = function (val) {\n      return val === void 0 ? 'undefined' : val === Infinity ? 'Infinity' : val === -Infinity ? '-Infinity' : eqNaN(val) ? 'NaN' : val instanceof Date ? 'Date(' + val.toISOString() + ')' : isFunction(val) ? 'function () { ... }' : isRegExp(val) ? val + '' : null;\n    };\n\n    msg = map(hintInfo, function (arg) {\n      if (isString(arg)) {\n        // Print without quotation mark for some statement.\n        return arg;\n      } else {\n        var printableStr = makePrintableStringIfPossible_1(arg);\n\n        if (printableStr != null) {\n          return printableStr;\n        } else if (typeof JSON !== 'undefined' && JSON.stringify) {\n          try {\n            return JSON.stringify(arg, function (n, val) {\n              var printableStr = makePrintableStringIfPossible_1(val);\n              return printableStr == null ? val : printableStr;\n            }); // In most cases the info object is small, so do not line break.\n          } catch (err) {\n            return '?';\n          }\n        } else {\n          return '?';\n        }\n      }\n    }).join(' ');\n  }\n\n  return msg;\n}\n/**\n * @throws Error\n */\n\nexport function throwError(msg) {\n  throw new Error(msg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, isObject, isArray, createHashMap, map, assert, isString, indexOf, isStringSafe, isNumber } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { isNumeric, getRandomIdBase, getPrecision, round } from './number.js';\nimport { warn } from './log.js';\n\nfunction interpolateNumber(p0, p1, percent) {\n  return (p1 - p0) * percent + p0;\n}\n/**\n * Make the name displayable. But we should\n * make sure it is not duplicated with user\n * specified name, so use '\\0';\n */\n\n\nvar DUMMY_COMPONENT_NAME_PREFIX = 'series\\0';\nvar INTERNAL_COMPONENT_ID_PREFIX = '\\0_ec_\\0';\n/**\n * If value is not array, then translate it to array.\n * @param  {*} value\n * @return {Array} [value] or value\n */\n\nexport function normalizeToArray(value) {\n  return value instanceof Array ? value : value == null ? [] : [value];\n}\n/**\n * Sync default option between normal and emphasis like `position` and `show`\n * In case some one will write code like\n *     label: {\n *          show: false,\n *          position: 'outside',\n *          fontSize: 18\n *     },\n *     emphasis: {\n *          label: { show: true }\n *     }\n */\n\nexport function defaultEmphasis(opt, key, subOpts) {\n  // Caution: performance sensitive.\n  if (opt) {\n    opt[key] = opt[key] || {};\n    opt.emphasis = opt.emphasis || {};\n    opt.emphasis[key] = opt.emphasis[key] || {}; // Default emphasis option from normal\n\n    for (var i = 0, len = subOpts.length; i < len; i++) {\n      var subOptName = subOpts[i];\n\n      if (!opt.emphasis[key].hasOwnProperty(subOptName) && opt[key].hasOwnProperty(subOptName)) {\n        opt.emphasis[key][subOptName] = opt[key][subOptName];\n      }\n    }\n  }\n}\nexport var TEXT_STYLE_OPTIONS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'rich', 'tag', 'color', 'textBorderColor', 'textBorderWidth', 'width', 'height', 'lineHeight', 'align', 'verticalAlign', 'baseline', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY', 'backgroundColor', 'borderColor', 'borderWidth', 'borderRadius', 'padding']; // modelUtil.LABEL_OPTIONS = modelUtil.TEXT_STYLE_OPTIONS.concat([\n//     'position', 'offset', 'rotate', 'origin', 'show', 'distance', 'formatter',\n//     'fontStyle', 'fontWeight', 'fontSize', 'fontFamily',\n//     // FIXME: deprecated, check and remove it.\n//     'textStyle'\n// ]);\n\n/**\n * The method do not ensure performance.\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n * This helper method retieves value from data.\n */\n\nexport function getDataItemValue(dataItem) {\n  return isObject(dataItem) && !isArray(dataItem) && !(dataItem instanceof Date) ? dataItem.value : dataItem;\n}\n/**\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n * This helper method determine if dataItem has extra option besides value\n */\n\nexport function isDataItemOption(dataItem) {\n  return isObject(dataItem) && !(dataItem instanceof Array); // // markLine data can be array\n  // && !(dataItem[0] && isObject(dataItem[0]) && !(dataItem[0] instanceof Array));\n}\n;\n/**\n * Mapping to existings for merge.\n *\n * Mode \"normalMege\":\n *     The mapping result (merge result) will keep the order of the existing\n *     component, rather than the order of new option. Because we should ensure\n *     some specified index reference (like xAxisIndex) keep work.\n *     And in most cases, \"merge option\" is used to update partial option but not\n *     be expected to change the order.\n *\n * Mode \"replaceMege\":\n *     (1) Only the id mapped components will be merged.\n *     (2) Other existing components (except internal compoonets) will be removed.\n *     (3) Other new options will be used to create new component.\n *     (4) The index of the existing compoents will not be modified.\n *     That means their might be \"hole\" after the removal.\n *     The new components are created first at those available index.\n *\n * Mode \"replaceAll\":\n *     This mode try to support that reproduce an echarts instance from another\n *     echarts instance (via `getOption`) in some simple cases.\n *     In this senario, the `result` index are exactly the consistent with the `newCmptOptions`,\n *     which ensures the compoennt index referring (like `xAxisIndex: ?`) corrent. That is,\n *     the \"hole\" in `newCmptOptions` will also be kept.\n *     On the contrary, other modes try best to eliminate holes.\n *     PENDING: This is an experimental mode yet.\n *\n * @return See the comment of <MappingResult>.\n */\n\nexport function mappingToExists(existings, newCmptOptions, mode) {\n  var isNormalMergeMode = mode === 'normalMerge';\n  var isReplaceMergeMode = mode === 'replaceMerge';\n  var isReplaceAllMode = mode === 'replaceAll';\n  existings = existings || [];\n  newCmptOptions = (newCmptOptions || []).slice();\n  var existingIdIdxMap = createHashMap(); // Validate id and name on user input option.\n\n  each(newCmptOptions, function (cmptOption, index) {\n    if (!isObject(cmptOption)) {\n      newCmptOptions[index] = null;\n      return;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      // There is some legacy case that name is set as `false`.\n      // But should work normally rather than throw error.\n      if (cmptOption.id != null && !isValidIdOrName(cmptOption.id)) {\n        warnInvalidateIdOrName(cmptOption.id);\n      }\n\n      if (cmptOption.name != null && !isValidIdOrName(cmptOption.name)) {\n        warnInvalidateIdOrName(cmptOption.name);\n      }\n    }\n  });\n  var result = prepareResult(existings, existingIdIdxMap, mode);\n\n  if (isNormalMergeMode || isReplaceMergeMode) {\n    mappingById(result, existings, existingIdIdxMap, newCmptOptions);\n  }\n\n  if (isNormalMergeMode) {\n    mappingByName(result, newCmptOptions);\n  }\n\n  if (isNormalMergeMode || isReplaceMergeMode) {\n    mappingByIndex(result, newCmptOptions, isReplaceMergeMode);\n  } else if (isReplaceAllMode) {\n    mappingInReplaceAllMode(result, newCmptOptions);\n  }\n\n  makeIdAndName(result); // The array `result` MUST NOT contain elided items, otherwise the\n  // forEach will ommit those items and result in incorrect result.\n\n  return result;\n}\n\nfunction prepareResult(existings, existingIdIdxMap, mode) {\n  var result = [];\n\n  if (mode === 'replaceAll') {\n    return result;\n  } // Do not use native `map` to in case that the array `existings`\n  // contains elided items, which will be ommited.\n\n\n  for (var index = 0; index < existings.length; index++) {\n    var existing = existings[index]; // Because of replaceMerge, `existing` may be null/undefined.\n\n    if (existing && existing.id != null) {\n      existingIdIdxMap.set(existing.id, index);\n    } // For non-internal-componnets:\n    //     Mode \"normalMerge\": all existings kept.\n    //     Mode \"replaceMerge\": all existing removed unless mapped by id.\n    // For internal-components:\n    //     go with \"replaceMerge\" approach in both mode.\n\n\n    result.push({\n      existing: mode === 'replaceMerge' || isComponentIdInternal(existing) ? null : existing,\n      newOption: null,\n      keyInfo: null,\n      brandNew: null\n    });\n  }\n\n  return result;\n}\n\nfunction mappingById(result, existings, existingIdIdxMap, newCmptOptions) {\n  // Mapping by id if specified.\n  each(newCmptOptions, function (cmptOption, index) {\n    if (!cmptOption || cmptOption.id == null) {\n      return;\n    }\n\n    var optionId = makeComparableKey(cmptOption.id);\n    var existingIdx = existingIdIdxMap.get(optionId);\n\n    if (existingIdx != null) {\n      var resultItem = result[existingIdx];\n      assert(!resultItem.newOption, 'Duplicated option on id \"' + optionId + '\".');\n      resultItem.newOption = cmptOption; // In both mode, if id matched, new option will be merged to\n      // the existings rather than creating new component model.\n\n      resultItem.existing = existings[existingIdx];\n      newCmptOptions[index] = null;\n    }\n  });\n}\n\nfunction mappingByName(result, newCmptOptions) {\n  // Mapping by name if specified.\n  each(newCmptOptions, function (cmptOption, index) {\n    if (!cmptOption || cmptOption.name == null) {\n      return;\n    }\n\n    for (var i = 0; i < result.length; i++) {\n      var existing = result[i].existing;\n\n      if (!result[i].newOption // Consider name: two map to one.\n      // Can not match when both ids existing but different.\n      && existing && (existing.id == null || cmptOption.id == null) && !isComponentIdInternal(cmptOption) && !isComponentIdInternal(existing) && keyExistAndEqual('name', existing, cmptOption)) {\n        result[i].newOption = cmptOption;\n        newCmptOptions[index] = null;\n        return;\n      }\n    }\n  });\n}\n\nfunction mappingByIndex(result, newCmptOptions, brandNew) {\n  each(newCmptOptions, function (cmptOption) {\n    if (!cmptOption) {\n      return;\n    } // Find the first place that not mapped by id and not internal component (consider the \"hole\").\n\n\n    var resultItem;\n    var nextIdx = 0;\n\n    while ( // Be `!resultItem` only when `nextIdx >= result.length`.\n    (resultItem = result[nextIdx]) && ( // (1) Existing models that already have id should be able to mapped to. Because\n    // after mapping performed, model will always be assigned with an id if user not given.\n    // After that all models have id.\n    // (2) If new option has id, it can only set to a hole or append to the last. It should\n    // not be merged to the existings with different id. Because id should not be overwritten.\n    // (3) Name can be overwritten, because axis use name as 'show label text'.\n    resultItem.newOption || isComponentIdInternal(resultItem.existing) || // In mode \"replaceMerge\", here no not-mapped-non-internal-existing.\n    resultItem.existing && cmptOption.id != null && !keyExistAndEqual('id', cmptOption, resultItem.existing))) {\n      nextIdx++;\n    }\n\n    if (resultItem) {\n      resultItem.newOption = cmptOption;\n      resultItem.brandNew = brandNew;\n    } else {\n      result.push({\n        newOption: cmptOption,\n        brandNew: brandNew,\n        existing: null,\n        keyInfo: null\n      });\n    }\n\n    nextIdx++;\n  });\n}\n\nfunction mappingInReplaceAllMode(result, newCmptOptions) {\n  each(newCmptOptions, function (cmptOption) {\n    // The feature \"reproduce\" requires \"hole\" will also reproduced\n    // in case that compoennt index referring are broken.\n    result.push({\n      newOption: cmptOption,\n      brandNew: true,\n      existing: null,\n      keyInfo: null\n    });\n  });\n}\n/**\n * Make id and name for mapping result (result of mappingToExists)\n * into `keyInfo` field.\n */\n\n\nfunction makeIdAndName(mapResult) {\n  // We use this id to hash component models and view instances\n  // in echarts. id can be specified by user, or auto generated.\n  // The id generation rule ensures new view instance are able\n  // to mapped to old instance when setOption are called in\n  // no-merge mode. So we generate model id by name and plus\n  // type in view id.\n  // name can be duplicated among components, which is convenient\n  // to specify multi components (like series) by one name.\n  // Ensure that each id is distinct.\n  var idMap = createHashMap();\n  each(mapResult, function (item) {\n    var existing = item.existing;\n    existing && idMap.set(existing.id, item);\n  });\n  each(mapResult, function (item) {\n    var opt = item.newOption; // Force ensure id not duplicated.\n\n    assert(!opt || opt.id == null || !idMap.get(opt.id) || idMap.get(opt.id) === item, 'id duplicates: ' + (opt && opt.id));\n    opt && opt.id != null && idMap.set(opt.id, item);\n    !item.keyInfo && (item.keyInfo = {});\n  }); // Make name and id.\n\n  each(mapResult, function (item, index) {\n    var existing = item.existing;\n    var opt = item.newOption;\n    var keyInfo = item.keyInfo;\n\n    if (!isObject(opt)) {\n      return;\n    } // name can be overwitten. Consider case: axis.name = '20km'.\n    // But id generated by name will not be changed, which affect\n    // only in that case: setOption with 'not merge mode' and view\n    // instance will be recreated, which can be accepted.\n\n\n    keyInfo.name = opt.name != null ? makeComparableKey(opt.name) : existing ? existing.name // Avoid diffferent series has the same name,\n    // because name may be used like in color pallet.\n    : DUMMY_COMPONENT_NAME_PREFIX + index;\n\n    if (existing) {\n      keyInfo.id = makeComparableKey(existing.id);\n    } else if (opt.id != null) {\n      keyInfo.id = makeComparableKey(opt.id);\n    } else {\n      // Consider this situatoin:\n      //  optionA: [{name: 'a'}, {name: 'a'}, {..}]\n      //  optionB [{..}, {name: 'a'}, {name: 'a'}]\n      // Series with the same name between optionA and optionB\n      // should be mapped.\n      var idNum = 0;\n\n      do {\n        keyInfo.id = '\\0' + keyInfo.name + '\\0' + idNum++;\n      } while (idMap.get(keyInfo.id));\n    }\n\n    idMap.set(keyInfo.id, item);\n  });\n}\n\nfunction keyExistAndEqual(attr, obj1, obj2) {\n  var key1 = convertOptionIdName(obj1[attr], null);\n  var key2 = convertOptionIdName(obj2[attr], null); // See `MappingExistingItem`. `id` and `name` trade string equals to number.\n\n  return key1 != null && key2 != null && key1 === key2;\n}\n/**\n * @return return null if not exist.\n */\n\n\nfunction makeComparableKey(val) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (val == null) {\n      throw new Error();\n    }\n  }\n\n  return convertOptionIdName(val, '');\n}\n\nexport function convertOptionIdName(idOrName, defaultValue) {\n  if (idOrName == null) {\n    return defaultValue;\n  }\n\n  return isString(idOrName) ? idOrName : isNumber(idOrName) || isStringSafe(idOrName) ? idOrName + '' : defaultValue;\n}\n\nfunction warnInvalidateIdOrName(idOrName) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn('`' + idOrName + '` is invalid id or name. Must be a string or number.');\n  }\n}\n\nfunction isValidIdOrName(idOrName) {\n  return isStringSafe(idOrName) || isNumeric(idOrName);\n}\n\nexport function isNameSpecified(componentModel) {\n  var name = componentModel.name; // Is specified when `indexOf` get -1 or > 0.\n\n  return !!(name && name.indexOf(DUMMY_COMPONENT_NAME_PREFIX));\n}\n/**\n * @public\n * @param {Object} cmptOption\n * @return {boolean}\n */\n\nexport function isComponentIdInternal(cmptOption) {\n  return cmptOption && cmptOption.id != null && makeComparableKey(cmptOption.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX) === 0;\n}\nexport function makeInternalComponentId(idSuffix) {\n  return INTERNAL_COMPONENT_ID_PREFIX + idSuffix;\n}\nexport function setComponentTypeToKeyInfo(mappingResult, mainType, componentModelCtor) {\n  // Set mainType and complete subType.\n  each(mappingResult, function (item) {\n    var newOption = item.newOption;\n\n    if (isObject(newOption)) {\n      item.keyInfo.mainType = mainType;\n      item.keyInfo.subType = determineSubType(mainType, newOption, item.existing, componentModelCtor);\n    }\n  });\n}\n\nfunction determineSubType(mainType, newCmptOption, existComponent, componentModelCtor) {\n  var subType = newCmptOption.type ? newCmptOption.type : existComponent ? existComponent.subType // Use determineSubType only when there is no existComponent.\n  : componentModelCtor.determineSubType(mainType, newCmptOption); // tooltip, markline, markpoint may always has no subType\n\n  return subType;\n}\n/**\n * A helper for removing duplicate items between batchA and batchB,\n * and in themselves, and categorize by series.\n *\n * @param batchA Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n * @param batchB Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n * @return result: [resultBatchA, resultBatchB]\n */\n\n\nexport function compressBatches(batchA, batchB) {\n  var mapA = {};\n  var mapB = {};\n  makeMap(batchA || [], mapA);\n  makeMap(batchB || [], mapB, mapA);\n  return [mapToArray(mapA), mapToArray(mapB)];\n\n  function makeMap(sourceBatch, map, otherMap) {\n    for (var i = 0, len = sourceBatch.length; i < len; i++) {\n      var seriesId = convertOptionIdName(sourceBatch[i].seriesId, null);\n\n      if (seriesId == null) {\n        return;\n      }\n\n      var dataIndices = normalizeToArray(sourceBatch[i].dataIndex);\n      var otherDataIndices = otherMap && otherMap[seriesId];\n\n      for (var j = 0, lenj = dataIndices.length; j < lenj; j++) {\n        var dataIndex = dataIndices[j];\n\n        if (otherDataIndices && otherDataIndices[dataIndex]) {\n          otherDataIndices[dataIndex] = null;\n        } else {\n          (map[seriesId] || (map[seriesId] = {}))[dataIndex] = 1;\n        }\n      }\n    }\n  }\n\n  function mapToArray(map, isData) {\n    var result = [];\n\n    for (var i in map) {\n      if (map.hasOwnProperty(i) && map[i] != null) {\n        if (isData) {\n          result.push(+i);\n        } else {\n          var dataIndices = mapToArray(map[i], true);\n          dataIndices.length && result.push({\n            seriesId: i,\n            dataIndex: dataIndices\n          });\n        }\n      }\n    }\n\n    return result;\n  }\n}\n/**\n * @param payload Contains dataIndex (means rawIndex) / dataIndexInside / name\n *                         each of which can be Array or primary type.\n * @return dataIndex If not found, return undefined/null.\n */\n\nexport function queryDataIndex(data, payload) {\n  if (payload.dataIndexInside != null) {\n    return payload.dataIndexInside;\n  } else if (payload.dataIndex != null) {\n    return isArray(payload.dataIndex) ? map(payload.dataIndex, function (value) {\n      return data.indexOfRawIndex(value);\n    }) : data.indexOfRawIndex(payload.dataIndex);\n  } else if (payload.name != null) {\n    return isArray(payload.name) ? map(payload.name, function (value) {\n      return data.indexOfName(value);\n    }) : data.indexOfName(payload.name);\n  }\n}\n/**\n * Enable property storage to any host object.\n * Notice: Serialization is not supported.\n *\n * For example:\n * let inner = zrUitl.makeInner();\n *\n * function some1(hostObj) {\n *      inner(hostObj).someProperty = 1212;\n *      ...\n * }\n * function some2() {\n *      let fields = inner(this);\n *      fields.someProperty1 = 1212;\n *      fields.someProperty2 = 'xx';\n *      ...\n * }\n *\n * @return {Function}\n */\n\nexport function makeInner() {\n  var key = '__ec_inner_' + innerUniqueIndex++;\n  return function (hostObj) {\n    return hostObj[key] || (hostObj[key] = {});\n  };\n}\nvar innerUniqueIndex = getRandomIdBase();\n/**\n * The same behavior as `component.getReferringComponents`.\n */\n\nexport function parseFinder(ecModel, finderInput, opt) {\n  var _a = preParseFinder(finderInput, opt),\n      mainTypeSpecified = _a.mainTypeSpecified,\n      queryOptionMap = _a.queryOptionMap,\n      others = _a.others;\n\n  var result = others;\n  var defaultMainType = opt ? opt.defaultMainType : null;\n\n  if (!mainTypeSpecified && defaultMainType) {\n    queryOptionMap.set(defaultMainType, {});\n  }\n\n  queryOptionMap.each(function (queryOption, mainType) {\n    var queryResult = queryReferringComponents(ecModel, mainType, queryOption, {\n      useDefault: defaultMainType === mainType,\n      enableAll: opt && opt.enableAll != null ? opt.enableAll : true,\n      enableNone: opt && opt.enableNone != null ? opt.enableNone : true\n    });\n    result[mainType + 'Models'] = queryResult.models;\n    result[mainType + 'Model'] = queryResult.models[0];\n  });\n  return result;\n}\nexport function preParseFinder(finderInput, opt) {\n  var finder;\n\n  if (isString(finderInput)) {\n    var obj = {};\n    obj[finderInput + 'Index'] = 0;\n    finder = obj;\n  } else {\n    finder = finderInput;\n  }\n\n  var queryOptionMap = createHashMap();\n  var others = {};\n  var mainTypeSpecified = false;\n  each(finder, function (value, key) {\n    // Exclude 'dataIndex' and other illgal keys.\n    if (key === 'dataIndex' || key === 'dataIndexInside') {\n      others[key] = value;\n      return;\n    }\n\n    var parsedKey = key.match(/^(\\w+)(Index|Id|Name)$/) || [];\n    var mainType = parsedKey[1];\n    var queryType = (parsedKey[2] || '').toLowerCase();\n\n    if (!mainType || !queryType || opt && opt.includeMainTypes && indexOf(opt.includeMainTypes, mainType) < 0) {\n      return;\n    }\n\n    mainTypeSpecified = mainTypeSpecified || !!mainType;\n    var queryOption = queryOptionMap.get(mainType) || queryOptionMap.set(mainType, {});\n    queryOption[queryType] = value;\n  });\n  return {\n    mainTypeSpecified: mainTypeSpecified,\n    queryOptionMap: queryOptionMap,\n    others: others\n  };\n}\nexport var SINGLE_REFERRING = {\n  useDefault: true,\n  enableAll: false,\n  enableNone: false\n};\nexport var MULTIPLE_REFERRING = {\n  useDefault: false,\n  enableAll: true,\n  enableNone: true\n};\nexport function queryReferringComponents(ecModel, mainType, userOption, opt) {\n  opt = opt || SINGLE_REFERRING;\n  var indexOption = userOption.index;\n  var idOption = userOption.id;\n  var nameOption = userOption.name;\n  var result = {\n    models: null,\n    specified: indexOption != null || idOption != null || nameOption != null\n  };\n\n  if (!result.specified) {\n    // Use the first as default if `useDefault`.\n    var firstCmpt = void 0;\n    result.models = opt.useDefault && (firstCmpt = ecModel.getComponent(mainType)) ? [firstCmpt] : [];\n    return result;\n  }\n\n  if (indexOption === 'none' || indexOption === false) {\n    assert(opt.enableNone, '`\"none\"` or `false` is not a valid value on index option.');\n    result.models = [];\n    return result;\n  } // `queryComponents` will return all components if\n  // both all of index/id/name are null/undefined.\n\n\n  if (indexOption === 'all') {\n    assert(opt.enableAll, '`\"all\"` is not a valid value on index option.');\n    indexOption = idOption = nameOption = null;\n  }\n\n  result.models = ecModel.queryComponents({\n    mainType: mainType,\n    index: indexOption,\n    id: idOption,\n    name: nameOption\n  });\n  return result;\n}\nexport function setAttribute(dom, key, value) {\n  dom.setAttribute ? dom.setAttribute(key, value) : dom[key] = value;\n}\nexport function getAttribute(dom, key) {\n  return dom.getAttribute ? dom.getAttribute(key) : dom[key];\n}\nexport function getTooltipRenderMode(renderModeOption) {\n  if (renderModeOption === 'auto') {\n    // Using html when `document` exists, use richText otherwise\n    return env.domSupported ? 'html' : 'richText';\n  } else {\n    return renderModeOption || 'html';\n  }\n}\n/**\n * Group a list by key.\n */\n\nexport function groupData(array, getKey // return key\n) {\n  var buckets = createHashMap();\n  var keys = [];\n  each(array, function (item) {\n    var key = getKey(item);\n    (buckets.get(key) || (keys.push(key), buckets.set(key, []))).push(item);\n  });\n  return {\n    keys: keys,\n    buckets: buckets\n  };\n}\n/**\n * Interpolate raw values of a series with percent\n *\n * @param data         data\n * @param labelModel   label model of the text element\n * @param sourceValue  start value. May be null/undefined when init.\n * @param targetValue  end value\n * @param percent      0~1 percentage; 0 uses start value while 1 uses end value\n * @return             interpolated values\n *                     If `sourceValue` and `targetValue` are `number`, return `number`.\n *                     If `sourceValue` and `targetValue` are `string`, return `string`.\n *                     If `sourceValue` and `targetValue` are `(string | number)[]`, return `(string | number)[]`.\n *                     Other cases do not supported.\n */\n\nexport function interpolateRawValues(data, precision, sourceValue, targetValue, percent) {\n  var isAutoPrecision = precision == null || precision === 'auto';\n\n  if (targetValue == null) {\n    return targetValue;\n  }\n\n  if (isNumber(targetValue)) {\n    var value = interpolateNumber(sourceValue || 0, targetValue, percent);\n    return round(value, isAutoPrecision ? Math.max(getPrecision(sourceValue || 0), getPrecision(targetValue)) : precision);\n  } else if (isString(targetValue)) {\n    return percent < 1 ? sourceValue : targetValue;\n  } else {\n    var interpolated = [];\n    var leftArr = sourceValue;\n    var rightArr = targetValue;\n    var length_1 = Math.max(leftArr ? leftArr.length : 0, rightArr.length);\n\n    for (var i = 0; i < length_1; ++i) {\n      var info = data.getDimensionInfo(i); // Don't interpolate ordinal dims\n\n      if (info && info.type === 'ordinal') {\n        // In init, there is no `sourceValue`, but should better not to get undefined result.\n        interpolated[i] = (percent < 1 && leftArr ? leftArr : rightArr)[i];\n      } else {\n        var leftVal = leftArr && leftArr[i] ? leftArr[i] : 0;\n        var rightVal = rightArr[i];\n        var value = interpolateNumber(leftVal, rightVal, percent);\n        interpolated[i] = round(value, isAutoPrecision ? Math.max(getPrecision(leftVal), getPrecision(rightVal)) : precision);\n      }\n    }\n\n    return interpolated;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* The method \"quantile\" was copied from \"d3.js\".\n* (See more details in the comment of the method below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar RADIAN_EPSILON = 1e-4; // Although chrome already enlarge this number to 100 for `toFixed`, but\n// we sill follow the spec for compatibility.\n\nvar ROUND_SUPPORTED_PRECISION_MAX = 20;\n\nfunction _trim(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n/**\n * Linear mapping a value from domain to range\n * @param  val\n * @param  domain Domain extent domain[0] can be bigger than domain[1]\n * @param  range  Range extent range[0] can be bigger than range[1]\n * @param  clamp Default to be false\n */\n\n\nexport function linearMap(val, domain, range, clamp) {\n  var d0 = domain[0];\n  var d1 = domain[1];\n  var r0 = range[0];\n  var r1 = range[1];\n  var subDomain = d1 - d0;\n  var subRange = r1 - r0;\n\n  if (subDomain === 0) {\n    return subRange === 0 ? r0 : (r0 + r1) / 2;\n  } // Avoid accuracy problem in edge, such as\n  // 146.39 - 62.83 === 83.55999999999999.\n  // See echarts/test/ut/spec/util/number.js#linearMap#accuracyError\n  // It is a little verbose for efficiency considering this method\n  // is a hotspot.\n\n\n  if (clamp) {\n    if (subDomain > 0) {\n      if (val <= d0) {\n        return r0;\n      } else if (val >= d1) {\n        return r1;\n      }\n    } else {\n      if (val >= d0) {\n        return r0;\n      } else if (val <= d1) {\n        return r1;\n      }\n    }\n  } else {\n    if (val === d0) {\n      return r0;\n    }\n\n    if (val === d1) {\n      return r1;\n    }\n  }\n\n  return (val - d0) / subDomain * subRange + r0;\n}\n/**\n * Convert a percent string to absolute number.\n * Returns NaN if percent is not a valid string or number\n */\n\nexport function parsePercent(percent, all) {\n  switch (percent) {\n    case 'center':\n    case 'middle':\n      percent = '50%';\n      break;\n\n    case 'left':\n    case 'top':\n      percent = '0%';\n      break;\n\n    case 'right':\n    case 'bottom':\n      percent = '100%';\n      break;\n  }\n\n  if (zrUtil.isString(percent)) {\n    if (_trim(percent).match(/%$/)) {\n      return parseFloat(percent) / 100 * all;\n    }\n\n    return parseFloat(percent);\n  }\n\n  return percent == null ? NaN : +percent;\n}\nexport function round(x, precision, returnStr) {\n  if (precision == null) {\n    precision = 10;\n  } // Avoid range error\n\n\n  precision = Math.min(Math.max(0, precision), ROUND_SUPPORTED_PRECISION_MAX); // PENDING: 1.005.toFixed(2) is '1.00' rather than '1.01'\n\n  x = (+x).toFixed(precision);\n  return returnStr ? x : +x;\n}\n/**\n * Inplacd asc sort arr.\n * The input arr will be modified.\n */\n\nexport function asc(arr) {\n  arr.sort(function (a, b) {\n    return a - b;\n  });\n  return arr;\n}\n/**\n * Get precision.\n */\n\nexport function getPrecision(val) {\n  val = +val;\n\n  if (isNaN(val)) {\n    return 0;\n  } // It is much faster than methods converting number to string as follows\n  //      let tmp = val.toString();\n  //      return tmp.length - 1 - tmp.indexOf('.');\n  // especially when precision is low\n  // Notice:\n  // (1) If the loop count is over about 20, it is slower than `getPrecisionSafe`.\n  //     (see https://jsbench.me/2vkpcekkvw/1)\n  // (2) If the val is less than for example 1e-15, the result may be incorrect.\n  //     (see test/ut/spec/util/number.test.ts `getPrecision_equal_random`)\n\n\n  if (val > 1e-14) {\n    var e = 1;\n\n    for (var i = 0; i < 15; i++, e *= 10) {\n      if (Math.round(val * e) / e === val) {\n        return i;\n      }\n    }\n  }\n\n  return getPrecisionSafe(val);\n}\n/**\n * Get precision with slow but safe method\n */\n\nexport function getPrecisionSafe(val) {\n  // toLowerCase for: '3.4E-12'\n  var str = val.toString().toLowerCase(); // Consider scientific notation: '3.4e-12' '3.4e+12'\n\n  var eIndex = str.indexOf('e');\n  var exp = eIndex > 0 ? +str.slice(eIndex + 1) : 0;\n  var significandPartLen = eIndex > 0 ? eIndex : str.length;\n  var dotIndex = str.indexOf('.');\n  var decimalPartLen = dotIndex < 0 ? 0 : significandPartLen - 1 - dotIndex;\n  return Math.max(0, decimalPartLen - exp);\n}\n/**\n * Minimal dicernible data precisioin according to a single pixel.\n */\n\nexport function getPixelPrecision(dataExtent, pixelExtent) {\n  var log = Math.log;\n  var LN10 = Math.LN10;\n  var dataQuantity = Math.floor(log(dataExtent[1] - dataExtent[0]) / LN10);\n  var sizeQuantity = Math.round(log(Math.abs(pixelExtent[1] - pixelExtent[0])) / LN10); // toFixed() digits argument must be between 0 and 20.\n\n  var precision = Math.min(Math.max(-dataQuantity + sizeQuantity, 0), 20);\n  return !isFinite(precision) ? 20 : precision;\n}\n/**\n * Get a data of given precision, assuring the sum of percentages\n * in valueList is 1.\n * The largest remainer method is used.\n * https://en.wikipedia.org/wiki/Largest_remainder_method\n *\n * @param valueList a list of all data\n * @param idx index of the data to be processed in valueList\n * @param precision integer number showing digits of precision\n * @return percent ranging from 0 to 100\n */\n\nexport function getPercentWithPrecision(valueList, idx, precision) {\n  if (!valueList[idx]) {\n    return 0;\n  }\n\n  var seats = getPercentSeats(valueList, precision);\n  return seats[idx] || 0;\n}\n/**\n * Get a data of given precision, assuring the sum of percentages\n * in valueList is 1.\n * The largest remainer method is used.\n * https://en.wikipedia.org/wiki/Largest_remainder_method\n *\n * @param valueList a list of all data\n * @param precision integer number showing digits of precision\n * @return {Array<number>}\n */\n\nexport function getPercentSeats(valueList, precision) {\n  var sum = zrUtil.reduce(valueList, function (acc, val) {\n    return acc + (isNaN(val) ? 0 : val);\n  }, 0);\n\n  if (sum === 0) {\n    return [];\n  }\n\n  var digits = Math.pow(10, precision);\n  var votesPerQuota = zrUtil.map(valueList, function (val) {\n    return (isNaN(val) ? 0 : val) / sum * digits * 100;\n  });\n  var targetSeats = digits * 100;\n  var seats = zrUtil.map(votesPerQuota, function (votes) {\n    // Assign automatic seats.\n    return Math.floor(votes);\n  });\n  var currentSum = zrUtil.reduce(seats, function (acc, val) {\n    return acc + val;\n  }, 0);\n  var remainder = zrUtil.map(votesPerQuota, function (votes, idx) {\n    return votes - seats[idx];\n  }); // Has remainding votes.\n\n  while (currentSum < targetSeats) {\n    // Find next largest remainder.\n    var max = Number.NEGATIVE_INFINITY;\n    var maxId = null;\n\n    for (var i = 0, len = remainder.length; i < len; ++i) {\n      if (remainder[i] > max) {\n        max = remainder[i];\n        maxId = i;\n      }\n    } // Add a vote to max remainder.\n\n\n    ++seats[maxId];\n    remainder[maxId] = 0;\n    ++currentSum;\n  }\n\n  return zrUtil.map(seats, function (seat) {\n    return seat / digits;\n  });\n}\n/**\n * Solve the floating point adding problem like 0.1 + 0.2 === 0.30000000000000004\n * See <http://0.30000000000000004.com/>\n */\n\nexport function addSafe(val0, val1) {\n  var maxPrecision = Math.max(getPrecision(val0), getPrecision(val1)); // const multiplier = Math.pow(10, maxPrecision);\n  // return (Math.round(val0 * multiplier) + Math.round(val1 * multiplier)) / multiplier;\n\n  var sum = val0 + val1; // // PENDING: support more?\n\n  return maxPrecision > ROUND_SUPPORTED_PRECISION_MAX ? sum : round(sum, maxPrecision);\n} // Number.MAX_SAFE_INTEGER, ie do not support.\n\nexport var MAX_SAFE_INTEGER = 9007199254740991;\n/**\n * To 0 - 2 * PI, considering negative radian.\n */\n\nexport function remRadian(radian) {\n  var pi2 = Math.PI * 2;\n  return (radian % pi2 + pi2) % pi2;\n}\n/**\n * @param {type} radian\n * @return {boolean}\n */\n\nexport function isRadianAroundZero(val) {\n  return val > -RADIAN_EPSILON && val < RADIAN_EPSILON;\n} // eslint-disable-next-line\n\nvar TIME_REG = /^(?:(\\d{4})(?:[-\\/](\\d{1,2})(?:[-\\/](\\d{1,2})(?:[T ](\\d{1,2})(?::(\\d{1,2})(?::(\\d{1,2})(?:[.,](\\d+))?)?)?(Z|[\\+\\-]\\d\\d:?\\d\\d)?)?)?)?)?$/; // jshint ignore:line\n\n/**\n * @param value valid type: number | string | Date, otherwise return `new Date(NaN)`\n *   These values can be accepted:\n *   + An instance of Date, represent a time in its own time zone.\n *   + Or string in a subset of ISO 8601, only including:\n *     + only year, month, date: '2012-03', '2012-03-01', '2012-03-01 05', '2012-03-01 05:06',\n *     + separated with T or space: '2012-03-01T12:22:33.123', '2012-03-01 12:22:33.123',\n *     + time zone: '2012-03-01T12:22:33Z', '2012-03-01T12:22:33+8000', '2012-03-01T12:22:33-05:00',\n *     all of which will be treated as local time if time zone is not specified\n *     (see <https://momentjs.com/>).\n *   + Or other string format, including (all of which will be treated as loacal time):\n *     '2012', '2012-3-1', '2012/3/1', '2012/03/01',\n *     '2009/6/12 2:00', '2009/6/12 2:05:08', '2009/6/12 2:05:08.123'\n *   + a timestamp, which represent a time in UTC.\n * @return date Never be null/undefined. If invalid, return `new Date(NaN)`.\n */\n\nexport function parseDate(value) {\n  if (value instanceof Date) {\n    return value;\n  } else if (zrUtil.isString(value)) {\n    // Different browsers parse date in different way, so we parse it manually.\n    // Some other issues:\n    // new Date('1970-01-01') is UTC,\n    // new Date('1970/01/01') and new Date('1970-1-01') is local.\n    // See issue #3623\n    var match = TIME_REG.exec(value);\n\n    if (!match) {\n      // return Invalid Date.\n      return new Date(NaN);\n    } // Use local time when no timezone offset specifed.\n\n\n    if (!match[8]) {\n      // match[n] can only be string or undefined.\n      // But take care of '12' + 1 => '121'.\n      return new Date(+match[1], +(match[2] || 1) - 1, +match[3] || 1, +match[4] || 0, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0);\n    } // Timezoneoffset of Javascript Date has considered DST (Daylight Saving Time,\n    // https://tc39.github.io/ecma262/#sec-daylight-saving-time-adjustment).\n    // For example, system timezone is set as \"Time Zone: America/Toronto\",\n    // then these code will get different result:\n    // `new Date(1478411999999).getTimezoneOffset();  // get 240`\n    // `new Date(1478412000000).getTimezoneOffset();  // get 300`\n    // So we should not use `new Date`, but use `Date.UTC`.\n    else {\n        var hour = +match[4] || 0;\n\n        if (match[8].toUpperCase() !== 'Z') {\n          hour -= +match[8].slice(0, 3);\n        }\n\n        return new Date(Date.UTC(+match[1], +(match[2] || 1) - 1, +match[3] || 1, hour, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0));\n      }\n  } else if (value == null) {\n    return new Date(NaN);\n  }\n\n  return new Date(Math.round(value));\n}\n/**\n * Quantity of a number. e.g. 0.1, 1, 10, 100\n *\n * @param val\n * @return\n */\n\nexport function quantity(val) {\n  return Math.pow(10, quantityExponent(val));\n}\n/**\n * Exponent of the quantity of a number\n * e.g., 1234 equals to 1.234*10^3, so quantityExponent(1234) is 3\n *\n * @param val non-negative value\n * @return\n */\n\nexport function quantityExponent(val) {\n  if (val === 0) {\n    return 0;\n  }\n\n  var exp = Math.floor(Math.log(val) / Math.LN10);\n  /**\n   * exp is expected to be the rounded-down result of the base-10 log of val.\n   * But due to the precision loss with Math.log(val), we need to restore it\n   * using 10^exp to make sure we can get val back from exp. #11249\n   */\n\n  if (val / Math.pow(10, exp) >= 10) {\n    exp++;\n  }\n\n  return exp;\n}\n/**\n * find a “nice” number approximately equal to x. Round the number if round = true,\n * take ceiling if round = false. The primary observation is that the “nicest”\n * numbers in decimal are 1, 2, and 5, and all power-of-ten multiples of these numbers.\n *\n * See \"Nice Numbers for Graph Labels\" of Graphic Gems.\n *\n * @param  val Non-negative value.\n * @param  round\n * @return Niced number\n */\n\nexport function nice(val, round) {\n  var exponent = quantityExponent(val);\n  var exp10 = Math.pow(10, exponent);\n  var f = val / exp10; // 1 <= f < 10\n\n  var nf;\n\n  if (round) {\n    if (f < 1.5) {\n      nf = 1;\n    } else if (f < 2.5) {\n      nf = 2;\n    } else if (f < 4) {\n      nf = 3;\n    } else if (f < 7) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  } else {\n    if (f < 1) {\n      nf = 1;\n    } else if (f < 2) {\n      nf = 2;\n    } else if (f < 3) {\n      nf = 3;\n    } else if (f < 5) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  }\n\n  val = nf * exp10; // Fix 3 * 0.1 === 0.30000000000000004 issue (see IEEE 754).\n  // 20 is the uppper bound of toFixed.\n\n  return exponent >= -20 ? +val.toFixed(exponent < 0 ? -exponent : 0) : val;\n}\n/**\n * This code was copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/arrays/quantile.js>.\n * See the license statement at the head of this file.\n * @param ascArr\n */\n\nexport function quantile(ascArr, p) {\n  var H = (ascArr.length - 1) * p + 1;\n  var h = Math.floor(H);\n  var v = +ascArr[h - 1];\n  var e = H - h;\n  return e ? v + e * (ascArr[h] - v) : v;\n}\n/**\n * Order intervals asc, and split them when overlap.\n * expect(numberUtil.reformIntervals([\n *     {interval: [18, 62], close: [1, 1]},\n *     {interval: [-Infinity, -70], close: [0, 0]},\n *     {interval: [-70, -26], close: [1, 1]},\n *     {interval: [-26, 18], close: [1, 1]},\n *     {interval: [62, 150], close: [1, 1]},\n *     {interval: [106, 150], close: [1, 1]},\n *     {interval: [150, Infinity], close: [0, 0]}\n * ])).toEqual([\n *     {interval: [-Infinity, -70], close: [0, 0]},\n *     {interval: [-70, -26], close: [1, 1]},\n *     {interval: [-26, 18], close: [0, 1]},\n *     {interval: [18, 62], close: [0, 1]},\n *     {interval: [62, 150], close: [0, 1]},\n *     {interval: [150, Infinity], close: [0, 0]}\n * ]);\n * @param list, where `close` mean open or close\n *        of the interval, and Infinity can be used.\n * @return The origin list, which has been reformed.\n */\n\nexport function reformIntervals(list) {\n  list.sort(function (a, b) {\n    return littleThan(a, b, 0) ? -1 : 1;\n  });\n  var curr = -Infinity;\n  var currClose = 1;\n\n  for (var i = 0; i < list.length;) {\n    var interval = list[i].interval;\n    var close_1 = list[i].close;\n\n    for (var lg = 0; lg < 2; lg++) {\n      if (interval[lg] <= curr) {\n        interval[lg] = curr;\n        close_1[lg] = !lg ? 1 - currClose : 1;\n      }\n\n      curr = interval[lg];\n      currClose = close_1[lg];\n    }\n\n    if (interval[0] === interval[1] && close_1[0] * close_1[1] !== 1) {\n      list.splice(i, 1);\n    } else {\n      i++;\n    }\n  }\n\n  return list;\n\n  function littleThan(a, b, lg) {\n    return a.interval[lg] < b.interval[lg] || a.interval[lg] === b.interval[lg] && (a.close[lg] - b.close[lg] === (!lg ? 1 : -1) || !lg && littleThan(a, b, 1));\n  }\n}\n/**\n * [Numberic is defined as]:\n *     `parseFloat(val) == val`\n * For example:\n * numeric:\n *     typeof number except NaN, '-123', '123', '2e3', '-2e3', '011', 'Infinity', Infinity,\n *     and they rounded by white-spaces or line-terminal like ' -123 \\n ' (see es spec)\n * not-numeric:\n *     null, undefined, [], {}, true, false, 'NaN', NaN, '123ab',\n *     empty string, string with only white-spaces or line-terminal (see es spec),\n *     0x12, '0x12', '-0x12', 012, '012', '-012',\n *     non-string, ...\n *\n * @test See full test cases in `test/ut/spec/util/number.js`.\n * @return Must be a typeof number. If not numeric, return NaN.\n */\n\nexport function numericToNumber(val) {\n  var valFloat = parseFloat(val);\n  return valFloat == val // eslint-disable-line eqeqeq\n  && (valFloat !== 0 || !zrUtil.isString(val) || val.indexOf('x') <= 0) // For case ' 0x0 '.\n  ? valFloat : NaN;\n}\n/**\n * Definition of \"numeric\": see `numericToNumber`.\n */\n\nexport function isNumeric(val) {\n  return !isNaN(numericToNumber(val));\n}\n/**\n * Use random base to prevent users hard code depending on\n * this auto generated marker id.\n * @return An positive integer.\n */\n\nexport function getRandomIdBase() {\n  return Math.round(Math.random() * 9);\n}\n/**\n * Get the greatest common dividor\n *\n * @param {number} a one number\n * @param {number} b the other number\n */\n\nexport function getGreatestCommonDividor(a, b) {\n  if (b === 0) {\n    return a;\n  }\n\n  return getGreatestCommonDividor(b, a % b);\n}\n/**\n * Get the least common multiple\n *\n * @param {number} a one number\n * @param {number} b the other number\n */\n\nexport function getLeastCommonMultiple(a, b) {\n  if (a == null) {\n    return b;\n  }\n\n  if (b == null) {\n    return a;\n  }\n\n  return a * b / getGreatestCommonDividor(a, b);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LRU from 'zrender/lib/core/LRU.js';\nimport { extend, indexOf, isArrayLike, isObject, keys, isArray, each, isString, isGradientObject, map } from 'zrender/lib/core/util.js';\nimport { getECData } from './innerStore.js';\nimport * as colorTool from 'zrender/lib/tool/color.js';\nimport { queryDataIndex, makeInner } from './model.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { error } from './log.js'; // Reserve 0 as default.\n\nvar _highlightNextDigit = 1;\nvar _highlightKeyMap = {};\nvar getSavedStates = makeInner();\nvar getComponentStates = makeInner();\nexport var HOVER_STATE_NORMAL = 0;\nexport var HOVER_STATE_BLUR = 1;\nexport var HOVER_STATE_EMPHASIS = 2;\nexport var SPECIAL_STATES = ['emphasis', 'blur', 'select'];\nexport var DISPLAY_STATES = ['normal', 'emphasis', 'blur', 'select'];\nexport var Z2_EMPHASIS_LIFT = 10;\nexport var Z2_SELECT_LIFT = 9;\nexport var HIGHLIGHT_ACTION_TYPE = 'highlight';\nexport var DOWNPLAY_ACTION_TYPE = 'downplay';\nexport var SELECT_ACTION_TYPE = 'select';\nexport var UNSELECT_ACTION_TYPE = 'unselect';\nexport var TOGGLE_SELECT_ACTION_TYPE = 'toggleSelect';\n\nfunction hasFillOrStroke(fillOrStroke) {\n  return fillOrStroke != null && fillOrStroke !== 'none';\n} // Most lifted color are duplicated.\n\n\nvar liftedColorCache = new LRU(100);\n\nfunction liftColor(color) {\n  if (isString(color)) {\n    var liftedColor = liftedColorCache.get(color);\n\n    if (!liftedColor) {\n      liftedColor = colorTool.lift(color, -0.1);\n      liftedColorCache.put(color, liftedColor);\n    }\n\n    return liftedColor;\n  } else if (isGradientObject(color)) {\n    var ret = extend({}, color);\n    ret.colorStops = map(color.colorStops, function (stop) {\n      return {\n        offset: stop.offset,\n        color: colorTool.lift(stop.color, -0.1)\n      };\n    });\n    return ret;\n  } // Change nothing.\n\n\n  return color;\n}\n\nfunction doChangeHoverState(el, stateName, hoverStateEnum) {\n  if (el.onHoverStateChange && (el.hoverState || 0) !== hoverStateEnum) {\n    el.onHoverStateChange(stateName);\n  }\n\n  el.hoverState = hoverStateEnum;\n}\n\nfunction singleEnterEmphasis(el) {\n  // Only mark the flag.\n  // States will be applied in the echarts.ts in next frame.\n  doChangeHoverState(el, 'emphasis', HOVER_STATE_EMPHASIS);\n}\n\nfunction singleLeaveEmphasis(el) {\n  // Only mark the flag.\n  // States will be applied in the echarts.ts in next frame.\n  if (el.hoverState === HOVER_STATE_EMPHASIS) {\n    doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\n  }\n}\n\nfunction singleEnterBlur(el) {\n  doChangeHoverState(el, 'blur', HOVER_STATE_BLUR);\n}\n\nfunction singleLeaveBlur(el) {\n  if (el.hoverState === HOVER_STATE_BLUR) {\n    doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\n  }\n}\n\nfunction singleEnterSelect(el) {\n  el.selected = true;\n}\n\nfunction singleLeaveSelect(el) {\n  el.selected = false;\n}\n\nfunction updateElementState(el, updater, commonParam) {\n  updater(el, commonParam);\n}\n\nfunction traverseUpdateState(el, updater, commonParam) {\n  updateElementState(el, updater, commonParam);\n  el.isGroup && el.traverse(function (child) {\n    updateElementState(child, updater, commonParam);\n  });\n}\n\nexport function setStatesFlag(el, stateName) {\n  switch (stateName) {\n    case 'emphasis':\n      el.hoverState = HOVER_STATE_EMPHASIS;\n      break;\n\n    case 'normal':\n      el.hoverState = HOVER_STATE_NORMAL;\n      break;\n\n    case 'blur':\n      el.hoverState = HOVER_STATE_BLUR;\n      break;\n\n    case 'select':\n      el.selected = true;\n  }\n}\n/**\n * If we reuse elements when rerender.\n * DONT forget to clearStates before we update the style and shape.\n * Or we may update on the wrong state instead of normal state.\n */\n\nexport function clearStates(el) {\n  if (el.isGroup) {\n    el.traverse(function (child) {\n      child.clearStates();\n    });\n  } else {\n    el.clearStates();\n  }\n}\n\nfunction getFromStateStyle(el, props, toStateName, defaultValue) {\n  var style = el.style;\n  var fromState = {};\n\n  for (var i = 0; i < props.length; i++) {\n    var propName = props[i];\n    var val = style[propName];\n    fromState[propName] = val == null ? defaultValue && defaultValue[propName] : val;\n  }\n\n  for (var i = 0; i < el.animators.length; i++) {\n    var animator = el.animators[i];\n\n    if (animator.__fromStateTransition // Dont consider the animation to emphasis state.\n    && animator.__fromStateTransition.indexOf(toStateName) < 0 && animator.targetName === 'style') {\n      animator.saveTo(fromState, props);\n    }\n  }\n\n  return fromState;\n}\n\nfunction createEmphasisDefaultState(el, stateName, targetStates, state) {\n  var hasSelect = targetStates && indexOf(targetStates, 'select') >= 0;\n  var cloned = false;\n\n  if (el instanceof Path) {\n    var store = getSavedStates(el);\n    var fromFill = hasSelect ? store.selectFill || store.normalFill : store.normalFill;\n    var fromStroke = hasSelect ? store.selectStroke || store.normalStroke : store.normalStroke;\n\n    if (hasFillOrStroke(fromFill) || hasFillOrStroke(fromStroke)) {\n      state = state || {};\n      var emphasisStyle = state.style || {}; // inherit case\n\n      if (emphasisStyle.fill === 'inherit') {\n        cloned = true;\n        state = extend({}, state);\n        emphasisStyle = extend({}, emphasisStyle);\n        emphasisStyle.fill = fromFill;\n      } // Apply default color lift\n      else if (!hasFillOrStroke(emphasisStyle.fill) && hasFillOrStroke(fromFill)) {\n          cloned = true; // Not modify the original value.\n\n          state = extend({}, state);\n          emphasisStyle = extend({}, emphasisStyle); // Already being applied 'emphasis'. DON'T lift color multiple times.\n\n          emphasisStyle.fill = liftColor(fromFill);\n        } // Not highlight stroke if fill has been highlighted.\n        else if (!hasFillOrStroke(emphasisStyle.stroke) && hasFillOrStroke(fromStroke)) {\n            if (!cloned) {\n              state = extend({}, state);\n              emphasisStyle = extend({}, emphasisStyle);\n            }\n\n            emphasisStyle.stroke = liftColor(fromStroke);\n          }\n\n      state.style = emphasisStyle;\n    }\n  }\n\n  if (state) {\n    // TODO Share with textContent?\n    if (state.z2 == null) {\n      if (!cloned) {\n        state = extend({}, state);\n      }\n\n      var z2EmphasisLift = el.z2EmphasisLift;\n      state.z2 = el.z2 + (z2EmphasisLift != null ? z2EmphasisLift : Z2_EMPHASIS_LIFT);\n    }\n  }\n\n  return state;\n}\n\nfunction createSelectDefaultState(el, stateName, state) {\n  // const hasSelect = indexOf(el.currentStates, stateName) >= 0;\n  if (state) {\n    // TODO Share with textContent?\n    if (state.z2 == null) {\n      state = extend({}, state);\n      var z2SelectLift = el.z2SelectLift;\n      state.z2 = el.z2 + (z2SelectLift != null ? z2SelectLift : Z2_SELECT_LIFT);\n    }\n  }\n\n  return state;\n}\n\nfunction createBlurDefaultState(el, stateName, state) {\n  var hasBlur = indexOf(el.currentStates, stateName) >= 0;\n  var currentOpacity = el.style.opacity;\n  var fromState = !hasBlur ? getFromStateStyle(el, ['opacity'], stateName, {\n    opacity: 1\n  }) : null;\n  state = state || {};\n  var blurStyle = state.style || {};\n\n  if (blurStyle.opacity == null) {\n    // clone state\n    state = extend({}, state);\n    blurStyle = extend({\n      // Already being applied 'emphasis'. DON'T mul opacity multiple times.\n      opacity: hasBlur ? currentOpacity : fromState.opacity * 0.1\n    }, blurStyle);\n    state.style = blurStyle;\n  }\n\n  return state;\n}\n\nfunction elementStateProxy(stateName, targetStates) {\n  var state = this.states[stateName];\n\n  if (this.style) {\n    if (stateName === 'emphasis') {\n      return createEmphasisDefaultState(this, stateName, targetStates, state);\n    } else if (stateName === 'blur') {\n      return createBlurDefaultState(this, stateName, state);\n    } else if (stateName === 'select') {\n      return createSelectDefaultState(this, stateName, state);\n    }\n  }\n\n  return state;\n}\n/**FI\n * Set hover style (namely \"emphasis style\") of element.\n * @param el Should not be `zrender/graphic/Group`.\n * @param focus 'self' | 'selfInSeries' | 'series'\n */\n\n\nexport function setDefaultStateProxy(el) {\n  el.stateProxy = elementStateProxy;\n  var textContent = el.getTextContent();\n  var textGuide = el.getTextGuideLine();\n\n  if (textContent) {\n    textContent.stateProxy = elementStateProxy;\n  }\n\n  if (textGuide) {\n    textGuide.stateProxy = elementStateProxy;\n  }\n}\nexport function enterEmphasisWhenMouseOver(el, e) {\n  !shouldSilent(el, e) // \"emphasis\" event highlight has higher priority than mouse highlight.\n  && !el.__highByOuter && traverseUpdateState(el, singleEnterEmphasis);\n}\nexport function leaveEmphasisWhenMouseOut(el, e) {\n  !shouldSilent(el, e) // \"emphasis\" event highlight has higher priority than mouse highlight.\n  && !el.__highByOuter && traverseUpdateState(el, singleLeaveEmphasis);\n}\nexport function enterEmphasis(el, highlightDigit) {\n  el.__highByOuter |= 1 << (highlightDigit || 0);\n  traverseUpdateState(el, singleEnterEmphasis);\n}\nexport function leaveEmphasis(el, highlightDigit) {\n  !(el.__highByOuter &= ~(1 << (highlightDigit || 0))) && traverseUpdateState(el, singleLeaveEmphasis);\n}\nexport function enterBlur(el) {\n  traverseUpdateState(el, singleEnterBlur);\n}\nexport function leaveBlur(el) {\n  traverseUpdateState(el, singleLeaveBlur);\n}\nexport function enterSelect(el) {\n  traverseUpdateState(el, singleEnterSelect);\n}\nexport function leaveSelect(el) {\n  traverseUpdateState(el, singleLeaveSelect);\n}\n\nfunction shouldSilent(el, e) {\n  return el.__highDownSilentOnTouch && e.zrByTouch;\n}\n\nexport function allLeaveBlur(api) {\n  var model = api.getModel();\n  var leaveBlurredSeries = [];\n  var allComponentViews = [];\n  model.eachComponent(function (componentType, componentModel) {\n    var componentStates = getComponentStates(componentModel);\n    var isSeries = componentType === 'series';\n    var view = isSeries ? api.getViewOfSeriesModel(componentModel) : api.getViewOfComponentModel(componentModel);\n    !isSeries && allComponentViews.push(view);\n\n    if (componentStates.isBlured) {\n      // Leave blur anyway\n      view.group.traverse(function (child) {\n        singleLeaveBlur(child);\n      });\n      isSeries && leaveBlurredSeries.push(componentModel);\n    }\n\n    componentStates.isBlured = false;\n  });\n  each(allComponentViews, function (view) {\n    if (view && view.toggleBlurSeries) {\n      view.toggleBlurSeries(leaveBlurredSeries, false, model);\n    }\n  });\n}\nexport function blurSeries(targetSeriesIndex, focus, blurScope, api) {\n  var ecModel = api.getModel();\n  blurScope = blurScope || 'coordinateSystem';\n\n  function leaveBlurOfIndices(data, dataIndices) {\n    for (var i = 0; i < dataIndices.length; i++) {\n      var itemEl = data.getItemGraphicEl(dataIndices[i]);\n      itemEl && leaveBlur(itemEl);\n    }\n  }\n\n  if (targetSeriesIndex == null) {\n    return;\n  }\n\n  if (!focus || focus === 'none') {\n    return;\n  }\n\n  var targetSeriesModel = ecModel.getSeriesByIndex(targetSeriesIndex);\n  var targetCoordSys = targetSeriesModel.coordinateSystem;\n\n  if (targetCoordSys && targetCoordSys.master) {\n    targetCoordSys = targetCoordSys.master;\n  }\n\n  var blurredSeries = [];\n  ecModel.eachSeries(function (seriesModel) {\n    var sameSeries = targetSeriesModel === seriesModel;\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.master) {\n      coordSys = coordSys.master;\n    }\n\n    var sameCoordSys = coordSys && targetCoordSys ? coordSys === targetCoordSys : sameSeries; // If there is no coordinate system. use sameSeries instead.\n\n    if (!( // Not blur other series if blurScope series\n    blurScope === 'series' && !sameSeries // Not blur other coordinate system if blurScope is coordinateSystem\n    || blurScope === 'coordinateSystem' && !sameCoordSys // Not blur self series if focus is series.\n    || focus === 'series' && sameSeries // TODO blurScope: coordinate system\n    )) {\n      var view = api.getViewOfSeriesModel(seriesModel);\n      view.group.traverse(function (child) {\n        singleEnterBlur(child);\n      });\n\n      if (isArrayLike(focus)) {\n        leaveBlurOfIndices(seriesModel.getData(), focus);\n      } else if (isObject(focus)) {\n        var dataTypes = keys(focus);\n\n        for (var d = 0; d < dataTypes.length; d++) {\n          leaveBlurOfIndices(seriesModel.getData(dataTypes[d]), focus[dataTypes[d]]);\n        }\n      }\n\n      blurredSeries.push(seriesModel);\n      getComponentStates(seriesModel).isBlured = true;\n    }\n  });\n  ecModel.eachComponent(function (componentType, componentModel) {\n    if (componentType === 'series') {\n      return;\n    }\n\n    var view = api.getViewOfComponentModel(componentModel);\n\n    if (view && view.toggleBlurSeries) {\n      view.toggleBlurSeries(blurredSeries, true, ecModel);\n    }\n  });\n}\nexport function blurComponent(componentMainType, componentIndex, api) {\n  if (componentMainType == null || componentIndex == null) {\n    return;\n  }\n\n  var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\n\n  if (!componentModel) {\n    return;\n  }\n\n  getComponentStates(componentModel).isBlured = true;\n  var view = api.getViewOfComponentModel(componentModel);\n\n  if (!view || !view.focusBlurEnabled) {\n    return;\n  }\n\n  view.group.traverse(function (child) {\n    singleEnterBlur(child);\n  });\n}\nexport function blurSeriesFromHighlightPayload(seriesModel, payload, api) {\n  var seriesIndex = seriesModel.seriesIndex;\n  var data = seriesModel.getData(payload.dataType);\n\n  if (!data) {\n    if (process.env.NODE_ENV !== 'production') {\n      error(\"Unknown dataType \" + payload.dataType);\n    }\n\n    return;\n  }\n\n  var dataIndex = queryDataIndex(data, payload); // Pick the first one if there is multiple/none exists.\n\n  dataIndex = (isArray(dataIndex) ? dataIndex[0] : dataIndex) || 0;\n  var el = data.getItemGraphicEl(dataIndex);\n\n  if (!el) {\n    var count = data.count();\n    var current = 0; // If data on dataIndex is NaN.\n\n    while (!el && current < count) {\n      el = data.getItemGraphicEl(current++);\n    }\n  }\n\n  if (el) {\n    var ecData = getECData(el);\n    blurSeries(seriesIndex, ecData.focus, ecData.blurScope, api);\n  } else {\n    // If there is no element put on the data. Try getting it from raw option\n    // TODO Should put it on seriesModel?\n    var focus_1 = seriesModel.get(['emphasis', 'focus']);\n    var blurScope = seriesModel.get(['emphasis', 'blurScope']);\n\n    if (focus_1 != null) {\n      blurSeries(seriesIndex, focus_1, blurScope, api);\n    }\n  }\n}\nexport function findComponentHighDownDispatchers(componentMainType, componentIndex, name, api) {\n  var ret = {\n    focusSelf: false,\n    dispatchers: null\n  };\n\n  if (componentMainType == null || componentMainType === 'series' || componentIndex == null || name == null) {\n    return ret;\n  }\n\n  var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\n\n  if (!componentModel) {\n    return ret;\n  }\n\n  var view = api.getViewOfComponentModel(componentModel);\n\n  if (!view || !view.findHighDownDispatchers) {\n    return ret;\n  }\n\n  var dispatchers = view.findHighDownDispatchers(name); // At presnet, the component (like Geo) only blur inside itself.\n  // So we do not use `blurScope` in component.\n\n  var focusSelf;\n\n  for (var i = 0; i < dispatchers.length; i++) {\n    if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatchers[i])) {\n      error('param should be highDownDispatcher');\n    }\n\n    if (getECData(dispatchers[i]).focus === 'self') {\n      focusSelf = true;\n      break;\n    }\n  }\n\n  return {\n    focusSelf: focusSelf,\n    dispatchers: dispatchers\n  };\n}\nexport function handleGlobalMouseOverForHighDown(dispatcher, e, api) {\n  if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatcher)) {\n    error('param should be highDownDispatcher');\n  }\n\n  var ecData = getECData(dispatcher);\n\n  var _a = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api),\n      dispatchers = _a.dispatchers,\n      focusSelf = _a.focusSelf; // If `findHighDownDispatchers` is supported on the component,\n  // highlight/downplay elements with the same name.\n\n\n  if (dispatchers) {\n    if (focusSelf) {\n      blurComponent(ecData.componentMainType, ecData.componentIndex, api);\n    }\n\n    each(dispatchers, function (dispatcher) {\n      return enterEmphasisWhenMouseOver(dispatcher, e);\n    });\n  } else {\n    // Try blur all in the related series. Then emphasis the hoverred.\n    // TODO. progressive mode.\n    blurSeries(ecData.seriesIndex, ecData.focus, ecData.blurScope, api);\n\n    if (ecData.focus === 'self') {\n      blurComponent(ecData.componentMainType, ecData.componentIndex, api);\n    } // Other than series, component that not support `findHighDownDispatcher` will\n    // also use it. But in this case, highlight/downplay are only supported in\n    // mouse hover but not in dispatchAction.\n\n\n    enterEmphasisWhenMouseOver(dispatcher, e);\n  }\n}\nexport function handleGlobalMouseOutForHighDown(dispatcher, e, api) {\n  if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatcher)) {\n    error('param should be highDownDispatcher');\n  }\n\n  allLeaveBlur(api);\n  var ecData = getECData(dispatcher);\n  var dispatchers = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api).dispatchers;\n\n  if (dispatchers) {\n    each(dispatchers, function (dispatcher) {\n      return leaveEmphasisWhenMouseOut(dispatcher, e);\n    });\n  } else {\n    leaveEmphasisWhenMouseOut(dispatcher, e);\n  }\n}\nexport function toggleSelectionFromPayload(seriesModel, payload, api) {\n  if (!isSelectChangePayload(payload)) {\n    return;\n  }\n\n  var dataType = payload.dataType;\n  var data = seriesModel.getData(dataType);\n  var dataIndex = queryDataIndex(data, payload);\n\n  if (!isArray(dataIndex)) {\n    dataIndex = [dataIndex];\n  }\n\n  seriesModel[payload.type === TOGGLE_SELECT_ACTION_TYPE ? 'toggleSelect' : payload.type === SELECT_ACTION_TYPE ? 'select' : 'unselect'](dataIndex, dataType);\n}\nexport function updateSeriesElementSelection(seriesModel) {\n  var allData = seriesModel.getAllData();\n  each(allData, function (_a) {\n    var data = _a.data,\n        type = _a.type;\n    data.eachItemGraphicEl(function (el, idx) {\n      seriesModel.isSelected(idx, type) ? enterSelect(el) : leaveSelect(el);\n    });\n  });\n}\nexport function getAllSelectedIndices(ecModel) {\n  var ret = [];\n  ecModel.eachSeries(function (seriesModel) {\n    var allData = seriesModel.getAllData();\n    each(allData, function (_a) {\n      var data = _a.data,\n          type = _a.type;\n      var dataIndices = seriesModel.getSelectedDataIndices();\n\n      if (dataIndices.length > 0) {\n        var item = {\n          dataIndex: dataIndices,\n          seriesIndex: seriesModel.seriesIndex\n        };\n\n        if (type != null) {\n          item.dataType = type;\n        }\n\n        ret.push(item);\n      }\n    });\n  });\n  return ret;\n}\n/**\n * Enable the function that mouseover will trigger the emphasis state.\n *\n * NOTE:\n * This function should be used on the element with dataIndex, seriesIndex.\n *\n */\n\nexport function enableHoverEmphasis(el, focus, blurScope) {\n  setAsHighDownDispatcher(el, true);\n  traverseUpdateState(el, setDefaultStateProxy);\n  enableHoverFocus(el, focus, blurScope);\n}\nexport function disableHoverEmphasis(el) {\n  setAsHighDownDispatcher(el, false);\n}\nexport function toggleHoverEmphasis(el, focus, blurScope, isDisabled) {\n  isDisabled ? disableHoverEmphasis(el) : enableHoverEmphasis(el, focus, blurScope);\n}\nexport function enableHoverFocus(el, focus, blurScope) {\n  var ecData = getECData(el);\n\n  if (focus != null) {\n    // TODO dataIndex may be set after this function. This check is not useful.\n    // if (ecData.dataIndex == null) {\n    //     if (__DEV__) {\n    //         console.warn('focus can only been set on element with dataIndex');\n    //     }\n    // }\n    // else {\n    ecData.focus = focus;\n    ecData.blurScope = blurScope; // }\n  } else if (ecData.focus) {\n    ecData.focus = null;\n  }\n}\nvar OTHER_STATES = ['emphasis', 'blur', 'select'];\nvar defaultStyleGetterMap = {\n  itemStyle: 'getItemStyle',\n  lineStyle: 'getLineStyle',\n  areaStyle: 'getAreaStyle'\n};\n/**\n * Set emphasis/blur/selected states of element.\n */\n\nexport function setStatesStylesFromModel(el, itemModel, styleType, // default itemStyle\ngetter) {\n  styleType = styleType || 'itemStyle';\n\n  for (var i = 0; i < OTHER_STATES.length; i++) {\n    var stateName = OTHER_STATES[i];\n    var model = itemModel.getModel([stateName, styleType]);\n    var state = el.ensureState(stateName); // Let it throw error if getterType is not found.\n\n    state.style = getter ? getter(model) : model[defaultStyleGetterMap[styleType]]();\n  }\n}\n/**\n *\n * Set element as highlight / downplay dispatcher.\n * It will be checked when element recieved mouseover event or from highlight action.\n * It's in change of all highlight/downplay behavior of it's children.\n *\n * @param el\n * @param el.highDownSilentOnTouch\n *        In touch device, mouseover event will be trigger on touchstart event\n *        (see module:zrender/dom/HandlerProxy). By this mechanism, we can\n *        conveniently use hoverStyle when tap on touch screen without additional\n *        code for compatibility.\n *        But if the chart/component has select feature, which usually also use\n *        hoverStyle, there might be conflict between 'select-highlight' and\n *        'hover-highlight' especially when roam is enabled (see geo for example).\n *        In this case, `highDownSilentOnTouch` should be used to disable\n *        hover-highlight on touch device.\n * @param asDispatcher If `false`, do not set as \"highDownDispatcher\".\n */\n\nexport function setAsHighDownDispatcher(el, asDispatcher) {\n  var disable = asDispatcher === false;\n  var extendedEl = el; // Make `highDownSilentOnTouch` and `onStateChange` only work after\n  // `setAsHighDownDispatcher` called. Avoid it is modified by user unexpectedly.\n\n  if (el.highDownSilentOnTouch) {\n    extendedEl.__highDownSilentOnTouch = el.highDownSilentOnTouch;\n  } // Simple optimize, since this method might be\n  // called for each elements of a group in some cases.\n\n\n  if (!disable || extendedEl.__highDownDispatcher) {\n    // Emphasis, normal can be triggered manually by API or other components like hover link.\n    // el[method]('emphasis', onElementEmphasisEvent)[method]('normal', onElementNormalEvent);\n    // Also keep previous record.\n    extendedEl.__highByOuter = extendedEl.__highByOuter || 0;\n    extendedEl.__highDownDispatcher = !disable;\n  }\n}\nexport function isHighDownDispatcher(el) {\n  return !!(el && el.__highDownDispatcher);\n}\n/**\n * Enable component highlight/downplay features:\n * + hover link (within the same name)\n * + focus blur in component\n */\n\nexport function enableComponentHighDownFeatures(el, componentModel, componentHighDownName) {\n  var ecData = getECData(el);\n  ecData.componentMainType = componentModel.mainType;\n  ecData.componentIndex = componentModel.componentIndex;\n  ecData.componentHighDownName = componentHighDownName;\n}\n/**\n * Support hightlight/downplay record on each elements.\n * For the case: hover highlight/downplay (legend, visualMap, ...) and\n * user triggerred hightlight/downplay should not conflict.\n * Only all of the highlightDigit cleared, return to normal.\n * @param {string} highlightKey\n * @return {number} highlightDigit\n */\n\nexport function getHighlightDigit(highlightKey) {\n  var highlightDigit = _highlightKeyMap[highlightKey];\n\n  if (highlightDigit == null && _highlightNextDigit <= 32) {\n    highlightDigit = _highlightKeyMap[highlightKey] = _highlightNextDigit++;\n  }\n\n  return highlightDigit;\n}\nexport function isSelectChangePayload(payload) {\n  var payloadType = payload.type;\n  return payloadType === SELECT_ACTION_TYPE || payloadType === UNSELECT_ACTION_TYPE || payloadType === TOGGLE_SELECT_ACTION_TYPE;\n}\nexport function isHighDownPayload(payload) {\n  var payloadType = payload.type;\n  return payloadType === HIGHLIGHT_ACTION_TYPE || payloadType === DOWNPLAY_ACTION_TYPE;\n}\nexport function savePathStates(el) {\n  var store = getSavedStates(el);\n  store.normalFill = el.style.fill;\n  store.normalStroke = el.style.stroke;\n  var selectState = el.states.select || {};\n  store.selectFill = selectState.style && selectState.style.fill || null;\n  store.selectStroke = selectState.style && selectState.style.stroke || null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Symbol factory\nimport { each, isArray, retrieve2 } from 'zrender/lib/core/util.js';\nimport * as graphic from './graphic.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { calculateTextPosition } from 'zrender/lib/contain/text.js';\nimport { parsePercent } from './number.js';\n/**\n * Triangle shape\n * @inner\n */\n\nvar Triangle = graphic.Path.extend({\n  type: 'triangle',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy + height);\n    path.lineTo(cx - width, cy + height);\n    path.closePath();\n  }\n});\n/**\n * Diamond shape\n * @inner\n */\n\nvar Diamond = graphic.Path.extend({\n  type: 'diamond',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy);\n    path.lineTo(cx, cy + height);\n    path.lineTo(cx - width, cy);\n    path.closePath();\n  }\n});\n/**\n * Pin shape\n * @inner\n */\n\nvar Pin = graphic.Path.extend({\n  type: 'pin',\n  shape: {\n    // x, y on the cusp\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var w = shape.width / 5 * 3; // Height must be larger than width\n\n    var h = Math.max(w, shape.height);\n    var r = w / 2; // Dist on y with tangent point and circle center\n\n    var dy = r * r / (h - r);\n    var cy = y - h + r + dy;\n    var angle = Math.asin(dy / r); // Dist on x with tangent point and circle center\n\n    var dx = Math.cos(angle) * r;\n    var tanX = Math.sin(angle);\n    var tanY = Math.cos(angle);\n    var cpLen = r * 0.6;\n    var cpLen2 = r * 0.7;\n    path.moveTo(x - dx, cy + dy);\n    path.arc(x, cy, r, Math.PI - angle, Math.PI * 2 + angle);\n    path.bezierCurveTo(x + dx - tanX * cpLen, cy + dy + tanY * cpLen, x, y - cpLen2, x, y);\n    path.bezierCurveTo(x, y - cpLen2, x - dx + tanX * cpLen, cy + dy + tanY * cpLen, x - dx, cy + dy);\n    path.closePath();\n  }\n});\n/**\n * Arrow shape\n * @inner\n */\n\nvar Arrow = graphic.Path.extend({\n  type: 'arrow',\n  shape: {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (ctx, shape) {\n    var height = shape.height;\n    var width = shape.width;\n    var x = shape.x;\n    var y = shape.y;\n    var dx = width / 3 * 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + dx, y + height);\n    ctx.lineTo(x, y + height / 4 * 3);\n    ctx.lineTo(x - dx, y + height);\n    ctx.lineTo(x, y);\n    ctx.closePath();\n  }\n});\n/**\n * Map of path contructors\n */\n// TODO Use function to build symbol path.\n\nvar symbolCtors = {\n  line: graphic.Line,\n  rect: graphic.Rect,\n  roundRect: graphic.Rect,\n  square: graphic.Rect,\n  circle: graphic.Circle,\n  diamond: Diamond,\n  pin: Pin,\n  arrow: Arrow,\n  triangle: Triangle\n};\nvar symbolShapeMakers = {\n  line: function (x, y, w, h, shape) {\n    shape.x1 = x;\n    shape.y1 = y + h / 2;\n    shape.x2 = x + w;\n    shape.y2 = y + h / 2;\n  },\n  rect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n  },\n  roundRect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n    shape.r = Math.min(w, h) / 4;\n  },\n  square: function (x, y, w, h, shape) {\n    var size = Math.min(w, h);\n    shape.x = x;\n    shape.y = y;\n    shape.width = size;\n    shape.height = size;\n  },\n  circle: function (x, y, w, h, shape) {\n    // Put circle in the center of square\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.r = Math.min(w, h) / 2;\n  },\n  diamond: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  pin: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  arrow: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  triangle: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  }\n};\nexport var symbolBuildProxies = {};\neach(symbolCtors, function (Ctor, name) {\n  symbolBuildProxies[name] = new Ctor();\n});\nvar SymbolClz = graphic.Path.extend({\n  type: 'symbol',\n  shape: {\n    symbolType: '',\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  calculateTextPosition: function (out, config, rect) {\n    var res = calculateTextPosition(out, config, rect);\n    var shape = this.shape;\n\n    if (shape && shape.symbolType === 'pin' && config.position === 'inside') {\n      res.y = rect.y + rect.height * 0.4;\n    }\n\n    return res;\n  },\n  buildPath: function (ctx, shape, inBundle) {\n    var symbolType = shape.symbolType;\n\n    if (symbolType !== 'none') {\n      var proxySymbol = symbolBuildProxies[symbolType];\n\n      if (!proxySymbol) {\n        // Default rect\n        symbolType = 'rect';\n        proxySymbol = symbolBuildProxies[symbolType];\n      }\n\n      symbolShapeMakers[symbolType](shape.x, shape.y, shape.width, shape.height, proxySymbol.shape);\n      proxySymbol.buildPath(ctx, proxySymbol.shape, inBundle);\n    }\n  }\n}); // Provide setColor helper method to avoid determine if set the fill or stroke outside\n\nfunction symbolPathSetColor(color, innerColor) {\n  if (this.type !== 'image') {\n    var symbolStyle = this.style;\n\n    if (this.__isEmptyBrush) {\n      symbolStyle.stroke = color;\n      symbolStyle.fill = innerColor || '#fff'; // TODO Same width with lineStyle in LineView\n\n      symbolStyle.lineWidth = 2;\n    } else if (this.shape.symbolType === 'line') {\n      symbolStyle.stroke = color;\n    } else {\n      symbolStyle.fill = color;\n    }\n\n    this.markRedraw();\n  }\n}\n/**\n * Create a symbol element with given symbol configuration: shape, x, y, width, height, color\n */\n\n\nexport function createSymbol(symbolType, x, y, w, h, color, // whether to keep the ratio of w/h,\nkeepAspect) {\n  // TODO Support image object, DynamicImage.\n  var isEmpty = symbolType.indexOf('empty') === 0;\n\n  if (isEmpty) {\n    symbolType = symbolType.substr(5, 1).toLowerCase() + symbolType.substr(6);\n  }\n\n  var symbolPath;\n\n  if (symbolType.indexOf('image://') === 0) {\n    symbolPath = graphic.makeImage(symbolType.slice(8), new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else if (symbolType.indexOf('path://') === 0) {\n    symbolPath = graphic.makePath(symbolType.slice(7), {}, new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else {\n    symbolPath = new SymbolClz({\n      shape: {\n        symbolType: symbolType,\n        x: x,\n        y: y,\n        width: w,\n        height: h\n      }\n    });\n  }\n\n  symbolPath.__isEmptyBrush = isEmpty; // TODO Should deprecate setColor\n\n  symbolPath.setColor = symbolPathSetColor;\n\n  if (color) {\n    symbolPath.setColor(color);\n  }\n\n  return symbolPath;\n}\nexport function normalizeSymbolSize(symbolSize) {\n  if (!isArray(symbolSize)) {\n    symbolSize = [+symbolSize, +symbolSize];\n  }\n\n  return [symbolSize[0] || 0, symbolSize[1] || 0];\n}\nexport function normalizeSymbolOffset(symbolOffset, symbolSize) {\n  if (symbolOffset == null) {\n    return;\n  }\n\n  if (!isArray(symbolOffset)) {\n    symbolOffset = [symbolOffset, symbolOffset];\n  }\n\n  return [parsePercent(symbolOffset[0], symbolSize[0]) || 0, parsePercent(retrieve2(symbolOffset[1], symbolOffset[0]), symbolSize[1]) || 0];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar ORIGIN_METHOD = '\\0__throttleOriginMethod';\nvar RATE = '\\0__throttleRate';\nvar THROTTLE_TYPE = '\\0__throttleType';\n;\n/**\n * @public\n * @param {(Function)} fn\n * @param {number} [delay=0] Unit: ms.\n * @param {boolean} [debounce=false]\n *        true: If call interval less than `delay`, only the last call works.\n *        false: If call interval less than `delay, call works on fixed rate.\n * @return {(Function)} throttled fn.\n */\n\nexport function throttle(fn, delay, debounce) {\n  var currCall;\n  var lastCall = 0;\n  var lastExec = 0;\n  var timer = null;\n  var diff;\n  var scope;\n  var args;\n  var debounceNextCall;\n  delay = delay || 0;\n\n  function exec() {\n    lastExec = new Date().getTime();\n    timer = null;\n    fn.apply(scope, args || []);\n  }\n\n  var cb = function () {\n    var cbArgs = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      cbArgs[_i] = arguments[_i];\n    }\n\n    currCall = new Date().getTime();\n    scope = this;\n    args = cbArgs;\n    var thisDelay = debounceNextCall || delay;\n    var thisDebounce = debounceNextCall || debounce;\n    debounceNextCall = null;\n    diff = currCall - (thisDebounce ? lastCall : lastExec) - thisDelay;\n    clearTimeout(timer); // Here we should make sure that: the `exec` SHOULD NOT be called later\n    // than a new call of `cb`, that is, preserving the command order. Consider\n    // calculating \"scale rate\" when roaming as an example. When a call of `cb`\n    // happens, either the `exec` is called dierectly, or the call is delayed.\n    // But the delayed call should never be later than next call of `cb`. Under\n    // this assurance, we can simply update view state each time `dispatchAction`\n    // triggered by user roaming, but not need to add extra code to avoid the\n    // state being \"rolled-back\".\n\n    if (thisDebounce) {\n      timer = setTimeout(exec, thisDelay);\n    } else {\n      if (diff >= 0) {\n        exec();\n      } else {\n        timer = setTimeout(exec, -diff);\n      }\n    }\n\n    lastCall = currCall;\n  };\n  /**\n   * Clear throttle.\n   * @public\n   */\n\n\n  cb.clear = function () {\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n  };\n  /**\n   * Enable debounce once.\n   */\n\n\n  cb.debounceNextCall = function (debounceDelay) {\n    debounceNextCall = debounceDelay;\n  };\n\n  return cb;\n}\n/**\n * Create throttle method or update throttle rate.\n *\n * @example\n * ComponentView.prototype.render = function () {\n *     ...\n *     throttle.createOrUpdate(\n *         this,\n *         '_dispatchAction',\n *         this.model.get('throttle'),\n *         'fixRate'\n *     );\n * };\n * ComponentView.prototype.remove = function () {\n *     throttle.clear(this, '_dispatchAction');\n * };\n * ComponentView.prototype.dispose = function () {\n *     throttle.clear(this, '_dispatchAction');\n * };\n *\n */\n\nexport function createOrUpdate(obj, fnAttr, rate, throttleType) {\n  var fn = obj[fnAttr];\n\n  if (!fn) {\n    return;\n  }\n\n  var originFn = fn[ORIGIN_METHOD] || fn;\n  var lastThrottleType = fn[THROTTLE_TYPE];\n  var lastRate = fn[RATE];\n\n  if (lastRate !== rate || lastThrottleType !== throttleType) {\n    if (rate == null || !throttleType) {\n      return obj[fnAttr] = originFn;\n    }\n\n    fn = obj[fnAttr] = throttle(originFn, rate, throttleType === 'debounce');\n    fn[ORIGIN_METHOD] = originFn;\n    fn[THROTTLE_TYPE] = throttleType;\n    fn[RATE] = rate;\n  }\n\n  return fn;\n}\n/**\n * Clear throttle. Example see throttle.createOrUpdate.\n */\n\nexport function clear(obj, fnAttr) {\n  var fn = obj[fnAttr];\n\n  if (fn && fn[ORIGIN_METHOD]) {\n    // Clear throttle\n    fn.clear && fn.clear();\n    obj[fnAttr] = fn[ORIGIN_METHOD];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from './number.js';\nimport { getDefaultLocaleModel, getLocaleModel, SYSTEM_LANG } from '../core/locale.js';\nimport Model from '../model/Model.js';\nexport var ONE_SECOND = 1000;\nexport var ONE_MINUTE = ONE_SECOND * 60;\nexport var ONE_HOUR = ONE_MINUTE * 60;\nexport var ONE_DAY = ONE_HOUR * 24;\nexport var ONE_YEAR = ONE_DAY * 365;\nexport var defaultLeveledFormatter = {\n  year: '{yyyy}',\n  month: '{MMM}',\n  day: '{d}',\n  hour: '{HH}:{mm}',\n  minute: '{HH}:{mm}',\n  second: '{HH}:{mm}:{ss}',\n  millisecond: '{HH}:{mm}:{ss} {SSS}',\n  none: '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}'\n};\nvar fullDayFormatter = '{yyyy}-{MM}-{dd}';\nexport var fullLeveledFormatter = {\n  year: '{yyyy}',\n  month: '{yyyy}-{MM}',\n  day: fullDayFormatter,\n  hour: fullDayFormatter + ' ' + defaultLeveledFormatter.hour,\n  minute: fullDayFormatter + ' ' + defaultLeveledFormatter.minute,\n  second: fullDayFormatter + ' ' + defaultLeveledFormatter.second,\n  millisecond: defaultLeveledFormatter.none\n};\nexport var primaryTimeUnits = ['year', 'month', 'day', 'hour', 'minute', 'second', 'millisecond'];\nexport var timeUnits = ['year', 'half-year', 'quarter', 'month', 'week', 'half-week', 'day', 'half-day', 'quarter-day', 'hour', 'minute', 'second', 'millisecond'];\nexport function pad(str, len) {\n  str += '';\n  return '0000'.substr(0, len - str.length) + str;\n}\nexport function getPrimaryTimeUnit(timeUnit) {\n  switch (timeUnit) {\n    case 'half-year':\n    case 'quarter':\n      return 'month';\n\n    case 'week':\n    case 'half-week':\n      return 'day';\n\n    case 'half-day':\n    case 'quarter-day':\n      return 'hour';\n\n    default:\n      // year, minutes, second, milliseconds\n      return timeUnit;\n  }\n}\nexport function isPrimaryTimeUnit(timeUnit) {\n  return timeUnit === getPrimaryTimeUnit(timeUnit);\n}\nexport function getDefaultFormatPrecisionOfInterval(timeUnit) {\n  switch (timeUnit) {\n    case 'year':\n    case 'month':\n      return 'day';\n\n    case 'millisecond':\n      return 'millisecond';\n\n    default:\n      // Also for day, hour, minute, second\n      return 'second';\n  }\n}\nexport function format( // Note: The result based on `isUTC` are totally different, which can not be just simply\n// substituted by the result without `isUTC`. So we make the param `isUTC` mandatory.\ntime, template, isUTC, lang) {\n  var date = numberUtil.parseDate(time);\n  var y = date[fullYearGetterName(isUTC)]();\n  var M = date[monthGetterName(isUTC)]() + 1;\n  var q = Math.floor((M - 1) / 3) + 1;\n  var d = date[dateGetterName(isUTC)]();\n  var e = date['get' + (isUTC ? 'UTC' : '') + 'Day']();\n  var H = date[hoursGetterName(isUTC)]();\n  var h = (H - 1) % 12 + 1;\n  var m = date[minutesGetterName(isUTC)]();\n  var s = date[secondsGetterName(isUTC)]();\n  var S = date[millisecondsGetterName(isUTC)]();\n  var localeModel = lang instanceof Model ? lang : getLocaleModel(lang || SYSTEM_LANG) || getDefaultLocaleModel();\n  var timeModel = localeModel.getModel('time');\n  var month = timeModel.get('month');\n  var monthAbbr = timeModel.get('monthAbbr');\n  var dayOfWeek = timeModel.get('dayOfWeek');\n  var dayOfWeekAbbr = timeModel.get('dayOfWeekAbbr');\n  return (template || '').replace(/{yyyy}/g, y + '').replace(/{yy}/g, y % 100 + '').replace(/{Q}/g, q + '').replace(/{MMMM}/g, month[M - 1]).replace(/{MMM}/g, monthAbbr[M - 1]).replace(/{MM}/g, pad(M, 2)).replace(/{M}/g, M + '').replace(/{dd}/g, pad(d, 2)).replace(/{d}/g, d + '').replace(/{eeee}/g, dayOfWeek[e]).replace(/{ee}/g, dayOfWeekAbbr[e]).replace(/{e}/g, e + '').replace(/{HH}/g, pad(H, 2)).replace(/{H}/g, H + '').replace(/{hh}/g, pad(h + '', 2)).replace(/{h}/g, h + '').replace(/{mm}/g, pad(m, 2)).replace(/{m}/g, m + '').replace(/{ss}/g, pad(s, 2)).replace(/{s}/g, s + '').replace(/{SSS}/g, pad(S, 3)).replace(/{S}/g, S + '');\n}\nexport function leveledFormat(tick, idx, formatter, lang, isUTC) {\n  var template = null;\n\n  if (zrUtil.isString(formatter)) {\n    // Single formatter for all units at all levels\n    template = formatter;\n  } else if (zrUtil.isFunction(formatter)) {\n    // Callback formatter\n    template = formatter(tick.value, idx, {\n      level: tick.level\n    });\n  } else {\n    var defaults = zrUtil.extend({}, defaultLeveledFormatter);\n\n    if (tick.level > 0) {\n      for (var i = 0; i < primaryTimeUnits.length; ++i) {\n        defaults[primaryTimeUnits[i]] = \"{primary|\" + defaults[primaryTimeUnits[i]] + \"}\";\n      }\n    }\n\n    var mergedFormatter = formatter ? formatter.inherit === false ? formatter // Use formatter with bigger units\n    : zrUtil.defaults(formatter, defaults) : defaults;\n    var unit = getUnitFromValue(tick.value, isUTC);\n\n    if (mergedFormatter[unit]) {\n      template = mergedFormatter[unit];\n    } else if (mergedFormatter.inherit) {\n      // Unit formatter is not defined and should inherit from bigger units\n      var targetId = timeUnits.indexOf(unit);\n\n      for (var i = targetId - 1; i >= 0; --i) {\n        if (mergedFormatter[unit]) {\n          template = mergedFormatter[unit];\n          break;\n        }\n      }\n\n      template = template || defaults.none;\n    }\n\n    if (zrUtil.isArray(template)) {\n      var levelId = tick.level == null ? 0 : tick.level >= 0 ? tick.level : template.length + tick.level;\n      levelId = Math.min(levelId, template.length - 1);\n      template = template[levelId];\n    }\n  }\n\n  return format(new Date(tick.value), template, isUTC, lang);\n}\nexport function getUnitFromValue(value, isUTC) {\n  var date = numberUtil.parseDate(value);\n  var M = date[monthGetterName(isUTC)]() + 1;\n  var d = date[dateGetterName(isUTC)]();\n  var h = date[hoursGetterName(isUTC)]();\n  var m = date[minutesGetterName(isUTC)]();\n  var s = date[secondsGetterName(isUTC)]();\n  var S = date[millisecondsGetterName(isUTC)]();\n  var isSecond = S === 0;\n  var isMinute = isSecond && s === 0;\n  var isHour = isMinute && m === 0;\n  var isDay = isHour && h === 0;\n  var isMonth = isDay && d === 1;\n  var isYear = isMonth && M === 1;\n\n  if (isYear) {\n    return 'year';\n  } else if (isMonth) {\n    return 'month';\n  } else if (isDay) {\n    return 'day';\n  } else if (isHour) {\n    return 'hour';\n  } else if (isMinute) {\n    return 'minute';\n  } else if (isSecond) {\n    return 'second';\n  } else {\n    return 'millisecond';\n  }\n}\nexport function getUnitValue(value, unit, isUTC) {\n  var date = zrUtil.isNumber(value) ? numberUtil.parseDate(value) : value;\n  unit = unit || getUnitFromValue(value, isUTC);\n\n  switch (unit) {\n    case 'year':\n      return date[fullYearGetterName(isUTC)]();\n\n    case 'half-year':\n      return date[monthGetterName(isUTC)]() >= 6 ? 1 : 0;\n\n    case 'quarter':\n      return Math.floor((date[monthGetterName(isUTC)]() + 1) / 4);\n\n    case 'month':\n      return date[monthGetterName(isUTC)]();\n\n    case 'day':\n      return date[dateGetterName(isUTC)]();\n\n    case 'half-day':\n      return date[hoursGetterName(isUTC)]() / 24;\n\n    case 'hour':\n      return date[hoursGetterName(isUTC)]();\n\n    case 'minute':\n      return date[minutesGetterName(isUTC)]();\n\n    case 'second':\n      return date[secondsGetterName(isUTC)]();\n\n    case 'millisecond':\n      return date[millisecondsGetterName(isUTC)]();\n  }\n}\nexport function fullYearGetterName(isUTC) {\n  return isUTC ? 'getUTCFullYear' : 'getFullYear';\n}\nexport function monthGetterName(isUTC) {\n  return isUTC ? 'getUTCMonth' : 'getMonth';\n}\nexport function dateGetterName(isUTC) {\n  return isUTC ? 'getUTCDate' : 'getDate';\n}\nexport function hoursGetterName(isUTC) {\n  return isUTC ? 'getUTCHours' : 'getHours';\n}\nexport function minutesGetterName(isUTC) {\n  return isUTC ? 'getUTCMinutes' : 'getMinutes';\n}\nexport function secondsGetterName(isUTC) {\n  return isUTC ? 'getUTCSeconds' : 'getSeconds';\n}\nexport function millisecondsGetterName(isUTC) {\n  return isUTC ? 'getUTCMilliseconds' : 'getMilliseconds';\n}\nexport function fullYearSetterName(isUTC) {\n  return isUTC ? 'setUTCFullYear' : 'setFullYear';\n}\nexport function monthSetterName(isUTC) {\n  return isUTC ? 'setUTCMonth' : 'setMonth';\n}\nexport function dateSetterName(isUTC) {\n  return isUTC ? 'setUTCDate' : 'setDate';\n}\nexport function hoursSetterName(isUTC) {\n  return isUTC ? 'setUTCHours' : 'setHours';\n}\nexport function minutesSetterName(isUTC) {\n  return isUTC ? 'setUTCMinutes' : 'setMinutes';\n}\nexport function secondsSetterName(isUTC) {\n  return isUTC ? 'setUTCSeconds' : 'setSeconds';\n}\nexport function millisecondsSetterName(isUTC) {\n  return isUTC ? 'setUTCMilliseconds' : 'setMilliseconds';\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap } from 'zrender/lib/core/util.js';\n;\n;\n;\nexport var VISUAL_DIMENSIONS = createHashMap(['tooltip', 'label', 'itemName', 'itemId', 'itemGroupId', 'seriesName']);\nexport var SOURCE_FORMAT_ORIGINAL = 'original';\nexport var SOURCE_FORMAT_ARRAY_ROWS = 'arrayRows';\nexport var SOURCE_FORMAT_OBJECT_ROWS = 'objectRows';\nexport var SOURCE_FORMAT_KEYED_COLUMNS = 'keyedColumns';\nexport var SOURCE_FORMAT_TYPED_ARRAY = 'typedArray';\nexport var SOURCE_FORMAT_UNKNOWN = 'unknown';\nexport var SERIES_LAYOUT_BY_COLUMN = 'column';\nexport var SERIES_LAYOUT_BY_ROW = 'row';\n;\n;\n;\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each } from 'zrender/lib/core/util.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport * as componentUtil from '../util/component.js';\nimport * as clazzUtil from '../util/clazz.js';\nimport * as modelUtil from '../util/model.js';\nimport { enterEmphasis, leaveEmphasis, getHighlightDigit, isHighDownDispatcher } from '../util/states.js';\nimport { createTask } from '../core/task.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { traverseElements } from '../util/graphic.js';\nimport { error } from '../util/log.js';\nvar inner = modelUtil.makeInner();\nvar renderPlanner = createRenderPlanner();\n\nvar ChartView =\n/** @class */\nfunction () {\n  function ChartView() {\n    this.group = new Group();\n    this.uid = componentUtil.getUID('viewChart');\n    this.renderTask = createTask({\n      plan: renderTaskPlan,\n      reset: renderTaskReset\n    });\n    this.renderTask.context = {\n      view: this\n    };\n  }\n\n  ChartView.prototype.init = function (ecModel, api) {};\n\n  ChartView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    if (process.env.NODE_ENV !== 'production') {\n      throw new Error('render method must been implemented');\n    }\n  };\n  /**\n   * Highlight series or specified data item.\n   */\n\n\n  ChartView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData(payload && payload.dataType);\n\n    if (!data) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(\"Unknown dataType \" + payload.dataType);\n      }\n\n      return;\n    }\n\n    toggleHighlight(data, payload, 'emphasis');\n  };\n  /**\n   * Downplay series or specified data item.\n   */\n\n\n  ChartView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData(payload && payload.dataType);\n\n    if (!data) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(\"Unknown dataType \" + payload.dataType);\n      }\n\n      return;\n    }\n\n    toggleHighlight(data, payload, 'normal');\n  };\n  /**\n   * Remove self.\n   */\n\n\n  ChartView.prototype.remove = function (ecModel, api) {\n    this.group.removeAll();\n  };\n  /**\n   * Dispose self.\n   */\n\n\n  ChartView.prototype.dispose = function (ecModel, api) {};\n\n  ChartView.prototype.updateView = function (seriesModel, ecModel, api, payload) {\n    this.render(seriesModel, ecModel, api, payload);\n  }; // FIXME never used?\n\n\n  ChartView.prototype.updateLayout = function (seriesModel, ecModel, api, payload) {\n    this.render(seriesModel, ecModel, api, payload);\n  }; // FIXME never used?\n\n\n  ChartView.prototype.updateVisual = function (seriesModel, ecModel, api, payload) {\n    this.render(seriesModel, ecModel, api, payload);\n  };\n  /**\n   * Traverse the new rendered elements.\n   *\n   * It will traverse the new added element in progressive rendering.\n   * And traverse all in normal rendering.\n   */\n\n\n  ChartView.prototype.eachRendered = function (cb) {\n    traverseElements(this.group, cb);\n  };\n\n  ChartView.markUpdateMethod = function (payload, methodName) {\n    inner(payload).updateMethod = methodName;\n  };\n\n  ChartView.protoInitialize = function () {\n    var proto = ChartView.prototype;\n    proto.type = 'chart';\n  }();\n\n  return ChartView;\n}();\n\n;\n/**\n * Set state of single element\n */\n\nfunction elSetState(el, state, highlightDigit) {\n  if (el && isHighDownDispatcher(el)) {\n    (state === 'emphasis' ? enterEmphasis : leaveEmphasis)(el, highlightDigit);\n  }\n}\n\nfunction toggleHighlight(data, payload, state) {\n  var dataIndex = modelUtil.queryDataIndex(data, payload);\n  var highlightDigit = payload && payload.highlightKey != null ? getHighlightDigit(payload.highlightKey) : null;\n\n  if (dataIndex != null) {\n    each(modelUtil.normalizeToArray(dataIndex), function (dataIdx) {\n      elSetState(data.getItemGraphicEl(dataIdx), state, highlightDigit);\n    });\n  } else {\n    data.eachItemGraphicEl(function (el) {\n      elSetState(el, state, highlightDigit);\n    });\n  }\n}\n\nclazzUtil.enableClassExtend(ChartView, ['dispose']);\nclazzUtil.enableClassManagement(ChartView);\n\nfunction renderTaskPlan(context) {\n  return renderPlanner(context.model);\n}\n\nfunction renderTaskReset(context) {\n  var seriesModel = context.model;\n  var ecModel = context.ecModel;\n  var api = context.api;\n  var payload = context.payload; // FIXME: remove updateView updateVisual\n\n  var progressiveRender = seriesModel.pipelineContext.progressiveRender;\n  var view = context.view;\n  var updateMethod = payload && inner(payload).updateMethod;\n  var methodName = progressiveRender ? 'incrementalPrepareRender' : updateMethod && view[updateMethod] ? updateMethod // `appendData` is also supported when data amount\n  // is less than progressive threshold.\n  : 'render';\n\n  if (methodName !== 'render') {\n    view[methodName](seriesModel, ecModel, api, payload);\n  }\n\n  return progressMethodMap[methodName];\n}\n\nvar progressMethodMap = {\n  incrementalPrepareRender: {\n    progress: function (params, context) {\n      context.view.incrementalRender(params, context.model, context.ecModel, context.api, context.payload);\n    }\n  },\n  render: {\n    // Put view.render in `progress` to support appendData. But in this case\n    // view.render should not be called in reset, otherwise it will be called\n    // twise. Use `forceFirstProgress` to make sure that view.render is called\n    // in any cases.\n    forceFirstProgress: true,\n    progress: function (params, context) {\n      context.view.render(context.model, context.ecModel, context.api, context.payload);\n    }\n  }\n};\nexport default ChartView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Group from 'zrender/lib/graphic/Group.js';\nimport * as componentUtil from '../util/component.js';\nimport * as clazzUtil from '../util/clazz.js';\n\nvar ComponentView =\n/** @class */\nfunction () {\n  function ComponentView() {\n    this.group = new Group();\n    this.uid = componentUtil.getUID('viewComponent');\n  }\n\n  ComponentView.prototype.init = function (ecModel, api) {};\n\n  ComponentView.prototype.render = function (model, ecModel, api, payload) {};\n\n  ComponentView.prototype.dispose = function (ecModel, api) {};\n\n  ComponentView.prototype.updateView = function (model, ecModel, api, payload) {// Do nothing;\n  };\n\n  ComponentView.prototype.updateLayout = function (model, ecModel, api, payload) {// Do nothing;\n  };\n\n  ComponentView.prototype.updateVisual = function (model, ecModel, api, payload) {// Do nothing;\n  };\n  /**\n   * Hook for toggle blur target series.\n   * Can be used in marker for blur or leave blur the markers\n   */\n\n\n  ComponentView.prototype.toggleBlurSeries = function (seriesModels, isBlur, ecModel) {// Do nothing;\n  };\n  /**\n   * Traverse the new rendered elements.\n   *\n   * It will traverse the new added element in progressive rendering.\n   * And traverse all in normal rendering.\n   */\n\n\n  ComponentView.prototype.eachRendered = function (cb) {\n    var group = this.group;\n\n    if (group) {\n      group.traverse(cb);\n    }\n  };\n\n  return ComponentView;\n}();\n\n;\nclazzUtil.enableClassExtend(ComponentView);\nclazzUtil.enableClassManagement(ComponentView);\nexport default ComponentView;"],"names":["transitionStore","getAnimationConfig","animationType","animatableModel","dataIndex","extraOpts","extraDelayParams","animationPayload","ecModel","updatePayload","getUpdatePayload","animation","animationEnabled","isAnimationEnabled","isUpdate","duration","easing","delay","getShallow","config","animateOrSetProps","el","props","cb","during","removeOpt","isFrom","isRemove","stopAnimation","animationConfig","getAnimationDelayParams","animationDelay","animationEasing","animateConfig","done","force","setToFinal","scope","animateFrom","animateTo","attr","updateProps","initProps","isElementRemoved","__zr","i","animators","length","animator","removeElement","fadeOutDisplayable","removeTextContent","removeTextGuideLine","style","opacity","removeElementWithFadeOut","doRemove","parent","remove","isGroup","traverse","disp","saveOldStyle","oldStyle","samplers","average","frame","sum","count","isNaN","NaN","max","Infinity","isFinite","min","nearest","indexSampler","Math","round","dataSample","seriesType","reset","seriesModel","api","data","getData","sampling","get","coordSys","coordinateSystem","type","baseAxis","getBaseAxis","valueAxis","getOtherAxis","extent","getExtent","dpr","getDevicePixelRatio","size","abs","rate","setData","lttbDownSample","mapDimension","dim","sampler","downSample","dataIndexMapValueLength","valNumOrArrLengthMoreThan2","defaultKeyGetter","item","DataDiffer","oldArr","newArr","oldKeyGetter","newKeyGetter","context","diffMode","this","_old","_new","_oldKeyGetter","_newKeyGetter","_diffModeMultiple","prototype","add","func","_add","update","_update","updateManyToOne","_updateManyToOne","updateOneToMany","_updateOneToMany","updateManyToMany","_updateManyToMany","_remove","execute","_executeOneToOne","newDataIndexMap","oldDataKeyArr","Array","newDataKeyArr","_initIndexMap","oldKey","newIdxMapVal","newIdxMapValLen","newIdx","shift","_performRestAdd","_executeMultiple","oldDataIndexMap","oldIdxMapVal","oldIdxMapValLen","i_1","newKey","idxMapValLen","j","arr","map","keyArr","keyGetterName","cbModeMultiple","key","idxMapVal","push","DimensionUserOuput","encode","dimRequest","_encode","_schema","fullDimensions","_getFullDimensionNames","_cachedDimNames","makeOutputDimensionNames","summarizeDimensions","schema","summary","notExtraCoordDimMap","defaultedLabel","defaultedTooltip","userOutputEncode","dimensions","dimName","dimItem","getDimensionInfo","coordDim","coordDimIndex","getOrCreateEncodeArr","isExtraCoord","set","mayLabelDimType","getDimensionIndex","name","defaultTooltip","v","otherDim","encodeArr","dimIndex","otherDims","dataDimsOnCoord","encodeFirstDimNotExtra","each","dimArr","concat","dataDimIndicesOnCoord","storeDimIndex","encodeLabel","label","slice","encodeTooltip","tooltip","userOutput","hasOwnProperty","getDimensionTypeByAxis","axisType","dimType","prepareInvertedIndex","getId","getIdNameFromStore","normalizeDimensions","transferProperties","cloneListForMapAndSample","makeIdFromName","SeriesDimensionDefine","opt","isObject","CtorInt32Array","Int32Array","ID_PREFIX","INDEX_NOT_FOUND","TRANSFERABLE_PROPERTIES","CLONE_PROPERTIES","SeriesData","dimensionsInput","hostModel","_dimOmitted","_nameList","_idList","_visual","_layout","_itemVisuals","_itemLayouts","_graphicEls","_approximateExtent","_calculationInfo","hasItemOption","TRANSFERABLE_METHODS","CHANGABLE_METHODS","DOWNSAMPLE_METHODS","assignStoreDimIdx","isDimensionOmitted","dimensionInfos","dimensionNames","invertedIndicesMap","needsHasOwn","emptyObj","dimInfoInput","dimensionInfo","dimensionName","createInvertedIndices","itemName","_nameDimIdx","itemId","_idDimIdx","_dimInfos","_initGetDimensionInfo","_invertedIndicesMap","dimIdxToName_1","_dimIdxToName","getDimension","dimIdx","_recognizeDimIndex","sourceDimDef","getSourceDimension","dimInfo","_getDimInfo","getSourceDimensionIndex","_getStoreDimIndex","undefined","getDimensionsOnCoord","_dimSummary","idx","dimensionsSummary","dims","mapDimensionsAll","getStore","_store","initData","nameList","dimValueGetter","store","_this","DataStore","provider","property","_nameRepeatCount","_doInit","appendData","range","appendValues","values","names","_a","start","end","shouldMakeIdFromName","_shouldMakeIdFromName","_updateOrdinalMeta","sourceIdx","ordinalMeta","collectOrdinalMeta","getProvider","getSource","sourceFormat","fillStorage","idList","isFormatOriginal","pure","sharedDataItem","dataItem","getItem","id","getApproximateExtent","getDataExtent","setApproximateExtent","getCalculationInfo","setCalculationInfo","value","getName","rawIndex","getRawIndex","_getCategory","ordinal","getOrdinalMeta","categories","getByRawIndex","rawIdx","getIndices","getSum","getMedian","getValues","hasValue","len","indexOfName","indexOfRawIndex","rawIndexOf","invertedIndices","indicesOfNearest","maxDistance","ctx","fCtx","dimIndices","filterSelf","filter","selectRange","innerRange","mapArray","result","apply","arguments","ctxCompat","list","modify","dimension","sampleValue","sampleIndex","valueDimension","getRawDataItem","getItemModel","Model","diff","otherList","thisList","getVisual","visual","setVisual","kvObj","val","getItemVisual","itemVisual","hasItemVisual","ensureUniqueItemVisual","itemVisuals","setItemVisual","clearAllVisual","setLayout","getLayout","getItemLayout","setItemLayout","layout","merge","clearItemLayouts","setItemGraphicEl","seriesIndex","dataType","getItemGraphicEl","eachItemGraphicEl","call","cloneShallow","wrapMethod","methodName","injectFunction","originalMethod","__wrappedMethods","res","internalField","original","target","source","propName","nameDimIdx","idDimIdx","nameRepeatCount","nmCnt","prepareSeriesDataSchema","sysDims","coordDimensions","dimsDef","dimensionsDefine","coordDimNameMap","resultList","dimCount","getDimCount","dimensionsCount","omitUnusedDimensions","canOmitUnusedDimensions","isUsingSourceDimensionsDef","dataDimNameMap","encodeDef","encodeDefine","encodeDefaulter","encodeDefMap","indicesMap","getResultItem","dimDefItemRaw","dimDefItem","resultItem","userDimName","displayName","dataDimsRaw","dataDims","validDataDims","resultDimIdxOrName","resultDimIdx","applyDim","availDimIdx","sysDimItemRaw","sysDimItemDimsDef","sysDimItemOtherDims","sysDimItem","sysDimItemDimsDefItem","generateCoord","generateCoordCount","fromZero","extra","ifNoNameFillWithCoordName","sort","item0","item1","genCoordDimName","seriesName","removeDuplication","SeriesDataSchema","fullDimensionCount","dimensionOmitted","duplicationMap","dimOriginalName","optDimCount","dimensionsDetectedCount","mapData","CoordSysInfo","coordSysName","coordSysDims","axisMap","categoryAxisMap","getCoordSysInfoBySeries","fetch","fetchers","cartesian2d","xAxisModel","getReferringComponents","models","yAxisModel","isCategory","firstCategoryDimIndex","singleAxis","singleAxisModel","polar","polarModel","radiusAxisModel","findAxisModel","angleAxisModel","geo","parallel","parallelModel","getComponent","parallelAxisIndex","axisIndex","index","axisModel","axisDim","getCoordSysDimDefs","coordSysInfo","coordSysDimDefs","registeredCoordSys","CoordinateSystem","getDimensionsInfo","injectOrdinalMeta","dimInfoList","hasNameEncode","categoryAxisModel","createSeriesData","sourceRaw","sourceManager","getSourceManager","isOriginalSource","useEncodeDefaulter","createDimensionOptions","getEncode","getSharedDataStore","stackCalculationInfo","isNeedCompleteOrdinalData","itemOpt","defaultDimValueGetter","sampleItem","firstDataNotNull","BaseBarSeriesModel","_super","getInitialData","option","getMarkerPosition","clampData","pt","dataToPoint","offset","offsetIndex","isHorizontal","defaultOption","z","legendHoverLink","barMinHeight","barMinAngle","large","largeThreshold","progressive","progressiveChunkMode","Series","BarSeriesModel","getProgressive","getProgressiveThreshold","progressiveThreshold","brushSelector","selectors","rect","dependencies","BaseBarSeries","clip","roundCap","showBackground","backgroundStyle","color","borderColor","borderWidth","borderType","borderRadius","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","select","itemStyle","realtimeSort","createGridClipPath","cartesian","hasAnimation","getArea","x","y","width","height","lineWidth","floor","clipPath","shape","isAxisInversed","inverse","duringCb","percent","createPolarClipPath","sectorArea","r0","r","cx","cy","startAngle","endAngle","clockwise","isRadial","createClipPath","SausageShape","PI","SausagePath","opts","getDefaultShape","buildPath","dr","rCenter","PI2","lessThanCircle","unitStartX","cos","unitStartY","sin","unitEndX","unitEndY","moveTo","arc","Path","isCoordinateSystemType","getDefaultLabel","labelDims","rawVal","vals","join","getDefaultInterpolatedLabel","interpolatedValue","createSectorCalculateTextPosition","positionMapping","isRoundCap","out","boundingRect","textPosition","position","mappedSectorPosition","distance","sector","middleR","middleAngle","extraDist","mathCos","mathSin","textAlign","textVerticalAlign","adjustAngleDistanceX","adjustAngleDistanceY","align","verticalAlign","setSectorTextRotation","rotateType","setTextConfig","rotation","anchorAngle","rotate","angle","isEnd","mathMax","mathMin","getClipArea","coord","coordSysClipArea","onBand","expandWidth","BarView","_isFirstFrame","render","payload","_model","_removeOnRenderedListener","_updateDrawMode","coordinateSystemType","_progressiveEls","_isLargeDraw","_renderLarge","_renderNormal","incrementalPrepareRender","_clear","_updateLargeClip","incrementalRender","params","_incrementalRenderLarge","eachRendered","traverseElements","group","isLargeDraw","pipelineContext","isHorizontalOrRadial","oldData","_data","animationModel","realtimeSortCfg","shouldRealtimeSort","_enableRealtimeSort","needsClip","removeClipPath","drawBackground","backgroundModel","getModel","barBorderRadius","bgEls","oldBgEls","_backgroundEls","isInitSort","isChangeOrder","createBackground","bgLayout","bgEl","createBackgroundEl","useStyle","getItemStyle","setShape","itemModel","isValidLayout","isClipped","elementCreator","model","forceLabelAnimation","updateStyle","updateRealtimeAnimation","ignore","newIndex","oldIndex","createBackgroundShape","textEl","getTextContent","labelInnerStore","prevValue","bgGroup","_backgroundGroup","Group","removeAll","createLarge","_removeBackground","setClipPath","_dispatchInitSort","orderMapping_1","_onRendered","_updateSortWithinSameData","getZr","on","_dataSort","orderMapping","info","ordinalNumber","dataIdx","mappedValue","a","b","ordinalNumbers","_isOrderChangedWithinSameData","scale","ordinalDataDim","lastValue","Number","MAX_VALUE","tickNum","getRawOrdinalNumber","MIN_VALUE","_isOrderDifferentInView","orderInfo","tickMax","sortInfo","dispatchAction","componentType","axisId","sortResult","otherAxis","dispose","off","Chart","coordSysBoundingRect","signWidth","signHeight","coordSysX2","coordSysY2","x2","y2","xClipped","yClipped","signR","tmp","clipped","Rect","z2","__dataIndex","rectShape","animateProperty","ShapeClass","Sector","positionMap","createPolarPositionMapping","calculateTextPosition","sectorShape","animateTarget","realtimeSortOption","seriesAnimationModel","seriesTarget","axisTarget","axisAnimationModel","checkPropertiesNotValid","obj","rectPropties","polarPropties","fixedLineWidth","getLineWidth","signX","signY","isZeroOnPolar","arcOrAngle","isPolar","cursorStyle","labelPositionOutside","labelStatesModels","labelFetcher","labelDataIndex","defaultText","inheritColor","fill","defaultOpacity","defaultOutsidePosition","textConfig","inside","getRawValue","emphasisModel","stroke","states","state","rawLayout","LagePathShape","LargePath","points","baseDimIdx","valueDimIdx","startPoint","barWidth","progressiveEls","incremental","largeDataIndices","bgPoints","silent","ignoreCoarsePointer","largePathUpdateDataIndex","throttle","event","largePath","largePathFindDataIndex","offsetX","offsetY","ii","coordLayout","ElementClz","install","registers","registerChartView","registerSeriesModel","BarSeries","registerLayout","PRIORITY","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","registerProcessor","PROCESSOR","STATISTIC","registerAction","eachComponent","mainType","query","componentModel","axis","setCategorySortInfo","createRenderPlanner","inner","fields","originalLarge","originalProgressive","progressiveRender","findPointFromSeries","finder","point","getSeriesByIndex","getTooltipPosition","isStacked","valueAxisDim","baseAxisDim","baseDataOffset","baseDim","stackedData","getBoundingRect","clone","applyTransform","transform","register","handler","zr","records","initGlobalListeners","record","useHandler","eventType","e","dis","makeDispatchAction","dispatchTooltipFinally","pendings","initialized","doEnter","onLeave","actuallyPayload","showLen","showTip","hideLen","hideTip","currTrigger","pendingList","unregister","bind","BaseAxisPointer","_dragging","animationThreshold","axisPointerModel","forceRender","status","_axisModel","_axisPointerModel","_api","_lastValue","_lastStatus","_group","handle","_handle","hide","show","elOption","makeElOption","graphicKey","_lastGraphicKey","clear","moveAnimation","_moveAnimation","determineAnimation","doUpdateProps","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","updateMandatoryProps","_renderHandle","isCategoryAxis","useSnap","getBandWidth","seriesDataCount","axisExtent","pointerOption","pointer","pointerEl","graphic","labelEl","updateLabelShowHide","setStyle","updateHandleTransform","isInit","handleModel","createIcon","cursor","draggable","onmousemove","onmousedown","_onHandleDragMove","drift","ondragend","_onHandleDragEnd","handleSize","scaleX","scaleY","_moveHandleToValue","getHandleTransProps","getHandleTransform","dx","dy","trans","_payloadInfo","lastProp","_doDispatchAxisPointer","payloadInfo","cursorPoint","tooltipOption","axesInfo","componentIndex","doClear","buildLabel","xy","wh","xDimIndex","propsEqual","lastProps","newProps","equals_1","zlevel","CartesianAxisPointer","grid","axisPointerType","otherExtent","getCartesian","getGlobalExtent","pixelValue","toGlobalCoord","dataToCoord","elStyle","viewHelper","pointerShapeBuilder","layoutInfo","cartesianAxisHelper","labelInside","labelMargin","pos","labelDirection","delta","currPosition","cursorOtherValue","tooltipOptions","line","targetShape","getAxisDimIndex","subPixelOptimize","shadow","bandWidth","span","AxisPointerModel","snap","triggerTooltip","link","animationDurationUpdate","lineStyle","shadowStyle","formatter","precision","margin","padding","backgroundColor","icon","Component","AxisPointerView","globalAxisPointerModel","globalTooltipModel","triggerOn","globalListener","indexOf","axisTrigger","coordSysAxesInfo","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","outputPayload","showValueMap","dataByCoordSys","updaters","showPointer","showTooltip","coordSysMap","coordSysKey","coordSysContainsPoint","containPoint","axisInfo","inputAxisInfo","findInputAxisInfo","pointToData","processOnAxis","linkTriggers","tarAxisInfo","tarKey","linkGroup","srcAxisInfo","srcKey","srcValItem","mapper","parse","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","noSnap","outputFinder","isBlank","containData","involveSeries","buildPayloadsBySeries","payloadBatch","snapToValue","minDist","minDiff","seriesModels","series","seriesNestestValue","dataIndices","dataDim","getAxisTooltipData","nestestValue","dist","dataIndexInside","coordSysModel","modelHelper","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","dataByAxis","valueLabelOpt","seriesDataIndices","outputAxesInfo","valItem","useHandle","escapeConnect","highDownKey","lastHighlights","newHighlights","batchItem","toHighlight","toDownplay","notBlur","batch","axisName","AxisView","registerComponentModel","registerComponentView","registerPreprocessor","axisPointer","collect","seriesInvolved","collectAxesInfo","collectSeriesInfo","linksOption","linkGroups","getCoordinateSystems","axisPointerEnabled","makeKey","axesInfoInCoordSys","baseTooltipModel","getAxes","saveTooltipAxisInfo","getTooltipAxes","triggerAxis","cross","tooltipAxes","baseAxes","otherAxes","fromTooltip","axisPointerShow","isHandleTrigger","makeAxisPointerModel","axisKey","groupIndex","getLinkGroupIndex","tooltipAxisPointerModel","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","crossStyle","textStyle","eachSeries","seriesTooltipTrigger","seriesTooltipShow","getAxis","linkOption","checkPropInLink","linkPropValue","axisPropValue","fixValue","getAxisInfo","reverse","getAxisPointerModel","buildElStyle","styleModel","getLineStyle","getAreaStyle","buildLabelElOption","labelPos","text","getValueLabel","labelModel","paddings","font","getFont","textRect","confineInContainer","bgColor","getTextColor","viewWidth","getWidth","viewHeight","getHeight","getLabel","params_1","axisDimension","seriesData","idxItem","dataParams","getDataParams","replace","getTransformedPosition","labelOffset","buildCartesianSingleLabelElOption","textLayout","makeLineShape","p1","p2","x1","y1","makeRectShape","prepareLayoutList","input","rawItem","defaultAttr","getComputedTransform","localRect","isAxisAligned","minMargin","globalRect","obb","OrientedBoundingRect","labelLine","priority","layoutOption","computedLayoutOption","axisAligned","hideOverlap","labelList","displayedLabels","BoundingRect","hideEl","emphasisState","ensureState","labelItem","copy","overlapped","existsTextCfg","intersect","labelGuideIgnore","AxisBuilder","nameDirection","tickDirection","handleAutoShown","transformGroup","updateTransform","_transformGroup","hasBuilder","builders","getGroup","innerTextLayout","axisRotation","textRotation","direction","rotationDiff","makeAxisEventDataBase","eventData","isLabelSilent","tooltipOpt","axisLine","shown","matrix","pt1","pt2","lineCap","strokeContainThreshold","subPixelOptimizeLine","anid","arrows","arrowSize","arrowOffset","symbolWidth_1","symbolHeight_1","sqrt","symbol","axisTickLabel","ticksEls","buildAxisMajorTicks","labelEls","buildAxisLabel","fixMinMaxLabelShow","buildAxisMinorTicks","labelLayout","axisNameAvailableWidth","nameLocation","textStyleModel","gap","gapSignal","isNameLocationCenter","nameRotation","endTextLayout","textFont","truncateOpt","ellipsis","maxWidth","nameTruncateMaxWidth","overflow","setTooltipConfig","__fullText","targetType","decomposeTransform","textRotate","onLeft","tickEls","showMinLabel","showMaxLabel","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","nextTick","lastTick","prevTick","ignoreEl","isTwoLabelOverlapped","current","next","firstRect","nextRect","mRotationBack","getLocalTransform","createTicks","ticksCoords","tickTransform","tickEndCoord","tickLineStyle","anidPrefix","tickCoord","tickEl","autoBatch","tickValue","tickModel","lineStyleModel","getTicksCoords","minorTickModel","minorTicksCoords","getMinorTicksCoords","minorTickLineStyle","minorTicksEls","k","axisLabelShow","labels","getViewLabels","labelRotation","labelRotate","rawCategoryData","getCategories","triggerEvent","formattedLabel","rawLabel","itemLabelModel","rawCategoryItem","textColor","level","tickIndex","axisPointerClazz","axisPointerClass","_doUpdateAxisPointerClass","updateAxisPointer","_axisPointer","_disposeAxisPointer","Clazz","getAxisPointerClass","registerAxisPointerClass","clazz","GridModel","layoutMode","left","top","right","bottom","containLabel","AxisModelCommonMixin","getNeedCrossZero","getCoordSysModel","CartesianAxisModel","nameRotate","nameTruncate","placeholder","nameTextStyle","nameGap","onZero","onZeroAxisIndex","symbolSize","axisTick","axisLabel","fontSize","splitLine","splitArea","areaStyle","categoryAxis","boundaryGap","deduplication","alignWithLabel","interval","splitNumber","minorTick","minorSplitLine","timeAxis","rich","primary","fontWeight","logAxis","logBase","category","time","log","AXIS_TYPES","axisModelCreator","BaseAxisModelClass","extraDefaultOption","axisDefault","AxisModel","mergeDefaultAndTheme","inputPositionParams","themeModel","getTheme","getDefaultOption","getAxisType","optionUpdated","thisOption","__ordinalMeta","OrdinalMeta","rawData","registerSubTypeDefaulter","Cartesian","_dimList","_axes","getAxesByScale","scaleType","toLowerCase","addAxis","cartesian2DDimensions","canCalculateAffineTransform","Cartesian2D","calcAffineTransform","_transform","_invTransform","xAxisScale","yAxisScale","xScaleExtent","yScaleExtent","xScaleSpan","yScaleSpan","translateX","translateY","m","axisX","axisY","contain","toLocalCoord","containZone","data1","data2","zoneDiag1","zoneDiag2","area","zone","clamp","xVal","yVal","xAxis","yAxis","xScale","yScale","xAxisExtent","yAxisExtent","coordToData","xExtent","yExtent","createAxisLabels","makeCategoryLabels","makeRealNumberLabels","createAxisTicks","makeCategoryTicks","ticks","getTicks","tick","getLabelModel","makeCategoryLabelsActually","labelCategoryInterval","numericLabelInterval","labelsCache","getListCache","optionLabelInterval","listCacheGet","makeLabelsByCustomizedCategoryInterval","makeAutoCategoryInterval","makeLabelsByNumericCategoryInterval","listCacheSet","tickCategoryInterval","ticksCache","optionTickInterval","labelsResult","labelFormatter","prop","cache","autoInterval","calculateCategoryInterval","fetchAutoCategoryIntervalCalculationParams","axisRotate","ordinalScale","ordinalExtent","tickCount","step","unitSpan","unitW","unitH","maxW","maxH","dw","dh","lastAutoInterval","lastTickCount","axisExtent0","axisExtent1","getRotate","categoryInterval","onlyTick","startTick","ceil","showAllLabel","includeMinLabel","includeMaxLabel","addItem","tickObj","NORMALIZED_EXTENT","Axis","_extent","getPixelPrecision","dataExtent","setExtent","normalize","fixExtentWithBands","t","getTickModel","tickVal","fixOnBandTicksCoords","minorTicks","getMinorTicks","minorTicksGroup","nTick","ticksLen","last","diffSize","crossLen","shift_1","ticksItem","littleThan","unshift","pop","Axis2D","coordExtent","asc","ret","categorySortInfo","setSortInfo","mathLog","alignScaleTicks","alignToScale","intervalScaleProto","Interval","alignToTicks","alignToNicedTicks","alignToSplitNumber","alignToInterval","getInterval","scaleExtent","rawExtent","isMinFixed","fixMin","isMaxFixed","fixMax","base","calcNiceExtent","nicedSplitNumber","t0","t1","setInterval","setNiceExtent","Grid","gridModel","_coordsMap","_coordsList","_axesMap","_axesList","_initCartesian","getRect","_rect","axesMap","updateAxisTicks","axes","alignTo","axesIndices","axisNeedsAlign","_updateScale","onZeroRecords","fixAxisOnZero","resize","ignoreContainLabel","boxLayoutParams","getBoxLayoutParams","isContainLabel","gridRect","axesList","adjustAxes","updateAxisTransform","labelUnionRect","axesMapOnDim","xAxisIndex","yAxisIndex","coordList","getCartesians","convertToPixel","_findConvertTarget","convertFromPixel","coordsList","axisPositionUsed","axesCount","createAxisCreator","isAxisUsedInTheGrid","axisPosition","master","unionExtent","unionExtentFromData","axesModelMap","create","grids","otherAxisDim","getAxesOnZeroOf","otherAxisOnZeroOf","canOnZeroToAxis","getOnZeroRecordKey","coordBase","axisExtentSum","rectCoordAxisBuildSplitArea","axisView","axisGroup","splitAreaModel","areaStyleModel","areaColors","areaColorsLen","lastSplitAreaColors","splitAreaColors","newSplitAreaColors","colorIndex","cIndex","prev","rectCoordAxisHandleRemove","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","_axisGroup","axisBuilder","elementType","cartesians","axisElementBuilders","isInitialSortFromBarRacing","groupTransition","splitLineModel","lineColors","lineCount","minorSplitLineModel","CartesianXAxisView","CartesianYAxisView","GridView","extraOption","registerCoordinateSystem","TitleModel","ignoreSize","subtext","subtarget","itemGap","subtextStyle","TitleView","titleModel","subtextStyleModel","disableBox","subText","subTextEl","sublink","groupRect","layoutRect","markRedraw","alignStyle","TooltipModel","showContent","trigger","alwaysShowContent","displayMode","renderMode","confine","showDelay","hideDelay","transitionDuration","enterable","extraCssText","animationEasingUpdate","shouldTooltipConfine","tooltipModel","confineOption","testStyle","styleProps","env","document","documentElement","TRANSFORM_VENDOR","TRANSITION_VENDOR","toCSSVendorPrefix","styleVendor","styleProp","getComputedStyle","stl","currentStyle","defaultView","CSS_TRANSITION_VENDOR","CSS_TRANSFORM_VENDOR","gCssText","mirrorPos","assembleArrow","arrowPosition","rotateDeg","arrowPos","positionStyle","transformStyle","rotateRadian","arrowWH","rotatedWH","SQRT2","borderStyle","styleCss","assembleTransition","onlyFade","transitionCurve","transitionOption","transitionText","assembleTransform","toString","x0","toFixed","y0","is3d","translate","assembleFont","cssText","assembleCssText","enableTransition","boxShadow","borderName","camelCase","makeStyleCoord","appendToBody","zrX","zrY","zrPainter","painter","zrViewportRoot","getViewportRoot","body","viewportRootOffset","getViewportRootOffset","offsetLeft","offsetTop","TooltipHTMLContent","container","_show","_styleCoord","_enterable","_firstShow","_longHide","createElement","domBelongToZr","_zr","_appendToBody","appendChild","_container","self","onmouseenter","clearTimeout","_hideTimeout","_inContent","window","dispatch","onmouseleave","hideLater","_hideDelay","domStyle","_moveIfResized","className","nearPointColor","_longHideTimeout","styleCoord","innerHTML","display","setContent","content","markers","arrow","parentNode","childNodes","arrowEl","setEnterable","getSize","offsetWidth","offsetHeight","style_1","transforms","ratioX","ratioY","visibility","willChange","setTimeout","isShow","removeChild","TooltipRichContent","markupStyleCreator","richTextStyles","lineHeight","textShadowColor","bounding","shadowOuterSize","calcShadowOuterSize","mathMaxWith0","proxyRect","TooltipView","init","getDom","_renderMode","_tooltipContent","_tooltipModel","_ecModel","_alwaysShowContent","tooltipContent","_initGlobalListener","_keepShow","_tryShow","_hide","_lastX","_lastY","self_1","_refreshUpdateTimeout","isDisposed","manuallyShowTip","_lastDataByCoordSys","from","uid","_ticket","cmptRef","findComponentReference","positionDefault","tooltipConfig","_manuallyAxisShowTip","pointInfo","findHover","manuallyHideTip","tooltipCascadedModel","buildTooltipModel","_showAxisTooltip","seriesDispatcher_1","cmptDispatcher_1","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","_showTimout","singleTooltipModel","cbParamsList","articleMarkup","blocks","noHeader","markupTextArrLegacy","itemCoordSys","axisItem","axisValue","axisValueLabel","axisSectionMarkup","header","sortBlocks","cbParams","axisHelper","marker","makeTooltipMarker","seriesTooltipResult","formatTooltip","frag","valueFormatter","positionExpr","orderMode","builtMarkupText","blockBreak","allMarkupText","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","random","dispatcher","ecData","dataModel","tooltipTrigger","markupText","asyncTicket","tooltipModelCascade","cmpt","componentMainType","subTooltipModel","defaultHtml","formatterParams","html","nearPoint","_getNearestPoint","useUTC","params0","isTimeAxis","format","callback","cbTicket","tooltipDataParams","contentSize","vAlign","viewSize","boxLayoutPosition","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","lastCbParamsList","_cbParamsList","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","newIdxItem","seriesIdx","lastCbParams","modelCascade","defaultTooltipOption","resultModel","gapH","gapV","domWidth","domHeight","rectWidth","rectHeight","queryOptionMap","keys","queryResult","useDefault","enableAll","enableNone","view","getViewOfComponentModel","subEl","TOOLTIP_LINE_HEIGHT_CSS","getTooltipTextStyle","nameFontColor","nameFontSize","nameFontWeight","valueFontColor","valueFontSize","valueFontWeight","nameStyle","valueStyle","HTML_GAPS","RICH_TEXT_GAPS","createTooltipMarkup","isSectionFragment","getBuilder","buildSection","buildNameValue","getBlockGapLevel","gapLevel_1","subBlockLen","hasInnerGap_1","subBlock","subGapLevel","fragment","topMarginForOuterGap","toolTipTextStyle","gaps","getGap","subMarkupTextList","subBlocks","orderMap","valueAsc","valueDesc","comparator_1","evaluate","sortParam","subMarkupText","richText","wrapBlockHTML","displayableHeader","wrapInlineNameRichText","noName","noValue","noMarker","markerType","valueTypeOption","markerStr","markerColor","readableName","valueType","readableValueList","valueAlignRight","valueCloseToMarker","wrapInlineValueRichText","wrapInlineNameHTML","wrapInlineValueHTML","buildTooltipMarkup","builder","gapLevel","encodedContent","topGap","clearfix","marginCSS","leftHasMarker","marginCss","valueList","alignRight","paddingStr","alignCSS","wrapRichTextStyle","styles","paddingLeft","retrieveVisualColorForTooltipMarker","visualDrawType","getPaddingFromTooltipModel","TooltipMarkupStyleCreator","_nextStyleNameId","_generateStyleName","colorStr","markerId","finalStl","styleName","OrdinalScale","setting","getSetting","_ordinalMeta","getOrdinal","rank","_getTickNumber","infoOrdinalNumbers","ordinalsByTick","_ordinalNumbersByTick","ticksByOrdinal","_ticksByOrdinalNumber","allCategoryLen","unusedOrdinal","ticksByOrdinalNumber","tickNumber","ordinalNumbersByTick","cateogry","isInExtentRange","calcNiceTicks","Scale","bisect","lo","hi","mid","TimeScale","settings","_minLevelUnit","getFormattedLabel","isUTC","lang","_interval","innerTicks","getIntervalTicks","_approxInterval","d","Date","getFullYear","getMonth","getDate","minInterval","maxInterval","approxTickNum","scaleIntervalsLen","scaleIntervals","number","isUnitValueSame","unit","valueA","valueB","dateA","dateB","isSame","isSameYear","isSameMonth","isSameDay","isSameHour","isSameMinute","isSameSecond","isSameMilliSecond","getDateInterval","approxInterval","daysInMonth","getMonthInterval","APPROX_ONE_MONTH","getHourInterval","getMinutesAndSecondsInterval","isMinutes","getMillisecondsInterval","getFirstTimestampOfUnit","date","unitName","outDate","getTime","bottomUnitName","safeLimit","unitNames","iter","addTicksInSpan","minTimestamp","maxTimestamp","getMethodName","setMethodName","isDate","dateTime","notAdd","addLevelTicks","lastLevelTicks","levelTicks","newAddedTicks","isFirstLevel","endTick","getterName","setterName","levelsTicks","currentLevelTicks","lastLevelTickCount","primaryTimeUnit","nextPrimaryTimeUnit","levelTicksRemoveDuplicated","targetTickNum","levelsTicksInExtent","maxLevel","scaleProto","roundingErrorFix","mathFloor","mathCeil","mathPow","pow","LogScale","_originalScale","expandToNicedExtent","originalScale","originalExtent","powVal","_fixMin","fixRoundingError","_fixMax","err","niceExtent","_niceExtent","proto","originalVal","ScaleRawExtentInfo","_prepareParams","_dataMin","_dataMax","isOrdinal","_isOrdinal","_needCrossZero","modelMinRaw","_modelMinRaw","_modelMinNum","parseAxisModelMinMax","modelMaxRaw","_modelMaxRaw","_modelMaxNum","_axisDataLen","boundaryGapArr","_boundaryGapInner","calculate","dataMin","dataMax","axisDataLen","boundaryGapInner","minFixed","maxFixed","determinedMin","_determinedMin","determinedMax","_determinedMax","modifyDataMinMax","minMaxName","DATA_MIN_MAX_ATTR","setDeterminedMinMax","DETERMINED_MIN_MAX_ATTR","freeze","frozen","ensureScaleRawExtentInfo","rawExtentInfo","minMax","getScaleExtent","rawExtentResult","setBlank","barSeriesModels","isBaseAxisAndHasBarSeries_1","barWidthAndOffset","adjustedScale","adjustScaleForOverflow","axisLength","barsOnCurrentAxis","minOverflow","maxOverflow","totalOverFlow","oldRange","oldRangePercentOfNew","overflowBuffer","niceScaleExtent","inModel","extentInfo","Log","isIntervalOrTime","createScaleByModel","Ordinal","Time","locale","getLocaleModel","ifAxisCrossZero","makeLabelFormatter","categoryTickStart","tpl","getAxisRawValue","estimateLabelUnionRect","realNumberScaleTicks","categoryScaleExtent","axisLabelModel","unrotatedSingleRect","getTextRect","singleRect","rotateTextRect","union","rotateRadians","beforeWidth","beforeHeight","afterWidth","afterHeight","rotatedRect","getOptionCategoryInterval","shouldShowAllLabels","getDataDimensionsOnAxis","dataDimMap","rawAxisPosition","rectBound","axisOffset","posBound","onZeroCoord","dirMap","isCartesian2DSeries","findAxisModels","axisModelMap","coordinateSystemCreators","CoordinateSystemManager","_coordinateSystems","coordinateSystems","creater","creator","platform","navigator","decalColor","darkMode","colorBy","gradientColor","aria","decal","decals","dashArrayX","dashArrayY","fontFamily","match","fontStyle","blendMode","stateAnimation","animationDuration","hoverLayerThreshold","internalOptionCreatorMap","concatInternalOptions","newCmptOptionList","internalOptionCreator","internalOptions","reCreateSeriesIndices","assertSeriesInitialized","initBase","OPTION_INNER_KEY","OPTION_INNER_VALUE","GlobalModel","parentModel","theme","optionManager","_theme","_locale","_optionManager","setOption","optionPreprocessorFuncs","innerOpt","normalizeSetOptionInput","_resetOption","resetOption","optionChanged","baseOption","mountOption","restoreData","_mergeOption","timelineOption","getTimelineOption","mediaOptions","getMediaOption","mediaOption","mergeOption","newOption","componentsMap","_componentsMap","componentsCount","_componentsCount","newCmptTypes","newCmptTypeMap","replaceMergeMainTypeMap","visitComponent","oldCmptList","mergeMode","mappingResult","tooltipExists","optionsByMainType","cmptsByMainType","cmptsCountByMainType","existing","newCmptOption","isSeriesType","ComponentModelClass","keyInfo","subType","constructor","extraOpt","brandNew","__requireNewView","componentOption","mainTypeInReplaceMerge","_seriesIndices","getOption","optInMainType","realLen","metNonInner","setUpdatePayload","_payload","queryComponents","condition","cmpts","queryByIdOrName","filterBySubType","findComponents","queryCond","getQueryCond","doFilter","q","indexAttr","idAttr","nameAttr","ctxForAll_1","cbForAll_1","getSeriesByName","nameStr","oneSeries","getSeriesByType","getSeries","getSeriesCount","rawSeriesIndex","eachRawSeries","eachSeriesByType","eachRawSeriesByType","isSeriesFiltered","_seriesIndicesMap","getCurrentSeriesIndices","filterSeries","newSeriesIndices","seriesRawIdx","componentTypes","components","component","isNotTargetSeries","seriesIndices","airaOption","enabled","mergeTheme","globalDefault","seriesId","name_1","notMergeColorLayer","colorLayer","themeItem","idOrName","keyMap_1","idOrNameItem","idName","idName_1","replaceMerge","availableMethods","ExtensionAPI","ecInstance","QUERY_REG","OptionManager","_timelineOptions","_mediaList","_currentMediaIndices","rawOption","dataset","optionBackup","_optionBackup","newParsedOption","parseRawOption","_newBaseOption","timelineOptions","mediaList","mediaDefault","isRecreate","_mediaDefault","timelineModel","getCurrentIndex","ecWidth","ecHeight","indices","applyMediaQuery","indicesEquals","isNew","declaredBaseOption","timelineOnRoot","timeline","timelineOptionsOnRoot","options","mediaOnRoot","media","hasMedia","hasTimeline","doPreprocess","preProcess","singleMedia","realMap","aspectratio","applicatable","matched","operator","realAttr","compare","real","expect","indices1","indices2","POSSIBLE_STYLES","compatEC2ItemStyle","itemStyleOpt","normalItemStyleOpt","normal","emphasisItemStyleOpt","emphasis","convertNormalEmphasis","optType","useExtend","normalOpt","emphasisOpt","focus","blurScope","removeEC3NormalStatus","compatTextStyle","labelOptSingle","textPropName","compatEC3CommonStyles","processSeries","seriesOpt","markPoint","markLine","markArea","nodes","edgeData","links","edges","mpData","mlData","breadcrumb","levels","leaves","toArr","o","toObj","globalCompatStyle","isTheme","axisOpt","parallelOpt","parallelAxisDefault","calendar","calendarOpt","radar","radarOpt","axisNameGap","geoOpt","regions","regionObj","timelineOpt","toolbox","toolboxOpt","feature","featureOpt","path","pathArr","split","overwrite","compatLayoutProperties","LAYOUT_PROPERTIES","COMPATITABLE_COMPONENTS","BAR_ITEM_STYLE_MAP","compatBarItemStyle","oldName","newName","compatPieLabel","edgeDistance","compatSunburstState","downplay","blur","compatGraphFocus","focusNodeAdjacency","traverseTree","children","globalBackwardCompat","clipOverflow","clockWise","hoverOffset","scaleSize","pointerColor","highlightPolicy","mapType","mapLocation","hoverAnimation","dataRange","visualMap","componentName","dataStack","stackInfoMap","stack","stackInfoList","stackInfo","stackResultDimension","stackedOverDimension","stackedDimension","stackedByDimension","isStackedByIndex","calculateStack","targetStackInfo","idxInStack","resultVal","resultNaN","targetData","stackStrategy","v0","v1","byValue","stackedDataRawIndex","stackedOver","defaultStyleMappers","makeStyleMapper","defaultColorKey","getStyleMapper","stylePath","styleMapper","visualStyleMapper","console","warn","getDefaultColorKey","colorKey","seriesStyleTask","createOnAllSeries","performRawSeries","visualStyleAccessPath","getStyle","globalStyle","decalOption","dirty","colorCallback","hasAutoColor","colorPalette","getColorFromPalette","dataEach","sharedModel","dataStyleTask","ignoreStyleOnData","existsStyle","dataColorPaletteTask","overallReset","paletteScopeGroupByType","getColorBy","isColorBySeries","colorScope","dataAll","getRawData","idxMap","fromPalette","dataCount","defaultLoading","maskColor","showSpinner","spinnerRadius","mask","textContent","labelRect","animateShape","when","textWidth","Scheduler","dataProcessorHandlers","visualHandlers","_stageTaskMap","_dataProcessorHandlers","_visualHandlers","_allHandlers","taskRecord","overallTask","getPerformArgs","task","isBlock","__pipeline","pipeline","_pipelineMap","pCtx","progressiveEnabled","__idxInPipeline","blockIndex","modDataCount","modBy","getPipeline","pipelineId","updateStreamModes","dataLen","threshold","restorePipelines","scheduler","pipelineMap","head","tail","preventIncremental","_pipe","dataTask","prepareStageTasks","stageTaskMap","errMsg","_createSeriesStageTask","_createOverallStageTask","prepareView","renderTask","__block","performDataProcessorTasks","_performStageTasks","block","performVisualTasks","stageHandlers","unfinished","needSetDirty","setDirty","dirtyMap","stageHandler","visualType","stageHandlerRecord","seriesTaskMap","overallNeedDirty_1","agentStubMap","stub","performArgs_1","perform","performArgs","skip","performSeriesTasks","plan","getUpstream","oldSeriesTaskMap","newSeriesTaskMap","getTargetSeries","seriesTaskPlan","seriesTaskReset","seriesTaskCount","useClearVisual","isVisual","isLayout","overallTaskReset","oldAgentStubMap","newAgentStubMap","overallProgress","shouldOverallTaskDirty","createStub","stubReset","onDirty","stubOnDirty","agent","pipe","wrapStageHandler","detectSeriseType","stubProgress","getDownstream","resetDefines","makeSeriesTaskProgress","singleSeriesTaskProgress","resetDefineIdx","resetDefine","progress","legacyFunc","ecModelMock","apiMock","mockMethods","Clz","Global","cond","colorAll","contrastColor","axisCommon","legend","title","iconStyle","dataZoom","brushStyle","handleStyle","moveHandleStyle","fillerColor","dataBackground","selectedDataBackground","controlStyle","dayLabel","monthLabel","yearLabel","graph","gauge","detail","candlestick","color0","borderColor0","ECEventProcessor","normalizeQuery","cptQuery","dataQuery","otherQuery","condCptType","main","sub","suffixes_1","dataKeys_1","reserved","propSuffix","suffixPos","lastIndexOf","eventInfo","targetEl","packedEvent","check","filterForExposedEvent","host","propOnHost","afterTrigger","SYMBOL_PROPS_WITH_CB","SYMBOL_PROPS","seriesSymbolTask","legendIcon","hasSymbolVisual","symbolOptions","symbolOptionsCb","hasCallback","symbolPropName","defaultSymbol","symbolKeepAspect","symbolPropsCb","rawValue","dataSymbolTask","getItemVisualFromData","getVisualFromData","handleSeriesLegacySelectEvents","eventPostfix","ecIns","legacyEventName","isSilent","selectedMap","selected","fromActionPayload","handleLegacySelectEvents","messageCenter","isFromClick","fromAction","decalMap","WeakMap","decalCache","LRU","decalKeys","createOrUpdatePatternFromDecal","decalObject","isSVG","oldPattern","decalOpt","maxTileWidth","maxTileHeight","pattern","repeat","setPatternnSource","cacheKey","isValidKey","svgElement","image","normalizeDashArrayX","normalizeDashArrayY","symbolArray","normalizeSymbolArray","lineBlockLengthsX","getLineBlockLengthX","lineBlockLengthY","getLineBlockLengthY","canvas","svgRoot","tag","attrs","pSize","getPatternSize","xlen","symbolRepeats","brushDecal","clearRect","fillStyle","fillRect","ySum","yId","yIdTotal","xId0","symbolYId","xId1","xId1Total","xSum","top_1","symbolXId","brushSymbol","symbolType","symbolVNode","renderOneToVNode","getContext","put","svgWidth","svgHeight","isAllString","dash","dashValue","isAllNumber","n","dashValue_1","blockLength","decalVisual","lifecycle","Eventful","hasWindow","TEST_FRAME_REMAIN_TIME","PRIORITY_PROCESSOR_SERIES_FILTER","PRIORITY_PROCESSOR_DATASTACK","PRIORITY_PROCESSOR_FILTER","PRIORITY_PROCESSOR_DEFAULT","PRIORITY_PROCESSOR_STATISTIC","PRIORITY_VISUAL_LAYOUT","PRIORITY_VISUAL_PROGRESSIVE_LAYOUT","PRIORITY_VISUAL_GLOBAL","PRIORITY_VISUAL_CHART","PRIORITY_VISUAL_COMPONENT","PRIORITY_VISUAL_CHART_DATA_CUSTOM","PRIORITY_VISUAL_POST_CHART_LAYOUT","PRIORITY_VISUAL_BRUSH","PRIORITY_VISUAL_ARIA","PRIORITY_VISUAL_DECAL","FILTER","SERIES_FILTER","GLOBAL","CHART","POST_CHART_LAYOUT","COMPONENT","BRUSH","CHART_ITEM","ARIA","DECAL","IN_MAIN_PROCESS_KEY","PENDING_UPDATE","STATUS_NEEDS_UPDATE_KEY","ACTION_REG","CONNECT_STATUS_KEY","CONNECT_STATUS_PENDING","CONNECT_STATUS_UPDATING","CONNECT_STATUS_UPDATED","createRegisterEventWithLowercaseECharts","method","args","_i","toLowercaseNameAndCallEventful","disposedWarning","createRegisterEventWithLowercaseMessageCenter","prepare","updateDirectly","updateMethods","doConvertPixel","doDispatchAction","flushPendingActions","triggerUpdatedEvent","bindRenderedEvent","bindMouseEvent","renderComponents","renderSeries","createExtensionAPI","enableConnect","markStatusToUpdate","applyChangedStates","MessageCenter","messageCenterProto","ECharts","dom","_chartsViews","_chartsMap","_componentsViews","_pendingActions","themeStorage","_dom","defaultRenderer","defaultCoarsePointer","defaultUseDirtyRect","zrender","renderer","devicePixelRatio","ssr","useDirtyRect","useCoarsePointer","pointerSize","_ssr","_throttledZrFlush","flush","_coordSysMgr","prioritySortFunc","__prio","timsort","visualFuncs","dataProcessorFuncs","_scheduler","_messageCenter","_initEvents","_onframe","_disposed","updateParams","remainTime","startTime","isSSR","notMerge","lazyUpdate","transitionOpt","transition","seriesTransition","wakeUp","setTheme","getRenderedCanvas","renderToCanvas","pixelRatio","renderToSVGString","renderToString","useViewBox","getSvgDataURL","storage","getDisplayList","toDataURL","getDataURL","excludeComponents","excludesComponentViews","__viewId","url","getType","getConnectedDataURL","isSvg","groupId","MAX_NUMBER","connectedGroups","left_1","right_1","bottom_1","canvasList_1","dpr_1","instances","chart","getSvgDom","getBoundingClientRect","targetCanvas","zr_1","content_1","getSvgRoot","connectedBackgroundColor","setBackgroundColor","refreshImmediately","img","containPixel","findResult","parsedFinder","defaultMainType","getViewOfSeriesModel","MOUSE_EVENT_NAMES","eveName","isGlobalOut","_$eventProcessor","zrEventfulCallAtLast","eventActionMap","actionType","DOM_ATTRIBUTE_KEY","_loadingFX","needPrepare","showLoading","cfg","hideLoading","loadingEffects","makeActionFromEvent","eventObj","actions","updateLabelLayout","updatedSeries","clearColorPalette","allocateZlevels","componentZLevels","seriesZLevels","hasSeperateZLevel","zlevelKey","getZLevelKey","lastSeriesZLevel_1","lastSeriesKey_1","zLevels","setZLevel","applyElementStates","newStates","oldStates","currentStates","stateName","hoverState","useStates","updateHoverLayerStatus","elCount","preventUsingHoverLayer","chartView","__alive","hoverLayer","updateBlend","blend","updateZ","preventAutoZ","doUpdateZ","maxZ2","getTextGuideLine","childrenRef","textGuideLineConfig","showAbove","clearStates","textGuide","stateTransition","hasState","prevStates","updateStates","stateAnimationModel","enableAnimation","__dirty","isComponent","viewList","viewMap","doPrepare","requireNewView","viewId","classType","__id","__model","__ecComponentInfo","splice","excludeSeriesIdMap","excludeSeriesId","modelId","isExcluded","focusSelf","dispatchers","callView","prepareAndUpdate","coordSysMgr","setDarkMode","componentDirtyList","componentView","seriesDirtyMap","updateView","updateVisual","updateLayout","coordSysList","chartsMap","payloadType","actionWrap","actionInfo","cptTypeTmp","updateMethod","cptType","payloads","batched","eventObjBatch","isSelectChange","isHighDown","action","mainTypeSpecified","newObj","pendingActions","isFinished","dirtyList","class_1","getComponentByElement","modelInfo","enterEmphasis","highlightDigit","leaveEmphasis","enterBlur","leaveBlur","enterSelect","leaveSelect","updateConnectedChartsStatus","charts","otherChart","action_1","otherCharts_1","echartsProto","one","eventName","wrapped","args2","idBase","isClient","existInstance","getInstanceByDom","registerTheme","preprocessorFunc","processor","normalizeRegister","registerPostInit","postInitFunc","registerUpdateLifecycle","registerPostUpdate","postUpdateFunc","test","coordSysCreator","layoutTask","registerVisual","visualTask","registeredTasks","targetList","fn","defaultPriority","__raw","registerLoading","loadingFx","registerMap","mapName","geoJson","specialAreas","registerTransform","light","dark","implsStore","registerImpl","impl","getImpl","month","monthAbbr","dayOfWeek","dayOfWeekAbbr","selector","all","brush","polygon","lineX","lineY","keep","dataView","zoom","back","magicType","bar","tiled","restore","saveAsImage","typeNames","pie","scatter","effectScatter","tree","treemap","boxplot","heatmap","lines","sankey","funnel","pictorialBar","themeRiver","sunburst","general","withTitle","withoutTitle","single","prefix","withName","withoutName","multiple","separator","middle","allData","partialData","LOCALE_ZH","LOCALE_EN","DEFAULT_LOCALE","localeStorage","localeModels","SYSTEM_LANG","langStr","language","browserLanguage","toUpperCase","registerLocale","localeObj","createLocaleObject","getDefaultLocaleModel","langEN","langZH","createTask","define","Task","_reset","_plan","_count","_onDirty","_dirty","planResult","upTask","_upstream","outputData","currentTask","forceFirstProgress","lastModBy","normalizeModBy","_modBy","lastModDataCount","_modDataCount","_doReset","_dueEnd","_outputDueEnd","_progress","_dueIndex","_doProgress","outputDueEnd","_settedOutputEnd","iterator","_callingProgress","downstream","_downstream","downTask","setOutputEnd","winCount","it","s","sStep","sCount","modNext","sequentialNext","defaultDimValueGetters","UNDEFINED","CtorUint32Array","Uint32Array","CtorUint16Array","Uint16Array","CtorFloat64Array","Float64Array","dataCtors","getIndicesCtor","rawCount","getInitialExtent","cloneChunk","originalChunk","Ctor","prepareStore","append","DataCtor","oldStore","oldLen","newStore","_chunks","_rawExtent","_rawCount","_calcDimNameToIdx","inputDimensions","_provider","_indices","_getRawIdxIdentity","defaultGetter","_dimValueGetter","_dimensions","_initDataFromProvider","ensureCalculationDimension","calcDimNameToIdx","calcDimIdx","chunk","rawExtents","ordinalOffset","dimRawExtent","parseAndCollect","getDimensionProperty","persistent","minFillLen","chunks","dimLen","emptyDataItem","arrayRows","dimNames","dimStorage","clean","dimStore","dimData","dimDataArray","sortedDimDataArray","rawDataIndex","nearestIndices","nearestIndicesLen","thisCount","buffer","dimSize","dim0","_updateGetRawIdx","originalCount","storeArr","quickFinished","dimStorage2","min2","max2","val2","dimk","_updateDims","targetChunks","tmpRetValue","retValue","rawExtentOnDim","maxArea","nextRawIndex","targetStorage","sampledIndex","frameSize","currentRawIndex","nextFrameStart","nextFrameEnd","avgX","avgY","frameStart","frameEnd","pointAX","pointAY","firstNaNIndex","countNaN","_getRawIdx","frameValues","sampleFrameIdx","initialExtent","dimExtent","currEnd","useRaw","clonedDims","ignoreIndices","clonedDimsMap","_copyCommonProps","_cloneIndices","getDimValueSimply","objectRows","keyedColumns","typedArray","uidBase","_needCollect","needCollect","_deduplication","createByAxisModel","dedplication","_getOrCreateMap","_map","SourceImpl","seriesLayoutBy","startIndex","metaRawOption","isSourceInstance","createSource","sourceData","thisMetaRawOption","detectSourceFormat","determined","determineSourceDimensions","sourceHeader","createSourceFromSeriesDataOption","cloneSourceShallow","normalizeDimensionsOption","dataArrayRows","arrayRowsTravelFirst","objectRowsCollectDimensions","colArr","value0","firstIndex","dimensions_1","nameMap","exist","maxLoop","shouldRetrieveDataByName","dimTypeShort","float","int","_fullDimCount","_updateDimOmitted","_dimNameMap","ensureSourceDimNameMap","makeStoreSchema","willRetrieveDataByName","makeHashStrict","shouldOmitUnusedDimensions","dimHash","fullDimIdx","seriesDimIdx","seriesDimDef","isCalculationCoord","hash","appendCalculationDimension","dimDef","isSeriesDataSchema","createDimNameMap","innerSource","dimNameMap","_b","_c","providerMethods","mountMethods","DefaultDataProvider","sourceParam","_source","_offset","_dimSize","newData","protoInitialize","methods","getMethodMapKey","getItemForTypedArray","countForTypedArray","fillStorageForTypedArray","rawItemGetter","getRawSourceItemGetter","rawCounter","getRawSourceDataCounter","appendDataSimply","Error","newCol","oldCol","getItemSimply","rawSourceItemGetterMap","row","col","countSimply","rawSourceDataCounterMap","getRawValueSimply","rawSourceValueGetterMap","getRawSourceValueGetter","retrieveRawValue","enableDataStack","dimensionDefineList","byIndex","stackedCoordDimension","isLegacyDimensionsInput","stackedByDimInfo","stackedDimInfo","mayStack","stackedDimCoordDim_1","stackedDimType","stackedDimCoordIndex_1","stackedOverDimensionDefine","stackResultDimensionDefine","isDimensionStacked","stackedDim","getStackedDimension","targetDim","parseDataValue","parseFloat","ORDER_COMPARISON_OP_MAP","lt","lval","rval","lte","gt","gte","SortOrderComparator","FilterOrderComparator","op","_opFn","_rvalFloat","order","incomparable","isDesc","_resultLT","_incomparable","lvalFloat","rvalFloat","lvalNotNumeric","rvalNotNumeric","lvalIsStr","rvalIsStr","FilterEqualityComparator","isEq","_rval","_isEQ","_rvalTypeof","eqResult","lvalTypeof","BE_ORDINAL","Must","Might","Not","innerGlobalModel","resetSourceDefaulter","datasetMap","makeSeriesEncodeForAxisCoordSys","datasetModel","querySeriesUpstreamDatasetModel","baseCategoryDimIndex","categoryWayValueDimStart","encodeItemName","encodeSeriesName","coordDimInfoLoose","coordDimIdx","coordDimInfo","getDataDimCountOnCoordDim","datasetRecord","categoryWayDim","valueWayDim","pushDim","dimIdxArr","idxFrom","idxCount","coordDimName","thisData","queryDatasetUpstreamDatasetModels","guessOrdinal","doGuessOrdinal","sample","detectValue","dataObjectRows","dataKeyedColumns","dataOriginal","beStr","ExternalSource","cloneRawData","cloneAllDimensionInfo","retrieveValue","retrieveValueFromItem","convertValue","createExternalSource","internalSource","externalTransform","extSource","sourceHeaderCount","dimsByName","dimDefExt","errMsg_1","__isBuiltIn","rawValueGetter","upstream","isSupportedSourceFormat","externalTransformMap","registerExternalTransform","typeParsed","isBuiltIn","applyDataTransform","rawTransOption","sourceList","infoForPrint","pipedTransOption","pipeLen","transOption","applySingleDataTransform","upSourceList","pipeIndex","transType","extUpSourceList","upSource","upstreamList","resultIndex","resultMetaRawOption","firstUpSource","extensions","extensionRegisters","ComponentModel","ComponentView","SeriesModel","ChartView","ComponentViewClass","SeriesModelClass","ChartViewClass","defaulter","registerPainter","painterType","PainterCtor","use","ext","singleExt","EMPTY_OBJ","setLabelText","labelTexts","getLabelText","stateModels","baseText","labelDimIndex","normalModel","statesText","stateModel","setLabelStyle","stateSpecified","isSetOnText","needsCreateText","setTextContent","stateProxy","labelStatesTexts","showNormal","normalStyle","createTextStyle","createTextConfig","stateObj","stateShow","targetElEmphasisState","enableTextSetter","labelInner","getLabelStatesModels","labelName","statesModels","specifiedTextStyle","isNotNormal","isAttached","setTextStyleCommon","labelPosition","labelDistance","outsideFill","richResult","globalTextStyle","richItemNames","getRichItemNames","richTextStyle","setTokenTextStyle","richItemNameMap","richKeys","richKey","TEXT_PROPS_WITH_GLOBAL","TEXT_PROPS_SELF","TEXT_PROPS_BOX","inRich","fillColor","strokeColor","textBorderColor","textBorderWidth","textBorderType","lineDash","textBorderDashOffset","lineDashOffset","baseline","borderDash","gTextStyleModel","setLabelValueAnimation","getDefaultText","normalLabelModel","valueAnimation","defaultInterpolatedText","supportFloat32Array","Float32Array","Float32ArrayCtor","createFloat32Array","arg","STACK_PREFIX","getSeriesStackId","getAxisKey","prepareLayoutBarSeries","isOnCartesian","getValueAxesMinGaps","barSeries","axisValues","cnt","axisMinGaps","valuesInAxis","makeColumnLayout","seriesInfoList","minGap","extentSpan","scaleSpan","barMaxWidth","barMinWidth","isInLargeMode","barGap","barCategoryGap","stackId","doCalBarWidthAndOffset","columnsMap","seriesInfo","columnsOnAxis","remainedWidth","autoWidthCount","categoryGap","stacks","minWidth","categoryGapPercent","columnCount","barGapPercent","autoWidth","column","finalWidth","lastColumn","widthSum","retrieveColumnLayout","columnLayoutInfo","columnOffset","columnWidth","createProgressiveLayout","valueDim","stackResultDim","stacked","isValueAxisH","valueAxisStart","getValueAxisStart","isLarge","stackedDimIdx","largePoints","largeBackgroundPoints","bgSize","idxOffset","baseValue","baseCoord","startValue","startCoord","valueAxisHorizontal","newCptOption","ctor","optList","clz","superClass","indexKey","idKey","boxLayoutModel","getDependencies","deps","getClassesByMainType","AREA_STYLE_KEY_MAP","AreaStyleMixin","excludes","includes","PATH_COLOR","textStyleParams","tmpText","TextStyleMixin","isEmphasis","rest","ignoreParent","_doGet","parsePath","hasPath","pathFinal","resolveParentPath","isEmpty","SourceManager","sourceHost","_sourceList","_storeList","_upstreamSignList","_versionSignBase","_sourceHost","_setLocalSource","upstreamSignList","_getVersionSign","prepareSource","_isDirty","_createSource","resultSourceList","upSourceMgrList","_getUpstreamSourceManagers","hasUpstream","isSeries","upSourceMgr","newMetaRawOption","_getSourceMetaRawOption","upMetaRawOption","needsCreateSource","_applyTransform","upMgrList","transformOption","fromTransformResult","doThrow","upMgr","datasetIndex","upSrcMgr","sourceIndex","seriesDimRequest","_innerGetDataStore","storeDims","seriesSource","sourceReadKey","storeList","cachedStoreMap","cachedStore","defaultSeriesFormatTooltip","inlineValue","inlineValueType","multipleSeries","tooltipDims","tooltipDimLen","isValueArr","formatArrResult","formatTooltipArrayValue","inlineValues","inlineValueTypes","seriesNameSpecified","inlineName","isValueMultipleLine","setEachItem","getSelectionKey","SERIES_UNIVERSAL_TRANSITION_PROP","_selectedDataIndicesMap","dataTaskCount","dataTaskReset","wrapData","dataBeforeProcessed","autoSeriesName","_initSelectedMapFromData","themeSubType","fillDataTextStyle","newSeriesOption","getCurrentTask","getLinkedData","getAllData","mainData","getLinkedDataAll","requestColorNum","coordDimToDataDim","innerDataIndices","_innerSelect","unselect","selectedMode","nameOrId","toggleSelect","tmpArr","isSelected","getSelectedDataIndices","selectedDataIndicesMap","nameOrIds","isUniversalTransitionEnabled","universalTransitionOpt","universalTransition","lastDataIndex","registerClass","getSeriesAutoName","nameArr","dataTaskProgress","param","onDataChange","newList","DIMENSION_LABEL_REG","DataFormatMixin","componentSubType","$vars","extendParams","dimensionIndex","str","origin","dimStr","dimLoose","charAt","normalizeTooltipFormatResult","markupFragment","ITEM_STYLE_KEY_MAP","ItemStyleMixin","LINE_STYLE_KEY_MAP","LineStyleMixin","properties","innerColor","PaletteMixin","requestNum","defaultPalette","layeredPalette","getFromPalette","clearPalette","getNearestPalette","palettes","paletteNum","that","scopeFields","paletteIdx","paletteNameMap","palette","pickedPaletteItem","roundNumber","IntervalScale","_intervalPrecision","thisExtent","other","niceTickExtent","intervalPrecision","lastNiceTick","minorInterval","dataNum","expandSize","_setting","_isBlank","isIntervalOrLogScale","intervalScaleNiceTicks","getIntervalPrecision","fixExtent","increaseInterval","exp10","f","TYPE_DELIMITER","IS_CONTAINER","IS_EXTENDED_CLASS","parseClassType","typeArr","checkClassType","isExtendedClass","enableClassExtend","rootClz","mandatoryMethods","$constructor","extend","ExtendedClass","isESClass","superCall","superApply","Function","mountExtend","SubClz","SupperClz","classBase","enableClassCheck","classAttr","isInstance","enableClassManagement","makeContainer","componentTypeInfo","componentFullType","getClass","throwWhenNotFound","hasClass","getAllClassMainTypes","types","hasSubTypes","getUID","enableSubTypeDefaulter","subTypeDefaulters","determineSubType","componentTypeMain","enableTopologicalTravel","entity","dependencyGetter","makeDepndencyGraph","fullNameList","noEntryList","createDependencyGraphItem","originalDeps","availableDeps","getAvailableDependencies","entryCount","dependentName","predecessor","thatItem","successor","dep","topologicalTravel","targetNameList","targetNameSet","currComponentType","currVertex","isInTargetNameSet","removeEdgeAndAdd","removeEdge","succComponentType","inheritDefaultOption","superOption","subOption","findEventDispatcher","det","returnFirstMatch","found","__hostTarget","addCommas","parts","toCamelCase","upperCaseFirst","group1","normalizeCssArray","makeValueReadable","USER_READABLE_DEFUALT_TIME_PATTERN","stringToUserReadable","isNumberUserReadable","num","isTypeTime","isValueDate","numericResult","TPL_VAR_ALIAS","wrapVar","varName","formatTpl","paramsList","seriesLen","alias","getTooltipMarker","inOpt","convertToColorString","defaultColor","colorStops","windowOpen","blank","open","opener","location","href","_customShapeMap","extendShape","extendPathFromString","extendPath","pathData","registerShape","getShapeClass","makePath","centerGraphic","resizePath","makeImage","imageUrl","zrImg","onload","aspect","mergePath","pathRect","calculateTransform","subPixelOptimizeRect","getTransform","ancestor","mat","invert","transformDirection","hBase","vBase","vertex","isNotGroup","isPath","g1","g2","elMap1","getElMap","oldEl","newProp","getAnimatableProps","g","elMap","clipPointsByRect","clipRectByRect","targetRect","iconStr","innerOpts","rectHover","strokeNoScale","linePolygonIntersect","a1x","a1y","a2x","a2y","p","lineLineIntersect","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","crossProduct2d","nearZero","b1a1x","b1a1y","itemTooltipOption","itemTooltipOptionObj","formatterParamsExtra","traverseElement","stopped","els","getECData","setCommonECData","child","childECData","LOCATION_PARAMS","HV_NAMES","boxLayout","orient","maxHeight","currentLineMaxSize","eachChild","nextX","nextY","nextChild","childAt","nextChildRect","moveX","newline","moveY","getLayoutRect","positionInfo","containerRect","containerWidth","containerHeight","verticalMargin","horizontalMargin","fetchLayoutMode","ins","mergeLayoutParam","targetOption","hResult","vResult","hvIdx","newParams","newValueCount","merged","mergedValueCount","enoughParamNumber","hasProp","getLayoutParams","copyLayoutParams","deprecateLog","throwError","msg","DUMMY_COMPONENT_NAME_PREFIX","INTERNAL_COMPONENT_ID_PREFIX","normalizeToArray","defaultEmphasis","subOpts","subOptName","TEXT_STYLE_OPTIONS","getDataItemValue","isDataItemOption","mappingToExists","existings","newCmptOptions","mode","isNormalMergeMode","isReplaceMergeMode","isReplaceAllMode","existingIdIdxMap","cmptOption","prepareResult","mappingById","mappingByName","mappingByIndex","mappingInReplaceAllMode","makeIdAndName","isComponentIdInternal","optionId","makeComparableKey","existingIdx","keyExistAndEqual","nextIdx","mapResult","idMap","idNum","obj1","obj2","key1","convertOptionIdName","key2","defaultValue","isNameSpecified","setComponentTypeToKeyInfo","componentModelCtor","existComponent","queryDataIndex","makeInner","innerUniqueIndex","hostObj","parseFinder","finderInput","preParseFinder","others","queryOption","queryReferringComponents","parsedKey","queryType","includeMainTypes","SINGLE_REFERRING","userOption","indexOption","idOption","nameOption","specified","firstCmpt","setAttribute","getAttribute","getTooltipRenderMode","renderModeOption","RADIAN_EPSILON","ROUND_SUPPORTED_PRECISION_MAX","_trim","linearMap","domain","d0","d1","r1","subDomain","subRange","parsePercent","returnStr","getPrecision","getPrecisionSafe","eIndex","exp","significandPartLen","dotIndex","decimalPartLen","pixelExtent","LN10","dataQuantity","sizeQuantity","addSafe","val0","val1","maxPrecision","remRadian","radian","pi2","isRadianAroundZero","TIME_REG","parseDate","exec","hour","UTC","substring","quantity","quantityExponent","nice","nf","exponent","numericToNumber","valFloat","isNumeric","getRandomIdBase","getGreatestCommonDividor","getLeastCommonMultiple","_highlightNextDigit","_highlightKeyMap","getSavedStates","getComponentStates","HOVER_STATE_NORMAL","HOVER_STATE_BLUR","HOVER_STATE_EMPHASIS","SPECIAL_STATES","DISPLAY_STATES","Z2_EMPHASIS_LIFT","Z2_SELECT_LIFT","HIGHLIGHT_ACTION_TYPE","DOWNPLAY_ACTION_TYPE","SELECT_ACTION_TYPE","UNSELECT_ACTION_TYPE","TOGGLE_SELECT_ACTION_TYPE","hasFillOrStroke","fillOrStroke","liftedColorCache","liftColor","liftedColor","stop","doChangeHoverState","hoverStateEnum","onHoverStateChange","singleEnterEmphasis","singleLeaveEmphasis","singleEnterBlur","singleLeaveBlur","singleEnterSelect","singleLeaveSelect","updateElementState","updater","commonParam","traverseUpdateState","getFromStateStyle","toStateName","fromState","__fromStateTransition","targetName","saveTo","createEmphasisDefaultState","targetStates","hasSelect","cloned","fromFill","selectFill","normalFill","fromStroke","selectStroke","normalStroke","emphasisStyle","z2EmphasisLift","createSelectDefaultState","z2SelectLift","createBlurDefaultState","hasBlur","currentOpacity","blurStyle","elementStateProxy","setDefaultStateProxy","enterEmphasisWhenMouseOver","shouldSilent","__highByOuter","leaveEmphasisWhenMouseOut","__highDownSilentOnTouch","zrByTouch","allLeaveBlur","leaveBlurredSeries","allComponentViews","componentStates","isBlured","toggleBlurSeries","blurSeries","targetSeriesIndex","leaveBlurOfIndices","itemEl","targetSeriesModel","targetCoordSys","blurredSeries","sameSeries","sameCoordSys","dataTypes","blurComponent","focusBlurEnabled","blurSeriesFromHighlightPayload","focus_1","findComponentHighDownDispatchers","findHighDownDispatchers","handleGlobalMouseOverForHighDown","componentHighDownName","handleGlobalMouseOutForHighDown","toggleSelectionFromPayload","isSelectChangePayload","updateSeriesElementSelection","getAllSelectedIndices","enableHoverEmphasis","setAsHighDownDispatcher","enableHoverFocus","disableHoverEmphasis","toggleHoverEmphasis","isDisabled","OTHER_STATES","defaultStyleGetterMap","setStatesStylesFromModel","styleType","getter","asDispatcher","disable","extendedEl","highDownSilentOnTouch","__highDownDispatcher","isHighDownDispatcher","getHighlightDigit","highlightKey","isHighDownPayload","savePathStates","selectState","Triangle","lineTo","closePath","Diamond","Pin","w","h","asin","tanX","tanY","cpLen","cpLen2","bezierCurveTo","Arrow","symbolCtors","roundRect","square","circle","diamond","pin","triangle","symbolShapeMakers","symbolBuildProxies","SymbolClz","inBundle","proxySymbol","symbolPathSetColor","symbolStyle","__isEmptyBrush","createSymbol","keepAspect","symbolPath","substr","setColor","normalizeSymbolOffset","symbolOffset","ORIGIN_METHOD","RATE","THROTTLE_TYPE","debounce","currCall","debounceNextCall","lastCall","lastExec","timer","cbArgs","thisDelay","thisDebounce","debounceDelay","createOrUpdate","fnAttr","throttleType","originFn","lastThrottleType","lastRate","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","ONE_YEAR","defaultLeveledFormatter","year","day","minute","second","millisecond","none","fullDayFormatter","fullLeveledFormatter","primaryTimeUnits","timeUnits","pad","getPrimaryTimeUnit","timeUnit","isPrimaryTimeUnit","getDefaultFormatPrecisionOfInterval","template","fullYearGetterName","M","monthGetterName","dateGetterName","H","hoursGetterName","minutesGetterName","secondsGetterName","S","millisecondsGetterName","localeModel","timeModel","leveledFormat","defaults","mergedFormatter","inherit","getUnitFromValue","targetId","levelId","isSecond","isMinute","isHour","isDay","isMonth","isYear","getUnitValue","fullYearSetterName","monthSetterName","dateSetterName","hoursSetterName","minutesSetterName","secondsSetterName","millisecondsSetterName","VISUAL_DIMENSIONS","SOURCE_FORMAT_ORIGINAL","SOURCE_FORMAT_ARRAY_ROWS","SOURCE_FORMAT_OBJECT_ROWS","SOURCE_FORMAT_KEYED_COLUMNS","SOURCE_FORMAT_TYPED_ARRAY","SOURCE_FORMAT_UNKNOWN","SERIES_LAYOUT_BY_COLUMN","SERIES_LAYOUT_BY_ROW","renderPlanner","renderTaskPlan","renderTaskReset","highlight","toggleHighlight","markUpdateMethod","elSetState","progressMethodMap","isBlur"],"sourceRoot":""}