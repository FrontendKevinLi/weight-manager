"use strict";(self["webpackChunkweight_manager"]=self["webpackChunkweight_manager"]||[]).push([[570],{1453:function(e,t,i){i.r(t),i.d(t,{default:function(){return K}});var n=i(6252),o=i(3577),r=function(e){return(0,n.dD)("data-v-0a084dcc"),e=e(),(0,n.Cn)(),e},a={class:"weighing-item"},s={ref:"weighingItemBodyRef",class:"weighing-item-body"},l={ref:"circleInsideRef",class:"circle-inside"},c={class:"weighing-text"},u={class:"number"},f=r((function(){return(0,n._)("span",{class:"unit"},"KG",-1)})),d={ref:"pointerContainerRef",class:"pointer-container"},h={ref:"indicatorsRef",class:"indicators"},g={ref:"outerAnimationCircleRef",class:"outer-animation-cicle"};function m(e,t,i,r,m,v){var p=(0,n.up)("ProgressCircle2"),w=(0,n.up)("InlineSvg");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("div",s,[(0,n._)("div",l,[(0,n._)("span",c,[(0,n._)("span",u,(0,o.zw)(e.weight.displayValue),1),f])],512),(0,n.Wm)(p,{ref:"outerProgressCircleRef",config:e.outerProgressCircleConfig,class:"outer-progress-circle"},null,8,["config"]),(0,n._)("div",d,[(0,n.Wm)(w,{class:"pointer",src:e.PointerSvg},null,8,["src"])],512),(0,n._)("div",h,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(19,(function(e){return(0,n._)("div",{key:e,class:(0,o.C_)(["indicator","indicator-".concat(e)])},null,2)})),64))],512)],512),(0,n._)("div",g,null,512)])}var v=i(655),p=i(990),w=i(5317),C=i(2406),P=i(4952),y=i.n(P),k="M0,0 C0,0 0.158,0.556 0.182,0.646 0.238,0.894 0.264,1.2 0.362,1.2 0.407,1.2 0.448,1.143 0.472,1.03 0.479,0.995 0.51,0.869 0.58,0.869 0.656,0.869 0.684,1.046 0.742,1.046 0.794,1.046 0.826,0.983 0.872,0.983 0.914,0.983 1,1 1,1 ",_={customElasticPath:k},D=function(e){return(0,n.dD)("data-v-32a20062"),e=e(),(0,n.Cn)(),e},A={class:"progress-circle-2"},R={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 106 106",fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round",filter:"url(#shadow)"},x=D((function(){return(0,n._)("use",{"xlink:href":"#A",x:"3",y:"3"},null,-1)})),Z={id:"A",overflow:"visible"},b=["id"],G=D((function(){return(0,n._)("filter",{id:"shadow","color-interpolation-filters":"sRGB"},[(0,n._)("feDropShadow",{dx:"0",dy:"0",stdDeviation:"4","flood-opacity":"1","flood-color":"#3e63a2"})],-1)})),I=["stroke"];function T(e,t,i,r,a,s){return(0,n.wg)(),(0,n.iD)("div",A,[((0,n.wg)(),(0,n.iD)("svg",R,[x,(0,n._)("symbol",Z,[(0,n._)("defs",null,[(0,n._)("linearGradient",{id:e.id,x1:"1",x2:"0",y1:"1",y2:"0"},[(0,n._)("stop",{offset:"0",style:(0,o.j5)({stopColor:e.linearGradientFrom})},null,4),(0,n._)("stop",{offset:"1",style:(0,o.j5)({stopColor:e.linearGradientTo})},null,4)],8,b),G]),(0,n._)("path",{ref:"progress-path",d:"M50 0c27.7 0 50 22.3 50 50s-22.3 50-50 50S0 77.7 0 50 22.3 0 50 0z",fill:"none",stroke:"url(#".concat(e.id,")"),"stroke-dasharray":"204.17963469846285 314.1592653589793","stroke-width":"6"},null,8,I)])]))])}var $=i(7632);p.ZP.registerPlugin(C.Z);var W=(0,n.aZ)({name:"ProgressCircle2",props:{config:{type:Object,default:function(){return{colorConfig:{linearGradient:{from:"#e8ecf3",to:"#003584"}},animationConfig:{enabled:!0},percentage:1}},required:!0}},data:function(){return{strokeDasharray:314.1592653589793,id:"lg-".concat((0,$.Z)())}},computed:{strokeDashoffset:function(){var e=this.strokeDasharray*(1-this.config.percentage);return e},linearGradientFrom:function(){var e,t,i=(null===(e=this.config.colorConfig)||void 0===e?void 0:e.linearGradient)?this.config.colorConfig.linearGradient.from:null===(t=this.config.colorConfig)||void 0===t?void 0:t.color;return i},linearGradientTo:function(){var e,t,i,n,o=(null===(e=this.config.colorConfig)||void 0===e?void 0:e.linearGradient)?null===(i=null===(t=this.config.colorConfig)||void 0===t?void 0:t.linearGradient)||void 0===i?void 0:i.to:null===(n=this.config.colorConfig)||void 0===n?void 0:n.color;return o}},mounted:function(){this.initProgress()},methods:{initProgress:function(){var e,t=p.ZP.timeline();if(null===(e=this.config.animationConfig)||void 0===e?void 0:e.enabled)t.set(this.$refs["progress-path"],{strokeDasharray:"0 ".concat(this.strokeDasharray)});else{var i=.75*this.config.percentage;t.set(this.$refs["progress-path"],{strokeDasharray:"".concat(this.strokeDasharray*i," ").concat(this.strokeDasharray*(1-i))})}},fillProgress:function(){var e,t,i,n=p.ZP.timeline(),o=.75*this.config.percentage;n.to(this.$refs["progress-path"],{duration:(null===(e=this.config.animationConfig)||void 0===e?void 0:e.enabled)?this.config.animationConfig.duration:0,ease:C.Z.create("custom",_.customElasticPath),strokeDasharray:"".concat(this.strokeDasharray*o," ").concat(this.strokeDasharray*(1-o))},null!==(i=null===(t=this.config.animationConfig)||void 0===t?void 0:t.delay)&&void 0!==i?i:0)}}}),V=i(3744);const S=(0,V.Z)(W,[["render",T],["__scopeId","data-v-32a20062"]]);var M=S,O=i(864),j=i(723),E=i(120),B=i(3002),F=i.p+"img/location-dot-solid.d1d07fe1.svg";p.ZP.registerPlugin(C.Z);var J=(0,n.aZ)({name:"WeighingItem",components:{ProgressCircle2:M,InlineSvg:y()},data:function(){return{weight:{displayValue:"0.0",tweenValue:0,value:0,maxValue:200},animationConfig:{enabled:!0,duration:1,delay:"0.15"},monthlyRecord:{},initPointerRotateDeg:315,PointerSvg:F}},computed:{weighingPercentage:function(){var e=Math.min(1,this.weight.value/this.weight.maxValue);return e},outerProgressCircleConfig:function(){var e={percentage:this.weighingPercentage,colorConfig:{linearGradient:{from:"#314782",to:"#7bb1e0"}},animationConfig:this.animationConfig,stroke:{linecap:"round",width:6}};return e}},mounted:function(){return(0,v.mG)(this,void 0,void 0,(function(){var e,t=this;return(0,v.Jh)(this,(function(i){switch(i.label){case 0:return this.initPointerAnimation(),[4,Promise.allSettled([this.fadeInWeighingItem(),this.fetchMonthlyRecord()])];case 1:return i.sent(),e=this.$refs.outerProgressCircleRef,this.setWeight(),this.$nextTick((function(){return(0,v.mG)(t,void 0,void 0,(function(){return(0,v.Jh)(this,(function(t){switch(t.label){case 0:return e.fillProgress(),this.rotatePointer(),[4,this.animateWeightText()];case 1:return t.sent(),[2]}}))}))})),[2]}}))}))},methods:{fetchMonthlyRecord:function(){return(0,v.mG)(this,void 0,void 0,(function(){var e,t,i;return(0,v.Jh)(this,(function(n){switch(n.label){case 0:return e=E.ou.now(),[4,(0,O.C)((function(){return(0,j.$)(e)}))];case 1:return t=n.sent(),t.error?(i=(0,B.pm)(),i.error(t.error.message),[2]):(this.monthlyRecord=t.data,[2])}}))}))},setWeight:function(){this.weight.value=this.getWeightToday()},initPointerAnimation:function(){var e=p.ZP.timeline();e.set(".pointer-container",{rotate:this.initPointerRotateDeg})},rotatePointer:function(){var e=p.ZP.timeline(),t=270,i=this.weight.maxValue,n=Math.min(this.weight.value,this.weight.maxValue);e.to(".pointer-container",{rotate:this.initPointerRotateDeg+t/i*n,ease:C.Z.create("custom",_.customElasticPath),duration:this.animationConfig.duration},this.animationConfig.delay)},fadeInWeighingItem:function(){var e=this;return new Promise((function(t){var i=p.ZP.timeline(),n=e.$refs.circleInsideRef,o=e.$refs.outerProgressCircleRef,r=e.$refs.pointerContainerRef,a=e.$refs.indicatorsRef,s=e.$refs.outerAnimationCircleRef;null!=n&&null!=o&&null!=r&&null!=a&&null!=s&&(i.fromTo(s,{autoAlpha:1,scale:0},{autoAlpha:0,scale:1.75,ease:w.Au.easeInOut,rotate:360,duration:1.1}),i.fromTo(a,{autoAlpha:0,scale:0},{autoAlpha:1,scale:1,ease:w.Au.easeInOut,duration:1.1},.1),i.fromTo(r,{autoAlpha:0,scale:0},{autoAlpha:1,scale:1,ease:w.Au.easeInOut,duration:1.1},.1),i.fromTo(o.$el,{autoAlpha:0,scale:0},{autoAlpha:1,scale:1,duration:1.1,ease:w.Au.easeInOut},.1),i.fromTo(n,{autoAlpha:0,scale:0},{autoAlpha:1,scale:1,duration:1.1,ease:w.Au.easeOut},.6),i.then((function(){return t()})))}))},animateWeightText:function(){var e=this;return new Promise((function(t){var i=p.ZP.timeline();i.to(e.weight,{duration:e.animationConfig.duration,tweenValue:e.weight.value,ease:C.Z.create("custom",_.customElasticPath),onUpdate:function(){e.weight.displayValue=e.weight.tweenValue.toFixed(1)}},e.animationConfig.delay),i.then((function(){return t()}))}))},getWeightToday:function(){var e,t,i=E.ou.now(),n=null!==(t=null===(e=this.monthlyRecord[i.day])||void 0===e?void 0:e.weight)&&void 0!==t?t:0;return n}}});const z=(0,V.Z)(J,[["render",m],["__scopeId","data-v-0a084dcc"]]);var K=z}}]);
//# sourceMappingURL=570.19fc2f8b.js.map